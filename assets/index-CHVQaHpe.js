var gee=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var R4e=gee((vc,wc)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P6(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var aM={exports:{}},uS={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tV;function mee(){if(tV)return uS;tV=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,n,r){var o=null;if(r!==void 0&&(o=""+r),n.key!==void 0&&(o=""+n.key),"key"in n){r={};for(var a in n)a!=="key"&&(r[a]=n[a])}else r=n;return n=r.ref,{$$typeof:s,type:i,key:o,ref:n!==void 0?n:null,props:r}}return uS.Fragment=e,uS.jsx=t,uS.jsxs=t,uS}var iV;function pee(){return iV||(iV=1,aM.exports=mee()),aM.exports}var Ee=pee(),lM={exports:{}},fi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nV;function _ee(){if(nV)return fi;nV=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;function g(j){return j===null||typeof j!="object"?null:(j=d&&j[d]||j["@@iterator"],typeof j=="function"?j:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function S(j,ae,Te){this.props=j,this.context=ae,this.refs=C,this.updater=Te||_}S.prototype.isReactComponent={},S.prototype.setState=function(j,ae){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ae,"setState")},S.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function E(){}E.prototype=S.prototype;function x(j,ae,Te){this.props=j,this.context=ae,this.refs=C,this.updater=Te||_}var T=x.prototype=new E;T.constructor=x,b(T,S.prototype),T.isPureReactComponent=!0;var N=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function O(j,ae,Te,Le,Oe,Ne){return Te=Ne.ref,{$$typeof:s,type:j,key:ae,ref:Te!==void 0?Te:null,props:Ne}}function V(j,ae){return O(j.type,ae,void 0,void 0,void 0,j.props)}function U(j){return typeof j=="object"&&j!==null&&j.$$typeof===s}function Y(j){var ae={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Te){return ae[Te]})}var B=/\/+/g;function F(j,ae){return typeof j=="object"&&j!==null&&j.key!=null?Y(""+j.key):ae.toString(36)}function W(){}function ee(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(W,W):(j.status="pending",j.then(function(ae){j.status==="pending"&&(j.status="fulfilled",j.value=ae)},function(ae){j.status==="pending"&&(j.status="rejected",j.reason=ae)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function X(j,ae,Te,Le,Oe){var Ne=typeof j;(Ne==="undefined"||Ne==="boolean")&&(j=null);var Ke=!1;if(j===null)Ke=!0;else switch(Ne){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(j.$$typeof){case s:case e:Ke=!0;break;case h:return Ke=j._init,X(Ke(j._payload),ae,Te,Le,Oe)}}if(Ke)return Oe=Oe(j),Ke=Le===""?"."+F(j,0):Le,N(Oe)?(Te="",Ke!=null&&(Te=Ke.replace(B,"$&/")+"/"),X(Oe,ae,Te,"",function(tt){return tt})):Oe!=null&&(U(Oe)&&(Oe=V(Oe,Te+(Oe.key==null||j&&j.key===Oe.key?"":(""+Oe.key).replace(B,"$&/")+"/")+Ke)),ae.push(Oe)),1;Ke=0;var Dt=Le===""?".":Le+":";if(N(j))for(var Xe=0;Xe<j.length;Xe++)Le=j[Xe],Ne=Dt+F(Le,Xe),Ke+=X(Le,ae,Te,Ne,Oe);else if(Xe=g(j),typeof Xe=="function")for(j=Xe.call(j),Xe=0;!(Le=j.next()).done;)Le=Le.value,Ne=Dt+F(Le,Xe++),Ke+=X(Le,ae,Te,Ne,Oe);else if(Ne==="object"){if(typeof j.then=="function")return X(ee(j),ae,Te,Le,Oe);throw ae=String(j),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function $(j,ae,Te){if(j==null)return j;var Le=[],Oe=0;return X(j,Le,"","",function(Ne){return ae.call(Te,Ne,Oe++)}),Le}function te(j){if(j._status===-1){var ae=j._result;ae=ae(),ae.then(function(Te){(j._status===0||j._status===-1)&&(j._status=1,j._result=Te)},function(Te){(j._status===0||j._status===-1)&&(j._status=2,j._result=Te)}),j._status===-1&&(j._status=0,j._result=ae)}if(j._status===1)return j._result.default;throw j._result}var ce=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function he(){}return fi.Children={map:$,forEach:function(j,ae,Te){$(j,function(){ae.apply(this,arguments)},Te)},count:function(j){var ae=0;return $(j,function(){ae++}),ae},toArray:function(j){return $(j,function(ae){return ae})||[]},only:function(j){if(!U(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},fi.Component=S,fi.Fragment=t,fi.Profiler=n,fi.PureComponent=x,fi.StrictMode=i,fi.Suspense=l,fi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,fi.__COMPILER_RUNTIME={__proto__:null,c:function(j){return A.H.useMemoCache(j)}},fi.cache=function(j){return function(){return j.apply(null,arguments)}},fi.cloneElement=function(j,ae,Te){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Le=b({},j.props),Oe=j.key,Ne=void 0;if(ae!=null)for(Ke in ae.ref!==void 0&&(Ne=void 0),ae.key!==void 0&&(Oe=""+ae.key),ae)!P.call(ae,Ke)||Ke==="key"||Ke==="__self"||Ke==="__source"||Ke==="ref"&&ae.ref===void 0||(Le[Ke]=ae[Ke]);var Ke=arguments.length-2;if(Ke===1)Le.children=Te;else if(1<Ke){for(var Dt=Array(Ke),Xe=0;Xe<Ke;Xe++)Dt[Xe]=arguments[Xe+2];Le.children=Dt}return O(j.type,Oe,void 0,void 0,Ne,Le)},fi.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:r,_context:j},j},fi.createElement=function(j,ae,Te){var Le,Oe={},Ne=null;if(ae!=null)for(Le in ae.key!==void 0&&(Ne=""+ae.key),ae)P.call(ae,Le)&&Le!=="key"&&Le!=="__self"&&Le!=="__source"&&(Oe[Le]=ae[Le]);var Ke=arguments.length-2;if(Ke===1)Oe.children=Te;else if(1<Ke){for(var Dt=Array(Ke),Xe=0;Xe<Ke;Xe++)Dt[Xe]=arguments[Xe+2];Oe.children=Dt}if(j&&j.defaultProps)for(Le in Ke=j.defaultProps,Ke)Oe[Le]===void 0&&(Oe[Le]=Ke[Le]);return O(j,Ne,void 0,void 0,null,Oe)},fi.createRef=function(){return{current:null}},fi.forwardRef=function(j){return{$$typeof:a,render:j}},fi.isValidElement=U,fi.lazy=function(j){return{$$typeof:h,_payload:{_status:-1,_result:j},_init:te}},fi.memo=function(j,ae){return{$$typeof:c,type:j,compare:ae===void 0?null:ae}},fi.startTransition=function(j){var ae=A.T,Te={};A.T=Te;try{var Le=j(),Oe=A.S;Oe!==null&&Oe(Te,Le),typeof Le=="object"&&Le!==null&&typeof Le.then=="function"&&Le.then(he,ce)}catch(Ne){ce(Ne)}finally{A.T=ae}},fi.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},fi.use=function(j){return A.H.use(j)},fi.useActionState=function(j,ae,Te){return A.H.useActionState(j,ae,Te)},fi.useCallback=function(j,ae){return A.H.useCallback(j,ae)},fi.useContext=function(j){return A.H.useContext(j)},fi.useDebugValue=function(){},fi.useDeferredValue=function(j,ae){return A.H.useDeferredValue(j,ae)},fi.useEffect=function(j,ae,Te){var Le=A.H;if(typeof Te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Le.useEffect(j,ae)},fi.useId=function(){return A.H.useId()},fi.useImperativeHandle=function(j,ae,Te){return A.H.useImperativeHandle(j,ae,Te)},fi.useInsertionEffect=function(j,ae){return A.H.useInsertionEffect(j,ae)},fi.useLayoutEffect=function(j,ae){return A.H.useLayoutEffect(j,ae)},fi.useMemo=function(j,ae){return A.H.useMemo(j,ae)},fi.useOptimistic=function(j,ae){return A.H.useOptimistic(j,ae)},fi.useReducer=function(j,ae,Te){return A.H.useReducer(j,ae,Te)},fi.useRef=function(j){return A.H.useRef(j)},fi.useState=function(j){return A.H.useState(j)},fi.useSyncExternalStore=function(j,ae,Te){return A.H.useSyncExternalStore(j,ae,Te)},fi.useTransition=function(){return A.H.useTransition()},fi.version="19.1.1",fi}var sV;function B6(){return sV||(sV=1,lM.exports=_ee()),lM.exports}var Ye=B6();const Cw=P6(Ye);var cM={exports:{}},hS={},uM={exports:{}},hM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rV;function bee(){return rV||(rV=1,(function(s){function e($,te){var ce=$.length;$.push(te);e:for(;0<ce;){var he=ce-1>>>1,j=$[he];if(0<n(j,te))$[he]=te,$[ce]=j,ce=he;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var te=$[0],ce=$.pop();if(ce!==te){$[0]=ce;e:for(var he=0,j=$.length,ae=j>>>1;he<ae;){var Te=2*(he+1)-1,Le=$[Te],Oe=Te+1,Ne=$[Oe];if(0>n(Le,ce))Oe<j&&0>n(Ne,Le)?($[he]=Ne,$[Oe]=ce,he=Oe):($[he]=Le,$[Te]=ce,he=Te);else if(Oe<j&&0>n(Ne,ce))$[he]=Ne,$[Oe]=ce,he=Oe;else break e}}return te}function n($,te){var ce=$.sortIndex-te.sortIndex;return ce!==0?ce:$.id-te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();s.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,g=3,_=!1,b=!1,C=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N($){for(var te=t(c);te!==null;){if(te.callback===null)i(c);else if(te.startTime<=$)i(c),te.sortIndex=te.expirationTime,e(l,te);else break;te=t(c)}}function A($){if(C=!1,N($),!b)if(t(l)!==null)b=!0,P||(P=!0,F());else{var te=t(c);te!==null&&X(A,te.startTime-$)}}var P=!1,O=-1,V=5,U=-1;function Y(){return S?!0:!(s.unstable_now()-U<V)}function B(){if(S=!1,P){var $=s.unstable_now();U=$;var te=!0;try{e:{b=!1,C&&(C=!1,x(O),O=-1),_=!0;var ce=g;try{t:{for(N($),d=t(l);d!==null&&!(d.expirationTime>$&&Y());){var he=d.callback;if(typeof he=="function"){d.callback=null,g=d.priorityLevel;var j=he(d.expirationTime<=$);if($=s.unstable_now(),typeof j=="function"){d.callback=j,N($),te=!0;break t}d===t(l)&&i(l),N($)}else i(l);d=t(l)}if(d!==null)te=!0;else{var ae=t(c);ae!==null&&X(A,ae.startTime-$),te=!1}}break e}finally{d=null,g=ce,_=!1}te=void 0}}finally{te?F():P=!1}}}var F;if(typeof T=="function")F=function(){T(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ee=W.port2;W.port1.onmessage=B,F=function(){ee.postMessage(null)}}else F=function(){E(B,0)};function X($,te){O=E(function(){$(s.unstable_now())},te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return g},s.unstable_next=function($){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var ce=g;g=te;try{return $()}finally{g=ce}},s.unstable_requestPaint=function(){S=!0},s.unstable_runWithPriority=function($,te){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ce=g;g=$;try{return te()}finally{g=ce}},s.unstable_scheduleCallback=function($,te,ce){var he=s.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?he+ce:he):ce=he,$){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ce+j,$={id:h++,callback:te,priorityLevel:$,startTime:ce,expirationTime:j,sortIndex:-1},ce>he?($.sortIndex=ce,e(c,$),t(l)===null&&$===t(c)&&(C?(x(O),O=-1):C=!0,X(A,ce-he))):($.sortIndex=j,e(l,$),b||_||(b=!0,P||(P=!0,F()))),$},s.unstable_shouldYield=Y,s.unstable_wrapCallback=function($){var te=g;return function(){var ce=g;g=te;try{return $.apply(this,arguments)}finally{g=ce}}}})(hM)),hM}var oV;function vee(){return oV||(oV=1,uM.exports=bee()),uM.exports}var dM={exports:{}},$o={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aV;function wee(){if(aV)return $o;aV=1;var s=B6();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},n=Symbol.for("react.portal");function r(l,c,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:d==null?null:""+d,children:l,containerInfo:c,implementation:h}}var o=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return $o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$o.createPortal=function(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return r(l,c,null,h)},$o.flushSync=function(l){var c=o.T,h=i.p;try{if(o.T=null,i.p=2,l)return l()}finally{o.T=c,i.p=h,i.d.f()}},$o.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,i.d.C(l,c))},$o.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},$o.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var h=c.as,d=a(h,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,_=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?i.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:g,fetchPriority:_}):h==="script"&&i.d.X(l,{crossOrigin:d,integrity:g,fetchPriority:_,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},$o.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=a(c.as,c.crossOrigin);i.d.M(l,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&i.d.M(l)},$o.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,d=a(h,c.crossOrigin);i.d.L(l,h,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},$o.preloadModule=function(l,c){if(typeof l=="string")if(c){var h=a(c.as,c.crossOrigin);i.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else i.d.m(l)},$o.requestFormReset=function(l){i.d.r(l)},$o.unstable_batchedUpdates=function(l,c){return l(c)},$o.useFormState=function(l,c,h){return o.H.useFormState(l,c,h)},$o.useFormStatus=function(){return o.H.useHostTransitionStatus()},$o.version="19.1.1",$o}var lV;function Cee(){if(lV)return dM.exports;lV=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),dM.exports=wee(),dM.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cV;function yee(){if(cV)return hS;cV=1;var s=vee(),e=B6(),t=Cee();function i(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function r(u){var f=u,m=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(m=f.return),u=f.return;while(u)}return f.tag===3?m:null}function o(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function a(u){if(r(u)!==u)throw Error(i(188))}function l(u){var f=u.alternate;if(!f){if(f=r(u),f===null)throw Error(i(188));return f!==u?null:u}for(var m=u,w=f;;){var L=m.return;if(L===null)break;var D=L.alternate;if(D===null){if(w=L.return,w!==null){m=w;continue}break}if(L.child===D.child){for(D=L.child;D;){if(D===m)return a(L),u;if(D===w)return a(L),f;D=D.sibling}throw Error(i(188))}if(m.return!==w.return)m=L,w=D;else{for(var H=!1,K=L.child;K;){if(K===m){H=!0,m=L,w=D;break}if(K===w){H=!0,w=L,m=D;break}K=K.sibling}if(!H){for(K=D.child;K;){if(K===m){H=!0,m=D,w=L;break}if(K===w){H=!0,w=D,m=L;break}K=K.sibling}if(!H)throw Error(i(189))}}if(m.alternate!==w)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var h=Object.assign,d=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function F(u){return u===null||typeof u!="object"?null:(u=B&&u[B]||u["@@iterator"],typeof u=="function"?u:null)}var W=Symbol.for("react.client.reference");function ee(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===W?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case S:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList";case U:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case _:return"Portal";case T:return(u.displayName||"Context")+".Provider";case x:return(u._context.displayName||"Context")+".Consumer";case N:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case O:return f=u.displayName||null,f!==null?f:ee(u.type)||"Memo";case V:f=u._payload,u=u._init;try{return ee(u(f))}catch{}}return null}var X=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},he=[],j=-1;function ae(u){return{current:u}}function Te(u){0>j||(u.current=he[j],he[j]=null,j--)}function Le(u,f){j++,he[j]=u.current,u.current=f}var Oe=ae(null),Ne=ae(null),Ke=ae(null),Dt=ae(null);function Xe(u,f){switch(Le(Ke,f),Le(Ne,u),Le(Oe,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?Qn(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=Qn(f),u=ls(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}Te(Oe),Le(Oe,u)}function tt(){Te(Oe),Te(Ne),Te(Ke)}function Et(u){u.memoizedState!==null&&Le(Dt,u);var f=Oe.current,m=ls(f,u.type);f!==m&&(Le(Ne,u),Le(Oe,m))}function jt(u){Ne.current===u&&(Te(Oe),Te(Ne)),Dt.current===u&&(Te(Dt),bm._currentValue=ce)}var ii=Object.prototype.hasOwnProperty,Ci=s.unstable_scheduleCallback,ri=s.unstable_cancelCallback,Tn=s.unstable_shouldYield,Pl=s.unstable_requestPaint,on=s.unstable_now,Bl=s.unstable_getCurrentPriorityLevel,Fl=s.unstable_ImmediatePriority,Hr=s.unstable_UserBlockingPriority,is=s.unstable_NormalPriority,Ua=s.unstable_LowPriority,To=s.unstable_IdlePriority,lr=s.log,js=s.unstable_setDisableYieldValue,Wr=null,pn=null;function ns(u){if(typeof lr=="function"&&js(u),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(Wr,u)}catch{}}var jn=Math.clz32?Math.clz32:oa,Ds=Math.log,Vl=Math.LN2;function oa(u){return u>>>=0,u===0?32:31-(Ds(u)/Vl|0)|0}var to=256,hs=4194304;function ss(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function io(u,f,m){var w=u.pendingLanes;if(w===0)return 0;var L=0,D=u.suspendedLanes,H=u.pingedLanes;u=u.warmLanes;var K=w&134217727;return K!==0?(w=K&~D,w!==0?L=ss(w):(H&=K,H!==0?L=ss(H):m||(m=K&~u,m!==0&&(L=ss(m))))):(K=w&~D,K!==0?L=ss(K):H!==0?L=ss(H):m||(m=w&~u,m!==0&&(L=ss(m)))),L===0?0:f!==0&&f!==L&&(f&D)===0&&(D=L&-L,m=f&-f,D>=m||D===32&&(m&4194048)!==0)?f:L}function cr(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function Hl(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ns(){var u=to;return to<<=1,(to&4194048)===0&&(to=256),u}function Wl(){var u=hs;return hs<<=1,(hs&62914560)===0&&(hs=4194304),u}function qa(u){for(var f=[],m=0;31>m;m++)f.push(u);return f}function Bi(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Do(u,f,m,w,L,D){var H=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var K=u.entanglements,oe=u.expirationTimes,ye=u.hiddenUpdates;for(m=H&~m;0<m;){var Pe=31-jn(m),We=1<<Pe;K[Pe]=0,oe[Pe]=-1;var ke=ye[Pe];if(ke!==null)for(ye[Pe]=null,Pe=0;Pe<ke.length;Pe++){var Se=ke[Pe];Se!==null&&(Se.lane&=-536870913)}m&=~We}w!==0&&$a(u,w,0),D!==0&&L===0&&u.tag!==0&&(u.suspendedLanes|=D&~(H&~f))}function $a(u,f,m){u.pendingLanes|=f,u.suspendedLanes&=~f;var w=31-jn(f);u.entangledLanes|=f,u.entanglements[w]=u.entanglements[w]|1073741824|m&4194090}function zl(u,f){var m=u.entangledLanes|=f;for(u=u.entanglements;m;){var w=31-jn(m),L=1<<w;L&f|u[w]&f&&(u[w]|=f),m&=~L}}function aa(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function la(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function No(){var u=te.p;return u!==0?u:(u=window.event,u===void 0?32:sT(u.type))}function _h(u,f){var m=te.p;try{return te.p=u,f()}finally{te.p=m}}var ys=Math.random().toString(36).slice(2),Mn="__reactFiber$"+ys,Is="__reactProps$"+ys,rs="__reactContainer$"+ys,ca="__reactEvents$"+ys,kc="__reactListeners$"+ys,ds="__reactHandles$"+ys,fu="__reactResources$"+ys,ja="__reactMarker$"+ys;function xr(u){delete u[Mn],delete u[Is],delete u[ca],delete u[kc],delete u[ds]}function ua(u){var f=u[Mn];if(f)return f;for(var m=u.parentNode;m;){if(f=m[rs]||m[Mn]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(u=jE(u);u!==null;){if(m=u[Mn])return m;u=jE(u)}return f}u=m,m=u.parentNode}return null}function ha(u){if(u=u[Mn]||u[rs]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function Dn(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(i(33))}function da(u){var f=u[fu];return f||(f=u[fu]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Gn(u){u[ja]=!0}var pt=new Set,me={};function je(u,f){st(u,f),st(u+"Capture",f)}function st(u,f){for(me[u]=f,u=0;u<f.length;u++)pt.add(f[u])}var Di=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),os={},Cn={};function As(u){return ii.call(Cn,u)?!0:ii.call(os,u)?!1:Di.test(u)?Cn[u]=!0:(os[u]=!0,!1)}function Gs(u,f,m){if(As(f))if(m===null)u.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+m)}}function kr(u,f,m){if(m===null)u.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+m)}}function en(u,f,m,w){if(w===null)u.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(f,m,""+w)}}var Io,Er;function Ga(u){if(Io===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);Io=f&&f[1]||"",Er=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Io+u+Er}var Kd=!1;function Yd(u,f){if(!u||Kd)return"";Kd=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Se){var ke=Se}Reflect.construct(u,[],We)}else{try{We.call()}catch(Se){ke=Se}u.call(We.prototype)}}else{try{throw Error()}catch(Se){ke=Se}(We=u())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(Se){if(Se&&ke&&typeof Se.stack=="string")return[Se.stack,ke.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=w.DetermineComponentFrameRoot(),H=D[0],K=D[1];if(H&&K){var oe=H.split(`
`),ye=K.split(`
`);for(L=w=0;w<oe.length&&!oe[w].includes("DetermineComponentFrameRoot");)w++;for(;L<ye.length&&!ye[L].includes("DetermineComponentFrameRoot");)L++;if(w===oe.length||L===ye.length)for(w=oe.length-1,L=ye.length-1;1<=w&&0<=L&&oe[w]!==ye[L];)L--;for(;1<=w&&0<=L;w--,L--)if(oe[w]!==ye[L]){if(w!==1||L!==1)do if(w--,L--,0>L||oe[w]!==ye[L]){var Pe=`
`+oe[w].replace(" at new "," at ");return u.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",u.displayName)),Pe}while(1<=w&&0<=L);break}}}finally{Kd=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?Ga(m):""}function xp(u){switch(u.tag){case 26:case 27:case 5:return Ga(u.type);case 16:return Ga("Lazy");case 13:return Ga("Suspense");case 19:return Ga("SuspenseList");case 0:case 15:return Yd(u.type,!1);case 11:return Yd(u.type.render,!1);case 1:return Yd(u.type,!0);case 31:return Ga("Activity");default:return""}}function Zd(u){try{var f="";do f+=xp(u),u=u.return;while(u);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Tr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Ec(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function gu(u){var f=Ec(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),w=""+u[f];if(!u.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var L=m.get,D=m.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return L.call(this)},set:function(H){w=""+H,D.call(this,H)}}),Object.defineProperty(u,f,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(H){w=""+H},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Ka(u){u._valueTracker||(u._valueTracker=gu(u))}function bh(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var m=f.getValue(),w="";return u&&(w=Ec(u)?u.checked?"true":"false":u.value),u=w,u!==m?(f.setValue(u),!0):!1}function Ya(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Ig=/[\n"\\]/g;function zr(u){return u.replace(Ig,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function vh(u,f,m,w,L,D,H,K){u.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?u.type=H:u.removeAttribute("type"),f!=null?H==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+Tr(f)):u.value!==""+Tr(f)&&(u.value=""+Tr(f)):H!=="submit"&&H!=="reset"||u.removeAttribute("value"),f!=null?Ul(u,H,Tr(f)):m!=null?Ul(u,H,Tr(m)):w!=null&&u.removeAttribute("value"),L==null&&D!=null&&(u.defaultChecked=!!D),L!=null&&(u.checked=L&&typeof L!="function"&&typeof L!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?u.name=""+Tr(K):u.removeAttribute("name")}function Xd(u,f,m,w,L,D,H,K){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.type=D),f!=null||m!=null){if(!(D!=="submit"&&D!=="reset"||f!=null))return;m=m!=null?""+Tr(m):"",f=f!=null?""+Tr(f):m,K||f===u.value||(u.value=f),u.defaultValue=f}w=w??L,w=typeof w!="function"&&typeof w!="symbol"&&!!w,u.checked=K?u.checked:!!w,u.defaultChecked=!!w,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(u.name=H)}function Ul(u,f,m){f==="number"&&Ya(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function Tc(u,f,m,w){if(u=u.options,f){f={};for(var L=0;L<m.length;L++)f["$"+m[L]]=!0;for(m=0;m<u.length;m++)L=f.hasOwnProperty("$"+u[m].value),u[m].selected!==L&&(u[m].selected=L),L&&w&&(u[m].defaultSelected=!0)}else{for(m=""+Tr(m),f=null,L=0;L<u.length;L++){if(u[L].value===m){u[L].selected=!0,w&&(u[L].defaultSelected=!0);return}f!==null||u[L].disabled||(f=u[L])}f!==null&&(f.selected=!0)}}function Qd(u,f,m){if(f!=null&&(f=""+Tr(f),f!==u.value&&(u.value=f),m==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=m!=null?""+Tr(m):""}function Za(u,f,m,w){if(f==null){if(w!=null){if(m!=null)throw Error(i(92));if(X(w)){if(1<w.length)throw Error(i(93));w=w[0]}m=w}m==null&&(m=""),f=m}m=Tr(f),u.defaultValue=m,w=u.textContent,w===m&&w!==""&&w!==null&&(u.value=w)}function Rs(u,f){if(f){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=f;return}}u.textContent=f}var Ur=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fa(u,f,m){var w=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?w?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":w?u.setProperty(f,m):typeof m!="number"||m===0||Ur.has(f)?f==="float"?u.cssFloat=m:u[f]=(""+m).trim():u[f]=m+"px"}function Jd(u,f,m){if(f!=null&&typeof f!="object")throw Error(i(62));if(u=u.style,m!=null){for(var w in m)!m.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?u.setProperty(w,""):w==="float"?u.cssFloat="":u[w]="");for(var L in f)w=f[L],f.hasOwnProperty(L)&&m[L]!==w&&fa(u,L,w)}else for(var D in f)f.hasOwnProperty(D)&&fa(u,D,f[D])}function Ao(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ag=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mu(u){return Rg.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var wh=null;function Ch(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var fs=null,ql=null;function yh(u){var f=ha(u);if(f&&(u=f.stateNode)){var m=u[Is]||null;e:switch(u=f.stateNode,f.type){case"input":if(vh(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+zr(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var w=m[f];if(w!==u&&w.form===u.form){var L=w[Is]||null;if(!L)throw Error(i(90));vh(w,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(f=0;f<m.length;f++)w=m[f],w.form===u.form&&bh(w)}break e;case"textarea":Qd(u,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&Tc(u,!!m.multiple,f,!1)}}}var Dc=!1;function Sh(u,f,m){if(Dc)return u(f,m);Dc=!0;try{var w=u(f);return w}finally{if(Dc=!1,(fs!==null||ql!==null)&&(Gb(),fs&&(f=fs,u=ql,ql=fs=null,yh(f),u)))for(f=0;f<u.length;f++)yh(u[f])}}function Xa(u,f){var m=u.stateNode;if(m===null)return null;var w=m[Is]||null;if(w===null)return null;m=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(u=u.type,w=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!w;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(i(231,f,typeof m));return m}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nc=!1;if(ga)try{var $l={};Object.defineProperty($l,"passive",{get:function(){Nc=!0}}),window.addEventListener("test",$l,$l),window.removeEventListener("test",$l,$l)}catch{Nc=!1}var ma=null,Ro=null,pu=null;function Lh(){if(pu)return pu;var u,f=Ro,m=f.length,w,L="value"in ma?ma.value:ma.textContent,D=L.length;for(u=0;u<m&&f[u]===L[u];u++);var H=m-u;for(w=1;w<=H&&f[m-w]===L[D-w];w++);return pu=L.slice(u,1<w?1-w:void 0)}function Xi(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function Fi(){return!0}function M(){return!1}function Z(u){function f(m,w,L,D,H){this._reactName=m,this._targetInst=L,this.type=w,this.nativeEvent=D,this.target=H,this.currentTarget=null;for(var K in u)u.hasOwnProperty(K)&&(m=u[K],this[K]=m?m(D):D[K]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Fi:M,this.isPropagationStopped=M,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),f}var le={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ae=Z(le),Ft=h({},le,{view:0,detail:0}),yt=Z(Ft),yi,Si,oi,Li=h({},Ft,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ac,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==oi&&(oi&&u.type==="mousemove"?(yi=u.screenX-oi.screenX,Si=u.screenY-oi.screenY):Si=yi=0,oi=u),yi)},movementY:function(u){return"movementY"in u?u.movementY:Si}}),On=Z(Li),Dr=h({},Li,{dataTransfer:0}),as=Z(Dr),un=h({},Ft,{relatedTarget:0}),gs=Z(un),jl=h({},le,{animationName:0,elapsedTime:0,pseudoElement:0}),Qa=Z(jl),Ic=h({},le,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),kp=Z(Ic),ef=h({},le,{data:0}),Ks=Z(ef),r4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ja={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rk(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=o4[u])?!!f[u]:!1}function Ac(){return rk}var Q0=h({},Ft,{key:function(u){if(u.key){var f=r4[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Xi(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Ja[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ac,charCode:function(u){return u.type==="keypress"?Xi(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Xi(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),BC=Z(Q0),Kn=h({},Li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=Z(Kn),FC=h({},Ft,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ac}),a4=Z(FC),VC=h({},le,{propertyName:0,elapsedTime:0,pseudoElement:0}),l4=Z(VC),c4=h({},Li,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),u4=Z(c4),ok=h({},le,{newState:0,oldState:0}),J0=Z(ok),Mg=[9,13,27,32],HC=ga&&"CompositionEvent"in window,Og=null;ga&&"documentMode"in document&&(Og=document.documentMode);var ak=ga&&"TextEvent"in window&&!Og,eb=ga&&(!HC||Og&&8<Og&&11>=Og),tb=" ",WC=!1;function lk(u,f){switch(u){case"keyup":return Mg.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ib(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var xh=!1;function h4(u,f){switch(u){case"compositionend":return ib(f);case"keypress":return f.which!==32?null:(WC=!0,tb);case"textInput":return u=f.data,u===tb&&WC?null:u;default:return null}}function ck(u,f){if(xh)return u==="compositionend"||!HC&&lk(u,f)?(u=Lh(),pu=Ro=ma=null,xh=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return eb&&f.locale!=="ko"?null:f.data;default:return null}}var pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nb(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!pa[u.type]:f==="textarea"}function Pg(u,f,m,w){fs?ql?ql.push(w):ql=[w]:fs=w,f=ev(f,"onChange"),0<f.length&&(m=new Ae("onChange","change",null,m,w),u.push({event:m,listeners:f}))}var Bg=null,Fg=null;function d4(u){FE(u,0)}function sb(u){var f=Dn(u);if(bh(f))return u}function uk(u,f){if(u==="change")return f}var hk=!1;if(ga){var zC;if(ga){var kh="oninput"in document;if(!kh){var dk=document.createElement("div");dk.setAttribute("oninput","return;"),kh=typeof dk.oninput=="function"}zC=kh}else zC=!1;hk=zC&&(!document.documentMode||9<document.documentMode)}function fk(){Bg&&(Bg.detachEvent("onpropertychange",rb),Fg=Bg=null)}function rb(u){if(u.propertyName==="value"&&sb(Fg)){var f=[];Pg(f,Fg,u,Ch(u)),Sh(d4,f)}}function gk(u,f,m){u==="focusin"?(fk(),Bg=f,Fg=m,Bg.attachEvent("onpropertychange",rb)):u==="focusout"&&fk()}function Eh(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return sb(Fg)}function ob(u,f){if(u==="click")return sb(f)}function f4(u,f){if(u==="input"||u==="change")return sb(f)}function g4(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var _a=typeof Object.is=="function"?Object.is:g4;function Rc(u,f){if(_a(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var m=Object.keys(u),w=Object.keys(f);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var L=m[w];if(!ii.call(f,L)||!_a(u[L],f[L]))return!1}return!0}function el(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function UC(u,f){var m=el(u);u=0;for(var w;m;){if(m.nodeType===3){if(w=u+m.textContent.length,u<=f&&w>=f)return{node:m,offset:f-u};u=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=el(m)}}function mk(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?mk(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function pk(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Ya(u.document);f instanceof u.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)u=f.contentWindow;else break;f=Ya(u.document)}return f}function qC(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var m4=ga&&"documentMode"in document&&11>=document.documentMode,Vg=null,Th=null,_e=null,Me=!1;function De(u,f,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Me||Vg==null||Vg!==Ya(w)||(w=Vg,"selectionStart"in w&&qC(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),_e&&Rc(_e,w)||(_e=w,w=ev(Th,"onSelect"),0<w.length&&(f=new Ae("onSelect","select",null,f,m),u.push({event:f,listeners:w}),f.target=Vg)))}function ct(u,f){var m={};return m[u.toLowerCase()]=f.toLowerCase(),m["Webkit"+u]="webkit"+f,m["Moz"+u]="moz"+f,m}var Vt={animationend:ct("Animation","AnimationEnd"),animationiteration:ct("Animation","AnimationIteration"),animationstart:ct("Animation","AnimationStart"),transitionrun:ct("Transition","TransitionRun"),transitionstart:ct("Transition","TransitionStart"),transitioncancel:ct("Transition","TransitionCancel"),transitionend:ct("Transition","TransitionEnd")},Vi={},Ms={};ga&&(Ms=document.createElement("div").style,"AnimationEvent"in window||(delete Vt.animationend.animation,delete Vt.animationiteration.animation,delete Vt.animationstart.animation),"TransitionEvent"in window||delete Vt.transitionend.transition);function Hi(u){if(Vi[u])return Vi[u];if(!Vt[u])return u;var f=Vt[u],m;for(m in f)if(f.hasOwnProperty(m)&&m in Ms)return Vi[u]=f[m];return u}var ab=Hi("animationend"),_k=Hi("animationiteration"),ba=Hi("animationstart"),lb=Hi("transitionrun"),p4=Hi("transitionstart"),Hg=Hi("transitioncancel"),Ep=Hi("transitionend"),Tp=new Map,tn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tn.push("scrollEnd");function Gl(u,f){Tp.set(u,f),je(f,[u])}var $C=new WeakMap;function no(u,f){if(typeof u=="object"&&u!==null){var m=$C.get(u);return m!==void 0?m:(f={value:u,source:f,stack:Zd(f)},$C.set(u,f),f)}return{value:u,source:f,stack:Zd(f)}}var tl=[],Wg=0,jC=0;function tf(){for(var u=Wg,f=jC=Wg=0;f<u;){var m=tl[f];tl[f++]=null;var w=tl[f];tl[f++]=null;var L=tl[f];tl[f++]=null;var D=tl[f];if(tl[f++]=null,w!==null&&L!==null){var H=w.pending;H===null?L.next=L:(L.next=H.next,H.next=L),w.pending=L}D!==0&&Dp(m,L,D)}}function Kl(u,f,m,w){tl[Wg++]=u,tl[Wg++]=f,tl[Wg++]=m,tl[Wg++]=w,jC|=w,u.lanes|=w,u=u.alternate,u!==null&&(u.lanes|=w)}function zg(u,f,m,w){return Kl(u,f,m,w),Np(u)}function nf(u,f){return Kl(u,null,null,f),Np(u)}function Dp(u,f,m){u.lanes|=m;var w=u.alternate;w!==null&&(w.lanes|=m);for(var L=!1,D=u.return;D!==null;)D.childLanes|=m,w=D.alternate,w!==null&&(w.childLanes|=m),D.tag===22&&(u=D.stateNode,u===null||u._visibility&1||(L=!0)),u=D,D=D.return;return u.tag===3?(D=u.stateNode,L&&f!==null&&(L=31-jn(m),u=D.hiddenUpdates,w=u[L],w===null?u[L]=[f]:w.push(f),f.lane=m|536870912),D):null}function Np(u){if(50<um)throw um=0,Hy=null,Error(i(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var sf={};function cb(u,f,m,w){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mo(u,f,m,w){return new cb(u,f,m,w)}function rf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function so(u,f){var m=u.alternate;return m===null?(m=Mo(u.tag,f,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=f,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,f=u.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function Ip(u,f){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,f=m.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function ub(u,f,m,w,L,D){var H=0;if(w=u,typeof u=="function")rf(u)&&(H=1);else if(typeof u=="string")H=G4(u,m,Oe.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case U:return u=Mo(31,m,f,L),u.elementType=U,u.lanes=D,u;case b:return of(m.children,L,D,f);case C:H=8,L|=24;break;case S:return u=Mo(12,m,f,L|2),u.elementType=S,u.lanes=D,u;case A:return u=Mo(13,m,f,L),u.elementType=A,u.lanes=D,u;case P:return u=Mo(19,m,f,L),u.elementType=P,u.lanes=D,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case E:case T:H=10;break e;case x:H=9;break e;case N:H=11;break e;case O:H=14;break e;case V:H=16,w=null;break e}H=29,m=Error(i(130,u===null?"null":typeof u,"")),w=null}return f=Mo(H,m,f,L),f.elementType=u,f.type=w,f.lanes=D,f}function of(u,f,m,w){return u=Mo(7,u,w,f),u.lanes=m,u}function GC(u,f,m){return u=Mo(6,u,null,f),u.lanes=m,u}function Ug(u,f,m){return f=Mo(4,u.children!==null?u.children:[],u.key,f),f.lanes=m,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var bu=[],Dh=0,hb=null,Ap=0,il=[],nl=0,Pn=null,Yn=1,vu="";function af(u,f){bu[Dh++]=Ap,bu[Dh++]=hb,hb=u,Ap=f}function KC(u,f,m){il[nl++]=Yn,il[nl++]=vu,il[nl++]=Pn,Pn=u;var w=Yn;u=vu;var L=32-jn(w)-1;w&=~(1<<L),m+=1;var D=32-jn(f)+L;if(30<D){var H=L-L%5;D=(w&(1<<H)-1).toString(32),w>>=H,L-=H,Yn=1<<32-jn(f)+L|m<<L|w,vu=D+u}else Yn=1<<D|m<<L|w,vu=u}function YC(u){u.return!==null&&(af(u,1),KC(u,1,0))}function Rp(u){for(;u===hb;)hb=bu[--Dh],bu[Dh]=null,Ap=bu[--Dh],bu[Dh]=null;for(;u===Pn;)Pn=il[--nl],il[nl]=null,vu=il[--nl],il[nl]=null,Yn=il[--nl],il[nl]=null}var Ys=null,Zn=null,Ei=!1,Yl=null,Oo=!1,qg=Error(i(519));function sl(u){var f=Error(i(418,""));throw Nh(no(f,u)),qg}function bk(u){var f=u.stateNode,m=u.type,w=u.memoizedProps;switch(f[Mn]=u,f[Is]=w,m){case"dialog":ki("cancel",f),ki("close",f);break;case"iframe":case"object":case"embed":ki("load",f);break;case"video":case"audio":for(m=0;m<C_.length;m++)ki(C_[m],f);break;case"source":ki("error",f);break;case"img":case"image":case"link":ki("error",f),ki("load",f);break;case"details":ki("toggle",f);break;case"input":ki("invalid",f),Xd(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),Ka(f);break;case"select":ki("invalid",f);break;case"textarea":ki("invalid",f),Za(f,w.value,w.defaultValue,w.children),Ka(f)}m=w.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||w.suppressHydrationWarning===!0||WE(f.textContent,m)?(w.popover!=null&&(ki("beforetoggle",f),ki("toggle",f)),w.onScroll!=null&&ki("scroll",f),w.onScrollEnd!=null&&ki("scrollend",f),w.onClick!=null&&(f.onclick=tv),f=!0):f=!1,f||sl(u)}function vk(u){for(Ys=u.return;Ys;)switch(Ys.tag){case 5:case 13:Oo=!1;return;case 27:case 3:Oo=!0;return;default:Ys=Ys.return}}function Mp(u){if(u!==Ys)return!1;if(!Ei)return vk(u),Ei=!0,!1;var f=u.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||nv(u.type,u.memoizedProps)),m=!m),m&&Zn&&sl(u),vk(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(f===0){Zn=tc(u.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;u=u.nextSibling}Zn=null}}else f===27?(f=Zn,ul(u.type)?(u=eS,eS=null,Zn=u):Zn=f):Zn=Ys?tc(u.stateNode.nextSibling):null;return!0}function Op(){Zn=Ys=null,Ei=!1}function wk(){var u=Yl;return u!==null&&(Uo===null?Uo=u:Uo.push.apply(Uo,u),Yl=null),u}function Nh(u){Yl===null?Yl=[u]:Yl.push(u)}var lf=ae(null),Ih=null,G=null;function va(u,f,m){Le(lf,f._currentValue),f._currentValue=m}function rl(u){u._currentValue=lf.current,Te(lf)}function Po(u,f,m){for(;u!==null;){var w=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),u===m)break;u=u.return}}function pi(u,f,m,w){var L=u.child;for(L!==null&&(L.return=u);L!==null;){var D=L.dependencies;if(D!==null){var H=L.child;D=D.firstContext;e:for(;D!==null;){var K=D;D=L;for(var oe=0;oe<f.length;oe++)if(K.context===f[oe]){D.lanes|=m,K=D.alternate,K!==null&&(K.lanes|=m),Po(D.return,m,u),w||(H=null);break e}D=K.next}}else if(L.tag===18){if(H=L.return,H===null)throw Error(i(341));H.lanes|=m,D=H.alternate,D!==null&&(D.lanes|=m),Po(H,m,u),H=null}else H=L.child;if(H!==null)H.return=L;else for(H=L;H!==null;){if(H===u){H=null;break}if(L=H.sibling,L!==null){L.return=H.return,H=L;break}H=H.return}L=H}}function Pp(u,f,m,w){u=null;for(var L=f,D=!1;L!==null;){if(!D){if((L.flags&524288)!==0)D=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var H=L.alternate;if(H===null)throw Error(i(387));if(H=H.memoizedProps,H!==null){var K=L.type;_a(L.pendingProps.value,H.value)||(u!==null?u.push(K):u=[K])}}else if(L===Dt.current){if(H=L.alternate,H===null)throw Error(i(387));H.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(u!==null?u.push(bm):u=[bm])}L=L.return}u!==null&&pi(f,u,m,w),f.flags|=262144}function db(u){for(u=u.firstContext;u!==null;){if(!_a(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function cf(u){Ih=u,G=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function ms(u){return Ck(Ih,u)}function fb(u,f){return Ih===null&&cf(u),Ck(u,f)}function Ck(u,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},G===null){if(u===null)throw Error(i(308));G=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else G=G.next=f;return m}var _4=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(m,w){u.push(w)}};this.abort=function(){f.aborted=!0,u.forEach(function(m){return m()})}},b4=s.unstable_scheduleCallback,v4=s.unstable_NormalPriority,yn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ZC(){return{controller:new _4,data:new Map,refCount:0}}function Bp(u){u.refCount--,u.refCount===0&&b4(v4,function(){u.controller.abort()})}var Fp=null,XC=0,$g=0,Bo=null;function w4(u,f){if(Fp===null){var m=Fp=[];XC=0,$g=Jb(),Bo={status:"pending",value:void 0,then:function(w){m.push(w)}}}return XC++,f.then(yk,yk),f}function yk(){if(--XC===0&&Fp!==null){Bo!==null&&(Bo.status="fulfilled");var u=Fp;Fp=null,$g=0,Bo=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function C4(u,f){var m=[],w={status:"pending",value:null,reason:null,then:function(L){m.push(L)}};return u.then(function(){w.status="fulfilled",w.value=f;for(var L=0;L<m.length;L++)(0,m[L])(f)},function(L){for(w.status="rejected",w.reason=L,L=0;L<m.length;L++)(0,m[L])(void 0)}),w}var Sk=$.S;$.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&w4(u,f),Sk!==null&&Sk(u,f)};var uf=ae(null);function wu(){var u=uf.current;return u!==null?u:Nn.pooledCache}function gb(u,f){f===null?Le(uf,uf.current):Le(uf,f.pool)}function Lk(){var u=wu();return u===null?null:{parent:yn._currentValue,pool:u}}var ro=Error(i(460)),xk=Error(i(474)),mb=Error(i(542)),QC={then:function(){}};function kk(u){return u=u.status,u==="fulfilled"||u==="rejected"}function pb(){}function JC(u,f,m){switch(m=u[m],m===void 0?u.push(f):m!==f&&(f.then(pb,pb),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,Tk(u),u;default:if(typeof f.status=="string")f.then(pb,pb);else{if(u=Nn,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=f,u.status="pending",u.then(function(w){if(f.status==="pending"){var L=f;L.status="fulfilled",L.value=w}},function(w){if(f.status==="pending"){var L=f;L.status="rejected",L.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,Tk(u),u}throw jg=f,ro}}var jg=null;function Ek(){if(jg===null)throw Error(i(459));var u=jg;return jg=null,u}function Tk(u){if(u===ro||u===mb)throw Error(i(483))}var Mc=!1;function hf(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gg(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Ah(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Cu(u,f,m){var w=u.updateQueue;if(w===null)return null;if(w=w.shared,(dn&2)!==0){var L=w.pending;return L===null?f.next=f:(f.next=L.next,L.next=f),w.pending=f,f=Np(u),Dp(u,null,m),f}return Kl(u,w,f,m),Np(u)}function Vp(u,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var w=f.lanes;w&=u.pendingLanes,m|=w,f.lanes=m,zl(u,m)}}function Zl(u,f){var m=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var L=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var H={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};D===null?L=D=H:D=D.next=H,m=m.next}while(m!==null);D===null?L=D=f:D=D.next=f}else L=D=f;m={baseState:w.baseState,firstBaseUpdate:L,lastBaseUpdate:D,shared:w.shared,callbacks:w.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=f}var Hp=!1;function Xl(){if(Hp){var u=Bo;if(u!==null)throw u}}function qr(u,f,m,w){Hp=!1;var L=u.updateQueue;Mc=!1;var D=L.firstBaseUpdate,H=L.lastBaseUpdate,K=L.shared.pending;if(K!==null){L.shared.pending=null;var oe=K,ye=oe.next;oe.next=null,H===null?D=ye:H.next=ye,H=oe;var Pe=u.alternate;Pe!==null&&(Pe=Pe.updateQueue,K=Pe.lastBaseUpdate,K!==H&&(K===null?Pe.firstBaseUpdate=ye:K.next=ye,Pe.lastBaseUpdate=oe))}if(D!==null){var We=L.baseState;H=0,Pe=ye=oe=null,K=D;do{var ke=K.lane&-536870913,Se=ke!==K.lane;if(Se?(Pi&ke)===ke:(w&ke)===ke){ke!==0&&ke===$g&&(Hp=!0),Pe!==null&&(Pe=Pe.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var Rt=u,It=K;ke=f;var bn=m;switch(It.tag){case 1:if(Rt=It.payload,typeof Rt=="function"){We=Rt.call(bn,We,ke);break e}We=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=It.payload,ke=typeof Rt=="function"?Rt.call(bn,We,ke):Rt,ke==null)break e;We=h({},We,ke);break e;case 2:Mc=!0}}ke=K.callback,ke!==null&&(u.flags|=64,Se&&(u.flags|=8192),Se=L.callbacks,Se===null?L.callbacks=[ke]:Se.push(ke))}else Se={lane:ke,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Pe===null?(ye=Pe=Se,oe=We):Pe=Pe.next=Se,H|=ke;if(K=K.next,K===null){if(K=L.shared.pending,K===null)break;Se=K,K=Se.next,Se.next=null,L.lastBaseUpdate=Se,L.shared.pending=null}}while(!0);Pe===null&&(oe=We),L.baseState=oe,L.firstBaseUpdate=ye,L.lastBaseUpdate=Pe,D===null&&(L.shared.lanes=0),Wh|=H,u.lanes=H,u.memoizedState=We}}function Dk(u,f){if(typeof u!="function")throw Error(i(191,u));u.call(f)}function ey(u,f){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)Dk(m[u],f)}var df=ae(null),Rh=ae(0);function yu(u,f){u=Iu,Le(Rh,u),Le(df,f),Iu=u|f.baseLanes}function _b(){Le(Rh,Iu),Le(df,df.current)}function ty(){Iu=Rh.current,Te(df),Te(Rh)}var Ql=0,di=null,hn=null,Ti=null,Kg=!1,ff=!1,$r=!1,Yg=0,Mh=0,ol=null,Nk=0;function Ni(){throw Error(i(321))}function Wp(u,f){if(f===null)return!1;for(var m=0;m<f.length&&m<u.length;m++)if(!_a(u[m],f[m]))return!1;return!0}function iy(u,f,m,w,L,D){return Ql=D,di=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,$.H=u===null||u.memoizedState===null?Uk:wy,$r=!1,D=m(w,L),$r=!1,ff&&(D=Ak(f,m,w,L)),Ik(u),D}function Ik(u){$.H=Qp;var f=hn!==null&&hn.next!==null;if(Ql=0,Ti=hn=di=null,Kg=!1,Mh=0,ol=null,f)throw Error(i(300));u===null||ur||(u=u.dependencies,u!==null&&db(u)&&(ur=!0))}function Ak(u,f,m,w){di=u;var L=0;do{if(ff&&(ol=null),Mh=0,ff=!1,25<=L)throw Error(i(301));if(L+=1,Ti=hn=null,u.updateQueue!=null){var D=u.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}$.H=qk,D=f(m,w)}while(ff);return D}function ny(){var u=$.H,f=u.useState()[0];return f=typeof f.then=="function"?zp(f):f,u=u.useState()[0],(hn!==null?hn.memoizedState:null)!==u&&(di.flags|=1024),f}function sy(){var u=Yg!==0;return Yg=0,u}function gf(u,f,m){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~m}function bb(u){if(Kg){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Kg=!1}Ql=0,Ti=hn=di=null,ff=!1,Mh=Yg=0,ol=null}function Fo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?di.memoizedState=Ti=u:Ti=Ti.next=u,Ti}function Os(){if(hn===null){var u=di.alternate;u=u!==null?u.memoizedState:null}else u=hn.next;var f=Ti===null?di.memoizedState:Ti.next;if(f!==null)Ti=f,hn=u;else{if(u===null)throw di.alternate===null?Error(i(467)):Error(i(310));hn=u,u={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},Ti===null?di.memoizedState=Ti=u:Ti=Ti.next=u}return Ti}function mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zp(u){var f=Mh;return Mh+=1,ol===null&&(ol=[]),u=JC(ol,u,f),f=di,(Ti===null?f.memoizedState:Ti.next)===null&&(f=f.alternate,$.H=f===null||f.memoizedState===null?Uk:wy),u}function vb(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return zp(u);if(u.$$typeof===T)return ms(u)}throw Error(i(438,String(u)))}function Up(u){var f=null,m=di.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var w=di.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(L){return L.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=mf(),di.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(u),w=0;w<u;w++)m[w]=Y;return f.index++,m}function Oc(u,f){return typeof f=="function"?f(u):f}function wb(u){var f=Os();return ry(f,hn,u)}function ry(u,f,m){var w=u.queue;if(w===null)throw Error(i(311));w.lastRenderedReducer=m;var L=u.baseQueue,D=w.pending;if(D!==null){if(L!==null){var H=L.next;L.next=D.next,D.next=H}f.baseQueue=L=D,w.pending=null}if(D=u.baseState,L===null)u.memoizedState=D;else{f=L.next;var K=H=null,oe=null,ye=f,Pe=!1;do{var We=ye.lane&-536870913;if(We!==ye.lane?(Pi&We)===We:(Ql&We)===We){var ke=ye.revertLane;if(ke===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),We===$g&&(Pe=!0);else if((Ql&ke)===ke){ye=ye.next,ke===$g&&(Pe=!0);continue}else We={lane:0,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},oe===null?(K=oe=We,H=D):oe=oe.next=We,di.lanes|=ke,Wh|=ke;We=ye.action,$r&&m(D,We),D=ye.hasEagerState?ye.eagerState:m(D,We)}else ke={lane:We,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},oe===null?(K=oe=ke,H=D):oe=oe.next=ke,di.lanes|=We,Wh|=We;ye=ye.next}while(ye!==null&&ye!==f);if(oe===null?H=D:oe.next=K,!_a(D,u.memoizedState)&&(ur=!0,Pe&&(m=Bo,m!==null)))throw m;u.memoizedState=D,u.baseState=H,u.baseQueue=oe,w.lastRenderedState=D}return L===null&&(w.lanes=0),[u.memoizedState,w.dispatch]}function oy(u){var f=Os(),m=f.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=u;var w=m.dispatch,L=m.pending,D=f.memoizedState;if(L!==null){m.pending=null;var H=L=L.next;do D=u(D,H.action),H=H.next;while(H!==L);_a(D,f.memoizedState)||(ur=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),m.lastRenderedState=D}return[D,w]}function ay(u,f,m){var w=di,L=Os(),D=Ei;if(D){if(m===void 0)throw Error(i(407));m=m()}else m=f();var H=!_a((hn||L).memoizedState,m);H&&(L.memoizedState=m,ur=!0),L=L.queue;var K=yb.bind(null,w,L,u);if(jp(2048,8,K,[u]),L.getSnapshot!==f||H||Ti!==null&&Ti.memoizedState.tag&1){if(w.flags|=2048,Zg(9,Eb(),Rk.bind(null,w,L,m,f),null),Nn===null)throw Error(i(349));D||(Ql&124)!==0||Cb(w,f,m)}return m}function Cb(u,f,m){u.flags|=16384,u={getSnapshot:f,value:m},f=di.updateQueue,f===null?(f=mf(),di.updateQueue=f,f.stores=[u]):(m=f.stores,m===null?f.stores=[u]:m.push(u))}function Rk(u,f,m,w){f.value=m,f.getSnapshot=w,ly(f)&&cy(u)}function yb(u,f,m){return m(function(){ly(f)&&cy(u)})}function ly(u){var f=u.getSnapshot;u=u.value;try{var m=f();return!_a(u,m)}catch{return!0}}function cy(u){var f=nf(u,2);f!==null&&La(f,u,2)}function Sb(u){var f=Fo();if(typeof u=="function"){var m=u;if(u=m(),$r){ns(!0);try{m()}finally{ns(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:u},f}function qp(u,f,m,w){return u.baseState=m,ry(u,hn,typeof w=="function"?w:Oc)}function y4(u,f,m,w,L){if(Ib(u))throw Error(i(485));if(u=f.action,u!==null){var D={payload:L,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){D.listeners.push(H)}};$.T!==null?m(!0):D.isTransition=!1,w(D),m=f.pending,m===null?(D.next=f.pending=D,uy(f,D)):(D.next=m.next,f.pending=m.next=D)}}function uy(u,f){var m=f.action,w=f.payload,L=u.state;if(f.isTransition){var D=$.T,H={};$.T=H;try{var K=m(L,w),oe=$.S;oe!==null&&oe(H,K),hy(u,f,K)}catch(ye){Lb(u,f,ye)}finally{$.T=D}}else try{D=m(L,w),hy(u,f,D)}catch(ye){Lb(u,f,ye)}}function hy(u,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(w){Mk(u,f,w)},function(w){return Lb(u,f,w)}):Mk(u,f,m)}function Mk(u,f,m){f.status="fulfilled",f.value=m,Ok(f),u.state=m,f=u.pending,f!==null&&(m=f.next,m===f?u.pending=null:(m=m.next,f.next=m,uy(u,m)))}function Lb(u,f,m){var w=u.pending;if(u.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=m,Ok(f),f=f.next;while(f!==w)}u.action=null}function Ok(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function xb(u,f){return f}function dy(u,f){if(Ei){var m=Nn.formState;if(m!==null){e:{var w=di;if(Ei){if(Zn){t:{for(var L=Zn,D=Oo;L.nodeType!==8;){if(!D){L=null;break t}if(L=tc(L.nextSibling),L===null){L=null;break t}}D=L.data,L=D==="F!"||D==="F"?L:null}if(L){Zn=tc(L.nextSibling),w=L.data==="F!";break e}}sl(w)}w=!1}w&&(f=m[0])}}return m=Fo(),m.memoizedState=m.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xb,lastRenderedState:f},m.queue=w,m=_y.bind(null,di,w),w.dispatch=m,w=Sb(!1),D=by.bind(null,di,!1,w.queue),w=Fo(),L={state:f,dispatch:null,action:u,pending:null},w.queue=L,m=y4.bind(null,di,L,D,m),L.dispatch=m,w.memoizedState=u,[f,m,!1]}function kb(u){var f=Os();return Pk(f,hn,u)}function Pk(u,f,m){if(f=ry(u,f,xb)[0],u=wb(Oc)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=zp(f)}catch(H){throw H===ro?mb:H}else w=f;f=Os();var L=f.queue,D=L.dispatch;return m!==f.memoizedState&&(di.flags|=2048,Zg(9,Eb(),fy.bind(null,L,m),null)),[w,D,u]}function fy(u,f){u.action=f}function li(u){var f=Os(),m=hn;if(m!==null)return Pk(f,m,u);Os(),f=f.memoizedState,m=Os();var w=m.queue.dispatch;return m.memoizedState=u,[f,w,!1]}function Zg(u,f,m,w){return u={tag:u,create:m,deps:w,inst:f,next:null},f=di.updateQueue,f===null&&(f=mf(),di.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=u.next=u:(w=m.next,m.next=u,u.next=w,f.lastEffect=u),u}function Eb(){return{destroy:void 0,resource:void 0}}function Xg(){return Os().memoizedState}function $p(u,f,m,w){var L=Fo();w=w===void 0?null:w,di.flags|=u,L.memoizedState=Zg(1|f,Eb(),m,w)}function jp(u,f,m,w){var L=Os();w=w===void 0?null:w;var D=L.memoizedState.inst;hn!==null&&w!==null&&Wp(w,hn.memoizedState.deps)?L.memoizedState=Zg(f,D,m,w):(di.flags|=u,L.memoizedState=Zg(1|f,D,m,w))}function Bk(u,f){$p(8390656,8,u,f)}function wa(u,f){jp(2048,8,u,f)}function Fk(u,f){return jp(4,2,u,f)}function Gp(u,f){return jp(4,4,u,f)}function Tb(u,f){if(typeof f=="function"){u=u();var m=f(u);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function gy(u,f,m){m=m!=null?m.concat([u]):null,jp(4,4,Tb.bind(null,f,u),m)}function Db(){}function Vo(u,f){var m=Os();f=f===void 0?null:f;var w=m.memoizedState;return f!==null&&Wp(f,w[1])?w[0]:(m.memoizedState=[u,f],u)}function Su(u,f){var m=Os();f=f===void 0?null:f;var w=m.memoizedState;if(f!==null&&Wp(f,w[1]))return w[0];if(w=u(),$r){ns(!0);try{u()}finally{ns(!1)}}return m.memoizedState=[w,f],w}function Kp(u,f,m){return m===void 0||(Ql&1073741824)!==0?u.memoizedState=f:(u.memoizedState=m,u=_E(),di.lanes|=u,Wh|=u,m)}function my(u,f,m,w){return _a(m,f)?m:df.current!==null?(u=Kp(u,m,w),_a(u,f)||(ur=!0),u):(Ql&42)===0?(ur=!0,u.memoizedState=m):(u=_E(),di.lanes|=u,Wh|=u,f)}function Yp(u,f,m,w,L){var D=te.p;te.p=D!==0&&8>D?D:8;var H=$.T,K={};$.T=K,by(u,!1,f,m);try{var oe=L(),ye=$.S;if(ye!==null&&ye(K,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Pe=C4(oe,w);pf(u,f,Pe,Gr(u))}else pf(u,f,w,Gr(u))}catch(We){pf(u,f,{then:function(){},status:"rejected",reason:We},Gr())}finally{te.p=D,$.T=H}}function Vk(){}function Zp(u,f,m,w){if(u.tag!==5)throw Error(i(476));var L=py(u).queue;Yp(u,L,f,ce,m===null?Vk:function(){return Nb(u),m(w)})}function py(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:ce},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:m},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function Nb(u){var f=py(u).next.queue;pf(u,f,{},Gr())}function Xp(){return ms(bm)}function Lu(){return Os().memoizedState}function Hk(){return Os().memoizedState}function Oh(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var m=Gr();u=Ah(m);var w=Cu(f,u,m);w!==null&&(La(w,f,m),Vp(w,f,m)),f={cache:ZC()},u.payload=f;return}f=f.return}}function Wk(u,f,m){var w=Gr();m={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Ib(u)?zk(f,m):(m=zg(u,f,m,w),m!==null&&(La(m,u,w),vy(m,f,w)))}function _y(u,f,m){var w=Gr();pf(u,f,m,w)}function pf(u,f,m,w){var L={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ib(u))zk(f,L);else{var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var H=f.lastRenderedState,K=D(H,m);if(L.hasEagerState=!0,L.eagerState=K,_a(K,H))return Kl(u,f,L,0),Nn===null&&tf(),!1}catch{}finally{}if(m=zg(u,f,L,w),m!==null)return La(m,u,w),vy(m,f,w),!0}return!1}function by(u,f,m,w){if(w={lane:2,revertLane:Jb(),action:w,hasEagerState:!1,eagerState:null,next:null},Ib(u)){if(f)throw Error(i(479))}else f=zg(u,m,w,2),f!==null&&La(f,u,2)}function Ib(u){var f=u.alternate;return u===di||f!==null&&f===di}function zk(u,f){ff=Kg=!0;var m=u.pending;m===null?f.next=f:(f.next=m.next,m.next=f),u.pending=f}function vy(u,f,m){if((m&4194048)!==0){var w=f.lanes;w&=u.pendingLanes,m|=w,f.lanes=m,zl(u,m)}}var Qp={readContext:ms,use:vb,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useLayoutEffect:Ni,useInsertionEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useSyncExternalStore:Ni,useId:Ni,useHostTransitionStatus:Ni,useFormState:Ni,useActionState:Ni,useOptimistic:Ni,useMemoCache:Ni,useCacheRefresh:Ni},Uk={readContext:ms,use:vb,useCallback:function(u,f){return Fo().memoizedState=[u,f===void 0?null:f],u},useContext:ms,useEffect:Bk,useImperativeHandle:function(u,f,m){m=m!=null?m.concat([u]):null,$p(4194308,4,Tb.bind(null,f,u),m)},useLayoutEffect:function(u,f){return $p(4194308,4,u,f)},useInsertionEffect:function(u,f){$p(4,2,u,f)},useMemo:function(u,f){var m=Fo();f=f===void 0?null:f;var w=u();if($r){ns(!0);try{u()}finally{ns(!1)}}return m.memoizedState=[w,f],w},useReducer:function(u,f,m){var w=Fo();if(m!==void 0){var L=m(f);if($r){ns(!0);try{m(f)}finally{ns(!1)}}}else L=f;return w.memoizedState=w.baseState=L,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:L},w.queue=u,u=u.dispatch=Wk.bind(null,di,u),[w.memoizedState,u]},useRef:function(u){var f=Fo();return u={current:u},f.memoizedState=u},useState:function(u){u=Sb(u);var f=u.queue,m=_y.bind(null,di,f);return f.dispatch=m,[u.memoizedState,m]},useDebugValue:Db,useDeferredValue:function(u,f){var m=Fo();return Kp(m,u,f)},useTransition:function(){var u=Sb(!1);return u=Yp.bind(null,di,u.queue,!0,!1),Fo().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,m){var w=di,L=Fo();if(Ei){if(m===void 0)throw Error(i(407));m=m()}else{if(m=f(),Nn===null)throw Error(i(349));(Pi&124)!==0||Cb(w,f,m)}L.memoizedState=m;var D={value:m,getSnapshot:f};return L.queue=D,Bk(yb.bind(null,w,D,u),[u]),w.flags|=2048,Zg(9,Eb(),Rk.bind(null,w,D,m,f),null),m},useId:function(){var u=Fo(),f=Nn.identifierPrefix;if(Ei){var m=vu,w=Yn;m=(w&~(1<<32-jn(w)-1)).toString(32)+m,f="«"+f+"R"+m,m=Yg++,0<m&&(f+="H"+m.toString(32)),f+="»"}else m=Nk++,f="«"+f+"r"+m.toString(32)+"»";return u.memoizedState=f},useHostTransitionStatus:Xp,useFormState:dy,useActionState:dy,useOptimistic:function(u){var f=Fo();f.memoizedState=f.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=by.bind(null,di,!0,m),m.dispatch=f,[u,f]},useMemoCache:Up,useCacheRefresh:function(){return Fo().memoizedState=Oh.bind(null,di)}},wy={readContext:ms,use:vb,useCallback:Vo,useContext:ms,useEffect:wa,useImperativeHandle:gy,useInsertionEffect:Fk,useLayoutEffect:Gp,useMemo:Su,useReducer:wb,useRef:Xg,useState:function(){return wb(Oc)},useDebugValue:Db,useDeferredValue:function(u,f){var m=Os();return my(m,hn.memoizedState,u,f)},useTransition:function(){var u=wb(Oc)[0],f=Os().memoizedState;return[typeof u=="boolean"?u:zp(u),f]},useSyncExternalStore:ay,useId:Lu,useHostTransitionStatus:Xp,useFormState:kb,useActionState:kb,useOptimistic:function(u,f){var m=Os();return qp(m,hn,u,f)},useMemoCache:Up,useCacheRefresh:Hk},qk={readContext:ms,use:vb,useCallback:Vo,useContext:ms,useEffect:wa,useImperativeHandle:gy,useInsertionEffect:Fk,useLayoutEffect:Gp,useMemo:Su,useReducer:oy,useRef:Xg,useState:function(){return oy(Oc)},useDebugValue:Db,useDeferredValue:function(u,f){var m=Os();return hn===null?Kp(m,u,f):my(m,hn.memoizedState,u,f)},useTransition:function(){var u=oy(Oc)[0],f=Os().memoizedState;return[typeof u=="boolean"?u:zp(u),f]},useSyncExternalStore:ay,useId:Lu,useHostTransitionStatus:Xp,useFormState:li,useActionState:li,useOptimistic:function(u,f){var m=Os();return hn!==null?qp(m,hn,u,f):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:Up,useCacheRefresh:Hk},Zs=null,Ho=0;function Ab(u){var f=Ho;return Ho+=1,Zs===null&&(Zs=[]),JC(Zs,u,f)}function Jp(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function _f(u,f){throw f.$$typeof===d?Error(i(525)):(u=Object.prototype.toString.call(f),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function bf(u){var f=u._init;return f(u._payload)}function Cy(u){function f(be,fe){if(u){var Ce=be.deletions;Ce===null?(be.deletions=[fe],be.flags|=16):Ce.push(fe)}}function m(be,fe){if(!u)return null;for(;fe!==null;)f(be,fe),fe=fe.sibling;return null}function w(be){for(var fe=new Map;be!==null;)be.key!==null?fe.set(be.key,be):fe.set(be.index,be),be=be.sibling;return fe}function L(be,fe){return be=so(be,fe),be.index=0,be.sibling=null,be}function D(be,fe,Ce){return be.index=Ce,u?(Ce=be.alternate,Ce!==null?(Ce=Ce.index,Ce<fe?(be.flags|=67108866,fe):Ce):(be.flags|=67108866,fe)):(be.flags|=1048576,fe)}function H(be){return u&&be.alternate===null&&(be.flags|=67108866),be}function K(be,fe,Ce,Ve){return fe===null||fe.tag!==6?(fe=GC(Ce,be.mode,Ve),fe.return=be,fe):(fe=L(fe,Ce),fe.return=be,fe)}function oe(be,fe,Ce,Ve){var ft=Ce.type;return ft===b?Pe(be,fe,Ce.props.children,Ve,Ce.key):fe!==null&&(fe.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===V&&bf(ft)===fe.type)?(fe=L(fe,Ce.props),Jp(fe,Ce),fe.return=be,fe):(fe=ub(Ce.type,Ce.key,Ce.props,null,be.mode,Ve),Jp(fe,Ce),fe.return=be,fe)}function ye(be,fe,Ce,Ve){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Ce.containerInfo||fe.stateNode.implementation!==Ce.implementation?(fe=Ug(Ce,be.mode,Ve),fe.return=be,fe):(fe=L(fe,Ce.children||[]),fe.return=be,fe)}function Pe(be,fe,Ce,Ve,ft){return fe===null||fe.tag!==7?(fe=of(Ce,be.mode,Ve,ft),fe.return=be,fe):(fe=L(fe,Ce),fe.return=be,fe)}function We(be,fe,Ce){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=GC(""+fe,be.mode,Ce),fe.return=be,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case g:return Ce=ub(fe.type,fe.key,fe.props,null,be.mode,Ce),Jp(Ce,fe),Ce.return=be,Ce;case _:return fe=Ug(fe,be.mode,Ce),fe.return=be,fe;case V:var Ve=fe._init;return fe=Ve(fe._payload),We(be,fe,Ce)}if(X(fe)||F(fe))return fe=of(fe,be.mode,Ce,null),fe.return=be,fe;if(typeof fe.then=="function")return We(be,Ab(fe),Ce);if(fe.$$typeof===T)return We(be,fb(be,fe),Ce);_f(be,fe)}return null}function ke(be,fe,Ce,Ve){var ft=fe!==null?fe.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ft!==null?null:K(be,fe,""+Ce,Ve);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case g:return Ce.key===ft?oe(be,fe,Ce,Ve):null;case _:return Ce.key===ft?ye(be,fe,Ce,Ve):null;case V:return ft=Ce._init,Ce=ft(Ce._payload),ke(be,fe,Ce,Ve)}if(X(Ce)||F(Ce))return ft!==null?null:Pe(be,fe,Ce,Ve,null);if(typeof Ce.then=="function")return ke(be,fe,Ab(Ce),Ve);if(Ce.$$typeof===T)return ke(be,fe,fb(be,Ce),Ve);_f(be,Ce)}return null}function Se(be,fe,Ce,Ve,ft){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return be=be.get(Ce)||null,K(fe,be,""+Ve,ft);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case g:return be=be.get(Ve.key===null?Ce:Ve.key)||null,oe(fe,be,Ve,ft);case _:return be=be.get(Ve.key===null?Ce:Ve.key)||null,ye(fe,be,Ve,ft);case V:var _i=Ve._init;return Ve=_i(Ve._payload),Se(be,fe,Ce,Ve,ft)}if(X(Ve)||F(Ve))return be=be.get(Ce)||null,Pe(fe,be,Ve,ft,null);if(typeof Ve.then=="function")return Se(be,fe,Ce,Ab(Ve),ft);if(Ve.$$typeof===T)return Se(be,fe,Ce,fb(fe,Ve),ft);_f(fe,Ve)}return null}function Rt(be,fe,Ce,Ve){for(var ft=null,_i=null,kt=fe,Mt=fe=0,fr=null;kt!==null&&Mt<Ce.length;Mt++){kt.index>Mt?(fr=kt,kt=null):fr=kt.sibling;var Wi=ke(be,kt,Ce[Mt],Ve);if(Wi===null){kt===null&&(kt=fr);break}u&&kt&&Wi.alternate===null&&f(be,kt),fe=D(Wi,fe,Mt),_i===null?ft=Wi:_i.sibling=Wi,_i=Wi,kt=fr}if(Mt===Ce.length)return m(be,kt),Ei&&af(be,Mt),ft;if(kt===null){for(;Mt<Ce.length;Mt++)kt=We(be,Ce[Mt],Ve),kt!==null&&(fe=D(kt,fe,Mt),_i===null?ft=kt:_i.sibling=kt,_i=kt);return Ei&&af(be,Mt),ft}for(kt=w(kt);Mt<Ce.length;Mt++)fr=Se(kt,be,Mt,Ce[Mt],Ve),fr!==null&&(u&&fr.alternate!==null&&kt.delete(fr.key===null?Mt:fr.key),fe=D(fr,fe,Mt),_i===null?ft=fr:_i.sibling=fr,_i=fr);return u&&kt.forEach(function(Xh){return f(be,Xh)}),Ei&&af(be,Mt),ft}function It(be,fe,Ce,Ve){if(Ce==null)throw Error(i(151));for(var ft=null,_i=null,kt=fe,Mt=fe=0,fr=null,Wi=Ce.next();kt!==null&&!Wi.done;Mt++,Wi=Ce.next()){kt.index>Mt?(fr=kt,kt=null):fr=kt.sibling;var Xh=ke(be,kt,Wi.value,Ve);if(Xh===null){kt===null&&(kt=fr);break}u&&kt&&Xh.alternate===null&&f(be,kt),fe=D(Xh,fe,Mt),_i===null?ft=Xh:_i.sibling=Xh,_i=Xh,kt=fr}if(Wi.done)return m(be,kt),Ei&&af(be,Mt),ft;if(kt===null){for(;!Wi.done;Mt++,Wi=Ce.next())Wi=We(be,Wi.value,Ve),Wi!==null&&(fe=D(Wi,fe,Mt),_i===null?ft=Wi:_i.sibling=Wi,_i=Wi);return Ei&&af(be,Mt),ft}for(kt=w(kt);!Wi.done;Mt++,Wi=Ce.next())Wi=Se(kt,be,Mt,Wi.value,Ve),Wi!==null&&(u&&Wi.alternate!==null&&kt.delete(Wi.key===null?Mt:Wi.key),fe=D(Wi,fe,Mt),_i===null?ft=Wi:_i.sibling=Wi,_i=Wi);return u&&kt.forEach(function(sM){return f(be,sM)}),Ei&&af(be,Mt),ft}function bn(be,fe,Ce,Ve){if(typeof Ce=="object"&&Ce!==null&&Ce.type===b&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case g:e:{for(var ft=Ce.key;fe!==null;){if(fe.key===ft){if(ft=Ce.type,ft===b){if(fe.tag===7){m(be,fe.sibling),Ve=L(fe,Ce.props.children),Ve.return=be,be=Ve;break e}}else if(fe.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===V&&bf(ft)===fe.type){m(be,fe.sibling),Ve=L(fe,Ce.props),Jp(Ve,Ce),Ve.return=be,be=Ve;break e}m(be,fe);break}else f(be,fe);fe=fe.sibling}Ce.type===b?(Ve=of(Ce.props.children,be.mode,Ve,Ce.key),Ve.return=be,be=Ve):(Ve=ub(Ce.type,Ce.key,Ce.props,null,be.mode,Ve),Jp(Ve,Ce),Ve.return=be,be=Ve)}return H(be);case _:e:{for(ft=Ce.key;fe!==null;){if(fe.key===ft)if(fe.tag===4&&fe.stateNode.containerInfo===Ce.containerInfo&&fe.stateNode.implementation===Ce.implementation){m(be,fe.sibling),Ve=L(fe,Ce.children||[]),Ve.return=be,be=Ve;break e}else{m(be,fe);break}else f(be,fe);fe=fe.sibling}Ve=Ug(Ce,be.mode,Ve),Ve.return=be,be=Ve}return H(be);case V:return ft=Ce._init,Ce=ft(Ce._payload),bn(be,fe,Ce,Ve)}if(X(Ce))return Rt(be,fe,Ce,Ve);if(F(Ce)){if(ft=F(Ce),typeof ft!="function")throw Error(i(150));return Ce=ft.call(Ce),It(be,fe,Ce,Ve)}if(typeof Ce.then=="function")return bn(be,fe,Ab(Ce),Ve);if(Ce.$$typeof===T)return bn(be,fe,fb(be,Ce),Ve);_f(be,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,fe!==null&&fe.tag===6?(m(be,fe.sibling),Ve=L(fe,Ce),Ve.return=be,be=Ve):(m(be,fe),Ve=GC(Ce,be.mode,Ve),Ve.return=be,be=Ve),H(be)):m(be,fe)}return function(be,fe,Ce,Ve){try{Ho=0;var ft=bn(be,fe,Ce,Ve);return Zs=null,ft}catch(kt){if(kt===ro||kt===mb)throw kt;var _i=Mo(29,kt,null,be.mode);return _i.lanes=Ve,_i.return=be,_i}finally{}}}var vf=Cy(!0),$k=Cy(!1),Ca=ae(null),oo=null;function al(u){var f=u.alternate;Le(ps,ps.current&1),Le(Ca,u),oo===null&&(f===null||df.current!==null||f.memoizedState!==null)&&(oo=u)}function jk(u){if(u.tag===22){if(Le(ps,ps.current),Le(Ca,u),oo===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(oo=u)}}else xu()}function xu(){Le(ps,ps.current),Le(Ca,Ca.current)}function Pc(u){Te(Ca),oo===u&&(oo=null),Te(ps)}var ps=ae(0);function e_(u){for(var f=u;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||lo(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Qg(u,f,m,w){f=u.memoizedState,m=m(w,f),m=m==null?f:h({},f,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var t_={enqueueSetState:function(u,f,m){u=u._reactInternals;var w=Gr(),L=Ah(w);L.payload=f,m!=null&&(L.callback=m),f=Cu(u,L,w),f!==null&&(La(f,u,w),Vp(f,u,w))},enqueueReplaceState:function(u,f,m){u=u._reactInternals;var w=Gr(),L=Ah(w);L.tag=1,L.payload=f,m!=null&&(L.callback=m),f=Cu(u,L,w),f!==null&&(La(f,u,w),Vp(f,u,w))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var m=Gr(),w=Ah(m);w.tag=2,f!=null&&(w.callback=f),f=Cu(u,w,m),f!==null&&(La(f,u,m),Vp(f,u,m))}};function i_(u,f,m,w,L,D,H){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,D,H):f.prototype&&f.prototype.isPureReactComponent?!Rc(m,w)||!Rc(L,D):!0}function Gk(u,f,m,w){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,w),f.state!==u&&t_.enqueueReplaceState(f,f.state,null)}function Ph(u,f){var m=f;if("ref"in f){m={};for(var w in f)w!=="ref"&&(m[w]=f[w])}if(u=u.defaultProps){m===f&&(m=h({},m));for(var L in u)m[L]===void 0&&(m[L]=u[L])}return m}var wf=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function yy(u){wf(u)}function Rb(u){console.error(u)}function Kk(u){wf(u)}function n_(u,f){try{var m=u.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function Bc(u,f,m){try{var w=u.onCaughtError;w(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function Mb(u,f,m){return m=Ah(m),m.tag=3,m.payload={element:null},m.callback=function(){n_(u,f)},m}function Sy(u){return u=Ah(u),u.tag=3,u}function Yk(u,f,m,w){var L=m.type.getDerivedStateFromError;if(typeof L=="function"){var D=w.value;u.payload=function(){return L(D)},u.callback=function(){Bc(f,m,w)}}var H=m.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(u.callback=function(){Bc(f,m,w),typeof L!="function"&&(zh===null?zh=new Set([this]):zh.add(this));var K=w.stack;this.componentDidCatch(w.value,{componentStack:K!==null?K:""})})}function Zk(u,f,m,w,L){if(m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=m.alternate,f!==null&&Pp(f,m,L,!0),m=Ca.current,m!==null){switch(m.tag){case 13:return oo===null?zy():m.alternate===null&&_s===0&&(_s=3),m.flags&=-257,m.flags|=65536,m.lanes=L,w===QC?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([w]):f.add(w),$y(u,w,L)),!1;case 22:return m.flags|=65536,w===QC?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([w]):m.add(w)),$y(u,w,L)),!1}throw Error(i(435,m.tag))}return $y(u,w,L),zy(),!1}if(Ei)return f=Ca.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=L,w!==qg&&(u=Error(i(422),{cause:w}),Nh(no(u,m)))):(w!==qg&&(f=Error(i(423),{cause:w}),Nh(no(f,m))),u=u.current.alternate,u.flags|=65536,L&=-L,u.lanes|=L,w=no(w,m),L=Mb(u.stateNode,w,L),Zl(u,L),_s!==4&&(_s=2)),!1;var D=Error(i(520),{cause:w});if(D=no(D,m),f_===null?f_=[D]:f_.push(D),_s!==4&&(_s=2),f===null)return!0;w=no(w,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,u=L&-L,m.lanes|=u,u=Mb(m.stateNode,w,u),Zl(m,u),!1;case 1:if(f=m.type,D=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(zh===null||!zh.has(D))))return m.flags|=65536,L&=-L,m.lanes|=L,L=Sy(L),Yk(L,u,m,w),Zl(m,L),!1}m=m.return}while(m!==null);return!1}var Xk=Error(i(461)),ur=!1;function Bn(u,f,m,w){f.child=u===null?$k(f,null,m,w):vf(f,u.child,m,w)}function Ob(u,f,m,w,L){m=m.render;var D=f.ref;if("ref"in w){var H={};for(var K in w)K!=="ref"&&(H[K]=w[K])}else H=w;return cf(f),w=iy(u,f,m,H,D,L),K=sy(),u!==null&&!ur?(gf(u,f,L),ku(u,f,L)):(Ei&&K&&YC(f),f.flags|=1,Bn(u,f,w,L),f.child)}function Pb(u,f,m,w,L){if(u===null){var D=m.type;return typeof D=="function"&&!rf(D)&&D.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=D,Bb(u,f,D,w,L)):(u=ub(m.type,null,w,f,f.mode,L),u.ref=f.ref,u.return=f,f.child=u)}if(D=u.child,!Jl(u,L)){var H=D.memoizedProps;if(m=m.compare,m=m!==null?m:Rc,m(H,w)&&u.ref===f.ref)return ku(u,f,L)}return f.flags|=1,u=so(D,w),u.ref=f.ref,u.return=f,f.child=u}function Bb(u,f,m,w,L){if(u!==null){var D=u.memoizedProps;if(Rc(D,w)&&u.ref===f.ref)if(ur=!1,f.pendingProps=w=D,Jl(u,L))(u.flags&131072)!==0&&(ur=!0);else return f.lanes=u.lanes,ku(u,f,L)}return Jg(u,f,m,w,L)}function s_(u,f,m){var w=f.pendingProps,L=w.children,D=u!==null?u.memoizedState:null;if(w.mode==="hidden"){if((f.flags&128)!==0){if(w=D!==null?D.baseLanes|m:m,u!==null){for(L=f.child=u.child,D=0;L!==null;)D=D|L.lanes|L.childLanes,L=L.sibling;f.childLanes=D&~w}else f.childLanes=0,f.child=null;return Cf(u,f,w,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&gb(f,D!==null?D.cachePool:null),D!==null?yu(f,D):_b(),jk(f);else return f.lanes=f.childLanes=536870912,Cf(u,f,D!==null?D.baseLanes|m:m,m)}else D!==null?(gb(f,D.cachePool),yu(f,D),xu(),f.memoizedState=null):(u!==null&&gb(f,null),_b(),xu());return Bn(u,f,L,m),f.child}function Cf(u,f,m,w){var L=wu();return L=L===null?null:{parent:yn._currentValue,pool:L},f.memoizedState={baseLanes:m,cachePool:L},u!==null&&gb(f,null),_b(),jk(f),u!==null&&Pp(u,f,w,!0),null}function Nt(u,f){var m=f.ref;if(m===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(u===null||u.ref!==m)&&(f.flags|=4194816)}}function Jg(u,f,m,w,L){return cf(f),m=iy(u,f,m,w,void 0,L),w=sy(),u!==null&&!ur?(gf(u,f,L),ku(u,f,L)):(Ei&&w&&YC(f),f.flags|=1,Bn(u,f,m,L),f.child)}function Fb(u,f,m,w,L,D){return cf(f),f.updateQueue=null,m=Ak(f,w,m,L),Ik(u),w=sy(),u!==null&&!ur?(gf(u,f,D),ku(u,f,D)):(Ei&&w&&YC(f),f.flags|=1,Bn(u,f,m,D),f.child)}function Bh(u,f,m,w,L){if(cf(f),f.stateNode===null){var D=sf,H=m.contextType;typeof H=="object"&&H!==null&&(D=ms(H)),D=new m(w,D),f.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=t_,f.stateNode=D,D._reactInternals=f,D=f.stateNode,D.props=w,D.state=f.memoizedState,D.refs={},hf(f),H=m.contextType,D.context=typeof H=="object"&&H!==null?ms(H):sf,D.state=f.memoizedState,H=m.getDerivedStateFromProps,typeof H=="function"&&(Qg(f,m,H,w),D.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(H=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),H!==D.state&&t_.enqueueReplaceState(D,D.state,null),qr(f,w,D,L),Xl(),D.state=f.memoizedState),typeof D.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(u===null){D=f.stateNode;var K=f.memoizedProps,oe=Ph(m,K);D.props=oe;var ye=D.context,Pe=m.contextType;H=sf,typeof Pe=="object"&&Pe!==null&&(H=ms(Pe));var We=m.getDerivedStateFromProps;Pe=typeof We=="function"||typeof D.getSnapshotBeforeUpdate=="function",K=f.pendingProps!==K,Pe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(K||ye!==H)&&Gk(f,D,w,H),Mc=!1;var ke=f.memoizedState;D.state=ke,qr(f,w,D,L),Xl(),ye=f.memoizedState,K||ke!==ye||Mc?(typeof We=="function"&&(Qg(f,m,We,w),ye=f.memoizedState),(oe=Mc||i_(f,m,oe,w,ke,ye,H))?(Pe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(f.flags|=4194308)):(typeof D.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=ye),D.props=w,D.state=ye,D.context=H,w=oe):(typeof D.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{D=f.stateNode,Gg(u,f),H=f.memoizedProps,Pe=Ph(m,H),D.props=Pe,We=f.pendingProps,ke=D.context,ye=m.contextType,oe=sf,typeof ye=="object"&&ye!==null&&(oe=ms(ye)),K=m.getDerivedStateFromProps,(ye=typeof K=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(H!==We||ke!==oe)&&Gk(f,D,w,oe),Mc=!1,ke=f.memoizedState,D.state=ke,qr(f,w,D,L),Xl();var Se=f.memoizedState;H!==We||ke!==Se||Mc||u!==null&&u.dependencies!==null&&db(u.dependencies)?(typeof K=="function"&&(Qg(f,m,K,w),Se=f.memoizedState),(Pe=Mc||i_(f,m,Pe,w,ke,Se,oe)||u!==null&&u.dependencies!==null&&db(u.dependencies))?(ye||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(w,Se,oe),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(w,Se,oe)),typeof D.componentDidUpdate=="function"&&(f.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof D.componentDidUpdate!="function"||H===u.memoizedProps&&ke===u.memoizedState||(f.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===u.memoizedProps&&ke===u.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=Se),D.props=w,D.state=Se,D.context=oe,w=Pe):(typeof D.componentDidUpdate!="function"||H===u.memoizedProps&&ke===u.memoizedState||(f.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===u.memoizedProps&&ke===u.memoizedState||(f.flags|=1024),w=!1)}return D=w,Nt(u,f),w=(f.flags&128)!==0,D||w?(D=f.stateNode,m=w&&typeof m.getDerivedStateFromError!="function"?null:D.render(),f.flags|=1,u!==null&&w?(f.child=vf(f,u.child,null,L),f.child=vf(f,null,m,L)):Bn(u,f,m,L),f.memoizedState=D.state,u=f.child):u=ku(u,f,L),u}function Qk(u,f,m,w){return Op(),f.flags|=256,Bn(u,f,m,w),f.child}var r_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vb(u){return{baseLanes:u,cachePool:Lk()}}function hr(u,f,m){return u=u!==null?u.childLanes&~m:0,f&&(u|=cl),u}function Jk(u,f,m){var w=f.pendingProps,L=!1,D=(f.flags&128)!==0,H;if((H=D)||(H=u!==null&&u.memoizedState===null?!1:(ps.current&2)!==0),H&&(L=!0,f.flags&=-129),H=(f.flags&32)!==0,f.flags&=-33,u===null){if(Ei){if(L?al(f):xu(),Ei){var K=Zn,oe;if(oe=K){e:{for(oe=K,K=Oo;oe.nodeType!==8;){if(!K){K=null;break e}if(oe=tc(oe.nextSibling),oe===null){K=null;break e}}K=oe}K!==null?(f.memoizedState={dehydrated:K,treeContext:Pn!==null?{id:Yn,overflow:vu}:null,retryLane:536870912,hydrationErrors:null},oe=Mo(18,null,null,0),oe.stateNode=K,oe.return=f,f.child=oe,Ys=f,Zn=null,oe=!0):oe=!1}oe||sl(f)}if(K=f.memoizedState,K!==null&&(K=K.dehydrated,K!==null))return lo(K)?f.lanes=32:f.lanes=536870912,null;Pc(f)}return K=w.children,w=w.fallback,L?(xu(),L=f.mode,K=o_({mode:"hidden",children:K},L),w=of(w,L,m,null),K.return=f,w.return=f,K.sibling=w,f.child=K,L=f.child,L.memoizedState=Vb(m),L.childLanes=hr(u,H,m),f.memoizedState=r_,w):(al(f),Ly(f,K))}if(oe=u.memoizedState,oe!==null&&(K=oe.dehydrated,K!==null)){if(D)f.flags&256?(al(f),f.flags&=-257,f=xy(u,f,m)):f.memoizedState!==null?(xu(),f.child=u.child,f.flags|=128,f=null):(xu(),L=w.fallback,K=f.mode,w=o_({mode:"visible",children:w.children},K),L=of(L,K,m,null),L.flags|=2,w.return=f,L.return=f,w.sibling=L,f.child=w,vf(f,u.child,null,m),w=f.child,w.memoizedState=Vb(m),w.childLanes=hr(u,H,m),f.memoizedState=r_,f=L);else if(al(f),lo(K)){if(H=K.nextSibling&&K.nextSibling.dataset,H)var ye=H.dgst;H=ye,w=Error(i(419)),w.stack="",w.digest=H,Nh({value:w,source:null,stack:null}),f=xy(u,f,m)}else if(ur||Pp(u,f,m,!1),H=(m&u.childLanes)!==0,ur||H){if(H=Nn,H!==null&&(w=m&-m,w=(w&42)!==0?1:aa(w),w=(w&(H.suspendedLanes|m))!==0?0:w,w!==0&&w!==oe.retryLane))throw oe.retryLane=w,nf(u,w),La(H,u,w),Xk;K.data==="$?"||zy(),f=xy(u,f,m)}else K.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=oe.treeContext,Zn=tc(K.nextSibling),Ys=f,Ei=!0,Yl=null,Oo=!1,u!==null&&(il[nl++]=Yn,il[nl++]=vu,il[nl++]=Pn,Yn=u.id,vu=u.overflow,Pn=f),f=Ly(f,w.children),f.flags|=4096);return f}return L?(xu(),L=w.fallback,K=f.mode,oe=u.child,ye=oe.sibling,w=so(oe,{mode:"hidden",children:w.children}),w.subtreeFlags=oe.subtreeFlags&65011712,ye!==null?L=so(ye,L):(L=of(L,K,m,null),L.flags|=2),L.return=f,w.return=f,w.sibling=L,f.child=w,w=L,L=f.child,K=u.child.memoizedState,K===null?K=Vb(m):(oe=K.cachePool,oe!==null?(ye=yn._currentValue,oe=oe.parent!==ye?{parent:ye,pool:ye}:oe):oe=Lk(),K={baseLanes:K.baseLanes|m,cachePool:oe}),L.memoizedState=K,L.childLanes=hr(u,H,m),f.memoizedState=r_,w):(al(f),m=u.child,u=m.sibling,m=so(m,{mode:"visible",children:w.children}),m.return=f,m.sibling=null,u!==null&&(H=f.deletions,H===null?(f.deletions=[u],f.flags|=16):H.push(u)),f.child=m,f.memoizedState=null,m)}function Ly(u,f){return f=o_({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function o_(u,f){return u=Mo(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function xy(u,f,m){return vf(f,u.child,null,m),u=Ly(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function ky(u,f,m){u.lanes|=f;var w=u.alternate;w!==null&&(w.lanes|=f),Po(u.return,f,m)}function Ey(u,f,m,w,L){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:L}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=w,D.tail=m,D.tailMode=L)}function eE(u,f,m){var w=f.pendingProps,L=w.revealOrder,D=w.tail;if(Bn(u,f,w.children,m),w=ps.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&ky(u,m,f);else if(u.tag===19)ky(u,m,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}switch(Le(ps,w),L){case"forwards":for(m=f.child,L=null;m!==null;)u=m.alternate,u!==null&&e_(u)===null&&(L=m),m=m.sibling;m=L,m===null?(L=f.child,f.child=null):(L=m.sibling,m.sibling=null),Ey(f,!1,L,m,D);break;case"backwards":for(m=null,L=f.child,f.child=null;L!==null;){if(u=L.alternate,u!==null&&e_(u)===null){f.child=L;break}u=L.sibling,L.sibling=m,m=L,L=u}Ey(f,!0,m,null,D);break;case"together":Ey(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ku(u,f,m){if(u!==null&&(f.dependencies=u.dependencies),Wh|=f.lanes,(m&f.childLanes)===0)if(u!==null){if(Pp(u,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(i(153));if(f.child!==null){for(u=f.child,m=so(u,u.pendingProps),f.child=m,m.return=f;u.sibling!==null;)u=u.sibling,m=m.sibling=so(u,u.pendingProps),m.return=f;m.sibling=null}return f.child}function Jl(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&db(u)))}function ao(u,f,m){switch(f.tag){case 3:Xe(f,f.stateNode.containerInfo),va(f,yn,u.memoizedState.cache),Op();break;case 27:case 5:Et(f);break;case 4:Xe(f,f.stateNode.containerInfo);break;case 10:va(f,f.type,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(al(f),f.flags|=128,null):(m&f.child.childLanes)!==0?Jk(u,f,m):(al(f),u=ku(u,f,m),u!==null?u.sibling:null);al(f);break;case 19:var L=(u.flags&128)!==0;if(w=(m&f.childLanes)!==0,w||(Pp(u,f,m,!1),w=(m&f.childLanes)!==0),L){if(w)return eE(u,f,m);f.flags|=128}if(L=f.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),Le(ps,ps.current),w)break;return null;case 22:case 23:return f.lanes=0,s_(u,f,m);case 24:va(f,yn,u.memoizedState.cache)}return ku(u,f,m)}function Hb(u,f,m){if(u!==null)if(u.memoizedProps!==f.pendingProps)ur=!0;else{if(!Jl(u,m)&&(f.flags&128)===0)return ur=!1,ao(u,f,m);ur=(u.flags&131072)!==0}else ur=!1,Ei&&(f.flags&1048576)!==0&&KC(f,Ap,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var w=f.elementType,L=w._init;if(w=L(w._payload),f.type=w,typeof w=="function")rf(w)?(u=Ph(w,u),f.tag=1,f=Bh(null,f,w,u,m)):(f.tag=0,f=Jg(null,f,w,u,m));else{if(w!=null){if(L=w.$$typeof,L===N){f.tag=11,f=Ob(null,f,w,u,m);break e}else if(L===O){f.tag=14,f=Pb(null,f,w,u,m);break e}}throw f=ee(w)||w,Error(i(306,f,""))}}return f;case 0:return Jg(u,f,f.type,f.pendingProps,m);case 1:return w=f.type,L=Ph(w,f.pendingProps),Bh(u,f,w,L,m);case 3:e:{if(Xe(f,f.stateNode.containerInfo),u===null)throw Error(i(387));w=f.pendingProps;var D=f.memoizedState;L=D.element,Gg(u,f),qr(f,w,null,m);var H=f.memoizedState;if(w=H.cache,va(f,yn,w),w!==D.cache&&pi(f,[yn],m,!0),Xl(),w=H.element,D.isDehydrated)if(D={element:w,isDehydrated:!1,cache:H.cache},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){f=Qk(u,f,w,m);break e}else if(w!==L){L=no(Error(i(424)),f),Nh(L),f=Qk(u,f,w,m);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Zn=tc(u.firstChild),Ys=f,Ei=!0,Yl=null,Oo=!0,m=$k(f,null,w,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Op(),w===L){f=ku(u,f,m);break e}Bn(u,f,w,m)}f=f.child}return f;case 26:return Nt(u,f),u===null?(m=ZE(f.type,null,f.pendingProps,null))?f.memoizedState=m:Ei||(m=f.type,u=f.pendingProps,w=Lf(Ke.current).createElement(m),w[Mn]=f,w[Is]=u,Js(w,m,u),Gn(w),f.stateNode=w):f.memoizedState=ZE(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Et(f),u===null&&Ei&&(w=f.stateNode=GE(f.type,f.pendingProps,Ke.current),Ys=f,Oo=!0,L=Zn,ul(f.type)?(eS=L,Zn=tc(w.firstChild)):Zn=L),Bn(u,f,f.pendingProps.children,m),Nt(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&Ei&&((L=w=Zn)&&(w=$E(w,f.type,f.pendingProps,Oo),w!==null?(f.stateNode=w,Ys=f,Zn=tc(w.firstChild),Oo=!1,L=!0):L=!1),L||sl(f)),Et(f),L=f.type,D=f.pendingProps,H=u!==null?u.memoizedProps:null,w=D.children,nv(L,D)?w=null:H!==null&&nv(L,H)&&(f.flags|=32),f.memoizedState!==null&&(L=iy(u,f,ny,null,null,m),bm._currentValue=L),Nt(u,f),Bn(u,f,w,m),f.child;case 6:return u===null&&Ei&&((u=m=Zn)&&(m=rv(m,f.pendingProps,Oo),m!==null?(f.stateNode=m,Ys=f,Zn=null,u=!0):u=!1),u||sl(f)),null;case 13:return Jk(u,f,m);case 4:return Xe(f,f.stateNode.containerInfo),w=f.pendingProps,u===null?f.child=vf(f,null,w,m):Bn(u,f,w,m),f.child;case 11:return Ob(u,f,f.type,f.pendingProps,m);case 7:return Bn(u,f,f.pendingProps,m),f.child;case 8:return Bn(u,f,f.pendingProps.children,m),f.child;case 12:return Bn(u,f,f.pendingProps.children,m),f.child;case 10:return w=f.pendingProps,va(f,f.type,w.value),Bn(u,f,w.children,m),f.child;case 9:return L=f.type._context,w=f.pendingProps.children,cf(f),L=ms(L),w=w(L),f.flags|=1,Bn(u,f,w,m),f.child;case 14:return Pb(u,f,f.type,f.pendingProps,m);case 15:return Bb(u,f,f.type,f.pendingProps,m);case 19:return eE(u,f,m);case 31:return w=f.pendingProps,m=f.mode,w={mode:w.mode,children:w.children},u===null?(m=o_(w,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=so(u.child,w),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return s_(u,f,m);case 24:return cf(f),w=ms(yn),u===null?(L=wu(),L===null&&(L=Nn,D=ZC(),L.pooledCache=D,D.refCount++,D!==null&&(L.pooledCacheLanes|=m),L=D),f.memoizedState={parent:w,cache:L},hf(f),va(f,yn,L)):((u.lanes&m)!==0&&(Gg(u,f),qr(f,null,null,m),Xl()),L=u.memoizedState,D=f.memoizedState,L.parent!==w?(L={parent:w,cache:w},f.memoizedState=L,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=L),va(f,yn,w)):(w=D.cache,va(f,yn,w),w!==L.cache&&pi(f,[yn],m,!0))),Bn(u,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function Eu(u){u.flags|=4}function Wb(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!er(f)){if(f=Ca.current,f!==null&&((Pi&4194048)===Pi?oo!==null:(Pi&62914560)!==Pi&&(Pi&536870912)===0||f!==oo))throw jg=QC,xk;u.flags|=8192}}function zb(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?Wl():536870912,u.lanes|=f,om|=f)}function a_(u,f){if(!Ei)switch(u.tailMode){case"hidden":f=u.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function Sn(u){var f=u.alternate!==null&&u.alternate.child===u.child,m=0,w=0;if(f)for(var L=u.child;L!==null;)m|=L.lanes|L.childLanes,w|=L.subtreeFlags&65011712,w|=L.flags&65011712,L.return=u,L=L.sibling;else for(L=u.child;L!==null;)m|=L.lanes|L.childLanes,w|=L.subtreeFlags,w|=L.flags,L.return=u,L=L.sibling;return u.subtreeFlags|=w,u.childLanes=m,f}function tE(u,f,m){var w=f.pendingProps;switch(Rp(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(f),null;case 1:return Sn(f),null;case 3:return m=f.stateNode,w=null,u!==null&&(w=u.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),rl(yn),tt(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(Mp(f)?Eu(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,wk())),Sn(f),null;case 26:return m=f.memoizedState,u===null?(Eu(f),m!==null?(Sn(f),Wb(f,m)):(Sn(f),f.flags&=-16777217)):m?m!==u.memoizedState?(Eu(f),Sn(f),Wb(f,m)):(Sn(f),f.flags&=-16777217):(u.memoizedProps!==w&&Eu(f),Sn(f),f.flags&=-16777217),null;case 27:jt(f),m=Ke.current;var L=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==w&&Eu(f);else{if(!w){if(f.stateNode===null)throw Error(i(166));return Sn(f),null}u=Oe.current,Mp(f)?bk(f):(u=GE(L,w,m),f.stateNode=u,Eu(f))}return Sn(f),null;case 5:if(jt(f),m=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==w&&Eu(f);else{if(!w){if(f.stateNode===null)throw Error(i(166));return Sn(f),null}if(u=Oe.current,Mp(f))bk(f);else{switch(L=Lf(Ke.current),u){case 1:u=L.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=L.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=L.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=L.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=L.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof w.is=="string"?L.createElement("select",{is:w.is}):L.createElement("select"),w.multiple?u.multiple=!0:w.size&&(u.size=w.size);break;default:u=typeof w.is=="string"?L.createElement(m,{is:w.is}):L.createElement(m)}}u[Mn]=f,u[Is]=w;e:for(L=f.child;L!==null;){if(L.tag===5||L.tag===6)u.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===f)break e;for(;L.sibling===null;){if(L.return===null||L.return===f)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}f.stateNode=u;e:switch(Js(u,m,w),m){case"button":case"input":case"select":case"textarea":u=!!w.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Eu(f)}}return Sn(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==w&&Eu(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(i(166));if(u=Ke.current,Mp(f)){if(u=f.stateNode,m=f.memoizedProps,w=null,L=Ys,L!==null)switch(L.tag){case 27:case 5:w=L.memoizedProps}u[Mn]=f,u=!!(u.nodeValue===m||w!==null&&w.suppressHydrationWarning===!0||WE(u.nodeValue,m)),u||sl(f)}else u=Lf(u).createTextNode(w),u[Mn]=f,f.stateNode=u}return Sn(f),null;case 13:if(w=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(L=Mp(f),w!==null&&w.dehydrated!==null){if(u===null){if(!L)throw Error(i(318));if(L=f.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(i(317));L[Mn]=f}else Op(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Sn(f),L=!1}else L=wk(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=L),L=!0;if(!L)return f.flags&256?(Pc(f),f):(Pc(f),null)}if(Pc(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=w!==null,u=u!==null&&u.memoizedState!==null,m){w=f.child,L=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(L=w.alternate.memoizedState.cachePool.pool);var D=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(D=w.memoizedState.cachePool.pool),D!==L&&(w.flags|=2048)}return m!==u&&m&&(f.child.flags|=8192),zb(f,f.updateQueue),Sn(f),null;case 4:return tt(),u===null&&Zy(f.stateNode.containerInfo),Sn(f),null;case 10:return rl(f.type),Sn(f),null;case 19:if(Te(ps),L=f.memoizedState,L===null)return Sn(f),null;if(w=(f.flags&128)!==0,D=L.rendering,D===null)if(w)a_(L,!1);else{if(_s!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(D=e_(u),D!==null){for(f.flags|=128,a_(L,!1),u=D.updateQueue,f.updateQueue=u,zb(f,u),f.subtreeFlags=0,u=m,m=f.child;m!==null;)Ip(m,u),m=m.sibling;return Le(ps,ps.current&1|2),f.child}u=u.sibling}L.tail!==null&&on()>am&&(f.flags|=128,w=!0,a_(L,!1),f.lanes=4194304)}else{if(!w)if(u=e_(D),u!==null){if(f.flags|=128,w=!0,u=u.updateQueue,f.updateQueue=u,zb(f,u),a_(L,!0),L.tail===null&&L.tailMode==="hidden"&&!D.alternate&&!Ei)return Sn(f),null}else 2*on()-L.renderingStartTime>am&&m!==536870912&&(f.flags|=128,w=!0,a_(L,!1),f.lanes=4194304);L.isBackwards?(D.sibling=f.child,f.child=D):(u=L.last,u!==null?u.sibling=D:f.child=D,L.last=D)}return L.tail!==null?(f=L.tail,L.rendering=f,L.tail=f.sibling,L.renderingStartTime=on(),f.sibling=null,u=ps.current,Le(ps,w?u&1|2:u&1),f):(Sn(f),null);case 22:case 23:return Pc(f),ty(),w=f.memoizedState!==null,u!==null?u.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(m&536870912)!==0&&(f.flags&128)===0&&(Sn(f),f.subtreeFlags&6&&(f.flags|=8192)):Sn(f),m=f.updateQueue,m!==null&&zb(f,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==m&&(f.flags|=2048),u!==null&&Te(uf),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),rl(yn),Sn(f),null;case 25:return null;case 30:return null}throw Error(i(156,f.tag))}function iE(u,f){switch(Rp(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return rl(yn),tt(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return jt(f),null;case 13:if(Pc(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(i(340));Op()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return Te(ps),null;case 4:return tt(),null;case 10:return rl(f.type),null;case 22:case 23:return Pc(f),ty(),u!==null&&Te(uf),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return rl(yn),null;case 25:return null;default:return null}}function nE(u,f){switch(Rp(f),f.tag){case 3:rl(yn),tt();break;case 26:case 27:case 5:jt(f);break;case 4:tt();break;case 13:Pc(f);break;case 19:Te(ps);break;case 10:rl(f.type);break;case 22:case 23:Pc(f),ty(),u!==null&&Te(uf);break;case 24:rl(yn)}}function l_(u,f){try{var m=f.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var L=w.next;m=L;do{if((m.tag&u)===u){w=void 0;var D=m.create,H=m.inst;w=D(),H.destroy=w}m=m.next}while(m!==L)}}catch(K){Ln(f,f.return,K)}}function Fh(u,f,m){try{var w=f.updateQueue,L=w!==null?w.lastEffect:null;if(L!==null){var D=L.next;w=D;do{if((w.tag&u)===u){var H=w.inst,K=H.destroy;if(K!==void 0){H.destroy=void 0,L=f;var oe=m,ye=K;try{ye()}catch(Pe){Ln(L,oe,Pe)}}}w=w.next}while(w!==D)}}catch(Pe){Ln(f,f.return,Pe)}}function sE(u){var f=u.updateQueue;if(f!==null){var m=u.stateNode;try{ey(f,m)}catch(w){Ln(u,u.return,w)}}}function Ty(u,f,m){m.props=Ph(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(w){Ln(u,f,w)}}function em(u,f){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var w=u.stateNode;break;case 30:w=u.stateNode;break;default:w=u.stateNode}typeof m=="function"?u.refCleanup=m(w):m.current=w}}catch(L){Ln(u,f,L)}}function Fc(u,f){var m=u.ref,w=u.refCleanup;if(m!==null)if(typeof w=="function")try{w()}catch(L){Ln(u,f,L)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(L){Ln(u,f,L)}else m.current=null}function Ub(u){var f=u.type,m=u.memoizedProps,w=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&w.focus();break e;case"img":m.src?w.src=m.src:m.srcSet&&(w.srcset=m.srcSet)}}catch(L){Ln(u,u.return,L)}}function qb(u,f,m){try{var w=u.stateNode;B4(w,u.type,m,f),w[Is]=f}catch(L){Ln(u,u.return,L)}}function tm(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&ul(u.type)||u.tag===4}function c_(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||tm(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&ul(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function $b(u,f,m){var w=u.tag;if(w===5||w===6)u=u.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(u),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=tv));else if(w!==4&&(w===27&&ul(u.type)&&(m=u.stateNode,f=null),u=u.child,u!==null))for($b(u,f,m),u=u.sibling;u!==null;)$b(u,f,m),u=u.sibling}function u_(u,f,m){var w=u.tag;if(w===5||w===6)u=u.stateNode,f?m.insertBefore(u,f):m.appendChild(u);else if(w!==4&&(w===27&&ul(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(u_(u,f,m),u=u.sibling;u!==null;)u_(u,f,m),u=u.sibling}function h_(u){var f=u.stateNode,m=u.memoizedProps;try{for(var w=u.type,L=f.attributes;L.length;)f.removeAttributeNode(L[0]);Js(f,w,m),f[Mn]=u,f[Is]=m}catch(D){Ln(u,u.return,D)}}var Vc=!1,an=!1,Tu=!1,rE=typeof WeakSet=="function"?WeakSet:Set,Xs=null;function S4(u,f){if(u=u.containerInfo,ec=cv,u=pk(u),qC(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var L=w.anchorOffset,D=w.focusNode;w=w.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var H=0,K=-1,oe=-1,ye=0,Pe=0,We=u,ke=null;t:for(;;){for(var Se;We!==m||L!==0&&We.nodeType!==3||(K=H+L),We!==D||w!==0&&We.nodeType!==3||(oe=H+w),We.nodeType===3&&(H+=We.nodeValue.length),(Se=We.firstChild)!==null;)ke=We,We=Se;for(;;){if(We===u)break t;if(ke===m&&++ye===L&&(K=H),ke===D&&++Pe===w&&(oe=H),(Se=We.nextSibling)!==null)break;We=ke,ke=We.parentNode}We=Se}m=K===-1||oe===-1?null:{start:K,end:oe}}else m=null}m=m||{start:0,end:0}}else m=null;for(iv={focusedElem:u,selectionRange:m},cv=!1,Xs=f;Xs!==null;)if(f=Xs,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Xs=u;else for(;Xs!==null;){switch(f=Xs,D=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&D!==null){u=void 0,m=f,L=D.memoizedProps,D=D.memoizedState,w=m.stateNode;try{var Rt=Ph(m.type,L,m.elementType===m.type);u=w.getSnapshotBeforeUpdate(Rt,D),w.__reactInternalSnapshotBeforeUpdate=u}catch(It){Ln(m,m.return,It)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,m=u.nodeType,m===9)Jy(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Jy(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=f.sibling,u!==null){u.return=f.return,Xs=u;break}Xs=f.return}}function oE(u,f,m){var w=m.flags;switch(m.tag){case 0:case 11:case 15:Vh(u,m),w&4&&l_(5,m);break;case 1:if(Vh(u,m),w&4)if(u=m.stateNode,f===null)try{u.componentDidMount()}catch(H){Ln(m,m.return,H)}else{var L=Ph(m.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(L,f,u.__reactInternalSnapshotBeforeUpdate)}catch(H){Ln(m,m.return,H)}}w&64&&sE(m),w&512&&em(m,m.return);break;case 3:if(Vh(u,m),w&64&&(u=m.updateQueue,u!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{ey(u,f)}catch(H){Ln(m,m.return,H)}}break;case 27:f===null&&w&4&&h_(m);case 26:case 5:Vh(u,m),f===null&&w&4&&Ub(m),w&512&&em(m,m.return);break;case 12:Vh(u,m);break;case 13:Vh(u,m),w&4&&cE(u,m),w&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=Zb.bind(null,m),fm(u,m))));break;case 22:if(w=m.memoizedState!==null||Vc,!w){f=f!==null&&f.memoizedState!==null||an,L=Vc;var D=an;Vc=w,(an=f)&&!D?Nu(u,m,(m.subtreeFlags&8772)!==0):Vh(u,m),Vc=L,an=D}break;case 30:break;default:Vh(u,m)}}function aE(u){var f=u.alternate;f!==null&&(u.alternate=null,aE(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&xr(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Xn=null,Wo=!1;function Du(u,f,m){for(m=m.child;m!==null;)lE(u,f,m),m=m.sibling}function lE(u,f,m){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Wr,m)}catch{}switch(m.tag){case 26:an||Fc(m,f),Du(u,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:an||Fc(m,f);var w=Xn,L=Wo;ul(m.type)&&(Xn=m.stateNode,Wo=!1),Du(u,f,m),y_(m.stateNode),Xn=w,Wo=L;break;case 5:an||Fc(m,f);case 6:if(w=Xn,L=Wo,Xn=null,Du(u,f,m),Xn=w,Wo=L,Xn!==null)if(Wo)try{(Xn.nodeType===9?Xn.body:Xn.nodeName==="HTML"?Xn.ownerDocument.body:Xn).removeChild(m.stateNode)}catch(D){Ln(m,f,D)}else try{Xn.removeChild(m.stateNode)}catch(D){Ln(m,f,D)}break;case 18:Xn!==null&&(Wo?(u=Xn,sv(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),N_(u)):sv(Xn,m.stateNode));break;case 4:w=Xn,L=Wo,Xn=m.stateNode.containerInfo,Wo=!0,Du(u,f,m),Xn=w,Wo=L;break;case 0:case 11:case 14:case 15:an||Fh(2,m,f),an||Fh(4,m,f),Du(u,f,m);break;case 1:an||(Fc(m,f),w=m.stateNode,typeof w.componentWillUnmount=="function"&&Ty(m,f,w)),Du(u,f,m);break;case 21:Du(u,f,m);break;case 22:an=(w=an)||m.memoizedState!==null,Du(u,f,m),an=w;break;default:Du(u,f,m)}}function cE(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{N_(u)}catch(m){Ln(f,f.return,m)}}function L4(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new rE),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new rE),f;default:throw Error(i(435,u.tag))}}function Dy(u,f){var m=L4(u);f.forEach(function(w){var L=N4.bind(null,u,w);m.has(w)||(m.add(w),w.then(L,L))})}function ya(u,f){var m=f.deletions;if(m!==null)for(var w=0;w<m.length;w++){var L=m[w],D=u,H=f,K=H;e:for(;K!==null;){switch(K.tag){case 27:if(ul(K.type)){Xn=K.stateNode,Wo=!1;break e}break;case 5:Xn=K.stateNode,Wo=!1;break e;case 3:case 4:Xn=K.stateNode.containerInfo,Wo=!0;break e}K=K.return}if(Xn===null)throw Error(i(160));lE(D,H,L),Xn=null,Wo=!1,D=L.alternate,D!==null&&(D.return=null),L.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Ny(f,u),f=f.sibling}var ll=null;function Ny(u,f){var m=u.alternate,w=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:ya(f,u),zo(u),w&4&&(Fh(3,u,u.return),l_(3,u),Fh(5,u,u.return));break;case 1:ya(f,u),zo(u),w&512&&(an||m===null||Fc(m,m.return)),w&64&&Vc&&(u=u.updateQueue,u!==null&&(w=u.callbacks,w!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?w:m.concat(w))));break;case 26:var L=ll;if(ya(f,u),zo(u),w&512&&(an||m===null||Fc(m,m.return)),w&4){var D=m!==null?m.memoizedState:null;if(w=u.memoizedState,m===null)if(w===null)if(u.stateNode===null){e:{w=u.type,m=u.memoizedProps,L=L.ownerDocument||L;t:switch(w){case"title":D=L.getElementsByTagName("title")[0],(!D||D[ja]||D[Mn]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=L.createElement(w),L.head.insertBefore(D,L.querySelector("head > title"))),Js(D,w,m),D[Mn]=u,Gn(D),w=D;break e;case"link":var H=JE("link","href",L).get(w+(m.href||""));if(H){for(var K=0;K<H.length;K++)if(D=H[K],D.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&D.getAttribute("rel")===(m.rel==null?null:m.rel)&&D.getAttribute("title")===(m.title==null?null:m.title)&&D.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){H.splice(K,1);break t}}D=L.createElement(w),Js(D,w,m),L.head.appendChild(D);break;case"meta":if(H=JE("meta","content",L).get(w+(m.content||""))){for(K=0;K<H.length;K++)if(D=H[K],D.getAttribute("content")===(m.content==null?null:""+m.content)&&D.getAttribute("name")===(m.name==null?null:m.name)&&D.getAttribute("property")===(m.property==null?null:m.property)&&D.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&D.getAttribute("charset")===(m.charSet==null?null:m.charSet)){H.splice(K,1);break t}}D=L.createElement(w),Js(D,w,m),L.head.appendChild(D);break;default:throw Error(i(468,w))}D[Mn]=u,Gn(D),w=D}u.stateNode=w}else eT(L,u.type,u.stateNode);else u.stateNode=QE(L,w,u.memoizedProps);else D!==w?(D===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):D.count--,w===null?eT(L,u.type,u.stateNode):QE(L,w,u.memoizedProps)):w===null&&u.stateNode!==null&&qb(u,u.memoizedProps,m.memoizedProps)}break;case 27:ya(f,u),zo(u),w&512&&(an||m===null||Fc(m,m.return)),m!==null&&w&4&&qb(u,u.memoizedProps,m.memoizedProps);break;case 5:if(ya(f,u),zo(u),w&512&&(an||m===null||Fc(m,m.return)),u.flags&32){L=u.stateNode;try{Rs(L,"")}catch(Se){Ln(u,u.return,Se)}}w&4&&u.stateNode!=null&&(L=u.memoizedProps,qb(u,L,m!==null?m.memoizedProps:L)),w&1024&&(Tu=!0);break;case 6:if(ya(f,u),zo(u),w&4){if(u.stateNode===null)throw Error(i(162));w=u.memoizedProps,m=u.stateNode;try{m.nodeValue=w}catch(Se){Ln(u,u.return,Se)}}break;case 3:if(_m=null,L=ll,ll=Xt(f.containerInfo),ya(f,u),ll=L,zo(u),w&4&&m!==null&&m.memoizedState.isDehydrated)try{N_(f.containerInfo)}catch(Se){Ln(u,u.return,Se)}Tu&&(Tu=!1,uE(u));break;case 4:w=ll,ll=Xt(u.stateNode.containerInfo),ya(f,u),zo(u),ll=w;break;case 12:ya(f,u),zo(u);break;case 13:ya(f,u),zo(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(By=on()),w&4&&(w=u.updateQueue,w!==null&&(u.updateQueue=null,Dy(u,w)));break;case 22:L=u.memoizedState!==null;var oe=m!==null&&m.memoizedState!==null,ye=Vc,Pe=an;if(Vc=ye||L,an=Pe||oe,ya(f,u),an=Pe,Vc=ye,zo(u),w&8192)e:for(f=u.stateNode,f._visibility=L?f._visibility&-2:f._visibility|1,L&&(m===null||oe||Vc||an||yf(u)),m=null,f=u;;){if(f.tag===5||f.tag===26){if(m===null){oe=m=f;try{if(D=oe.stateNode,L)H=D.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{K=oe.stateNode;var We=oe.memoizedProps.style,ke=We!=null&&We.hasOwnProperty("display")?We.display:null;K.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch(Se){Ln(oe,oe.return,Se)}}}else if(f.tag===6){if(m===null){oe=f;try{oe.stateNode.nodeValue=L?"":oe.memoizedProps}catch(Se){Ln(oe,oe.return,Se)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=u.updateQueue,w!==null&&(m=w.retryQueue,m!==null&&(w.retryQueue=null,Dy(u,m))));break;case 19:ya(f,u),zo(u),w&4&&(w=u.updateQueue,w!==null&&(u.updateQueue=null,Dy(u,w)));break;case 30:break;case 21:break;default:ya(f,u),zo(u)}}function zo(u){var f=u.flags;if(f&2){try{for(var m,w=u.return;w!==null;){if(tm(w)){m=w;break}w=w.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var L=m.stateNode,D=c_(u);u_(u,D,L);break;case 5:var H=m.stateNode;m.flags&32&&(Rs(H,""),m.flags&=-33);var K=c_(u);u_(u,K,H);break;case 3:case 4:var oe=m.stateNode.containerInfo,ye=c_(u);$b(u,ye,oe);break;default:throw Error(i(161))}}catch(Pe){Ln(u,u.return,Pe)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function uE(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;uE(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function Vh(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)oE(u,f.alternate,f),f=f.sibling}function yf(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Fh(4,f,f.return),yf(f);break;case 1:Fc(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&Ty(f,f.return,m),yf(f);break;case 27:y_(f.stateNode);case 26:case 5:Fc(f,f.return),yf(f);break;case 22:f.memoizedState===null&&yf(f);break;case 30:yf(f);break;default:yf(f)}u=u.sibling}}function Nu(u,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,L=u,D=f,H=D.flags;switch(D.tag){case 0:case 11:case 15:Nu(L,D,m),l_(4,D);break;case 1:if(Nu(L,D,m),w=D,L=w.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(ye){Ln(w,w.return,ye)}if(w=D,L=w.updateQueue,L!==null){var K=w.stateNode;try{var oe=L.shared.hiddenCallbacks;if(oe!==null)for(L.shared.hiddenCallbacks=null,L=0;L<oe.length;L++)Dk(oe[L],K)}catch(ye){Ln(w,w.return,ye)}}m&&H&64&&sE(D),em(D,D.return);break;case 27:h_(D);case 26:case 5:Nu(L,D,m),m&&w===null&&H&4&&Ub(D),em(D,D.return);break;case 12:Nu(L,D,m);break;case 13:Nu(L,D,m),m&&H&4&&cE(L,D);break;case 22:D.memoizedState===null&&Nu(L,D,m),em(D,D.return);break;case 30:break;default:Nu(L,D,m)}f=f.sibling}}function Iy(u,f){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&Bp(m))}function Ay(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Bp(u))}function Hc(u,f,m,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)hE(u,f,m,w),f=f.sibling}function hE(u,f,m,w){var L=f.flags;switch(f.tag){case 0:case 11:case 15:Hc(u,f,m,w),L&2048&&l_(9,f);break;case 1:Hc(u,f,m,w);break;case 3:Hc(u,f,m,w),L&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Bp(u)));break;case 12:if(L&2048){Hc(u,f,m,w),u=f.stateNode;try{var D=f.memoizedProps,H=D.id,K=D.onPostCommit;typeof K=="function"&&K(H,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(oe){Ln(f,f.return,oe)}}else Hc(u,f,m,w);break;case 13:Hc(u,f,m,w);break;case 23:break;case 22:D=f.stateNode,H=f.alternate,f.memoizedState!==null?D._visibility&2?Hc(u,f,m,w):d_(u,f):D._visibility&2?Hc(u,f,m,w):(D._visibility|=2,im(u,f,m,w,(f.subtreeFlags&10256)!==0)),L&2048&&Iy(H,f);break;case 24:Hc(u,f,m,w),L&2048&&Ay(f.alternate,f);break;default:Hc(u,f,m,w)}}function im(u,f,m,w,L){for(L=L&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var D=u,H=f,K=m,oe=w,ye=H.flags;switch(H.tag){case 0:case 11:case 15:im(D,H,K,oe,L),l_(8,H);break;case 23:break;case 22:var Pe=H.stateNode;H.memoizedState!==null?Pe._visibility&2?im(D,H,K,oe,L):d_(D,H):(Pe._visibility|=2,im(D,H,K,oe,L)),L&&ye&2048&&Iy(H.alternate,H);break;case 24:im(D,H,K,oe,L),L&&ye&2048&&Ay(H.alternate,H);break;default:im(D,H,K,oe,L)}f=f.sibling}}function d_(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=u,w=f,L=w.flags;switch(w.tag){case 22:d_(m,w),L&2048&&Iy(w.alternate,w);break;case 24:d_(m,w),L&2048&&Ay(w.alternate,w);break;default:d_(m,w)}f=f.sibling}}var jr=8192;function nm(u){if(u.subtreeFlags&jr)for(u=u.child;u!==null;)dE(u),u=u.sibling}function dE(u){switch(u.tag){case 26:nm(u),u.flags&jr&&u.memoizedState!==null&&Y4(ll,u.memoizedState,u.memoizedProps);break;case 5:nm(u);break;case 3:case 4:var f=ll;ll=Xt(u.stateNode.containerInfo),nm(u),ll=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=jr,jr=16777216,nm(u),jr=f):nm(u));break;default:nm(u)}}function fE(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function sm(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var w=f[m];Xs=w,mE(w,u)}fE(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)gE(u),u=u.sibling}function gE(u){switch(u.tag){case 0:case 11:case 15:sm(u),u.flags&2048&&Fh(9,u,u.return);break;case 3:sm(u);break;case 12:sm(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,jb(u)):sm(u);break;default:sm(u)}}function jb(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var w=f[m];Xs=w,mE(w,u)}fE(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Fh(8,f,f.return),jb(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,jb(f));break;default:jb(f)}u=u.sibling}}function mE(u,f){for(;Xs!==null;){var m=Xs;switch(m.tag){case 0:case 11:case 15:Fh(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var w=m.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Bp(m.memoizedState.cache)}if(w=m.child,w!==null)w.return=m,Xs=w;else e:for(m=u;Xs!==null;){w=Xs;var L=w.sibling,D=w.return;if(aE(w),w===m){Xs=null;break e}if(L!==null){L.return=D,Xs=L;break e}Xs=D}}}var x4={getCacheForType:function(u){var f=ms(yn),m=f.data.get(u);return m===void 0&&(m=u(),f.data.set(u,m)),m}},Ry=typeof WeakMap=="function"?WeakMap:Map,dn=0,Nn=null,xi=null,Pi=0,fn=0,Sa=null,Hh=!1,rm=!1,My=!1,Iu=0,_s=0,Wh=0,Sf=0,Oy=0,cl=0,om=0,f_=null,Uo=null,Py=!1,By=0,am=1/0,g_=null,zh=null,Nr=0,Uh=null,lm=null,cm=0,Fy=0,Vy=null,pE=null,um=0,Hy=null;function Gr(){if((dn&2)!==0&&Pi!==0)return Pi&-Pi;if($.T!==null){var u=$g;return u!==0?u:Jb()}return No()}function _E(){cl===0&&(cl=(Pi&536870912)===0||Ei?Ns():536870912);var u=Ca.current;return u!==null&&(u.flags|=32),cl}function La(u,f,m){(u===Nn&&(fn===2||fn===9)||u.cancelPendingCommit!==null)&&(hm(u,0),qh(u,Pi,cl,!1)),Bi(u,m),((dn&2)===0||u!==Nn)&&(u===Nn&&((dn&2)===0&&(Sf|=m),_s===4&&qh(u,Pi,cl,!1)),Wc(u))}function bE(u,f,m){if((dn&6)!==0)throw Error(i(327));var w=!m&&(f&124)===0&&(f&u.expiredLanes)===0||cr(u,f),L=w?T4(u,f):Uy(u,f,!0),D=w;do{if(L===0){rm&&!w&&qh(u,f,0,!1);break}else{if(m=u.current.alternate,D&&!k4(m)){L=Uy(u,f,!1),D=!1;continue}if(L===2){if(D=f,u.errorRecoveryDisabledLanes&D)var H=0;else H=u.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){f=H;e:{var K=u;L=f_;var oe=K.current.memoizedState.isDehydrated;if(oe&&(hm(K,H).flags|=256),H=Uy(K,H,!1),H!==2){if(My&&!oe){K.errorRecoveryDisabledLanes|=D,Sf|=D,L=4;break e}D=Uo,Uo=L,D!==null&&(Uo===null?Uo=D:Uo.push.apply(Uo,D))}L=H}if(D=!1,L!==2)continue}}if(L===1){hm(u,0),qh(u,f,0,!0);break}e:{switch(w=u,D=L,D){case 0:case 1:throw Error(i(345));case 4:if((f&4194048)!==f)break;case 6:qh(w,f,cl,!Hh);break e;case 2:Uo=null;break;case 3:case 5:break;default:throw Error(i(329))}if((f&62914560)===f&&(L=By+300-on(),10<L)){if(qh(w,f,cl,!Hh),io(w,0,!0)!==0)break e;w.timeoutHandle=zE(vE.bind(null,w,m,Uo,g_,Py,f,cl,Sf,om,Hh,D,2,-0,0),L);break e}vE(w,m,Uo,g_,Py,f,cl,Sf,om,Hh,D,0,-0,0)}}break}while(!0);Wc(u)}function vE(u,f,m,w,L,D,H,K,oe,ye,Pe,We,ke,Se){if(u.timeoutHandle=-1,We=f.subtreeFlags,(We&8192||(We&16785408)===16785408)&&(dr={stylesheets:null,count:0,unsuspend:K4},dE(f),We=Z4(),We!==null)){u.cancelPendingCommit=We(m_.bind(null,u,f,D,m,w,L,H,K,oe,Pe,1,ke,Se)),qh(u,D,H,!ye);return}m_(u,f,D,m,w,L,H,K,oe)}function k4(u){for(var f=u;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var w=0;w<m.length;w++){var L=m[w],D=L.getSnapshot;L=L.value;try{if(!_a(D(),L))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function qh(u,f,m,w){f&=~Oy,f&=~Sf,u.suspendedLanes|=f,u.pingedLanes&=~f,w&&(u.warmLanes|=f),w=u.expirationTimes;for(var L=f;0<L;){var D=31-jn(L),H=1<<D;w[D]=-1,L&=~H}m!==0&&$a(u,m,f)}function Gb(){return(dn&6)===0?(b_(0),!1):!0}function Wy(){if(xi!==null){if(fn===0)var u=xi.return;else u=xi,G=Ih=null,bb(u),Zs=null,Ho=0,u=xi;for(;u!==null;)nE(u.alternate,u),u=u.return;xi=null}}function hm(u,f){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,V4(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),Wy(),Nn=u,xi=m=so(u.current,null),Pi=f,fn=0,Sa=null,Hh=!1,rm=cr(u,f),My=!1,om=cl=Oy=Sf=Wh=_s=0,Uo=f_=null,Py=!1,(f&8)!==0&&(f|=f&32);var w=u.entangledLanes;if(w!==0)for(u=u.entanglements,w&=f;0<w;){var L=31-jn(w),D=1<<L;f|=u[L],w&=~D}return Iu=f,tf(),m}function wE(u,f){di=null,$.H=Qp,f===ro||f===mb?(f=Ek(),fn=3):f===xk?(f=Ek(),fn=4):fn=f===Xk?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Sa=f,xi===null&&(_s=1,n_(u,no(f,u.current)))}function CE(){var u=$.H;return $.H=Qp,u===null?Qp:u}function yE(){var u=$.A;return $.A=x4,u}function zy(){_s=4,Hh||(Pi&4194048)!==Pi&&Ca.current!==null||(rm=!0),(Wh&134217727)===0&&(Sf&134217727)===0||Nn===null||qh(Nn,Pi,cl,!1)}function Uy(u,f,m){var w=dn;dn|=2;var L=CE(),D=yE();(Nn!==u||Pi!==f)&&(g_=null,hm(u,f)),f=!1;var H=_s;e:do try{if(fn!==0&&xi!==null){var K=xi,oe=Sa;switch(fn){case 8:Wy(),H=6;break e;case 3:case 2:case 9:case 6:Ca.current===null&&(f=!0);var ye=fn;if(fn=0,Sa=null,dm(u,K,oe,ye),m&&rm){H=0;break e}break;default:ye=fn,fn=0,Sa=null,dm(u,K,oe,ye)}}E4(),H=_s;break}catch(Pe){wE(u,Pe)}while(!0);return f&&u.shellSuspendCounter++,G=Ih=null,dn=w,$.H=L,$.A=D,xi===null&&(Nn=null,Pi=0,tf()),H}function E4(){for(;xi!==null;)qy(xi)}function T4(u,f){var m=dn;dn|=2;var w=CE(),L=yE();Nn!==u||Pi!==f?(g_=null,am=on()+500,hm(u,f)):rm=cr(u,f);e:do try{if(fn!==0&&xi!==null){f=xi;var D=Sa;t:switch(fn){case 1:fn=0,Sa=null,dm(u,f,D,1);break;case 2:case 9:if(kk(D)){fn=0,Sa=null,LE(f);break}f=function(){fn!==2&&fn!==9||Nn!==u||(fn=7),Wc(u)},D.then(f,f);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:kk(D)?(fn=0,Sa=null,LE(f)):(fn=0,Sa=null,dm(u,f,D,7));break;case 5:var H=null;switch(xi.tag){case 26:H=xi.memoizedState;case 5:case 27:var K=xi;if(!H||er(H)){fn=0,Sa=null;var oe=K.sibling;if(oe!==null)xi=oe;else{var ye=K.return;ye!==null?(xi=ye,Kb(ye)):xi=null}break t}}fn=0,Sa=null,dm(u,f,D,5);break;case 6:fn=0,Sa=null,dm(u,f,D,6);break;case 8:Wy(),_s=6;break e;default:throw Error(i(462))}}SE();break}catch(Pe){wE(u,Pe)}while(!0);return G=Ih=null,$.H=w,$.A=L,dn=m,xi!==null?0:(Nn=null,Pi=0,tf(),_s)}function SE(){for(;xi!==null&&!Tn();)qy(xi)}function qy(u){var f=Hb(u.alternate,u,Iu);u.memoizedProps=u.pendingProps,f===null?Kb(u):xi=f}function LE(u){var f=u,m=f.alternate;switch(f.tag){case 15:case 0:f=Fb(m,f,f.pendingProps,f.type,void 0,Pi);break;case 11:f=Fb(m,f,f.pendingProps,f.type.render,f.ref,Pi);break;case 5:bb(f);default:nE(m,f),f=xi=Ip(f,Iu),f=Hb(m,f,Iu)}u.memoizedProps=u.pendingProps,f===null?Kb(u):xi=f}function dm(u,f,m,w){G=Ih=null,bb(f),Zs=null,Ho=0;var L=f.return;try{if(Zk(u,L,f,m,Pi)){_s=1,n_(u,no(m,u.current)),xi=null;return}}catch(D){if(L!==null)throw xi=L,D;_s=1,n_(u,no(m,u.current)),xi=null;return}f.flags&32768?(Ei||w===1?u=!0:rm||(Pi&536870912)!==0?u=!1:(Hh=u=!0,(w===2||w===9||w===3||w===6)&&(w=Ca.current,w!==null&&w.tag===13&&(w.flags|=16384))),xE(f,u)):Kb(f)}function Kb(u){var f=u;do{if((f.flags&32768)!==0){xE(f,Hh);return}u=f.return;var m=tE(f.alternate,f,Iu);if(m!==null){xi=m;return}if(f=f.sibling,f!==null){xi=f;return}xi=f=u}while(f!==null);_s===0&&(_s=5)}function xE(u,f){do{var m=iE(u.alternate,u);if(m!==null){m.flags&=32767,xi=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(u=u.sibling,u!==null)){xi=u;return}xi=u=m}while(u!==null);_s=6,xi=null}function m_(u,f,m,w,L,D,H,K,oe){u.cancelPendingCommit=null;do Yb();while(Nr!==0);if((dn&6)!==0)throw Error(i(327));if(f!==null){if(f===u.current)throw Error(i(177));if(D=f.lanes|f.childLanes,D|=jC,Do(u,m,D,H,K,oe),u===Nn&&(xi=Nn=null,Pi=0),lm=f,Uh=u,cm=m,Fy=D,Vy=L,pE=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,RE(is,function(){return NE(),null})):(u.callbackNode=null,u.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=$.T,$.T=null,L=te.p,te.p=2,H=dn,dn|=4;try{S4(u,f,m)}finally{dn=H,te.p=L,$.T=w}}Nr=1,kE(),EE(),TE()}}function kE(){if(Nr===1){Nr=0;var u=Uh,f=lm,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=$.T,$.T=null;var w=te.p;te.p=2;var L=dn;dn|=4;try{Ny(f,u);var D=iv,H=pk(u.containerInfo),K=D.focusedElem,oe=D.selectionRange;if(H!==K&&K&&K.ownerDocument&&mk(K.ownerDocument.documentElement,K)){if(oe!==null&&qC(K)){var ye=oe.start,Pe=oe.end;if(Pe===void 0&&(Pe=ye),"selectionStart"in K)K.selectionStart=ye,K.selectionEnd=Math.min(Pe,K.value.length);else{var We=K.ownerDocument||document,ke=We&&We.defaultView||window;if(ke.getSelection){var Se=ke.getSelection(),Rt=K.textContent.length,It=Math.min(oe.start,Rt),bn=oe.end===void 0?It:Math.min(oe.end,Rt);!Se.extend&&It>bn&&(H=bn,bn=It,It=H);var be=UC(K,It),fe=UC(K,bn);if(be&&fe&&(Se.rangeCount!==1||Se.anchorNode!==be.node||Se.anchorOffset!==be.offset||Se.focusNode!==fe.node||Se.focusOffset!==fe.offset)){var Ce=We.createRange();Ce.setStart(be.node,be.offset),Se.removeAllRanges(),It>bn?(Se.addRange(Ce),Se.extend(fe.node,fe.offset)):(Ce.setEnd(fe.node,fe.offset),Se.addRange(Ce))}}}}for(We=[],Se=K;Se=Se.parentNode;)Se.nodeType===1&&We.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<We.length;K++){var Ve=We[K];Ve.element.scrollLeft=Ve.left,Ve.element.scrollTop=Ve.top}}cv=!!ec,iv=ec=null}finally{dn=L,te.p=w,$.T=m}}u.current=f,Nr=2}}function EE(){if(Nr===2){Nr=0;var u=Uh,f=lm,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=$.T,$.T=null;var w=te.p;te.p=2;var L=dn;dn|=4;try{oE(u,f.alternate,f)}finally{dn=L,te.p=w,$.T=m}}Nr=3}}function TE(){if(Nr===4||Nr===3){Nr=0,Pl();var u=Uh,f=lm,m=cm,w=pE;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Nr=5:(Nr=0,lm=Uh=null,DE(u,u.pendingLanes));var L=u.pendingLanes;if(L===0&&(zh=null),la(m),f=f.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Wr,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=$.T,L=te.p,te.p=2,$.T=null;try{for(var D=u.onRecoverableError,H=0;H<w.length;H++){var K=w[H];D(K.value,{componentStack:K.stack})}}finally{$.T=f,te.p=L}}(cm&3)!==0&&Yb(),Wc(u),L=u.pendingLanes,(m&4194090)!==0&&(L&42)!==0?u===Hy?um++:(um=0,Hy=u):um=0,b_(0)}}function DE(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Bp(f)))}function Yb(u){return kE(),EE(),TE(),NE()}function NE(){if(Nr!==5)return!1;var u=Uh,f=Fy;Fy=0;var m=la(cm),w=$.T,L=te.p;try{te.p=32>m?32:m,$.T=null,m=Vy,Vy=null;var D=Uh,H=cm;if(Nr=0,lm=Uh=null,cm=0,(dn&6)!==0)throw Error(i(331));var K=dn;if(dn|=4,gE(D.current),hE(D,D.current,H,m),dn=K,b_(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Wr,D)}catch{}return!0}finally{te.p=L,$.T=w,DE(u,f)}}function IE(u,f,m){f=no(m,f),f=Mb(u.stateNode,f,2),u=Cu(u,f,2),u!==null&&(Bi(u,2),Wc(u))}function Ln(u,f,m){if(u.tag===3)IE(u,u,m);else for(;f!==null;){if(f.tag===3){IE(f,u,m);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(zh===null||!zh.has(w))){u=no(m,u),m=Sy(2),w=Cu(f,m,2),w!==null&&(Yk(m,w,f,u),Bi(w,2),Wc(w));break}}f=f.return}}function $y(u,f,m){var w=u.pingCache;if(w===null){w=u.pingCache=new Ry;var L=new Set;w.set(f,L)}else L=w.get(f),L===void 0&&(L=new Set,w.set(f,L));L.has(m)||(My=!0,L.add(m),u=D4.bind(null,u,f,m),f.then(u,u))}function D4(u,f,m){var w=u.pingCache;w!==null&&w.delete(f),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,Nn===u&&(Pi&m)===m&&(_s===4||_s===3&&(Pi&62914560)===Pi&&300>on()-By?(dn&2)===0&&hm(u,0):Oy|=m,om===Pi&&(om=0)),Wc(u)}function AE(u,f){f===0&&(f=Wl()),u=nf(u,f),u!==null&&(Bi(u,f),Wc(u))}function Zb(u){var f=u.memoizedState,m=0;f!==null&&(m=f.retryLane),AE(u,m)}function N4(u,f){var m=0;switch(u.tag){case 13:var w=u.stateNode,L=u.memoizedState;L!==null&&(m=L.retryLane);break;case 19:w=u.stateNode;break;case 22:w=u.stateNode._retryCache;break;default:throw Error(i(314))}w!==null&&w.delete(f),AE(u,m)}function RE(u,f){return Ci(u,f)}var p_=null,$h=null,Xb=!1,__=!1,Qb=!1,jh=0;function Wc(u){u!==$h&&u.next===null&&($h===null?p_=$h=u:$h=$h.next=u),__=!0,Xb||(Xb=!0,jy())}function b_(u,f){if(!Qb&&__){Qb=!0;do for(var m=!1,w=p_;w!==null;){if(u!==0){var L=w.pendingLanes;if(L===0)var D=0;else{var H=w.suspendedLanes,K=w.pingedLanes;D=(1<<31-jn(42|u)+1)-1,D&=L&~(H&~K),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(m=!0,OE(w,D))}else D=Pi,D=io(w,w===Nn?D:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(D&3)===0||cr(w,D)||(m=!0,OE(w,D));w=w.next}while(m);Qb=!1}}function I4(){v_()}function v_(){__=Xb=!1;var u=0;jh!==0&&(F4()&&(u=jh),jh=0);for(var f=on(),m=null,w=p_;w!==null;){var L=w.next,D=w_(w,f);D===0?(w.next=null,m===null?p_=L:m.next=L,L===null&&($h=m)):(m=w,(u!==0||(D&3)!==0)&&(__=!0)),w=L}b_(u)}function w_(u,f){for(var m=u.suspendedLanes,w=u.pingedLanes,L=u.expirationTimes,D=u.pendingLanes&-62914561;0<D;){var H=31-jn(D),K=1<<H,oe=L[H];oe===-1?((K&m)===0||(K&w)!==0)&&(L[H]=Hl(K,f)):oe<=f&&(u.expiredLanes|=K),D&=~K}if(f=Nn,m=Pi,m=io(u,u===f?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),w=u.callbackNode,m===0||u===f&&(fn===2||fn===9)||u.cancelPendingCommit!==null)return w!==null&&w!==null&&ri(w),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||cr(u,m)){if(f=m&-m,f===u.callbackPriority)return f;switch(w!==null&&ri(w),la(m)){case 2:case 8:m=Hr;break;case 32:m=is;break;case 268435456:m=To;break;default:m=is}return w=ME.bind(null,u),m=Ci(m,w),u.callbackPriority=f,u.callbackNode=m,f}return w!==null&&w!==null&&ri(w),u.callbackPriority=2,u.callbackNode=null,2}function ME(u,f){if(Nr!==0&&Nr!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(Yb()&&u.callbackNode!==m)return null;var w=Pi;return w=io(u,u===Nn?w:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),w===0?null:(bE(u,w,f),w_(u,on()),u.callbackNode!=null&&u.callbackNode===m?ME.bind(null,u):null)}function OE(u,f){if(Yb())return null;bE(u,f,!0)}function jy(){H4(function(){(dn&6)!==0?Ci(Fl,I4):v_()})}function Jb(){return jh===0&&(jh=Ns()),jh}function PE(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:mu(""+u)}function BE(u,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,u.id&&m.setAttribute("form",u.id),f.parentNode.insertBefore(m,f),u=new FormData(u),m.parentNode.removeChild(m),u}function A4(u,f,m,w,L){if(f==="submit"&&m&&m.stateNode===L){var D=PE((L[Is]||null).action),H=w.submitter;H&&(f=(f=H[Is]||null)?PE(f.formAction):H.getAttribute("formAction"),f!==null&&(D=f,H=null));var K=new Ae("action","action",null,w,L);u.push({event:K,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(jh!==0){var oe=H?BE(L,H):new FormData(L);Zp(m,{pending:!0,data:oe,method:L.method,action:D},null,oe)}}else typeof D=="function"&&(K.preventDefault(),oe=H?BE(L,H):new FormData(L),Zp(m,{pending:!0,data:oe,method:L.method,action:D},D,oe))},currentTarget:L}]})}}for(var Gy=0;Gy<tn.length;Gy++){var Ky=tn[Gy],R4=Ky.toLowerCase(),M4=Ky[0].toUpperCase()+Ky.slice(1);Gl(R4,"on"+M4)}Gl(ab,"onAnimationEnd"),Gl(_k,"onAnimationIteration"),Gl(ba,"onAnimationStart"),Gl("dblclick","onDoubleClick"),Gl("focusin","onFocus"),Gl("focusout","onBlur"),Gl(lb,"onTransitionRun"),Gl(p4,"onTransitionStart"),Gl(Hg,"onTransitionCancel"),Gl(Ep,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),je("onBeforeInput",["compositionend","keypress","textInput","paste"]),je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var C_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(C_));function FE(u,f){f=(f&4)!==0;for(var m=0;m<u.length;m++){var w=u[m],L=w.event;w=w.listeners;e:{var D=void 0;if(f)for(var H=w.length-1;0<=H;H--){var K=w[H],oe=K.instance,ye=K.currentTarget;if(K=K.listener,oe!==D&&L.isPropagationStopped())break e;D=K,L.currentTarget=ye;try{D(L)}catch(Pe){wf(Pe)}L.currentTarget=null,D=oe}else for(H=0;H<w.length;H++){if(K=w[H],oe=K.instance,ye=K.currentTarget,K=K.listener,oe!==D&&L.isPropagationStopped())break e;D=K,L.currentTarget=ye;try{D(L)}catch(Pe){wf(Pe)}L.currentTarget=null,D=oe}}}}function ki(u,f){var m=f[ca];m===void 0&&(m=f[ca]=new Set);var w=u+"__bubble";m.has(w)||(VE(f,u,2,!1),m.add(w))}function Yy(u,f,m){var w=0;f&&(w|=4),VE(m,u,w,f)}var qo="_reactListening"+Math.random().toString(36).slice(2);function Zy(u){if(!u[qo]){u[qo]=!0,pt.forEach(function(m){m!=="selectionchange"&&(O4.has(m)||Yy(m,!1,u),Yy(m,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[qo]||(f[qo]=!0,Yy("selectionchange",!1,f))}}function VE(u,f,m,w){switch(sT(f)){case 2:var L=J4;break;case 8:L=vm;break;default:L=oS}m=L.bind(null,f,m,u),L=void 0,!Nc||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(L=!0),w?L!==void 0?u.addEventListener(f,m,{capture:!0,passive:L}):u.addEventListener(f,m,!0):L!==void 0?u.addEventListener(f,m,{passive:L}):u.addEventListener(f,m,!1)}function Au(u,f,m,w,L){var D=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var H=w.tag;if(H===3||H===4){var K=w.stateNode.containerInfo;if(K===L)break;if(H===4)for(H=w.return;H!==null;){var oe=H.tag;if((oe===3||oe===4)&&H.stateNode.containerInfo===L)return;H=H.return}for(;K!==null;){if(H=ua(K),H===null)return;if(oe=H.tag,oe===5||oe===6||oe===26||oe===27){w=D=H;continue e}K=K.parentNode}}w=w.return}Sh(function(){var ye=D,Pe=Ch(m),We=[];e:{var ke=Tp.get(u);if(ke!==void 0){var Se=Ae,Rt=u;switch(u){case"keypress":if(Xi(m)===0)break e;case"keydown":case"keyup":Se=BC;break;case"focusin":Rt="focus",Se=gs;break;case"focusout":Rt="blur",Se=gs;break;case"beforeblur":case"afterblur":Se=gs;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=On;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=as;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=a4;break;case ab:case _k:case ba:Se=Qa;break;case Ep:Se=l4;break;case"scroll":case"scrollend":Se=yt;break;case"wheel":Se=u4;break;case"copy":case"cut":case"paste":Se=kp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=_u;break;case"toggle":case"beforetoggle":Se=J0}var It=(f&4)!==0,bn=!It&&(u==="scroll"||u==="scrollend"),be=It?ke!==null?ke+"Capture":null:ke;It=[];for(var fe=ye,Ce;fe!==null;){var Ve=fe;if(Ce=Ve.stateNode,Ve=Ve.tag,Ve!==5&&Ve!==26&&Ve!==27||Ce===null||be===null||(Ve=Xa(fe,be),Ve!=null&&It.push(Ut(fe,Ve,Ce))),bn)break;fe=fe.return}0<It.length&&(ke=new Se(ke,Rt,null,m,Pe),We.push({event:ke,listeners:It}))}}if((f&7)===0){e:{if(ke=u==="mouseover"||u==="pointerover",Se=u==="mouseout"||u==="pointerout",ke&&m!==wh&&(Rt=m.relatedTarget||m.fromElement)&&(ua(Rt)||Rt[rs]))break e;if((Se||ke)&&(ke=Pe.window===Pe?Pe:(ke=Pe.ownerDocument)?ke.defaultView||ke.parentWindow:window,Se?(Rt=m.relatedTarget||m.toElement,Se=ye,Rt=Rt?ua(Rt):null,Rt!==null&&(bn=r(Rt),It=Rt.tag,Rt!==bn||It!==5&&It!==27&&It!==6)&&(Rt=null)):(Se=null,Rt=ye),Se!==Rt)){if(It=On,Ve="onMouseLeave",be="onMouseEnter",fe="mouse",(u==="pointerout"||u==="pointerover")&&(It=_u,Ve="onPointerLeave",be="onPointerEnter",fe="pointer"),bn=Se==null?ke:Dn(Se),Ce=Rt==null?ke:Dn(Rt),ke=new It(Ve,fe+"leave",Se,m,Pe),ke.target=bn,ke.relatedTarget=Ce,Ve=null,ua(Pe)===ye&&(It=new It(be,fe+"enter",Rt,m,Pe),It.target=Ce,It.relatedTarget=bn,Ve=It),bn=Ve,Se&&Rt)t:{for(It=Se,be=Rt,fe=0,Ce=It;Ce;Ce=Qs(Ce))fe++;for(Ce=0,Ve=be;Ve;Ve=Qs(Ve))Ce++;for(;0<fe-Ce;)It=Qs(It),fe--;for(;0<Ce-fe;)be=Qs(be),Ce--;for(;fe--;){if(It===be||be!==null&&It===be.alternate)break t;It=Qs(It),be=Qs(be)}It=null}else It=null;Se!==null&&bs(We,ke,Se,It,!1),Rt!==null&&bn!==null&&bs(We,bn,Rt,It,!0)}}e:{if(ke=ye?Dn(ye):window,Se=ke.nodeName&&ke.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ke.type==="file")var ft=uk;else if(nb(ke))if(hk)ft=f4;else{ft=Eh;var _i=gk}else Se=ke.nodeName,!Se||Se.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?ye&&Ao(ye.elementType)&&(ft=uk):ft=ob;if(ft&&(ft=ft(u,ye))){Pg(We,ft,m,Pe);break e}_i&&_i(u,ke,ye),u==="focusout"&&ye&&ke.type==="number"&&ye.memoizedProps.value!=null&&Ul(ke,"number",ke.value)}switch(_i=ye?Dn(ye):window,u){case"focusin":(nb(_i)||_i.contentEditable==="true")&&(Vg=_i,Th=ye,_e=null);break;case"focusout":_e=Th=Vg=null;break;case"mousedown":Me=!0;break;case"contextmenu":case"mouseup":case"dragend":Me=!1,De(We,m,Pe);break;case"selectionchange":if(m4)break;case"keydown":case"keyup":De(We,m,Pe)}var kt;if(HC)e:{switch(u){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else xh?lk(u,m)&&(Mt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Mt="onCompositionStart");Mt&&(eb&&m.locale!=="ko"&&(xh||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&xh&&(kt=Lh()):(ma=Pe,Ro="value"in ma?ma.value:ma.textContent,xh=!0)),_i=ev(ye,Mt),0<_i.length&&(Mt=new Ks(Mt,u,null,m,Pe),We.push({event:Mt,listeners:_i}),kt?Mt.data=kt:(kt=ib(m),kt!==null&&(Mt.data=kt)))),(kt=ak?h4(u,m):ck(u,m))&&(Mt=ev(ye,"onBeforeInput"),0<Mt.length&&(_i=new Ks("onBeforeInput","beforeinput",null,m,Pe),We.push({event:_i,listeners:Mt}),_i.data=kt)),A4(We,u,ye,m,Pe)}FE(We,f)})}function Ut(u,f,m){return{instance:u,listener:f,currentTarget:m}}function ev(u,f){for(var m=f+"Capture",w=[];u!==null;){var L=u,D=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||D===null||(L=Xa(u,m),L!=null&&w.unshift(Ut(u,L,D)),L=Xa(u,f),L!=null&&w.push(Ut(u,L,D))),u.tag===3)return w;u=u.return}return[]}function Qs(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function bs(u,f,m,w,L){for(var D=f._reactName,H=[];m!==null&&m!==w;){var K=m,oe=K.alternate,ye=K.stateNode;if(K=K.tag,oe!==null&&oe===w)break;K!==5&&K!==26&&K!==27||ye===null||(oe=ye,L?(ye=Xa(m,D),ye!=null&&H.unshift(Ut(m,ye,oe))):L||(ye=Xa(m,D),ye!=null&&H.push(Ut(m,ye,oe)))),m=m.return}H.length!==0&&u.push({event:f,listeners:H})}var P4=/\r\n?/g,Gh=/\u0000|\uFFFD/g;function HE(u){return(typeof u=="string"?u:""+u).replace(P4,`
`).replace(Gh,"")}function WE(u,f){return f=HE(f),HE(u)===f}function tv(){}function _n(u,f,m,w,L,D){switch(m){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||Rs(u,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&Rs(u,""+w);break;case"className":kr(u,"class",w);break;case"tabIndex":kr(u,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(u,m,w);break;case"style":Jd(u,w,D);break;case"data":if(f!=="object"){kr(u,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||m!=="href")){u.removeAttribute(m);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){u.removeAttribute(m);break}w=mu(""+w),u.setAttribute(m,w);break;case"action":case"formAction":if(typeof w=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(m==="formAction"?(f!=="input"&&_n(u,f,"name",L.name,L,null),_n(u,f,"formEncType",L.formEncType,L,null),_n(u,f,"formMethod",L.formMethod,L,null),_n(u,f,"formTarget",L.formTarget,L,null)):(_n(u,f,"encType",L.encType,L,null),_n(u,f,"method",L.method,L,null),_n(u,f,"target",L.target,L,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){u.removeAttribute(m);break}w=mu(""+w),u.setAttribute(m,w);break;case"onClick":w!=null&&(u.onclick=tv);break;case"onScroll":w!=null&&ki("scroll",u);break;case"onScrollEnd":w!=null&&ki("scrollend",u);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(i(61));if(m=w.__html,m!=null){if(L.children!=null)throw Error(i(60));u.innerHTML=m}}break;case"multiple":u.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":u.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){u.removeAttribute("xlink:href");break}m=mu(""+w),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(m,""+w):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":w===!0?u.setAttribute(m,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(m,w):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?u.setAttribute(m,w):u.removeAttribute(m);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?u.removeAttribute(m):u.setAttribute(m,w);break;case"popover":ki("beforetoggle",u),ki("toggle",u),Gs(u,"popover",w);break;case"xlinkActuate":en(u,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":en(u,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":en(u,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":en(u,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":en(u,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":en(u,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":en(u,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":en(u,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":en(u,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Gs(u,"is",w);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Ag.get(m)||m,Gs(u,m,w))}}function Xy(u,f,m,w,L,D){switch(m){case"style":Jd(u,w,D);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(i(61));if(m=w.__html,m!=null){if(L.children!=null)throw Error(i(60));u.innerHTML=m}}break;case"children":typeof w=="string"?Rs(u,w):(typeof w=="number"||typeof w=="bigint")&&Rs(u,""+w);break;case"onScroll":w!=null&&ki("scroll",u);break;case"onScrollEnd":w!=null&&ki("scrollend",u);break;case"onClick":w!=null&&(u.onclick=tv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!me.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(L=m.endsWith("Capture"),f=m.slice(2,L?m.length-7:void 0),D=u[Is]||null,D=D!=null?D[m]:null,typeof D=="function"&&u.removeEventListener(f,D,L),typeof w=="function")){typeof D!="function"&&D!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(f,w,L);break e}m in u?u[m]=w:w===!0?u.setAttribute(m,""):Gs(u,m,w)}}}function Js(u,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ki("error",u),ki("load",u);var w=!1,L=!1,D;for(D in m)if(m.hasOwnProperty(D)){var H=m[D];if(H!=null)switch(D){case"src":w=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:_n(u,f,D,H,m,null)}}L&&_n(u,f,"srcSet",m.srcSet,m,null),w&&_n(u,f,"src",m.src,m,null);return;case"input":ki("invalid",u);var K=D=H=L=null,oe=null,ye=null;for(w in m)if(m.hasOwnProperty(w)){var Pe=m[w];if(Pe!=null)switch(w){case"name":L=Pe;break;case"type":H=Pe;break;case"checked":oe=Pe;break;case"defaultChecked":ye=Pe;break;case"value":D=Pe;break;case"defaultValue":K=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(i(137,f));break;default:_n(u,f,w,Pe,m,null)}}Xd(u,D,K,oe,ye,H,L,!1),Ka(u);return;case"select":ki("invalid",u),w=H=D=null;for(L in m)if(m.hasOwnProperty(L)&&(K=m[L],K!=null))switch(L){case"value":D=K;break;case"defaultValue":H=K;break;case"multiple":w=K;default:_n(u,f,L,K,m,null)}f=D,m=H,u.multiple=!!w,f!=null?Tc(u,!!w,f,!1):m!=null&&Tc(u,!!w,m,!0);return;case"textarea":ki("invalid",u),D=L=w=null;for(H in m)if(m.hasOwnProperty(H)&&(K=m[H],K!=null))switch(H){case"value":w=K;break;case"defaultValue":L=K;break;case"children":D=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(91));break;default:_n(u,f,H,K,m,null)}Za(u,w,L,D),Ka(u);return;case"option":for(oe in m)if(m.hasOwnProperty(oe)&&(w=m[oe],w!=null))switch(oe){case"selected":u.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:_n(u,f,oe,w,m,null)}return;case"dialog":ki("beforetoggle",u),ki("toggle",u),ki("cancel",u),ki("close",u);break;case"iframe":case"object":ki("load",u);break;case"video":case"audio":for(w=0;w<C_.length;w++)ki(C_[w],u);break;case"image":ki("error",u),ki("load",u);break;case"details":ki("toggle",u);break;case"embed":case"source":case"link":ki("error",u),ki("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in m)if(m.hasOwnProperty(ye)&&(w=m[ye],w!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:_n(u,f,ye,w,m,null)}return;default:if(Ao(f)){for(Pe in m)m.hasOwnProperty(Pe)&&(w=m[Pe],w!==void 0&&Xy(u,f,Pe,w,m,void 0));return}}for(K in m)m.hasOwnProperty(K)&&(w=m[K],w!=null&&_n(u,f,K,w,m,null))}function B4(u,f,m,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,D=null,H=null,K=null,oe=null,ye=null,Pe=null;for(Se in m){var We=m[Se];if(m.hasOwnProperty(Se)&&We!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":oe=We;default:w.hasOwnProperty(Se)||_n(u,f,Se,null,w,We)}}for(var ke in w){var Se=w[ke];if(We=m[ke],w.hasOwnProperty(ke)&&(Se!=null||We!=null))switch(ke){case"type":D=Se;break;case"name":L=Se;break;case"checked":ye=Se;break;case"defaultChecked":Pe=Se;break;case"value":H=Se;break;case"defaultValue":K=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,f));break;default:Se!==We&&_n(u,f,ke,Se,w,We)}}vh(u,H,K,oe,ye,Pe,D,L);return;case"select":Se=H=K=ke=null;for(D in m)if(oe=m[D],m.hasOwnProperty(D)&&oe!=null)switch(D){case"value":break;case"multiple":Se=oe;default:w.hasOwnProperty(D)||_n(u,f,D,null,w,oe)}for(L in w)if(D=w[L],oe=m[L],w.hasOwnProperty(L)&&(D!=null||oe!=null))switch(L){case"value":ke=D;break;case"defaultValue":K=D;break;case"multiple":H=D;default:D!==oe&&_n(u,f,L,D,w,oe)}f=K,m=H,w=Se,ke!=null?Tc(u,!!m,ke,!1):!!w!=!!m&&(f!=null?Tc(u,!!m,f,!0):Tc(u,!!m,m?[]:"",!1));return;case"textarea":Se=ke=null;for(K in m)if(L=m[K],m.hasOwnProperty(K)&&L!=null&&!w.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:_n(u,f,K,null,w,L)}for(H in w)if(L=w[H],D=m[H],w.hasOwnProperty(H)&&(L!=null||D!=null))switch(H){case"value":ke=L;break;case"defaultValue":Se=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:L!==D&&_n(u,f,H,L,w,D)}Qd(u,ke,Se);return;case"option":for(var Rt in m)if(ke=m[Rt],m.hasOwnProperty(Rt)&&ke!=null&&!w.hasOwnProperty(Rt))switch(Rt){case"selected":u.selected=!1;break;default:_n(u,f,Rt,null,w,ke)}for(oe in w)if(ke=w[oe],Se=m[oe],w.hasOwnProperty(oe)&&ke!==Se&&(ke!=null||Se!=null))switch(oe){case"selected":u.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:_n(u,f,oe,ke,w,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in m)ke=m[It],m.hasOwnProperty(It)&&ke!=null&&!w.hasOwnProperty(It)&&_n(u,f,It,null,w,ke);for(ye in w)if(ke=w[ye],Se=m[ye],w.hasOwnProperty(ye)&&ke!==Se&&(ke!=null||Se!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(i(137,f));break;default:_n(u,f,ye,ke,w,Se)}return;default:if(Ao(f)){for(var bn in m)ke=m[bn],m.hasOwnProperty(bn)&&ke!==void 0&&!w.hasOwnProperty(bn)&&Xy(u,f,bn,void 0,w,ke);for(Pe in w)ke=w[Pe],Se=m[Pe],!w.hasOwnProperty(Pe)||ke===Se||ke===void 0&&Se===void 0||Xy(u,f,Pe,ke,w,Se);return}}for(var be in m)ke=m[be],m.hasOwnProperty(be)&&ke!=null&&!w.hasOwnProperty(be)&&_n(u,f,be,null,w,ke);for(We in w)ke=w[We],Se=m[We],!w.hasOwnProperty(We)||ke===Se||ke==null&&Se==null||_n(u,f,We,ke,w,Se)}var ec=null,iv=null;function Lf(u){return u.nodeType===9?u:u.ownerDocument}function Qn(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ls(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function nv(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Qy=null;function F4(){var u=window.event;return u&&u.type==="popstate"?u===Qy?!1:(Qy=u,!0):(Qy=null,!1)}var zE=typeof setTimeout=="function"?setTimeout:void 0,V4=typeof clearTimeout=="function"?clearTimeout:void 0,UE=typeof Promise=="function"?Promise:void 0,H4=typeof queueMicrotask=="function"?queueMicrotask:typeof UE<"u"?function(u){return UE.resolve(null).then(u).catch(qE)}:zE;function qE(u){setTimeout(function(){throw u})}function ul(u){return u==="head"}function sv(u,f){var m=f,w=0,L=0;do{var D=m.nextSibling;if(u.removeChild(m),D&&D.nodeType===8)if(m=D.data,m==="/$"){if(0<w&&8>w){m=w;var H=u.ownerDocument;if(m&1&&y_(H.documentElement),m&2&&y_(H.body),m&4)for(m=H.head,y_(m),H=m.firstChild;H;){var K=H.nextSibling,oe=H.nodeName;H[ja]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&H.rel.toLowerCase()==="stylesheet"||m.removeChild(H),H=K}}if(L===0){u.removeChild(D),N_(f);return}L--}else m==="$"||m==="$?"||m==="$!"?L++:w=m.charCodeAt(0)-48;else w=0;m=D}while(m);N_(f)}function Jy(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Jy(m),xr(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function $E(u,f,m,w){for(;u.nodeType===1;){var L=m;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(w){if(!u[ja])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(D=u.getAttribute("rel"),D==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(D!==L.rel||u.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||u.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||u.getAttribute("title")!==(L.title==null?null:L.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(D=u.getAttribute("src"),(D!==(L.src==null?null:L.src)||u.getAttribute("type")!==(L.type==null?null:L.type)||u.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&D&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var D=L.name==null?null:""+L.name;if(L.type==="hidden"&&u.getAttribute("name")===D)return u}else return u;if(u=tc(u.nextSibling),u===null)break}return null}function rv(u,f,m){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=tc(u.nextSibling),u===null))return null;return u}function lo(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function fm(u,f){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")f();else{var w=function(){f(),m.removeEventListener("DOMContentLoaded",w)};m.addEventListener("DOMContentLoaded",w),u._reactRetry=w}}function tc(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var eS=null;function jE(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return u;f--}else m==="/$"&&f++}u=u.previousSibling}return null}function GE(u,f,m){switch(f=Lf(m),u){case"html":if(u=f.documentElement,!u)throw Error(i(452));return u;case"head":if(u=f.head,!u)throw Error(i(453));return u;case"body":if(u=f.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function y_(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);xr(u)}var xa=new Map,zc=new Set;function Xt(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Uc=te.d;te.d={f:hl,r:KE,D:W4,C:YE,L:ov,m:z4,X:q4,S:U4,M:$4};function hl(){var u=Uc.f(),f=Gb();return u||f}function KE(u){var f=ha(u);f!==null&&f.tag===5&&f.type==="form"?Nb(f):Uc.r(u)}var gm=typeof document>"u"?null:document;function nn(u,f,m){var w=gm;if(w&&typeof f=="string"&&f){var L=zr(f);L='link[rel="'+u+'"][href="'+L+'"]',typeof m=="string"&&(L+='[crossorigin="'+m+'"]'),zc.has(L)||(zc.add(L),u={rel:u,crossOrigin:m,href:f},w.querySelector(L)===null&&(f=w.createElement("link"),Js(f,"link",u),Gn(f),w.head.appendChild(f)))}}function W4(u){Uc.D(u),nn("dns-prefetch",u,null)}function YE(u,f){Uc.C(u,f),nn("preconnect",u,f)}function ov(u,f,m){Uc.L(u,f,m);var w=gm;if(w&&u&&f){var L='link[rel="preload"][as="'+zr(f)+'"]';f==="image"&&m&&m.imageSrcSet?(L+='[imagesrcset="'+zr(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(L+='[imagesizes="'+zr(m.imageSizes)+'"]')):L+='[href="'+zr(u)+'"]';var D=L;switch(f){case"style":D=mm(u);break;case"script":D=pm(u)}xa.has(D)||(u=h({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:u,as:f},m),xa.set(D,u),w.querySelector(L)!==null||f==="style"&&w.querySelector(S_(D))||f==="script"&&w.querySelector(L_(D))||(f=w.createElement("link"),Js(f,"link",u),Gn(f),w.head.appendChild(f)))}}function z4(u,f){Uc.m(u,f);var m=gm;if(m&&u){var w=f&&typeof f.as=="string"?f.as:"script",L='link[rel="modulepreload"][as="'+zr(w)+'"][href="'+zr(u)+'"]',D=L;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=pm(u)}if(!xa.has(D)&&(u=h({rel:"modulepreload",href:u},f),xa.set(D,u),m.querySelector(L)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(L_(D)))return}w=m.createElement("link"),Js(w,"link",u),Gn(w),m.head.appendChild(w)}}}function U4(u,f,m){Uc.S(u,f,m);var w=gm;if(w&&u){var L=da(w).hoistableStyles,D=mm(u);f=f||"default";var H=L.get(D);if(!H){var K={loading:0,preload:null};if(H=w.querySelector(S_(D)))K.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":f},m),(m=xa.get(D))&&x_(u,m);var oe=H=w.createElement("link");Gn(oe),Js(oe,"link",u),oe._p=new Promise(function(ye,Pe){oe.onload=ye,oe.onerror=Pe}),oe.addEventListener("load",function(){K.loading|=1}),oe.addEventListener("error",function(){K.loading|=2}),K.loading|=4,av(H,f,w)}H={type:"stylesheet",instance:H,count:1,state:K},L.set(D,H)}}}function q4(u,f){Uc.X(u,f);var m=gm;if(m&&u){var w=da(m).hoistableScripts,L=pm(u),D=w.get(L);D||(D=m.querySelector(L_(L)),D||(u=h({src:u,async:!0},f),(f=xa.get(L))&&tS(u,f),D=m.createElement("script"),Gn(D),Js(D,"link",u),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},w.set(L,D))}}function $4(u,f){Uc.M(u,f);var m=gm;if(m&&u){var w=da(m).hoistableScripts,L=pm(u),D=w.get(L);D||(D=m.querySelector(L_(L)),D||(u=h({src:u,async:!0,type:"module"},f),(f=xa.get(L))&&tS(u,f),D=m.createElement("script"),Gn(D),Js(D,"link",u),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},w.set(L,D))}}function ZE(u,f,m,w){var L=(L=Ke.current)?Xt(L):null;if(!L)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=mm(m.href),m=da(L).hoistableStyles,w=m.get(f),w||(w={type:"style",instance:null,count:0,state:null},m.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=mm(m.href);var D=da(L).hoistableStyles,H=D.get(u);if(H||(L=L.ownerDocument||L,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(u,H),(D=L.querySelector(S_(u)))&&!D._p&&(H.instance=D,H.state.loading=5),xa.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},xa.set(u,m),D||j4(L,u,m,H.state))),f&&w===null)throw Error(i(528,""));return H}if(f&&w!==null)throw Error(i(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=pm(m),m=da(L).hoistableScripts,w=m.get(f),w||(w={type:"script",instance:null,count:0,state:null},m.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function mm(u){return'href="'+zr(u)+'"'}function S_(u){return'link[rel="stylesheet"]['+u+"]"}function XE(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function j4(u,f,m,w){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=u.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),Js(f,"link",m),Gn(f),u.head.appendChild(f))}function pm(u){return'[src="'+zr(u)+'"]'}function L_(u){return"script[async]"+u}function QE(u,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var w=u.querySelector('style[data-href~="'+zr(m.href)+'"]');if(w)return f.instance=w,Gn(w),w;var L=h({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return w=(u.ownerDocument||u).createElement("style"),Gn(w),Js(w,"style",L),av(w,m.precedence,u),f.instance=w;case"stylesheet":L=mm(m.href);var D=u.querySelector(S_(L));if(D)return f.state.loading|=4,f.instance=D,Gn(D),D;w=XE(m),(L=xa.get(L))&&x_(w,L),D=(u.ownerDocument||u).createElement("link"),Gn(D);var H=D;return H._p=new Promise(function(K,oe){H.onload=K,H.onerror=oe}),Js(D,"link",w),f.state.loading|=4,av(D,m.precedence,u),f.instance=D;case"script":return D=pm(m.src),(L=u.querySelector(L_(D)))?(f.instance=L,Gn(L),L):(w=m,(L=xa.get(D))&&(w=h({},m),tS(w,L)),u=u.ownerDocument||u,L=u.createElement("script"),Gn(L),Js(L,"link",w),u.head.appendChild(L),f.instance=L);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,av(w,m.precedence,u));return f.instance}function av(u,f,m){for(var w=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=w.length?w[w.length-1]:null,D=L,H=0;H<w.length;H++){var K=w[H];if(K.dataset.precedence===f)D=K;else if(D!==L)break}D?D.parentNode.insertBefore(u,D.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(u,f.firstChild))}function x_(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function tS(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var _m=null;function JE(u,f,m){if(_m===null){var w=new Map,L=_m=new Map;L.set(m,w)}else L=_m,w=L.get(m),w||(w=new Map,L.set(m,w));if(w.has(u))return w;for(w.set(u,null),m=m.getElementsByTagName(u),L=0;L<m.length;L++){var D=m[L];if(!(D[ja]||D[Mn]||u==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var H=D.getAttribute(f)||"";H=u+H;var K=w.get(H);K?K.push(D):w.set(H,[D])}}return w}function eT(u,f,m){u=u.ownerDocument||u,u.head.insertBefore(m,f==="title"?u.querySelector("head > title"):null)}function G4(u,f,m){if(m===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function er(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var dr=null;function K4(){}function Y4(u,f,m){if(dr===null)throw Error(i(475));var w=dr;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var L=mm(m.href),D=u.querySelector(S_(L));if(D){u=D._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(w.count++,w=k_.bind(w),u.then(w,w)),f.state.loading|=4,f.instance=D,Gn(D);return}D=u.ownerDocument||u,m=XE(m),(L=xa.get(L))&&x_(m,L),D=D.createElement("link"),Gn(D);var H=D;H._p=new Promise(function(K,oe){H.onload=K,H.onerror=oe}),Js(D,"link",m),f.instance=D}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(w.count++,f=k_.bind(w),u.addEventListener("load",f),u.addEventListener("error",f))}}function Z4(){if(dr===null)throw Error(i(475));var u=dr;return u.stylesheets&&u.count===0&&iS(u,u.stylesheets),0<u.count?function(f){var m=setTimeout(function(){if(u.stylesheets&&iS(u,u.stylesheets),u.unsuspend){var w=u.unsuspend;u.unsuspend=null,w()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(m)}}:null}function k_(){if(this.count--,this.count===0){if(this.stylesheets)iS(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var lv=null;function iS(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,lv=new Map,f.forEach(X4,u),lv=null,k_.call(u))}function X4(u,f){if(!(f.state.loading&4)){var m=lv.get(u);if(m)var w=m.get(null);else{m=new Map,lv.set(u,m);for(var L=u.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<L.length;D++){var H=L[D];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(m.set(H.dataset.precedence,H),w=H)}w&&m.set(null,w)}L=f.instance,H=L.getAttribute("data-precedence"),D=m.get(H)||w,D===w&&m.set(null,L),m.set(H,L),this.count++,w=k_.bind(this),L.addEventListener("load",w),L.addEventListener("error",w),D?D.parentNode.insertBefore(L,D.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(L,u.firstChild)),f.state.loading|=4}}var bm={$$typeof:T,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Q4(u,f,m,w,L,D,H,K){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.hiddenUpdates=qa(null),this.identifierPrefix=w,this.onUncaughtError=L,this.onCaughtError=D,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function tT(u,f,m,w,L,D,H,K,oe,ye,Pe,We){return u=new Q4(u,f,m,H,K,oe,ye,We),f=1,D===!0&&(f|=24),D=Mo(3,null,null,f),u.current=D,D.stateNode=u,f=ZC(),f.refCount++,u.pooledCache=f,f.refCount++,D.memoizedState={element:w,isDehydrated:m,cache:f},hf(D),u}function iT(u){return u?(u=sf,u):sf}function nS(u,f,m,w,L,D){L=iT(L),w.context===null?w.context=L:w.pendingContext=L,w=Ah(f),w.payload={element:m},D=D===void 0?null:D,D!==null&&(w.callback=D),m=Cu(u,w,f),m!==null&&(La(m,u,f),Vp(m,u,f))}function sS(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<f?m:f}}function rS(u,f){sS(u,f),(u=u.alternate)&&sS(u,f)}function nT(u){if(u.tag===13){var f=nf(u,67108864);f!==null&&La(f,u,67108864),rS(u,67108864)}}var cv=!0;function J4(u,f,m,w){var L=$.T;$.T=null;var D=te.p;try{te.p=2,oS(u,f,m,w)}finally{te.p=D,$.T=L}}function vm(u,f,m,w){var L=$.T;$.T=null;var D=te.p;try{te.p=8,oS(u,f,m,w)}finally{te.p=D,$.T=L}}function oS(u,f,m,w){if(cv){var L=aS(w);if(L===null)Au(u,f,w,uv,m),rT(u,w);else if(tM(L,u,f,m,w))w.stopPropagation();else if(rT(u,w),f&4&&-1<eM.indexOf(u)){for(;L!==null;){var D=ha(L);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var H=ss(D.pendingLanes);if(H!==0){var K=D;for(K.pendingLanes|=2,K.entangledLanes|=2;H;){var oe=1<<31-jn(H);K.entanglements[1]|=oe,H&=~oe}Wc(D),(dn&6)===0&&(am=on()+500,b_(0))}}break;case 13:K=nf(D,2),K!==null&&La(K,D,2),Gb(),rS(D,2)}if(D=aS(w),D===null&&Au(u,f,w,uv,m),D===L)break;L=D}L!==null&&w.stopPropagation()}else Au(u,f,w,null,m)}}function aS(u){return u=Ch(u),lS(u)}var uv=null;function lS(u){if(uv=null,u=ua(u),u!==null){var f=r(u);if(f===null)u=null;else{var m=f.tag;if(m===13){if(u=o(f),u!==null)return u;u=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return uv=u,null}function sT(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bl()){case Fl:return 2;case Hr:return 8;case is:case Ua:return 32;case To:return 268435456;default:return 32}default:return 32}}var hv=!1,Ru=null,Kh=null,Yh=null,E_=new Map,T_=new Map,Zh=[],eM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rT(u,f){switch(u){case"focusin":case"focusout":Ru=null;break;case"dragenter":case"dragleave":Kh=null;break;case"mouseover":case"mouseout":Yh=null;break;case"pointerover":case"pointerout":E_.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":T_.delete(f.pointerId)}}function D_(u,f,m,w,L,D){return u===null||u.nativeEvent!==D?(u={blockedOn:f,domEventName:m,eventSystemFlags:w,nativeEvent:D,targetContainers:[L]},f!==null&&(f=ha(f),f!==null&&nT(f)),u):(u.eventSystemFlags|=w,f=u.targetContainers,L!==null&&f.indexOf(L)===-1&&f.push(L),u)}function tM(u,f,m,w,L){switch(f){case"focusin":return Ru=D_(Ru,u,f,m,w,L),!0;case"dragenter":return Kh=D_(Kh,u,f,m,w,L),!0;case"mouseover":return Yh=D_(Yh,u,f,m,w,L),!0;case"pointerover":var D=L.pointerId;return E_.set(D,D_(E_.get(D)||null,u,f,m,w,L)),!0;case"gotpointercapture":return D=L.pointerId,T_.set(D,D_(T_.get(D)||null,u,f,m,w,L)),!0}return!1}function oT(u){var f=ua(u.target);if(f!==null){var m=r(f);if(m!==null){if(f=m.tag,f===13){if(f=o(m),f!==null){u.blockedOn=f,_h(u.priority,function(){if(m.tag===13){var w=Gr();w=aa(w);var L=nf(m,w);L!==null&&La(L,m,w),rS(m,w)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function dv(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var m=aS(u.nativeEvent);if(m===null){m=u.nativeEvent;var w=new m.constructor(m.type,m);wh=w,m.target.dispatchEvent(w),wh=null}else return f=ha(m),f!==null&&nT(f),u.blockedOn=m,!1;f.shift()}return!0}function aT(u,f,m){dv(u)&&m.delete(f)}function iM(){hv=!1,Ru!==null&&dv(Ru)&&(Ru=null),Kh!==null&&dv(Kh)&&(Kh=null),Yh!==null&&dv(Yh)&&(Yh=null),E_.forEach(aT),T_.forEach(aT)}function fv(u,f){u.blockedOn===f&&(u.blockedOn=null,hv||(hv=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,iM)))}var gv=null;function lT(u){gv!==u&&(gv=u,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){gv===u&&(gv=null);for(var f=0;f<u.length;f+=3){var m=u[f],w=u[f+1],L=u[f+2];if(typeof w!="function"){if(lS(w||m)===null)continue;break}var D=ha(m);D!==null&&(u.splice(f,3),f-=3,Zp(D,{pending:!0,data:L,method:m.method,action:w},w,L))}}))}function N_(u){function f(oe){return fv(oe,u)}Ru!==null&&fv(Ru,u),Kh!==null&&fv(Kh,u),Yh!==null&&fv(Yh,u),E_.forEach(f),T_.forEach(f);for(var m=0;m<Zh.length;m++){var w=Zh[m];w.blockedOn===u&&(w.blockedOn=null)}for(;0<Zh.length&&(m=Zh[0],m.blockedOn===null);)oT(m),m.blockedOn===null&&Zh.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(w=0;w<m.length;w+=3){var L=m[w],D=m[w+1],H=L[Is]||null;if(typeof D=="function")H||lT(m);else if(H){var K=null;if(D&&D.hasAttribute("formAction")){if(L=D,H=D[Is]||null)K=H.formAction;else if(lS(L)!==null)continue}else K=H.action;typeof K=="function"?m[w+1]=K:(m.splice(w,3),w-=3),lT(m)}}}function cS(u){this._internalRoot=u}mv.prototype.render=cS.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(i(409));var m=f.current,w=Gr();nS(m,w,u,f,null,null)},mv.prototype.unmount=cS.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;nS(u.current,2,null,u,null,null),Gb(),f[rs]=null}};function mv(u){this._internalRoot=u}mv.prototype.unstable_scheduleHydration=function(u){if(u){var f=No();u={blockedOn:null,target:u,priority:f};for(var m=0;m<Zh.length&&f!==0&&f<Zh[m].priority;m++);Zh.splice(m,0,u),m===0&&oT(u)}};var cT=e.version;if(cT!=="19.1.1")throw Error(i(527,cT,"19.1.1"));te.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var nM={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pv.isDisabled&&pv.supportsFiber)try{Wr=pv.inject(nM),pn=pv}catch{}}return hS.createRoot=function(u,f){if(!n(u))throw Error(i(299));var m=!1,w="",L=yy,D=Rb,H=Kk,K=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(L=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(H=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(K=f.unstable_transitionCallbacks)),f=tT(u,1,!1,null,null,m,w,L,D,H,K,null),u[rs]=f.current,Zy(u),new cS(f)},hS.hydrateRoot=function(u,f,m){if(!n(u))throw Error(i(299));var w=!1,L="",D=yy,H=Rb,K=Kk,oe=null,ye=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(L=m.identifierPrefix),m.onUncaughtError!==void 0&&(D=m.onUncaughtError),m.onCaughtError!==void 0&&(H=m.onCaughtError),m.onRecoverableError!==void 0&&(K=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(oe=m.unstable_transitionCallbacks),m.formState!==void 0&&(ye=m.formState)),f=tT(u,1,!0,f,m??null,w,L,D,H,K,oe,ye),f.context=iT(null),m=f.current,w=Gr(),w=aa(w),L=Ah(w),L.callback=null,Cu(m,L,w),m=w,f.current.lanes=m,Bi(f,m),Wc(f),u[rs]=f.current,Zy(u),new mv(f)},hS.version="19.1.1",hS}var uV;function See(){if(uV)return cM.exports;uV=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),cM.exports=yee(),cM.exports}var Lee=See();function xee(s){if(s.length===0)throw new Error("Invalid tail call");return[s.slice(0,s.length-1),s[s.length-1]]}function vs(s,e,t=(i,n)=>i===n){if(s===e)return!0;if(!s||!e||s.length!==e.length)return!1;for(let i=0,n=s.length;i<n;i++)if(!t(s[i],e[i]))return!1;return!0}function kee(s,e){const t=s.length-1;e<t&&(s[e]=s[t]),s.pop()}function Eee(s,e,t){return Lj(s.length,i=>t(s[i],e))}function Lj(s,e){let t=0,i=s-1;for(;t<=i;){const n=(t+i)/2|0,r=e(n);if(r<0)t=n+1;else if(r>0)i=n-1;else return n}return-(t+1)}function*F6(s,e){let t,i;for(const n of s)i!==void 0&&e(i,n)?t.push(n):(t&&(yield t),t=[n]),i=n;t&&(yield t)}function xj(s,e){for(let t=0;t<=s.length;t++)e(t===0?void 0:s[t-1],t===s.length?void 0:s[t])}function Tee(s,e){for(let t=0;t<s.length;t++)e(t===0?void 0:s[t-1],s[t],t+1===s.length?void 0:s[t+1])}function V6(s){return s.filter(e=>!!e)}function hV(s){let e=0;for(let t=0;t<s.length;t++)s[t]&&(s[e]=s[t],e+=1);s.length=e}function Dee(s){return!Array.isArray(s)||s.length===0}function UA(s){return Array.isArray(s)&&s.length>0}function a0(s,e=t=>t){const t=new Set;return s.filter(i=>{const n=e(i);return t.has(n)?!1:(t.add(n),!0)})}function Ko(s,e){let t=typeof e=="number"?s:0;typeof e=="number"?t=s:(t=0,e=s);const i=[];if(t<=e)for(let n=t;n<e;n++)i.push(n);else for(let n=t;n>e;n--)i.push(n);return i}function qA(s,e,t){const i=s.slice(0,e),n=s.slice(e);return i.concat(t,n)}function fM(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.unshift(e))}function uT(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.push(e))}function iO(s,e){for(const t of e)s.push(t)}function Nee(s,e,t){const i=kj(s,e),n=s.length,r=t.length;s.length=n+r;for(let o=n-1;o>=i;o--)s[o+r]=s[o];for(let o=0;o<r;o++)s[o+i]=t[o]}function eN(s,e,t,i){const n=kj(s,e);let r=s.splice(n,t);return r===void 0&&(r=[]),Nee(s,n,i),r}function kj(s,e){return e<0?Math.max(e+s.length,0):Math.min(e,s.length)}var ox;(function(s){function e(r){return r<0}s.isLessThan=e;function t(r){return r<=0}s.isLessThanOrEqual=t;function i(r){return r>0}s.isGreaterThan=i;function n(r){return r===0}s.isNeitherLessOrGreaterThan=n,s.greaterThan=1,s.lessThan=-1,s.neitherLessOrGreaterThan=0})(ox||(ox={}));function Dl(s,e){return(t,i)=>e(s(t),s(i))}function Iee(...s){return(e,t)=>{for(const i of s){const n=i(e,t);if(!ox.isNeitherLessOrGreaterThan(n))return n}return ox.neitherLessOrGreaterThan}}const ug=(s,e)=>s-e,Aee=(s,e)=>ug(s?1:0,e?1:0);function Ree(s){return(e,t)=>-s(e,t)}class _g{constructor(e){this.firstIdx=0,this.items=e,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const aw=class aw{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new aw(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new aw(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(n=>((i||ox.isGreaterThan(e(n,t)))&&(i=!1,t=n),!0)),t}};aw.empty=new aw(e=>{});let M1=aw;class Mee{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Xw.isErrorNoTelemetry(e)?new Xw(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const H6=new Mee;function tN(s){H6.onUnexpectedError(s)}function mi(s){v2(s)||H6.onUnexpectedError(s)}function W6(s){v2(s)||H6.onUnexpectedExternalError(s)}function nO(s){if(s instanceof Error){const{name:e,message:t,cause:i}=s,n=s.stacktrace||s.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:Xw.isErrorNoTelemetry(s),cause:i?nO(i):void 0,code:s.code}}return s}const iN="Canceled";function v2(s){return s instanceof CC?!0:s instanceof Error&&s.name===iN&&s.message===iN}class CC extends Error{constructor(){super(iN),this.name=this.message}}function Oee(){const s=new Error(iN);return s.name=s.message,s}function $A(s){return s?new Error(`Illegal argument: ${s}`):new Error("Illegal argument")}function nN(s){return s?new Error(`Illegal state: ${s}`):new Error("Illegal state")}class Pee extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class Xw extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof Xw)return e;const t=new Xw;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class at extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,at.prototype)}}function gM(s,e){if(!s)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function z6(s,e="Unreachable"){throw new Error(e)}function sN(s,e="unexpected state"){if(!s)throw typeof e=="string"?new at(`Assertion Failed: ${e}`):e}function dV(s,e="Soft Assertion Failed"){s||mi(new at(e))}function l0(s){if(!s()){debugger;s(),mi(new at("Assertion Failed"))}}function U6(s,e){let t=0;for(;t<s.length-1;){const i=s[t],n=s[t+1];if(!e(i,n))return!1;t++}return!0}function rr(s){return typeof s=="string"}function Xo(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&!(s instanceof RegExp)&&!(s instanceof Date)}function Bee(s){const e=Object.getPrototypeOf(Uint8Array);return typeof s=="object"&&s instanceof e}function D0(s){return typeof s=="number"&&!isNaN(s)}function sO(s){return!!s&&typeof s[Symbol.iterator]=="function"}function Ej(s){return s===!0||s===!1}function mc(s){return typeof s>"u"}function dc(s){return!fc(s)}function fc(s){return mc(s)||s===null}function Km(s,e){if(!s)throw new Error("Unexpected type")}function Tj(s){return sN(s!=null,"Argument is `undefined` or `null`."),s}function Qw(s){return typeof s=="function"}function Fee(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++)Vee(s[i],e[i])}function Vee(s,e){if(rr(e)){if(typeof s!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Qw(e)){try{if(s instanceof e)return}catch{}if(!fc(s)&&s.constructor===e||e.length===1&&e.call(void 0,s)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Gf(s){if(!s||typeof s!="object"||s instanceof RegExp)return s;const e=Array.isArray(s)?[]:{};return Object.entries(s).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?Gf(i):i}),e}function Hee(s){if(!s||typeof s!="object")return s;const e=[s];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(Dj.call(t,i)){const n=t[i];typeof n=="object"&&!Object.isFrozen(n)&&!Bee(n)&&e.push(n)}}return s}const Dj=Object.prototype.hasOwnProperty;function Nj(s,e){return rO(s,e,new Set)}function rO(s,e,t){if(fc(s))return s;const i=e(s);if(typeof i<"u")return i;if(Array.isArray(s)){const n=[];for(const r of s)n.push(rO(r,e,t));return n}if(Xo(s)){if(t.has(s))throw new Error("Cannot clone recursive data-structure");t.add(s);const n={};for(const r in s)Dj.call(s,r)&&(n[r]=rO(s[r],e,t));return t.delete(s),n}return s}function Oa(s,e){if(s===e)return!0;if(s==null||e===null||e===void 0||typeof s!=typeof e||typeof s!="object"||Array.isArray(s)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(s)){if(s.length!==e.length)return!1;for(t=0;t<s.length;t++)if(!Oa(s[t],e[t]))return!1}else{const n=[];for(i in s)n.push(i);n.sort();const r=[];for(i in e)r.push(i);if(r.sort(),!Oa(n,r))return!1;for(t=0;t<n.length;t++)if(!Oa(s[n[t]],e[n[t]]))return!1}return!0}function Ij(){return globalThis._VSCODE_NLS_MESSAGES}function q6(){return globalThis._VSCODE_NLS_LANGUAGE}const Wee=q6()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function fV(s,e){let t;return e.length===0?t=s:t=s.replace(/\{(\d+)\}/g,(i,n)=>{const r=n[0],o=e[r];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),Wee&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function y(s,e,...t){return fV(typeof s=="number"?zee(s,e):e,t)}function zee(s,e){const t=Ij()?.[s];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${s} !!!`)}return t}const C1="en";let ax=!1,lx=!1,sL=!1,Aj=!1,$6=!1,j6=!1,Rj=!1,hT,mM=C1,gV=C1,Uee,Mf;const hg=globalThis;let pl;typeof hg.vscode<"u"&&typeof hg.vscode.process<"u"?pl=hg.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(pl=process);const qee=typeof pl?.versions?.electron=="string",$ee=qee&&pl?.type==="renderer";if(typeof pl=="object"){ax=pl.platform==="win32",lx=pl.platform==="darwin",sL=pl.platform==="linux",sL&&pl.env.SNAP&&pl.env.SNAP_REVISION,pl.env.CI||pl.env.BUILD_ARTIFACTSTAGINGDIRECTORY||pl.env.GITHUB_WORKSPACE,hT=C1,mM=C1;const s=pl.env.VSCODE_NLS_CONFIG;if(s)try{const e=JSON.parse(s);hT=e.userLocale,gV=e.osLocale,mM=e.resolvedLanguage||C1,Uee=e.languagePack?.translationsConfigFile}catch{}Aj=!0}else typeof navigator=="object"&&!$ee?(Mf=navigator.userAgent,ax=Mf.indexOf("Windows")>=0,lx=Mf.indexOf("Macintosh")>=0,j6=(Mf.indexOf("Macintosh")>=0||Mf.indexOf("iPad")>=0||Mf.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,sL=Mf.indexOf("Linux")>=0,Rj=Mf?.indexOf("Mobi")>=0,$6=!0,mM=q6()||C1,hT=navigator.language.toLowerCase(),gV=hT):console.error("Unable to resolve platform.");let wD=0;lx?wD=1:ax?wD=3:sL&&(wD=2);const ia=ax,Bt=lx,Fa=sL,cx=Aj,yg=$6,jee=$6&&typeof hg.importScripts=="function",Gee=jee?hg.origin:void 0,Nd=j6,Mj=Rj,pM=wD,Id=Mf,Kee=typeof hg.postMessage=="function"&&!hg.importScripts,jA=(()=>{if(Kee){const s=[];hg.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=s.length;i<n;i++){const r=s[i];if(r.id===t.data.vscodeScheduleAsyncWork){s.splice(i,1),r.callback();return}}});let e=0;return t=>{const i=++e;s.push({id:i,callback:t}),hg.postMessage({vscodeScheduleAsyncWork:i},"*")}}return s=>setTimeout(s)})(),tu=lx||j6?2:ax?1:3;let mV=!0,pV=!1;function Yee(){if(!pV){pV=!0;const s=new Uint8Array(2);s[0]=1,s[1]=2,mV=new Uint16Array(s.buffer)[0]===513}return mV}const G6=!!(Id&&Id.indexOf("Chrome")>=0),Zee=!!(Id&&Id.indexOf("Firefox")>=0),Xee=!!(!G6&&Id&&Id.indexOf("Safari")>=0),Oj=!!(Id&&Id.indexOf("Edg/")>=0),Qee=!!(Id&&Id.indexOf("Android")>=0),Ar={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var si;(function(s){function e(O){return!!O&&typeof O=="object"&&typeof O[Symbol.iterator]=="function"}s.is=e;const t=Object.freeze([]);function i(){return t}s.empty=i;function*n(O){yield O}s.single=n;function r(O){return e(O)?O:n(O)}s.wrap=r;function o(O){return O||t}s.from=o;function*a(O){for(let V=O.length-1;V>=0;V--)yield O[V]}s.reverse=a;function l(O){return!O||O[Symbol.iterator]().next().done===!0}s.isEmpty=l;function c(O){return O[Symbol.iterator]().next().value}s.first=c;function h(O,V){let U=0;for(const Y of O)if(V(Y,U++))return!0;return!1}s.some=h;function d(O,V){let U=0;for(const Y of O)if(!V(Y,U++))return!1;return!0}s.every=d;function g(O,V){for(const U of O)if(V(U))return U}s.find=g;function*_(O,V){for(const U of O)V(U)&&(yield U)}s.filter=_;function*b(O,V){let U=0;for(const Y of O)yield V(Y,U++)}s.map=b;function*C(O,V){let U=0;for(const Y of O)yield*V(Y,U++)}s.flatMap=C;function*S(...O){for(const V of O)sO(V)?yield*V:yield V}s.concat=S;function E(O,V,U){let Y=U;for(const B of O)Y=V(Y,B);return Y}s.reduce=E;function x(O){let V=0;for(const U of O)V++;return V}s.length=x;function*T(O,V,U=O.length){for(V<-O.length&&(V=0),V<0&&(V+=O.length),U<0?U+=O.length:U>O.length&&(U=O.length);V<U;V++)yield O[V]}s.slice=T;function N(O,V=Number.POSITIVE_INFINITY){const U=[];if(V===0)return[U,O];const Y=O[Symbol.iterator]();for(let B=0;B<V;B++){const F=Y.next();if(F.done)return[U,s.empty()];U.push(F.value)}return[U,{[Symbol.iterator](){return Y}}]}s.consume=N;async function A(O){const V=[];for await(const U of O)V.push(U);return V}s.asyncToArray=A;async function P(O){let V=[];for await(const U of O)V=V.concat(U);return V}s.asyncToArrayFlat=P})(si||(si={}));var lg;let Ss=(lg=class{constructor(e){this.element=e,this.next=lg.Undefined,this.prev=lg.Undefined}},lg.Undefined=new lg(void 0),lg),ea=class{constructor(){this._first=Ss.Undefined,this._last=Ss.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ss.Undefined}clear(){let e=this._first;for(;e!==Ss.Undefined;){const t=e.next;e.prev=Ss.Undefined,e.next=Ss.Undefined,e=t}this._first=Ss.Undefined,this._last=Ss.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Ss(e);if(this._first===Ss.Undefined)this._first=i,this._last=i;else if(t){const r=this._last;this._last=i,i.prev=r,r.next=i}else{const r=this._first;this._first=i,i.next=r,r.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==Ss.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ss.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ss.Undefined&&e.next!==Ss.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ss.Undefined&&e.next===Ss.Undefined?(this._first=Ss.Undefined,this._last=Ss.Undefined):e.next===Ss.Undefined?(this._last=this._last.prev,this._last.next=Ss.Undefined):e.prev===Ss.Undefined&&(this._first=this._first.next,this._first.prev=Ss.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ss.Undefined;)yield e.element,e=e.next}};const Pj="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function Jee(s=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Pj)s.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const K6=Jee();function Y6(s){let e=K6;if(s&&s instanceof RegExp)if(s.global)e=s;else{let t="g";s.ignoreCase&&(t+="i"),s.multiline&&(t+="m"),s.unicode&&(t+="u"),e=new RegExp(s.source,t)}return e.lastIndex=0,e}const Bj=new ea;Bj.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function ux(s,e,t,i,n){if(e=Y6(e),n||(n=si.first(Bj)),t.length>n.maxLen){let c=s-n.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,s+n.maxLen/2),ux(s,e,t,i,n)}const r=Date.now(),o=s-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-r>=n.timeBudget);c++){const h=o-n.windowSize*c;e.lastIndex=Math.max(0,h);const d=ete(e,t,o,a);if(!d&&l||(l=d,h<=0))break;a=h}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function ete(s,e,t,i){let n;for(;n=s.exec(e);){const r=n.index||0;if(r<=t&&s.lastIndex>=t)return n;if(i>0&&r>i)return null}return null}const td=8;class Fj{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Vj{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class rn{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return GA(e,t)}compute(e,t,i){return i}}class rL{constructor(e,t){this.newValue=e,this.didChange=t}}function GA(s,e){if(typeof s!="object"||typeof e!="object"||!s||!e)return new rL(e,s!==e);if(Array.isArray(s)||Array.isArray(e)){const i=Array.isArray(s)&&Array.isArray(e)&&vs(s,e);return new rL(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const n=GA(s[i],e[i]);n.didChange&&(s[i]=n.newValue,t=!0)}return new rL(s,t)}class mp{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return GA(e,t)}validate(e){return this.defaultValue}}class yC{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return GA(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function $e(s,e){return typeof s>"u"?e:s==="false"?!1:!!s}class vt extends yC{constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return $e(e,this.defaultValue)}}function H_(s,e,t,i){if(typeof s>"u")return e;let n=parseInt(s,10);return isNaN(n)?e:(n=Math.max(t,n),n=Math.min(i,n),n|0)}class hi extends yC{static clampedInt(e,t,i,n){return H_(e,t,i,n)}constructor(e,t,i,n,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=n,o.maximum=r),super(e,t,i,o),this.minimum=n,this.maximum=r}validate(e){return hi.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function tte(s,e,t,i){if(typeof s>"u")return e;const n=xl.float(s,e);return xl.clamp(n,t,i)}class xl extends yC{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,n,r,o,a){typeof r<"u"&&(r.type="number",r.default=i,r.minimum=o,r.maximum=a),super(e,t,i,r),this.validationFn=n,this.minimum=o,this.maximum=a}validate(e){return this.validationFn(xl.float(e,this.defaultValue))}}class Jr extends yC{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return Jr.string(e,this.defaultValue)}}function Gi(s,e,t,i){return typeof s!="string"?e:i&&s in i?i[s]:t.indexOf(s)===-1?e:s}class sn extends yC{constructor(e,t,i,n,r=void 0){typeof r<"u"&&(r.type="string",r.enum=n,r.default=i),super(e,t,i,r),this._allowedValues=n}validate(e){return Gi(e,this.defaultValue,this._allowedValues)}}class dS extends rn{constructor(e,t,i,n,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=n),super(e,t,i,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function ite(s){switch(s){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class nte extends rn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[y(198,"Use platform APIs to detect when a Screen Reader is attached."),y(199,"Optimize for usage with a Screen Reader."),y(200,"Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:y(201,"Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class ste extends rn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(29,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:y(202,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:y(203,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:$e(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:$e(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function rte(s){switch(s){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Vs;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(Vs||(Vs={}));function _V(s){switch(s){case"line":return Vs.Line;case"block":return Vs.Block;case"underline":return Vs.Underline;case"line-thin":return Vs.LineThin;case"block-outline":return Vs.BlockOutline;case"underline-thin":return Vs.UnderlineThin}}class ote extends mp{constructor(){super(162)}compute(e,t,i){const n=["monaco-editor"];return t.get(48)&&n.push(t.get(48)),e.extraEditorClassName&&n.push(e.extraEditorClassName),t.get(82)==="default"?n.push("mouse-default"):t.get(82)==="copy"&&n.push("mouse-copy"),t.get(127)&&n.push("showUnused"),t.get(157)&&n.push("showDeprecated"),n.join(" ")}}class ate extends vt{constructor(){super(45,"emptySelectionClipboard",!0,{description:y(204,"Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class lte extends rn{constructor(){const e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(50,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:y(205,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[y(206,"Never seed search string from the editor selection."),y(207,"Always seed search string from the editor selection, including word at cursor position."),y(208,"Only seed search string from the editor selection.")],description:y(209,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[y(210,"Never turn on Find in Selection automatically (default)."),y(211,"Always turn on Find in Selection automatically."),y(212,"Turn on Find in Selection automatically when multiple lines of content are selected.")],description:y(213,"Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:y(214,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Bt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:y(215,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:y(216,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[y(217,"Do not store search history from the find widget."),y(218,"Store search history across the active workspace")],description:y(219,"Controls how the find widget history should be stored")},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[y(220,"Do not store history from the replace widget."),y(221,"Store replace history across the active workspace")],description:y(222,"Controls how the replace widget history should be stored")},"editor.find.findOnType":{type:"boolean",default:e.findOnType,description:y(223,"Controls whether the Find Widget should search as you type.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:$e(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:$e(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Gi(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Gi(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:$e(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:$e(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:$e(t.loop,this.defaultValue.loop),history:Gi(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:Gi(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}}const zf=class zf extends rn{constructor(){super(60,"fontLigatures",zf.OFF,{anyOf:[{type:"boolean",description:y(224,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:y(225,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:y(226,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?zf.OFF:e==="true"?zf.ON:e:e?zf.ON:zf.OFF}};zf.OFF='"liga" off, "calt" off',zf.ON='"liga" on, "calt" on';let rp=zf;const Uf=class Uf extends rn{constructor(){super(63,"fontVariations",Uf.OFF,{anyOf:[{type:"boolean",description:y(227,"Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:y(228,"Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:y(229,"Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Uf.OFF:e==="true"?Uf.TRANSLATE:e:e?Uf.TRANSLATE:Uf.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};Uf.OFF="normal",Uf.TRANSLATE="translate";let hx=Uf;class cte extends mp{constructor(){super(59)}compute(e,t,i){return e.fontInfo}}class ute extends mp{constructor(){super(161)}compute(e,t,i){return e.inputMode==="overtype"?t.get(92):t.get(34)}}class hte extends mp{constructor(){super(170)}compute(e,t){return e.editContextSupported&&t.get(44)}}class dte extends mp{constructor(){super(172)}compute(e,t){return e.accessibilitySupport===2?t.get(7):t.get(6)}}class fte extends yC{constructor(){super(61,"fontSize",Nl.fontSize,{type:"number",minimum:6,maximum:100,default:Nl.fontSize,description:y(230,"Controls the font size in pixels.")})}validate(e){const t=xl.float(e,this.defaultValue);return t===0?Nl.fontSize:xl.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const od=class od extends rn{constructor(){super(62,"fontWeight",Nl.fontWeight,{anyOf:[{type:"number",minimum:od.MINIMUM_VALUE,maximum:od.MAXIMUM_VALUE,errorMessage:y(231,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:od.SUGGESTION_VALUES}],default:Nl.fontWeight,description:y(232,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(hi.clampedInt(e,Nl.fontWeight,od.MINIMUM_VALUE,od.MAXIMUM_VALUE))}};od.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],od.MINIMUM_VALUE=1,od.MAXIMUM_VALUE=1e3;let oO=od;class gte extends rn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[y(233,"Show Peek view of the results (default)"),y(234,"Go to the primary result and show a Peek view"),y(235,"Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(67,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:y(236,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:y(237,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:y(238,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:y(239,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:y(240,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:y(241,"Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:y(242,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:y(243,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:y(244,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:y(245,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:y(246,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Gi(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Gi(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Gi(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Gi(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Gi(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Gi(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Gi(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Jr.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Jr.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Jr.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Jr.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Jr.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:Jr.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class mte extends rn{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(69,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:y(247,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:y(248,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:y(249,"Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,markdownDescription:y(250,"Controls the delay in milliseconds after which the hover is hidden. Requires `#editor.hover.sticky#` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:y(251,"Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),delay:hi.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:$e(t.sticky,this.defaultValue.sticky),hidingDelay:hi.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:$e(t.above,this.defaultValue.above)}}}class yw extends mp{constructor(){super(165)}compute(e,t,i){return yw.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));const r=(i+e.viewLineCount+n)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,d=e.minimap.renderCharacters;let g=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const _=e.minimap.maxColumn,b=e.minimap.size,C=e.minimap.side,S=e.verticalScrollbarWidth,E=e.viewLineCount,x=e.remainingWidth,T=e.isViewportWrapping,N=d?2:3;let A=Math.floor(r*n);const P=A/r;let O=!1,V=!1,U=N*g,Y=g/r,B=1;if(b==="fill"||b==="fit"){const{typicalViewportLineCount:ce,extraLinesBeforeFirstLine:he,extraLinesBeyondLastLine:j,desiredRatio:ae,minimapLineCount:Te}=yw.computeContainedMinimapLineCount({viewLineCount:E,scrollBeyondLastLine:h,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:n,lineHeight:l,pixelRatio:r});if(E/Te>1)O=!0,V=!0,g=1,U=1,Y=g/r;else{let Oe=!1,Ne=g+1;if(b==="fit"){const Ke=Math.ceil((he+E+j)*U);T&&a&&x<=t.stableFitRemainingWidth?(Oe=!0,Ne=t.stableFitMaxMinimapScale):Oe=Ke>A}if(b==="fill"||Oe){O=!0;const Ke=g;U=Math.min(l*r,Math.max(1,Math.floor(1/ae))),T&&a&&x<=t.stableFitRemainingWidth&&(Ne=t.stableFitMaxMinimapScale),g=Math.min(Ne,Math.max(1,Math.floor(U/N))),g>Ke&&(B=Math.min(2,g/Ke)),Y=g/r/B,A=Math.ceil(Math.max(ce,he+E+j)*U),T?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=x,t.stableFitMaxMinimapScale=g):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const F=Math.floor(_*Y),W=Math.min(F,Math.max(0,Math.floor((x-S-2)*Y/(c+Y)))+td);let ee=Math.floor(r*W);const X=ee/r;ee=Math.floor(ee*B);const $=d?1:2,te=C==="left"?0:i-W-S;return{renderMinimap:$,minimapLeft:te,minimapWidth:W,minimapHeightIsEditorHeight:O,minimapIsSampling:V,minimapScale:g,minimapLineHeight:U,minimapCanvasInnerWidth:ee,minimapCanvasInnerHeight:A,minimapCanvasOuterWidth:X,minimapCanvasOuterHeight:P}}static computeLayout(e,t){const i=t.outerWidth|0,n=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,h=t.viewLineCount,d=e.get(154),g=d==="inherit"?e.get(153):d,_=g==="inherit"?e.get(149):g,b=e.get(152),C=t.isDominatedByLongLines,S=e.get(66),E=e.get(76).renderType!==0,x=e.get(77),T=e.get(119),N=e.get(96),A=e.get(81),P=e.get(117),O=P.verticalScrollbarSize,V=P.verticalHasArrows,U=P.arrowSize,Y=P.horizontalScrollbarSize,B=e.get(52),F=e.get(126)!=="never";let W=e.get(74);B&&F&&(W+=16);let ee=0;if(E){const Xe=Math.max(o,x);ee=Math.round(Xe*l)}let X=0;S&&(X=r*t.glyphMarginDecorationLaneCount);let $=0,te=$+X,ce=te+ee,he=ce+W;const j=i-X-ee-W;let ae=!1,Te=!1,Le=-1;e.get(2)===2&&g==="inherit"&&C?(ae=!0,Te=!0):_==="on"||_==="bounded"?Te=!0:_==="wordWrapColumn"&&(Le=b);const Oe=yw._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:T,paddingTop:N.top,paddingBottom:N.bottom,minimap:A,verticalScrollbarWidth:O,viewLineCount:h,remainingWidth:j,isViewportWrapping:Te},t.memory||new Vj);Oe.renderMinimap!==0&&Oe.minimapLeft===0&&($+=Oe.minimapWidth,te+=Oe.minimapWidth,ce+=Oe.minimapWidth,he+=Oe.minimapWidth);const Ne=j-Oe.minimapWidth,Ke=Math.max(1,Math.floor((Ne-O-2)/a)),Dt=V?U:0;return Te&&(Le=Math.max(1,Ke),_==="bounded"&&(Le=Math.min(Le,b))),{width:i,height:n,glyphMarginLeft:$,glyphMarginWidth:X,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:te,lineNumbersWidth:ee,decorationsLeft:ce,decorationsWidth:W,contentLeft:he,contentWidth:Ne,minimap:Oe,viewportColumn:Ke,isWordWrapMinified:ae,isViewportWrapping:Te,wrappingColumn:Le,verticalScrollbarWidth:O,horizontalScrollbarHeight:Y,overviewRuler:{top:Dt,width:O,height:n-2*Dt,right:0}}}}class pte extends rn{constructor(){super(156,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[y(252,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),y(253,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:y(254,"Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return Gi(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var Bf;(function(s){s.Off="off",s.OnCode="onCode",s.On="on"})(Bf||(Bf={}));class _te extends rn{constructor(){const e={enabled:Bf.OnCode};super(73,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[Bf.Off,Bf.OnCode,Bf.On],default:e.enabled,enumDescriptions:[y(255,"Disable the code action menu."),y(256,"Show the code action menu when the cursor is on lines with code."),y(257,"Show the code action menu when the cursor is on lines with code or on empty lines.")],description:y(258,"Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Gi(e.enabled,this.defaultValue.enabled,[Bf.Off,Bf.OnCode,Bf.On])}}}class bte extends rn{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(131,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:y(259,"Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:y(260,"Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:y(261,"Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:y(262,"Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),maxLineCount:hi.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Gi(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:$e(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class vte extends rn{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(159,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:y(263,"Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[y(264,"Inlay hints are enabled"),y(265,"Inlay hints are showing by default and hide when holding {0}",Bt?"Ctrl+Option":"Ctrl+Alt"),y(266,"Inlay hints are hidden by default and show when holding {0}",Bt?"Ctrl+Option":"Ctrl+Alt"),y(267,"Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:y(268,"Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:y(269,"Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:y(270,"Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:y(271,"Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Gi(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:hi.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Jr.string(t.fontFamily,this.defaultValue.fontFamily),padding:$e(t.padding,this.defaultValue.padding),maximumLength:hi.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}}class wte extends rn{constructor(){super(74,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):hi.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?hi.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class Cte extends xl{constructor(){super(75,"lineHeight",Nl.lineHeight,e=>xl.clamp(e,0,150),{markdownDescription:y(272,`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)},0,150)}compute(e,t,i){return e.fontInfo.lineHeight}}class yte extends rn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:"none",renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(81,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:y(273,"Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"string",enum:["none","mouseover","scroll"],enumDescriptions:[y(274,"The minimap is always shown."),y(275,"The minimap is hidden when mouse is not over the minimap and shown when mouse is over the minimap."),y(276,"The minimap is only shown when the editor is scrolled")],default:e.autohide,description:y(277,"Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[y(278,"The minimap has the same size as the editor contents (and might scroll)."),y(279,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),y(280,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:y(281,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:y(282,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:y(283,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:y(284,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:y(285,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:y(286,"Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:y(287,"Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:y(288,"Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:y(289,"Defines the regular expression used to find section headers in comments. The regex must contain a named match group `label` (written as `(?<label>.+)`) that encapsulates the section header, otherwise it will not work. Optionally you can include another match group named `separator`. Use \\n in the pattern to match multi-line headers.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:y(290,"Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:y(291,"Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let i=this.defaultValue.markSectionHeaderRegex;const n=e.markSectionHeaderRegex;if(typeof n=="string")try{new RegExp(n,"d"),i=n}catch{}return{enabled:$e(t.enabled,this.defaultValue.enabled),autohide:Gi(t.autohide,this.defaultValue.autohide,["none","mouseover","scroll"]),size:Gi(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Gi(t.side,this.defaultValue.side,["right","left"]),showSlider:Gi(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:$e(t.renderCharacters,this.defaultValue.renderCharacters),scale:hi.clampedInt(t.scale,1,1,3),maxColumn:hi.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:$e(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:$e(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:i,sectionHeaderFontSize:xl.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:xl.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function Ste(s){return s==="ctrlCmd"?Bt?"metaKey":"ctrlKey":"altKey"}class Lte extends rn{constructor(){super(96,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:y(292,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:y(293,"Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:hi.clampedInt(t.top,0,0,1e3),bottom:hi.clampedInt(t.bottom,0,0,1e3)}}}class xte extends rn{constructor(){const e={enabled:!0,cycle:!0};super(98,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:y(294,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:y(295,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),cycle:$e(t.cycle,this.defaultValue.cycle)}}}class kte extends mp{constructor(){super(163)}compute(e,t,i){return e.pixelRatio}}class Ete extends rn{constructor(){super(100,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class Tte extends rn{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[y(296,"Quick suggestions show inside the suggest widget"),y(297,"Quick suggestions show as ghost text"),y(298,"Quick suggestions are disabled")]}];super(102,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:y(299,"Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:y(300,"Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:y(301,"Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:y(302,"Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:n}=e,r=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=Gi(t,this.defaultValue.other,r),typeof i=="boolean"?a=i?"on":"off":a=Gi(i,this.defaultValue.comments,r),typeof n=="boolean"?l=n?"on":"off":l=Gi(n,this.defaultValue.strings,r),{other:o,comments:a,strings:l}}}class Dte extends rn{constructor(){super(76,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[y(303,"Line numbers are not rendered."),y(304,"Line numbers are rendered as absolute number."),y(305,"Line numbers are rendered as distance in lines to cursor position."),y(306,"Line numbers are rendered every 10 lines.")],default:"on",description:y(307,"Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function rN(s){const e=s.get(112);return e==="editable"?s.get(104):e!=="on"}function oN(s){return!s.get(172)}class Nte extends rn{constructor(){const e=[],t={type:"number",description:y(308,"Number of monospace characters at which this editor ruler will render.")};super(116,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:y(309,"Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:y(310,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:hi.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const n=i;t.push({column:hi.clampedInt(n.column,0,0,1e4),color:n.color})}return t.sort((i,n)=>i.column-n.column),t}return this.defaultValue}}class Ite extends rn{constructor(){super(105,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function bV(s,e){if(typeof s!="string")return e;switch(s){case"hidden":return 2;case"visible":return 3;default:return 1}}let Ate=class extends rn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(117,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[y(311,"The vertical scrollbar will be visible only when necessary."),y(312,"The vertical scrollbar will always be visible."),y(313,"The vertical scrollbar will always be hidden.")],default:"auto",description:y(314,"Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[y(315,"The horizontal scrollbar will be visible only when necessary."),y(316,"The horizontal scrollbar will always be visible."),y(317,"The horizontal scrollbar will always be hidden.")],default:"auto",description:y(318,"Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:y(319,"The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:y(320,"The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:y(321,"Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:y(322,"When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=hi.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=hi.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:hi.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:bV(t.vertical,this.defaultValue.vertical),horizontal:bV(t.horizontal,this.defaultValue.horizontal),useShadows:$e(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:$e(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:$e(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:$e(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:$e(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:hi.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:hi.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:$e(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:$e(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const Ou="inUntrustedWorkspace",I_={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class Rte extends rn{constructor(){const e={nonBasicASCII:Ou,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Ou,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(142,"unicodeHighlight",e,{[I_.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ou],default:e.nonBasicASCII,description:y(323,"Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[I_.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:y(324,"Controls whether characters that just reserve space or have no width at all are highlighted.")},[I_.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:y(325,"Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[I_.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ou],default:e.includeComments,description:y(326,"Controls whether characters in comments should also be subject to Unicode highlighting.")},[I_.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ou],default:e.includeStrings,description:y(327,"Controls whether characters in strings should also be subject to Unicode highlighting.")},[I_.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:y(328,"Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[I_.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:y(329,"Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Oa(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Oa(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const n=super.applyUpdate(e,t);return i?new rL(n.newValue,!0):n}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Sw(t.nonBasicASCII,Ou,[!0,!1,Ou]),invisibleCharacters:$e(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:$e(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Sw(t.includeComments,Ou,[!0,!1,Ou]),includeStrings:Sw(t.includeStrings,Ou,[!0,!1,Ou]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[n,r]of Object.entries(e))r===!0&&(i[n]=!0);return i}}class Mte extends rn{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,minShowDelay:0,suppressInSnippetMode:!1,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always"},triggerCommandOnProviderChange:!0,experimental:{suppressInlineSuggestions:"",showOnSuggestConflict:"never",emptyResponseInformation:!0}};super(71,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:y(330,"Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[y(331,"Show the inline suggestion toolbar whenever an inline suggestion is shown."),y(332,"Show the inline suggestion toolbar when hovering over an inline suggestion."),y(333,"Never show the inline suggestion toolbar.")],description:y(334,"Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:y(335,"Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:y(336,"Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.suppressInSnippetMode":{type:"boolean",default:e.suppressInSnippetMode,description:y(337,"Controls whether inline suggestions are suppressed when in snippet mode.")},"editor.inlineSuggest.minShowDelay":{type:"number",default:0,minimum:0,maximum:1e4,description:y(338,"Controls the minimal delay in milliseconds after which inline suggestions are shown after typing.")},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:"string",default:e.experimental.suppressInlineSuggestions,tags:["experimental"],description:y(339,"Suppresses inline completions for specified extension IDs -- comma separated."),experiment:{mode:"auto"}},"editor.inlineSuggest.experimental.emptyResponseInformation":{type:"boolean",default:e.experimental.emptyResponseInformation,tags:["experimental"],description:y(340,"Controls whether to send request information from the inline suggestion provider."),experiment:{mode:"auto"}},"editor.inlineSuggest.triggerCommandOnProviderChange":{type:"boolean",default:e.triggerCommandOnProviderChange,tags:["experimental"],description:y(341,"Controls whether to trigger a command when the inline suggestion provider changes."),experiment:{mode:"auto"}},"editor.inlineSuggest.experimental.showOnSuggestConflict":{type:"string",default:e.experimental.showOnSuggestConflict,tags:["experimental"],enum:["always","never","whenSuggestListIsIncomplete"],description:y(342,"Controls whether to show inline suggestions when there is a suggest conflict."),experiment:{mode:"auto"}},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:y(343,"Controls the font family of the inline suggestions.")},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:y(344,"Controls whether showing a suggestion will shift the code to make space for the suggestion inline."),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:y(345,"Controls whether larger suggestions can be shown side by side."),enum:["auto","never"],enumDescriptions:[y(346,"Larger suggestions will show side by side if there is enough space, otherwise they will be shown below."),y(347,"Larger suggestions are never shown side by side and will always be shown below.")],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:y(348,"Controls whether the suggestion will show as collapsed until jumping to it."),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),mode:Gi(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Gi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:$e(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:$e(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Jr.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:$e(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),minShowDelay:hi.clampedInt(t.minShowDelay,0,0,1e4),suppressInSnippetMode:$e(t.suppressInSnippetMode,this.defaultValue.suppressInSnippetMode),edits:{enabled:$e(t.edits?.enabled,this.defaultValue.edits.enabled),showCollapsed:$e(t.edits?.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:Gi(t.edits?.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),renderSideBySide:Gi(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"])},triggerCommandOnProviderChange:$e(t.triggerCommandOnProviderChange,this.defaultValue.triggerCommandOnProviderChange),experimental:{suppressInlineSuggestions:Jr.string(t.experimental?.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions),showOnSuggestConflict:Gi(t.experimental?.showOnSuggestConflict,this.defaultValue.experimental.showOnSuggestConflict,["always","never","whenSuggestListIsIncomplete"]),emptyResponseInformation:$e(t.experimental?.emptyResponseInformation,this.defaultValue.experimental.emptyResponseInformation)}}}}class Ote extends rn{constructor(){const e={enabled:Ar.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ar.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(21,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:y(349,"Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:y(350,"Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:$e(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class Pte extends rn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(22,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[y(351,"Enables bracket pair guides."),y(352,"Enables bracket pair guides only for the active bracket pair."),y(353,"Disables bracket pair guides.")],default:e.bracketPairs,description:y(354,"Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[y(355,"Enables horizontal guides as addition to vertical bracket pair guides."),y(356,"Enables horizontal guides only for the active bracket pair."),y(357,"Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:y(358,"Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:y(359,"Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:y(360,"Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[y(361,"Highlights the active indent guide."),y(362,"Highlights the active indent guide even if bracket guides are highlighted."),y(363,"Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:y(364,"Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Sw(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Sw(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:$e(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:$e(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Sw(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Sw(s,e,t){const i=t.indexOf(s);return i===-1?e:t[i]}class Bte extends rn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(134,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[y(365,"Insert suggestion without overwriting text right of the cursor."),y(366,"Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:y(367,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:y(368,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:y(369,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:y(370,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[y(371,"Always select a suggestion when automatically triggering IntelliSense."),y(372,"Never select a suggestion when automatically triggering IntelliSense."),y(373,"Select a suggestion only when triggering IntelliSense from a trigger character."),y(374,"Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:y(375,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:y(376,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:y(377,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:y(378,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:y(379,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:y(380,"Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:y(381,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:y(382,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:y(383,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:y(384,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:y(385,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:y(386,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:y(387,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:y(388,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:y(389,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:y(390,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:y(391,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:y(392,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:y(393,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:y(394,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:y(395,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:y(396,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:y(397,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:y(398,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:y(399,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:y(400,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:y(401,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:y(402,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:y(403,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:y(404,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:y(405,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:y(406,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:y(407,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:y(408,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:y(409,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:y(410,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:y(411,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:y(412,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Gi(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:$e(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:$e(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:$e(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:$e(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Gi(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:$e(t.showIcons,this.defaultValue.showIcons),showStatusBar:$e(t.showStatusBar,this.defaultValue.showStatusBar),preview:$e(t.preview,this.defaultValue.preview),previewMode:Gi(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:$e(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:$e(t.showMethods,this.defaultValue.showMethods),showFunctions:$e(t.showFunctions,this.defaultValue.showFunctions),showConstructors:$e(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:$e(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:$e(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:$e(t.showFields,this.defaultValue.showFields),showVariables:$e(t.showVariables,this.defaultValue.showVariables),showClasses:$e(t.showClasses,this.defaultValue.showClasses),showStructs:$e(t.showStructs,this.defaultValue.showStructs),showInterfaces:$e(t.showInterfaces,this.defaultValue.showInterfaces),showModules:$e(t.showModules,this.defaultValue.showModules),showProperties:$e(t.showProperties,this.defaultValue.showProperties),showEvents:$e(t.showEvents,this.defaultValue.showEvents),showOperators:$e(t.showOperators,this.defaultValue.showOperators),showUnits:$e(t.showUnits,this.defaultValue.showUnits),showValues:$e(t.showValues,this.defaultValue.showValues),showConstants:$e(t.showConstants,this.defaultValue.showConstants),showEnums:$e(t.showEnums,this.defaultValue.showEnums),showEnumMembers:$e(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:$e(t.showKeywords,this.defaultValue.showKeywords),showWords:$e(t.showWords,this.defaultValue.showWords),showColors:$e(t.showColors,this.defaultValue.showColors),showFiles:$e(t.showFiles,this.defaultValue.showFiles),showReferences:$e(t.showReferences,this.defaultValue.showReferences),showFolders:$e(t.showFolders,this.defaultValue.showFolders),showTypeParameters:$e(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:$e(t.showSnippets,this.defaultValue.showSnippets),showUsers:$e(t.showUsers,this.defaultValue.showUsers),showIssues:$e(t.showIssues,this.defaultValue.showIssues)}}}class Fte extends rn{constructor(){super(129,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:y(413,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:y(414,"Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:$e(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:$e(e.selectSubwords,this.defaultValue.selectSubwords)}}}class Vte extends rn{constructor(){const e=[];super(147,"wordSegmenterLocales",e,{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:y(415,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"},default:e})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class Hte extends rn{constructor(){super(155,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[y(416,"No indentation. Wrapped lines begin at column 1."),y(417,"Wrapped lines get the same indentation as the parent."),y(418,"Wrapped lines get +1 indentation toward the parent."),y(419,"Wrapped lines get +2 indentation toward the parent.")],description:y(420,"Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class Wte extends mp{constructor(){super(166)}compute(e,t,i){const n=t.get(165);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}class zte extends rn{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(43,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:y(421,"Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:y(422,"Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[y(423,"Show the drop selector widget after a file is dropped into the editor."),y(424,"Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),showDropSelector:Gi(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Ute extends rn{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(97,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:y(425,"Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:y(426,"Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[y(427,"Show the paste selector widget after content is pasted into the editor."),y(428,"Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),showPasteSelector:Gi(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const qte="Consolas, 'Courier New', monospace",$te="Menlo, Monaco, 'Courier New', monospace",jte="'Droid Sans Mono', 'monospace', monospace",Nl={fontFamily:Bt?$te:ia?qte:jte,fontWeight:"normal",fontSize:Bt?12:14,lineHeight:0,letterSpacing:0},Wv=[];function we(s){return Wv[s.id]=s,s}const N0={acceptSuggestionOnCommitCharacter:we(new vt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:y(429,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:we(new sn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",y(430,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:y(431,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:we(new nte),accessibilityPageSize:we(new hi(3,"accessibilityPageSize",500,1,1073741824,{description:y(432,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),allowOverflow:we(new vt(4,"allowOverflow",!0)),allowVariableLineHeights:we(new vt(5,"allowVariableLineHeights",!0,{description:y(433,"Controls whether to allow using variable line heights in the editor.")})),allowVariableFonts:we(new vt(6,"allowVariableFonts",!0,{description:y(434,"Controls whether to allow using variable fonts in the editor.")})),allowVariableFontsInAccessibilityMode:we(new vt(7,"allowVariableFontsInAccessibilityMode",!1,{description:y(435,"Controls whether to allow using variable fonts in the editor in the accessibility mode."),tags:["accessibility"]})),ariaLabel:we(new Jr(8,"ariaLabel",y(436,"Editor content"))),ariaRequired:we(new vt(9,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:we(new vt(12,"screenReaderAnnounceInlineSuggestion",!0,{description:y(437,"Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:we(new sn(10,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",y(438,"Use language configurations to determine when to autoclose brackets."),y(439,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:y(440,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:we(new sn(11,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",y(441,"Use language configurations to determine when to autoclose comments."),y(442,"Autoclose comments only when the cursor is to the left of whitespace."),""],description:y(443,"Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:we(new sn(13,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",y(444,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:y(445,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:we(new sn(14,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",y(446,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:y(447,"Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:we(new sn(15,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",y(448,"Use language configurations to determine when to autoclose quotes."),y(449,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:y(450,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:we(new dS(16,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],ite,{enumDescriptions:[y(451,"The editor will not insert indentation automatically."),y(452,"The editor will keep the current line's indentation."),y(453,"The editor will keep the current line's indentation and honor language defined brackets."),y(454,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),y(455,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:y(456,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),autoIndentOnPaste:we(new vt(17,"autoIndentOnPaste",!1,{description:y(457,"Controls whether the editor should automatically auto-indent the pasted content.")})),autoIndentOnPasteWithinString:we(new vt(18,"autoIndentOnPasteWithinString",!0,{description:y(458,"Controls whether the editor should automatically auto-indent the pasted content when pasted within a string. This takes effect when autoIndentOnPaste is true.")})),automaticLayout:we(new vt(19,"automaticLayout",!1)),autoSurround:we(new sn(20,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[y(459,"Use language configurations to determine when to automatically surround selections."),y(460,"Surround with quotes but not brackets."),y(461,"Surround with brackets but not quotes."),""],description:y(462,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:we(new Ote),bracketPairGuides:we(new Pte),stickyTabStops:we(new vt(132,"stickyTabStops",!1,{description:y(463,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:we(new vt(23,"codeLens",!0,{description:y(464,"Controls whether the editor shows CodeLens.")})),codeLensFontFamily:we(new Jr(24,"codeLensFontFamily","",{description:y(465,"Controls the font family for CodeLens.")})),codeLensFontSize:we(new hi(25,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:y(466,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:we(new vt(26,"colorDecorators",!0,{description:y(467,"Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:we(new sn(168,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[y(468,"Make the color picker appear both on click and hover of the color decorator"),y(469,"Make the color picker appear on hover of the color decorator"),y(470,"Make the color picker appear on click of the color decorator")],description:y(471,"Controls the condition to make a color picker appear from a color decorator.")})),colorDecoratorsLimit:we(new hi(27,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:y(472,"Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:we(new vt(28,"columnSelection",!1,{description:y(473,"Enable that the selection with the mouse and keys is doing column selection.")})),comments:we(new ste),contextmenu:we(new vt(30,"contextmenu",!0)),copyWithSyntaxHighlighting:we(new vt(31,"copyWithSyntaxHighlighting",!0,{description:y(474,"Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:we(new dS(32,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],rte,{description:y(475,"Control the cursor animation style.")})),cursorSmoothCaretAnimation:we(new sn(33,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[y(476,"Smooth caret animation is disabled."),y(477,"Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),y(478,"Smooth caret animation is always enabled.")],description:y(479,"Controls whether the smooth caret animation should be enabled.")})),cursorStyle:we(new dS(34,"cursorStyle",Vs.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],_V,{description:y(480,"Controls the cursor style in insert input mode.")})),overtypeCursorStyle:we(new dS(92,"overtypeCursorStyle",Vs.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],_V,{description:y(481,"Controls the cursor style in overtype input mode.")})),cursorSurroundingLines:we(new hi(35,"cursorSurroundingLines",0,0,1073741824,{description:y(482,"Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:we(new sn(36,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[y(483,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),y(484,"`cursorSurroundingLines` is enforced always.")],markdownDescription:y(485,"Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:we(new hi(37,"cursorWidth",0,0,1073741824,{markdownDescription:y(486,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),cursorHeight:we(new hi(38,"cursorHeight",0,0,1073741824,{markdownDescription:y(487,"Controls the height of the cursor when `#editor.cursorStyle#` is set to `line`. Cursor's max height depends on line height.")})),disableLayerHinting:we(new vt(39,"disableLayerHinting",!1)),disableMonospaceOptimizations:we(new vt(40,"disableMonospaceOptimizations",!1)),domReadOnly:we(new vt(41,"domReadOnly",!1)),dragAndDrop:we(new vt(42,"dragAndDrop",!0,{description:y(488,"Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:we(new ate),dropIntoEditor:we(new zte),editContext:we(new vt(44,"editContext",!0,{description:y(489,"Sets whether the EditContext API should be used instead of the text area to power input in the editor."),included:G6||Oj||cx})),renderRichScreenReaderContent:we(new vt(107,"renderRichScreenReaderContent",!1,{markdownDescription:y(490,"Whether to render rich screen reader content when the `#editor.editContext#` setting is enabled.")})),stickyScroll:we(new bte),experimentalGpuAcceleration:we(new sn(46,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[y(491,"Use regular DOM-based rendering."),y(492,"Use GPU acceleration.")],description:y(493,"Controls whether to use the experimental GPU acceleration to render the editor.")})),experimentalWhitespaceRendering:we(new sn(47,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[y(494,"Use a new rendering method with svgs."),y(495,"Use a new rendering method with font characters."),y(496,"Use the stable rendering method.")],description:y(497,"Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:we(new Jr(48,"extraEditorClassName","")),fastScrollSensitivity:we(new xl(49,"fastScrollSensitivity",5,s=>s<=0?5:s,{markdownDescription:y(498,"Scrolling speed multiplier when pressing `Alt`.")})),find:we(new lte),fixedOverflowWidgets:we(new vt(51,"fixedOverflowWidgets",!1)),folding:we(new vt(52,"folding",!0,{description:y(499,"Controls whether the editor has code folding enabled.")})),foldingStrategy:we(new sn(53,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[y(500,"Use a language-specific folding strategy if available, else the indentation-based one."),y(501,"Use the indentation-based folding strategy.")],description:y(502,"Controls the strategy for computing folding ranges.")})),foldingHighlight:we(new vt(54,"foldingHighlight",!0,{description:y(503,"Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:we(new vt(55,"foldingImportsByDefault",!1,{description:y(504,"Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:we(new hi(56,"foldingMaximumRegions",5e3,10,65e3,{description:y(505,"The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:we(new vt(57,"unfoldOnClickAfterEndOfLine",!1,{description:y(506,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:we(new Jr(58,"fontFamily",Nl.fontFamily,{description:y(507,"Controls the font family.")})),fontInfo:we(new cte),fontLigatures2:we(new rp),fontSize:we(new fte),fontWeight:we(new oO),fontVariations:we(new hx),formatOnPaste:we(new vt(64,"formatOnPaste",!1,{description:y(508,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:we(new vt(65,"formatOnType",!1,{description:y(509,"Controls whether the editor should automatically format the line after typing.")})),glyphMargin:we(new vt(66,"glyphMargin",!0,{description:y(510,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:we(new gte),hideCursorInOverviewRuler:we(new vt(68,"hideCursorInOverviewRuler",!1,{description:y(511,"Controls whether the cursor should be hidden in the overview ruler.")})),hover:we(new mte),inDiffEditor:we(new vt(70,"inDiffEditor",!1)),inertialScroll:we(new vt(158,"inertialScroll",!1,{description:y(512,"Make scrolling inertial - mostly useful with touchpad on linux.")})),letterSpacing:we(new xl(72,"letterSpacing",Nl.letterSpacing,s=>xl.clamp(s,-5,20),{description:y(513,"Controls the letter spacing in pixels.")})),lightbulb:we(new _te),lineDecorationsWidth:we(new wte),lineHeight:we(new Cte),lineNumbers:we(new Dte),lineNumbersMinChars:we(new hi(77,"lineNumbersMinChars",5,1,300)),linkedEditing:we(new vt(78,"linkedEditing",!1,{description:y(514,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:we(new vt(79,"links",!0,{description:y(515,"Controls whether the editor should detect links and make them clickable.")})),matchBrackets:we(new sn(80,"matchBrackets","always",["always","near","never"],{description:y(516,"Highlight matching brackets.")})),minimap:we(new yte),mouseStyle:we(new sn(82,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:we(new xl(83,"mouseWheelScrollSensitivity",1,s=>s===0?1:s,{markdownDescription:y(517,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:we(new vt(84,"mouseWheelZoom",!1,{markdownDescription:Bt?y(518,"Zoom the font of the editor when using mouse wheel and holding `Cmd`."):y(519,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:we(new vt(85,"multiCursorMergeOverlapping",!0,{description:y(520,"Merge multiple cursors when they are overlapping.")})),multiCursorModifier:we(new dS(86,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],Ste,{markdownEnumDescriptions:[y(521,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),y(522,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:y(523,"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),mouseMiddleClickAction:we(new sn(87,"mouseMiddleClickAction","default",["default","openLink","ctrlLeftClick"],{description:y(524,"Controls what happens when middle mouse button is clicked in the editor.")})),multiCursorPaste:we(new sn(88,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[y(525,"Each cursor pastes a single line of the text."),y(526,"Each cursor pastes the full text.")],markdownDescription:y(527,"Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:we(new hi(89,"multiCursorLimit",1e4,1,1e5,{markdownDescription:y(528,"Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:we(new sn(90,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[y(529,"Does not highlight occurrences."),y(530,"Highlights occurrences only in the current file."),y(531,"Experimental: Highlights occurrences across all valid open files.")],markdownDescription:y(532,"Controls whether occurrences should be highlighted across open files.")})),occurrencesHighlightDelay:we(new hi(91,"occurrencesHighlightDelay",0,0,2e3,{description:y(533,"Controls the delay in milliseconds after which occurrences are highlighted."),tags:["preview"]})),overtypeOnPaste:we(new vt(93,"overtypeOnPaste",!0,{description:y(534,"Controls whether pasting should overtype.")})),overviewRulerBorder:we(new vt(94,"overviewRulerBorder",!0,{description:y(535,"Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:we(new hi(95,"overviewRulerLanes",3,0,3)),padding:we(new Lte),pasteAs:we(new Ute),parameterHints:we(new xte),peekWidgetDefaultFocus:we(new sn(99,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[y(536,"Focus the tree when opening peek"),y(537,"Focus the editor when opening peek")],description:y(538,"Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:we(new Ete),definitionLinkOpensInPeek:we(new vt(101,"definitionLinkOpensInPeek",!1,{description:y(539,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:we(new Tte),quickSuggestionsDelay:we(new hi(103,"quickSuggestionsDelay",10,0,1073741824,{description:y(540,"Controls the delay in milliseconds after which quick suggestions will show up."),experiment:{mode:"auto"}})),readOnly:we(new vt(104,"readOnly",!1)),readOnlyMessage:we(new Ite),renameOnType:we(new vt(106,"renameOnType",!1,{description:y(541,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:y(542,"Deprecated, use `#editor.linkedEditing#` instead.")})),renderControlCharacters:we(new vt(108,"renderControlCharacters",!0,{description:y(543,"Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:we(new sn(109,"renderFinalNewline",Fa?"dimmed":"on",["off","on","dimmed"],{description:y(544,"Render last line number when the file ends with a newline.")})),renderLineHighlight:we(new sn(110,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",y(545,"Highlights both the gutter and the current line.")],description:y(546,"Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:we(new vt(111,"renderLineHighlightOnlyWhenFocus",!1,{description:y(547,"Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:we(new sn(112,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:we(new sn(113,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",y(548,"Render whitespace characters except for single spaces between words."),y(549,"Render whitespace characters only on selected text."),y(550,"Render only trailing whitespace characters."),""],description:y(551,"Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:we(new hi(114,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:we(new vt(115,"roundedSelection",!0,{description:y(552,"Controls whether selections should have rounded corners.")})),rulers:we(new Nte),scrollbar:we(new Ate),scrollBeyondLastColumn:we(new hi(118,"scrollBeyondLastColumn",4,0,1073741824,{description:y(553,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:we(new vt(119,"scrollBeyondLastLine",!0,{description:y(554,"Controls whether the editor will scroll beyond the last line.")})),scrollOnMiddleClick:we(new vt(171,"scrollOnMiddleClick",!1,{description:y(555,"Controls whether the editor will scroll when the middle button is pressed.")})),scrollPredominantAxis:we(new vt(120,"scrollPredominantAxis",!0,{description:y(556,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:we(new vt(121,"selectionClipboard",!0,{description:y(557,"Controls whether the Linux primary clipboard should be supported."),included:Fa})),selectionHighlight:we(new vt(122,"selectionHighlight",!0,{description:y(558,"Controls whether the editor should highlight matches similar to the selection.")})),selectionHighlightMaxLength:we(new hi(123,"selectionHighlightMaxLength",200,0,1073741824,{description:y(559,"Controls how many characters can be in the selection before similiar matches are not highlighted. Set to zero for unlimited.")})),selectionHighlightMultiline:we(new vt(124,"selectionHighlightMultiline",!1,{description:y(560,"Controls whether the editor should highlight selection matches that span multiple lines.")})),selectOnLineNumbers:we(new vt(125,"selectOnLineNumbers",!0)),showFoldingControls:we(new sn(126,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[y(561,"Always show the folding controls."),y(562,"Never show the folding controls and reduce the gutter size."),y(563,"Only show the folding controls when the mouse is over the gutter.")],description:y(564,"Controls when the folding controls on the gutter are shown.")})),showUnused:we(new vt(127,"showUnused",!0,{description:y(565,"Controls fading out of unused code.")})),showDeprecated:we(new vt(157,"showDeprecated",!0,{description:y(566,"Controls strikethrough deprecated variables.")})),inlayHints:we(new vte),snippetSuggestions:we(new sn(128,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[y(567,"Show snippet suggestions on top of other suggestions."),y(568,"Show snippet suggestions below other suggestions."),y(569,"Show snippets suggestions with other suggestions."),y(570,"Do not show snippet suggestions.")],description:y(571,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:we(new Fte),smoothScrolling:we(new vt(130,"smoothScrolling",!1,{description:y(572,"Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:we(new hi(133,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:we(new Bte),inlineSuggest:we(new Mte),inlineCompletionsAccessibilityVerbose:we(new vt(169,"inlineCompletionsAccessibilityVerbose",!1,{description:y(573,"Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:we(new hi(135,"suggestFontSize",0,0,1e3,{markdownDescription:y(574,"Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:we(new hi(136,"suggestLineHeight",0,0,1e3,{markdownDescription:y(575,"Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:we(new vt(137,"suggestOnTriggerCharacters",!0,{description:y(576,"Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:we(new sn(138,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[y(577,"Always select the first suggestion."),y(578,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),y(579,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:y(580,"Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:we(new sn(139,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[y(581,"Tab complete will insert the best matching suggestion when pressing tab."),y(582,"Disable tab completions."),y(583,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:y(584,"Enables tab completions.")})),tabIndex:we(new hi(140,"tabIndex",0,-1,1073741824)),trimWhitespaceOnDelete:we(new vt(141,"trimWhitespaceOnDelete",!1,{description:y(585,"Controls whether the editor will also delete the next line's indentation whitespace when deleting a newline.")})),unicodeHighlight:we(new Rte),unusualLineTerminators:we(new sn(143,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[y(586,"Unusual line terminators are automatically removed."),y(587,"Unusual line terminators are ignored."),y(588,"Unusual line terminators prompt to be removed.")],description:y(589,"Remove unusual line terminators that might cause problems.")})),useShadowDOM:we(new vt(144,"useShadowDOM",!0)),useTabStops:we(new vt(145,"useTabStops",!0,{description:y(590,"Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:we(new sn(146,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[y(591,"Use the default line break rule."),y(592,"Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:y(593,"Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:we(new Vte),wordSeparators:we(new Jr(148,"wordSeparators",Pj,{description:y(594,"Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:we(new sn(149,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[y(595,"Lines will never wrap."),y(596,"Lines will wrap at the viewport width."),y(597,"Lines will wrap at `#editor.wordWrapColumn#`."),y(598,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:y(599,"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:we(new Jr(150,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:we(new Jr(151,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:we(new hi(152,"wordWrapColumn",80,1,1073741824,{markdownDescription:y(600,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:we(new sn(153,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:we(new sn(154,"wordWrapOverride2","inherit",["off","on","inherit"])),wrapOnEscapedLineFeeds:we(new vt(160,"wrapOnEscapedLineFeeds",!1,{markdownDescription:y(601,'Controls whether literal `\\n` shall trigger a wordWrap when `#editor.wordWrap#` is enabled.\n\nFor example:\n```c\nchar* str="hello\\nworld"\n```\nwill be displayed as\n```c\nchar* str="hello\\n\n           world"\n```')})),effectiveCursorStyle:we(new ute),editorClassName:we(new ote),defaultColorDecorators:we(new sn(167,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[y(602,"Show default color decorators only when no extension provides colors decorators."),y(603,"Always show default color decorators."),y(604,"Never show default color decorators.")],description:y(605,"Controls whether inline color decorations should be shown using the default document color provider.")})),pixelRatio:we(new kte),tabFocusMode:we(new vt(164,"tabFocusMode",!1,{markdownDescription:y(606,"Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:we(new yw),wrappingInfo:we(new Wte),wrappingIndent:we(new Hte),wrappingStrategy:we(new pte),effectiveEditContextEnabled:we(new hte),effectiveAllowVariableFonts:we(new dte)};function dx(s,e){const t=this;let i=!1,n;return function(){return i||(i=!0,n=s.apply(t,arguments)),n}}function KA(s){return typeof s=="object"&&s!==null&&typeof s.dispose=="function"&&s.dispose.length===0}function Cs(s){if(si.is(s)){const e=[];for(const t of s)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(s)?[]:s}else if(s)return s.dispose(),s}function yd(...s){return lt(()=>Cs(s))}class Gte{constructor(e){this._isDisposed=!1,this._fn=e}dispose(){if(!this._isDisposed){if(!this._fn)throw new Error("Unbound disposable context: Need to use an arrow function to preserve the value of this");this._isDisposed=!0,this._fn()}}}function lt(s){return new Gte(s)}const QI=class QI{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Cs(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e||e===pe.None)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?QI.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}};QI.DISABLE_DISPOSED_WARNING=!1;let Ze=QI;const YF=class YF{constructor(){this._store=new Ze,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};YF.None=Object.freeze({dispose(){}});let pe=YF;class qs{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}}class Kte{constructor(e){this.object=e}dispose(){}}class Z6{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Cs(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const Yte=globalThis.performance.now.bind(globalThis.performance);class bg{static create(e){return new bg(e)}constructor(e){this._now=e===!1?Date.now:Yte,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Ie;(function(s){s.None=()=>pe.None;function e(F,W){return g(F,()=>{},0,void 0,!0,void 0,W)}s.defer=e;function t(F){return(W,ee=null,X)=>{let $=!1,te;return te=F(ce=>{if(!$)return te?te.dispose():$=!0,W.call(ee,ce)},null,X),$&&te.dispose(),te}}s.once=t;function i(F,W){return s.once(s.filter(F,W))}s.onceIf=i;function n(F,W,ee){return h((X,$=null,te)=>F(ce=>X.call($,W(ce)),null,te),ee)}s.map=n;function r(F,W,ee){return h((X,$=null,te)=>F(ce=>{W(ce),X.call($,ce)},null,te),ee)}s.forEach=r;function o(F,W,ee){return h((X,$=null,te)=>F(ce=>W(ce)&&X.call($,ce),null,te),ee)}s.filter=o;function a(F){return F}s.signal=a;function l(...F){return(W,ee=null,X)=>{const $=yd(...F.map(te=>te(ce=>W.call(ee,ce))));return d($,X)}}s.any=l;function c(F,W,ee,X){let $=ee;return n(F,te=>($=W($,te),$),X)}s.reduce=c;function h(F,W){let ee;const X={onWillAddFirstListener(){ee=F($.fire,$)},onDidRemoveLastListener(){ee?.dispose()}},$=new ne(X);return W?.add($),$.event}function d(F,W){return W instanceof Array?W.push(F):W&&W.add(F),F}function g(F,W,ee=100,X=!1,$=!1,te,ce){let he,j,ae,Te=0,Le;const Oe={leakWarningThreshold:te,onWillAddFirstListener(){he=F(Ke=>{Te++,j=W(j,Ke),X&&!ae&&(Ne.fire(j),j=void 0),Le=()=>{const Dt=j;j=void 0,ae=void 0,(!X||Te>1)&&Ne.fire(Dt),Te=0},typeof ee=="number"?(ae&&clearTimeout(ae),ae=setTimeout(Le,ee)):ae===void 0&&(ae=null,queueMicrotask(Le))})},onWillRemoveListener(){$&&Te>0&&Le?.()},onDidRemoveLastListener(){Le=void 0,he.dispose()}},Ne=new ne(Oe);return ce?.add(Ne),Ne.event}s.debounce=g;function _(F,W=0,ee){return s.debounce(F,(X,$)=>X?(X.push($),X):[$],W,void 0,!0,void 0,ee)}s.accumulate=_;function b(F,W=(X,$)=>X===$,ee){let X=!0,$;return o(F,te=>{const ce=X||!W(te,$);return X=!1,$=te,ce},ee)}s.latch=b;function C(F,W,ee){return[s.filter(F,W,ee),s.filter(F,X=>!W(X),ee)]}s.split=C;function S(F,W=!1,ee=[],X){let $=ee.slice(),te=F(j=>{$?$.push(j):he.fire(j)});X&&X.add(te);const ce=()=>{$?.forEach(j=>he.fire(j)),$=null},he=new ne({onWillAddFirstListener(){te||(te=F(j=>he.fire(j)),X&&X.add(te))},onDidAddFirstListener(){$&&(W?setTimeout(ce):ce())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return X&&X.add(he),he.event}s.buffer=S;function E(F,W){return(X,$,te)=>{const ce=W(new T);return F(function(he){const j=ce.evaluate(he);j!==x&&X.call($,j)},void 0,te)}}s.chain=E;const x=Symbol("HaltChainable");class T{constructor(){this.steps=[]}map(W){return this.steps.push(W),this}forEach(W){return this.steps.push(ee=>(W(ee),ee)),this}filter(W){return this.steps.push(ee=>W(ee)?ee:x),this}reduce(W,ee){let X=ee;return this.steps.push($=>(X=W(X,$),X)),this}latch(W=(ee,X)=>ee===X){let ee=!0,X;return this.steps.push($=>{const te=ee||!W($,X);return ee=!1,X=$,te?$:x}),this}evaluate(W){for(const ee of this.steps)if(W=ee(W),W===x)break;return W}}function N(F,W,ee=X=>X){const X=(...he)=>ce.fire(ee(...he)),$=()=>F.on(W,X),te=()=>F.removeListener(W,X),ce=new ne({onWillAddFirstListener:$,onDidRemoveLastListener:te});return ce.event}s.fromNodeEventEmitter=N;function A(F,W,ee=X=>X){const X=(...he)=>ce.fire(ee(...he)),$=()=>F.addEventListener(W,X),te=()=>F.removeEventListener(W,X),ce=new ne({onWillAddFirstListener:$,onDidRemoveLastListener:te});return ce.event}s.fromDOMEventEmitter=A;function P(F,W){let ee;const X=new Promise(($,te)=>{const ce=t(F)($,null,W);ee=()=>ce.dispose()});return X.cancel=ee,X}s.toPromise=P;function O(F,W){return F(ee=>W.fire(ee))}s.forward=O;function V(F,W,ee){return W(ee),F(X=>W(X))}s.runAndSubscribe=V;class U{constructor(W,ee){this._observable=W,this._counter=0,this._hasChanged=!1;const X={onWillAddFirstListener:()=>{W.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{W.removeObserver(this)}};this.emitter=new ne(X),ee&&ee.add(this.emitter)}beginUpdate(W){this._counter++}handlePossibleChange(W){}handleChange(W,ee){this._hasChanged=!0}endUpdate(W){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function Y(F,W){return new U(F,W).emitter.event}s.fromObservable=Y;function B(F){return(W,ee,X)=>{let $=0,te=!1;const ce={beginUpdate(){$++},endUpdate(){$--,$===0&&(F.reportChanges(),te&&(te=!1,W.call(ee)))},handlePossibleChange(){},handleChange(){te=!0}};F.addObserver(ce),F.reportChanges();const he={dispose(){F.removeObserver(ce)}};return X instanceof Ze?X.add(he):Array.isArray(X)&&X.push(he),he}}s.fromObservableLight=B})(Ie||(Ie={}));const lw=class lw{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${lw._idPool++}`,lw.all.add(this)}start(e){this._stopWatch=new bg,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};lw.all=new Set,lw._idPool=0;let aO=lw,Zte=-1;const JI=class JI{constructor(e,t,i=(JI._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[r,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(r);const l=new Xte(a,r);this._errorHandler(l)}return()=>{const r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,n]of this._stacks)(!e||t<n)&&(e=[i,n],t=n);return e}};JI._idPool=1;let lO=JI;class X6{static create(){const e=new Error;return new X6(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class Xte extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class Qte extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class _M{constructor(e){this.value=e}}const Jte=2;let ne=class{constructor(e){this._size=0,this._options=e,this._leakageMon=this._options?.leakWarningThreshold?new lO(e?.onListenerError??mi,this._options?.leakWarningThreshold??Zte):void 0,this._perfMon=this._options?._profName?new aO(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,t,i)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const a=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(a);const l=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],c=new Qte(`${a}. HINT: Stack shows most frequent listener (${l[1]}-times)`,l[0]);return(this._options?.onListenerError||mi)(c),pe.None}if(this._disposed)return pe.None;t&&(e=e.bind(t));const n=new _M(e);let r;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(n.stack=X6.create(),r=this._leakageMon.check(n.stack,this._size+1)),this._listeners?this._listeners instanceof _M?(this._deliveryQueue??=new Hj,this._listeners=[this._listeners,n]):this._listeners.push(n):(this._options?.onWillAddFirstListener?.(this),this._listeners=n,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;const o=lt(()=>{r?.(),this._removeListener(n)});return i instanceof Ze?i.add(o):Array.isArray(i)&&i.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const n=this._deliveryQueue.current===this;if(this._size*Jte<=t.length){let r=0;for(let o=0;o<t.length;o++)t[o]?t[r++]=t[o]:n&&r<this._deliveryQueue.end&&(this._deliveryQueue.end--,r<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=r}}_deliver(e,t){if(!e)return;const i=this._options?.onListenerError||mi;if(!i){e.value(t);return}try{e.value(t)}catch(n){i(n)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof _M)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}};const eie=()=>new Hj;class Hj{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class fx extends ne{constructor(e){super(e),this._isPaused=0,this._eventQueue=new ea,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Wj extends fx{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class tie extends ne{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class iie{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new ne({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),lt(dx(()=>{this.hasListeners&&this.unhook(t);const n=this.events.indexOf(t);this.events.splice(n,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(const e of this.events)e.listener?.dispose();this.events=[]}}class w2{constructor(){this.data=[]}wrapEvent(e,t,i){return(n,r,o)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>n.call(r,a)):n.call(r,a);return}const c=l;if(!c){n.call(r,t(i,a));return}c.items??=[],c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??=i?c.items.reduce(t,i):c.items.reduce(t),n.call(r,c.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(n=>n()),i}}class fS{constructor(){this.listening=!1,this.inputEvent=Ie.None,this.inputEventListener=pe.None,this.emitter=new ne({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const zj=Object.freeze(function(s,e){const t=setTimeout(s.bind(e),0);return{dispose(){clearTimeout(t)}}});var Al;(function(s){function e(t){return t===s.None||t===s.Cancelled||t instanceof CD?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}s.isCancellationToken=e,s.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ie.None}),s.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:zj})})(Al||(Al={}));class CD{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?zj:(this._emitter||(this._emitter=new ne),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class SC{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new CD),this._token}cancel(){this._token?this._token instanceof CD&&this._token.cancel():this._token=Al.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof CD&&this._token.dispose():this._token=Al.None}}class Q6{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const yD=new Q6,cO=new Q6,uO=new Q6,Uj=new Array(230),nie=Object.create(null),sie=Object.create(null),J6=[];for(let s=0;s<=193;s++)J6[s]=-1;(function(){const e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN","",""],[1,1,"Hyper",0,"",0,"","",""],[1,2,"Super",0,"",0,"","",""],[1,3,"Fn",0,"",0,"","",""],[1,4,"FnLock",0,"",0,"","",""],[1,5,"Suspend",0,"",0,"","",""],[1,6,"Resume",0,"",0,"","",""],[1,7,"Turbo",0,"",0,"","",""],[1,8,"Sleep",0,"",0,"VK_SLEEP","",""],[1,9,"WakeUp",0,"",0,"","",""],[0,10,"KeyA",31,"A",65,"VK_A","",""],[0,11,"KeyB",32,"B",66,"VK_B","",""],[0,12,"KeyC",33,"C",67,"VK_C","",""],[0,13,"KeyD",34,"D",68,"VK_D","",""],[0,14,"KeyE",35,"E",69,"VK_E","",""],[0,15,"KeyF",36,"F",70,"VK_F","",""],[0,16,"KeyG",37,"G",71,"VK_G","",""],[0,17,"KeyH",38,"H",72,"VK_H","",""],[0,18,"KeyI",39,"I",73,"VK_I","",""],[0,19,"KeyJ",40,"J",74,"VK_J","",""],[0,20,"KeyK",41,"K",75,"VK_K","",""],[0,21,"KeyL",42,"L",76,"VK_L","",""],[0,22,"KeyM",43,"M",77,"VK_M","",""],[0,23,"KeyN",44,"N",78,"VK_N","",""],[0,24,"KeyO",45,"O",79,"VK_O","",""],[0,25,"KeyP",46,"P",80,"VK_P","",""],[0,26,"KeyQ",47,"Q",81,"VK_Q","",""],[0,27,"KeyR",48,"R",82,"VK_R","",""],[0,28,"KeyS",49,"S",83,"VK_S","",""],[0,29,"KeyT",50,"T",84,"VK_T","",""],[0,30,"KeyU",51,"U",85,"VK_U","",""],[0,31,"KeyV",52,"V",86,"VK_V","",""],[0,32,"KeyW",53,"W",87,"VK_W","",""],[0,33,"KeyX",54,"X",88,"VK_X","",""],[0,34,"KeyY",55,"Y",89,"VK_Y","",""],[0,35,"KeyZ",56,"Z",90,"VK_Z","",""],[0,36,"Digit1",22,"1",49,"VK_1","",""],[0,37,"Digit2",23,"2",50,"VK_2","",""],[0,38,"Digit3",24,"3",51,"VK_3","",""],[0,39,"Digit4",25,"4",52,"VK_4","",""],[0,40,"Digit5",26,"5",53,"VK_5","",""],[0,41,"Digit6",27,"6",54,"VK_6","",""],[0,42,"Digit7",28,"7",55,"VK_7","",""],[0,43,"Digit8",29,"8",56,"VK_8","",""],[0,44,"Digit9",30,"9",57,"VK_9","",""],[0,45,"Digit0",21,"0",48,"VK_0","",""],[1,46,"Enter",3,"Enter",13,"VK_RETURN","",""],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE","",""],[1,48,"Backspace",1,"Backspace",8,"VK_BACK","",""],[1,49,"Tab",2,"Tab",9,"VK_TAB","",""],[1,50,"Space",10,"Space",32,"VK_SPACE","",""],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,"",0,"","",""],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL","",""],[1,64,"F1",59,"F1",112,"VK_F1","",""],[1,65,"F2",60,"F2",113,"VK_F2","",""],[1,66,"F3",61,"F3",114,"VK_F3","",""],[1,67,"F4",62,"F4",115,"VK_F4","",""],[1,68,"F5",63,"F5",116,"VK_F5","",""],[1,69,"F6",64,"F6",117,"VK_F6","",""],[1,70,"F7",65,"F7",118,"VK_F7","",""],[1,71,"F8",66,"F8",119,"VK_F8","",""],[1,72,"F9",67,"F9",120,"VK_F9","",""],[1,73,"F10",68,"F10",121,"VK_F10","",""],[1,74,"F11",69,"F11",122,"VK_F11","",""],[1,75,"F12",70,"F12",123,"VK_F12","",""],[1,76,"PrintScreen",0,"",0,"","",""],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL","",""],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE","",""],[1,79,"Insert",19,"Insert",45,"VK_INSERT","",""],[1,80,"Home",14,"Home",36,"VK_HOME","",""],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR","",""],[1,82,"Delete",20,"Delete",46,"VK_DELETE","",""],[1,83,"End",13,"End",35,"VK_END","",""],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT","",""],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",""],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",""],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",""],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",""],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK","",""],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE","",""],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY","",""],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT","",""],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD","",""],[1,94,"NumpadEnter",3,"",0,"","",""],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1","",""],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2","",""],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3","",""],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4","",""],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5","",""],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6","",""],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7","",""],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8","",""],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9","",""],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0","",""],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL","",""],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102","",""],[1,107,"ContextMenu",58,"ContextMenu",93,"","",""],[1,108,"Power",0,"",0,"","",""],[1,109,"NumpadEqual",0,"",0,"","",""],[1,110,"F13",71,"F13",124,"VK_F13","",""],[1,111,"F14",72,"F14",125,"VK_F14","",""],[1,112,"F15",73,"F15",126,"VK_F15","",""],[1,113,"F16",74,"F16",127,"VK_F16","",""],[1,114,"F17",75,"F17",128,"VK_F17","",""],[1,115,"F18",76,"F18",129,"VK_F18","",""],[1,116,"F19",77,"F19",130,"VK_F19","",""],[1,117,"F20",78,"F20",131,"VK_F20","",""],[1,118,"F21",79,"F21",132,"VK_F21","",""],[1,119,"F22",80,"F22",133,"VK_F22","",""],[1,120,"F23",81,"F23",134,"VK_F23","",""],[1,121,"F24",82,"F24",135,"VK_F24","",""],[1,122,"Open",0,"",0,"","",""],[1,123,"Help",0,"",0,"","",""],[1,124,"Select",0,"",0,"","",""],[1,125,"Again",0,"",0,"","",""],[1,126,"Undo",0,"",0,"","",""],[1,127,"Cut",0,"",0,"","",""],[1,128,"Copy",0,"",0,"","",""],[1,129,"Paste",0,"",0,"","",""],[1,130,"Find",0,"",0,"","",""],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE","",""],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP","",""],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN","",""],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR","",""],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1","",""],[1,136,"KanaMode",0,"",0,"","",""],[0,137,"IntlYen",0,"",0,"","",""],[1,138,"Convert",0,"",0,"","",""],[1,139,"NonConvert",0,"",0,"","",""],[1,140,"Lang1",0,"",0,"","",""],[1,141,"Lang2",0,"",0,"","",""],[1,142,"Lang3",0,"",0,"","",""],[1,143,"Lang4",0,"",0,"","",""],[1,144,"Lang5",0,"",0,"","",""],[1,145,"Abort",0,"",0,"","",""],[1,146,"Props",0,"",0,"","",""],[1,147,"NumpadParenLeft",0,"",0,"","",""],[1,148,"NumpadParenRight",0,"",0,"","",""],[1,149,"NumpadBackspace",0,"",0,"","",""],[1,150,"NumpadMemoryStore",0,"",0,"","",""],[1,151,"NumpadMemoryRecall",0,"",0,"","",""],[1,152,"NumpadMemoryClear",0,"",0,"","",""],[1,153,"NumpadMemoryAdd",0,"",0,"","",""],[1,154,"NumpadMemorySubtract",0,"",0,"","",""],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR","",""],[1,156,"NumpadClearEntry",0,"",0,"","",""],[1,0,"",5,"Ctrl",17,"VK_CONTROL","",""],[1,0,"",4,"Shift",16,"VK_SHIFT","",""],[1,0,"",6,"Alt",18,"VK_MENU","",""],[1,0,"",57,"Meta",91,"VK_COMMAND","",""],[1,157,"ControlLeft",5,"",0,"VK_LCONTROL","",""],[1,158,"ShiftLeft",4,"",0,"VK_LSHIFT","",""],[1,159,"AltLeft",6,"",0,"VK_LMENU","",""],[1,160,"MetaLeft",57,"",0,"VK_LWIN","",""],[1,161,"ControlRight",5,"",0,"VK_RCONTROL","",""],[1,162,"ShiftRight",4,"",0,"VK_RSHIFT","",""],[1,163,"AltRight",6,"",0,"VK_RMENU","",""],[1,164,"MetaRight",57,"",0,"VK_RWIN","",""],[1,165,"BrightnessUp",0,"",0,"","",""],[1,166,"BrightnessDown",0,"",0,"","",""],[1,167,"MediaPlay",0,"",0,"","",""],[1,168,"MediaRecord",0,"",0,"","",""],[1,169,"MediaFastForward",0,"",0,"","",""],[1,170,"MediaRewind",0,"",0,"","",""],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK","",""],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK","",""],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP","",""],[1,174,"Eject",0,"",0,"","",""],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE","",""],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT","",""],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL","",""],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2","",""],[1,179,"LaunchApp1",0,"",0,"VK_MEDIA_LAUNCH_APP1","",""],[1,180,"SelectTask",0,"",0,"","",""],[1,181,"LaunchScreenSaver",0,"",0,"","",""],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH","",""],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME","",""],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK","",""],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD","",""],[1,186,"BrowserStop",0,"",0,"VK_BROWSER_STOP","",""],[1,187,"BrowserRefresh",0,"",0,"VK_BROWSER_REFRESH","",""],[1,188,"BrowserFavorites",0,"",0,"VK_BROWSER_FAVORITES","",""],[1,189,"ZoomToggle",0,"",0,"","",""],[1,190,"MailReply",0,"",0,"","",""],[1,191,"MailForward",0,"",0,"","",""],[1,192,"MailSend",0,"",0,"","",""],[1,0,"",114,"KeyInComposition",229,"","",""],[1,0,"",116,"ABNT_C2",194,"VK_ABNT_C2","",""],[1,0,"",96,"OEM_8",223,"VK_OEM_8","",""],[1,0,"",0,"",0,"VK_KANA","",""],[1,0,"",0,"",0,"VK_HANGUL","",""],[1,0,"",0,"",0,"VK_JUNJA","",""],[1,0,"",0,"",0,"VK_FINAL","",""],[1,0,"",0,"",0,"VK_HANJA","",""],[1,0,"",0,"",0,"VK_KANJI","",""],[1,0,"",0,"",0,"VK_CONVERT","",""],[1,0,"",0,"",0,"VK_NONCONVERT","",""],[1,0,"",0,"",0,"VK_ACCEPT","",""],[1,0,"",0,"",0,"VK_MODECHANGE","",""],[1,0,"",0,"",0,"VK_SELECT","",""],[1,0,"",0,"",0,"VK_PRINT","",""],[1,0,"",0,"",0,"VK_EXECUTE","",""],[1,0,"",0,"",0,"VK_SNAPSHOT","",""],[1,0,"",0,"",0,"VK_HELP","",""],[1,0,"",0,"",0,"VK_APPS","",""],[1,0,"",0,"",0,"VK_PROCESSKEY","",""],[1,0,"",0,"",0,"VK_PACKET","",""],[1,0,"",0,"",0,"VK_DBE_SBCSCHAR","",""],[1,0,"",0,"",0,"VK_DBE_DBCSCHAR","",""],[1,0,"",0,"",0,"VK_ATTN","",""],[1,0,"",0,"",0,"VK_CRSEL","",""],[1,0,"",0,"",0,"VK_EXSEL","",""],[1,0,"",0,"",0,"VK_EREOF","",""],[1,0,"",0,"",0,"VK_PLAY","",""],[1,0,"",0,"",0,"VK_ZOOM","",""],[1,0,"",0,"",0,"VK_NONAME","",""],[1,0,"",0,"",0,"VK_PA1","",""],[1,0,"",0,"",0,"VK_OEM_CLEAR","",""]],t=[],i=[];for(const n of e){const[r,o,a,l,c,h,d,g,_]=n;if(i[o]||(i[o]=!0,nie[a]=o,sie[a.toLowerCase()]=o,r&&(J6[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);yD.define(l,c),cO.define(l,g||c),uO.define(l,_||g||c)}h&&(Uj[h]=l)}})();var Xf;(function(s){function e(a){return yD.keyCodeToStr(a)}s.toString=e;function t(a){return yD.strToKeyCode(a)}s.fromString=t;function i(a){return cO.keyCodeToStr(a)}s.toUserSettingsUS=i;function n(a){return uO.keyCodeToStr(a)}s.toUserSettingsGeneral=n;function r(a){return cO.strToKeyCode(a)||uO.strToKeyCode(a)}s.fromUserSettings=r;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return yD.keyCodeToStr(a)}s.toElectronAccelerator=o})(Xf||(Xf={}));function qj(s,e){const t=(e&65535)<<16>>>0;return(s|t)>>>0}var vV={};let Lw;const bM=globalThis.vscode;if(typeof bM<"u"&&typeof bM.process<"u"){const s=bM.process;Lw={get platform(){return s.platform},get arch(){return s.arch},get env(){return s.env},cwd(){return s.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Lw={get platform(){return process.platform},get arch(){return process.arch},get env(){return vV},cwd(){return vV.VSCODE_CWD||process.cwd()}}:Lw={get platform(){return ia?"win32":Bt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const aN=Lw.cwd,hO=Lw.env,rie=Lw.platform,oie=65,aie=97,lie=90,cie=122,O1=46,Zr=47,fl=92,kf=58,uie=63;class $j extends Error{constructor(e,t,i){let n;typeof t=="string"&&t.indexOf("not ")===0?(n="must not be",t=t.replace(/^not /,"")):n="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${n} of type ${t}`;o+=`. Received type ${typeof i}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function hie(s,e){if(s===null||typeof s!="object")throw new $j(e,"Object",s)}function Fs(s,e){if(typeof s!="string")throw new $j(e,"string",s)}const pp=rie==="win32";function ci(s){return s===Zr||s===fl}function dO(s){return s===Zr}function Ef(s){return s>=oie&&s<=lie||s>=aie&&s<=cie}function lN(s,e,t,i){let n="",r=0,o=-1,a=0,l=0;for(let c=0;c<=s.length;++c){if(c<s.length)l=s.charCodeAt(c);else{if(i(l))break;l=Zr}if(i(l)){if(!(o===c-1||a===1))if(a===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==O1||n.charCodeAt(n.length-2)!==O1){if(n.length>2){const h=n.lastIndexOf(t);h===-1?(n="",r=0):(n=n.slice(0,h),r=n.length-1-n.lastIndexOf(t)),o=c,a=0;continue}else if(n.length!==0){n="",r=0,o=c,a=0;continue}}e&&(n+=n.length>0?`${t}..`:"..",r=2)}else n.length>0?n+=`${t}${s.slice(o+1,c)}`:n=s.slice(o+1,c),r=c-o-1;o=c,a=0}else l===O1&&a!==-1?++a:a=-1}return n}function die(s){return s?`${s[0]==="."?"":"."}${s}`:""}function jj(s,e){hie(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${die(e.ext)}`;return t?t===e.root?`${t}${i}`:`${t}${s}${i}`:i}const Ma={resolve(...s){let e="",t="",i=!1;for(let n=s.length-1;n>=-1;n--){let r;if(n>=0){if(r=s[n],Fs(r,`paths[${n}]`),r.length===0)continue}else e.length===0?r=aN():(r=hO[`=${e}`]||aN(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===fl)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const h=r.charCodeAt(0);if(o===1)ci(h)&&(a=1,c=!0);else if(ci(h))if(c=!0,ci(r.charCodeAt(1))){let d=2,g=d;for(;d<o&&!ci(r.charCodeAt(d));)d++;if(d<o&&d!==g){const _=r.slice(g,d);for(g=d;d<o&&ci(r.charCodeAt(d));)d++;if(d<o&&d!==g){for(g=d;d<o&&!ci(r.charCodeAt(d));)d++;(d===o||d!==g)&&(l=`\\\\${_}\\${r.slice(g,d)}`,a=d)}}}else a=1;else Ef(h)&&r.charCodeAt(1)===kf&&(l=r.slice(0,2),a=2,o>2&&ci(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=lN(t,!i,"\\",ci),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(s){Fs(s,"path");const e=s.length;if(e===0)return".";let t=0,i,n=!1;const r=s.charCodeAt(0);if(e===1)return dO(r)?"\\":s;if(ci(r))if(n=!0,ci(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ci(s.charCodeAt(a));)a++;if(a<e&&a!==l){const c=s.slice(l,a);for(l=a;a<e&&ci(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ci(s.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${s.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${s.slice(l,a)}`,t=a)}}}else t=1;else Ef(r)&&s.charCodeAt(1)===kf&&(i=s.slice(0,2),t=2,e>2&&ci(s.charCodeAt(2))&&(n=!0,t=3));let o=t<e?lN(s.slice(t),!n,"\\",ci):"";if(o.length===0&&!n&&(o="."),o.length>0&&ci(s.charCodeAt(e-1))&&(o+="\\"),!n&&i===void 0&&s.includes(":")){if(o.length>=2&&Ef(o.charCodeAt(0))&&o.charCodeAt(1)===kf)return`.\\${o}`;let a=s.indexOf(":");do if(a===e-1||ci(s.charCodeAt(a+1)))return`.\\${o}`;while((a=s.indexOf(":",a+1))!==-1)}return i===void 0?n?`\\${o}`:o:n?`${i}\\${o}`:`${i}${o}`},isAbsolute(s){Fs(s,"path");const e=s.length;if(e===0)return!1;const t=s.charCodeAt(0);return ci(t)||e>2&&Ef(t)&&s.charCodeAt(1)===kf&&ci(s.charCodeAt(2))},join(...s){if(s.length===0)return".";let e,t;for(let r=0;r<s.length;++r){const o=s[r];Fs(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,n=0;if(typeof t=="string"&&ci(t.charCodeAt(0))){++n;const r=t.length;r>1&&ci(t.charCodeAt(1))&&(++n,r>2&&(ci(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&ci(e.charCodeAt(n));)n++;n>=2&&(e=`\\${e.slice(n)}`)}return Ma.normalize(e)},relative(s,e){if(Fs(s,"from"),Fs(e,"to"),s===e)return"";const t=Ma.resolve(s),i=Ma.resolve(e);if(t===i||(s=t.toLowerCase(),e=i.toLowerCase(),s===e))return"";if(t.length!==s.length||i.length!==e.length){const b=t.split("\\"),C=i.split("\\");b[b.length-1]===""&&b.pop(),C[C.length-1]===""&&C.pop();const S=b.length,E=C.length,x=S<E?S:E;let T;for(T=0;T<x&&b[T].toLowerCase()===C[T].toLowerCase();T++);return T===0?i:T===x?E>x?C.slice(T).join("\\"):S>x?"..\\".repeat(S-1-T)+"..":"":"..\\".repeat(S-T)+C.slice(T).join("\\")}let n=0;for(;n<s.length&&s.charCodeAt(n)===fl;)n++;let r=s.length;for(;r-1>n&&s.charCodeAt(r-1)===fl;)r--;const o=r-n;let a=0;for(;a<e.length&&e.charCodeAt(a)===fl;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===fl;)l--;const c=l-a,h=o<c?o:c;let d=-1,g=0;for(;g<h;g++){const b=s.charCodeAt(n+g);if(b!==e.charCodeAt(a+g))break;b===fl&&(d=g)}if(g!==h){if(d===-1)return i}else{if(c>h){if(e.charCodeAt(a+g)===fl)return i.slice(a+g+1);if(g===2)return i.slice(a+g)}o>h&&(s.charCodeAt(n+g)===fl?d=g:g===2&&(d=3)),d===-1&&(d=0)}let _="";for(g=n+d+1;g<=r;++g)(g===r||s.charCodeAt(g)===fl)&&(_+=_.length===0?"..":"\\..");return a+=d,_.length>0?`${_}${i.slice(a,l)}`:(i.charCodeAt(a)===fl&&++a,i.slice(a,l))},toNamespacedPath(s){if(typeof s!="string"||s.length===0)return s;const e=Ma.resolve(s);if(e.length<=2)return s;if(e.charCodeAt(0)===fl){if(e.charCodeAt(1)===fl){const t=e.charCodeAt(2);if(t!==uie&&t!==O1)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Ef(e.charCodeAt(0))&&e.charCodeAt(1)===kf&&e.charCodeAt(2)===fl)return`\\\\?\\${e}`;return e},dirname(s){Fs(s,"path");const e=s.length;if(e===0)return".";let t=-1,i=0;const n=s.charCodeAt(0);if(e===1)return ci(n)?s:".";if(ci(n)){if(t=i=1,ci(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ci(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&ci(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ci(s.charCodeAt(a));)a++;if(a===e)return s;a!==l&&(t=i=a+1)}}}}else Ef(n)&&s.charCodeAt(1)===kf&&(t=e>2&&ci(s.charCodeAt(2))?3:2,i=t);let r=-1,o=!0;for(let a=e-1;a>=i;--a)if(ci(s.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return s.slice(0,r)},basename(s,e){e!==void 0&&Fs(e,"suffix"),Fs(s,"path");let t=0,i=-1,n=!0,r;if(s.length>=2&&Ef(s.charCodeAt(0))&&s.charCodeAt(1)===kf&&(t=2),e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let o=e.length-1,a=-1;for(r=s.length-1;r>=t;--r){const l=s.charCodeAt(r);if(ci(l)){if(!n){t=r+1;break}}else a===-1&&(n=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=s.length),s.slice(t,i)}for(r=s.length-1;r>=t;--r)if(ci(s.charCodeAt(r))){if(!n){t=r+1;break}}else i===-1&&(n=!1,i=r+1);return i===-1?"":s.slice(t,i)},extname(s){Fs(s,"path");let e=0,t=-1,i=0,n=-1,r=!0,o=0;s.length>=2&&s.charCodeAt(1)===kf&&Ef(s.charCodeAt(0))&&(e=i=2);for(let a=s.length-1;a>=e;--a){const l=s.charCodeAt(a);if(ci(l)){if(!r){i=a+1;break}continue}n===-1&&(r=!1,n=a+1),l===O1?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===i+1?"":s.slice(t,n)},format:jj.bind(null,"\\"),parse(s){Fs(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.length;let i=0,n=s.charCodeAt(0);if(t===1)return ci(n)?(e.root=e.dir=s,e):(e.base=e.name=s,e);if(ci(n)){if(i=1,ci(s.charCodeAt(1))){let d=2,g=d;for(;d<t&&!ci(s.charCodeAt(d));)d++;if(d<t&&d!==g){for(g=d;d<t&&ci(s.charCodeAt(d));)d++;if(d<t&&d!==g){for(g=d;d<t&&!ci(s.charCodeAt(d));)d++;d===t?i=d:d!==g&&(i=d+1)}}}}else if(Ef(n)&&s.charCodeAt(1)===kf){if(t<=2)return e.root=e.dir=s,e;if(i=2,ci(s.charCodeAt(2))){if(t===3)return e.root=e.dir=s,e;i=3}}i>0&&(e.root=s.slice(0,i));let r=-1,o=i,a=-1,l=!0,c=s.length-1,h=0;for(;c>=i;--c){if(n=s.charCodeAt(c),ci(n)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===O1?r===-1?r=c:h!==1&&(h=1):r!==-1&&(h=-1)}return a!==-1&&(r===-1||h===0||h===1&&r===a-1&&r===o+1?e.base=e.name=s.slice(o,a):(e.name=s.slice(o,r),e.base=s.slice(o,a),e.ext=s.slice(r,a))),o>0&&o!==i?e.dir=s.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},fie=(()=>{if(pp){const s=/\\/g;return()=>{const e=aN().replace(s,"/");return e.slice(e.indexOf("/"))}}return()=>aN()})(),ts={resolve(...s){let e="",t=!1;for(let i=s.length-1;i>=0&&!t;i--){const n=s[i];Fs(n,`paths[${i}]`),n.length!==0&&(e=`${n}/${e}`,t=n.charCodeAt(0)===Zr)}if(!t){const i=fie();e=`${i}/${e}`,t=i.charCodeAt(0)===Zr}return e=lN(e,!t,"/",dO),t?`/${e}`:e.length>0?e:"."},normalize(s){if(Fs(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===Zr,t=s.charCodeAt(s.length-1)===Zr;return s=lN(s,!e,"/",dO),s.length===0?e?"/":t?"./":".":(t&&(s+="/"),e?`/${s}`:s)},isAbsolute(s){return Fs(s,"path"),s.length>0&&s.charCodeAt(0)===Zr},join(...s){if(s.length===0)return".";const e=[];for(let t=0;t<s.length;++t){const i=s[t];Fs(i,"path"),i.length>0&&e.push(i)}return e.length===0?".":ts.normalize(e.join("/"))},relative(s,e){if(Fs(s,"from"),Fs(e,"to"),s===e||(s=ts.resolve(s),e=ts.resolve(e),s===e))return"";const t=1,i=s.length,n=i-t,r=1,o=e.length-r,a=n<o?n:o;let l=-1,c=0;for(;c<a;c++){const d=s.charCodeAt(t+c);if(d!==e.charCodeAt(r+c))break;d===Zr&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===Zr)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else n>a&&(s.charCodeAt(t+c)===Zr?l=c:c===0&&(l=0));let h="";for(c=t+l+1;c<=i;++c)(c===i||s.charCodeAt(c)===Zr)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(r+l)}`},toNamespacedPath(s){return s},dirname(s){if(Fs(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===Zr;let t=-1,i=!0;for(let n=s.length-1;n>=1;--n)if(s.charCodeAt(n)===Zr){if(!i){t=n;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":s.slice(0,t)},basename(s,e){e!==void 0&&Fs(e,"suffix"),Fs(s,"path");let t=0,i=-1,n=!0,r;if(e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let o=e.length-1,a=-1;for(r=s.length-1;r>=0;--r){const l=s.charCodeAt(r);if(l===Zr){if(!n){t=r+1;break}}else a===-1&&(n=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=s.length),s.slice(t,i)}for(r=s.length-1;r>=0;--r)if(s.charCodeAt(r)===Zr){if(!n){t=r+1;break}}else i===-1&&(n=!1,i=r+1);return i===-1?"":s.slice(t,i)},extname(s){Fs(s,"path");let e=-1,t=0,i=-1,n=!0,r=0;for(let o=s.length-1;o>=0;--o){const a=s[o];if(a==="/"){if(!n){t=o+1;break}continue}i===-1&&(n=!1,i=o+1),a==="."?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||i===-1||r===0||r===1&&e===i-1&&e===t+1?"":s.slice(e,i)},format:jj.bind(null,"/"),parse(s){Fs(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.charCodeAt(0)===Zr;let i;t?(e.root="/",i=1):i=0;let n=-1,r=0,o=-1,a=!0,l=s.length-1,c=0;for(;l>=i;--l){const h=s.charCodeAt(l);if(h===Zr){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),h===O1?n===-1?n=l:c!==1&&(c=1):n!==-1&&(c=-1)}if(o!==-1){const h=r===0&&t?1:r;n===-1||c===0||c===1&&n===o-1&&n===r+1?e.base=e.name=s.slice(h,o):(e.name=s.slice(h,n),e.base=s.slice(h,o),e.ext=s.slice(n,o))}return r>0?e.dir=s.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ts.win32=Ma.win32=Ma;ts.posix=Ma.posix=ts;const Gj=pp?Ma.normalize:ts.normalize,gie=pp?Ma.resolve:ts.resolve,mie=pp?Ma.relative:ts.relative,pie=pp?Ma.dirname:ts.dirname,Kj=pp?Ma.basename:ts.basename,_ie=pp?Ma.extname:ts.extname,Ym=pp?Ma.sep:ts.sep,bie=/^\w[\w\d+.-]*$/,vie=/^\//,wie=/^\/\//;function Cie(s,e){if(!s.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${s.authority}", path: "${s.path}", query: "${s.query}", fragment: "${s.fragment}"}`);if(s.scheme&&!bie.test(s.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(s.path){if(s.authority){if(!vie.test(s.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(wie.test(s.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function yie(s,e){return!s&&!e?"file":s}function Sie(s,e){switch(s){case"https":case"http":case"file":e?e[0]!==qu&&(e=qu+e):e=qu;break}return e}const Fn="",qu="/",Lie=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Ot{static isUri(e){return e instanceof Ot?!0:!e||typeof e!="object"?!1:typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function"}constructor(e,t,i,n,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||Fn,this.authority=e.authority||Fn,this.path=e.path||Fn,this.query=e.query||Fn,this.fragment=e.fragment||Fn):(this.scheme=yie(e,o),this.authority=t||Fn,this.path=Sie(this.scheme,i||Fn),this.query=n||Fn,this.fragment=r||Fn,Cie(this,o))}get fsPath(){return cN(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Fn),i===void 0?i=this.authority:i===null&&(i=Fn),n===void 0?n=this.path:n===null&&(n=Fn),r===void 0?r=this.query:r===null&&(r=Fn),o===void 0?o=this.fragment:o===null&&(o=Fn),t===this.scheme&&i===this.authority&&n===this.path&&r===this.query&&o===this.fragment?this:new _v(t,i,n,r,o)}static parse(e,t=!1){const i=Lie.exec(e);return i?new _v(i[2]||Fn,dT(i[4]||Fn),dT(i[5]||Fn),dT(i[7]||Fn),dT(i[9]||Fn),t):new _v(Fn,Fn,Fn,Fn,Fn)}static file(e){let t=Fn;if(ia&&(e=e.replace(/\\/g,qu)),e[0]===qu&&e[1]===qu){const i=e.indexOf(qu,2);i===-1?(t=e.substring(2),e=qu):(t=e.substring(2,i),e=e.substring(i)||qu)}return new _v("file",t,e,Fn,Fn)}static from(e,t){return new _v(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return ia&&e.scheme==="file"?i=Ot.file(Ma.join(cN(e,!0),...t)).path:i=ts.join(e.path,...t),e.with({path:i})}toString(e=!1){return fO(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Ot)return e;{const t=new _v(e);return t._formatted=e.external??null,t._fsPath=e._sep===Yj?e.fsPath??null:null,t}}else return e}}const Yj=ia?1:void 0;class _v extends Ot{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=cN(this,!1)),this._fsPath}toString(e=!1){return e?fO(this,!0):(this._formatted||(this._formatted=fO(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Yj),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const Zj={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function wV(s,e,t){let i,n=-1;for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)n!==-1&&(i+=encodeURIComponent(s.substring(n,r)),n=-1),i!==void 0&&(i+=s.charAt(r));else{i===void 0&&(i=s.substr(0,r));const a=Zj[o];a!==void 0?(n!==-1&&(i+=encodeURIComponent(s.substring(n,r)),n=-1),i+=a):n===-1&&(n=r)}}return n!==-1&&(i+=encodeURIComponent(s.substring(n))),i!==void 0?i:s}function xie(s){let e;for(let t=0;t<s.length;t++){const i=s.charCodeAt(t);i===35||i===63?(e===void 0&&(e=s.substr(0,t)),e+=Zj[i]):e!==void 0&&(e+=s[t])}return e!==void 0?e:s}function cN(s,e){let t;return s.authority&&s.path.length>1&&s.scheme==="file"?t=`//${s.authority}${s.path}`:s.path.charCodeAt(0)===47&&(s.path.charCodeAt(1)>=65&&s.path.charCodeAt(1)<=90||s.path.charCodeAt(1)>=97&&s.path.charCodeAt(1)<=122)&&s.path.charCodeAt(2)===58?e?t=s.path.substr(1):t=s.path[1].toLowerCase()+s.path.substr(2):t=s.path,ia&&(t=t.replace(/\//g,"\\")),t}function fO(s,e){const t=e?xie:wV;let i="",{scheme:n,authority:r,path:o,query:a,fragment:l}=s;if(n&&(i+=n,i+=":"),(r||n==="file")&&(i+=qu,i+=qu),r){let c=r.indexOf("@");if(c!==-1){const h=r.substr(0,c);r=r.substr(c+1),c=h.lastIndexOf(":"),c===-1?i+=t(h,!1,!1):(i+=t(h.substr(0,c),!1,!1),i+=":",i+=t(h.substr(c+1),!1,!0)),i+="@"}r=r.toLowerCase(),c=r.lastIndexOf(":"),c===-1?i+=t(r,!1,!0):(i+=t(r.substr(0,c),!1,!0),i+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}i+=t(o,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:wV(l,!1,!1)),i}function Xj(s){try{return decodeURIComponent(s)}catch{return s.length>3?s.substr(0,3)+Xj(s.substr(3)):s}}const CV=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function dT(s){return s.match(CV)?s.replace(CV,e=>Xj(e)):s}class se{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new se(e,t)}delta(e=0,t=0){return this.with(Math.max(1,this.lineNumber+e),Math.max(1,this.column+t))}equals(e){return se.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return se.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return se.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,n=t.lineNumber|0;if(i===n){const r=e.column|0,o=t.column|0;return r-o}return i-n}clone(){return new se(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new se(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}let ie=class ir{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return ir.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return ir.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return ir.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return ir.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return ir.plusRange(this,e)}static plusRange(e,t){let i,n,r,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new ir(i,n,r,o)}intersectRanges(e){return ir.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,h=t.endColumn;return i<a?(i=a,n=l):i===a&&(n=Math.max(n,l)),r>c?(r=c,o=h):r===c&&(o=Math.min(o,h)),i>r||i===r&&n>o?null:new ir(i,n,r,o)}equalsRange(e){return ir.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return ir.getEndPosition(this)}static getEndPosition(e){return new se(e.endLineNumber,e.endColumn)}getStartPosition(){return ir.getStartPosition(this)}static getStartPosition(e){return new se(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new ir(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new ir(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return ir.collapseToStart(this)}static collapseToStart(e){return new ir(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return ir.collapseToEnd(this)}static collapseToEnd(e){return new ir(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new ir(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,t=e){return new ir(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new ir(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static areOnlyIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber-1||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn-1||t.endLineNumber<e.startLineNumber-1||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn-1)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,h=t.endLineNumber|0;if(c===h){const d=e.endColumn|0,g=t.endColumn|0;return d-g}return c-h}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},Yt=class qc extends ie{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return qc.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new qc(this.startLineNumber,this.startColumn,e,t):new qc(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new se(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new se(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new qc(e,t,this.endLineNumber,this.endColumn):new qc(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new qc(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new qc(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new qc(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new qc(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,n,r){return r===0?new qc(e,t,i,n):new qc(i,n,e,t)}};const gO=Object.create(null);function I(s,e){if(rr(e)){const t=gO[e];if(t===void 0)throw new Error(`${s} references an unknown codicon: ${e}`);e=t}return gO[s]=e,{id:s}}function Qj(){return gO}const kie={add:I("add",6e4),plus:I("plus",6e4),gistNew:I("gist-new",6e4),repoCreate:I("repo-create",6e4),lightbulb:I("lightbulb",60001),lightBulb:I("light-bulb",60001),repo:I("repo",60002),repoDelete:I("repo-delete",60002),gistFork:I("gist-fork",60003),repoForked:I("repo-forked",60003),gitPullRequest:I("git-pull-request",60004),gitPullRequestAbandoned:I("git-pull-request-abandoned",60004),recordKeys:I("record-keys",60005),keyboard:I("keyboard",60005),tag:I("tag",60006),gitPullRequestLabel:I("git-pull-request-label",60006),tagAdd:I("tag-add",60006),tagRemove:I("tag-remove",60006),person:I("person",60007),personFollow:I("person-follow",60007),personOutline:I("person-outline",60007),personFilled:I("person-filled",60007),gitBranch:I("git-branch",60008),gitBranchCreate:I("git-branch-create",60008),gitBranchDelete:I("git-branch-delete",60008),sourceControl:I("source-control",60008),mirror:I("mirror",60009),mirrorPublic:I("mirror-public",60009),star:I("star",60010),starAdd:I("star-add",60010),starDelete:I("star-delete",60010),starEmpty:I("star-empty",60010),comment:I("comment",60011),commentAdd:I("comment-add",60011),alert:I("alert",60012),warning:I("warning",60012),search:I("search",60013),searchSave:I("search-save",60013),logOut:I("log-out",60014),signOut:I("sign-out",60014),logIn:I("log-in",60015),signIn:I("sign-in",60015),eye:I("eye",60016),eyeUnwatch:I("eye-unwatch",60016),eyeWatch:I("eye-watch",60016),circleFilled:I("circle-filled",60017),primitiveDot:I("primitive-dot",60017),closeDirty:I("close-dirty",60017),debugBreakpoint:I("debug-breakpoint",60017),debugBreakpointDisabled:I("debug-breakpoint-disabled",60017),debugHint:I("debug-hint",60017),terminalDecorationSuccess:I("terminal-decoration-success",60017),primitiveSquare:I("primitive-square",60018),edit:I("edit",60019),pencil:I("pencil",60019),info:I("info",60020),issueOpened:I("issue-opened",60020),gistPrivate:I("gist-private",60021),gitForkPrivate:I("git-fork-private",60021),lock:I("lock",60021),mirrorPrivate:I("mirror-private",60021),close:I("close",60022),removeClose:I("remove-close",60022),x:I("x",60022),repoSync:I("repo-sync",60023),sync:I("sync",60023),clone:I("clone",60024),desktopDownload:I("desktop-download",60024),beaker:I("beaker",60025),microscope:I("microscope",60025),vm:I("vm",60026),deviceDesktop:I("device-desktop",60026),file:I("file",60027),fileText:I("file-text",60027),more:I("more",60028),ellipsis:I("ellipsis",60028),kebabHorizontal:I("kebab-horizontal",60028),mailReply:I("mail-reply",60029),reply:I("reply",60029),organization:I("organization",60030),organizationFilled:I("organization-filled",60030),organizationOutline:I("organization-outline",60030),newFile:I("new-file",60031),fileAdd:I("file-add",60031),newFolder:I("new-folder",60032),fileDirectoryCreate:I("file-directory-create",60032),trash:I("trash",60033),trashcan:I("trashcan",60033),history:I("history",60034),clock:I("clock",60034),folder:I("folder",60035),fileDirectory:I("file-directory",60035),symbolFolder:I("symbol-folder",60035),logoGithub:I("logo-github",60036),markGithub:I("mark-github",60036),github:I("github",60036),terminal:I("terminal",60037),console:I("console",60037),repl:I("repl",60037),zap:I("zap",60038),symbolEvent:I("symbol-event",60038),error:I("error",60039),stop:I("stop",60039),variable:I("variable",60040),symbolVariable:I("symbol-variable",60040),array:I("array",60042),symbolArray:I("symbol-array",60042),symbolModule:I("symbol-module",60043),symbolPackage:I("symbol-package",60043),symbolNamespace:I("symbol-namespace",60043),symbolObject:I("symbol-object",60043),symbolMethod:I("symbol-method",60044),symbolFunction:I("symbol-function",60044),symbolConstructor:I("symbol-constructor",60044),symbolBoolean:I("symbol-boolean",60047),symbolNull:I("symbol-null",60047),symbolNumeric:I("symbol-numeric",60048),symbolNumber:I("symbol-number",60048),symbolStructure:I("symbol-structure",60049),symbolStruct:I("symbol-struct",60049),symbolParameter:I("symbol-parameter",60050),symbolTypeParameter:I("symbol-type-parameter",60050),symbolKey:I("symbol-key",60051),symbolText:I("symbol-text",60051),symbolReference:I("symbol-reference",60052),goToFile:I("go-to-file",60052),symbolEnum:I("symbol-enum",60053),symbolValue:I("symbol-value",60053),symbolRuler:I("symbol-ruler",60054),symbolUnit:I("symbol-unit",60054),activateBreakpoints:I("activate-breakpoints",60055),archive:I("archive",60056),arrowBoth:I("arrow-both",60057),arrowDown:I("arrow-down",60058),arrowLeft:I("arrow-left",60059),arrowRight:I("arrow-right",60060),arrowSmallDown:I("arrow-small-down",60061),arrowSmallLeft:I("arrow-small-left",60062),arrowSmallRight:I("arrow-small-right",60063),arrowSmallUp:I("arrow-small-up",60064),arrowUp:I("arrow-up",60065),bell:I("bell",60066),bold:I("bold",60067),book:I("book",60068),bookmark:I("bookmark",60069),debugBreakpointConditionalUnverified:I("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:I("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:I("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:I("debug-breakpoint-data-unverified",60072),debugBreakpointData:I("debug-breakpoint-data",60073),debugBreakpointDataDisabled:I("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:I("debug-breakpoint-log-unverified",60074),debugBreakpointLog:I("debug-breakpoint-log",60075),debugBreakpointLogDisabled:I("debug-breakpoint-log-disabled",60075),briefcase:I("briefcase",60076),broadcast:I("broadcast",60077),browser:I("browser",60078),bug:I("bug",60079),calendar:I("calendar",60080),caseSensitive:I("case-sensitive",60081),check:I("check",60082),checklist:I("checklist",60083),chevronDown:I("chevron-down",60084),chevronLeft:I("chevron-left",60085),chevronRight:I("chevron-right",60086),chevronUp:I("chevron-up",60087),chromeClose:I("chrome-close",60088),chromeMaximize:I("chrome-maximize",60089),chromeMinimize:I("chrome-minimize",60090),chromeRestore:I("chrome-restore",60091),circleOutline:I("circle-outline",60092),circle:I("circle",60092),debugBreakpointUnverified:I("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:I("terminal-decoration-incomplete",60092),circleSlash:I("circle-slash",60093),circuitBoard:I("circuit-board",60094),clearAll:I("clear-all",60095),clippy:I("clippy",60096),closeAll:I("close-all",60097),cloudDownload:I("cloud-download",60098),cloudUpload:I("cloud-upload",60099),code:I("code",60100),collapseAll:I("collapse-all",60101),colorMode:I("color-mode",60102),commentDiscussion:I("comment-discussion",60103),creditCard:I("credit-card",60105),dash:I("dash",60108),dashboard:I("dashboard",60109),database:I("database",60110),debugContinue:I("debug-continue",60111),debugDisconnect:I("debug-disconnect",60112),debugPause:I("debug-pause",60113),debugRestart:I("debug-restart",60114),debugStart:I("debug-start",60115),debugStepInto:I("debug-step-into",60116),debugStepOut:I("debug-step-out",60117),debugStepOver:I("debug-step-over",60118),debugStop:I("debug-stop",60119),debug:I("debug",60120),deviceCameraVideo:I("device-camera-video",60121),deviceCamera:I("device-camera",60122),deviceMobile:I("device-mobile",60123),diffAdded:I("diff-added",60124),diffIgnored:I("diff-ignored",60125),diffModified:I("diff-modified",60126),diffRemoved:I("diff-removed",60127),diffRenamed:I("diff-renamed",60128),diff:I("diff",60129),diffSidebyside:I("diff-sidebyside",60129),discard:I("discard",60130),editorLayout:I("editor-layout",60131),emptyWindow:I("empty-window",60132),exclude:I("exclude",60133),extensions:I("extensions",60134),eyeClosed:I("eye-closed",60135),fileBinary:I("file-binary",60136),fileCode:I("file-code",60137),fileMedia:I("file-media",60138),filePdf:I("file-pdf",60139),fileSubmodule:I("file-submodule",60140),fileSymlinkDirectory:I("file-symlink-directory",60141),fileSymlinkFile:I("file-symlink-file",60142),fileZip:I("file-zip",60143),files:I("files",60144),filter:I("filter",60145),flame:I("flame",60146),foldDown:I("fold-down",60147),foldUp:I("fold-up",60148),fold:I("fold",60149),folderActive:I("folder-active",60150),folderOpened:I("folder-opened",60151),gear:I("gear",60152),gift:I("gift",60153),gistSecret:I("gist-secret",60154),gist:I("gist",60155),gitCommit:I("git-commit",60156),gitCompare:I("git-compare",60157),compareChanges:I("compare-changes",60157),gitMerge:I("git-merge",60158),githubAction:I("github-action",60159),githubAlt:I("github-alt",60160),globe:I("globe",60161),grabber:I("grabber",60162),graph:I("graph",60163),gripper:I("gripper",60164),heart:I("heart",60165),home:I("home",60166),horizontalRule:I("horizontal-rule",60167),hubot:I("hubot",60168),inbox:I("inbox",60169),issueReopened:I("issue-reopened",60171),issues:I("issues",60172),italic:I("italic",60173),jersey:I("jersey",60174),json:I("json",60175),kebabVertical:I("kebab-vertical",60176),key:I("key",60177),law:I("law",60178),lightbulbAutofix:I("lightbulb-autofix",60179),linkExternal:I("link-external",60180),link:I("link",60181),listOrdered:I("list-ordered",60182),listUnordered:I("list-unordered",60183),liveShare:I("live-share",60184),loading:I("loading",60185),location:I("location",60186),mailRead:I("mail-read",60187),mail:I("mail",60188),markdown:I("markdown",60189),megaphone:I("megaphone",60190),mention:I("mention",60191),milestone:I("milestone",60192),gitPullRequestMilestone:I("git-pull-request-milestone",60192),mortarBoard:I("mortar-board",60193),move:I("move",60194),multipleWindows:I("multiple-windows",60195),mute:I("mute",60196),noNewline:I("no-newline",60197),note:I("note",60198),octoface:I("octoface",60199),openPreview:I("open-preview",60200),package:I("package",60201),paintcan:I("paintcan",60202),pin:I("pin",60203),play:I("play",60204),run:I("run",60204),plug:I("plug",60205),preserveCase:I("preserve-case",60206),preview:I("preview",60207),project:I("project",60208),pulse:I("pulse",60209),question:I("question",60210),quote:I("quote",60211),radioTower:I("radio-tower",60212),reactions:I("reactions",60213),references:I("references",60214),refresh:I("refresh",60215),regex:I("regex",60216),remoteExplorer:I("remote-explorer",60217),remote:I("remote",60218),remove:I("remove",60219),replaceAll:I("replace-all",60220),replace:I("replace",60221),repoClone:I("repo-clone",60222),repoForcePush:I("repo-force-push",60223),repoPull:I("repo-pull",60224),repoPush:I("repo-push",60225),report:I("report",60226),requestChanges:I("request-changes",60227),rocket:I("rocket",60228),rootFolderOpened:I("root-folder-opened",60229),rootFolder:I("root-folder",60230),rss:I("rss",60231),ruby:I("ruby",60232),saveAll:I("save-all",60233),saveAs:I("save-as",60234),save:I("save",60235),screenFull:I("screen-full",60236),screenNormal:I("screen-normal",60237),searchStop:I("search-stop",60238),server:I("server",60240),settingsGear:I("settings-gear",60241),settings:I("settings",60242),shield:I("shield",60243),smiley:I("smiley",60244),sortPrecedence:I("sort-precedence",60245),splitHorizontal:I("split-horizontal",60246),splitVertical:I("split-vertical",60247),squirrel:I("squirrel",60248),starFull:I("star-full",60249),starHalf:I("star-half",60250),symbolClass:I("symbol-class",60251),symbolColor:I("symbol-color",60252),symbolConstant:I("symbol-constant",60253),symbolEnumMember:I("symbol-enum-member",60254),symbolField:I("symbol-field",60255),symbolFile:I("symbol-file",60256),symbolInterface:I("symbol-interface",60257),symbolKeyword:I("symbol-keyword",60258),symbolMisc:I("symbol-misc",60259),symbolOperator:I("symbol-operator",60260),symbolProperty:I("symbol-property",60261),wrench:I("wrench",60261),wrenchSubaction:I("wrench-subaction",60261),symbolSnippet:I("symbol-snippet",60262),tasklist:I("tasklist",60263),telescope:I("telescope",60264),textSize:I("text-size",60265),threeBars:I("three-bars",60266),thumbsdown:I("thumbsdown",60267),thumbsup:I("thumbsup",60268),tools:I("tools",60269),triangleDown:I("triangle-down",60270),triangleLeft:I("triangle-left",60271),triangleRight:I("triangle-right",60272),triangleUp:I("triangle-up",60273),twitter:I("twitter",60274),unfold:I("unfold",60275),unlock:I("unlock",60276),unmute:I("unmute",60277),unverified:I("unverified",60278),verified:I("verified",60279),versions:I("versions",60280),vmActive:I("vm-active",60281),vmOutline:I("vm-outline",60282),vmRunning:I("vm-running",60283),watch:I("watch",60284),whitespace:I("whitespace",60285),wholeWord:I("whole-word",60286),window:I("window",60287),wordWrap:I("word-wrap",60288),zoomIn:I("zoom-in",60289),zoomOut:I("zoom-out",60290),listFilter:I("list-filter",60291),listFlat:I("list-flat",60292),listSelection:I("list-selection",60293),selection:I("selection",60293),listTree:I("list-tree",60294),debugBreakpointFunctionUnverified:I("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:I("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:I("debug-breakpoint-function-disabled",60296),debugStackframeActive:I("debug-stackframe-active",60297),circleSmallFilled:I("circle-small-filled",60298),debugStackframeDot:I("debug-stackframe-dot",60298),terminalDecorationMark:I("terminal-decoration-mark",60298),debugStackframe:I("debug-stackframe",60299),debugStackframeFocused:I("debug-stackframe-focused",60299),debugBreakpointUnsupported:I("debug-breakpoint-unsupported",60300),symbolString:I("symbol-string",60301),debugReverseContinue:I("debug-reverse-continue",60302),debugStepBack:I("debug-step-back",60303),debugRestartFrame:I("debug-restart-frame",60304),debugAlt:I("debug-alt",60305),callIncoming:I("call-incoming",60306),callOutgoing:I("call-outgoing",60307),menu:I("menu",60308),expandAll:I("expand-all",60309),feedback:I("feedback",60310),gitPullRequestReviewer:I("git-pull-request-reviewer",60310),groupByRefType:I("group-by-ref-type",60311),ungroupByRefType:I("ungroup-by-ref-type",60312),account:I("account",60313),gitPullRequestAssignee:I("git-pull-request-assignee",60313),bellDot:I("bell-dot",60314),debugConsole:I("debug-console",60315),library:I("library",60316),output:I("output",60317),runAll:I("run-all",60318),syncIgnored:I("sync-ignored",60319),pinned:I("pinned",60320),githubInverted:I("github-inverted",60321),serverProcess:I("server-process",60322),serverEnvironment:I("server-environment",60323),pass:I("pass",60324),issueClosed:I("issue-closed",60324),stopCircle:I("stop-circle",60325),playCircle:I("play-circle",60326),record:I("record",60327),debugAltSmall:I("debug-alt-small",60328),vmConnect:I("vm-connect",60329),cloud:I("cloud",60330),merge:I("merge",60331),export:I("export",60332),graphLeft:I("graph-left",60333),magnet:I("magnet",60334),notebook:I("notebook",60335),redo:I("redo",60336),checkAll:I("check-all",60337),pinnedDirty:I("pinned-dirty",60338),passFilled:I("pass-filled",60339),circleLargeFilled:I("circle-large-filled",60340),circleLarge:I("circle-large",60341),circleLargeOutline:I("circle-large-outline",60341),combine:I("combine",60342),gather:I("gather",60342),table:I("table",60343),variableGroup:I("variable-group",60344),typeHierarchy:I("type-hierarchy",60345),typeHierarchySub:I("type-hierarchy-sub",60346),typeHierarchySuper:I("type-hierarchy-super",60347),gitPullRequestCreate:I("git-pull-request-create",60348),runAbove:I("run-above",60349),runBelow:I("run-below",60350),notebookTemplate:I("notebook-template",60351),debugRerun:I("debug-rerun",60352),workspaceTrusted:I("workspace-trusted",60353),workspaceUntrusted:I("workspace-untrusted",60354),workspaceUnknown:I("workspace-unknown",60355),terminalCmd:I("terminal-cmd",60356),terminalDebian:I("terminal-debian",60357),terminalLinux:I("terminal-linux",60358),terminalPowershell:I("terminal-powershell",60359),terminalTmux:I("terminal-tmux",60360),terminalUbuntu:I("terminal-ubuntu",60361),terminalBash:I("terminal-bash",60362),arrowSwap:I("arrow-swap",60363),copy:I("copy",60364),personAdd:I("person-add",60365),filterFilled:I("filter-filled",60366),wand:I("wand",60367),debugLineByLine:I("debug-line-by-line",60368),inspect:I("inspect",60369),layers:I("layers",60370),layersDot:I("layers-dot",60371),layersActive:I("layers-active",60372),compass:I("compass",60373),compassDot:I("compass-dot",60374),compassActive:I("compass-active",60375),azure:I("azure",60376),issueDraft:I("issue-draft",60377),gitPullRequestClosed:I("git-pull-request-closed",60378),gitPullRequestDraft:I("git-pull-request-draft",60379),debugAll:I("debug-all",60380),debugCoverage:I("debug-coverage",60381),runErrors:I("run-errors",60382),folderLibrary:I("folder-library",60383),debugContinueSmall:I("debug-continue-small",60384),beakerStop:I("beaker-stop",60385),graphLine:I("graph-line",60386),graphScatter:I("graph-scatter",60387),pieChart:I("pie-chart",60388),bracket:I("bracket",60175),bracketDot:I("bracket-dot",60389),bracketError:I("bracket-error",60390),lockSmall:I("lock-small",60391),azureDevops:I("azure-devops",60392),verifiedFilled:I("verified-filled",60393),newline:I("newline",60394),layout:I("layout",60395),layoutActivitybarLeft:I("layout-activitybar-left",60396),layoutActivitybarRight:I("layout-activitybar-right",60397),layoutPanelLeft:I("layout-panel-left",60398),layoutPanelCenter:I("layout-panel-center",60399),layoutPanelJustify:I("layout-panel-justify",60400),layoutPanelRight:I("layout-panel-right",60401),layoutPanel:I("layout-panel",60402),layoutSidebarLeft:I("layout-sidebar-left",60403),layoutSidebarRight:I("layout-sidebar-right",60404),layoutStatusbar:I("layout-statusbar",60405),layoutMenubar:I("layout-menubar",60406),layoutCentered:I("layout-centered",60407),target:I("target",60408),indent:I("indent",60409),recordSmall:I("record-small",60410),errorSmall:I("error-small",60411),terminalDecorationError:I("terminal-decoration-error",60411),arrowCircleDown:I("arrow-circle-down",60412),arrowCircleLeft:I("arrow-circle-left",60413),arrowCircleRight:I("arrow-circle-right",60414),arrowCircleUp:I("arrow-circle-up",60415),layoutSidebarRightOff:I("layout-sidebar-right-off",60416),layoutPanelOff:I("layout-panel-off",60417),layoutSidebarLeftOff:I("layout-sidebar-left-off",60418),blank:I("blank",60419),heartFilled:I("heart-filled",60420),map:I("map",60421),mapHorizontal:I("map-horizontal",60421),foldHorizontal:I("fold-horizontal",60421),mapFilled:I("map-filled",60422),mapHorizontalFilled:I("map-horizontal-filled",60422),foldHorizontalFilled:I("fold-horizontal-filled",60422),circleSmall:I("circle-small",60423),bellSlash:I("bell-slash",60424),bellSlashDot:I("bell-slash-dot",60425),commentUnresolved:I("comment-unresolved",60426),gitPullRequestGoToChanges:I("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:I("git-pull-request-new-changes",60428),searchFuzzy:I("search-fuzzy",60429),commentDraft:I("comment-draft",60430),send:I("send",60431),sparkle:I("sparkle",60432),insert:I("insert",60433),mic:I("mic",60434),thumbsdownFilled:I("thumbsdown-filled",60435),thumbsupFilled:I("thumbsup-filled",60436),coffee:I("coffee",60437),snake:I("snake",60438),game:I("game",60439),vr:I("vr",60440),chip:I("chip",60441),piano:I("piano",60442),music:I("music",60443),micFilled:I("mic-filled",60444),repoFetch:I("repo-fetch",60445),copilot:I("copilot",60446),lightbulbSparkle:I("lightbulb-sparkle",60447),robot:I("robot",60448),sparkleFilled:I("sparkle-filled",60449),diffSingle:I("diff-single",60450),diffMultiple:I("diff-multiple",60451),surroundWith:I("surround-with",60452),share:I("share",60453),gitStash:I("git-stash",60454),gitStashApply:I("git-stash-apply",60455),gitStashPop:I("git-stash-pop",60456),vscode:I("vscode",60457),vscodeInsiders:I("vscode-insiders",60458),codeOss:I("code-oss",60459),runCoverage:I("run-coverage",60460),runAllCoverage:I("run-all-coverage",60461),coverage:I("coverage",60462),githubProject:I("github-project",60463),mapVertical:I("map-vertical",60464),foldVertical:I("fold-vertical",60464),mapVerticalFilled:I("map-vertical-filled",60465),foldVerticalFilled:I("fold-vertical-filled",60465),goToSearch:I("go-to-search",60466),percentage:I("percentage",60467),sortPercentage:I("sort-percentage",60467),attach:I("attach",60468),goToEditingSession:I("go-to-editing-session",60469),editSession:I("edit-session",60470),codeReview:I("code-review",60471),copilotWarning:I("copilot-warning",60472),python:I("python",60473),copilotLarge:I("copilot-large",60474),copilotWarningLarge:I("copilot-warning-large",60475),keyboardTab:I("keyboard-tab",60476),copilotBlocked:I("copilot-blocked",60477),copilotNotConnected:I("copilot-not-connected",60478),flag:I("flag",60479),lightbulbEmpty:I("lightbulb-empty",60480),symbolMethodArrow:I("symbol-method-arrow",60481),copilotUnavailable:I("copilot-unavailable",60482),repoPinned:I("repo-pinned",60483),keyboardTabAbove:I("keyboard-tab-above",60484),keyboardTabBelow:I("keyboard-tab-below",60485),gitPullRequestDone:I("git-pull-request-done",60486),mcp:I("mcp",60487),extensionsLarge:I("extensions-large",60488),layoutPanelDock:I("layout-panel-dock",60489),layoutSidebarLeftDock:I("layout-sidebar-left-dock",60490),layoutSidebarRightDock:I("layout-sidebar-right-dock",60491),copilotInProgress:I("copilot-in-progress",60492),copilotError:I("copilot-error",60493),copilotSuccess:I("copilot-success",60494),chatSparkle:I("chat-sparkle",60495),searchSparkle:I("search-sparkle",60496),editSparkle:I("edit-sparkle",60497),copilotSnooze:I("copilot-snooze",60498),sendToRemoteAgent:I("send-to-remote-agent",60499),commentDiscussionSparkle:I("comment-discussion-sparkle",60500),chatSparkleWarning:I("chat-sparkle-warning",60501),chatSparkleError:I("chat-sparkle-error",60502),collection:I("collection",60503),newCollection:I("new-collection",60504),thinking:I("thinking",60505)},Eie={dialogError:I("dialog-error","error"),dialogWarning:I("dialog-warning","warning"),dialogInfo:I("dialog-info","info"),dialogClose:I("dialog-close","close"),treeItemExpanded:I("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:I("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:I("tree-filter-on-type-off","list-selection"),treeFilterClear:I("tree-filter-clear","close"),treeItemLoading:I("tree-item-loading","loading"),menuSelection:I("menu-selection","check"),menuSubmenu:I("menu-submenu","chevron-right"),menuBarMore:I("menubar-more","more"),scrollbarButtonLeft:I("scrollbar-button-left","triangle-left"),scrollbarButtonRight:I("scrollbar-button-right","triangle-right"),scrollbarButtonUp:I("scrollbar-button-up","triangle-up"),scrollbarButtonDown:I("scrollbar-button-down","triangle-down"),toolBarMore:I("toolbar-more","more"),quickInputBack:I("quick-input-back","arrow-left"),dropDownButton:I("drop-down-button",60084),symbolCustomColor:I("symbol-customcolor",60252),exportIcon:I("export",60332),workspaceUnspecified:I("workspace-unspecified",60355),newLine:I("newline",60394),thumbsDownFilled:I("thumbsdown-filled",60435),thumbsUpFilled:I("thumbsup-filled",60436),gitFetch:I("git-fetch",60445),lightbulbSparkleAutofix:I("lightbulb-sparkle-autofix",60447),debugBreakpointPending:I("debug-breakpoint-pending",60377)},Ue={...kie,...Eie};let Tie=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new ne,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),lt(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();const i=new Die(this,e,t);return this._factories.set(e,i),lt(()=>{const n=this._factories.get(e);!n||n!==i||(this._factories.delete(e),n.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class Die extends pe{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let gx=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class eP{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class YA{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var yV;(function(s){s[s.Increase=0]="Increase",s[s.Decrease=1]="Decrease"})(yV||(yV={}));var SV;(function(s){const e=new Map;e.set(0,Ue.symbolMethod),e.set(1,Ue.symbolFunction),e.set(2,Ue.symbolConstructor),e.set(3,Ue.symbolField),e.set(4,Ue.symbolVariable),e.set(5,Ue.symbolClass),e.set(6,Ue.symbolStruct),e.set(7,Ue.symbolInterface),e.set(8,Ue.symbolModule),e.set(9,Ue.symbolProperty),e.set(10,Ue.symbolEvent),e.set(11,Ue.symbolOperator),e.set(12,Ue.symbolUnit),e.set(13,Ue.symbolValue),e.set(15,Ue.symbolEnum),e.set(14,Ue.symbolConstant),e.set(15,Ue.symbolEnum),e.set(16,Ue.symbolEnumMember),e.set(17,Ue.symbolKeyword),e.set(28,Ue.symbolSnippet),e.set(18,Ue.symbolText),e.set(19,Ue.symbolColor),e.set(20,Ue.symbolFile),e.set(21,Ue.symbolReference),e.set(22,Ue.symbolCustomColor),e.set(23,Ue.symbolFolder),e.set(24,Ue.symbolTypeParameter),e.set(25,Ue.account),e.set(26,Ue.issues),e.set(27,Ue.tools);function t(o){let a=e.get(o);return a||(console.info("No codicon found for CompletionItemKind "+o),a=Ue.symbolProperty),a}s.toIcon=t;function i(o){switch(o){case 0:return y(724,"Method");case 1:return y(725,"Function");case 2:return y(726,"Constructor");case 3:return y(727,"Field");case 4:return y(728,"Variable");case 5:return y(729,"Class");case 6:return y(730,"Struct");case 7:return y(731,"Interface");case 8:return y(732,"Module");case 9:return y(733,"Property");case 10:return y(734,"Event");case 11:return y(735,"Operator");case 12:return y(736,"Unit");case 13:return y(737,"Value");case 14:return y(738,"Constant");case 15:return y(739,"Enum");case 16:return y(740,"Enum Member");case 17:return y(741,"Keyword");case 18:return y(742,"Text");case 19:return y(743,"Color");case 20:return y(744,"File");case 21:return y(745,"Reference");case 22:return y(746,"Custom Color");case 23:return y(747,"Folder");case 24:return y(748,"Type Parameter");case 25:return y(749,"User");case 26:return y(750,"Issue");case 27:return y(751,"Tool");case 28:return y(752,"Snippet");default:return""}}s.toLabel=i;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",28),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26),n.set("tool",27);function r(o,a){let l=n.get(o);return typeof l>"u"&&!a&&(l=9),l}s.fromString=r})(SV||(SV={}));var LV;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(LV||(LV={}));class Nie{constructor(e,t,i,n){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=n}equals(e){return ie.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var xV;(function(s){s[s.Code=1]="Code",s[s.Label=2]="Label"})(xV||(xV={}));var kV;(function(s){s[s.Accepted=0]="Accepted",s[s.Rejected=1]="Rejected",s[s.Ignored=2]="Ignored"})(kV||(kV={}));var EV;(function(s){s[s.Automatic=0]="Automatic",s[s.PasteAs=1]="PasteAs"})(EV||(EV={}));var TV;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(TV||(TV={}));var DV;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(DV||(DV={}));y(753,"array"),y(754,"boolean"),y(755,"class"),y(756,"constant"),y(757,"constructor"),y(758,"enumeration"),y(759,"enumeration member"),y(760,"event"),y(761,"field"),y(762,"file"),y(763,"function"),y(764,"interface"),y(765,"key"),y(766,"method"),y(767,"module"),y(768,"namespace"),y(769,"null"),y(770,"number"),y(771,"object"),y(772,"operator"),y(773,"package"),y(774,"property"),y(775,"string"),y(776,"struct"),y(777,"type parameter"),y(778,"variable");var mO;(function(s){const e=new Map;e.set(0,Ue.symbolFile),e.set(1,Ue.symbolModule),e.set(2,Ue.symbolNamespace),e.set(3,Ue.symbolPackage),e.set(4,Ue.symbolClass),e.set(5,Ue.symbolMethod),e.set(6,Ue.symbolProperty),e.set(7,Ue.symbolField),e.set(8,Ue.symbolConstructor),e.set(9,Ue.symbolEnum),e.set(10,Ue.symbolInterface),e.set(11,Ue.symbolFunction),e.set(12,Ue.symbolVariable),e.set(13,Ue.symbolConstant),e.set(14,Ue.symbolString),e.set(15,Ue.symbolNumber),e.set(16,Ue.symbolBoolean),e.set(17,Ue.symbolArray),e.set(18,Ue.symbolObject),e.set(19,Ue.symbolKey),e.set(20,Ue.symbolNull),e.set(21,Ue.symbolEnumMember),e.set(22,Ue.symbolStruct),e.set(23,Ue.symbolEvent),e.set(24,Ue.symbolOperator),e.set(25,Ue.symbolTypeParameter);function t(r){let o=e.get(r);return o||(console.info("No codicon found for SymbolKind "+r),o=Ue.symbolProperty),o}s.toIcon=t;const i=new Map;i.set(0,20),i.set(1,8),i.set(2,8),i.set(3,8),i.set(4,5),i.set(5,0),i.set(6,9),i.set(7,3),i.set(8,2),i.set(9,15),i.set(10,7),i.set(11,1),i.set(12,4),i.set(13,14),i.set(14,18),i.set(15,13),i.set(16,13),i.set(17,13),i.set(18,13),i.set(19,17),i.set(20,13),i.set(21,16),i.set(22,6),i.set(23,10),i.set(24,11),i.set(25,24);function n(r){let o=i.get(r);return o===void 0&&(console.info("No completion kind found for SymbolKind "+r),o=20),o}s.toCompletionKind=n})(mO||(mO={}));const jc=class jc{static fromValue(e){switch(e){case"comment":return jc.Comment;case"imports":return jc.Imports;case"region":return jc.Region}return new jc(e)}constructor(e){this.value=e}};jc.Comment=new jc("comment"),jc.Imports=new jc("imports"),jc.Region=new jc("region");let pO=jc;var NV;(function(s){s[s.AIGenerated=1]="AIGenerated"})(NV||(NV={}));var IV;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(IV||(IV={}));var AV;(function(s){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}s.is=e})(AV||(AV={}));var RV;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(RV||(RV={}));class Iie{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const es=new Tie;var _O;(function(s){s[s.Unknown=0]="Unknown",s[s.Disabled=1]="Disabled",s[s.Enabled=2]="Enabled"})(_O||(_O={}));var bO;(function(s){s[s.Invoke=1]="Invoke",s[s.Auto=2]="Auto"})(bO||(bO={}));var vO;(function(s){s[s.None=0]="None",s[s.KeepWhitespace=1]="KeepWhitespace",s[s.InsertAsSnippet=4]="InsertAsSnippet"})(vO||(vO={}));var wO;(function(s){s[s.Method=0]="Method",s[s.Function=1]="Function",s[s.Constructor=2]="Constructor",s[s.Field=3]="Field",s[s.Variable=4]="Variable",s[s.Class=5]="Class",s[s.Struct=6]="Struct",s[s.Interface=7]="Interface",s[s.Module=8]="Module",s[s.Property=9]="Property",s[s.Event=10]="Event",s[s.Operator=11]="Operator",s[s.Unit=12]="Unit",s[s.Value=13]="Value",s[s.Constant=14]="Constant",s[s.Enum=15]="Enum",s[s.EnumMember=16]="EnumMember",s[s.Keyword=17]="Keyword",s[s.Text=18]="Text",s[s.Color=19]="Color",s[s.File=20]="File",s[s.Reference=21]="Reference",s[s.Customcolor=22]="Customcolor",s[s.Folder=23]="Folder",s[s.TypeParameter=24]="TypeParameter",s[s.User=25]="User",s[s.Issue=26]="Issue",s[s.Tool=27]="Tool",s[s.Snippet=28]="Snippet"})(wO||(wO={}));var CO;(function(s){s[s.Deprecated=1]="Deprecated"})(CO||(CO={}));var yO;(function(s){s[s.Invoke=0]="Invoke",s[s.TriggerCharacter=1]="TriggerCharacter",s[s.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(yO||(yO={}));var SO;(function(s){s[s.EXACT=0]="EXACT",s[s.ABOVE=1]="ABOVE",s[s.BELOW=2]="BELOW"})(SO||(SO={}));var LO;(function(s){s[s.NotSet=0]="NotSet",s[s.ContentFlush=1]="ContentFlush",s[s.RecoverFromMarkers=2]="RecoverFromMarkers",s[s.Explicit=3]="Explicit",s[s.Paste=4]="Paste",s[s.Undo=5]="Undo",s[s.Redo=6]="Redo"})(LO||(LO={}));var xO;(function(s){s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(xO||(xO={}));var kO;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(kO||(kO={}));var EO;(function(s){s[s.None=0]="None",s[s.Keep=1]="Keep",s[s.Brackets=2]="Brackets",s[s.Advanced=3]="Advanced",s[s.Full=4]="Full"})(EO||(EO={}));var TO;(function(s){s[s.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",s[s.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",s[s.accessibilitySupport=2]="accessibilitySupport",s[s.accessibilityPageSize=3]="accessibilityPageSize",s[s.allowOverflow=4]="allowOverflow",s[s.allowVariableLineHeights=5]="allowVariableLineHeights",s[s.allowVariableFonts=6]="allowVariableFonts",s[s.allowVariableFontsInAccessibilityMode=7]="allowVariableFontsInAccessibilityMode",s[s.ariaLabel=8]="ariaLabel",s[s.ariaRequired=9]="ariaRequired",s[s.autoClosingBrackets=10]="autoClosingBrackets",s[s.autoClosingComments=11]="autoClosingComments",s[s.screenReaderAnnounceInlineSuggestion=12]="screenReaderAnnounceInlineSuggestion",s[s.autoClosingDelete=13]="autoClosingDelete",s[s.autoClosingOvertype=14]="autoClosingOvertype",s[s.autoClosingQuotes=15]="autoClosingQuotes",s[s.autoIndent=16]="autoIndent",s[s.autoIndentOnPaste=17]="autoIndentOnPaste",s[s.autoIndentOnPasteWithinString=18]="autoIndentOnPasteWithinString",s[s.automaticLayout=19]="automaticLayout",s[s.autoSurround=20]="autoSurround",s[s.bracketPairColorization=21]="bracketPairColorization",s[s.guides=22]="guides",s[s.codeLens=23]="codeLens",s[s.codeLensFontFamily=24]="codeLensFontFamily",s[s.codeLensFontSize=25]="codeLensFontSize",s[s.colorDecorators=26]="colorDecorators",s[s.colorDecoratorsLimit=27]="colorDecoratorsLimit",s[s.columnSelection=28]="columnSelection",s[s.comments=29]="comments",s[s.contextmenu=30]="contextmenu",s[s.copyWithSyntaxHighlighting=31]="copyWithSyntaxHighlighting",s[s.cursorBlinking=32]="cursorBlinking",s[s.cursorSmoothCaretAnimation=33]="cursorSmoothCaretAnimation",s[s.cursorStyle=34]="cursorStyle",s[s.cursorSurroundingLines=35]="cursorSurroundingLines",s[s.cursorSurroundingLinesStyle=36]="cursorSurroundingLinesStyle",s[s.cursorWidth=37]="cursorWidth",s[s.cursorHeight=38]="cursorHeight",s[s.disableLayerHinting=39]="disableLayerHinting",s[s.disableMonospaceOptimizations=40]="disableMonospaceOptimizations",s[s.domReadOnly=41]="domReadOnly",s[s.dragAndDrop=42]="dragAndDrop",s[s.dropIntoEditor=43]="dropIntoEditor",s[s.editContext=44]="editContext",s[s.emptySelectionClipboard=45]="emptySelectionClipboard",s[s.experimentalGpuAcceleration=46]="experimentalGpuAcceleration",s[s.experimentalWhitespaceRendering=47]="experimentalWhitespaceRendering",s[s.extraEditorClassName=48]="extraEditorClassName",s[s.fastScrollSensitivity=49]="fastScrollSensitivity",s[s.find=50]="find",s[s.fixedOverflowWidgets=51]="fixedOverflowWidgets",s[s.folding=52]="folding",s[s.foldingStrategy=53]="foldingStrategy",s[s.foldingHighlight=54]="foldingHighlight",s[s.foldingImportsByDefault=55]="foldingImportsByDefault",s[s.foldingMaximumRegions=56]="foldingMaximumRegions",s[s.unfoldOnClickAfterEndOfLine=57]="unfoldOnClickAfterEndOfLine",s[s.fontFamily=58]="fontFamily",s[s.fontInfo=59]="fontInfo",s[s.fontLigatures=60]="fontLigatures",s[s.fontSize=61]="fontSize",s[s.fontWeight=62]="fontWeight",s[s.fontVariations=63]="fontVariations",s[s.formatOnPaste=64]="formatOnPaste",s[s.formatOnType=65]="formatOnType",s[s.glyphMargin=66]="glyphMargin",s[s.gotoLocation=67]="gotoLocation",s[s.hideCursorInOverviewRuler=68]="hideCursorInOverviewRuler",s[s.hover=69]="hover",s[s.inDiffEditor=70]="inDiffEditor",s[s.inlineSuggest=71]="inlineSuggest",s[s.letterSpacing=72]="letterSpacing",s[s.lightbulb=73]="lightbulb",s[s.lineDecorationsWidth=74]="lineDecorationsWidth",s[s.lineHeight=75]="lineHeight",s[s.lineNumbers=76]="lineNumbers",s[s.lineNumbersMinChars=77]="lineNumbersMinChars",s[s.linkedEditing=78]="linkedEditing",s[s.links=79]="links",s[s.matchBrackets=80]="matchBrackets",s[s.minimap=81]="minimap",s[s.mouseStyle=82]="mouseStyle",s[s.mouseWheelScrollSensitivity=83]="mouseWheelScrollSensitivity",s[s.mouseWheelZoom=84]="mouseWheelZoom",s[s.multiCursorMergeOverlapping=85]="multiCursorMergeOverlapping",s[s.multiCursorModifier=86]="multiCursorModifier",s[s.mouseMiddleClickAction=87]="mouseMiddleClickAction",s[s.multiCursorPaste=88]="multiCursorPaste",s[s.multiCursorLimit=89]="multiCursorLimit",s[s.occurrencesHighlight=90]="occurrencesHighlight",s[s.occurrencesHighlightDelay=91]="occurrencesHighlightDelay",s[s.overtypeCursorStyle=92]="overtypeCursorStyle",s[s.overtypeOnPaste=93]="overtypeOnPaste",s[s.overviewRulerBorder=94]="overviewRulerBorder",s[s.overviewRulerLanes=95]="overviewRulerLanes",s[s.padding=96]="padding",s[s.pasteAs=97]="pasteAs",s[s.parameterHints=98]="parameterHints",s[s.peekWidgetDefaultFocus=99]="peekWidgetDefaultFocus",s[s.placeholder=100]="placeholder",s[s.definitionLinkOpensInPeek=101]="definitionLinkOpensInPeek",s[s.quickSuggestions=102]="quickSuggestions",s[s.quickSuggestionsDelay=103]="quickSuggestionsDelay",s[s.readOnly=104]="readOnly",s[s.readOnlyMessage=105]="readOnlyMessage",s[s.renameOnType=106]="renameOnType",s[s.renderRichScreenReaderContent=107]="renderRichScreenReaderContent",s[s.renderControlCharacters=108]="renderControlCharacters",s[s.renderFinalNewline=109]="renderFinalNewline",s[s.renderLineHighlight=110]="renderLineHighlight",s[s.renderLineHighlightOnlyWhenFocus=111]="renderLineHighlightOnlyWhenFocus",s[s.renderValidationDecorations=112]="renderValidationDecorations",s[s.renderWhitespace=113]="renderWhitespace",s[s.revealHorizontalRightPadding=114]="revealHorizontalRightPadding",s[s.roundedSelection=115]="roundedSelection",s[s.rulers=116]="rulers",s[s.scrollbar=117]="scrollbar",s[s.scrollBeyondLastColumn=118]="scrollBeyondLastColumn",s[s.scrollBeyondLastLine=119]="scrollBeyondLastLine",s[s.scrollPredominantAxis=120]="scrollPredominantAxis",s[s.selectionClipboard=121]="selectionClipboard",s[s.selectionHighlight=122]="selectionHighlight",s[s.selectionHighlightMaxLength=123]="selectionHighlightMaxLength",s[s.selectionHighlightMultiline=124]="selectionHighlightMultiline",s[s.selectOnLineNumbers=125]="selectOnLineNumbers",s[s.showFoldingControls=126]="showFoldingControls",s[s.showUnused=127]="showUnused",s[s.snippetSuggestions=128]="snippetSuggestions",s[s.smartSelect=129]="smartSelect",s[s.smoothScrolling=130]="smoothScrolling",s[s.stickyScroll=131]="stickyScroll",s[s.stickyTabStops=132]="stickyTabStops",s[s.stopRenderingLineAfter=133]="stopRenderingLineAfter",s[s.suggest=134]="suggest",s[s.suggestFontSize=135]="suggestFontSize",s[s.suggestLineHeight=136]="suggestLineHeight",s[s.suggestOnTriggerCharacters=137]="suggestOnTriggerCharacters",s[s.suggestSelection=138]="suggestSelection",s[s.tabCompletion=139]="tabCompletion",s[s.tabIndex=140]="tabIndex",s[s.trimWhitespaceOnDelete=141]="trimWhitespaceOnDelete",s[s.unicodeHighlighting=142]="unicodeHighlighting",s[s.unusualLineTerminators=143]="unusualLineTerminators",s[s.useShadowDOM=144]="useShadowDOM",s[s.useTabStops=145]="useTabStops",s[s.wordBreak=146]="wordBreak",s[s.wordSegmenterLocales=147]="wordSegmenterLocales",s[s.wordSeparators=148]="wordSeparators",s[s.wordWrap=149]="wordWrap",s[s.wordWrapBreakAfterCharacters=150]="wordWrapBreakAfterCharacters",s[s.wordWrapBreakBeforeCharacters=151]="wordWrapBreakBeforeCharacters",s[s.wordWrapColumn=152]="wordWrapColumn",s[s.wordWrapOverride1=153]="wordWrapOverride1",s[s.wordWrapOverride2=154]="wordWrapOverride2",s[s.wrappingIndent=155]="wrappingIndent",s[s.wrappingStrategy=156]="wrappingStrategy",s[s.showDeprecated=157]="showDeprecated",s[s.inertialScroll=158]="inertialScroll",s[s.inlayHints=159]="inlayHints",s[s.wrapOnEscapedLineFeeds=160]="wrapOnEscapedLineFeeds",s[s.effectiveCursorStyle=161]="effectiveCursorStyle",s[s.editorClassName=162]="editorClassName",s[s.pixelRatio=163]="pixelRatio",s[s.tabFocusMode=164]="tabFocusMode",s[s.layoutInfo=165]="layoutInfo",s[s.wrappingInfo=166]="wrappingInfo",s[s.defaultColorDecorators=167]="defaultColorDecorators",s[s.colorDecoratorsActivatedOn=168]="colorDecoratorsActivatedOn",s[s.inlineCompletionsAccessibilityVerbose=169]="inlineCompletionsAccessibilityVerbose",s[s.effectiveEditContext=170]="effectiveEditContext",s[s.scrollOnMiddleClick=171]="scrollOnMiddleClick",s[s.effectiveAllowVariableFonts=172]="effectiveAllowVariableFonts"})(TO||(TO={}));var DO;(function(s){s[s.TextDefined=0]="TextDefined",s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(DO||(DO={}));var NO;(function(s){s[s.LF=0]="LF",s[s.CRLF=1]="CRLF"})(NO||(NO={}));var IO;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=3]="Right"})(IO||(IO={}));var AO;(function(s){s[s.Increase=0]="Increase",s[s.Decrease=1]="Decrease"})(AO||(AO={}));var RO;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(RO||(RO={}));var MO;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(MO||(MO={}));var OO;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(OO||(OO={}));var PO;(function(s){s[s.Code=1]="Code",s[s.Label=2]="Label"})(PO||(PO={}));var BO;(function(s){s[s.Accepted=0]="Accepted",s[s.Rejected=1]="Rejected",s[s.Ignored=2]="Ignored"})(BO||(BO={}));var FO;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(FO||(FO={}));var VO;(function(s){s[s.DependsOnKbLayout=-1]="DependsOnKbLayout",s[s.Unknown=0]="Unknown",s[s.Backspace=1]="Backspace",s[s.Tab=2]="Tab",s[s.Enter=3]="Enter",s[s.Shift=4]="Shift",s[s.Ctrl=5]="Ctrl",s[s.Alt=6]="Alt",s[s.PauseBreak=7]="PauseBreak",s[s.CapsLock=8]="CapsLock",s[s.Escape=9]="Escape",s[s.Space=10]="Space",s[s.PageUp=11]="PageUp",s[s.PageDown=12]="PageDown",s[s.End=13]="End",s[s.Home=14]="Home",s[s.LeftArrow=15]="LeftArrow",s[s.UpArrow=16]="UpArrow",s[s.RightArrow=17]="RightArrow",s[s.DownArrow=18]="DownArrow",s[s.Insert=19]="Insert",s[s.Delete=20]="Delete",s[s.Digit0=21]="Digit0",s[s.Digit1=22]="Digit1",s[s.Digit2=23]="Digit2",s[s.Digit3=24]="Digit3",s[s.Digit4=25]="Digit4",s[s.Digit5=26]="Digit5",s[s.Digit6=27]="Digit6",s[s.Digit7=28]="Digit7",s[s.Digit8=29]="Digit8",s[s.Digit9=30]="Digit9",s[s.KeyA=31]="KeyA",s[s.KeyB=32]="KeyB",s[s.KeyC=33]="KeyC",s[s.KeyD=34]="KeyD",s[s.KeyE=35]="KeyE",s[s.KeyF=36]="KeyF",s[s.KeyG=37]="KeyG",s[s.KeyH=38]="KeyH",s[s.KeyI=39]="KeyI",s[s.KeyJ=40]="KeyJ",s[s.KeyK=41]="KeyK",s[s.KeyL=42]="KeyL",s[s.KeyM=43]="KeyM",s[s.KeyN=44]="KeyN",s[s.KeyO=45]="KeyO",s[s.KeyP=46]="KeyP",s[s.KeyQ=47]="KeyQ",s[s.KeyR=48]="KeyR",s[s.KeyS=49]="KeyS",s[s.KeyT=50]="KeyT",s[s.KeyU=51]="KeyU",s[s.KeyV=52]="KeyV",s[s.KeyW=53]="KeyW",s[s.KeyX=54]="KeyX",s[s.KeyY=55]="KeyY",s[s.KeyZ=56]="KeyZ",s[s.Meta=57]="Meta",s[s.ContextMenu=58]="ContextMenu",s[s.F1=59]="F1",s[s.F2=60]="F2",s[s.F3=61]="F3",s[s.F4=62]="F4",s[s.F5=63]="F5",s[s.F6=64]="F6",s[s.F7=65]="F7",s[s.F8=66]="F8",s[s.F9=67]="F9",s[s.F10=68]="F10",s[s.F11=69]="F11",s[s.F12=70]="F12",s[s.F13=71]="F13",s[s.F14=72]="F14",s[s.F15=73]="F15",s[s.F16=74]="F16",s[s.F17=75]="F17",s[s.F18=76]="F18",s[s.F19=77]="F19",s[s.F20=78]="F20",s[s.F21=79]="F21",s[s.F22=80]="F22",s[s.F23=81]="F23",s[s.F24=82]="F24",s[s.NumLock=83]="NumLock",s[s.ScrollLock=84]="ScrollLock",s[s.Semicolon=85]="Semicolon",s[s.Equal=86]="Equal",s[s.Comma=87]="Comma",s[s.Minus=88]="Minus",s[s.Period=89]="Period",s[s.Slash=90]="Slash",s[s.Backquote=91]="Backquote",s[s.BracketLeft=92]="BracketLeft",s[s.Backslash=93]="Backslash",s[s.BracketRight=94]="BracketRight",s[s.Quote=95]="Quote",s[s.OEM_8=96]="OEM_8",s[s.IntlBackslash=97]="IntlBackslash",s[s.Numpad0=98]="Numpad0",s[s.Numpad1=99]="Numpad1",s[s.Numpad2=100]="Numpad2",s[s.Numpad3=101]="Numpad3",s[s.Numpad4=102]="Numpad4",s[s.Numpad5=103]="Numpad5",s[s.Numpad6=104]="Numpad6",s[s.Numpad7=105]="Numpad7",s[s.Numpad8=106]="Numpad8",s[s.Numpad9=107]="Numpad9",s[s.NumpadMultiply=108]="NumpadMultiply",s[s.NumpadAdd=109]="NumpadAdd",s[s.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",s[s.NumpadSubtract=111]="NumpadSubtract",s[s.NumpadDecimal=112]="NumpadDecimal",s[s.NumpadDivide=113]="NumpadDivide",s[s.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",s[s.ABNT_C1=115]="ABNT_C1",s[s.ABNT_C2=116]="ABNT_C2",s[s.AudioVolumeMute=117]="AudioVolumeMute",s[s.AudioVolumeUp=118]="AudioVolumeUp",s[s.AudioVolumeDown=119]="AudioVolumeDown",s[s.BrowserSearch=120]="BrowserSearch",s[s.BrowserHome=121]="BrowserHome",s[s.BrowserBack=122]="BrowserBack",s[s.BrowserForward=123]="BrowserForward",s[s.MediaTrackNext=124]="MediaTrackNext",s[s.MediaTrackPrevious=125]="MediaTrackPrevious",s[s.MediaStop=126]="MediaStop",s[s.MediaPlayPause=127]="MediaPlayPause",s[s.LaunchMediaPlayer=128]="LaunchMediaPlayer",s[s.LaunchMail=129]="LaunchMail",s[s.LaunchApp2=130]="LaunchApp2",s[s.Clear=131]="Clear",s[s.MAX_VALUE=132]="MAX_VALUE"})(VO||(VO={}));var HO;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(HO||(HO={}));var WO;(function(s){s[s.Unnecessary=1]="Unnecessary",s[s.Deprecated=2]="Deprecated"})(WO||(WO={}));var zO;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})(zO||(zO={}));var UO;(function(s){s[s.Normal=1]="Normal",s[s.Underlined=2]="Underlined"})(UO||(UO={}));var qO;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.TEXTAREA=1]="TEXTAREA",s[s.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",s[s.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",s[s.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",s[s.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",s[s.CONTENT_TEXT=6]="CONTENT_TEXT",s[s.CONTENT_EMPTY=7]="CONTENT_EMPTY",s[s.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",s[s.CONTENT_WIDGET=9]="CONTENT_WIDGET",s[s.OVERVIEW_RULER=10]="OVERVIEW_RULER",s[s.SCROLLBAR=11]="SCROLLBAR",s[s.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",s[s.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(qO||(qO={}));var $O;(function(s){s[s.AIGenerated=1]="AIGenerated"})($O||($O={}));var jO;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(jO||(jO={}));var GO;(function(s){s[s.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",s[s.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",s[s.TOP_CENTER=2]="TOP_CENTER"})(GO||(GO={}));var KO;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(KO||(KO={}));var YO;(function(s){s[s.Word=0]="Word",s[s.Line=1]="Line",s[s.Suggest=2]="Suggest"})(YO||(YO={}));var ZO;(function(s){s[s.Left=0]="Left",s[s.Right=1]="Right",s[s.None=2]="None",s[s.LeftOfInjectedText=3]="LeftOfInjectedText",s[s.RightOfInjectedText=4]="RightOfInjectedText"})(ZO||(ZO={}));var XO;(function(s){s[s.Off=0]="Off",s[s.On=1]="On",s[s.Relative=2]="Relative",s[s.Interval=3]="Interval",s[s.Custom=4]="Custom"})(XO||(XO={}));var QO;(function(s){s[s.None=0]="None",s[s.Text=1]="Text",s[s.Blocks=2]="Blocks"})(QO||(QO={}));var JO;(function(s){s[s.Smooth=0]="Smooth",s[s.Immediate=1]="Immediate"})(JO||(JO={}));var e3;(function(s){s[s.Auto=1]="Auto",s[s.Hidden=2]="Hidden",s[s.Visible=3]="Visible"})(e3||(e3={}));var t3;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(t3||(t3={}));var i3;(function(s){s.Off="off",s.OnCode="onCode",s.On="on"})(i3||(i3={}));var n3;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(n3||(n3={}));var s3;(function(s){s[s.File=0]="File",s[s.Module=1]="Module",s[s.Namespace=2]="Namespace",s[s.Package=3]="Package",s[s.Class=4]="Class",s[s.Method=5]="Method",s[s.Property=6]="Property",s[s.Field=7]="Field",s[s.Constructor=8]="Constructor",s[s.Enum=9]="Enum",s[s.Interface=10]="Interface",s[s.Function=11]="Function",s[s.Variable=12]="Variable",s[s.Constant=13]="Constant",s[s.String=14]="String",s[s.Number=15]="Number",s[s.Boolean=16]="Boolean",s[s.Array=17]="Array",s[s.Object=18]="Object",s[s.Key=19]="Key",s[s.Null=20]="Null",s[s.EnumMember=21]="EnumMember",s[s.Struct=22]="Struct",s[s.Event=23]="Event",s[s.Operator=24]="Operator",s[s.TypeParameter=25]="TypeParameter"})(s3||(s3={}));var r3;(function(s){s[s.Deprecated=1]="Deprecated"})(r3||(r3={}));var o3;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(o3||(o3={}));var a3;(function(s){s[s.Hidden=0]="Hidden",s[s.Blink=1]="Blink",s[s.Smooth=2]="Smooth",s[s.Phase=3]="Phase",s[s.Expand=4]="Expand",s[s.Solid=5]="Solid"})(a3||(a3={}));var l3;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(l3||(l3={}));var c3;(function(s){s[s.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",s[s.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",s[s.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",s[s.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(c3||(c3={}));var u3;(function(s){s[s.None=0]="None",s[s.Same=1]="Same",s[s.Indent=2]="Indent",s[s.DeepIndent=3]="DeepIndent"})(u3||(u3={}));const cw=class cw{static chord(e,t){return qj(e,t)}};cw.CtrlCmd=2048,cw.Shift=1024,cw.Alt=512,cw.WinCtrl=256;let h3=cw;function Jj(){return{editor:void 0,languages:void 0,CancellationTokenSource:SC,Emitter:ne,KeyCode:VO,KeyMod:h3,Position:se,Range:ie,Selection:Yt,SelectionDirection:t3,MarkerSeverity:HO,MarkerTag:WO,Uri:Ot,Token:gx}}function Aie(s,e){const t=s;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Ri=window;function eG(s){return s}class Rie{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=eG):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class MV{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=eG):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}var Y_;(function(s){s[s.Uninitialized=0]="Uninitialized",s[s.Running=1]="Running",s[s.Completed=2]="Completed"})(Y_||(Y_={}));class po{constructor(e){this.executor=e,this._state=Y_.Uninitialized}get value(){if(this._state===Y_.Uninitialized){this._state=Y_.Running;try{this._value=this.executor()}catch(e){this._error=e}finally{this._state=Y_.Completed}}else if(this._state===Y_.Running)throw new Error("Cannot read the value of a lazy that is being initialized");if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function Mie(s){return!s||typeof s!="string"?!0:s.trim().length===0}const Oie=/{(\d+)}/g;function d3(s,...e){return e.length===0?s:s.replace(Oie,function(t,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=e.length?t:e[n]})}function Pie(s){return s.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function su(s){return s.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ad(s){return s.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ZA(s,e){if(!s||!e)return s;const t=e.length;if(t===0||s.length===0)return s;let i=0;for(;s.indexOf(e,i)===i;)i=i+t;return s.substring(i)}function Bie(s,e){if(!s||!e)return s;const t=e.length,i=s.length;if(t===0||i===0)return s;let n=i,r=-1;for(;r=s.lastIndexOf(e,n-1),!(r===-1||r+t!==n);){if(r===0)return"";n=r}return s.substring(0,n)}function Fie(s){return s.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function tG(s,e,t={}){if(!s)throw new Error("Cannot create regex from empty string");e||(s=Ad(s)),t.wholeWord&&(/\B/.test(s.charAt(0))||(s="\\b"+s),/\B/.test(s.charAt(s.length-1))||(s=s+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(s,i)}function iG(s){return s.source==="^"||s.source==="^$"||s.source==="$"||s.source==="^\\s*$"?!1:!!(s.exec("")&&s.lastIndex===0)}function LC(s){return s.split(/\r\n|\r|\n/)}function Pa(s){for(let e=0,t=s.length;e<t;e++){const i=s.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function fo(s,e=0,t=s.length){for(let i=e;i<t;i++){const n=s.charCodeAt(i);if(n!==32&&n!==9)return s.substring(e,i)}return s.substring(e,t)}function I0(s,e=s.length-1){for(let t=e;t>=0;t--){const i=s.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function f3(s,e){return s<e?-1:s>e?1:0}function tP(s,e,t=0,i=s.length,n=0,r=e.length){for(;t<i&&n<r;t++,n++){const l=s.charCodeAt(t),c=e.charCodeAt(n);if(l<c)return-1;if(l>c)return 1}const o=i-t,a=r-n;return o<a?-1:o>a?1:0}function OV(s,e){return C2(s,e,0,s.length,0,e.length)}function C2(s,e,t=0,i=s.length,n=0,r=e.length){for(;t<i&&n<r;t++,n++){let l=s.charCodeAt(t),c=e.charCodeAt(n);if(l===c)continue;if(l>=128||c>=128)return tP(s.toLowerCase(),e.toLowerCase(),t,i,n,r);zv(l)&&(l-=32),zv(c)&&(c-=32);const h=l-c;if(h!==0)return h}const o=i-t,a=r-n;return o<a?-1:o>a?1:0}function fT(s){return s>=48&&s<=57}function zv(s){return s>=97&&s<=122}function Em(s){return s>=65&&s<=90}function Uv(s,e){return s.length===e.length&&C2(s,e)===0}function iP(s,e){const t=e.length;return e.length>s.length?!1:C2(s,e,0,t)===0}function Jw(s,e){const t=Math.min(s.length,e.length);let i;for(i=0;i<t;i++)if(s.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function eC(s,e){const t=Math.min(s.length,e.length);let i;const n=s.length-1,r=e.length-1;for(i=0;i<t;i++)if(s.charCodeAt(n-i)!==e.charCodeAt(r-i))return i;return t}function xs(s){return 55296<=s&&s<=56319}function c0(s){return 56320<=s&&s<=57343}function nP(s,e){return(s-55296<<10)+(e-56320)+65536}function uN(s,e,t){const i=s.charCodeAt(t);if(xs(i)&&t+1<e){const n=s.charCodeAt(t+1);if(c0(n))return nP(i,n)}return i}function Vie(s,e){const t=s.charCodeAt(e-1);if(c0(t)&&e>1){const i=s.charCodeAt(e-2);if(xs(i))return nP(i,t)}return t}class sP{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=Vie(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=uN(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class hN{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new sP(e,t)}nextGraphemeLength(){const e=dN.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const r=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(PV(n,o)){t.setOffset(r);break}n=o}return t.offset-i}prevGraphemeLength(){const e=dN.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const r=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(PV(o,n)){t.setOffset(r);break}n=o}return i-t.offset}eol(){return this._iterator.eol()}}function rP(s,e){return new hN(s,e).nextGraphemeLength()}function nG(s,e){return new hN(s,e).prevGraphemeLength()}function Hie(s,e){e>0&&c0(s.charCodeAt(e))&&e--;const t=e+rP(s,e);return[t-nG(s,t),t]}let vM;function Wie(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function mx(s){return vM||(vM=Wie()),vM.test(s)}const zie=/^[\t\n\r\x20-\x7E]*$/;function oP(s){return zie.test(s)}const sG=/[\u2028\u2029]/;function rG(s){return sG.test(s)}function op(s){return s>=11904&&s<=55215||s>=63744&&s<=64255||s>=65281&&s<=65374}function aP(s){return s>=127462&&s<=127487||s===8986||s===8987||s===9200||s===9203||s>=9728&&s<=10175||s===11088||s===11093||s>=127744&&s<=128591||s>=128640&&s<=128764||s>=128992&&s<=129008||s>=129280&&s<=129535||s>=129648&&s<=129782}const Uie="\uFEFF";function lP(s){return!!(s&&s.length>0&&s.charCodeAt(0)===65279)}function oG(s){return s=s%52,s<26?String.fromCharCode(97+s):String.fromCharCode(65+s-26)}function PV(s,e){return s===0?e!==5&&e!==7:s===2&&e===3?!1:s===4||s===2||s===3||e===4||e===2||e===3?!0:!(s===8&&(e===8||e===9||e===11||e===12)||(s===11||s===9)&&(e===9||e===10)||(s===12||s===10)&&e===10||e===5||e===13||e===7||s===1||s===13&&e===14||s===6&&e===6)}const f1=class f1{static getInstance(){return f1._INSTANCE||(f1._INSTANCE=new f1),f1._INSTANCE}constructor(){this._data=qie()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n=2*n;else if(e>t[3*n+1])n=2*n+1;else return t[3*n+2];return 0}};f1._INSTANCE=null;let dN=f1;function qie(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function $ie(s,e){if(s===0)return 0;const t=jie(s,e);if(t!==void 0)return t;const i=new sP(e,s);return i.prevCodePoint(),i.offset}function jie(s,e){const t=new sP(e,s);let i=t.prevCodePoint();for(;Gie(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!aP(i))return;let n=t.offset;return n>0&&t.prevCodePoint()===8205&&(n=t.offset),n}function Gie(s){return 127995<=s&&s<=127999}const ad=class ad{static getInstance(e){return ad.cache.get(Array.from(e))}static getLocales(){return ad._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};ad.ambiguousCharacterData=new po(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}')),ad.cache=new Rie({getCacheKey:JSON.stringify},e=>{function t(h){const d=new Map;for(let g=0;g<h.length;g+=2)d.set(h[g],h[g+1]);return d}function i(h,d){const g=new Map(h);for(const[_,b]of d)g.set(_,b);return g}function n(h,d){if(!h)return d;const g=new Map;for(const[_,b]of h)d.has(_)&&g.set(_,b);return g}const r=ad.ambiguousCharacterData.value;let o=e.filter(h=>!h.startsWith("_")&&h in r);o.length===0&&(o=["_default"]);let a;for(const h of o){const d=t(r[h]);a=n(a,d)}const l=t(r._common),c=i(l,a);return new ad(c)}),ad._locales=new po(()=>Object.keys(ad.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let px=ad;const uw=class uw{static getRawData(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static getData(){return this._data||(this._data=new Set([...Object.values(uw.getRawData())].flat())),this._data}static isInvisibleCharacter(e){return uw.getData().has(e)}static get codePoints(){return uw.getData()}};uw._data=void 0;let oL=uw;const eA=class eA{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};eA.INSTANCE=new eA;let g3=eA;function aG(s,e,t){typeof e=="string"&&(e=s.matchMedia(e)),e.addEventListener("change",t)}function m3(s){return g3.INSTANCE.getZoomFactor(s)}const xC=navigator.userAgent,Va=xC.indexOf("Firefox")>=0,XA=xC.indexOf("AppleWebKit")>=0,y2=xC.indexOf("Chrome")>=0,u0=!y2&&xC.indexOf("Safari")>=0,lG=!y2&&!u0&&XA;xC.indexOf("Electron/")>=0;const BV=xC.indexOf("Android")>=0;let wM=!1;if(typeof Ri.matchMedia=="function"){const s=Ri.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Ri.matchMedia("(display-mode: fullscreen)");wM=s.matches,aG(Ri,s,({matches:t})=>{wM&&e.matches||(wM=t)})}const S2={clipboard:{writeText:cx||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:cx||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},pointerEvents:Ri.PointerEvent&&("ontouchstart"in Ri||navigator.maxTouchPoints>0)};function p3(s,e){if(typeof s=="number"){if(s===0)return null;const t=(s&65535)>>>0,i=(s&4294901760)>>>16;return i!==0?new CM([gT(t,e),gT(i,e)]):new CM([gT(t,e)])}else{const t=[];for(let i=0;i<s.length;i++)t.push(gT(s[i],e));return new CM(t)}}function gT(s,e){const t=!!(s&2048),i=!!(s&256),n=e===2?i:t,r=!!(s&1024),o=!!(s&512),a=e===2?t:i,l=s&255;return new h0(n,r,o,a,l)}class h0{constructor(e,t,i,n,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=r}equals(e){return e instanceof h0&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class CM{constructor(e){if(e.length===0)throw $A("chords");this.chords=e}}class Kie{constructor(e,t,i,n,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=r,this.keyAriaLabel=o}}class Yie{}function Zie(s){if(s.charCode){const t=String.fromCharCode(s.charCode).toUpperCase();return Xf.fromString(t)}const e=s.keyCode;if(e===3)return 7;if(Va)switch(e){case 59:return 85;case 60:if(Fa)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Bt)return 57;break}else if(XA){if(Bt&&e===93)return 57;if(!Bt&&e===92)return 57}return Uj[e]||0}const Xie=Bt?256:2048,Qie=512,Jie=1024,ene=Bt?2048:256;class Mi{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=Zie(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Xie),this.altKey&&(t|=Qie),this.shiftKey&&(t|=Jie),this.metaKey&&(t|=ene),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new h0(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const FV=new WeakMap;function tne(s){if(!s.parent||s.parent===s)return null;try{const e=s.location,t=s.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return s.parent}class ine{static getSameOriginWindowChain(e){let t=FV.get(e);if(!t){t=[],FV.set(e,t);let i=e,n;do n=tne(i),n?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=n;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,n=0;const r=this.getSameOriginWindowChain(e);for(const o of r){const a=o.window.deref();if(i+=a?.scrollY??0,n+=a?.scrollX??0,a===t||!o.iframeElement)break;const l=o.iframeElement.getBoundingClientRect();i+=l.top,n+=l.left}return{top:i,left:n}}}class kl{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.defaultPrevented=t.defaultPrevented,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=ine.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class d0{constructor(e,t=0,i=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let n=!1;if(y2){const r=navigator.userAgent.match(/Chrome\/(\d+)/);n=(r?parseInt(r[1]):123)<=122}if(e){const r=e,o=e,a=e.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")n?this.deltaY=r.wheelDeltaY/(120*a):this.deltaY=r.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?Va&&!Bt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")u0&&ia?this.deltaX=-(r.wheelDeltaX/120):n?this.deltaX=r.wheelDeltaX/(120*a):this.deltaX=r.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?Va&&!Bt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(n?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}const cG=Symbol("MicrotaskDelay");function _3(s){return!!s&&typeof s.then=="function"}function b3(s){const e=new SC,t=s(e.token);let i=!1;const n=new Promise((r,o)=>{const a=e.token.onCancellationRequested(()=>{i=!0,a.dispose(),o(new CC)});Promise.resolve(t).then(l=>{a.dispose(),e.dispose(),i?KA(l)&&l.dispose():r(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(r,o){return n.then(r,o)}catch(r){return this.then(void 0,r)}finally(r){return n.finally(r)}}}let nne=class{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(n=>{this.activePromise=null,t(n)},n=>{this.activePromise=null,i(n)})})}dispose(){this.isDisposed=!0}};const sne=(s,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},s);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},rne=s=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,s())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class L2{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,r)=>{this.doResolve=n,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}}));const i=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===cG?rne(i):sne(t,i),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new CC),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}class uG{constructor(e){this.delayer=new L2(e),this.throttler=new nne}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function tC(s,e){return e?new Promise((t,i)=>{const n=setTimeout(()=>{r.dispose(),t()},s),r=e.onCancellationRequested(()=>{clearTimeout(n),r.dispose(),i(new CC)})}):b3(t=>tC(s,t))}function v3(s,e=0,t){const i=setTimeout(()=>{s(),t&&n.dispose()},e),n=lt(()=>{clearTimeout(i),t?.delete(n)});return t?.add(n),n}let one=class{constructor(){this._runningTask=void 0,this._pendingTasks=[]}schedule(e){const t=new QA;return this._pendingTasks.push({task:e,deferred:t,setUndefinedWhenCleared:!1}),this._runIfNotRunning(),t.p}_runIfNotRunning(){this._runningTask===void 0&&this._processQueue()}async _processQueue(){if(this._pendingTasks.length===0)return;const e=this._pendingTasks.shift();if(e){if(this._runningTask)throw new at;this._runningTask=e.task;try{const t=await e.task();e.deferred.complete(t)}catch(t){e.deferred.error(t)}finally{this._runningTask=void 0,this._processQueue()}}}clearPending(){const e=this._pendingTasks;this._pendingTasks=[];for(const t of e)t.setUndefinedWhenCleared?t.deferred.complete(void 0):t.deferred.error(new CC)}};class vg{constructor(e,t){this._isDisposed=!1,this._token=void 0,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==void 0&&(clearTimeout(this._token),this._token=void 0)}cancelAndSet(e,t){if(this._isDisposed)throw new at("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=void 0,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new at("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===void 0&&(this._token=setTimeout(()=>{this._token=void 0,e()},t))}}class cP{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new at("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const n=i.setInterval(()=>{e()},t);this.disposable=lt(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class Or{constructor(e,t){this.timeoutToken=void 0,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=void 0)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==void 0}onTimeout(){this.timeoutToken=void 0,this.runner&&this.doRun()}doRun(){this.runner?.()}}let uP,aL;(function(){const s=globalThis;typeof s.requestIdleCallback!="function"||typeof s.cancelIdleCallback!="function"?aL=(e,t,i)=>{jA(()=>{if(n)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let n=!1;return{dispose(){n||(n=!0)}}}:aL=(e,t,i)=>{const n=e.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let r=!1;return{dispose(){r||(r=!0,e.cancelIdleCallback(n))}}},uP=(e,t)=>aL(globalThis,e,t)})();class ane{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=aL(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class lne extends ane{constructor(e){super(globalThis,e)}}class QA{get isRejected(){return this.outcome?.outcome===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return this.isSettled?Promise.resolve():new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return this.isSettled?Promise.resolve():new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new CC)}}var _x;(function(s){async function e(i){let n;const r=await Promise.all(i.map(o=>o.then(a=>a,a=>{n||(n=a)})));if(typeof n<"u")throw n;return r}s.settled=e;function t(i){return new Promise(async(n,r)=>{try{await i(n,r)}catch(o){r(o)}})}s.withAsyncBody=t})(_x||(_x={}));class cne{constructor(){this._unsatisfiedConsumers=[],this._unconsumedValues=[]}get hasFinalValue(){return!!this._finalValue}produce(e){if(this._ensureNoFinalValue(),this._unsatisfiedConsumers.length>0){const t=this._unsatisfiedConsumers.shift();this._resolveOrRejectDeferred(t,e)}else this._unconsumedValues.push(e)}produceFinal(e){this._ensureNoFinalValue(),this._finalValue=e;for(const t of this._unsatisfiedConsumers)this._resolveOrRejectDeferred(t,e);this._unsatisfiedConsumers.length=0}_ensureNoFinalValue(){if(this._finalValue)throw new at("ProducerConsumer: cannot produce after final value has been set")}_resolveOrRejectDeferred(e,t){t.ok?e.complete(t.value):e.error(t.error)}consume(){if(this._unconsumedValues.length>0||this._finalValue){const e=this._unconsumedValues.length>0?this._unconsumedValues.shift():this._finalValue;return e.ok?Promise.resolve(e.value):Promise.reject(e.error)}else{const e=new QA;return this._unsatisfiedConsumers.push(e),e.p}}}const gl=class gl{constructor(e,t){this._onReturn=t,this._producerConsumer=new cne,this._iterator={next:()=>this._producerConsumer.consume(),return:()=>(this._onReturn?.(),Promise.resolve({done:!0,value:void 0})),throw:async i=>(this._finishError(i),{done:!0,value:void 0})},queueMicrotask(async()=>{const i=e({emitOne:n=>this._producerConsumer.produce({ok:!0,value:{done:!1,value:n}}),emitMany:n=>{for(const r of n)this._producerConsumer.produce({ok:!0,value:{done:!1,value:r}})},reject:n=>this._finishError(n)});if(!this._producerConsumer.hasFinalValue)try{await i,this._finishOk()}catch(n){this._finishError(n)}})}static fromArray(e){return new gl(t=>{t.emitMany(e)})}static fromPromise(e){return new gl(async t=>{t.emitMany(await e)})}static fromPromisesResolveOrder(e){return new gl(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new gl(async t=>{await Promise.all(e.map(async i=>{for await(const n of i)t.emitOne(n)}))})}static map(e,t){return new gl(async i=>{for await(const n of e)i.emitOne(t(n))})}map(e){return gl.map(this,e)}static coalesce(e){return gl.filter(e,t=>!!t)}coalesce(){return gl.coalesce(this)}static filter(e,t){return new gl(async i=>{for await(const n of e)t(n)&&i.emitOne(n)})}filter(e){return gl.filter(this,e)}_finishOk(){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!0,value:{done:!0,value:void 0}})}_finishError(e){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!1,error:e})}[Symbol.asyncIterator](){return this._iterator}};gl.EMPTY=gl.fromArray([]);let VV=gl;var mt;(function(s){s.inMemory="inmemory",s.vscode="vscode",s.internal="private",s.walkThrough="walkThrough",s.walkThroughSnippet="walkThroughSnippet",s.http="http",s.https="https",s.file="file",s.mailto="mailto",s.untitled="untitled",s.data="data",s.command="command",s.vscodeRemote="vscode-remote",s.vscodeRemoteResource="vscode-remote-resource",s.vscodeManagedRemoteResource="vscode-managed-remote-resource",s.vscodeUserData="vscode-userdata",s.vscodeCustomEditor="vscode-custom-editor",s.vscodeNotebookCell="vscode-notebook-cell",s.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",s.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",s.vscodeNotebookCellOutput="vscode-notebook-cell-output",s.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",s.vscodeNotebookMetadata="vscode-notebook-metadata",s.vscodeInteractiveInput="vscode-interactive-input",s.vscodeSettings="vscode-settings",s.vscodeWorkspaceTrust="vscode-workspace-trust",s.vscodeTerminal="vscode-terminal",s.vscodeChatCodeBlock="vscode-chat-code-block",s.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",s.vscodeChatEditor="vscode-chat-editor",s.vscodeChatInput="chatSessionInput",s.vscodeChatSession="vscode-chat-session",s.webviewPanel="webview-panel",s.vscodeWebview="vscode-webview",s.extension="extension",s.vscodeFileResource="vscode-file",s.tmp="tmp",s.vsls="vsls",s.vscodeSourceControl="vscode-scm",s.commentsInput="comment",s.codeSetting="code-setting",s.outputChannel="output",s.accessibleView="accessible-view",s.chatEditingSnapshotScheme="chat-editing-snapshot-text-model",s.chatEditingModel="chat-editing-text-model"})(mt||(mt={}));function hP(s,e){return Ot.isUri(s)?Uv(s.scheme,e):iP(s,e+":")}function HV(s,...e){return e.some(t=>hP(s,t))}const une="tkn";class hne{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return ts.join(this._serverRootPath,mt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return mi(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const n=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&${une}=${encodeURIComponent(r)}`),Ot.from({scheme:yg?this._preferredWebSchema:mt.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:o})}}const hG=new hne,dne="vscode-app",jL=class jL{uriToBrowserUri(e){return e.scheme===mt.vscodeRemote?hG.rewrite(e):e.scheme===mt.file&&(cx||Gee===`${mt.vscodeFileResource}://${jL.FALLBACK_AUTHORITY}`)?e.with({scheme:mt.vscodeFileResource,authority:e.authority||jL.FALLBACK_AUTHORITY,query:null,fragment:null}):e}};jL.FALLBACK_AUTHORITY=dne;let w3=jL;const dG=new w3;var C3;(function(s){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);s.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(r){let o;typeof r=="string"?o=new URL(r).searchParams:r instanceof URL?o=r.searchParams:Ot.isUri(r)&&(o=new URL(r.toString(!0)).searchParams);const a=o?.get(t);if(a)return e.get(a)}s.getHeadersFromQuery=i;function n(r,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";r instanceof URLSearchParams?r.set(t,l):r[t]=l}s.addSearchParam=n})(C3||(C3={}));const WV=typeof Buffer<"u";new po(()=>new Uint8Array(256));let yM;class JA{static wrap(e){return WV&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new JA(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return WV?this.buffer.toString():(yM||(yM=new TextDecoder),yM.decode(this.buffer))}}function fne(s,e){return s[e+0]<<0>>>0|s[e+1]<<8>>>0}function gne(s,e,t){s[t+0]=e&255,e=e>>>8,s[t+1]=e&255}function Wu(s,e){return s[e]*2**24+s[e+1]*2**16+s[e+2]*2**8+s[e+3]}function zu(s,e,t){s[t+3]=e,e=e>>>8,s[t+2]=e,e=e>>>8,s[t+1]=e,e=e>>>8,s[t]=e}function zV(s,e){return s[e]}function UV(s,e,t){s[t]=e}const qV="0123456789abcdef";function mne({buffer:s}){let e="";for(let t=0;t<s.length;t++){const i=s[t];e+=qV[i>>>4],e+=qV[i&15]}return e}function dP(s){return eR(s,0)}function eR(s,e){switch(typeof s){case"object":return s===null?sg(349,e):Array.isArray(s)?_ne(s,e):bne(s,e);case"string":return fP(s,e);case"boolean":return pne(s,e);case"number":return sg(s,e);case"undefined":return sg(937,e);default:return sg(617,e)}}function sg(s,e){return(e<<5)-e+s|0}function pne(s,e){return sg(s?433:863,e)}function fP(s,e){e=sg(149417,e);for(let t=0,i=s.length;t<i;t++)e=sg(s.charCodeAt(t),e);return e}function _ne(s,e){return e=sg(104579,e),s.reduce((t,i)=>eR(i,t),e)}function bne(s,e){return e=sg(181387,e),Object.keys(s).sort().reduce((t,i)=>(t=fP(i,t),eR(s[i],t)),e)}function SM(s,e,t=32){const i=t-e,n=~((1<<i)-1);return(s<<e|(n&s)>>>i)>>>0}function gS(s,e=32){return s instanceof ArrayBuffer?mne(JA.wrap(new Uint8Array(s))):(s>>>0).toString(16).padStart(e/4,"0")}const tA=class tA{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let n=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(xs(o))if(a+1<t){const c=e.charCodeAt(a+1);c0(c)?(a++,l=nP(o,c)):l=65533}else{r=o;break}else c0(o)&&(l=65533);if(n=this._push(i,n,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=n,this._leftoverHighSurrogate=r}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),gS(this._h0)+gS(this._h1)+gS(this._h2)+gS(this._h3)+gS(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,this._buff.subarray(this._buffLen).fill(0),this._buffLen>56&&(this._step(),this._buff.fill(0));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=tA._bigBlock32,t=this._buffDV;for(let d=0;d<64;d+=4)e.setUint32(d,t.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)e.setUint32(d,SM(e.getUint32(d-12,!1)^e.getUint32(d-32,!1)^e.getUint32(d-56,!1)^e.getUint32(d-64,!1),1),!1);let i=this._h0,n=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,h;for(let d=0;d<80;d++)d<20?(l=n&r|~n&o,c=1518500249):d<40?(l=n^r^o,c=1859775393):d<60?(l=n&r|n&o|r&o,c=2400959708):(l=n^r^o,c=3395469782),h=SM(i,5)+l+a+c+e.getUint32(d*4,!1)&4294967295,a=o,o=r,r=SM(n,30),n=i,i=h;this._h0=this._h0+i&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}};tA._bigBlock32=new DataView(new ArrayBuffer(320));let y3=tA;class vo{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return vne(e,this)}}const $V=new Map,S3=new WeakMap;function vne(s,e){const t=S3.get(s);if(t)return t;const i=wne(s,e);if(i){let n=$V.get(i)??0;n++,$V.set(i,n);const r=n===1?i:`${i}#${n}`;return S3.set(s,r),r}}function wne(s,e){const t=S3.get(s);if(t)return t;const i=e.owner?yne(e.owner)+".":"";let n;const r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(n=r(),n!==void 0)return i+n}else return i+r;const o=e.referenceFn;if(o!==void 0&&(n=gP(o),n!==void 0))return i+n;if(e.owner!==void 0){const a=Cne(e.owner,s);if(a!==void 0)return i+a}}function Cne(s,e){for(const t in s)if(s[t]===e)return t}const jV=new Map,GV=new WeakMap;function yne(s){const e=GV.get(s);if(e)return e;const t=fG(s)??"Object";let i=jV.get(t)??0;i++,jV.set(t,i);const n=i===1?t:`${t}#${i}`;return GV.set(s,n),n}function fG(s){const e=s.constructor;if(e)return e.name==="Object"?void 0:e.name}function gP(s){const e=s.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(i?i[1]:void 0)?.trim()}const rh=(s,e)=>s===e;function L3(s=rh){return(e,t)=>vs(e,t,s)}function Sne(){return(s,e)=>s.equals(e)}function WS(s,e,t){{const i=s;return(n,r)=>n==null||r===void 0||r===null?r===n:i(n,r)}}function KV(s){const e=new Error("BugIndicatingErrorRecovery: "+s);mi(e),console.error("recovered from an error that indicates a bug",e)}let W_;function Lne(s){W_?W_ instanceof YV?W_.loggers.push(s):W_=new YV([W_,s]):W_=s}function Rr(){return W_}class YV{constructor(e){this.loggers=e}handleObservableCreated(e,t){for(const i of this.loggers)i.handleObservableCreated(e,t)}handleOnListenerCountChanged(e,t){for(const i of this.loggers)i.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const i of this.loggers)i.handleObservableUpdated(e,t)}handleAutorunCreated(e,t){for(const i of this.loggers)i.handleAutorunCreated(e,t)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,i){for(const n of this.loggers)n.handleAutorunDependencyChanged(e,t,i)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,i){for(const n of this.loggers)n.handleDerivedDependencyChanged(e,t,i)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}}function Un(s,e){const t=new x2(s,e);try{s(t)}finally{t.finish()}}let mT;function zS(s){if(mT)s(mT);else{const e=new x2(s,void 0);mT=e;try{s(e)}finally{e.finish(),mT=void 0}}}function mP(s,e,t){s?e(s):Un(e,t)}class x2{constructor(e,t){this._fn=e,this._getDebugName=t,this._updatingObservers=[],Rr()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():gP(this._fn)}updateObserver(e,t){if(!this._updatingObservers){KV("Transaction already finished!"),Un(i=>{i.updateObserver(e,t)});return}this._updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this._updatingObservers;if(!e){KV("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){const{observer:i,observable:n}=e[t];i.endUpdate(n)}this._updatingObservers=null,Rr()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this._updatingObservers}}var Fr;(function(s){let e=!1;function t(){e=!0}s.enable=t;function i(){if(!e)return;const n=Error,r=n.stackTraceLimit;n.stackTraceLimit=3;const o=new Error().stack;return n.stackTraceLimit=r,pP.fromStack(o,2)}s.ofCaller=i})(Fr||(Fr={}));class pP{static fromStack(e,t){const i=e.split(`
`),n=xne(i[t+1]);if(n)return new pP(n.fileName,n.line,n.column,n.id)}constructor(e,t,i,n){this.fileName=e,this.line=t,this.column=i,this.id=n}}function xne(s){const e=s.match(/\((.*):(\d+):(\d+)\)/);if(e)return{fileName:e[1],line:parseInt(e[2]),column:parseInt(e[3]),id:s};const t=s.match(/at ([^\(\)]*):(\d+):(\d+)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:s}}let x3;function kne(s){x3=s}let gG;function Ene(s){gG=s}class mG{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t,i=Fr.ofCaller()){const n=t===void 0?void 0:e,r=t===void 0?e:t;return x3({owner:n,debugName:()=>{const o=gP(r);if(o!==void 0)return o;const l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(l)return`${this.debugName}.${l[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:r},o=>r(this.read(o),o),i)}flatten(){return x3({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(gG(this,t)),this}}class kC extends mG{constructor(e){super(),this._observers=new Set,Rr()?.handleObservableCreated(this,e)}addObserver(e){const t=this._observers.size;this._observers.add(e),t===0&&this.onFirstObserverAdded(),t!==this._observers.size&&Rr()?.handleOnListenerCountChanged(this,this._observers.size)}removeObserver(e){const t=this._observers.delete(e);t&&this._observers.size===0&&this.onLastObserverRemoved(),t&&Rr()?.handleOnListenerCountChanged(this,this._observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}debugGetObservers(){return this._observers}}function xt(s,e,t=Fr.ofCaller()){let i;return typeof s=="string"?i=new vo(void 0,s,void 0):i=new vo(s,void 0,void 0),new bx(i,e,rh,t)}class bx extends kC{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i,n){super(n),this._debugNameData=e,this._equalityComparator=i,this._value=t,Rr()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this._value}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new x2(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),Rr()?.handleObservableUpdated(this,{oldValue:r,newValue:e,change:i,didChange:!0,hadValue:!0});for(const o of this._observers)t.updateObserver(o,this),o.handleChange(this,i)}finally{n&&n.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}debugGetState(){return{value:this._value}}debugSetValue(e){this._value=e}}function pG(s,e,t=Fr.ofCaller()){let i;return typeof s=="string"?i=new vo(void 0,s,void 0):i=new vo(s,void 0,void 0),new Tne(i,e,rh,t)}class Tne extends bx{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}}class Dne extends kC{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i,n){super(n),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this._deltas){Rr()?.handleObservableUpdated(this,{change:e,didChange:!0,oldValue:"(unknown)",newValue:this._value,hadValue:!0});for(const t of this._observers)t.handleChange(this,e)}this._deltas.length=0}else{Rr()?.handleObservableUpdated(this,{change:void 0,didChange:!0,oldValue:"(unknown)",newValue:this._value,hadValue:!0});for(const e of this._observers)e.handleChange(this,void 0)}}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this._observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this._observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this._observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this._observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let n;t||(t=n=new x2(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),i!==void 0&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(r,o)=>{},handlePossibleChange:r=>{}},this),this._updateCounter>1)for(const r of this._observers)r.handlePossibleChange(this)}finally{n&&n.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function lL(s,e,t=Fr.ofCaller()){return s.lazy?new Dne(new vo(s.owner,s.debugName,void 0),e,s.equalsFn??rh,t):new bx(new vo(s.owner,s.debugName,void 0),e,s.equalsFn??rh,t)}function Nne(s){switch(s){case 1:return"dependenciesMightHaveChanged";case 2:return"stale";case 3:return"upToDate";default:return"<unknown>"}}class vx{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n){this._debugNameData=e,this._runFn=t,this._changeTracker=i,this._state=2,this._updateCount=0,this._disposed=!1,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._isRunning=!1,this._store=void 0,this._delayedStore=void 0,this._changeSummary=this._changeTracker?.createChangeSummary(void 0),Rr()?.handleAutorunCreated(this,n),this._run()}dispose(){if(!this._disposed){this._disposed=!0;for(const e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&this._store.dispose(),this._delayedStore!==void 0&&this._delayedStore.dispose(),Rr()?.handleAutorunDisposed(this)}}_run(){const e=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=e,this._state=3;try{if(!this._disposed){Rr()?.handleAutorunStarted(this);const t=this._changeSummary,i=this._delayedStore;i!==void 0&&(this._delayedStore=void 0);try{this._isRunning=!0,this._changeTracker&&(this._changeTracker.beforeUpdate?.(this,t),this._changeSummary=this._changeTracker.createChangeSummary(t)),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._runFn(this,t)}catch(n){tN(n)}finally{this._isRunning=!1,i!==void 0&&i.dispose()}}}finally{this._disposed||Rr()?.handleAutorunFinished(this);for(const t of this._dependenciesToBeRemoved)t.removeObserver(this);this._dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this._state===3&&(this._state=1),this._updateCount++}endUpdate(e){try{if(this._updateCount===1)do{if(this._state===1){this._state=3;for(const t of this._dependencies)if(t.reportChanges(),this._state===2)break}this._state!==3&&this._run()}while(this._state!==3)}finally{this._updateCount--}l0(()=>this._updateCount>=0)}handlePossibleChange(e){this._state===3&&this._isDependency(e)&&(this._state=1)}handleChange(e,t){if(this._isDependency(e)){Rr()?.handleAutorunDependencyChanged(this,e,t);try{(this._changeTracker?this._changeTracker.handleChange({changedObservable:e,change:t,didChange:n=>n===e},this._changeSummary):!0)&&(this._state=2)}catch(i){tN(i)}}}_isDependency(e){return this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)}_ensureNoRunning(){if(!this._isRunning)throw new at("The reader object cannot be used outside its compute function!")}readObservable(e){if(this._ensureNoRunning(),this._disposed)return e.get();e.addObserver(this);const t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}get store(){if(this._ensureNoRunning(),this._disposed)throw new at("Cannot access store after dispose");return this._store===void 0&&(this._store=new Ze),this._store}debugGetState(){return{isRunning:this._isRunning,updateCount:this._updateCount,dependencies:this._dependencies,state:this._state,stateStr:Nne(this._state)}}debugRerun(){this._isRunning?this._state=2:this._run()}}function qt(s,e=Fr.ofCaller()){return new vx(new vo(void 0,void 0,s),s,void 0,e)}function _P(s,e,t=Fr.ofCaller()){return new vx(new vo(s.owner,s.debugName,s.debugReferenceFn??e),e,void 0,t)}function EC(s,e,t=Fr.ofCaller()){return new vx(new vo(s.owner,s.debugName,s.debugReferenceFn??e),e,s.changeTracker,t)}function Ine(s,e){const t=new Ze,i=EC({owner:s.owner,debugName:s.debugName,debugReferenceFn:s.debugReferenceFn??e,changeTracker:s.changeTracker},(n,r)=>{t.clear(),e(n,r,t)});return lt(()=>{i.dispose(),t.dispose()})}function th(s){const e=new Ze,t=_P({owner:void 0,debugName:void 0,debugReferenceFn:s},i=>{e.clear(),s(i,e)});return lt(()=>{t.dispose(),e.dispose()})}function Ane(s){switch(s){case 0:return"initial";case 1:return"dependenciesMightHaveChanged";case 2:return"stale";case 3:return"upToDate";default:return"<unknown>"}}class Gc extends kC{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,n=void 0,r,o){super(o),this._debugNameData=e,this._computeFn=t,this._changeTracker=i,this._handleLastObserverRemoved=n,this._equalityComparator=r,this._state=0,this._value=void 0,this._updateCount=0,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._changeSummary=void 0,this._isUpdating=!1,this._isComputing=!1,this._didReportChange=!1,this._isInBeforeUpdate=!1,this._isReaderValid=!1,this._store=void 0,this._delayedStore=void 0,this._removedObserverToCallEndUpdateOn=null,this._changeSummary=this._changeTracker?.createChangeSummary(void 0)}onLastObserverRemoved(){this._state=0,this._value=void 0,Rr()?.handleDerivedCleared(this);for(const e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._delayedStore!==void 0&&(this._delayedStore.dispose(),this._delayedStore=void 0),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this._observers.size===0){let t;try{this._isReaderValid=!0;let i;this._changeTracker&&(i=this._changeTracker.createChangeSummary(void 0),this._changeTracker.beforeUpdate?.(this,i)),t=this._computeFn(this,i)}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),t}else{do{if(this._state===1){for(const t of this._dependencies)if(t.reportChanges(),this._state===2)break}this._state===1&&(this._state=3),this._state!==3&&this._recompute()}while(this._state!==3);return this._value}}_recompute(){let e=!1;this._isComputing=!0,this._didReportChange=!1;const t=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=t;try{const i=this._changeSummary;this._isReaderValid=!0,this._changeTracker&&(this._isInBeforeUpdate=!0,this._changeTracker.beforeUpdate?.(this,i),this._isInBeforeUpdate=!1,this._changeSummary=this._changeTracker?.createChangeSummary(i));const n=this._state!==0,r=this._value;this._state=3;const o=this._delayedStore;o!==void 0&&(this._delayedStore=void 0);try{this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._value=this._computeFn(this,i)}finally{this._isReaderValid=!1;for(const a of this._dependenciesToBeRemoved)a.removeObserver(this);this._dependenciesToBeRemoved.clear(),o!==void 0&&o.dispose()}e=this._didReportChange||n&&!this._equalityComparator(r,this._value),Rr()?.handleObservableUpdated(this,{oldValue:r,newValue:this._value,change:void 0,didChange:e,hadValue:n})}catch(i){tN(i)}if(this._isComputing=!1,!this._didReportChange&&e)for(const i of this._observers)i.handleChange(this,void 0);else this._didReportChange=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this._isUpdating)throw new at("Cyclic deriveds are not supported yet!");this._updateCount++,this._isUpdating=!0;try{const t=this._updateCount===1;if(this._state===3&&(this._state=1,!t))for(const i of this._observers)i.handlePossibleChange(this);if(t)for(const i of this._observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(e){if(this._updateCount--,this._updateCount===0){const t=[...this._observers];for(const i of t)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){const i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(const n of i)n.endUpdate(this)}}l0(()=>this._updateCount>=0)}handlePossibleChange(e){if(this._state===3&&this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)){this._state=1;for(const t of this._observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)||this._isInBeforeUpdate){Rr()?.handleDerivedDependencyChanged(this,e,t);let i=!1;try{i=this._changeTracker?this._changeTracker.handleChange({changedObservable:e,change:t,didChange:r=>r===e},this._changeSummary):!0}catch(r){tN(r)}const n=this._state===3;if(i&&(this._state===1||n)&&(this._state=2,n))for(const r of this._observers)r.handlePossibleChange(this)}}_ensureReaderValid(){if(!this._isReaderValid)throw new at("The reader object cannot be used outside its compute function!")}readObservable(e){this._ensureReaderValid(),e.addObserver(this);const t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}get store(){return this._ensureReaderValid(),this._store===void 0&&(this._store=new Ze),this._store}addObserver(e){const t=!this._observers.has(e)&&this._updateCount>0;super.addObserver(e),t&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(e)?this._removedObserverToCallEndUpdateOn.delete(e):e.beginUpdate(this))}removeObserver(e){this._observers.has(e)&&this._updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(e)),super.removeObserver(e)}debugGetState(){return{state:this._state,stateStr:Ane(this._state),updateCount:this._updateCount,isComputing:this._isComputing,dependencies:this._dependencies,value:this._value}}debugSetValue(e){this._value=e}debugRecompute(){this._isComputing?this._state=2:this._recompute()}setValue(e,t,i){this._value=e;const n=this._observers;t.updateObserver(this,this);for(const r of n)r.handleChange(this,i)}}class Rne extends Gc{constructor(e,t,i,n=void 0,r,o,a){super(e,t,i,n,r,a),this.set=o}}function Je(s,e,t=Fr.ofCaller()){return e!==void 0?new Gc(new vo(s,void 0,e),e,void 0,void 0,rh,t):new Gc(new vo(void 0,void 0,s),s,void 0,void 0,rh,t)}function bP(s,e,t,i=Fr.ofCaller()){return new Rne(new vo(s,void 0,e),e,void 0,void 0,rh,t,i)}function Sd(s,e,t=Fr.ofCaller()){return new Gc(new vo(s.owner,s.debugName,s.debugReferenceFn),e,void 0,s.onLastObserverRemoved,s.equalsFn??rh,t)}kne(Sd);function sd(s,e,t=Fr.ofCaller()){let i,n;e===void 0?(i=s,n=void 0):(n=s,i=e);let r;return new Gc(new vo(n,void 0,i),o=>{r?r.clear():r=new Ze;const a=i(o);return a&&r.add(a),a},void 0,()=>{r&&(r.dispose(),r=void 0)},rh,t)}class Mne{constructor(e){this._value=xt(this,void 0),this.promiseResult=this._value,this.promise=e.then(t=>(Un(i=>{this._value.set(new ZV(t,void 0),i)}),t),t=>{throw Un(i=>{this._value.set(new ZV(void 0,t),i)}),t})}}class ZV{constructor(e,t){this.data=e,this.error=t}getDataOrThrow(){if(this.error)throw this.error;return this.data}}function One(s,e,t,i){return e||(e=n=>n!=null),new Promise((n,r)=>{let o=!0,a=!1;const l=s.map(h=>({isFinished:e(h),error:!1,state:h})),c=qt(h=>{const{isFinished:d,error:g,state:_}=l.read(h);(d||g)&&(o?a=!0:c.dispose(),g?r(g===!0?_:g):n(_))});o=!1,a&&c.dispose()})}function mn(...s){let e,t,i,n;return s.length===2?[t,i]=s:[e,t,i,n]=s,new y1(new vo(e,void 0,i),t,i,()=>y1.globalTransaction,rh,n??Fr.ofCaller())}class y1 extends kC{constructor(e,t,i,n,r,o){super(o),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=n,this._equalityComparator=r,this._hasValue=!1,this.handleEvent=a=>{const l=this._getValue(a),c=this._value,h=!this._hasValue||!this._equalityComparator(c,l);let d=!1;h&&(this._value=l,this._hasValue&&(d=!0,mP(this._getTransaction(),g=>{Rr()?.handleObservableUpdated(this,{oldValue:c,newValue:l,change:void 0,didChange:h,hadValue:this._hasValue});for(const _ of this._observers)g.updateObserver(_,this),_.handleChange(this,void 0)},()=>{const g=this.getDebugName();return"Event fired"+(g?`: ${g}`:"")})),this._hasValue=!0),d||Rr()?.handleObservableUpdated(this,{oldValue:c,newValue:l,change:void 0,didChange:h,hadValue:this._hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this._subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this._subscription.dispose(),this._subscription=void 0,this._hasValue=!1,this._value=void 0}get(){return this._subscription?(this._hasValue||this.handleEvent(void 0),this._value):this._getValue(void 0)}debugSetValue(e){this._value=e}debugGetState(){return{value:this._value,hasValue:this._hasValue}}}(function(s){s.Observer=y1;function e(t,i){let n=!1;y1.globalTransaction===void 0&&(y1.globalTransaction=t,n=!0);try{i()}finally{n&&(y1.globalTransaction=void 0)}}s.batchEventsGlobally=e})(mn||(mn={}));function wx(s,e=Fr.ofCaller()){return typeof s=="string"?new XV(s,void 0,e):new XV(void 0,s,e)}class XV extends kC{get debugName(){return new vo(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t,i){super(i),this._debugName=e,this._owner=t}trigger(e,t){if(!e){Un(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this._observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function tR(s,e){const t=new Pne(!0,e);s.addObserver(t);try{t.beginUpdate(s)}finally{t.endUpdate(s)}return lt(()=>{s.removeObserver(t)})}Ene(tR);class Pne{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter===1&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges()),this._counter--}handlePossibleChange(e){}handleChange(e,t){}}function Bne(s,e){let t;return Sd({owner:s,debugReferenceFn:e},n=>(t=e(n,t),t))}function Fne(s){return{createChangeSummary:e=>({changes:[]}),handleChange(e,t){for(const i in s)e.didChange(s[i])&&t.changes.push({key:i,change:e.change});return!0},beforeUpdate(e,t){for(const i in s){if(i==="changes")throw new at('property name "changes" is reserved for change tracking');t[i]=s[i].read(e)}}}}function Cx(s){return new Vne(s)}class Vne extends mG{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function Qc(s,e,t=Fr.ofCaller()){return new Hne(typeof s=="string"?s:new vo(s,void 0,void 0),e,t)}class Hne extends kC{constructor(e,t,i){super(i),this.event=t,this.handleEvent=()=>{Un(n=>{for(const r of this._observers)n.updateObserver(r,this),r.handleChange(this,void 0)},()=>this.debugName)},this.debugName=typeof e=="string"?e:e.getDebugName(this)??"Observable Signal From Event"}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function cL(s,e){let t,i=!0;return Ine({changeTracker:{createChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(n,r)=>{if(n.didChange(s)){const o=n.change;o!==void 0&&r.deltas.push(o),r.didChange=!0}return!0}}},(n,r)=>{const o=s.read(n),a=t;r.didChange&&(t=o,e(o,a,r.deltas)),i&&(i=!1,t=o)})}function Wne(s,e){return Bne(s,(t,i)=>i??e(t))}function qv(s,e){switch(typeof s){case"number":return""+s;case"string":return s.length+2<=e?`"${s}"`:`"${s.substr(0,e-7)}"+...`;case"boolean":return s?"true":"false";case"undefined":return"undefined";case"object":return s===null?"null":Array.isArray(s)?zne(s,e):Une(s,e);case"symbol":return s.toString();case"function":return`[[Function${s.name?" "+s.name:""}]]`;default:return""+s}}function zne(s,e){let t="[ ",i=!0;for(const n of s){if(i||(t+=", "),t.length-5>e){t+="...";break}i=!1,t+=`${qv(n,e-t.length)}`}return t+=" ]",t}function Une(s,e){if(typeof s.toString=="function"&&s.toString!==Object.prototype.toString){const r=s.toString();return r.length<=e?r:r.substring(0,e-3)+"..."}const t=fG(s);let i=t?t+"(":"{ ",n=!0;for(const[r,o]of Object.entries(s)){if(n||(i+=", "),i.length-5>e){i+="...";break}n=!1,i+=`${r}: ${qv(o,e-i.length)}`}return i+=t?")":" }",i}class vP{static createClient(e,t){return new vP(e,t)}constructor(e,t){this._channelFactory=e,this._getHandler=t,this._channel=this._channelFactory({handleNotification:r=>{const o=r,a=this._getHandler().notifications[o[0]];if(!a)throw new Error(`Unknown notification "${o[0]}"!`);a(...o[1])},handleRequest:r=>{const o=r;try{return{type:"result",value:this._getHandler().requests[o[0]](...o[1])}}catch(a){return{type:"error",value:a}}}});const i=new Proxy({},{get:(r,o)=>async(...a)=>{const l=await this._channel.sendRequest([o,a]);if(l.type==="error")throw l.value;return l.value}}),n=new Proxy({},{get:(r,o)=>(...a)=>{this._channel.sendNotification([o,a])}});this.api={notifications:n,requests:i}}}function qne(s,e){const t=globalThis;let i=[],n;const{channel:r,handler:o}=$ne({sendNotification:l=>{n?n.sendNotification(l):i.push(l)}});let a;return(t.$$debugValueEditor_debugChannels??(t.$$debugValueEditor_debugChannels={}))[s]=l=>{a=e(),n=l;for(const c of i)l.sendNotification(c);return i=[],o},vP.createClient(r,()=>{if(!a)throw new Error("Not supported");return a})}function $ne(s){let e;return{channel:i=>(e=i,{sendNotification:n=>{s.sendNotification(n)},sendRequest:n=>{throw new Error("not supported")}}),handler:{handleRequest:i=>i.type==="notification"?e?.handleNotification(i.data):e?.handleRequest(i.data)}}}class jne{constructor(){this._timeout=void 0}throttle(e,t){this._timeout===void 0&&(this._timeout=setTimeout(()=>{this._timeout=void 0,e()},t))}dispose(){this._timeout!==void 0&&clearTimeout(this._timeout)}}function _G(s,e){for(const t in e)s[t]&&typeof s[t]=="object"&&e[t]&&typeof e[t]=="object"?_G(s[t],e[t]):s[t]=e[t]}function bG(s,e){for(const t in e)e[t]===null?delete s[t]:s[t]&&typeof s[t]=="object"&&e[t]&&typeof e[t]=="object"?bG(s[t],e[t]):s[t]=e[t]}const g1=class g1{static getInstance(){return g1._instance===void 0&&(g1._instance=new g1),g1._instance}getTransactionState(){const e=[],t=[...this._activeTransactions];if(t.length===0)return;const i=t.flatMap(r=>r.debugGetUpdatingObservers()??[]).map(r=>r.observer),n=new Set;for(;i.length>0;){const r=i.shift();if(n.has(r))continue;n.add(r);const o=this._getInfo(r,a=>{n.has(a)||i.push(a)});o&&e.push(o)}return{names:t.map(r=>r.getDebugName()??"tx"),affected:e}}_getObservableInfo(e){const t=this._instanceInfos.get(e);if(!t){mi(new at("No info found"));return}return t}_getAutorunInfo(e){const t=this._instanceInfos.get(e);if(!t){mi(new at("No info found"));return}return t}_getInfo(e,t){if(e instanceof Gc){const i=[...e.debugGetObservers()];for(const l of i)t(l);const n=this._getObservableInfo(e);if(!n)return;const r=e.debugGetState(),o={name:e.debugName,instanceId:n.instanceId,updateCount:r.updateCount},a=[...n.changedObservables].map(l=>this._instanceInfos.get(l)?.instanceId).filter(dc);if(r.isComputing)return{...o,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(r.state){case 0:return{...o,type:"observable/derived",state:"noValue"};case 3:return{...o,type:"observable/derived",state:"upToDate"};case 2:return{...o,type:"observable/derived",state:"stale",changedDependencies:a};case 1:return{...o,type:"observable/derived",state:"possiblyStale"}}}else if(e instanceof vx){const i=this._getAutorunInfo(e);if(!i)return;const n={name:e.debugName,instanceId:i.instanceId,updateCount:i.updateCount},r=[...i.changedObservables].map(o=>this._instanceInfos.get(o).instanceId);if(e.debugGetState().isRunning)return{...n,type:"autorun",state:"updating",changedDependencies:r};switch(e.debugGetState().state){case 3:return{...n,type:"autorun",state:"upToDate"};case 2:return{...n,type:"autorun",state:"stale",changedDependencies:r};case 1:return{...n,type:"autorun",state:"possiblyStale"}}}}_formatObservable(e){const t=this._getObservableInfo(e);if(t)return{name:e.debugName,instanceId:t.instanceId}}_formatObserver(e){if(e instanceof Gc)return{name:e.toString(),instanceId:this._getObservableInfo(e)?.instanceId};const t=this._getAutorunInfo(e);if(t)return{name:e.toString(),instanceId:t.instanceId}}constructor(){this._declarationId=0,this._instanceId=0,this._declarations=new Map,this._instanceInfos=new WeakMap,this._aliveInstances=new Map,this._activeTransactions=new Set,this._channel=qne("observableDevTools",()=>({notifications:{setDeclarationIdFilter:e=>{},logObservableValue:e=>{console.log("logObservableValue",e)},flushUpdates:()=>{this._flushUpdates()},resetUpdates:()=>{this._pendingChanges=null,this._channel.api.notifications.handleChange(this._fullState,!0)}},requests:{getDeclarations:()=>{const e={};for(const t of this._declarations.values())e[t.id]=t;return{decls:e}},getSummarizedInstances:()=>null,getObservableValueInfo:e=>({observers:[...this._aliveInstances.get(e).debugGetObservers()].map(i=>this._formatObserver(i)).filter(dc)}),getDerivedInfo:e=>{const t=this._aliveInstances.get(e);return{dependencies:[...t.debugGetState().dependencies].map(i=>this._formatObservable(i)).filter(dc),observers:[...t.debugGetObservers()].map(i=>this._formatObserver(i)).filter(dc)}},getAutorunInfo:e=>({dependencies:[...this._aliveInstances.get(e).debugGetState().dependencies].map(i=>this._formatObservable(i)).filter(dc)}),getTransactionState:()=>this.getTransactionState(),setValue:(e,t)=>{const i=this._aliveInstances.get(e);if(i instanceof Gc)i.debugSetValue(t);else if(i instanceof bx)i.debugSetValue(t);else if(i instanceof y1)i.debugSetValue(t);else throw new at("Observable is not supported");const n=[...i.debugGetObservers()];for(const r of n)r.beginUpdate(i);for(const r of n)r.handleChange(i,void 0);for(const r of n)r.endUpdate(i)},getValue:e=>{const t=this._aliveInstances.get(e);if(t instanceof Gc)return qv(t.debugGetState().value,200);if(t instanceof bx)return qv(t.debugGetState().value,200)},logValue:e=>{const t=this._aliveInstances.get(e);if(t&&"get"in t)console.log("Logged Value:",t.get());else throw new at("Observable is not supported")},rerun:e=>{const t=this._aliveInstances.get(e);if(t instanceof Gc)t.debugRecompute();else if(t instanceof vx)t.debugRerun();else throw new at("Observable is not supported")}}})),this._pendingChanges=null,this._changeThrottler=new jne,this._fullState={},this._flushUpdates=()=>{this._pendingChanges!==null&&(this._channel.api.notifications.handleChange(this._pendingChanges,!1),this._pendingChanges=null)},Fr.enable()}_handleChange(e){bG(this._fullState,e),this._pendingChanges===null?this._pendingChanges=e:_G(this._pendingChanges,e),this._changeThrottler.throttle(this._flushUpdates,10)}_getDeclarationId(e,t){if(!t)return-1;let i=this._declarations.get(t.id);return i===void 0&&(i={id:this._declarationId++,type:e,url:t.fileName,line:t.line,column:t.column},this._declarations.set(t.id,i),this._handleChange({decls:{[i.id]:i}})),i.id}handleObservableCreated(e,t){const n={declarationId:this._getDeclarationId("observable/value",t),instanceId:this._instanceId++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,n)}handleOnListenerCountChanged(e,t){const i=this._getObservableInfo(e);if(i){if(i.listenerCount===0&&t>0){const n=e instanceof Gc?"observable/derived":"observable/value";this._aliveInstances.set(i.instanceId,e),this._handleChange({instances:{[i.instanceId]:{instanceId:i.instanceId,declarationId:i.declarationId,formattedValue:i.lastValue,type:n,name:e.debugName}}})}else i.listenerCount>0&&t===0&&(this._handleChange({instances:{[i.instanceId]:null}}),this._aliveInstances.delete(i.instanceId));i.listenerCount=t}}handleObservableUpdated(e,t){if(e instanceof Gc){this._handleDerivedRecomputed(e,t);return}const i=this._getObservableInfo(e);i&&t.didChange&&(i.lastValue=qv(t.newValue,30),i.listenerCount>0&&this._handleChange({instances:{[i.instanceId]:{formattedValue:i.lastValue}}}))}handleAutorunCreated(e,t){const n={declarationId:this._getDeclarationId("autorun",t),instanceId:this._instanceId++,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,n),this._aliveInstances.set(n.instanceId,e),n&&this._handleChange({instances:{[n.instanceId]:{instanceId:n.instanceId,declarationId:n.declarationId,runCount:0,type:"autorun",name:e.debugName}}})}handleAutorunDisposed(e){const t=this._getAutorunInfo(e);t&&(this._handleChange({instances:{[t.instanceId]:null}}),this._instanceInfos.delete(e),this._aliveInstances.delete(t.instanceId))}handleAutorunDependencyChanged(e,t,i){const n=this._getAutorunInfo(e);n&&n.changedObservables.add(t)}handleAutorunStarted(e){}handleAutorunFinished(e){const t=this._getAutorunInfo(e);t&&(t.changedObservables.clear(),t.updateCount++,this._handleChange({instances:{[t.instanceId]:{runCount:t.updateCount}}}))}handleDerivedDependencyChanged(e,t,i){const n=this._getObservableInfo(e);n&&n.changedObservables.add(t)}_handleDerivedRecomputed(e,t){const i=this._getObservableInfo(e);if(!i)return;const n=qv(t.newValue,30);i.updateCount++,i.changedObservables.clear(),i.lastValue=n,i.listenerCount>0&&this._handleChange({instances:{[i.instanceId]:{formattedValue:n,recomputationCount:i.updateCount}}})}handleDerivedCleared(e){const t=this._getObservableInfo(e);t&&(t.lastValue=void 0,t.changedObservables.clear(),t.listenerCount>0&&this._handleChange({instances:{[t.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(e){this._activeTransactions.add(e)}handleEndTransaction(e){this._activeTransactions.delete(e)}};g1._instance=void 0;let k3=g1;hO&&hO.VSCODE_DEV_DEBUG_OBSERVABLES&&Lne(k3.getInstance());const{getWindow:nt,getDocument:Gne,getWindows:vG,getWindowsCount:Kne,getWindowId:yx,getWindowById:QV,onDidRegisterWindow:k2,onWillUnregisterWindow:Yne,onDidUnregisterWindow:Zne}=(function(){const s=new Map;Aie(Ri,1);const e={window:Ri,disposables:new Ze};s.set(Ri.vscodeWindowId,e);const t=new ne,i=new ne,n=new ne;function r(o,a){return(typeof o=="number"?s.get(o):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:n.event,onDidUnregisterWindow:i.event,registerWindow(o){if(s.has(o.vscodeWindowId))return pe.None;const a=new Ze,l={window:o,disposables:a.add(new Ze)};return s.set(o.vscodeWindowId,l),a.add(lt(()=>{s.delete(o.vscodeWindowId),i.fire(o)})),a.add(ue(o,Re.BEFORE_UNLOAD,()=>{n.fire(o)})),t.fire(l),a},getWindows(){return s.values()},getWindowsCount(){return s.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return s.has(o)},getWindowById:r,getWindow(o){const a=o;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;const l=o;return l?.view?l.view.window:Ri},getDocument(o){return nt(o).document}}})();function oh(s){for(;s.firstChild;)s.firstChild.remove()}class Xne{constructor(e,t,i,n){this._node=e,this._type=t,this._handler=i,this._options=n||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ue(s,e,t,i){return new Xne(s,e,t,i)}function Qne(s,e){return function(t){return e(new kl(s,t))}}function Jne(s){return function(e){return s(new Mi(e))}}const Cr=function(e,t,i,n){let r=i;return t==="click"||t==="mousedown"||t==="contextmenu"?r=Qne(nt(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=Jne(i)),ue(e,t,r,n)};function ese(s,e,t){return ue(s,Nd&&S2.pointerEvents?Re.POINTER_DOWN:Re.MOUSE_DOWN,e,t)}function tse(s,e,t){return ue(s,Nd&&S2.pointerEvents?Re.POINTER_MOVE:Re.MOUSE_MOVE,e,t)}function JV(s,e,t){return ue(s,Nd&&S2.pointerEvents?Re.POINTER_UP:Re.MOUSE_UP,e,t)}function pT(s,e,t){return aL(s,e,t)}let wG,na;class iR extends cP{constructor(e){super(),this.defaultTarget=e&&nt(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class LM{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){mi(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const s=new Map,e=new Map,t=new Map,i=new Map,n=r=>{t.set(r,!1);const o=s.get(r)??[];for(e.set(r,o),s.set(r,[]),i.set(r,!0);o.length>0;)o.sort(LM.sort),o.shift().execute();i.set(r,!1)};na=(r,o,a=0)=>{const l=yx(r),c=new LM(o,a);let h=s.get(l);return h||(h=[],s.set(l,h)),h.push(c),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>n(l))),c},wG=(r,o,a)=>{const l=yx(r);if(i.get(l)){const c=new LM(o,a);let h=e.get(l);return h||(h=[],e.set(l,h)),h.push(c),c}else return na(r,o,a)}})();function wP(s){return nt(s).getComputedStyle(s,null)}function E3(s,e,t){const i=nt(s),n=i.document;if(s!==n.body)return new Qf(s.clientWidth,s.clientHeight);if(Nd&&i?.visualViewport)return new Qf(i.visualViewport.width,i.visualViewport.height);if(i?.innerWidth&&i.innerHeight)return new Qf(i.innerWidth,i.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Qf(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Qf(n.documentElement.clientWidth,n.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class An{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t){const i=wP(e),n=i?i.getPropertyValue(t):"0";return An.convertToPixels(e,n)}static getBorderLeftWidth(e){return An.getDimension(e,"border-left-width")}static getBorderRightWidth(e){return An.getDimension(e,"border-right-width")}static getBorderTopWidth(e){return An.getDimension(e,"border-top-width")}static getBorderBottomWidth(e){return An.getDimension(e,"border-bottom-width")}static getPaddingLeft(e){return An.getDimension(e,"padding-left")}static getPaddingRight(e){return An.getDimension(e,"padding-right")}static getPaddingTop(e){return An.getDimension(e,"padding-top")}static getPaddingBottom(e){return An.getDimension(e,"padding-bottom")}static getMarginLeft(e){return An.getDimension(e,"margin-left")}static getMarginTop(e){return An.getDimension(e,"margin-top")}static getMarginRight(e){return An.getDimension(e,"margin-right")}static getMarginBottom(e){return An.getDimension(e,"margin-bottom")}}const m1=class m1{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new m1(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof m1?e:new m1(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};m1.None=new m1(0,0);let Qf=m1;function ise(s){let e=s.offsetParent,t=s.offsetTop,i=s.offsetLeft;for(;(s=s.parentNode)!==null&&s!==s.ownerDocument.body&&s!==s.ownerDocument.documentElement;){t-=s.scrollTop;const n=yG(s)?null:wP(s);n&&(i-=n.direction!=="rtl"?s.scrollLeft:-s.scrollLeft),s===e&&(i+=An.getBorderLeftWidth(s),t+=An.getBorderTopWidth(s),t+=s.offsetTop,i+=s.offsetLeft,e=s.offsetParent)}return{left:i,top:t}}function pc(s){const e=s.getBoundingClientRect(),t=nt(s);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function CG(s){let e=s,t=1;do{const i=wP(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function CP(s){const e=An.getMarginLeft(s)+An.getMarginRight(s);return s.offsetWidth+e}function xM(s){const e=An.getBorderLeftWidth(s)+An.getBorderRightWidth(s),t=An.getPaddingLeft(s)+An.getPaddingRight(s);return s.offsetWidth-e-t}function nse(s){const e=An.getBorderTopWidth(s)+An.getBorderBottomWidth(s),t=An.getPaddingTop(s)+An.getPaddingBottom(s);return s.offsetHeight-e-t}function T3(s){const e=An.getMarginTop(s)+An.getMarginBottom(s);return s.offsetHeight+e}function zs(s,e){return!!e?.contains(s)}function sse(s,e,t){for(;s&&s.nodeType===s.ELEMENT_NODE;){if(s.classList.contains(e))return s;if(t){if(typeof t=="string"){if(s.classList.contains(t))return null}else if(s===t)return null}s=s.parentNode}return null}function kM(s,e,t){return!!sse(s,e,t)}function yG(s){return s&&!!s.host&&!!s.mode}function D3(s){return!!f0(s)}function f0(s){for(;s.parentNode;){if(s===s.ownerDocument?.body)return null;s=s.parentNode}return yG(s)?s:null}function Us(){let s=nR().activeElement;for(;s?.shadowRoot;)s=s.shadowRoot.activeElement;return s}function yP(s){return Us()===s}function SG(s){return zs(Us(),s)}function nR(){return Kne()<=1?Ri.document:Array.from(vG()).map(({window:e})=>e.document).find(e=>e.hasFocus())??Ri.document}function wi(){return nR().defaultView?.window??Ri}const rse=new class{constructor(){this.mutationObservers=new Map}observe(s,e,t){let i=this.mutationObservers.get(s);i||(i=new Map,this.mutationObservers.set(s,i));const n=dP(t);let r=i.get(n);if(r)r.users+=1;else{const o=new ne,a=new MutationObserver(c=>o.fire(c));a.observe(s,t);const l=r={users:1,observer:a,onDidMutate:o.event};e.add(lt(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),i?.delete(n),i?.size===0&&this.mutationObservers.delete(s))})),i.set(n,r)}return r.onDidMutate}};function qn(s){return s instanceof HTMLElement||s instanceof nt(s).HTMLElement}function eH(s){return s instanceof HTMLAnchorElement||s instanceof nt(s).HTMLAnchorElement}function LG(s){return s instanceof SVGElement||s instanceof nt(s).SVGElement}function SP(s){return s instanceof MouseEvent||s instanceof nt(s).MouseEvent}function Kf(s){return s instanceof KeyboardEvent||s instanceof nt(s).KeyboardEvent}const Re={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend"};function ose(s){const e=s;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const ni={stop:(s,e)=>(s.preventDefault(),e&&s.stopPropagation(),s)};function ase(s){const e=[];for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)e[t]=s.scrollTop,s=s.parentNode;return e}function lse(s,e){for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)s.scrollTop!==e[t]&&(s.scrollTop=e[t]),s=s.parentNode}let cse=class N3 extends pe{get onDidFocus(){return this._onDidFocus.event}get onDidBlur(){return this._onDidBlur.event}static hasFocusWithin(e){if(qn(e)){const t=f0(e),i=t?t.activeElement:e.ownerDocument.activeElement;return zs(i,e)}else{const t=e;return zs(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new ne),this._onDidBlur=this._register(new ne);let t=N3.hasFocusWithin(e),i=!1;const n=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(i=!0,(qn(e)?nt(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{N3.hasFocusWithin(e)!==t&&(t?r():n())},this._register(ue(e,Re.FOCUS,n,!0)),this._register(ue(e,Re.BLUR,r,!0)),qn(e)&&(this._register(ue(e,Re.FOCUS_IN,()=>this._refreshStateHandler())),this._register(ue(e,Re.FOCUS_OUT,()=>this._refreshStateHandler())))}};function iC(s){return new cse(s)}function use(s,e){return s.after(e),e}function Qe(s,...e){if(s.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function sR(s,e){return s.insertBefore(e,s.firstChild),e}function Pr(s,...e){s.textContent="",Qe(s,...e)}const hse=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Sx;(function(s){s.HTML="http://www.w3.org/1999/xhtml",s.SVG="http://www.w3.org/2000/svg"})(Sx||(Sx={}));function xG(s,e,t,...i){const n=hse.exec(e);if(!n)throw new Error("Bad use of emmet");const r=n[1]||"div";let o;return s!==Sx.HTML?o=document.createElementNS(s,r):o=document.createElement(r),n[3]&&(o.id=n[3]),n[4]&&(o.className=n[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...i),o}function ot(s,e,...t){return xG(Sx.HTML,s,e,...t)}ot.SVG=function(s,e,...t){return xG(Sx.SVG,s,e,...t)};function kG(...s){for(const e of s)e.style.display="",e.removeAttribute("aria-hidden")}function tH(...s){for(const e of s)e.style.display="none",e.setAttribute("aria-hidden","true")}function iH(s,e){const t=s.devicePixelRatio*e;return Math.max(1,Math.floor(t))/s.devicePixelRatio}function EG(s){Ri.open(s,"_blank","noopener")}function dse(s,e){const t=()=>{e(),i=na(s,t)};let i=na(s,t);return lt(()=>i.dispose())}hG.setPreferredWebSchema(/^https:/.test(Ri.location.href)?"https":"http");class Fm extends ne{constructor(){super(),this._subscriptions=new Ze,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Ie.runAndSubscribe(k2,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Ri,disposables:this._subscriptions}))}registerListeners(e,t){t.add(ue(e,"keydown",i=>{if(i.defaultPrevented)return;const n=new Mi(i);if(!(n.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(n.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(ue(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(ue(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(ue(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(ue(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(ue(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Fm.instance||(Fm.instance=new Fm),Fm.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class fse extends pe{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(ue(this.element,Re.DRAG_START,e=>{this.callbacks.onDragStart?.(e)})),this.callbacks.onDrag&&this._register(ue(this.element,Re.DRAG,e=>{this.callbacks.onDrag?.(e)})),this._register(ue(this.element,Re.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter?.(e)})),this._register(ue(this.element,Re.DRAG_OVER,e=>{e.preventDefault(),this.callbacks.onDragOver?.(e,e.timeStamp-this.dragStartTime)})),this._register(ue(this.element,Re.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(e))})),this._register(ue(this.element,Re.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(e)})),this._register(ue(this.element,Re.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(e)}))}}const gse=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Jt(s,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const n=gse.exec(s);if(!n||!n.groups)throw new Error("Bad use of h");const r=n.groups.tag||"div",o=document.createElement(r);n.groups.id&&(o.id=n.groups.id);const a=[];if(n.groups.class)for(const c of n.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(n.groups.name&&(l[n.groups.name]=o),i)for(const c of i)qn(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,h]of Object.entries(t))if(c!=="className")if(c==="style")for(const[d,g]of Object.entries(h))o.style.setProperty(Lx(d),typeof g=="number"?g+"px":""+g);else c==="tabIndex"?o.tabIndex=h:o.setAttribute(Lx(c),h.toString());return l.root=o,l}function Lx(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ih(s){return s.tagName.toLowerCase()==="input"||s.tagName.toLowerCase()==="textarea"||qn(s)&&!!s.editContext}var nH;(function(s){function e(n=void 0){return(r,o,a)=>{const l=o.class;delete o.class;const c=o.ref;delete o.ref;const h=o.obsRef;return delete o.obsRef,new pse(r,c,h,n,l,o,a)}}function t(n,r=void 0){const o=e(r);return(a,l)=>o(n,a,l)}s.div=t("div"),s.elem=e(void 0),s.svg=t("svg","http://www.w3.org/2000/svg"),s.svgElem=e("http://www.w3.org/2000/svg");function i(){let n;const r=function(o){n=o};return Object.defineProperty(r,"element",{get(){if(!n)throw new at("Make sure the ref is set before accessing the element. Maybe wrong initialization order?");return n}}),r}s.ref=i})(nH||(nH={}));class LP{constructor(e,t,i,n,r,o,a){this._deriveds=[],this._element=n?document.createElementNS(n,e):document.createElement(e),t&&t(this._element),i&&this._deriveds.push(Je(c=>{i(this),c.store.add({dispose:()=>{i(null)}})})),r&&(DG(r)?this._deriveds.push(Je(this,c=>{sH(this._element,rH(r,c))})):sH(this._element,rH(r,void 0)));for(const[c,h]of Object.entries(o))if(c==="style")for(const[d,g]of Object.entries(h)){const _=Lx(d);S1(g)?this._deriveds.push(Sd({owner:this,debugName:()=>`set.style.${_}`},b=>{this._element.style.setProperty(_,oH(g.read(b)))})):this._element.style.setProperty(_,oH(g))}else c==="tabIndex"?S1(h)?this._deriveds.push(Je(this,d=>{this._element.tabIndex=h.read(d)})):this._element.tabIndex=h:c.startsWith("on")?this._element[c]=h:S1(h)?this._deriveds.push(Sd({owner:this,debugName:()=>`set.${c}`},d=>{aH(this._element,c,h.read(d))})):aH(this._element,c,h);if(a){let c=function(d,g){return S1(g)?c(d,g.read(d)):Array.isArray(g)?g.flatMap(_=>c(d,_)):g instanceof LP?(d&&g.readEffect(d),[g._element]):g?[g]:[]};var l=c;const h=Je(this,d=>{this._element.replaceChildren(...c(d,a))});this._deriveds.push(h),NG(a)||h.get()}}readEffect(e){for(const t of this._deriveds)t.read(e)}keepUpdated(e){return Je(t=>{this.readEffect(t)}).recomputeInitiallyAndOnChange(e),this}toDisposableLiveElement(){const e=new Ze;return this.keepUpdated(e),new mse(this._element,e)}}function sH(s,e){LG(s)?s.setAttribute("class",e):s.className=e}function TG(s,e,t){if(S1(s)){t(s.read(e));return}if(Array.isArray(s)){for(const i of s)TG(i,e,t);return}t(s)}function rH(s,e){let t="";return TG(s,e,i=>{i&&(t.length===0?t=i:t+=" "+i)}),t}function DG(s){return S1(s)?!0:Array.isArray(s)?s.some(e=>DG(e)):!1}function oH(s){return typeof s=="number"?s+"px":s}function NG(s){return S1(s)?!0:Array.isArray(s)?s.some(e=>NG(e)):!1}class mse{constructor(e,t){this.element=e,this._disposable=t}dispose(){this._disposable.dispose()}}class pse extends LP{constructor(){super(...arguments),this._isHovered=void 0,this._didMouseMoveDuringHover=void 0}get element(){return this._element}get isHovered(){if(!this._isHovered){const e=xt("hovered",!1);this._element.addEventListener("mouseenter",t=>e.set(!0,void 0)),this._element.addEventListener("mouseleave",t=>e.set(!1,void 0)),this._isHovered=e}return this._isHovered}get didMouseMoveDuringHover(){if(!this._didMouseMoveDuringHover){let e=!1;const t=xt("didMouseMoveDuringHover",!1);this._element.addEventListener("mouseenter",i=>{e=!0}),this._element.addEventListener("mousemove",i=>{e&&t.set(!0,void 0)}),this._element.addEventListener("mouseleave",i=>{e=!1,t.set(!1,void 0)}),this._didMouseMoveDuringHover=t}return this._didMouseMoveDuringHover}}function aH(s,e,t){t==null?s.removeAttribute(Lx(e)):s.setAttribute(Lx(e),String(t))}function S1(s){return!!s&&s.read!==void 0&&s.reportChanges!==void 0}class _se extends pe{constructor(e){super(),this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class bse extends pe{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new _se(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}}class vse{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=yx(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new bse(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),Ie.once(Zne)(({vscodeWindowId:n})=>{n===t&&(i?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const fN=new vse;class gN{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}focus(){this.domNode.focus()}setMaxWidth(e){const t=Pu(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Pu(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Pu(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Pu(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Pu(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Pu(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Pu(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Pu(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Pu(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Pu(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Pu(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Pu(s){return typeof s=="number"?`${s}px`:s}function ei(s){return new gN(s)}function Sr(s,e){s instanceof gN?(s.setFontFamily(e.getMassagedFontFamily()),s.setFontWeight(e.fontWeight),s.setFontSize(e.fontSize),s.setFontFeatureSettings(e.fontFeatureSettings),s.setFontVariationSettings(e.fontVariationSettings),s.setLineHeight(e.lineHeight),s.setLetterSpacing(e.letterSpacing)):(s.style.fontFamily=e.getMassagedFontFamily(),s.style.fontWeight=e.fontWeight,s.style.fontSize=e.fontSize+"px",s.style.fontFeatureSettings=e.fontFeatureSettings,s.style.fontVariationSettings=e.fontVariationSettings,s.style.lineHeight=e.lineHeight+"px",s.style.letterSpacing=e.letterSpacing+"px")}class wse{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class xP{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Sr(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");Sr(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const n=document.createElement("div");Sr(n,this._bareFontInfo),n.style.fontStyle="italic",e.appendChild(n);const r=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=i),o.type===1&&(a=n),a.appendChild(document.createElement("br"));const l=document.createElement("span");xP._render(l,o),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let i=" ";for(let n=0;n<8;n++)i+=i;e.innerText=i}else{let i=t.chr;for(let n=0;n<8;n++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],n=this._testElements[e];i.fulfill(n.offsetWidth/256)}}}function Cse(s,e,t){new xP(e,t).read(s)}const Im=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new ne,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(s){s=Math.min(Math.max(-5,s),20),this._zoomLevel!==s&&(this._zoomLevel=s,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},yse=Bt?1.5:1.35,EM=8;class P1{static createFromValidatedSettings(e,t,i){const n=e.get(58),r=e.get(62),o=e.get(61),a=e.get(60),l=e.get(63),c=e.get(75),h=e.get(72);return P1._create(n,r,o,a,l,c,h,t,i)}static _create(e,t,i,n,r,o,a,l,c){o===0?o=yse*i:o<EM&&(o=o*i),o=Math.round(o),o<EM&&(o=EM);const h=1+(c?0:Im.getZoomLevel()*.1);return i*=h,o*=h,r===hx.TRANSLATE&&(t==="normal"||t==="bold"?r=hx.OFF:(r=`'wght' ${parseInt(t,10)}`,t="normal")),new P1({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:n,fontVariationSettings:r,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Nl.fontFamily,t=P1._wrapInQuotes(this.fontFamily);return this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const Sse=2;class I3 extends P1{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=Sse,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class Lse extends pe{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=yx(e);let i=this._cache.get(t);return i||(i=new xse,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let n=!1;for(const r of i)r.isTrusted||(n=!0,t.remove(r));n&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let n=this._actualReadFontInfo(e,t);(n.typicalHalfwidthCharacterWidth<=2||n.typicalFullwidthCharacterWidth<=2||n.spaceWidth<=2||n.maxDigitWidth<=2)&&(n=new I3({pixelRatio:fN.getInstance(e).value,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontSize:n.fontSize,fontFeatureSettings:n.fontFeatureSettings,fontVariationSettings:n.fontVariationSettings,lineHeight:n.lineHeight,letterSpacing:n.letterSpacing,isMonospace:n.isMonospace,typicalHalfwidthCharacterWidth:Math.max(n.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(n.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:n.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(n.spaceWidth,5),middotWidth:Math.max(n.middotWidth,5),wsmiddotWidth:Math.max(n.wsmiddotWidth,5),maxDigitWidth:Math.max(n.maxDigitWidth,5)},!1)),this._writeToCache(e,t,n)}return i.get(t)}_createRequest(e,t,i,n){const r=new wse(e,t);return i.push(r),n?.push(r),r}_actualReadFontInfo(e,t){const i=[],n=[],r=this._createRequest("n",0,i,n),o=this._createRequest("ｍ",0,i,null),a=this._createRequest(" ",0,i,n),l=this._createRequest("0",0,i,n),c=this._createRequest("1",0,i,n),h=this._createRequest("2",0,i,n),d=this._createRequest("3",0,i,n),g=this._createRequest("4",0,i,n),_=this._createRequest("5",0,i,n),b=this._createRequest("6",0,i,n),C=this._createRequest("7",0,i,n),S=this._createRequest("8",0,i,n),E=this._createRequest("9",0,i,n),x=this._createRequest("→",0,i,n),T=this._createRequest("￫",0,i,null),N=this._createRequest("·",0,i,n),A=this._createRequest("⸱",0,i,null),P="|/-_ilm%";for(let B=0,F=P.length;B<F;B++)this._createRequest(P.charAt(B),0,i,n),this._createRequest(P.charAt(B),1,i,n),this._createRequest(P.charAt(B),2,i,n);Cse(e,t,i);const O=Math.max(l.width,c.width,h.width,d.width,g.width,_.width,b.width,C.width,S.width,E.width);let V=t.fontFeatureSettings===rp.OFF;const U=n[0].width;for(let B=1,F=n.length;V&&B<F;B++){const W=U-n[B].width;if(W<-.001||W>.001){V=!1;break}}let Y=!0;return V&&T.width!==U&&(Y=!1),T.width>x.width&&(Y=!1),new I3({pixelRatio:fN.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:V,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:Y,spaceWidth:a.width,middotWidth:N.width,wsmiddotWidth:A.width,maxDigitWidth:O},!0)}}class xse{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const A3=new Lse;var eh;(function(s){s.serviceIds=new Map,s.DI_TARGET="$di$target",s.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[s.DI_DEPENDENCIES]||[]}s.getServiceDependencies=e})(eh||(eh={}));const Zt=At("instantiationService");function kse(s,e,t){e[eh.DI_TARGET]===e?e[eh.DI_DEPENDENCIES].push({id:s,index:t}):(e[eh.DI_DEPENDENCIES]=[{id:s,index:t}],e[eh.DI_TARGET]=e)}function At(s){if(eh.serviceIds.has(s))return eh.serviceIds.get(s);const e=function(t,i,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");kse(e,t,n)};return e.toString=()=>s,eh.serviceIds.set(s,e),e}const Es=At("codeEditorService"),So=At("modelService"),rR=At("textModelService");class Zm extends pe{get onDidChange(){return this._onDidChange.event}constructor(e,t="",i="",n=!0,r){super(),this._onDidChange=this._register(new ne),this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class g0 extends pe{constructor(){super(...arguments),this._onWillRun=this._register(new ne),this._onDidRun=this._register(new ne)}get onWillRun(){return this._onWillRun.event}get onDidRun(){return this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(n){i=n}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}const GL=class GL{constructor(){this.id=GL.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new GL,...i]:t=i);return t}async run(){}};GL.ID="vs.actions.separator";let Mr=GL;class oR{get actions(){return this._actions}constructor(e,t,i,n){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=n,this._actions=i}async run(){}}const iA=class iA extends Zm{constructor(){super(iA.ID,y(28,"(empty)"),void 0,!1)}};iA.ID="vs.actions.empty";let R3=iA;function B1(s){return{id:s.id,label:s.label,tooltip:s.tooltip??s.label,class:s.class,enabled:s.enabled??!0,checked:s.checked,run:async(...e)=>s.run(...e)}}var M3;(function(s){function e(t){return!!t&&typeof t=="object"&&typeof t.id=="string"}s.isThemeColor=e})(M3||(M3={}));var Gt;(function(s){s.iconNameSegment="[A-Za-z0-9]+",s.iconNameExpression="[A-Za-z0-9-]+",s.iconModifierExpression="~[A-Za-z]+",s.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${s.iconNameExpression})(${s.iconModifierExpression})?$`);function t(g){const _=e.exec(g.id);if(!_)return t(Ue.error);const[,b,C]=_,S=["codicon","codicon-"+b];return C&&S.push("codicon-modifier-"+C.substring(1)),S}s.asClassNameArray=t;function i(g){return t(g).join(" ")}s.asClassName=i;function n(g){return"."+t(g).join(".")}s.asCSSSelector=n;function r(g){return!!g&&typeof g=="object"&&typeof g.id=="string"&&(typeof g.color>"u"||M3.isThemeColor(g.color))}s.isThemeIcon=r;const o=new RegExp(`^\\$\\((${s.iconNameExpression}(?:${s.iconModifierExpression})?)\\)$`);function a(g){const _=o.exec(g);if(!_)return;const[,b]=_;return{id:b}}s.fromString=a;function l(g){return{id:g}}s.fromId=l;function c(g,_){let b=g.id;const C=b.lastIndexOf("~");return C!==-1&&(b=b.substring(0,C)),_&&(b=`${b}~${_}`),{id:b}}s.modify=c;function h(g){const _=g.id.lastIndexOf("~");if(_!==-1)return g.id.substring(_+1)}s.getModifier=h;function d(g,_){return g.id===_.id&&g.color?.id===_.color?.id}s.isEqual=d})(Gt||(Gt={}));const Ml=At("commandService"),ra=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new ne,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(s,e){if(!s)throw new Error("invalid command");if(typeof s=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:s,handler:e})}if(s.metadata&&Array.isArray(s.metadata.args)){const o=[];for(const l of s.metadata.args)o.push(l.constraint);const a=s.handler;s.handler=function(l,...c){return Fee(c,o),a(l,...c)}}const{id:t}=s;let i=this._commands.get(t);i||(i=new ea,this._commands.set(t,i));const n=i.unshift(s),r=lt(()=>{n(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(s,e){return ra.registerCommand(s,(t,...i)=>t.get(Ml).executeCommand(e,...i))}getCommand(s){const e=this._commands.get(s);if(!(!e||e.isEmpty()))return si.first(e)}getCommands(){const s=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&s.set(e,t)}return s}};ra.registerCommand("noop",()=>{});function TM(...s){switch(s.length){case 1:return y(1678,"Did you mean {0}?",s[0]);case 2:return y(1679,"Did you mean {0} or {1}?",s[0],s[1]);case 3:return y(1680,"Did you mean {0}, {1} or {2}?",s[0],s[1],s[2]);default:return}}const Ese=y(1681,"Did you forget to open or close the quote?"),Tse=y(1682,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),hw=class hw{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw nN(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(TM("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(TM("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(TM("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),n={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=hw._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(Ese);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(Tse);return}const r=this._input.charCodeAt(e);if(t)t=!1;else if(r===47&&!i){e++;break}else r===91?i=!0:r===92?t=!0:r===93&&(i=!1);e++}for(;e<this._input.length&&hw._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};hw._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),hw._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);let Z_=hw;const Vr=new Map;Vr.set("false",!1);Vr.set("true",!0);Vr.set("isMac",Bt);Vr.set("isLinux",Fa);Vr.set("isWindows",ia);Vr.set("isWeb",yg);Vr.set("isMacNative",Bt&&!yg);Vr.set("isEdge",Oj);Vr.set("isFirefox",Zee);Vr.set("isChrome",G6);Vr.set("isSafari",Xee);const Dse=Object.prototype.hasOwnProperty,Nse={regexParsingWithErrorRecovery:!0},Ise=y(1660,"Empty context key expression"),Ase=y(1661,"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),Rse=y(1662,"'in' after 'not'."),lH=y(1663,"closing parenthesis ')'"),Mse=y(1664,"Unexpected token"),Ose=y(1665,"Did you forget to put && or || before the token?"),Pse=y(1666,"Unexpected end of expression"),Bse=y(1667,"Did you forget to put a context key?");var vd;let Fse=(vd=class{constructor(e=Nse){this._config=e,this._scanner=new Z_,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:Ise,offset:0,lexeme:"",additionalInfo:Ase});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),n=i.type===17?Ose:void 0;throw this._parsingErrors.push({message:Mse,offset:i.offset,lexeme:Z_.getLexeme(i),additionalInfo:n}),vd._parseError}return t}catch(t){if(t!==vd._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:Kt.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:Kt.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),wo.INSTANCE;case 12:return this._advance(),sa.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,lH),t?.negate()}case 17:return this._advance(),R0.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Kt.true();case 12:return this._advance(),Kt.false();case 0:{this._advance();const t=this._expr();return this._consume(1,lH),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const n=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),n.type!==10)throw this._errExpectedButGot("REGEX",n);const r=n.lexeme,o=r.lastIndexOf("/"),a=o===r.length-1?void 0:this._removeFlagsGY(r.substring(o+1));let l;try{l=new RegExp(r.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",n)}return xx.create(t,l)}switch(n.type){case 10:case 19:{const r=[n.lexeme];this._advance();let o=this._peek(),a=0;for(let g=0;g<n.lexeme.length;g++)n.lexeme.charCodeAt(g)===40?a++:n.lexeme.charCodeAt(g)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let g=0;g<o.lexeme.length;g++)o.lexeme.charCodeAt(g)===40?a++:n.lexeme.charCodeAt(g)===41&&a--}if(a<0)break;r.push(Z_.getLexeme(o)),this._advance(),o=this._peek()}const l=r.join(""),c=l.lastIndexOf("/"),h=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let d;try{d=new RegExp(l.substring(1,c),h)}catch{throw this._errExpectedButGot("REGEX",n)}return Kt.regex(t,d)}case 18:{const r=n.lexeme;this._advance();let o=null;if(!Mie(r)){const a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){const c=r.slice(a+1,l),h=r[l+1]==="i"?"i":"";try{o=new RegExp(c,h)}catch{throw this._errExpectedButGot("REGEX",n)}}}if(o===null)throw this._errExpectedButGot("REGEX",n);return xx.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,Rse);const n=this._value();return Kt.notIn(t,n)}switch(this._peek().type){case 3:{this._advance();const n=this._value();if(this._previous().type===18)return Kt.equals(t,n);switch(n){case"true":return Kt.has(t);case"false":return Kt.not(t);default:return Kt.equals(t,n)}}case 4:{this._advance();const n=this._value();if(this._previous().type===18)return Kt.notEquals(t,n);switch(n){case"true":return Kt.not(t);case"false":return Kt.has(t);default:return Kt.notEquals(t,n)}}case 5:return this._advance(),fR.create(t,this._value());case 6:return this._advance(),gR.create(t,this._value());case 7:return this._advance(),hR.create(t,this._value());case 8:return this._advance(),dR.create(t,this._value());case 13:return this._advance(),Kt.in(t,this._value());default:return Kt.has(t)}}case 20:throw this._parsingErrors.push({message:Pse,offset:e.offset,lexeme:"",additionalInfo:Bse}),vd._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const n=y(1668,`Expected: {0}
Received: '{1}'.`,e,Z_.getLexeme(t)),r=t.offset,o=Z_.getLexeme(t);return this._parsingErrors.push({message:n,offset:r,lexeme:o,additionalInfo:i}),vd._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},vd._parseError=new Error,vd);const ZF=class ZF{static false(){return wo.INSTANCE}static true(){return sa.INSTANCE}static has(e){return A0.create(e)}static equals(e,t){return E2.create(e,t)}static notEquals(e,t){return cR.create(e,t)}static regex(e,t){return xx.create(e,t)}static in(e,t){return aR.create(e,t)}static notIn(e,t){return lR.create(e,t)}static not(e){return R0.create(e)}static and(...e){return L1.create(e,null,!0)}static or(...e){return Jf.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};ZF._parser=new Fse({regexParsingWithErrorRecovery:!1});let Kt=ZF;function Vse(s,e){const t=s?s.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function uL(s,e){return s.cmp(e)}const nA=class nA{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return sa.INSTANCE}};nA.INSTANCE=new nA;let wo=nA;const sA=class sA{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return wo.INSTANCE}};sA.INSTANCE=new sA;let sa=sA;class A0{static create(e,t=null){const i=Vr.get(e);return typeof i=="boolean"?i?sa.INSTANCE:wo.INSTANCE:new A0(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:AG(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Vr.get(this.key);return typeof e=="boolean"?e?sa.INSTANCE:wo.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=R0.create(this.key,this)),this.negated}}class E2{static create(e,t,i=null){if(typeof t=="boolean")return t?A0.create(e,i):R0.create(e,i);const n=Vr.get(e);return typeof n=="boolean"?t===(n?"true":"false")?sa.INSTANCE:wo.INSTANCE:new E2(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:M0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Vr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?sa.INSTANCE:wo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=cR.create(this.key,this.value,this)),this.negated}}class aR{static create(e,t){return new aR(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:M0(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?Dse.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=lR.create(this.key,this.valueKey)),this.negated}}class lR{static create(e,t){return new lR(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=aR.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class cR{static create(e,t,i=null){if(typeof t=="boolean")return t?R0.create(e,i):A0.create(e,i);const n=Vr.get(e);return typeof n=="boolean"?t===(n?"true":"false")?wo.INSTANCE:sa.INSTANCE:new cR(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:M0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Vr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?wo.INSTANCE:sa.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=E2.create(this.key,this.value,this)),this.negated}}class R0{static create(e,t=null){const i=Vr.get(e);return typeof i=="boolean"?i?wo.INSTANCE:sa.INSTANCE:new R0(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:AG(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Vr.get(this.key);return typeof e=="boolean"?e?wo.INSTANCE:sa.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=A0.create(this.key,this)),this.negated}}function uR(s,e){if(typeof s=="string"){const t=parseFloat(s);isNaN(t)||(s=t)}return typeof s=="string"||typeof s=="number"?e(s):wo.INSTANCE}class hR{static create(e,t,i=null){return uR(t,n=>new hR(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:M0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=gR.create(this.key,this.value,this)),this.negated}}class dR{static create(e,t,i=null){return uR(t,n=>new dR(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:M0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=fR.create(this.key,this.value,this)),this.negated}}class fR{static create(e,t,i=null){return uR(t,n=>new fR(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:M0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=dR.create(this.key,this.value,this)),this.negated}}class gR{static create(e,t,i=null){return uR(t,n=>new gR(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:M0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=hR.create(this.key,this.value,this)),this.negated}}class xx{static create(e,t){return new xx(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=kP.create(this)),this.negated}}class kP{static create(e){return new kP(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function IG(s){let e=null;for(let t=0,i=s.length;t<i;t++){const n=s[t].substituteConstants();if(s[t]!==n&&e===null){e=[];for(let r=0;r<t;r++)e[r]=s[r]}e!==null&&(e[t]=n)}return e===null?s:e}class L1{static create(e,t,i){return L1._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=uL(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=IG(this.expr);return e===this.expr?this:L1.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const n=[];let r=!1;for(const o of e)if(o){if(o.type===1){r=!0;continue}if(o.type===0)return wo.INSTANCE;if(o.type===6){n.push(...o.expr);continue}n.push(o)}if(n.length===0&&r)return sa.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(uL);for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];for(;n.length>1;){const o=n[n.length-1];if(o.type!==9)break;n.pop();const a=n.pop(),l=n.length===0,c=Jf.create(o.expr.map(h=>L1.create([h,a],null,i)),null,l);c&&(n.push(c),n.sort(uL))}if(n.length===1)return n[0];if(i){for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++)if(n[o].negate().equals(n[a]))return wo.INSTANCE;if(n.length===1)return n[0]}return new L1(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Jf.create(e,this,!0)}return this.negated}}class Jf{static create(e,t,i){return Jf._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=uL(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=IG(this.expr);return e===this.expr?this:Jf.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return sa.INSTANCE;if(l.type===9){n=n.concat(l.expr);continue}n.push(l)}}if(n.length===0&&r)return wo.INSTANCE;n.sort(uL)}if(n.length!==0){if(n.length===1)return n[0];for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];if(i){for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++)if(n[o].negate().equals(n[a]))return sa.INSTANCE;if(n.length===1)return n[0]}return new Jf(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),n=[];for(const r of uH(t))for(const o of uH(i))n.push(L1.create([r,o],null,!1));e.unshift(Jf.create(n,null,!1))}this.negated=Jf.create(e,this,!0)}return this.negated}}const dw=class dw extends A0{static all(){return dw._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?dw._info.push({...i,key:e}):i!==!0&&dw._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return E2.create(this.key,e)}};dw._info=[];let et=dw;const ai=At("contextKeyService");function AG(s,e){return s<e?-1:s>e?1:0}function M0(s,e,t,i){return s<t?-1:s>t?1:e<i?-1:e>i?1:0}function O3(s,e){if(s.type===0||e.type===1)return!0;if(s.type===9)return e.type===9?cH(s.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(O3(s,t))return!0;return!1}if(s.type===6){if(e.type===6)return cH(e.expr,s.expr);for(const t of s.expr)if(O3(t,e))return!0;return!1}return s.equals(e)}function cH(s,e){let t=0,i=0;for(;t<s.length&&i<e.length;){const n=s[t].cmp(e[i]);if(n<0)return!1;n===0&&t++,i++}return t===s.length}function uH(s){return s.type===9?s.expr:[s]}class Hse{constructor(){this.data=new Map}add(e,t){gM(rr(e)),gM(Xo(t)),gM(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}dispose(){this.data.forEach(e=>{Qw(e.dispose)&&e.dispose()}),this.data.clear()}}const or=new Hse;class EP{constructor(){this._coreKeybindings=new ea,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(tu===1){if(e&&e.win)return e.win}else if(tu===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=EP.bindToCurrentPlatform(e),i=new Ze;if(t&&t.primary){const n=p3(t.primary,tu);n&&i.add(this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let n=0,r=t.secondary.length;n<r;n++){const o=t.secondary[n],a=p3(o,tu);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-n-1,e.when))}return i}registerCommandAndKeybindingRule(e){return yd(this.registerKeybindingRule(e),ra.registerCommand(e))}_registerDefaultKeybinding(e,t,i,n,r,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:n,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,lt(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(zse)),this._cachedMergedKeybindings.slice(0)}}const _p=new EP,Wse={EditorModes:"platform.keybindingsRegistry"};or.add(Wse.EditorModes,_p);function zse(s,e){if(s.weight1!==e.weight1)return s.weight1-e.weight1;if(s.command&&e.command){if(s.command<e.command)return-1;if(s.command>e.command)return 1}return s.weight2-e.weight2}var Use=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},hH=function(s,e){return function(t,i){e(t,i,s)}},SD;function hL(s){return s.command!==void 0}function qse(s){return s.submenu!==void 0}const z=class z{constructor(e){if(z._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);z._instances.set(e,this),this.id=e}};z._instances=new Map,z.CommandPalette=new z("CommandPalette"),z.DebugBreakpointsContext=new z("DebugBreakpointsContext"),z.DebugCallStackContext=new z("DebugCallStackContext"),z.DebugConsoleContext=new z("DebugConsoleContext"),z.DebugVariablesContext=new z("DebugVariablesContext"),z.NotebookVariablesContext=new z("NotebookVariablesContext"),z.DebugHoverContext=new z("DebugHoverContext"),z.DebugWatchContext=new z("DebugWatchContext"),z.DebugToolBar=new z("DebugToolBar"),z.DebugToolBarStop=new z("DebugToolBarStop"),z.DebugDisassemblyContext=new z("DebugDisassemblyContext"),z.DebugCallStackToolbar=new z("DebugCallStackToolbar"),z.DebugCreateConfiguration=new z("DebugCreateConfiguration"),z.EditorContext=new z("EditorContext"),z.SimpleEditorContext=new z("SimpleEditorContext"),z.EditorContent=new z("EditorContent"),z.EditorLineNumberContext=new z("EditorLineNumberContext"),z.EditorContextCopy=new z("EditorContextCopy"),z.EditorContextPeek=new z("EditorContextPeek"),z.EditorContextShare=new z("EditorContextShare"),z.EditorTitle=new z("EditorTitle"),z.CompactWindowEditorTitle=new z("CompactWindowEditorTitle"),z.EditorTitleRun=new z("EditorTitleRun"),z.EditorTitleContext=new z("EditorTitleContext"),z.EditorTitleContextShare=new z("EditorTitleContextShare"),z.EmptyEditorGroup=new z("EmptyEditorGroup"),z.EmptyEditorGroupContext=new z("EmptyEditorGroupContext"),z.EditorTabsBarContext=new z("EditorTabsBarContext"),z.EditorTabsBarShowTabsSubmenu=new z("EditorTabsBarShowTabsSubmenu"),z.EditorTabsBarShowTabsZenModeSubmenu=new z("EditorTabsBarShowTabsZenModeSubmenu"),z.EditorActionsPositionSubmenu=new z("EditorActionsPositionSubmenu"),z.EditorSplitMoveSubmenu=new z("EditorSplitMoveSubmenu"),z.ExplorerContext=new z("ExplorerContext"),z.ExplorerContextShare=new z("ExplorerContextShare"),z.ExtensionContext=new z("ExtensionContext"),z.ExtensionEditorContextMenu=new z("ExtensionEditorContextMenu"),z.GlobalActivity=new z("GlobalActivity"),z.CommandCenter=new z("CommandCenter"),z.CommandCenterCenter=new z("CommandCenterCenter"),z.LayoutControlMenuSubmenu=new z("LayoutControlMenuSubmenu"),z.LayoutControlMenu=new z("LayoutControlMenu"),z.MenubarMainMenu=new z("MenubarMainMenu"),z.MenubarAppearanceMenu=new z("MenubarAppearanceMenu"),z.MenubarDebugMenu=new z("MenubarDebugMenu"),z.MenubarEditMenu=new z("MenubarEditMenu"),z.MenubarCopy=new z("MenubarCopy"),z.MenubarFileMenu=new z("MenubarFileMenu"),z.MenubarGoMenu=new z("MenubarGoMenu"),z.MenubarHelpMenu=new z("MenubarHelpMenu"),z.MenubarLayoutMenu=new z("MenubarLayoutMenu"),z.MenubarNewBreakpointMenu=new z("MenubarNewBreakpointMenu"),z.PanelAlignmentMenu=new z("PanelAlignmentMenu"),z.PanelPositionMenu=new z("PanelPositionMenu"),z.ActivityBarPositionMenu=new z("ActivityBarPositionMenu"),z.MenubarPreferencesMenu=new z("MenubarPreferencesMenu"),z.MenubarRecentMenu=new z("MenubarRecentMenu"),z.MenubarSelectionMenu=new z("MenubarSelectionMenu"),z.MenubarShare=new z("MenubarShare"),z.MenubarSwitchEditorMenu=new z("MenubarSwitchEditorMenu"),z.MenubarSwitchGroupMenu=new z("MenubarSwitchGroupMenu"),z.MenubarTerminalMenu=new z("MenubarTerminalMenu"),z.MenubarTerminalSuggestStatusMenu=new z("MenubarTerminalSuggestStatusMenu"),z.MenubarViewMenu=new z("MenubarViewMenu"),z.MenubarHomeMenu=new z("MenubarHomeMenu"),z.OpenEditorsContext=new z("OpenEditorsContext"),z.OpenEditorsContextShare=new z("OpenEditorsContextShare"),z.ProblemsPanelContext=new z("ProblemsPanelContext"),z.SCMInputBox=new z("SCMInputBox"),z.SCMChangeContext=new z("SCMChangeContext"),z.SCMResourceContext=new z("SCMResourceContext"),z.SCMResourceContextShare=new z("SCMResourceContextShare"),z.SCMResourceFolderContext=new z("SCMResourceFolderContext"),z.SCMResourceGroupContext=new z("SCMResourceGroupContext"),z.SCMSourceControl=new z("SCMSourceControl"),z.SCMSourceControlInline=new z("SCMSourceControlInline"),z.SCMSourceControlTitle=new z("SCMSourceControlTitle"),z.SCMHistoryTitle=new z("SCMHistoryTitle"),z.SCMHistoryItemContext=new z("SCMHistoryItemContext"),z.SCMHistoryItemChangeContext=new z("SCMHistoryItemChangeContext"),z.SCMHistoryItemHover=new z("SCMHistoryItemHover"),z.SCMHistoryItemRefContext=new z("SCMHistoryItemRefContext"),z.SCMQuickDiffDecorations=new z("SCMQuickDiffDecorations"),z.SCMTitle=new z("SCMTitle"),z.SearchContext=new z("SearchContext"),z.SearchActionMenu=new z("SearchActionContext"),z.StatusBarWindowIndicatorMenu=new z("StatusBarWindowIndicatorMenu"),z.StatusBarRemoteIndicatorMenu=new z("StatusBarRemoteIndicatorMenu"),z.StickyScrollContext=new z("StickyScrollContext"),z.TestItem=new z("TestItem"),z.TestItemGutter=new z("TestItemGutter"),z.TestProfilesContext=new z("TestProfilesContext"),z.TestMessageContext=new z("TestMessageContext"),z.TestMessageContent=new z("TestMessageContent"),z.TestPeekElement=new z("TestPeekElement"),z.TestPeekTitle=new z("TestPeekTitle"),z.TestCallStack=new z("TestCallStack"),z.TestCoverageFilterItem=new z("TestCoverageFilterItem"),z.TouchBarContext=new z("TouchBarContext"),z.TitleBar=new z("TitleBar"),z.TitleBarContext=new z("TitleBarContext"),z.TitleBarTitleContext=new z("TitleBarTitleContext"),z.TunnelContext=new z("TunnelContext"),z.TunnelPrivacy=new z("TunnelPrivacy"),z.TunnelProtocol=new z("TunnelProtocol"),z.TunnelPortInline=new z("TunnelInline"),z.TunnelTitle=new z("TunnelTitle"),z.TunnelLocalAddressInline=new z("TunnelLocalAddressInline"),z.TunnelOriginInline=new z("TunnelOriginInline"),z.ViewItemContext=new z("ViewItemContext"),z.ViewContainerTitle=new z("ViewContainerTitle"),z.ViewContainerTitleContext=new z("ViewContainerTitleContext"),z.ViewTitle=new z("ViewTitle"),z.ViewTitleContext=new z("ViewTitleContext"),z.CommentEditorActions=new z("CommentEditorActions"),z.CommentThreadTitle=new z("CommentThreadTitle"),z.CommentThreadActions=new z("CommentThreadActions"),z.CommentThreadAdditionalActions=new z("CommentThreadAdditionalActions"),z.CommentThreadTitleContext=new z("CommentThreadTitleContext"),z.CommentThreadCommentContext=new z("CommentThreadCommentContext"),z.CommentTitle=new z("CommentTitle"),z.CommentActions=new z("CommentActions"),z.CommentsViewThreadActions=new z("CommentsViewThreadActions"),z.InteractiveToolbar=new z("InteractiveToolbar"),z.InteractiveCellTitle=new z("InteractiveCellTitle"),z.InteractiveCellDelete=new z("InteractiveCellDelete"),z.InteractiveCellExecute=new z("InteractiveCellExecute"),z.InteractiveInputExecute=new z("InteractiveInputExecute"),z.InteractiveInputConfig=new z("InteractiveInputConfig"),z.ReplInputExecute=new z("ReplInputExecute"),z.IssueReporter=new z("IssueReporter"),z.NotebookToolbar=new z("NotebookToolbar"),z.NotebookToolbarContext=new z("NotebookToolbarContext"),z.NotebookStickyScrollContext=new z("NotebookStickyScrollContext"),z.NotebookCellTitle=new z("NotebookCellTitle"),z.NotebookCellDelete=new z("NotebookCellDelete"),z.NotebookCellInsert=new z("NotebookCellInsert"),z.NotebookCellBetween=new z("NotebookCellBetween"),z.NotebookCellListTop=new z("NotebookCellTop"),z.NotebookCellExecute=new z("NotebookCellExecute"),z.NotebookCellExecuteGoTo=new z("NotebookCellExecuteGoTo"),z.NotebookCellExecutePrimary=new z("NotebookCellExecutePrimary"),z.NotebookDiffCellInputTitle=new z("NotebookDiffCellInputTitle"),z.NotebookDiffDocumentMetadata=new z("NotebookDiffDocumentMetadata"),z.NotebookDiffCellMetadataTitle=new z("NotebookDiffCellMetadataTitle"),z.NotebookDiffCellOutputsTitle=new z("NotebookDiffCellOutputsTitle"),z.NotebookOutputToolbar=new z("NotebookOutputToolbar"),z.NotebookOutlineFilter=new z("NotebookOutlineFilter"),z.NotebookOutlineActionMenu=new z("NotebookOutlineActionMenu"),z.NotebookEditorLayoutConfigure=new z("NotebookEditorLayoutConfigure"),z.NotebookKernelSource=new z("NotebookKernelSource"),z.BulkEditTitle=new z("BulkEditTitle"),z.BulkEditContext=new z("BulkEditContext"),z.TimelineItemContext=new z("TimelineItemContext"),z.TimelineTitle=new z("TimelineTitle"),z.TimelineTitleContext=new z("TimelineTitleContext"),z.TimelineFilterSubMenu=new z("TimelineFilterSubMenu"),z.AccountsContext=new z("AccountsContext"),z.SidebarTitle=new z("SidebarTitle"),z.PanelTitle=new z("PanelTitle"),z.AuxiliaryBarTitle=new z("AuxiliaryBarTitle"),z.TerminalInstanceContext=new z("TerminalInstanceContext"),z.TerminalEditorInstanceContext=new z("TerminalEditorInstanceContext"),z.TerminalNewDropdownContext=new z("TerminalNewDropdownContext"),z.TerminalTabContext=new z("TerminalTabContext"),z.TerminalTabEmptyAreaContext=new z("TerminalTabEmptyAreaContext"),z.TerminalStickyScrollContext=new z("TerminalStickyScrollContext"),z.WebviewContext=new z("WebviewContext"),z.InlineCompletionsActions=new z("InlineCompletionsActions"),z.InlineEditsActions=new z("InlineEditsActions"),z.NewFile=new z("NewFile"),z.MergeInput1Toolbar=new z("MergeToolbar1Toolbar"),z.MergeInput2Toolbar=new z("MergeToolbar2Toolbar"),z.MergeBaseToolbar=new z("MergeBaseToolbar"),z.MergeInputResultToolbar=new z("MergeToolbarResultToolbar"),z.InlineSuggestionToolbar=new z("InlineSuggestionToolbar"),z.InlineEditToolbar=new z("InlineEditToolbar"),z.ChatContext=new z("ChatContext"),z.ChatCodeBlock=new z("ChatCodeblock"),z.ChatCompareBlock=new z("ChatCompareBlock"),z.ChatMessageTitle=new z("ChatMessageTitle"),z.ChatHistory=new z("ChatHistory"),z.ChatWelcomeHistoryContext=new z("ChatWelcomeHistoryContext"),z.ChatMessageFooter=new z("ChatMessageFooter"),z.ChatExecute=new z("ChatExecute"),z.ChatExecuteSecondary=new z("ChatExecuteSecondary"),z.ChatInput=new z("ChatInput"),z.ChatInputSide=new z("ChatInputSide"),z.ChatModePicker=new z("ChatModePicker"),z.ChatEditingWidgetToolbar=new z("ChatEditingWidgetToolbar"),z.ChatEditingEditorContent=new z("ChatEditingEditorContent"),z.ChatEditingEditorHunk=new z("ChatEditingEditorHunk"),z.ChatEditingDeletedNotebookCell=new z("ChatEditingDeletedNotebookCell"),z.ChatInputAttachmentToolbar=new z("ChatInputAttachmentToolbar"),z.ChatEditingWidgetModifiedFilesToolbar=new z("ChatEditingWidgetModifiedFilesToolbar"),z.ChatInputResourceAttachmentContext=new z("ChatInputResourceAttachmentContext"),z.ChatInputSymbolAttachmentContext=new z("ChatInputSymbolAttachmentContext"),z.ChatInlineResourceAnchorContext=new z("ChatInlineResourceAnchorContext"),z.ChatInlineSymbolAnchorContext=new z("ChatInlineSymbolAnchorContext"),z.ChatMessageCheckpoint=new z("ChatMessageCheckpoint"),z.ChatMessageRestoreCheckpoint=new z("ChatMessageRestoreCheckpoint"),z.ChatEditingCodeBlockContext=new z("ChatEditingCodeBlockContext"),z.ChatTitleBarMenu=new z("ChatTitleBarMenu"),z.ChatAttachmentsContext=new z("ChatAttachmentsContext"),z.ChatToolOutputResourceToolbar=new z("ChatToolOutputResourceToolbar"),z.ChatTextEditorMenu=new z("ChatTextEditorMenu"),z.ChatToolOutputResourceContext=new z("ChatToolOutputResourceContext"),z.ChatMultiDiffContext=new z("ChatMultiDiffContext"),z.ChatSessionsMenu=new z("ChatSessionsMenu"),z.ChatConfirmationMenu=new z("ChatConfirmationMenu"),z.AccessibleView=new z("AccessibleView"),z.MultiDiffEditorFileToolbar=new z("MultiDiffEditorFileToolbar"),z.DiffEditorHunkToolbar=new z("DiffEditorHunkToolbar"),z.DiffEditorSelectionToolbar=new z("DiffEditorSelectionToolbar");let ws=z;const O0=At("menuService"),KL=class KL{static for(e){let t=this._all.get(e);return t||(t=new KL(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof KL&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};KL._all=new Map;let X_=KL;const nC=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new tie({merge:X_.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(s){return this._commands.set(s.id,s),this._onDidChangeMenu.fire(X_.for(ws.CommandPalette)),lt(()=>{this._commands.delete(s.id)&&this._onDidChangeMenu.fire(X_.for(ws.CommandPalette))})}getCommand(s){return this._commands.get(s)}getCommands(){const s=new Map;return this._commands.forEach((e,t)=>s.set(t,e)),s}appendMenuItem(s,e){let t=this._menuItems.get(s);t||(t=new ea,this._menuItems.set(s,t));const i=t.push(e);return this._onDidChangeMenu.fire(X_.for(s)),lt(()=>{i(),this._onDidChangeMenu.fire(X_.for(s))})}appendMenuItems(s){const e=new Ze;for(const{id:t,item:i}of s)e.add(this.appendMenuItem(t,i));return e}getMenuItems(s){let e;return this._menuItems.has(s)?e=[...this._menuItems.get(s)]:e=[],s===ws.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(s){const e=new Set;for(const t of s)hL(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||s.push({command:t})})}};class xw extends oR{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let dg=SD=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,n,r,o,a){this.hideActions=n,this.menuKeybinding=r,this._commandService=a,this.id=e.id,this.label=SD.label(e,i),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),this.checked&&Gt.isThemeIcon(c.icon)&&(l=c.icon),this.checked&&c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}l||(l=Gt.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new SD(t,void 0,i,n,void 0,o,a):void 0,this._options=i,this.class=l&&Gt.asClassName(l)}run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};dg=SD=Use([hH(5,ai),hH(6,Ml)],dg);const Sg=At("telemetryService");var dH,fH,gH;class $se{constructor(e,t){this.uri=e,this.value=t}}function jse(s){return Array.isArray(s)}const p1=class p1{constructor(e,t){if(this[dH]="ResourceMap",e instanceof p1)this.map=new Map(e.map),this.toKey=t??p1.defaultToKey;else if(jse(e)){this.map=new Map,this.toKey=t??p1.defaultToKey;for(const[i,n]of e)this.set(i,n)}else this.map=new Map,this.toKey=e??p1.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new $se(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(dH=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};p1.defaultToKey=e=>e.toString();let Br=p1;class Gse{constructor(e,t){this[fH]="ResourceSet",!e||typeof e=="function"?this._map=new Br(e):(this._map=new Br(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((i,n)=>e.call(t,n,n,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(fH=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}class Kse{constructor(){this[gH]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,i!==0&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.key,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.value,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:[i.key,i.value],done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return n}[(gH=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(i.previous=n,n.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,n=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=n,n.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class Yse extends Kse{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class T2 extends Yse{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class Zse{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class RG{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}}class mR{constructor(){this._data=new Map}set(e,...t){let i=this._data;for(let n=0;n<t.length-1;n++)i.has(t[n])||i.set(t[n],new Map),i=i.get(t[n]);i.set(t[t.length-1],e)}get(...e){let t=this._data;for(let i=0;i<e.length-1;i++){if(!t.has(e[i]))return;t=t.get(e[i])}return t.get(e[e.length-1])}clear(){this._data.clear()}toString(){const e=(t,i)=>{let n="";for(const[r,o]of t)n+=`${"  ".repeat(i)}${r}: `,o instanceof Map?n+=`
`+e(o,i+1):n+=`${o}
`;return n};return e(this._data,0)}}function wm(s){return s===47||s===92}function MG(s){return s.replace(/[\\/]/g,ts.sep)}function Xse(s){return s.indexOf("/")===-1&&(s=MG(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function mH(s,e=ts.sep){if(!s)return"";const t=s.length,i=s.charCodeAt(0);if(wm(i)){if(wm(s.charCodeAt(1))&&!wm(s.charCodeAt(2))){let r=3;const o=r;for(;r<t&&!wm(s.charCodeAt(r));r++);if(o!==r&&!wm(s.charCodeAt(r+1))){for(r+=1;r<t;r++)if(wm(s.charCodeAt(r)))return s.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(Qse(i)&&s.charCodeAt(1)===58)return wm(s.charCodeAt(2))?s.slice(0,2)+e:s.slice(0,2);let n=s.indexOf("://");if(n!==-1){for(n+=3;n<t;n++)if(wm(s.charCodeAt(n)))return s.slice(0,n+1)}return""}function P3(s,e,t,i=Ym){if(s===e)return!0;if(!s||!e||e.length>s.length)return!1;if(t){if(!iP(s,e))return!1;if(e.length===s.length)return!0;let r=e.length;return e.charAt(e.length-1)===i&&r--,s.charAt(r)===i}return e.charAt(e.length-1)!==i&&(e+=i),s.indexOf(e)===0}function Qse(s){return s>=65&&s<=90||s>=97&&s<=122}function Tf(s){return cN(s,!0)}class Jse{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:f3(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===mt.file)return P3(Tf(e),Tf(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(_H(e.authority,t.authority))return P3(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Ot.joinPath(e,...t)}basenameOrAuthority(e){return TP(e)||e.authority}basename(e){return ts.basename(e.path)}extname(e){return ts.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===mt.file?t=Ot.file(pie(Tf(e))).path:(t=ts.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===mt.file?t=Ot.file(Gj(Tf(e))).path:t=ts.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!_H(e.authority,t.authority))return;if(e.scheme===mt.file){const r=mie(Tf(e),Tf(t));return ia?MG(r):r}let i=e.path||"/";const n=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(const o=Math.min(i.length,n.length);r<o&&!(i.charCodeAt(r)!==n.charCodeAt(r)&&i.charAt(r).toLowerCase()!==n.charAt(r).toLowerCase());r++);i=n.substr(0,r)+i.substr(r)}return ts.relative(i,n)}resolvePath(e,t){if(e.scheme===mt.file){const i=Ot.file(gie(Tf(e),t));return e.with({authority:i.authority,path:i.path})}return t=Xse(t),e.with({path:ts.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Uv(e,t)}hasTrailingPathSeparator(e,t=Ym){if(e.scheme===mt.file){const i=Tf(e);return i.length>mH(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Ym){return bH(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Ym){let i=!1;if(e.scheme===mt.file){const n=Tf(e);i=n!==void 0&&n.length===mH(n).length&&n[n.length-1]===t}else{t="/";const n=e.path;i=n.length===1&&n.charCodeAt(n.length-1)===47}return!i&&!bH(e,t)?e.with({path:e.path+"/"}):e}}const ln=new Jse(()=>!1),ere=ln.isEqual.bind(ln);ln.isEqualOrParent.bind(ln);ln.getComparisonKey.bind(ln);ln.basenameOrAuthority.bind(ln);const TP=ln.basename.bind(ln);ln.extname.bind(ln);const tre=ln.dirname.bind(ln),ire=ln.joinPath.bind(ln),nre=ln.normalizePath.bind(ln);ln.relativePath.bind(ln);const pH=ln.resolvePath.bind(ln);ln.isAbsolutePath.bind(ln);const _H=ln.isEqualAuthority.bind(ln),bH=ln.hasTrailingPathSeparator.bind(ln);ln.removeTrailingPathSeparator.bind(ln);ln.addTrailingPathSeparator.bind(ln);var mN;(function(s){s.META_DATA_LABEL="label",s.META_DATA_DESCRIPTION="description",s.META_DATA_SIZE="size",s.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&i.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&i.set(s.META_DATA_MIME,r),i}s.parseMetaData=e})(mN||(mN={}));const Lo=At("logService"),sre=At("loggerService");var Hs;(function(s){s[s.Off=0]="Off",s[s.Trace=1]="Trace",s[s.Debug=2]="Debug",s[s.Info=3]="Info",s[s.Warning=4]="Warning",s[s.Error=5]="Error"})(Hs||(Hs={}));const OG=Hs.Info;function rre(s,e){return s!==Hs.Off&&s<=e}class PG extends pe{constructor(){super(...arguments),this.level=OG,this._onDidChangeLogLevel=this._register(new ne)}get onDidChangeLogLevel(){return this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return rre(this.level,e)}canLog(e){return this._store.isDisposed?!1:this.checkLogLevel(e)}}class ore extends PG{constructor(e=OG,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.canLog(Hs.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.canLog(Hs.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.canLog(Hs.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.canLog(Hs.Warning)&&(this.useColors?console.warn("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.canLog(Hs.Error)&&(this.useColors?console.error("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class are extends PG{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}class lre extends pe{constructor(e,t,i){if(super(),this.logLevel=e,this.logsHome=t,this._loggers=new Br,this._onDidChangeLoggers=this._register(new ne),this._onDidChangeVisibility=this._register(new ne),i)for(const n of i)this._loggers.set(n.resource,{logger:void 0,info:n})}getLoggerEntry(e){return rr(e)?[...this._loggers.values()].find(t=>t.info.id===e):this._loggers.get(e)}createLogger(e,t){const i=this.toResource(e),n=rr(e)?e:t?.id??dP(i.toString()).toString(16);let r=this._loggers.get(i)?.logger;const o=t?.logLevel==="always"?Hs.Trace:t?.logLevel;r||(r=this.doCreateLogger(i,o??this.getLogLevel(i)??this.logLevel,{...t,id:n}));const a={logger:r,info:{resource:i,id:n,logLevel:o,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(a.info),this._loggers.set(i,a),r}toResource(e){return rr(e)?ire(this.logsHome,`${e}.log`):e}setVisibility(e,t){const i=this.getLoggerEntry(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this._loggers.set(i.info.resource,i),this._onDidChangeVisibility.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this._loggers.get(e)?.info.logLevel),t??this.logLevel}registerLogger(e){const t=this._loggers.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this._loggers.set(e.resource,{info:e,logger:void 0}),this._onDidChangeLoggers.fire({added:[e],removed:[]}))}dispose(){this._loggers.forEach(e=>e.logger?.dispose()),this._loggers.clear(),super.dispose()}}class cre{constructor(){this.onDidChangeLogLevel=new ne().event}setLevel(e){}getLevel(){return Hs.Info}trace(e,...t){}debug(e,...t){}info(e,...t){}warn(e,...t){}error(e,...t){}dispose(){}}class ure extends lre{constructor(){super(Hs.Off,Ot.parse("log:///log"))}doCreateLogger(e,t,i){return new cre}}function hre(s){switch(s){case Hs.Trace:return"trace";case Hs.Debug:return"debug";case Hs.Info:return"info";case Hs.Warning:return"warn";case Hs.Error:return"error";case Hs.Off:return"off"}}new et("logLevel",hre(Hs.Info));class pR{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=Kt.and(i,this.precondition):i=this.precondition);const n={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};_p.registerKeybindingRule(n)}}ra.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){nC.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class DP extends pR{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,n){return this._implementations.push({priority:e,name:t,implementation:i,when:n}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===i){this._implementations.splice(r,1);return}}}}runCommand(e,t){const i=e.get(Lo),n=e.get(ai);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){if(r.when){const a=n.getContext(Us());if(!r.when.evaluate(a))continue}const o=r.implementation(e,t);if(o)return i.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class BG extends pR{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class m0 extends pR{static bindToContribution(e){return class extends m0{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,n,r){const o=e(n);o&&this._callback(o,r)}}}static runEditorCommand(e,t,i,n){const r=e.get(Es),o=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(ai).contextMatchesRules(i??void 0))return n(a,o,t)})}runCommand(e,t){return m0.runEditorCommand(e,t,this.precondition,(i,n,r)=>this.runEditorCommand(i,n,r))}}function Ct(s){return pd.INSTANCE.registerEditorCommand(s),s}function FG(s,e,t){pd.INSTANCE.registerEditorContribution(s,e,t)}var kw;(function(s){function e(o){return pd.INSTANCE.getEditorCommand(o)}s.getEditorCommand=e;function t(){return pd.INSTANCE.getEditorActions()}s.getEditorActions=t;function i(){return pd.INSTANCE.getEditorContributions()}s.getEditorContributions=i;function n(o){return pd.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}s.getSomeEditorContributions=n;function r(){return pd.INSTANCE.getDiffEditorContributions()}s.getDiffEditorContributions=r})(kw||(kw={}));const dre={EditorCommonContributions:"editor.contributions"},rA=class rA{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};rA.INSTANCE=new rA;let pd=rA;or.add(dre.EditorCommonContributions,pd.INSTANCE);function D2(s){return s.register(),s}const VG=D2(new DP({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:ws.MenubarEditMenu,group:"1_do",title:y(64,"&&Undo"),order:1},{menuId:ws.CommandPalette,group:"",title:y(65,"Undo"),order:1},{menuId:ws.SimpleEditorContext,group:"1_do",title:y(66,"Undo"),order:1}]}));D2(new BG(VG,{id:"default:undo",precondition:void 0}));const HG=D2(new DP({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:ws.MenubarEditMenu,group:"1_do",title:y(67,"&&Redo"),order:2},{menuId:ws.CommandPalette,group:"",title:y(68,"Redo"),order:1},{menuId:ws.SimpleEditorContext,group:"1_do",title:y(69,"Redo"),order:2}]}));D2(new BG(HG,{id:"default:redo",precondition:void 0}));const fre=D2(new DP({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:ws.MenubarSelectionMenu,group:"1_basic",title:y(70,"&&Select All"),order:1},{menuId:ws.CommandPalette,group:"",title:y(71,"Select All"),order:1},{menuId:ws.SimpleEditorContext,group:"9_select",title:y(72,"Select All"),order:1}]})),vH="default",gre="$initialize";let wH=!1;function B3(s){yg&&(wH||(wH=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(s.message))}class mre{constructor(e,t,i,n,r){this.vsWorker=e,this.req=t,this.channel=i,this.method=n,this.args=r,this.type=0}}class CH{constructor(e,t,i,n){this.vsWorker=e,this.seq=t,this.res=i,this.err=n,this.type=1}}class pre{constructor(e,t,i,n,r){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=n,this.arg=r,this.type=2}}class _re{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class bre{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class vre{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const n=String(++this._lastSentReq);return new Promise((r,o)=>{this._pendingReplies[n]={resolve:r,reject:o},this._send(new mre(this._workerId,n,e,t,i))})}listen(e,t,i){let n=null;const r=new ne({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,r),this._send(new pre(this._workerId,n,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new bre(this._workerId,n)),n=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const i={get:(n,r)=>(typeof r=="string"&&!n[r]&&(zG(r)?n[r]=o=>this.listen(e,r,o):WG(r)?n[r]=this.listen(e,r,void 0):r.charCodeAt(0)===36&&(n[r]=async(...o)=>(await t?.(),this.sendMessage(e,r,o)))),n[r])};return new Proxy(Object.create(null),i)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(n=>{this._send(new CH(this._workerId,t,n,void 0))},n=>{n.detail instanceof Error&&(n.detail=nO(n.detail)),this._send(new CH(this._workerId,t,void 0,nO(n)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(n=>{this._send(new _re(this._workerId,t,n))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class wre extends pe{constructor(e){super(),this._localChannels=new Map,this._worker=this._register(e),this._register(this._worker.onMessage(t=>{this._protocol.handleMessage(t)})),this._register(this._worker.onError(t=>{B3(t),mi(t)})),this._protocol=new vre({sendMessage:(t,i)=>{this._worker.postMessage(t,i)},handleMessage:(t,i,n)=>this._handleMessage(t,i,n),handleEvent:(t,i,n)=>this._handleEvent(t,i,n)}),this._protocol.setWorkerId(this._worker.getId()),this._onModuleLoaded=this._protocol.sendMessage(vH,gre,[this._worker.getId()]),this.proxy=this._protocol.createProxyToRemoteChannel(vH,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(t=>{this._onError("Worker failed to load ",t)})}_handleMessage(e,t,i){const n=this._localChannels.get(e);if(!n)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof n[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(n[t].apply(n,i))}catch(r){return Promise.reject(r)}}_handleEvent(e,t,i){const n=this._localChannels.get(e);if(!n)throw new Error(`Missing channel ${e} on main thread`);if(zG(t)){const r=n[t].call(n,i);if(typeof r!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return r}if(WG(t)){const r=n[t];if(typeof r!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return r}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function WG(s){return s[0]==="o"&&s[1]==="n"&&Em(s.charCodeAt(2))}function zG(s){return/^onDynamic/.test(s)&&Em(s.charCodeAt(9))}function bp(s,e){const t=globalThis.MonacoEnvironment;if(t?.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(s,e)}catch(i){mi(i);return}try{return globalThis.trustedTypes?.createPolicy(s,e)}catch(i){mi(i);return}}let $v;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?$v=globalThis.workerttPolicy:$v=bp("defaultWorkerFactory",{createScriptURL:s=>s});function Cre(s,e){const t=s.label||"anonymous"+e,i=globalThis.MonacoEnvironment;if(i){if(typeof i.getWorker=="function")return i.getWorker("workerMain.js",t);if(typeof i.getWorkerUrl=="function"){const r=i.getWorkerUrl("workerMain.js",t);return new Worker($v?$v.createScriptURL(r):r,{name:t,type:"module"})}}const n=s.esmModuleLocation;if(n){const r=yre(t,n.toString(!0)),o=new Worker($v?$v.createScriptURL(r):r,{name:t,type:"module"});return Sre(o)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function yre(s,e){if(!(/^((http:)|(https:)|(file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const i=e.lastIndexOf("?"),n=e.lastIndexOf("#",i),r=i>0?new URLSearchParams(e.substring(i+1,~n?n:void 0)):new URLSearchParams;C3.addSearchParam(r,!0,!0),r.toString()?e=`${e}?${r.toString()}#${s}`:e=`${e}#${s}`}const t=new Blob([V6([`/*${s}*/`,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Ij())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(q6())};`,`globalThis._VSCODE_FILE_ROOT = ${JSON.stringify(globalThis._VSCODE_FILE_ROOT)};`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL(${JSON.stringify(e)}) ?? ${JSON.stringify(e)});`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${s}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(t)}function Sre(s){return new Promise((e,t)=>{s.onmessage=function(i){i.data.type==="vscode-worker-ready"&&(s.onmessage=null,e(s))},s.onerror=t})}function Lre(s){return!!s&&typeof s.then=="function"}const oA=class oA extends pe{constructor(e){super(),this._onMessage=this._register(new ne),this.onMessage=this._onMessage.event,this._onError=this._register(new ne),this.onError=this._onError.event,this.id=++oA.LAST_WORKER_ID;const t=e instanceof Worker||"then"in e?e:Cre(e,this.id);Lre(t)?this.worker=t:this.worker=Promise.resolve(t),this.postMessage("-please-ignore-",[]);const i=n=>{this._onError.fire(n)};this.worker.then(n=>{n.onmessage=r=>{this._onMessage.fire(r.data)},n.onmessageerror=r=>{this._onError.fire(r)},typeof n.addEventListener=="function"&&n.addEventListener("error",i)}),this._register(lt(()=>{this.worker?.then(n=>{n.onmessage=null,n.onmessageerror=null,n.removeEventListener("error",i),n.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){this.worker?.then(i=>{try{i.postMessage(e,t)}catch(n){mi(n),mi(new Error("FAILED to post message to worker",{cause:n}))}})}};oA.LAST_WORKER_ID=0;let F3=oA;class xre{constructor(e,t){this.esmModuleLocation=e,this.label=t}}function kre(s,e){const t=Ot.isUri(s)?new xre(s,e):s;return new wre(new F3(t))}var _o;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(_o||(_o={}));class DM{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),n=e.getStandardTokenType(i);return this.isOK(n)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const n=String.fromCharCode(i);if(!this.open.includes(n)&&!this.close.includes(n))return n}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class Ere{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)mS(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),mS(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),mS(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),mS(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&mS(this.autoClosingPairsCloseSingleChar,t.close,t)}}function mS(s,e,t){s.has(e)?s.get(e).push(t):s.set(e,[t])}const fw=class fw{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new DM(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new DM({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new DM({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:fw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:fw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};fw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,fw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let V3=fw;function x1(s,e){const t=s.getCount(),i=s.findTokenIndexAtOffset(e),n=s.getLanguageId(i);let r=i;for(;r+1<t&&s.getLanguageId(r+1)===n;)r++;let o=i;for(;o>0&&s.getLanguageId(o-1)===n;)o--;return new Tre(s,n,o,r+1,s.getStartOffset(o),s.getEndOffset(r))}class Tre{constructor(e,t,i,n,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=n,this.firstCharOffset=r,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function id(s){return(s&3)!==0}let NM;function UG(){return NM||(NM=new TextDecoder("UTF-16LE")),NM}let IM;function Dre(){return IM||(IM=new TextDecoder("UTF-16BE")),IM}let AM;function qG(){return AM||(AM=Yee()?UG():Dre()),AM}function Nre(s,e,t){const i=new Uint16Array(s.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?Ire(s,e,t):UG().decode(i)}function Ire(s,e,t){const i=[];let n=0;for(let r=0;r<t;r++){const o=fne(s,e);e+=2,i[n++]=String.fromCharCode(o)}return i.join("")}class TC{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return qG().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||xs(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class pN{constructor(e,t,i,n,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=n,this.forwardRegex=r,this.reversedRegex=o,this._openSet=pN._toSet(this.open),this._closeSet=pN._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function Are(s){const e=s.length;s=s.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const i=(o,a)=>{const[l,c]=o,[h,d]=a;return l===h||l===d||c===h||c===d},n=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let h=0;h<e;h++)t[h]===c&&(t[h]=l)};for(let o=0;o<e;o++){const a=s[o];for(let l=o+1;l<e;l++){const c=s[l];i(a,c)&&n(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[h,d]=s[c];a.push(h),l.push(d)}a.length>0&&r.push({open:a,close:l})}return r}class Rre{constructor(e,t){this._richEditBracketsBrand=void 0;const i=Are(t);this.brackets=i.map((n,r)=>new pN(e,r,n.open,n.close,Mre(n.open,n.close,i,r),Ore(n.open,n.close,i,r))),this.forwardRegex=Pre(this.brackets),this.reversedRegex=Bre(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const n of this.brackets){for(const r of n.open)this.textIsBracket[r]=n,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of n.close)this.textIsBracket[r]=n,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function $G(s,e,t,i){for(let n=0,r=e.length;n<r;n++){if(n===t)continue;const o=e[n];for(const a of o.open)a.indexOf(s)>=0&&i.push(a);for(const a of o.close)a.indexOf(s)>=0&&i.push(a)}}function jG(s,e){return s.length-e.length}function _R(s){if(s.length<=1)return s;const e=[],t=new Set;for(const i of s)t.has(i)||(e.push(i),t.add(i));return e}function Mre(s,e,t,i){let n=[];n=n.concat(s),n=n.concat(e);for(let r=0,o=n.length;r<o;r++)$G(n[r],t,i,n);return n=_R(n),n.sort(jG),n.reverse(),N2(n)}function Ore(s,e,t,i){let n=[];n=n.concat(s),n=n.concat(e);for(let r=0,o=n.length;r<o;r++)$G(n[r],t,i,n);return n=_R(n),n.sort(jG),n.reverse(),N2(n.map(NP))}function Pre(s){let e=[];for(const t of s){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=_R(e),N2(e)}function Bre(s){let e=[];for(const t of s){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=_R(e),N2(e.map(NP))}function Fre(s){const e=/^[\w ]+$/.test(s);return s=Ad(s),e?`\\b${s}\\b`:s}function N2(s,e){const t=`(${s.map(Fre).join(")|(")})`;return tG(t,!0,e)}const NP=(function(){function s(i){const n=new Uint16Array(i.length);let r=0;for(let o=i.length-1;o>=0;o--)n[r++]=i.charCodeAt(o);return qG().decode(n)}let e=null,t=null;return function(n){return e!==n&&(e=n,t=s(e)),t}})();class $c{static _findPrevBracketInText(e,t,i,n){const r=i.match(e);if(!r)return null;const o=i.length-(r.index||0),a=r[0].length,l=n+o;return new ie(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,n,r){const a=NP(i).substring(i.length-r,i.length-n);return this._findPrevBracketInText(e,t,a,n)}static findNextBracketInText(e,t,i,n){const r=i.match(e);if(!r)return null;const o=r.index||0,a=r[0].length;if(a===0)return null;const l=n+o;return new ie(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,n,r){const o=i.substring(n,r);return this.findNextBracketInText(e,t,o,n)}}class Vre{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const n=i.charAt(i.length-1);e.push(n)}return a0(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const n=t.findTokenIndexAtOffset(i-1);if(id(t.getStandardTokenType(n)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,i-1)+e,a=$c.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:l}:null}}function _T(s){return s.global&&(s.lastIndex=0),!0}class Hre{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&_T(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&_T(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&_T(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&_T(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class jv{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=jv._createOpenBracketRegExp(t[0]),n=jv._createCloseBracketRegExp(t[1]);i&&n&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:n})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,n){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){const a=this._regExpRules[r];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:n},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&n.length>0)for(let r=0,o=this._brackets.length;r<o;r++){const a=this._brackets[r];if(a.openRegExp.test(i)&&a.closeRegExp.test(n))return{indentAction:_o.IndentOutdent}}if(e>=2&&i.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(i))return{indentAction:_o.Indent}}return null}static _createOpenBracketRegExp(e){let t=Ad(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",jv._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ad(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,jv._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return mi(t),null}}}const cn=At("configurationService");function H3(s,e){const t=Object.create(null);for(const i in s)GG(t,i,s[i],e);return t}function GG(s,e,t,i){const n=e.split("."),r=n.pop();let o=s;for(let a=0;a<n.length;a++){const l=n[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(o)}`)}function Wre(s,e){const t=e.split(".");KG(s,t)}function KG(s,e){if(!s)return;const t=e.shift();if(e.length===0){delete s[t];return}if(Object.keys(s).indexOf(t)!==-1){const i=s[t];typeof i=="object"&&!Array.isArray(i)&&(KG(i,e),Object.keys(i).length===0&&delete s[t])}}function yH(s,e,t){function i(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const n=e.split("."),r=i(s,n);return typeof r>"u"?t:r}function zre(s){return s.replace(/^\[/,"").replace(/]$/g,"").replace(/\]\[/g,", ")}const $s=At("languageService");class fd{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const YG=[];function $t(s,e,t){e instanceof fd||(e=new fd(e,[],!!t)),YG.push([s,e])}function SH(){return YG}const eg=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),bR={JSONContribution:"base.contributions.json"};function Ure(s){return s.length>0&&s.charAt(s.length-1)==="#"?s.substring(0,s.length-1):s}class qre extends pe{constructor(){super(...arguments),this.schemasById={},this._onDidChangeSchema=this._register(new ne)}registerSchema(e,t,i){const n=Ure(e);this.schemasById[n]=t,this._onDidChangeSchema.fire(e),i&&i.add(lt(()=>{delete this.schemasById[n],this._onDidChangeSchema.fire(e)}))}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const $re=new qre;or.add(bR.JSONContribution,$re);const P0={Configuration:"base.contributions.configuration"},bT="vscode://schemas/settings/resourceLanguage",LH=or.as(bR.JSONContribution);class jre extends pe{constructor(){super(),this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=this._register(new ne),this._onDidUpdateConfiguration=this._register(new ne),this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:y(1649,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},LH.registerSchema(bT,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),LH.registerSchema(bT,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:n,source:r}of e)for(const o in n){t.add(o);const a=this.configurationDefaultsOverrides.get(o)??this.configurationDefaultsOverrides.set(o,{configurationDefaultOverrides:[]}).get(o),l=n[o];if(a.configurationDefaultOverrides.push({value:l,source:r}),ap.test(o)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(o,c,r),i.push(..._N(o))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const h=this.configurationProperties[o];h&&(this.updatePropertyDefaultValue(o,h),this.updateSchema(o,h))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const n={type:"object",default:t.value,description:y(1650,"Configure settings to be overridden for {0}.",zre(e)),$ref:bT,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=n,this.defaultLanguageConfigurationOverridesNode.properties[e]=n}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,n){const r=n?.value||{},o=n?.source??new Map;if(!(o instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(Xo(l)&&(mc(r[a])||Xo(r[a]))){if(r[a]={...r[a]??{},...l},i)for(const h in l)o.set(`${a}.${h}`,i)}else r[a]=l,i?o.set(a,i):o.delete(a)}return{value:r,source:o}}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,n){const r=this.configurationProperties[e],o=n?.value??r?.defaultDefaultValue;let a=i;if(Xo(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(mc(o)||Xo(o)))){if(a=n?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&a.set(`${e}.${c}`,i);t={...Xo(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(n=>{this.validateAndRegisterProperties(n,t,n.extensionInfo,n.restrictedProperties,void 0,i),this.configurationContributors.push(n),this.registerJSONConfiguration(n)})}validateAndRegisterProperties(e,t=!0,i,n,r=4,o){r=fc(e.scope)?r:e.scope;const a=e.properties;if(a)for(const c in a){const h=a[c];if(t&&Yre(c,h)){delete a[c];continue}h.source=i,h.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,h),ap.test(c)?h.scope=void 0:(h.scope=fc(h.scope)?r:h.scope,h.restricted=fc(h.restricted)?!!n?.includes(c):h.restricted),h.experiment?h.tags?.some(_=>_.toLowerCase()==="onexp")||(h.tags=h.tags??[],h.tags.push("onExP")):h.tags?.some(_=>_.toLowerCase()==="onexp")&&(console.error(`Invalid tag 'onExP' found for property '${c}'. Please use 'experiment' property instead.`),h.experiment={mode:"startup"});const d=a[c].hasOwnProperty("included")&&!a[c].included,g=a[c].policy?.name;d?(this.excludedConfigurationProperties[c]=a[c],g&&(this.policyConfigurations.set(g,c),o.add(c)),delete a[c]):(o.add(c),g&&this.policyConfigurations.set(g,c),this.configurationProperties[c]=a[c],!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage))}const l=e.allOf;if(l)for(const c of l)this.validateAndRegisterProperties(c,t,i,n,r,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}registerJSONConfiguration(e){const t=i=>{const n=i.properties;if(n)for(const o in n)this.updateSchema(o,n[o]);i.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 3:break;case 7:break;case 4:break;case 5:break;case 6:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:y(1651,"Configure editor settings to be overridden for a language."),errorMessage:y(1652,"This setting does not support per-language configuration."),$ref:bT};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){y(1653,"Configure editor settings to be overridden for a language."),y(1654,"This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue;let n,r;i&&(!t.disallowConfigurationDefault||!i.source)&&(n=i.value,r=i.source),mc(n)&&(n=t.defaultDefaultValue,r=void 0),mc(n)&&(n=Kre(t.type)),t.default=n,t.defaultValueSource=r}}const ZG="\\[([^\\]]+)\\]",xH=new RegExp(ZG,"g"),Gre=`^(${ZG})+$`,ap=new RegExp(Gre);function _N(s){const e=[];if(ap.test(s)){let t=xH.exec(s);for(;t?.length;){const i=t[1].trim();i&&e.push(i),t=xH.exec(s)}}return a0(e)}function Kre(s){switch(Array.isArray(s)?s[0]:s){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const LD=new jre;or.add(P0.Configuration,LD);function Yre(s,e){return s.trim()?ap.test(s)?y(1656,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",s):LD.getConfigurationProperties()[s]!==void 0?y(1657,"Cannot register '{0}'. This property is already registered.",s):e.policy?.name&&LD.getPolicyConfigurations().get(e.policy?.name)!==void 0?y(1658,"Cannot register '{0}'. The associated policy {1} is already registered with {2}.",s,e.policy?.name,LD.getPolicyConfigurations().get(e.policy?.name)):null:y(1655,"Cannot register an empty property")}const Zre={ModesRegistry:"editor.modesRegistry"};class Xre extends pe{constructor(){super(),this._onDidChangeLanguages=this._register(new ne),this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const sC=new Xre;or.add(Zre.ModesRegistry,sC);const ru="plaintext",Qre=".txt";sC.registerLanguage({id:ru,extensions:[Qre],aliases:[y(780,"Plain Text"),"text"],mimetypes:[eg.text]});or.as(P0.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1},"[go]":{"editor.insertSpaces":!1},"[makefile]":{"editor.insertSpaces":!1},"[shellscript]":{"files.eol":`
`},"[yaml]":{"editor.insertSpaces":!0,"editor.tabSize":2}}}]);class Jre{constructor(e,t){this.languageId=e;const i=t.brackets?kH(t.brackets):[],n=new MV(a=>{const l=new Set;return{info:new eoe(this,a,l),closing:l}}),r=new MV(a=>{const l=new Set,c=new Set;return{info:new toe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=n.get(a),h=r.get(l);c.closing.add(h.info),h.opening.add(c.info)}const o=t.colorizedBracketPairs?kH(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=n.get(a),h=r.get(l);c.closing.add(h.info),h.openingColorized.add(c.info),h.opening.add(c.info)}this._openingBrackets=new Map([...n.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return N2(t,e)}}function kH(s){return s.filter(([e,t])=>e!==""&&t!=="")}class XG{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class eoe extends XG{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class toe extends XG{constructor(e,t,i,n){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=n,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var ioe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},EH=function(s,e){return function(t,i){e(t,i,s)}};class RM{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const zd=At("languageConfigurationService");let W3=class extends pe{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new ooe),this.onDidChangeEmitter=this._register(new ne),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(z3));this._register(this.configurationService.onDidChangeConfiguration(n=>{const r=n.change.keys.some(a=>i.has(a)),o=n.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new RM(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new RM(a)))})),this._register(this._registry.onDidChange(n=>{this.configurations.delete(n.languageId),this.onDidChangeEmitter.fire(new RM(n.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=noe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};W3=ioe([EH(0,cn),EH(1,$s)],W3);function noe(s,e,t,i){let n=e.getLanguageConfiguration(s);if(!n){if(!i.isRegisteredLanguageId(s))return new Ew(s,{});n=new Ew(s,{})}const r=soe(n.languageId,t),o=JG([n.underlyingConfig,r]);return new Ew(n.languageId,o)}const z3={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function soe(s,e){const t=e.getValue(z3.brackets,{overrideIdentifier:s}),i=e.getValue(z3.colorizedBracketPairs,{overrideIdentifier:s});return{brackets:TH(t),colorizedBracketPairs:TH(i)}}function TH(s){if(Array.isArray(s))return s.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function QG(s,e,t){const i=s.getLineContent(e);let n=fo(i);return n.length>t-1&&(n=n.substring(0,t-1)),n}class roe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new DH(e,t,++this._order);return this._entries.push(i),this._resolved=null,lt(()=>{for(let n=0;n<this._entries.length;n++)if(this._entries[n]===i){this._entries.splice(n,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Ew(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(DH.cmp),JG(this._entries.map(e=>e.configuration)))}}function JG(s){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of s)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class DH{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class NH{constructor(e){this.languageId=e}}class ooe extends pe{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event,this._register(this.register(ru,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let n=this._entries.get(e);n||(n=new roe(e),this._entries.set(e,n));const r=n.register(t,i);return this._onDidChange.fire(new NH(e)),lt(()=>{r.dispose(),this._onDidChange.fire(new NH(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}}class Ew{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new jv(this.underlyingConfig):null,this.comments=Ew._handleComments(this.underlyingConfig),this.characterPair=new V3(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||K6,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new Hre(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new Jre(e,this.underlyingConfig)}getWordDefinition(){return Y6(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Rre(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new Vre(this.brackets)),this._electricCharacter}onEnter(e,t,i,n){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,n):null}getAutoClosingPairs(){return new Ere(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(typeof t.lineComment=="string"?i.lineCommentToken=t.lineComment:(i.lineCommentToken=t.lineComment.comment,i.lineCommentNoIndent=t.lineComment.noIndent)),t.blockComment){const[n,r]=t.blockComment;i.blockCommentStartToken=n,i.blockCommentEndToken=r}return i}}$t(zd,W3,1);class Sm{constructor(e,t,i,n){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=n}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class IH{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,n=e.length;i<n;i++)t[i]=e.charCodeAt(i);return t}}function aoe(s,e,t){return new tg(new IH(s),new IH(e)).ComputeDiff(t).changes}class bv{static Assert(e,t){if(!e)throw new Error(t)}}class vv{static Copy(e,t,i,n,r){for(let o=0;o<r;o++)i[n+o]=e[t+o]}static Copy2(e,t,i,n,r){for(let o=0;o<r;o++)i[n+o]=e[t+o]}}class AH{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Sm(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class tg{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[n,r,o]=tg._getElements(e),[a,l,c]=tg._getElements(t);this._hasStrings=o&&c,this._originalStringElements=n,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(tg._isStringArray(t)){const i=new Int32Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=fP(t[n],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=tg._getStrictElement(this._originalSequence,e),n=tg._getStrictElement(this._modifiedSequence,t);return i===n}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,n,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,i,n,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,i,n,r){for(r[0]=!1;e<=t&&i<=n&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&n>=i&&this.ElementsAreEqual(t,n);)t--,n--;if(e>t||i>n){let d;return i<=n?(bv.Assert(e===t+1,"originalStart should only be one more than originalEnd"),d=[new Sm(e,0,i,n-i+1)]):e<=t?(bv.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),d=[new Sm(e,t-e+1,i,0)]):(bv.Assert(e===t+1,"originalStart should only be one more than originalEnd"),bv.Assert(i===n+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,n,o,a,r),c=o[0],h=a[0];if(l!==null)return l;if(!r[0]){const d=this.ComputeDiffRecursive(e,c,i,h,r);let g=[];return r[0]?g=[new Sm(c+1,t-(c+1)+1,h+1,n-(h+1)+1)]:g=this.ComputeDiffRecursive(c+1,t,h+1,n,r),this.ConcatenateChanges(d,g)}return[new Sm(e,t-e+1,i,n-i+1)]}WALKTRACE(e,t,i,n,r,o,a,l,c,h,d,g,_,b,C,S,E,x){let T=null,N=null,A=new AH,P=t,O=i,V=_[0]-S[0]-n,U=-1073741824,Y=this.m_forwardHistory.length-1;do{const B=V+e;B===P||B<O&&c[B-1]<c[B+1]?(d=c[B+1],b=d-V-n,d<U&&A.MarkNextChange(),U=d,A.AddModifiedElement(d+1,b),V=B+1-e):(d=c[B-1]+1,b=d-V-n,d<U&&A.MarkNextChange(),U=d-1,A.AddOriginalElement(d,b+1),V=B-1-e),Y>=0&&(c=this.m_forwardHistory[Y],e=c[0],P=1,O=c.length-1)}while(--Y>=-1);if(T=A.getReverseChanges(),x[0]){let B=_[0]+1,F=S[0]+1;if(T!==null&&T.length>0){const W=T[T.length-1];B=Math.max(B,W.getOriginalEnd()),F=Math.max(F,W.getModifiedEnd())}N=[new Sm(B,g-B+1,F,C-F+1)]}else{A=new AH,P=o,O=a,V=_[0]-S[0]-l,U=1073741824,Y=E?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const B=V+r;B===P||B<O&&h[B-1]>=h[B+1]?(d=h[B+1]-1,b=d-V-l,d>U&&A.MarkNextChange(),U=d+1,A.AddOriginalElement(d+1,b+1),V=B+1-r):(d=h[B-1],b=d-V-l,d>U&&A.MarkNextChange(),U=d,A.AddModifiedElement(d+1,b+1),V=B-1-r),Y>=0&&(h=this.m_reverseHistory[Y],r=h[0],P=1,O=h.length-1)}while(--Y>=-1);N=A.getChanges()}return this.ConcatenateChanges(T,N)}ComputeRecursionPoint(e,t,i,n,r,o,a){let l=0,c=0,h=0,d=0,g=0,_=0;e--,i--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const b=t-e+(n-i),C=b+1,S=new Int32Array(C),E=new Int32Array(C),x=n-i,T=t-e,N=e-i,A=t-n,O=(T-x)%2===0;S[x]=e,E[T]=t,a[0]=!1;for(let V=1;V<=b/2+1;V++){let U=0,Y=0;h=this.ClipDiagonalBound(x-V,V,x,C),d=this.ClipDiagonalBound(x+V,V,x,C);for(let F=h;F<=d;F+=2){F===h||F<d&&S[F-1]<S[F+1]?l=S[F+1]:l=S[F-1]+1,c=l-(F-x)-N;const W=l;for(;l<t&&c<n&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(S[F]=l,l+c>U+Y&&(U=l,Y=c),!O&&Math.abs(F-T)<=V-1&&l>=E[F])return r[0]=l,o[0]=c,W<=E[F]&&V<=1448?this.WALKTRACE(x,h,d,N,T,g,_,A,S,E,l,t,r,c,n,o,O,a):null}const B=(U-e+(Y-i)-V)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(U,B))return a[0]=!0,r[0]=U,o[0]=Y,B>0&&V<=1448?this.WALKTRACE(x,h,d,N,T,g,_,A,S,E,l,t,r,c,n,o,O,a):(e++,i++,[new Sm(e,t-e+1,i,n-i+1)]);g=this.ClipDiagonalBound(T-V,V,T,C),_=this.ClipDiagonalBound(T+V,V,T,C);for(let F=g;F<=_;F+=2){F===g||F<_&&E[F-1]>=E[F+1]?l=E[F+1]-1:l=E[F-1],c=l-(F-T)-A;const W=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(E[F]=l,O&&Math.abs(F-x)<=V&&l<=S[F])return r[0]=l,o[0]=c,W>=S[F]&&V<=1448?this.WALKTRACE(x,h,d,N,T,g,_,A,S,E,l,t,r,c,n,o,O,a):null}if(V<=1447){let F=new Int32Array(d-h+2);F[0]=x-h+1,vv.Copy2(S,h,F,1,d-h+1),this.m_forwardHistory.push(F),F=new Int32Array(_-g+2),F[0]=T-g+1,vv.Copy2(E,g,F,1,_-g+1),this.m_reverseHistory.push(F)}}return this.WALKTRACE(x,h,d,N,T,g,_,A,S,E,l,t,r,c,n,o,O,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],n=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<n&&i.modifiedStart+i.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let n=0,r=0;if(t>0){const d=e[t-1];n=d.originalStart+d.originalLength,r=d.modifiedStart+d.modifiedLength}const o=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let d=1;;d++){const g=i.originalStart-d,_=i.modifiedStart-d;if(g<n||_<r||o&&!this.OriginalElementsAreEqual(g,g+i.originalLength)||a&&!this.ModifiedElementsAreEqual(_,_+i.modifiedLength))break;const C=(g===n&&_===r?5:0)+this._boundaryScore(g,i.originalLength,_,i.modifiedLength);C>c&&(c=C,l=d)}i.originalStart-=l,i.modifiedStart-=l;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const n=e[t-1],r=e[t],o=r.originalStart-n.originalStart-n.originalLength,a=n.originalStart,l=r.originalStart+r.originalLength,c=l-a,h=n.modifiedStart,d=r.modifiedStart+r.modifiedLength,g=d-h;if(o<5&&c<20&&g<20){const _=this._findBetterContiguousSequence(a,c,h,g,o);if(_){const[b,C]=_;(b!==n.originalStart+n.originalLength||C!==n.modifiedStart+n.modifiedLength)&&(n.originalLength=b-n.originalStart,n.modifiedLength=C-n.modifiedStart,r.originalStart=b+o,r.modifiedStart=C+o,r.originalLength=l-r.originalStart,r.modifiedLength=d-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,n,r){if(t<r||n<r)return null;const o=e+t-r+1,a=i+n-r+1;let l=0,c=0,h=0;for(let d=e;d<o;d++)for(let g=i;g<a;g++){const _=this._contiguousSequenceScore(d,g,r);_>0&&_>l&&(l=_,c=d,h=g)}return l>0?[c,h]:null}_contiguousSequenceScore(e,t,i){let n=0;for(let r=0;r<i;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;n+=this._originalStringElements[e+r].length}return n}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,n){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(i,n)?1:0;return r+o}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const n=new Array(e.length+t.length-1);return vv.Copy(e,0,n,0,e.length-1),n[e.length-1]=i[0],vv.Copy(t,1,n,e.length,t.length-1),n}else{const n=new Array(e.length+t.length);return vv.Copy(e,0,n,0,e.length),vv.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,i){if(bv.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),bv.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const n=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new Sm(n,r,o,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,n){if(e>=0&&e<n)return e;const r=i,o=n-i-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?n-1:n-2}}}function bN(s){return s<0?0:s>255?255:s|0}function wv(s){return s<0?0:s>4294967295?4294967295:s|0}class I2{constructor(e){const t=bN(e);this._defaultValue=t,this._asciiMap=I2._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=bN(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class loe{constructor(e,t,i){const n=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)n[r]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class coe{constructor(e){let t=0,i=0;for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const n=new loe(i,t,0);for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];n.set(a,l,c)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let MM=null;function uoe(){return MM===null&&(MM=new coe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),MM}let pS=null;function hoe(){if(pS===null){pS=new I2(0);const s=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…|`;for(let t=0;t<s.length;t++)pS.set(s.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)pS.set(e.charCodeAt(t),2)}return pS}class vN{static _createLink(e,t,i,n,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>n);if(n>0){const a=t.charCodeAt(n-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:o+2},url:t.substring(n,o+1)}}static computeLinks(e,t=uoe()){const i=hoe(),n=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,h=0,d=0,g=1,_=!1,b=!1,C=!1,S=!1;for(;c<l;){let E=!1;const x=a.charCodeAt(c);if(g===13){let T;switch(x){case 40:_=!0,T=0;break;case 41:T=_?0:1;break;case 91:C=!0,b=!0,T=0;break;case 93:C=!1,T=b?0:1;break;case 123:S=!0,T=0;break;case 125:T=S?0:1;break;case 39:case 34:case 96:d===x?T=1:d===39||d===34||d===96?T=0:T=1;break;case 42:T=d===42?1:0;break;case 32:T=C?0:1;break;default:T=i.get(x)}T===1&&(n.push(vN._createLink(i,a,r,h,c)),E=!0)}else if(g===12){let T;x===91?(b=!0,T=0):T=i.get(x),T===1?E=!0:g=13}else g=t.nextState(g,x),g===0&&(E=!0);E&&(g=1,_=!1,b=!1,S=!1,h=c+1,d=x),c++}g===13&&n.push(vN._createLink(i,a,r,h,l))}return n}}function doe(s){return!s||typeof s.getLineCount!="function"||typeof s.getLineContent!="function"?[]:vN.computeLinks(s)}const aA=class aA{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,n,r){if(e&&t){const o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(i&&n){const o=this.doNavigateValueSet(n,r);if(o)return{range:i,value:o}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let n=Number(e);const r=parseFloat(e);return!isNaN(n)&&!isNaN(r)&&n===r?n===0&&!t?null:(n=Math.floor(n*i),n+=t?i:-i,String(n/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let n=null;for(let r=0,o=e.length;n===null&&r<o;r++)n=this.valueSetReplace(e[r],t,i);return n}valueSetReplace(e,t,i){let n=e.indexOf(t);return n>=0?(n+=i?1:-1,n<0?n=e.length-1:n%=e.length,e[n]):null}};aA.INSTANCE=new aA;let U3=aA;const A2={DateTimeFormat(s,e){return new po(()=>{try{return new Intl.DateTimeFormat(s,e)}catch{return new Intl.DateTimeFormat(void 0,e)}})},Collator(s,e){return new po(()=>{try{return new Intl.Collator(s,e)}catch{return new Intl.Collator(void 0,e)}})},Segmenter(s,e){return new po(()=>{try{return new Intl.Segmenter(s,e)}catch{return new Intl.Segmenter(void 0,e)}})},Locale(s,e){return new po(()=>{try{return new Intl.Locale(s,e)}catch{return new Intl.Locale(C1,e)}})},NumberFormat(s,e){return new po(()=>{try{return new Intl.NumberFormat(s,e)}catch{return new Intl.NumberFormat(void 0,e)}})}};class foe extends I2{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=A2.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,n=e.length;i<n;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.value.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const RH=new T2(10);function rC(s,e){const t=`${s}/${e.join(",")}`;let i=RH.get(t);return i||(i=new foe(s,e),RH.set(t,i)),i}var wN;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(wN||(wN={}));var lp;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=3]="Right"})(lp||(lp={}));var El;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(El||(El={}));var oC;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(oC||(oC={}));class xD{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Oa(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class kx{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function goe(s){return s&&typeof s.read=="function"}class OM{constructor(e,t,i,n,r,o){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=n,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class moe{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class poe{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function _oe(s){return!s.isTooLargeForSyncing()&&!s.isForSimpleWidget}const boe=999;class Cv{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=eK(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=tG(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new moe(t,this.wordSeparators?rC(this.wordSeparators,[]):null,i?this.searchString:null)}}function eK(s){if(!s||s.length===0)return!1;for(let e=0,t=s.length;e<t;e++){const i=s.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const n=s.charCodeAt(e);if(n===110||n===114||n===87)return!0}}return!1}function Q_(s,e,t){if(!t)return new kx(s,null);const i=[];for(let n=0,r=e.length;n<r;n++)i[n]=e[n];return new kx(s,i)}class MH{constructor(e){const t=[];let i=0;for(let n=0,r=e.length;n<r;n++)e.charCodeAt(n)===10&&(t[i++]=n);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,n=t.length-1;if(n===-1||e<=t[0])return 0;for(;i<n;){const r=i+((n-i)/2>>0);t[r]>=e?n=r-1:t[r+1]>=e?(i=r,n=r):i=r+1}return i+1}}class vT{static findMatches(e,t,i,n,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,i,new Gv(o.wordSeparators,o.regex),n,r):this._doFindMatchesLineByLine(e,i,o,n,r):[]}static _getMultilineMatchRange(e,t,i,n,r,o){let a,l=0;n?(l=n.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(n){const _=n.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+_}else c=a+o.length;const h=e.getPositionAt(a),d=e.getPositionAt(c);return new ie(h.lineNumber,h.column,d.lineNumber,d.column)}static _doFindMatchesMultiline(e,t,i,n,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new MH(a):null,c=[];let h=0,d;for(i.reset(0);d=i.next(a);)if(c[h++]=Q_(this._getMultilineMatchRange(e,o,a,l,d.index,d[0]),d,n),h>=r)return c;return c}static _doFindMatchesLineByLine(e,t,i,n,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,o,n,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,o,n,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,o,n,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,o,n,r)}return o}static _findMatchesInLine(e,t,i,n,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const g=e.simpleSearch,_=g.length,b=t.length;let C=-_;for(;(C=t.indexOf(g,C+_))!==-1;)if((!c||IP(c,t,b,C,_))&&(o[r++]=new kx(new ie(i,C+1+n,i,C+1+_+n),null),r>=l))return r;return r}const h=new Gv(e.wordSeparators,e.regex);let d;h.reset(0);do if(d=h.next(t),d&&(o[r++]=Q_(new ie(i,d.index+1+n,i,d.index+1+d[0].length+n),d,a),r>=l))return r;while(d);return r}static findNextMatch(e,t,i,n){const r=t.parseSearchRequest();if(!r)return null;const o=new Gv(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,i,o,n):this._doFindNextMatchLineByLine(e,i,o,n)}static _doFindNextMatchMultiline(e,t,i,n){const r=new se(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new ie(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new MH(l):null;i.reset(t.column-1);const h=i.next(l);return h?Q_(this._getMultilineMatchRange(e,o,l,c,h.index,h[0]),h,n):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new se(1,1),i,n):null}static _doFindNextMatchLineByLine(e,t,i,n){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(i,a,o,t.column,n);if(l)return l;for(let c=1;c<=r;c++){const h=(o+c-1)%r,d=e.getLineContent(h+1),g=this._findFirstMatchInLine(i,d,h+1,1,n);if(g)return g}return null}static _findFirstMatchInLine(e,t,i,n,r){e.reset(n-1);const o=e.next(t);return o?Q_(new ie(i,o.index+1,i,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,i,n){const r=t.parseSearchRequest();if(!r)return null;const o=new Gv(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,i,o,n):this._doFindPreviousMatchLineByLine(e,i,o,n)}static _doFindPreviousMatchMultiline(e,t,i,n){const r=this._doFindMatchesMultiline(e,new ie(1,1,t.lineNumber,t.column),i,n,10*boe);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new se(o,e.getLineMaxColumn(o)),i,n):null}static _doFindPreviousMatchLineByLine(e,t,i,n){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,o,n);if(l)return l;for(let c=1;c<=r;c++){const h=(r+o-c-1)%r,d=e.getLineContent(h+1),g=this._findLastMatchInLine(i,d,h+1,n);if(g)return g}return null}static _findLastMatchInLine(e,t,i,n){let r=null,o;for(e.reset(0);o=e.next(t);)r=Q_(new ie(i,o.index+1,i,o.index+1+o[0].length),o,n);return r}}function voe(s,e,t,i,n){if(i===0)return!0;const r=e.charCodeAt(i-1);if(s.get(r)!==0||r===13||r===10)return!0;if(n>0){const o=e.charCodeAt(i);if(s.get(o)!==0)return!0}return!1}function woe(s,e,t,i,n){if(i+n===t)return!0;const r=e.charCodeAt(i+n);if(s.get(r)!==0||r===13||r===10)return!0;if(n>0){const o=e.charCodeAt(i+n-1);if(s.get(o)!==0)return!0}return!1}function IP(s,e,t,i,n){return voe(s,e,t,i,n)&&woe(s,e,t,i,n)}class Gv{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const n=i.index,r=i[0].length;if(n===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){uN(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=r,!this._wordSeparators||IP(this._wordSeparators,e,t,n,r))return i}while(i);return null}}class Coe{static computeUnicodeHighlights(e,t,i){const n=i?i.startLineNumber:1,r=i?i.endLineNumber:e.getLineCount(),o=new OH(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${yoe(Array.from(a))}`,"g");const c=new Gv(null,l),h=[];let d=!1,g,_=0,b=0,C=0;e:for(let S=n,E=r;S<=E;S++){const x=e.getLineContent(S),T=x.length;c.reset(0);do if(g=c.next(x),g){let N=g.index,A=g.index+g[0].length;if(N>0){const U=x.charCodeAt(N-1);xs(U)&&N--}if(A+1<T){const U=x.charCodeAt(A-1);xs(U)&&A++}const P=x.substring(N,A);let O=ux(N+1,K6,x,0);O&&O.endColumn<=N+1&&(O=null);const V=o.shouldHighlightNonBasicASCII(P,O?O.word:null);if(V!==0){if(V===3?_++:V===2?b++:V===1?C++:z6(),h.length>=1e3){d=!0;break e}h.push(new ie(S,N+1,S,A+1))}}while(g)}return{ranges:h,hasMore:d,ambiguousCharacterCount:_,invisibleCharacterCount:b,nonBasicAsciiCharacterCount:C}}static computeUnicodeHighlightReason(e,t){const i=new OH(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const r=e.codePointAt(0),o=i.ambiguousCharacters.getPrimaryConfusable(r),a=px.getLocales().filter(l=>!px.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(r));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function yoe(s,e){return`[${Ad(s.map(i=>String.fromCodePoint(i)).join(""))}]`}class OH{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=px.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of oL.codePoints)PH(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let n=!1,r=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=oP(o);n=n||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!oL.isInvisibleCharacter(a)&&(r=!0)}return!n&&r?0:this.options.invisibleCharacters&&!PH(e)&&oL.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function PH(s){return s===" "||s===`
`||s==="	"}class kD{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class tK{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class it{static fromTo(e,t){return new it(e,t)}static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let n=i;for(;n<t.length&&t[n].start<=e.endExclusive;)n++;if(i===n)t.splice(i,0,e);else{const r=Math.min(e.start,t[i].start),o=Math.max(e.endExclusive,t[n-1].endExclusive);t.splice(i,n-i,new it(r,o))}}static tryCreate(e,t){if(!(e>t))return new it(e,t)}static ofLength(e){return new it(0,e)}static ofStartAndLength(e,t){return new it(e,e+t)}static emptyAt(e){return new it(e,e)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new at(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new it(this.start+e,this.endExclusive+e)}deltaStart(e){return new it(this.start+e,this.endExclusive)}deltaEnd(e){return new it(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new it(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new it(t,i)}intersectionLength(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,i-t)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}intersectsOrTouches(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<=i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new at(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new at(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new at(`Invalid join: ${this.toString()} and ${e.toString()}`);return new it(this.start,e.endExclusive)}}class AP{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const n=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new it(n,r))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new AP;for(const i of this._sortedRanges){const n=i.intersect(e);n&&t.addRange(n)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function CN(s,e,t=s.length-1){const i=Soe(s,e,t);if(i!==-1)return s[i]}function Soe(s,e,t=s.length-1){for(let i=t;i>=0;i--){const n=s[i];if(e(n))return i}return-1}function aC(s,e){const t=lC(s,e);return t===-1?void 0:s[t]}function lC(s,e,t=0,i=s.length){let n=t,r=i;for(;n<r;){const o=Math.floor((n+r)/2);e(s[o])?n=o+1:r=o}return n-1}function Loe(s,e){const t=q3(s,e);return t===s.length?void 0:s[t]}function q3(s,e,t=0,i=s.length){let n=t,r=i;for(;n<r;){const o=Math.floor((n+r)/2);e(s[o])?r=o:n=o+1}return n}const lA=class lA{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(lA.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=lC(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};lA.assertInvariants=!1;let yN=lA;function iK(s,e){if(s.length===0)return;let t=s[0];for(let i=1;i<s.length;i++){const n=s[i];e(n,t)>0&&(t=n)}return t}function xoe(s,e){if(s.length===0)return;let t=s[0];for(let i=1;i<s.length;i++){const n=s[i];e(n,t)>=0&&(t=n)}return t}function koe(s,e){return iK(s,(t,i)=>-e(t,i))}function Eoe(s,e){if(s.length===0)return-1;let t=0;for(let i=1;i<s.length;i++){const n=s[i];e(n,s[t])>0&&(t=i)}return t}const rc=class rc{static ofLength(e,t){return new rc(e,e+t)}static fromRange(e){return new rc(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new rc(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new gc(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new gc(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new at("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let n=1;n<e.length;n++)t=Math.min(t,e[n].startLineNumber),i=Math.max(i,e[n].endLineNumberExclusive);return new rc(t,i)}static deserialize(e){return new rc(e[0],e[1])}constructor(e,t){if(e>t)throw new at(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new rc(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new rc(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new rc(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new rc(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new ie(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new ie(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new it(this.startLineNumber-1,this.endLineNumberExclusive-1)}addMargin(e,t){return new rc(this.startLineNumber-e,this.endLineNumberExclusive+t)}};rc.compareByStart=Dl(e=>e.startLineNumber,ug);let dt=rc;class gc{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=q3(this._normalizedRanges,n=>n.endLineNumberExclusive>=e.startLineNumber),i=lC(this._normalizedRanges,n=>n.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const n=this._normalizedRanges[t];this._normalizedRanges[t]=n.join(e)}else{const n=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,n)}}contains(e){const t=aC(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=aC(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,n=0,r=null;for(;i<this._normalizedRanges.length||n<e._normalizedRanges.length;){let o=null;if(i<this._normalizedRanges.length&&n<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[n];a.startLineNumber<l.startLineNumber?(o=a,i++):(o=l,n++)}else i<this._normalizedRanges.length?(o=this._normalizedRanges[i],i++):(o=e._normalizedRanges[n],n++);r===null?r=o:r.endLineNumberExclusive>=o.startLineNumber?r=new dt(r.startLineNumber,Math.max(r.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(r),r=o)}return r!==null&&t.push(r),new gc(t)}subtractFrom(e){const t=q3(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),i=lC(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new gc([e]);const n=[];let r=e.startLineNumber;for(let o=t;o<i;o++){const a=this._normalizedRanges[o];a.startLineNumber>r&&n.push(new dt(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&n.push(new dt(r,e.endLineNumberExclusive)),new gc(n)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,n=0;for(;i<this._normalizedRanges.length&&n<e._normalizedRanges.length;){const r=this._normalizedRanges[i],o=e._normalizedRanges[n],a=r.intersect(o);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<o.endLineNumberExclusive?i++:n++}return new gc(t)}getWithDelta(e){return new gc(this._normalizedRanges.map(t=>t.delta(e)))}}const Hu=class Hu{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new Hu(0,t.column-e.column):new Hu(t.lineNumber-e.lineNumber,t.column-1)}static fromPosition(e){return new Hu(e.lineNumber-1,e.column-1)}static ofRange(e){return Hu.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const n of e)n===`
`?(t++,i=0):i++;return new Hu(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}add(e){return e.lineCount===0?new Hu(this.lineCount,this.columnCount+e.columnCount):new Hu(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new ie(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new ie(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new ie(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return dt.ofLength(1,this.lineCount+1)}addToPosition(e){return this.lineCount===0?new se(e.lineNumber,e.column+this.columnCount):new se(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};Hu.zero=new Hu(0,0);let Ha=Hu;class Toe{getOffsetRange(e){return new it(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getRange(e){return ie.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getStringReplacement(e){return new F1.deps.StringReplacement(this.getOffsetRange(e.range),e.text)}getTextReplacement(e){return new F1.deps.TextReplacement(this.getRange(e.replaceRange),e.newText)}getTextEdit(e){const t=e.replacements.map(i=>this.getTextReplacement(i));return new F1.deps.TextEdit(t)}}const XF=class XF{static get deps(){if(!this._deps)throw new Error("Dependencies not set. Call _setDependencies first.");return this._deps}};XF._deps=void 0;let F1=XF;function Doe(s){F1._deps=s}class vR extends Toe{constructor(e){super(),this.text=e,this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&(this.lineStartOffsetByLineIdx.push(t+1),t>0&&e.charAt(t-1)==="\r"?this.lineEndOffsetByLineIdx.push(t-1):this.lineEndOffsetByLineIdx.push(t));this.lineEndOffsetByLineIdx.push(e.length)}getOffset(e){const t=this._validatePosition(e);return this.lineStartOffsetByLineIdx[t.lineNumber-1]+t.column-1}_validatePosition(e){if(e.lineNumber<1)return new se(1,1);const t=this.textLength.lineCount+1;if(e.lineNumber>t){const n=this.getLineLength(t);return new se(t,n+1)}if(e.column<1)return new se(e.lineNumber,1);const i=this.getLineLength(e.lineNumber);return e.column-1>i?new se(e.lineNumber,i+1):e}getPosition(e){const t=lC(this.lineStartOffsetByLineIdx,r=>r<=e),i=t+1,n=e-this.lineStartOffsetByLineIdx[t]+1;return new se(i,n)}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new F1.deps.TextLength(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}}class RP{constructor(){this._transformer=void 0}get endPositionExclusive(){return this.length.addToPosition(new se(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getValueOfOffsetRange(e){return this.getValueOfRange(this.getTransformer().getRange(e))}getLineLength(e){return this.getValueOfRange(new ie(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new vR(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new ie(e,1,e,Number.MAX_SAFE_INTEGER))}}class Noe extends RP{constructor(e,t){sN(t>=1),super(),this._getLineContent=e,this._lineCount=t}getValueOfRange(e){if(e.startLineNumber===e.endLineNumber)return this._getLineContent(e.startLineNumber).substring(e.startColumn-1,e.endColumn-1);let t=this._getLineContent(e.startLineNumber).substring(e.startColumn-1);for(let i=e.startLineNumber+1;i<e.endLineNumber;i++)t+=`
`+this._getLineContent(i);return t+=`
`+this._getLineContent(e.endLineNumber).substring(0,e.endColumn-1),t}getLineLength(e){return this._getLineContent(e).length}get length(){const e=this._getLineContent(this._lineCount);return new Ha(this._lineCount-1,e.length)}}class wT extends Noe{constructor(e){super(t=>e[t-1],e.length)}}class BH extends RP{constructor(e){super(),this.value=e,this._t=new vR(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class Ex{static fromStringEdit(e,t){const i=e.replacements.map(n=>$u.fromStringReplacement(n,t));return new Ex(i)}static fromParallelReplacementsUnsorted(e){const t=e.slice().sort(Dl(i=>i.range,ie.compareRangesUsingStarts));return new Ex(t)}constructor(e){this.replacements=e,l0(()=>U6(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}mapPosition(e){let t=0,i=0,n=0;for(const r of this.replacements){const o=r.range.getStartPosition();if(e.isBeforeOrEqual(o))break;const a=r.range.getEndPosition(),l=Ha.ofText(r.text);if(e.isBefore(a)){const c=new se(o.lineNumber+t,o.column+(o.lineNumber+t===i?n:0)),h=l.addToPosition(c);return CT(c,h)}o.lineNumber+t!==i&&(n=0),t+=l.lineCount-(r.range.endLineNumber-r.range.startLineNumber),l.lineCount===0?a.lineNumber!==o.lineNumber?n+=l.columnCount-(a.column-1):n+=l.columnCount-(a.column-o.column):n=l.columnCount,i=a.lineNumber+t}return new se(e.lineNumber+t,e.column+(e.lineNumber+t===i?n:0))}mapRange(e){function t(o){return o instanceof se?o:o.getStartPosition()}function i(o){return o instanceof se?o:o.getEndPosition()}const n=t(this.mapPosition(e.getStartPosition())),r=i(this.mapPosition(e.getEndPosition()));return CT(n,r)}apply(e){let t="",i=new se(1,1);for(const r of this.replacements){const o=r.range,a=o.getStartPosition(),l=o.getEndPosition(),c=CT(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=r.text,i=l}const n=CT(i,e.endPositionExclusive);return n.isEmpty()||(t+=e.getValueOfRange(n)),t}applyToString(e){const t=new BH(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,n=0;for(const r of this.replacements){const o=Ha.ofText(r.text),a=se.lift({lineNumber:r.range.startLineNumber+i,column:r.range.startColumn+(r.range.startLineNumber===t?n:0)}),l=o.createRange(a);e.push(l),i=l.endLineNumber-r.range.endLineNumber,n=l.endColumn-r.range.endColumn,t=r.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new at;if(this.replacements.length===1)return this.replacements[0];const t=this.replacements[0].range.getStartPosition(),i=this.replacements[this.replacements.length-1].range.getEndPosition();let n="";for(let r=0;r<this.replacements.length;r++){const o=this.replacements[r];if(n+=o.text,r<this.replacements.length-1){const a=this.replacements[r+1],l=ie.fromPositions(o.range.getEndPosition(),a.range.getStartPosition()),c=e.getValueOfRange(l);n+=c}}return new $u(ie.fromPositions(t,i),n)}toString(e){return e===void 0?this.replacements.map(t=>t.toString()).join(`
`):typeof e=="string"?this.toString(new BH(e)):this.replacements.length===0?"":this.replacements.map(t=>{const n=e.getValueOfRange(t.range),r=ie.fromPositions(new se(Math.max(1,t.range.startLineNumber-1),1),t.range.getStartPosition());let o=e.getValueOfRange(r);o.length>10&&(o="..."+o.substring(o.length-10));const a=ie.fromPositions(t.range.getEndPosition(),new se(t.range.endLineNumber+1,1));let l=e.getValueOfRange(a);l.length>10&&(l=l.substring(0,10)+"...");let c=n;if(c.length>10){const d=Math.floor(5);c=c.substring(0,d)+"..."+c.substring(c.length-d)}let h=t.text;if(h.length>10){const d=Math.floor(5);h=h.substring(0,d)+"..."+h.substring(h.length-d)}return c.length===0?`${o}❰${h}❱${l}`:`${o}❰${c}↦${h}❱${l}`}).join(`
`)}}class $u{static joinReplacements(e,t){if(e.length===0)throw new at;if(e.length===1)return e[0];const i=e[0].range.getStartPosition(),n=e[e.length-1].range.getEndPosition();let r="";for(let o=0;o<e.length;o++){const a=e[o];if(r+=a.text,o<e.length-1){const l=e[o+1],c=ie.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),h=t.getValueOfRange(c);r+=h}}return new $u(ie.fromPositions(i,n),r)}static fromStringReplacement(e,t){return new $u(t.getTransformer().getRange(e.replaceRange),e.newText)}static delete(e){return new $u(e,"")}constructor(e,t){this.range=e,this.text=t}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,t){return e.range.equalsRange(t.range)&&e.text===t.text}equals(e){return $u.equals(this,e)}removeCommonPrefixAndSuffix(e){return this.removeCommonPrefix(e).removeCommonSuffix(e)}removeCommonPrefix(e){const t=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=this.text.replaceAll(`\r
`,`
`),n=Jw(t,i),r=Ha.ofText(t.substring(0,n)).addToPosition(this.range.getStartPosition()),o=i.substring(n),a=ie.fromPositions(r,this.range.getEndPosition());return new $u(a,o)}removeCommonSuffix(e){const t=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=this.text.replaceAll(`\r
`,`
`),n=eC(t,i),r=Ha.ofText(t.substring(0,t.length-n)).addToPosition(this.range.getStartPosition()),o=i.substring(0,i.length-n),a=ie.fromPositions(this.range.getStartPosition(),r);return new $u(a,o)}toString(){const e=this.range.getStartPosition(),t=this.range.getEndPosition();return`(${e.lineNumber},${e.column} -> ${t.lineNumber},${t.column}): "${this.text}"`}}function CT(s,e){if(s.lineNumber===e.lineNumber&&s.column===Number.MAX_SAFE_INTEGER)return ie.fromPositions(e,e);if(!s.isBeforeOrEqual(e))throw new at("start must be before end");return new ie(s.lineNumber,s.column,e.lineNumber,e.column)}class eo{static inverse(e,t,i){const n=[];let r=1,o=1;for(const l of e){const c=new eo(new dt(r,l.original.startLineNumber),new dt(o,l.modified.startLineNumber));c.modified.isEmpty||n.push(c),r=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new eo(new dt(r,t+1),new dt(o,i+1));return a.modified.isEmpty||n.push(a),n}static clip(e,t,i){const n=[];for(const r of e){const o=r.original.intersect(t),a=r.modified.intersect(i);o&&!o.isEmpty&&a&&!a.isEmpty&&n.push(new eo(o,a))}return n}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new eo(this.modified,this.original)}join(e){return new eo(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new Na(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new at("not a valid diff");return new Na(new ie(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ie(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Na(new ie(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new ie(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(FH(this.original.endLineNumberExclusive,e)&&FH(this.modified.endLineNumberExclusive,t))return new Na(new ie(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new ie(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Na(ie.fromPositions(new se(this.original.startLineNumber,1),yv(new se(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),ie.fromPositions(new se(this.modified.startLineNumber,1),yv(new se(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Na(ie.fromPositions(yv(new se(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),yv(new se(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),ie.fromPositions(yv(new se(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),yv(new se(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new at}}function yv(s,e){if(s.lineNumber<1)return new se(1,1);if(s.lineNumber>e.length)return new se(e.length,e[e.length-1].length+1);const t=e[s.lineNumber-1];return s.column>t.length+1?new se(s.lineNumber,t.length+1):s}function FH(s,e){return s>=1&&s<=e.length}class Il extends eo{static fromRangeMappings(e){const t=dt.join(e.map(n=>dt.fromRangeInclusive(n.originalRange))),i=dt.join(e.map(n=>dt.fromRangeInclusive(n.modifiedRange)));return new Il(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){return new Il(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new Il(this.original,this.modified,[this.toRangeMapping()])}}class Na{static fromEdit(e){const t=e.getNewRanges();return e.replacements.map((n,r)=>new Na(n.range,t[r]))}static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],n=e[t];if(!(i.originalRange.getEndPosition().isBeforeOrEqual(n.originalRange.getStartPosition())&&i.modifiedRange.getEndPosition().isBeforeOrEqual(n.modifiedRange.getStartPosition())))throw new at("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Na(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new $u(this.originalRange,t)}}function VH(s,e,t,i=!1){const n=[];for(const r of F6(s.map(o=>Ioe(o,e,t)),(o,a)=>o.original.intersectsOrTouches(a.original)||o.modified.intersectsOrTouches(a.modified))){const o=r[0],a=r[r.length-1];n.push(new Il(o.original.join(a.original),o.modified.join(a.modified),r.map(l=>l.innerChanges[0])))}return l0(()=>!i&&n.length>0&&(n[0].modified.startLineNumber!==n[0].original.startLineNumber||t.length.lineCount-n[n.length-1].modified.endLineNumberExclusive!==e.length.lineCount-n[n.length-1].original.endLineNumberExclusive)?!1:U6(n,(r,o)=>o.original.startLineNumber-r.original.endLineNumberExclusive===o.modified.startLineNumber-r.modified.endLineNumberExclusive&&r.original.endLineNumberExclusive<o.original.startLineNumber&&r.modified.endLineNumberExclusive<o.modified.startLineNumber)),n}function Ioe(s,e,t){let i=0,n=0;s.modifiedRange.endColumn===1&&s.originalRange.endColumn===1&&s.originalRange.startLineNumber+i<=s.originalRange.endLineNumber&&s.modifiedRange.startLineNumber+i<=s.modifiedRange.endLineNumber&&(n=-1),s.modifiedRange.startColumn-1>=t.getLineLength(s.modifiedRange.startLineNumber)&&s.originalRange.startColumn-1>=e.getLineLength(s.originalRange.startLineNumber)&&s.originalRange.startLineNumber<=s.originalRange.endLineNumber+n&&s.modifiedRange.startLineNumber<=s.modifiedRange.endLineNumber+n&&(i=1);const r=new dt(s.originalRange.startLineNumber+i,s.originalRange.endLineNumber+1+n),o=new dt(s.modifiedRange.startLineNumber+i,s.modifiedRange.endLineNumber+1+n);return new Il(r,o,[s])}const Aoe=3;class Roe{computeDiff(e,t,i){const r=new Poe(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let a=null;for(const l of r.changes){let c;l.originalEndLineNumber===0?c=new dt(l.originalStartLineNumber+1,l.originalStartLineNumber+1):c=new dt(l.originalStartLineNumber,l.originalEndLineNumber+1);let h;l.modifiedEndLineNumber===0?h=new dt(l.modifiedStartLineNumber+1,l.modifiedStartLineNumber+1):h=new dt(l.modifiedStartLineNumber,l.modifiedEndLineNumber+1);let d=new Il(c,h,l.charChanges?.map(g=>new Na(new ie(g.originalStartLineNumber,g.originalStartColumn,g.originalEndLineNumber,g.originalEndColumn),new ie(g.modifiedStartLineNumber,g.modifiedStartColumn,g.modifiedEndLineNumber,g.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===d.modified.startLineNumber||a.original.endLineNumberExclusive===d.original.startLineNumber)&&(d=new Il(a.original.join(d.original),a.modified.join(d.modified),a.innerChanges&&d.innerChanges?a.innerChanges.concat(d.innerChanges):void 0),o.pop()),o.push(d),a=d}return l0(()=>U6(o,(l,c)=>c.original.startLineNumber-l.original.endLineNumberExclusive===c.modified.startLineNumber-l.modified.endLineNumberExclusive&&l.original.endLineNumberExclusive<c.original.startLineNumber&&l.modified.endLineNumberExclusive<c.modified.startLineNumber)),new kD(o,[],r.quitEarly)}}function nK(s,e,t,i){return new tg(s,e,t).ComputeDiff(i)}let HH=class{constructor(e){const t=[],i=[];for(let n=0,r=e.length;n<r;n++)t[n]=$3(e[n],1),i[n]=j3(e[n],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const n=[],r=[],o=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],h=e?this._startColumns[l]:1,d=e?this._endColumns[l]:c.length+1;for(let g=h;g<d;g++)n[a]=c.charCodeAt(g-1),r[a]=l+1,o[a]=g,a++;!e&&l<i&&(n[a]=10,r[a]=l+1,o[a]=c.length+1,a++)}return new Moe(n,r,o)}};class Moe{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class Tw{constructor(e,t,i,n,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=n,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const n=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),h=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),d=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new Tw(n,r,o,a,l,c,h,d)}}function Ooe(s){if(s.length<=1)return s;const e=[s[0]];let t=e[0];for(let i=1,n=s.length;i<n;i++){const r=s[i],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<Aoe?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class dL{constructor(e,t,i,n,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=n,this.charChanges=r}static createFromDiffResult(e,t,i,n,r,o,a){let l,c,h,d,g;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=n.getStartLineNumber(t.modifiedStart)-1,d=0):(h=n.getStartLineNumber(t.modifiedStart),d=n.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const _=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),b=n.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(_.getElements().length>0&&b.getElements().length>0){let C=nK(_,b,r,!0).changes;a&&(C=Ooe(C)),g=[];for(let S=0,E=C.length;S<E;S++)g.push(Tw.createFromDiffChange(C[S],_,b))}}return new dL(l,c,h,d,g)}}class Poe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new HH(e),this.modified=new HH(t),this.continueLineDiff=WH(i.maxComputationTime),this.continueCharDiff=WH(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=nK(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(dL.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const n=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,h=c?c.originalStart:this.originalLines.length,d=c?c.modifiedStart:this.modifiedLines.length;for(;r<h&&o<d;){const g=this.originalLines[r],_=this.modifiedLines[o];if(g!==_){{let b=$3(g,1),C=$3(_,1);for(;b>1&&C>1;){const S=g.charCodeAt(b-2),E=_.charCodeAt(C-2);if(S!==E)break;b--,C--}(b>1||C>1)&&this._pushTrimWhitespaceCharChange(n,r+1,1,b,o+1,1,C)}{let b=j3(g,1),C=j3(_,1);const S=g.length+1,E=_.length+1;for(;b<S&&C<E;){const x=g.charCodeAt(b-1),T=g.charCodeAt(C-1);if(x!==T)break;b++,C++}(b<S||C<E)&&this._pushTrimWhitespaceCharChange(n,r+1,b,S,o+1,C,E)}}r++,o++}c&&(n.push(dL.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:i,changes:n}}_pushTrimWhitespaceCharChange(e,t,i,n,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,n,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new Tw(t,i,t,n,r,o,r,a)]),e.push(new dL(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,i,n,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===r?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Tw(t,i,t,n,r,o,r,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Tw(t,i,t,n,r,o,r,a)),!0):!1}}function $3(s,e){const t=Pa(s);return t===-1?e:t+1}function j3(s,e){const t=I0(s);return t===-1?e:t+2}function WH(s){if(s===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<s}class fg{static trivial(e,t){return new fg([new Ls(it.ofLength(e.length),it.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new fg([new Ls(it.ofLength(e.length),it.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class Ls{static invert(e,t){const i=[];return xj(e,(n,r)=>{i.push(Ls.fromOffsetPairs(n?n.getEndExclusives():rg.zero,r?r.getStarts():new rg(t,(n?n.seq2Range.endExclusive-n.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new Ls(new it(e.offset1,t.offset1),new it(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new at("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new Ls(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new Ls(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new Ls(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new Ls(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new Ls(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new Ls(t,i)}getStarts(){return new rg(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new rg(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const _1=class _1{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new _1(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};_1.zero=new _1(0,0),_1.max=new _1(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let rg=_1;const cA=class cA{isValid(){return!0}};cA.instance=new cA;let Tx=cA;class Boe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new at("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}}class PM{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function G3(s){return s===32||s===9}const YL=class YL{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let n=0;for(let r=e.startLineNumber-1;r<e.endLineNumberExclusive-1;r++){const o=t[r];for(let l=0;l<o.length;l++){n++;const c=o[l],h=YL.getKey(c);this.histogram[h]=(this.histogram[h]||0)+1}n++;const a=YL.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=n}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let n=0;n<i;n++)t+=Math.abs((this.histogram[n]??0)-(e.histogram[n]??0));return 1-t/(this.totalCount+e.totalCount)}};YL.chrKeys=new Map;let SN=YL;class Foe{compute(e,t,i=Tx.instance,n){if(e.length===0||t.length===0)return fg.trivial(e,t);const r=new PM(e.length,t.length),o=new PM(e.length,t.length),a=new PM(e.length,t.length);for(let b=0;b<e.length;b++)for(let C=0;C<t.length;C++){if(!i.isValid())return fg.trivialTimedOut(e,t);const S=b===0?0:r.get(b-1,C),E=C===0?0:r.get(b,C-1);let x;e.getElement(b)===t.getElement(C)?(b===0||C===0?x=0:x=r.get(b-1,C-1),b>0&&C>0&&o.get(b-1,C-1)===3&&(x+=a.get(b-1,C-1)),x+=n?n(b,C):1):x=-1;const T=Math.max(S,E,x);if(T===x){const N=b>0&&C>0?a.get(b-1,C-1):0;a.set(b,C,N+1),o.set(b,C,3)}else T===S?(a.set(b,C,0),o.set(b,C,1)):T===E&&(a.set(b,C,0),o.set(b,C,2));r.set(b,C,T)}const l=[];let c=e.length,h=t.length;function d(b,C){(b+1!==c||C+1!==h)&&l.push(new Ls(new it(b+1,c),new it(C+1,h))),c=b,h=C}let g=e.length-1,_=t.length-1;for(;g>=0&&_>=0;)o.get(g,_)===3?(d(g,_),g--,_--):o.get(g,_)===1?g--:_--;return d(-1,-1),l.reverse(),new fg(l,!1)}}class sK{compute(e,t,i=Tx.instance){if(e.length===0||t.length===0)return fg.trivial(e,t);const n=e,r=t;function o(C,S){for(;C<n.length&&S<r.length&&n.getElement(C)===r.getElement(S);)C++,S++;return C}let a=0;const l=new Voe;l.set(0,o(0,0));const c=new Hoe;c.set(0,l.get(0)===0?null:new zH(null,0,0,l.get(0)));let h=0;e:for(;;){if(a++,!i.isValid())return fg.trivialTimedOut(n,r);const C=-Math.min(a,r.length+a%2),S=Math.min(a,n.length+a%2);for(h=C;h<=S;h+=2){const E=h===S?-1:l.get(h+1),x=h===C?-1:l.get(h-1)+1,T=Math.min(Math.max(E,x),n.length),N=T-h;if(T>n.length||N>r.length)continue;const A=o(T,N);l.set(h,A);const P=T===E?c.get(h+1):c.get(h-1);if(c.set(h,A!==T?new zH(P,T,N,A-T):P),l.get(h)===n.length&&l.get(h)-h===r.length)break e}}let d=c.get(h);const g=[];let _=n.length,b=r.length;for(;;){const C=d?d.x+d.length:0,S=d?d.y+d.length:0;if((C!==_||S!==b)&&g.push(new Ls(new it(C,_),new it(S,b))),!d)break;_=d.x,b=d.y,d=d.prev}return g.reverse(),new fg(g,!1)}}class zH{constructor(e,t,i,n){this.prev=e,this.x=t,this.y=i,this.length=n}}class Voe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class Hoe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class LN{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let n=this.range.startLineNumber;n<=this.range.endLineNumber;n++){let r=e[n-1],o=0;n===this.range.startLineNumber&&this.range.startColumn>1&&(o=this.range.startColumn-1,r=r.substring(o)),this.lineStartOffsets.push(o);let a=0;if(!i){const c=r.trimStart();a=r.length-c.length,r=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=n===this.range.endLineNumber?Math.min(this.range.endColumn-1-o-a,r.length):r.length;for(let c=0;c<l;c++)this.elements.push(r.charCodeAt(c));n<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new it(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=$H(e>0?this.elements[e-1]:-1),i=$H(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let n=0;return t!==i&&(n+=10,t===0&&i===1&&(n+=1)),n+=qH(t),n+=qH(i),n}translateOffset(e,t="right"){const i=lC(this.firstElementOffsetByLineIdx,r=>r<=e),n=e-this.firstElementOffsetByLineIdx[i];return new se(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+n+(n===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?ie.fromPositions(i,i):ie.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length||!Sv(this.elements[e]))return;let t=e;for(;t>0&&Sv(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&Sv(this.elements[i]);)i++;return new it(t,i)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!Sv(this.elements[e]))return;let t=e;for(;t>0&&Sv(this.elements[t-1])&&!UH(this.elements[t]);)t--;let i=e;for(;i<this.elements.length&&Sv(this.elements[i])&&!UH(this.elements[i]);)i++;return new it(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=aC(this.firstElementOffsetByLineIdx,n=>n<=e.start)??0,i=Loe(this.firstElementOffsetByLineIdx,n=>e.endExclusive<=n)??this.elements.length;return new it(t,i)}}function Sv(s){return s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57}function UH(s){return s>=65&&s<=90}const Woe={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function qH(s){return Woe[s]}function $H(s){return s===10?8:s===13?7:G3(s)?6:s>=97&&s<=122?0:s>=65&&s<=90?1:s>=48&&s<=57?2:s===-1?3:s===44||s===59?5:4}function zoe(s,e,t,i,n,r){let{moves:o,excludedChanges:a}=qoe(s,e,t,r);if(!r.isValid())return[];const l=s.filter(h=>!a.has(h)),c=$oe(l,i,n,e,t,r);return iO(o,c),o=joe(o),o=o.filter(h=>{const d=h.original.toOffsetRange().slice(e).map(_=>_.trim());return d.join(`
`).length>=15&&Uoe(d,_=>_.length>=2)>=2}),o=Goe(s,o),o}function Uoe(s,e){let t=0;for(const i of s)e(i)&&t++;return t}function qoe(s,e,t,i){const n=[],r=s.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new SN(l.original,e,l)),o=new Set(s.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new SN(l.modified,t,l))),a=new Set;for(const l of r){let c=-1,h;for(const d of o){const g=l.computeSimilarity(d);g>c&&(c=g,h=d)}if(c>.9&&h&&(o.delete(h),n.push(new eo(l.range,h.range)),a.add(l.source),a.add(h.source)),!i.isValid())return{moves:n,excludedChanges:a}}return{moves:n,excludedChanges:a}}function $oe(s,e,t,i,n,r){const o=[],a=new RG;for(const g of s)for(let _=g.original.startLineNumber;_<g.original.endLineNumberExclusive-2;_++){const b=`${e[_-1]}:${e[_+1-1]}:${e[_+2-1]}`;a.add(b,{range:new dt(_,_+3)})}const l=[];s.sort(Dl(g=>g.modified.startLineNumber,ug));for(const g of s){let _=[];for(let b=g.modified.startLineNumber;b<g.modified.endLineNumberExclusive-2;b++){const C=`${t[b-1]}:${t[b+1-1]}:${t[b+2-1]}`,S=new dt(b,b+3),E=[];a.forEach(C,({range:x})=>{for(const N of _)if(N.originalLineRange.endLineNumberExclusive+1===x.endLineNumberExclusive&&N.modifiedLineRange.endLineNumberExclusive+1===S.endLineNumberExclusive){N.originalLineRange=new dt(N.originalLineRange.startLineNumber,x.endLineNumberExclusive),N.modifiedLineRange=new dt(N.modifiedLineRange.startLineNumber,S.endLineNumberExclusive),E.push(N);return}const T={modifiedLineRange:S,originalLineRange:x};l.push(T),E.push(T)}),_=E}if(!r.isValid())return[]}l.sort(Ree(Dl(g=>g.modifiedLineRange.length,ug)));const c=new gc,h=new gc;for(const g of l){const _=g.modifiedLineRange.startLineNumber-g.originalLineRange.startLineNumber,b=c.subtractFrom(g.modifiedLineRange),C=h.subtractFrom(g.originalLineRange).getWithDelta(_),S=b.getIntersection(C);for(const E of S.ranges){if(E.length<3)continue;const x=E,T=E.delta(-_);o.push(new eo(T,x)),c.addRange(x),h.addRange(T)}}o.sort(Dl(g=>g.original.startLineNumber,ug));const d=new yN(s);for(let g=0;g<o.length;g++){const _=o[g],b=d.findLastMonotonous(P=>P.original.startLineNumber<=_.original.startLineNumber),C=aC(s,P=>P.modified.startLineNumber<=_.modified.startLineNumber),S=Math.max(_.original.startLineNumber-b.original.startLineNumber,_.modified.startLineNumber-C.modified.startLineNumber),E=d.findLastMonotonous(P=>P.original.startLineNumber<_.original.endLineNumberExclusive),x=aC(s,P=>P.modified.startLineNumber<_.modified.endLineNumberExclusive),T=Math.max(E.original.endLineNumberExclusive-_.original.endLineNumberExclusive,x.modified.endLineNumberExclusive-_.modified.endLineNumberExclusive);let N;for(N=0;N<S;N++){const P=_.original.startLineNumber-N-1,O=_.modified.startLineNumber-N-1;if(P>i.length||O>n.length||c.contains(O)||h.contains(P)||!jH(i[P-1],n[O-1],r))break}N>0&&(h.addRange(new dt(_.original.startLineNumber-N,_.original.startLineNumber)),c.addRange(new dt(_.modified.startLineNumber-N,_.modified.startLineNumber)));let A;for(A=0;A<T;A++){const P=_.original.endLineNumberExclusive+A,O=_.modified.endLineNumberExclusive+A;if(P>i.length||O>n.length||c.contains(O)||h.contains(P)||!jH(i[P-1],n[O-1],r))break}A>0&&(h.addRange(new dt(_.original.endLineNumberExclusive,_.original.endLineNumberExclusive+A)),c.addRange(new dt(_.modified.endLineNumberExclusive,_.modified.endLineNumberExclusive+A))),(N>0||A>0)&&(o[g]=new eo(new dt(_.original.startLineNumber-N,_.original.endLineNumberExclusive+A),new dt(_.modified.startLineNumber-N,_.modified.endLineNumberExclusive+A)))}return o}function jH(s,e,t){if(s.trim()===e.trim())return!0;if(s.length>300&&e.length>300)return!1;const n=new sK().compute(new LN([s],new ie(1,1,1,s.length),!1),new LN([e],new ie(1,1,1,e.length),!1),t);let r=0;const o=Ls.invert(n.diffs,s.length);for(const h of o)h.seq1Range.forEach(d=>{G3(s.charCodeAt(d))||r++});function a(h){let d=0;for(let g=0;g<s.length;g++)G3(h.charCodeAt(g))||d++;return d}const l=a(s.length>e.length?s:e);return r/l>.6&&l>10}function joe(s){if(s.length===0)return s;s.sort(Dl(t=>t.original.startLineNumber,ug));const e=[s[0]];for(let t=1;t<s.length;t++){const i=e[e.length-1],n=s[t],r=n.original.startLineNumber-i.original.endLineNumberExclusive,o=n.modified.startLineNumber-i.modified.endLineNumberExclusive;if(r>=0&&o>=0&&r+o<=2){e[e.length-1]=i.join(n);continue}e.push(n)}return e}function Goe(s,e){const t=new yN(s);return e=e.filter(i=>{const n=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new eo(new dt(1,1),new dt(1,1)),r=aC(s,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return n!==r}),e}function GH(s,e,t){let i=t;return i=KH(s,e,i),i=KH(s,e,i),i=Koe(s,e,i),i}function KH(s,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let r=1;r<t.length;r++){const o=i[i.length-1];let a=t[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(s.getElement(a.seq1Range.start-c)!==s.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new Ls(new it(o.seq1Range.start,a.seq1Range.endExclusive-l),new it(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const n=[];for(let r=0;r<i.length-1;r++){const o=i[r+1];let a=i[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!s.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[r+1]=new Ls(new it(a.seq1Range.start+l,o.seq1Range.endExclusive),new it(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}n.push(a)}return i.length>0&&n.push(i[i.length-1]),n}function Koe(s,e,t){if(!s.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const n=i>0?t[i-1]:void 0,r=t[i],o=i+1<t.length?t[i+1]:void 0,a=new it(n?n.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:s.length),l=new it(n?n.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);r.seq1Range.isEmpty?t[i]=YH(r,s,e,a,l):r.seq2Range.isEmpty&&(t[i]=YH(r.swap(),e,s,l,a).swap())}return t}function YH(s,e,t,i,n){let o=1;for(;s.seq1Range.start-o>=i.start&&s.seq2Range.start-o>=n.start&&t.isStronglyEqual(s.seq2Range.start-o,s.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;s.seq1Range.start+a<i.endExclusive&&s.seq2Range.endExclusive+a<n.endExclusive&&t.isStronglyEqual(s.seq2Range.start+a,s.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return s;let l=0,c=-1;for(let h=-o;h<=a;h++){const d=s.seq2Range.start+h,g=s.seq2Range.endExclusive+h,_=s.seq1Range.start+h,b=e.getBoundaryScore(_)+t.getBoundaryScore(d)+t.getBoundaryScore(g);b>c&&(c=b,l=h)}return s.delta(l)}function Yoe(s,e,t){const i=[];for(const n of t){const r=i[i.length-1];if(!r){i.push(n);continue}n.seq1Range.start-r.seq1Range.endExclusive<=2||n.seq2Range.start-r.seq2Range.endExclusive<=2?i[i.length-1]=new Ls(r.seq1Range.join(n.seq1Range),r.seq2Range.join(n.seq2Range)):i.push(n)}return i}function ZH(s,e,t,i,n=!1){const r=Ls.invert(t,s.length),o=[];let a=new rg(0,0);function l(h,d){if(h.offset1<a.offset1||h.offset2<a.offset2)return;const g=i(s,h.offset1),_=i(e,h.offset2);if(!g||!_)return;let b=new Ls(g,_);const C=b.intersect(d);let S=C.seq1Range.length,E=C.seq2Range.length;for(;r.length>0;){const x=r[0];if(!(x.seq1Range.intersects(b.seq1Range)||x.seq2Range.intersects(b.seq2Range)))break;const N=i(s,x.seq1Range.start),A=i(e,x.seq2Range.start),P=new Ls(N,A),O=P.intersect(x);if(S+=O.seq1Range.length,E+=O.seq2Range.length,b=b.join(P),b.seq1Range.endExclusive>=x.seq1Range.endExclusive)r.shift();else break}(n&&S+E<b.seq1Range.length+b.seq2Range.length||S+E<(b.seq1Range.length+b.seq2Range.length)*2/3)&&o.push(b),a=b.getEndExclusives()}for(;r.length>0;){const h=r.shift();h.seq1Range.isEmpty||(l(h.getStarts(),h),l(h.getEndExclusives().delta(-1),h))}return Zoe(t,o)}function Zoe(s,e){const t=[];for(;s.length>0||e.length>0;){const i=s[0],n=e[0];let r;i&&(!n||i.seq1Range.start<n.seq1Range.start)?r=s.shift():r=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=r.seq1Range.start?t[t.length-1]=t[t.length-1].join(r):t.push(r)}return t}function Xoe(s,e,t){let i=t;if(i.length===0)return i;let n=0,r;do{r=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let d=function(_,b){const C=new it(h.seq1Range.endExclusive,c.seq1Range.start);return s.getText(C).replace(/\s/g,"").length<=4&&(_.seq1Range.length+_.seq2Range.length>5||b.seq1Range.length+b.seq2Range.length>5)};var o=d;const c=i[l],h=a[a.length-1];d(h,c)?(r=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(n++<10&&r);return i}function Qoe(s,e,t){let i=t;if(i.length===0)return i;let n=0,r;do{r=!1;const l=[i[0]];for(let c=1;c<i.length;c++){let g=function(b,C){const S=new it(d.seq1Range.endExclusive,h.seq1Range.start);if(s.countLinesIn(S)>5||S.length>500)return!1;const x=s.getText(S).trim();if(x.length>20||x.split(/\r\n|\r|\n/).length>1)return!1;const T=s.countLinesIn(b.seq1Range),N=b.seq1Range.length,A=e.countLinesIn(b.seq2Range),P=b.seq2Range.length,O=s.countLinesIn(C.seq1Range),V=C.seq1Range.length,U=e.countLinesIn(C.seq2Range),Y=C.seq2Range.length,B=130;function F(W){return Math.min(W,B)}return Math.pow(Math.pow(F(T*40+N),1.5)+Math.pow(F(A*40+P),1.5),1.5)+Math.pow(Math.pow(F(O*40+V),1.5)+Math.pow(F(U*40+Y),1.5),1.5)>(B**1.5)**1.5*1.3};var a=g;const h=i[c],d=l[l.length-1];g(d,h)?(r=!0,l[l.length-1]=l[l.length-1].join(h)):l.push(h)}i=l}while(n++<10&&r);const o=[];return Tee(i,(l,c,h)=>{let d=c;function g(x){return x.length>0&&x.trim().length<=3&&c.seq1Range.length+c.seq2Range.length>100}const _=s.extendToFullLines(c.seq1Range),b=s.getText(new it(_.start,c.seq1Range.start));g(b)&&(d=d.deltaStart(-b.length));const C=s.getText(new it(c.seq1Range.endExclusive,_.endExclusive));g(C)&&(d=d.deltaEnd(C.length));const S=Ls.fromOffsetPairs(l?l.getEndExclusives():rg.zero,h?h.getStarts():rg.max),E=d.intersect(S);o.length>0&&E.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(E):o.push(E)}),o}class XH{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:QH(this.lines[e-1]),i=e===this.lines.length?0:QH(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function QH(s){let e=0;for(;e<s.length&&(s.charCodeAt(e)===32||s.charCodeAt(e)===9);)e++;return e}class Joe{constructor(){this.dynamicProgrammingDiffing=new Foe,this.myersDiffingAlgorithm=new sK}computeDiff(e,t,i){if(e.length<=1&&vs(e,t,(O,V)=>O===V))return new kD([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new kD([new Il(new dt(1,e.length+1),new dt(1,t.length+1),[new Na(new ie(1,1,e.length,e[e.length-1].length+1),new ie(1,1,t.length,t[t.length-1].length+1))])],[],!1);const n=i.maxComputationTimeMs===0?Tx.instance:new Boe(i.maxComputationTimeMs),r=!i.ignoreTrimWhitespace,o=new Map;function a(O){let V=o.get(O);return V===void 0&&(V=o.size,o.set(O,V)),V}const l=e.map(O=>a(O.trim())),c=t.map(O=>a(O.trim())),h=new XH(l,e),d=new XH(c,t),g=h.length+d.length<1700?this.dynamicProgrammingDiffing.compute(h,d,n,(O,V)=>e[O]===t[V]?t[V].length===0?.1:1+Math.log(1+t[V].length):.99):this.myersDiffingAlgorithm.compute(h,d,n);let _=g.diffs,b=g.hitTimeout;_=GH(h,d,_),_=Xoe(h,d,_);const C=[],S=O=>{if(r)for(let V=0;V<O;V++){const U=E+V,Y=x+V;if(e[U]!==t[Y]){const B=this.refineDiff(e,t,new Ls(new it(U,U+1),new it(Y,Y+1)),n,r,i);for(const F of B.mappings)C.push(F);B.hitTimeout&&(b=!0)}}};let E=0,x=0;for(const O of _){l0(()=>O.seq1Range.start-E===O.seq2Range.start-x);const V=O.seq1Range.start-E;S(V),E=O.seq1Range.endExclusive,x=O.seq2Range.endExclusive;const U=this.refineDiff(e,t,O,n,r,i);U.hitTimeout&&(b=!0);for(const Y of U.mappings)C.push(Y)}S(e.length-E);const T=new wT(e),N=new wT(t),A=VH(C,T,N);let P=[];return i.computeMoves&&(P=this.computeMoves(A,e,t,l,c,n,r,i)),l0(()=>{function O(U,Y){if(U.lineNumber<1||U.lineNumber>Y.length)return!1;const B=Y[U.lineNumber-1];return!(U.column<1||U.column>B.length+1)}function V(U,Y){return!(U.startLineNumber<1||U.startLineNumber>Y.length+1||U.endLineNumberExclusive<1||U.endLineNumberExclusive>Y.length+1)}for(const U of A){if(!U.innerChanges)return!1;for(const Y of U.innerChanges)if(!(O(Y.modifiedRange.getStartPosition(),t)&&O(Y.modifiedRange.getEndPosition(),t)&&O(Y.originalRange.getStartPosition(),e)&&O(Y.originalRange.getEndPosition(),e)))return!1;if(!V(U.modified,t)||!V(U.original,e))return!1}return!0}),new kD(A,P,b)}computeMoves(e,t,i,n,r,o,a,l){return zoe(e,t,i,n,r,o).map(d=>{const g=this.refineDiff(t,i,new Ls(d.original.toOffsetRange(),d.modified.toOffsetRange()),o,a,l),_=VH(g.mappings,new wT(t),new wT(i),!0);return new tK(d,_)})}refineDiff(e,t,i,n,r,o){const l=eae(i).toRangeMapping2(e,t),c=new LN(e,l.originalRange,r),h=new LN(t,l.modifiedRange,r),d=c.length+h.length<500?this.dynamicProgrammingDiffing.compute(c,h,n):this.myersDiffingAlgorithm.compute(c,h,n);let g=d.diffs;return g=GH(c,h,g),g=ZH(c,h,g,(b,C)=>b.findWordContaining(C)),o.extendToSubwords&&(g=ZH(c,h,g,(b,C)=>b.findSubWordContaining(C),!0)),g=Yoe(c,h,g),g=Qoe(c,h,g),{mappings:g.map(b=>new Na(c.translateRange(b.seq1Range),h.translateRange(b.seq2Range))),hitTimeout:d.hitTimeout}}}function eae(s){return new eo(new dt(s.seq1Range.start+1,s.seq1Range.endExclusive+1),new dt(s.seq2Range.start+1,s.seq2Range.endExclusive+1))}const JH={getLegacy:()=>new Roe,getDefault:()=>new Joe};function Xm(s,e){const t=Math.pow(10,e);return Math.round(s*t)/t}class ge{constructor(e,t,i,n=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=Xm(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Kc{constructor(e,t,i,n){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Xm(Math.max(Math.min(1,t),0),3),this.l=Xm(Math.max(Math.min(1,i),0),3),this.a=Xm(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,r=e.a,o=Math.max(t,i,n),a=Math.min(t,i,n);let l=0,c=0;const h=(a+o)/2,d=o-a;if(d>0){switch(c=Math.min(h<=.5?d/(2*h):d/(2-2*h),1),o){case t:l=(i-n)/d+(i<n?6:0);break;case i:l=(n-t)/d+2;break;case n:l=(t-i)/d+4;break}l*=60,l=Math.round(l)}return new Kc(l,c,h,r)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:n,a:r}=e;let o,a,l;if(i===0)o=a=l=n;else{const c=n<.5?n*(1+i):n+i-n*i,h=2*n-c;o=Kc._hue2rgb(h,c,t+1/3),a=Kc._hue2rgb(h,c,t),l=Kc._hue2rgb(h,c,t-1/3)}return new ge(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class Kv{constructor(e,t,i,n){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Xm(Math.max(Math.min(1,t),0),3),this.v=Xm(Math.max(Math.min(1,i),0),3),this.a=Xm(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),o=Math.min(t,i,n),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((i-n)/a%6+6)%6:r===i?c=(n-t)/a+2:c=(t-i)/a+4,new Kv(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:i,v:n,a:r}=e,o=n*i,a=o*(1-Math.abs(t/60%2-1)),l=n-o;let[c,h,d]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,d=a):t<240?(h=a,d=o):t<300?(c=a,d=o):t<=360&&(c=o,d=a),c=Math.round((c+l)*255),h=Math.round((h+l)*255),d=Math.round((d+l)*255),new ge(c,h,d,r)}}const vn=class vn{static fromHex(e){return vn.Format.CSS.parseHex(e)||vn.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Kc.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Kv.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof ge)this.rgba=e;else if(e instanceof Kc)this._hsla=e,this.rgba=Kc.toRGBA(e);else if(e instanceof Kv)this._hsva=e,this.rgba=Kv.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&ge.equals(this.rgba,e.rgba)&&Kc.equals(this.hsla,e.hsla)&&Kv.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=vn._relativeLuminanceForComponent(this.rgba.r),t=vn._relativeLuminanceForComponent(this.rgba.g),i=vn._relativeLuminanceForComponent(this.rgba.b),n=.2126*e+.7152*t+.0722*i;return Xm(n,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new vn(new Kc(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new vn(new Kc(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:n,a:r}=this.rgba;return new vn(new ge(t,i,n,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new vn(new ge(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}mix(e,t=.5){const i=Math.min(Math.max(t,0),1),n=this.rgba,r=e.rgba,o=n.r+(r.r-n.r)*i,a=n.g+(r.g-n.g)*i,l=n.b+(r.b-n.b)*i,c=n.a+(r.a-n.a)*i;return new vn(new ge(o,a,l,c))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:n,a:r}=this.rgba;return new vn(new ge(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-i),e.rgba.b-r*(e.rgba.b-n),1))}toString(){return this._toString||(this._toString=vn.Format.CSS.format(this)),this._toString}toNumber32Bit(){return this._toNumber32Bit||(this._toNumber32Bit=(this.rgba.r<<24|this.rgba.g<<16|this.rgba.b<<8|this.rgba.a*255<<0)>>>0),this._toNumber32Bit}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(r-n)/r,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const n=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(n-r)/n,e.darken(i)}};vn.white=new vn(new ge(255,255,255,1)),vn.black=new vn(new ge(0,0,0,1)),vn.red=new vn(new ge(255,0,0,1)),vn.blue=new vn(new ge(0,0,255,1)),vn.green=new vn(new ge(0,255,0,1)),vn.cyan=new vn(new ge(0,255,255,1)),vn.lightgrey=new vn(new ge(211,211,211,1)),vn.transparent=new vn(new ge(0,0,0,0));let xe=vn;(function(s){(function(e){(function(t){function i(C){return C.rgba.a===1?`rgb(${C.rgba.r}, ${C.rgba.g}, ${C.rgba.b})`:s.Format.CSS.formatRGBA(C)}t.formatRGB=i;function n(C){return`rgba(${C.rgba.r}, ${C.rgba.g}, ${C.rgba.b}, ${+C.rgba.a.toFixed(2)})`}t.formatRGBA=n;function r(C){return C.hsla.a===1?`hsl(${C.hsla.h}, ${Math.round(C.hsla.s*100)}%, ${Math.round(C.hsla.l*100)}%)`:s.Format.CSS.formatHSLA(C)}t.formatHSL=r;function o(C){return`hsla(${C.hsla.h}, ${Math.round(C.hsla.s*100)}%, ${Math.round(C.hsla.l*100)}%, ${C.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(C){const S=C.toString(16);return S.length!==2?"0"+S:S}function l(C){return`#${a(C.rgba.r)}${a(C.rgba.g)}${a(C.rgba.b)}`}t.formatHex=l;function c(C,S=!1){return S&&C.rgba.a===1?s.Format.CSS.formatHex(C):`#${a(C.rgba.r)}${a(C.rgba.g)}${a(C.rgba.b)}${a(Math.round(C.rgba.a*255))}`}t.formatHexA=c;function h(C){return C.isOpaque()?s.Format.CSS.formatHex(C):s.Format.CSS.formatRGBA(C)}t.format=h;function d(C){if(C==="transparent")return s.transparent;if(C.startsWith("#"))return _(C);if(C.startsWith("rgba(")){const S=C.match(/rgba\((?<r>(?:\+|-)?\d+), *(?<g>(?:\+|-)?\d+), *(?<b>(?:\+|-)?\d+), *(?<a>(?:\+|-)?\d+(\.\d+)?)\)/);if(!S)throw new Error("Invalid color format "+C);const E=parseInt(S.groups?.r??"0"),x=parseInt(S.groups?.g??"0"),T=parseInt(S.groups?.b??"0"),N=parseFloat(S.groups?.a??"0");return new s(new ge(E,x,T,N))}if(C.startsWith("rgb(")){const S=C.match(/rgb\((?<r>(?:\+|-)?\d+), *(?<g>(?:\+|-)?\d+), *(?<b>(?:\+|-)?\d+)\)/);if(!S)throw new Error("Invalid color format "+C);const E=parseInt(S.groups?.r??"0"),x=parseInt(S.groups?.g??"0"),T=parseInt(S.groups?.b??"0");return new s(new ge(E,x,T))}return g(C)}t.parse=d;function g(C){switch(C){case"aliceblue":return new s(new ge(240,248,255,1));case"antiquewhite":return new s(new ge(250,235,215,1));case"aqua":return new s(new ge(0,255,255,1));case"aquamarine":return new s(new ge(127,255,212,1));case"azure":return new s(new ge(240,255,255,1));case"beige":return new s(new ge(245,245,220,1));case"bisque":return new s(new ge(255,228,196,1));case"black":return new s(new ge(0,0,0,1));case"blanchedalmond":return new s(new ge(255,235,205,1));case"blue":return new s(new ge(0,0,255,1));case"blueviolet":return new s(new ge(138,43,226,1));case"brown":return new s(new ge(165,42,42,1));case"burlywood":return new s(new ge(222,184,135,1));case"cadetblue":return new s(new ge(95,158,160,1));case"chartreuse":return new s(new ge(127,255,0,1));case"chocolate":return new s(new ge(210,105,30,1));case"coral":return new s(new ge(255,127,80,1));case"cornflowerblue":return new s(new ge(100,149,237,1));case"cornsilk":return new s(new ge(255,248,220,1));case"crimson":return new s(new ge(220,20,60,1));case"cyan":return new s(new ge(0,255,255,1));case"darkblue":return new s(new ge(0,0,139,1));case"darkcyan":return new s(new ge(0,139,139,1));case"darkgoldenrod":return new s(new ge(184,134,11,1));case"darkgray":return new s(new ge(169,169,169,1));case"darkgreen":return new s(new ge(0,100,0,1));case"darkgrey":return new s(new ge(169,169,169,1));case"darkkhaki":return new s(new ge(189,183,107,1));case"darkmagenta":return new s(new ge(139,0,139,1));case"darkolivegreen":return new s(new ge(85,107,47,1));case"darkorange":return new s(new ge(255,140,0,1));case"darkorchid":return new s(new ge(153,50,204,1));case"darkred":return new s(new ge(139,0,0,1));case"darksalmon":return new s(new ge(233,150,122,1));case"darkseagreen":return new s(new ge(143,188,143,1));case"darkslateblue":return new s(new ge(72,61,139,1));case"darkslategray":return new s(new ge(47,79,79,1));case"darkslategrey":return new s(new ge(47,79,79,1));case"darkturquoise":return new s(new ge(0,206,209,1));case"darkviolet":return new s(new ge(148,0,211,1));case"deeppink":return new s(new ge(255,20,147,1));case"deepskyblue":return new s(new ge(0,191,255,1));case"dimgray":return new s(new ge(105,105,105,1));case"dimgrey":return new s(new ge(105,105,105,1));case"dodgerblue":return new s(new ge(30,144,255,1));case"firebrick":return new s(new ge(178,34,34,1));case"floralwhite":return new s(new ge(255,250,240,1));case"forestgreen":return new s(new ge(34,139,34,1));case"fuchsia":return new s(new ge(255,0,255,1));case"gainsboro":return new s(new ge(220,220,220,1));case"ghostwhite":return new s(new ge(248,248,255,1));case"gold":return new s(new ge(255,215,0,1));case"goldenrod":return new s(new ge(218,165,32,1));case"gray":return new s(new ge(128,128,128,1));case"green":return new s(new ge(0,128,0,1));case"greenyellow":return new s(new ge(173,255,47,1));case"grey":return new s(new ge(128,128,128,1));case"honeydew":return new s(new ge(240,255,240,1));case"hotpink":return new s(new ge(255,105,180,1));case"indianred":return new s(new ge(205,92,92,1));case"indigo":return new s(new ge(75,0,130,1));case"ivory":return new s(new ge(255,255,240,1));case"khaki":return new s(new ge(240,230,140,1));case"lavender":return new s(new ge(230,230,250,1));case"lavenderblush":return new s(new ge(255,240,245,1));case"lawngreen":return new s(new ge(124,252,0,1));case"lemonchiffon":return new s(new ge(255,250,205,1));case"lightblue":return new s(new ge(173,216,230,1));case"lightcoral":return new s(new ge(240,128,128,1));case"lightcyan":return new s(new ge(224,255,255,1));case"lightgoldenrodyellow":return new s(new ge(250,250,210,1));case"lightgray":return new s(new ge(211,211,211,1));case"lightgreen":return new s(new ge(144,238,144,1));case"lightgrey":return new s(new ge(211,211,211,1));case"lightpink":return new s(new ge(255,182,193,1));case"lightsalmon":return new s(new ge(255,160,122,1));case"lightseagreen":return new s(new ge(32,178,170,1));case"lightskyblue":return new s(new ge(135,206,250,1));case"lightslategray":return new s(new ge(119,136,153,1));case"lightslategrey":return new s(new ge(119,136,153,1));case"lightsteelblue":return new s(new ge(176,196,222,1));case"lightyellow":return new s(new ge(255,255,224,1));case"lime":return new s(new ge(0,255,0,1));case"limegreen":return new s(new ge(50,205,50,1));case"linen":return new s(new ge(250,240,230,1));case"magenta":return new s(new ge(255,0,255,1));case"maroon":return new s(new ge(128,0,0,1));case"mediumaquamarine":return new s(new ge(102,205,170,1));case"mediumblue":return new s(new ge(0,0,205,1));case"mediumorchid":return new s(new ge(186,85,211,1));case"mediumpurple":return new s(new ge(147,112,219,1));case"mediumseagreen":return new s(new ge(60,179,113,1));case"mediumslateblue":return new s(new ge(123,104,238,1));case"mediumspringgreen":return new s(new ge(0,250,154,1));case"mediumturquoise":return new s(new ge(72,209,204,1));case"mediumvioletred":return new s(new ge(199,21,133,1));case"midnightblue":return new s(new ge(25,25,112,1));case"mintcream":return new s(new ge(245,255,250,1));case"mistyrose":return new s(new ge(255,228,225,1));case"moccasin":return new s(new ge(255,228,181,1));case"navajowhite":return new s(new ge(255,222,173,1));case"navy":return new s(new ge(0,0,128,1));case"oldlace":return new s(new ge(253,245,230,1));case"olive":return new s(new ge(128,128,0,1));case"olivedrab":return new s(new ge(107,142,35,1));case"orange":return new s(new ge(255,165,0,1));case"orangered":return new s(new ge(255,69,0,1));case"orchid":return new s(new ge(218,112,214,1));case"palegoldenrod":return new s(new ge(238,232,170,1));case"palegreen":return new s(new ge(152,251,152,1));case"paleturquoise":return new s(new ge(175,238,238,1));case"palevioletred":return new s(new ge(219,112,147,1));case"papayawhip":return new s(new ge(255,239,213,1));case"peachpuff":return new s(new ge(255,218,185,1));case"peru":return new s(new ge(205,133,63,1));case"pink":return new s(new ge(255,192,203,1));case"plum":return new s(new ge(221,160,221,1));case"powderblue":return new s(new ge(176,224,230,1));case"purple":return new s(new ge(128,0,128,1));case"rebeccapurple":return new s(new ge(102,51,153,1));case"red":return new s(new ge(255,0,0,1));case"rosybrown":return new s(new ge(188,143,143,1));case"royalblue":return new s(new ge(65,105,225,1));case"saddlebrown":return new s(new ge(139,69,19,1));case"salmon":return new s(new ge(250,128,114,1));case"sandybrown":return new s(new ge(244,164,96,1));case"seagreen":return new s(new ge(46,139,87,1));case"seashell":return new s(new ge(255,245,238,1));case"sienna":return new s(new ge(160,82,45,1));case"silver":return new s(new ge(192,192,192,1));case"skyblue":return new s(new ge(135,206,235,1));case"slateblue":return new s(new ge(106,90,205,1));case"slategray":return new s(new ge(112,128,144,1));case"slategrey":return new s(new ge(112,128,144,1));case"snow":return new s(new ge(255,250,250,1));case"springgreen":return new s(new ge(0,255,127,1));case"steelblue":return new s(new ge(70,130,180,1));case"tan":return new s(new ge(210,180,140,1));case"teal":return new s(new ge(0,128,128,1));case"thistle":return new s(new ge(216,191,216,1));case"tomato":return new s(new ge(255,99,71,1));case"turquoise":return new s(new ge(64,224,208,1));case"violet":return new s(new ge(238,130,238,1));case"wheat":return new s(new ge(245,222,179,1));case"white":return new s(new ge(255,255,255,1));case"whitesmoke":return new s(new ge(245,245,245,1));case"yellow":return new s(new ge(255,255,0,1));case"yellowgreen":return new s(new ge(154,205,50,1));default:return null}}function _(C){const S=C.length;if(S===0||C.charCodeAt(0)!==35)return null;if(S===7){const E=16*b(C.charCodeAt(1))+b(C.charCodeAt(2)),x=16*b(C.charCodeAt(3))+b(C.charCodeAt(4)),T=16*b(C.charCodeAt(5))+b(C.charCodeAt(6));return new s(new ge(E,x,T,1))}if(S===9){const E=16*b(C.charCodeAt(1))+b(C.charCodeAt(2)),x=16*b(C.charCodeAt(3))+b(C.charCodeAt(4)),T=16*b(C.charCodeAt(5))+b(C.charCodeAt(6)),N=16*b(C.charCodeAt(7))+b(C.charCodeAt(8));return new s(new ge(E,x,T,N/255))}if(S===4){const E=b(C.charCodeAt(1)),x=b(C.charCodeAt(2)),T=b(C.charCodeAt(3));return new s(new ge(16*E+E,16*x+x,16*T+T))}if(S===5){const E=b(C.charCodeAt(1)),x=b(C.charCodeAt(2)),T=b(C.charCodeAt(3)),N=b(C.charCodeAt(4));return new s(new ge(16*E+E,16*x+x,16*T+T,(16*N+N)/255))}return null}t.parseHex=_;function b(C){switch(C){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(s.Format||(s.Format={}))})(xe||(xe={}));function rK(s){const e=[];for(const t of s){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function MP(s,e,t,i){return{red:s/255,blue:t/255,green:e/255,alpha:i}}function _S(s,e){const t=e.index,i=e[0].length;if(t===void 0)return;const n=s.positionAt(t);return{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:n.lineNumber,endColumn:n.column+i}}function tae(s,e){if(!s)return;const t=xe.Format.CSS.parseHex(e);if(t)return{range:s,color:MP(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function eW(s,e,t){if(!s||e.length!==1)return;const n=e[0].values(),r=rK(n);return{range:s,color:MP(r[0],r[1],r[2],t?r[3]:1)}}function tW(s,e,t){if(!s||e.length!==1)return;const n=e[0].values(),r=rK(n),o=new xe(new Kc(r[0],r[1]/100,r[2]/100,t?r[3]:1));return{range:s,color:MP(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function bS(s,e){return typeof s=="string"?[...s.matchAll(e)]:s.findMatches(e)}function iae(s){const e=[],t=new RegExp(`\\b(rgb|rgba|hsl|hsla)(\\([0-9\\s,.\\%]*\\))|^(#)([A-Fa-f0-9]{3})\\b|^(#)([A-Fa-f0-9]{4})\\b|^(#)([A-Fa-f0-9]{6})\\b|^(#)([A-Fa-f0-9]{8})\\b|(?<=['"\\s])(#)([A-Fa-f0-9]{3})\\b|(?<=['"\\s])(#)([A-Fa-f0-9]{4})\\b|(?<=['"\\s])(#)([A-Fa-f0-9]{6})\\b|(?<=['"\\s])(#)([A-Fa-f0-9]{8})\\b`,"gm"),i=bS(s,t);if(i.length>0)for(const n of i){const r=n.filter(c=>c!==void 0),o=r[1],a=r[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=eW(_S(s,n),bS(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=eW(_S(s,n),bS(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*((?:360(?:\.0+)?|(?:36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])(?:\.\d+)?))\s*[\s,]\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*[\s,]\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=tW(_S(s,n),bS(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*((?:360(?:\.0+)?|(?:36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])(?:\.\d+)?))\s*[\s,]\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*[\s,]\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*[\s,]\s*(0[.][0-9]+|[.][0-9]+|[01][.]0*|[01])\s*\)$/gm;l=tW(_S(s,n),bS(a,c),!0)}else o==="#"&&(l=tae(_S(s,n),o+a));l&&e.push(l)}return e}function nae(s){return!s||typeof s.getValue!="function"||typeof s.positionAt!="function"?[]:iae(s)}const sae=/^-+|-+$/g,iW=100,rae=5;function oae(s,e){let t=[];if(e.findRegionSectionHeaders&&e.foldingRules?.markers){const i=aae(s,e);t=t.concat(i)}if(e.findMarkSectionHeaders){const i=lae(s,e);t=t.concat(i)}return t}function aae(s,e){const t=[],i=s.getLineCount();for(let n=1;n<=i;n++){const r=s.getLineContent(n),o=r.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:n,startColumn:o[0].length+1,endLineNumber:n,endColumn:r.length+1};if(a.endColumn>a.startColumn){const l={range:a,...cae(r.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function lae(s,e){const t=[],i=s.getLineCount();if(!e.markSectionHeaderRegex||e.markSectionHeaderRegex.trim()==="")return t;const n=eK(e.markSectionHeaderRegex),r=new RegExp(e.markSectionHeaderRegex,`gdm${n?"s":""}`);if(iG(r))return t;for(let o=1;o<=i;o+=iW-rae){const a=Math.min(o+iW-1,i),l=[];for(let d=o;d<=a;d++)l.push(s.getLineContent(d));const c=l.join(`
`);r.lastIndex=0;let h;for(;(h=r.exec(c))!==null;){const d=c.substring(0,h.index),g=(d.match(/\n/g)||[]).length,_=o+g,b=h[0].split(`
`),C=b.length,S=_+C-1,E=d.lastIndexOf(`
`)+1,x=h.index-E+1,T=b[b.length-1],N=C===1?x+h[0].length:T.length+1,A={startLineNumber:_,startColumn:x,endLineNumber:S,endColumn:N},P=(h.groups??{}).label??"",O=((h.groups??{}).separator??"")!=="",V={range:A,text:P,hasSeparatorLine:O,shouldBeInComments:!0};(V.text||V.hasSeparatorLine)&&(t.length===0||t[t.length-1].range.endLineNumber<V.range.startLineNumber)&&t.push(V),r.lastIndex=h.index+h[0].length}}return t}function cae(s){s=s.trim();const e=s.startsWith("-");return s=s.replace(sae,""),{text:s,hasSeparatorLine:e}}class uae{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=wv(e);const i=this.values,n=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(i.length+r),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=wv(e),t=wv(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=wv(e),t=wv(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;const r=i.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=wv(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,r=0,o=0;for(;t<=i;)if(n=t+(i-t)/2|0,r=this.prefixSum[n],o=r-this.values[n],e<o)i=n-1;else if(e>=r)t=n+1;else break;return new oK(n,e-o)}}class hae{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new oK(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=qA(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],n=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=n+i;for(let r=0;r<i;r++)this._indexBySum[n+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class oK{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class dae{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new se(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new uae(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=LC(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const n=new Uint32Array(i.length-1);for(let r=1;r<i.length;r++)this._lines.splice(e.lineNumber+r-1,0,i[r]),n[r-1]=i[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}const nW=60*1e3;class fae extends pe{constructor(e,t,i=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const n=new cP;n.cancelAndSet(()=>this._checkStopModelSync(),Math.round(nW/2)),this._register(n)}}dispose(){for(const e in this._syncedModels)Cs(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const i of e){const n=i.toString();this._syncedModels[n]||this._beginModelSync(i,t),this._syncedModels[n]&&(this._syncedModelsLastUsedTime[n]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>nW&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const n=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const r=new Ze;r.add(i.onDidChangeContent(o=>{this._proxy.$acceptModelChanged(n.toString(),o)})),r.add(i.onWillDispose(()=>{this._stopModelSync(n)})),r.add(lt(()=>{this._proxy.$acceptRemovedModel(n)})),this._syncedModels[n]=r}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Cs(t)}}class gae{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new mae(Ot.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class mae extends dae{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const n=this._lines[i],r=this.offsetAt(new se(i+1,1)),o=n.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+r),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=ux(e.column,Y6(t),this._lines[e.lineNumber-1],0);return i?new ie(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let n=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(n<t.length)r=t[n],a=i(r,e),o=0,n+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],n=this._wordenize(i,t),r=[];for(const o of n)r.push({word:i.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const i=[];let n;for(t.lastIndex=0;(n=t.exec(e))&&n[0].length!==0;)i.push({start:n.index,end:n.index+n[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,n=e.endLineNumber-1,r=[];r.push(this._lines[i].substring(e.startColumn-1));for(let o=i+1;o<n;o++)r.push(this._lines[o]);return r.push(this._lines[n].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!se.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,n=!1;if(t<1)t=1,i=1,n=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,n=!0;else{const r=this._lines[t-1].length+1;i<1?(i=1,n=!0):i>r&&(i=r,n=!0)}return n?{lineNumber:t,column:i}:e}}const b1=class b1{constructor(e=null){this._foreignModule=e,this._workerTextModelSyncServer=new gae}dispose(){}async $ping(){return"pong"}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const n=this._getModel(e);return n?Coe.computeUnicodeHighlights(n,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?oae(i,t):[]}async $computeDiff(e,t,i,n){const r=this._getModel(e),o=this._getModel(t);return!r||!o?null:b1.computeDiff(r,o,i,n)}static computeDiff(e,t,i,n){const r=n==="advanced"?JH.getDefault():JH.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=r.computeDiff(o,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function h(d){return d.map(g=>[g.original.startLineNumber,g.original.endLineNumberExclusive,g.modified.startLineNumber,g.modified.endLineNumberExclusive,g.innerChanges?.map(_=>[_.originalRange.startLineNumber,_.originalRange.startColumn,_.originalRange.endLineNumber,_.originalRange.endColumn,_.modifiedRange.startLineNumber,_.modifiedRange.startColumn,_.modifiedRange.endLineNumber,_.modifiedRange.endColumn])])}return{identical:c,quitEarly:l.hitTimeout,changes:h(l.changes),moves:l.moves.map(d=>[d.lineRangeMapping.original.startLineNumber,d.lineRangeMapping.original.endLineNumberExclusive,d.lineRangeMapping.modified.startLineNumber,d.lineRangeMapping.modified.endLineNumberExclusive,h(d.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),n=t.getLineCount();if(i!==n)return!1;for(let r=1;r<=i;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,i){const n=this._getModel(e);if(!n)return t;const r=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return ie.compareRangesUsingStarts(l.range,c.range);const h=l.range?0:1,d=c.range?0:1;return h-d});let a=0;for(let l=1;l<t.length;l++)ie.getEndPosition(t[a].range).equals(ie.getStartPosition(t[l].range))?(t[a].range=ie.fromPositions(ie.getStartPosition(t[a].range),ie.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:h}of t){if(typeof h=="number"&&(o=h),ie.isEmpty(l)&&!c)continue;const d=n.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,n.eol),d===c)continue;if(Math.max(c.length,d.length)>b1._diffLimit){r.push({range:l,text:c});continue}const g=aoe(d,c,i),_=n.offsetAt(ie.lift(l).getStartPosition());for(const b of g){const C=n.positionAt(_+b.originalStart),S=n.positionAt(_+b.originalStart+b.originalLength),E={text:c.substr(b.modifiedStart,b.modifiedLength),range:{startLineNumber:C.lineNumber,startColumn:C.column,endLineNumber:S.lineNumber,endColumn:S.column}};n.getValueInRange(E.range)!==E.text&&r.push(E)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}async $computeLinks(e){const t=this._getModel(e);return t?doe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?nae(t):null}async $textualSuggest(e,t,i,n){const r=new bg,o=new RegExp(i,n),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const h of c.words(o))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>b1._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}}async $computeWordRanges(e,t,i,n){const r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(i,n),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=r.getLineWords(l,o);for(const h of c){if(!isNaN(Number(h.word)))continue;let d=a[h.word];d||(d=[],a[h.word]=d),d.push({startLineNumber:l,startColumn:h.startColumn,endLineNumber:l,endColumn:h.endColumn})}}return a}async $navigateValueSet(e,t,i,n,r){const o=this._getModel(e);if(!o)return null;const a=new RegExp(n,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const h=o.getValueInRange(c);return U3.INSTANCE.navigateValueSet(t,l,c,h,i)}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}};b1._diffLimit=1e5,b1._suggestionsLimit=1e4;let K3=b1;typeof importScripts=="function"&&(globalThis.monaco=Jj());const OP=At("textResourceConfigurationService"),aK=At("textResourcePropertiesService"),Zi=At("ILanguageFeaturesService"),ZL=class ZL{static getChannel(e){return e.getChannel(ZL.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(ZL.CHANNEL_NAME,t)}};ZL.CHANNEL_NAME="editorWorkerHost";let Y3=ZL;var PP=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},J_=function(s,e){return function(t,i){e(t,i,s)}};const sW=300*1e3;function e1(s,e){const t=s.getModel(e);return!(!t||t.isTooLargeForSyncing())}let Z3=class extends pe{constructor(e,t,i,n,r,o){super(),this._languageConfigurationService=r,this._modelService=t,this._workerManager=this._register(new X3(e,this._modelService)),this._logService=n,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!e1(this._modelService,a.uri))return Promise.resolve({links:[]});const h=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return h&&{links:h}}})),this._register(o.completionProvider.register("*",new pae(this._workerManager,i,this._modelService,this._languageConfigurationService,this._logService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return e1(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,n){const o=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),i,n);if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:l(o.changes),moves:o.moves.map(c=>new tK(new eo(new dt(c[0],c[1]),new dt(c[2],c[3])),l(c[4])))};function l(c){return c.map(h=>new Il(new dt(h[0],h[1]),new dt(h[2],h[3]),h[4]?.map(d=>new Na(new ie(d[0],d[1],d[2],d[3]),new ie(d[4],d[5],d[6],d[7])))))}}async computeMoreMinimalEdits(e,t,i=!1){if(UA(t)){if(!e1(this._modelService,e))return Promise.resolve(t);const n=bg.create(),r=this._workerWithResources([e]).then(o=>o.$computeMoreMinimalEdits(e.toString(),t,i));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([r,tC(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return e1(this._modelService,e)}async navigateValueSet(e,t,i){const n=this._modelService.getModel(e);if(!n)return null;const r=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,o,a)}canComputeWordRanges(e){return e1(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const n=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=n.source,o=n.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,r,o)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};Z3=PP([J_(1,So),J_(2,OP),J_(3,Lo),J_(4,zd),J_(5,Zi)],Z3);class pae{constructor(e,t,i,n,r){this.languageConfigurationService=n,this.logService=r,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const n=[];if(i.wordBasedSuggestions==="currentDocument")e1(this._modelService,e.uri)&&n.push(e.uri);else for(const d of this._modelService.getModels())e1(this._modelService,d.uri)&&(d===e?n.unshift(d.uri):(i.wordBasedSuggestions==="allDocuments"||d.getLanguageId()===e.getLanguageId())&&n.push(d.uri));if(n.length===0)return;const r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new ie(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):ie.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column);this.logService.trace("[WordBasedCompletionItemProvider]",`word: "${o?.word||""}", wordDef: "${r}", replace: [${a.toString()}], insert: [${l.toString()}]`);const h=await(await this._workerManager.withWorker()).textualSuggest(n,o?.word,r);if(h)return{duration:h.duration,suggestions:h.words.map(d=>({kind:18,label:d,insertText:d,range:{insert:l,replace:a}}))}}}let X3=class extends pe{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new iR).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(sW/2),Ri),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>sW&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new xN(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};X3=PP([J_(1,So)],X3);class _ae{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let xN=class extends pe{constructor(e,t,i){super(),this._workerDescriptorOrWorker=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(kre(this._workerDescriptorOrWorker)),Y3.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){B3(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return B3(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new _ae(new K3(null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new fae(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(Oee());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const n=await this.workerWithSyncedResources(e),r=i.source,o=i.flags;return n.$textualSuggest(e.map(a=>a.toString()),t,r,o)}dispose(){super.dispose(),this._disposed=!0}};xN=PP([J_(2,So)],xN);function bae(s,e){return new vae(s,e)}class vae extends xN{constructor(e,t){super(t.worker,t.keepIdleModels||!1,e),this._foreignModuleHost=t.host||null,this._foreignProxy=this._getProxy().then(i=>new Proxy({},{get(n,r,o){if(r!=="then"){if(typeof r!="string")throw new Error("Not supported");return(...a)=>i.$fmr(r,a)}}}))}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}getProxy(){return this._foreignProxy}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const BP={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},Dx=new class{clone(){return this}equals(s){return this===s}};function lK(s,e){return new eP([new gx(0,"",s)],e)}function FP(s,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(s<<0|0|0|32768|2<<24)>>>0,new YA(t,e===null?Dx:e)}class Cl{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const n=this.getFontStyle(e);return n&1&&(i+=" mtki"),n&2&&(i+=" mtkb"),n&4&&(i+=" mtku"),n&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),n=this.getFontStyle(e);let r=`color: ${t[i]};`;n&1&&(r+="font-style: italic;"),n&2&&(r+="font-weight: bold;");let o="";return n&4&&(o+=" underline"),n&8&&(o+=" line-through"),o&&(r+=`text-decoration:${o};`),r}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}const qf=class qf{static createEmpty(e,t){const i=qf.defaultTokenMetadata,n=new Uint32Array(2);return n[0]=e.length,n[1]=i,new qf(n,e,t)}static createFromTextAndMetadata(e,t){let i=0,n="";const r=new Array;for(const{text:o,metadata:a}of e)r.push(i+o.length,a),i+=o.length,n+=o;return new qf(new Uint32Array(r),n,t)}static convertToEndOffset(e,t){const n=(e.length>>>1)-1;for(let r=0;r<n;r++)e[r<<1]=e[r+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,n=(e.length>>>1)-1;for(;i<n;){const r=i+Math.floor((n-i)/2),o=e[r<<1];if(o===t)return r+1;o<t?i=r+1:o>t&&(n=r)}return i}constructor(e,t,i){this._lineTokensBrand=void 0,(e.length>1?e[e.length-2]:0)!==t.length&&mi(new Error("Token length and text length do not match!")),this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}getTextLength(){return this._text.length}equals(e){return e instanceof qf?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const n=t<<1,r=n+(i<<1);for(let o=n;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=Cl.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Cl.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Cl.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Cl.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return Cl.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Cl.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return qf.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new VP(this,e,t,i)}sliceZeroCopy(e){return this.sliceAndInflate(e.start,e.endExclusive,0)}withInserted(e){if(e.length===0)return this;let t=0,i=0,n="";const r=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){n+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(n.length,c),t++,o=a}else if(l){if(l.offset>o){n+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(n.length,c),o=l.offset}n+=l.text,r.push(n.length,l.tokenMetadata),i++}else break}return new qf(new Uint32Array(r),n,this.languageIdCodec)}getTokensInRange(e){const t=new wae,i=this.findTokenIndexAtOffset(e.start),n=this.findTokenIndexAtOffset(e.endExclusive);for(let r=i;r<=n;r++){const a=new it(this.getStartOffset(r),this.getEndOffset(r)).intersectionLength(e);a>0&&t.add(a,this.getMetadata(r))}return t.build()}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}toString(){let e="";return this.forEach(t=>{e+=`[${this.getTokenText(t)}]{${this.getClassName(t)}}`}),e}};qf.defaultTokenMetadata=(32768|2<<24)>>>0;let Ts=qf;class VP{constructor(e,t,i,n){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=n,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=i);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof VP?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),n=this._source.getEndOffset(t);let r=this._source.getTokenText(t);return i<this._startOffset&&(r=r.substring(this._startOffset-i)),n>this._endOffset&&(r=r.substring(0,r.length-(n-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}class fL{static fromLineTokens(e){const t=[];for(let i=0;i<e.getCount();i++)t.push(new Q3(e.getEndOffset(i)-e.getStartOffset(i),e.getMetadata(i)));return fL.create(t)}static create(e){return new fL(e)}constructor(e){this._tokenInfo=e}toLineTokens(e,t){return Ts.createFromTextAndMetadata(this.map((i,n)=>({text:i.substring(e),metadata:n.metadata})),t)}forEach(e){let t=0;for(const i of this._tokenInfo){const n=new it(t,t+i.length);e(n,i),t+=i.length}}map(e){const t=[];let i=0;for(const n of this._tokenInfo){const r=new it(i,i+n.length);t.push(e(r,n)),i+=n.length}return t}slice(e){const t=[];let i=0;for(const n of this._tokenInfo){const r=i,o=r+n.length;if(o>e.start){if(r>=e.endExclusive)break;const a=Math.max(0,e.start-r),l=Math.max(0,o-e.endExclusive);t.push(new Q3(n.length-a-l,n.metadata))}i+=n.length}return fL.create(t)}}class Q3{constructor(e,t){this.length=e,this.metadata=t}}class wae{constructor(){this._tokens=[]}add(e,t){this._tokens.push(new Q3(e,t))}build(){return fL.create(this._tokens)}}class _c{constructor(e,t,i,n){this.startColumn=e,this.endColumn=t,this.className=i,this.type=n,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,n=t.length;if(i!==n)return!1;for(let r=0;r<i;r++)if(!_c._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const n=t+1,r=i+1,o=i-t,a=[];let l=0;for(const c of e)c.endColumn<=n||c.startColumn>=r||(a[l++]=new _c(Math.max(1,c.startColumn-n+1),Math.min(o+1,c.endColumn-n+1),c.className,c.type));return a}static filter(e,t,i,n){if(e.length===0)return[];const r=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(c.type===0||c.type===3))continue;const d=h.startLineNumber===t?h.startColumn:i,g=h.endLineNumber===t?h.endColumn:n;r[o++]=new _c(d,g,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=_c._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class rW{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=n}}let Cae=class J3{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,n=e.length;i<n;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let n=0;for(;n+1<this.count&&this.stopOffsets[n]===this.stopOffsets[n+1];)n++;i.push(new rW(t,this.stopOffsets[n],this.classNames.join(" "),J3._metadata(this.metadata))),t=this.stopOffsets[n]+1,this.stopOffsets.splice(0,n+1),this.classNames.splice(0,n+1),this.metadata.splice(0,n+1),this.count-=n+1}return this.count>0&&t<e&&(i.push(new rW(t,e-1,this.classNames.join(" "),J3._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=e){this.stopOffsets.splice(n,0,e),this.classNames.splice(n,0,t),this.metadata.splice(n,0,i);break}this.count++}};class yae{static normalize(e,t){if(t.length===0)return[];const i=[],n=new Cae;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,h=l.endColumn;const d=l.className,g=l.type===1?2:l.type===2?4:0;if(c>1){const C=e.charCodeAt(c-2);xs(C)&&c--}if(h>1){const C=e.charCodeAt(h-2);xs(C)&&h--}const _=c-1,b=h-2;r=n.consumeLowerThan(_,r,i),n.count===0&&(r=_),n.insert(b,d,g)}return n.consumeLowerThan(1073741824,r,i),i}}class Ws{constructor(e,t,i,n){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=n,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class B0{get isLTR(){return!this.containsRTL&&this.textDirection!==El.RTL}constructor(e,t,i,n,r,o,a,l,c,h,d,g,_,b,C,S,E,x,T,N,A,P=!1){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=n,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(_c.compare),this.tabSize=h,this.startVisibleColumn=d,this.spaceWidth=g,this.stopRenderingLineAfter=C,this.renderWhitespace=S==="all"?4:S==="boundary"?1:S==="selection"?2:S==="trailing"?3:0,this.renderControlCharacters=E,this.fontLigatures=x,this.selectionsOnLine=T&&T.sort((U,Y)=>U.start<Y.start?-1:1),this.renderNewLineWhenEmpty=P,this.textDirection=N,this.verticalScrollbarSize=A;const O=Math.abs(b-g),V=Math.abs(_-g);O<V?(this.renderSpaceWidth=b,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=_,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&_c.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)&&this.textDirection===e.textDirection&&this.verticalScrollbarSize===e.verticalScrollbarSize&&this.renderNewLineWhenEmpty===e.renderNewLineWhenEmpty}}class cK{constructor(e,t){this.partIndex=e,this.charIndex=t}}class gd{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,n){const r=(t<<16|i<<0)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=n}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=gd.getPartIndex(t),n=gd.getCharIndex(t);return new cK(i,n)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const n=(e<<16|i<<0)>>>0;let r=0,o=this.length-1;for(;r+1<o;){const C=r+o>>>1,S=this._data[C];if(S===n)return C;S>n?o=C:r=C}if(r===o)return r;const a=this._data[r],l=this._data[o];if(a===n)return r;if(l===n)return o;const c=gd.getPartIndex(a),h=gd.getCharIndex(a),d=gd.getPartIndex(l);let g;c!==d?g=t:g=gd.getCharIndex(l);const _=i-h,b=g-i;return _<=b?r:o}}class e7{constructor(e,t){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsForeignElements=t}}function wR(s,e){if(s.lineContent.length===0){if(s.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,n=0;for(const o of s.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(n|=1,t++),o.type===2&&(n|=2,i++));e.appendString("</span>");const r=new gd(1,t+i);return r.setColumnInfo(1,t,0,0),new e7(r,n)}return s.renderNewLineWhenEmpty?e.appendString(`<span><span>
</span></span>`):e.appendString("<span><span></span></span>"),new e7(new gd(0,0),0)}return Iae(xae(s),e)}class Sae{constructor(e,t,i){this.characterMapping=e,this.html=t,this.containsForeignElements=i}}function CR(s){const e=new TC(1e4),t=wR(s,e);return new Sae(t.characterMapping,e.build(),t.containsForeignElements)}class Lae{constructor(e,t,i,n,r,o,a,l,c,h,d,g,_,b,C){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=n,this.isOverflowing=r,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=h,this.startVisibleColumn=d,this.spaceWidth=g,this.renderSpaceCharCode=_,this.renderWhitespace=b,this.renderControlCharacters=C}}function xae(s){const e=s.lineContent;let t,i,n;s.stopRenderingLineAfter!==-1&&s.stopRenderingLineAfter<e.length?(t=!0,i=e.length-s.stopRenderingLineAfter,n=s.stopRenderingLineAfter):(t=!1,i=0,n=e.length);let r=kae(e,s.containsRTL,s.lineTokens,s.fauxIndentLength,n);s.renderControlCharacters&&!s.isBasicASCII&&(r=Tae(e,r)),(s.renderWhitespace===4||s.renderWhitespace===1||s.renderWhitespace===2&&s.selectionsOnLine||s.renderWhitespace===3&&!s.continuesWithWrappedLine)&&(r=Dae(s,e,n,r));let o=0;if(s.lineDecorations.length>0){for(let a=0,l=s.lineDecorations.length;a<l;a++){const c=s.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}r=Nae(e,n,r,s.lineDecorations)}return s.containsRTL||(r=Eae(e,r,!s.isBasicASCII||s.fontLigatures)),new Lae(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,e,n,t,i,r,o,s.fauxIndentLength,s.tabSize,s.startVisibleColumn,s.spaceWidth,s.renderSpaceCharCode,s.renderWhitespace,s.renderControlCharacters)}function kae(s,e,t,i,n){const r=[];let o=0;i>0&&(r[o++]=new Ws(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const h=t.getEndOffset(l);if(h<=i)continue;const d=t.getClassName(l);if(h>=n){const _=e?mx(s.substring(a,n)):!1;r[o++]=new Ws(n,d,0,_);break}const g=e?mx(s.substring(a,h)):!1;r[o++]=new Ws(h,d,0,g),a=h}return r}function Eae(s,e,t){let i=0;const n=[];let r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(i+50<c){const h=l.type,d=l.metadata,g=l.containsRTL;let _=-1,b=i;for(let C=i;C<c;C++)s.charCodeAt(C)===32&&(_=C),_!==-1&&C-b>=50&&(n[r++]=new Ws(_+1,h,d,g),b=_+1,_=-1);b!==c&&(n[r++]=new Ws(c,h,d,g))}else n[r++]=l;i=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,h=c-i;if(h>50){const d=l.type,g=l.metadata,_=l.containsRTL,b=Math.ceil(h/50);for(let C=1;C<b;C++){const S=i+C*50;n[r++]=new Ws(S,d,g,_)}n[r++]=new Ws(c,d,g,_)}else n[r++]=l;i=c}return n}function uK(s){return s<32?s!==9:s===127||s>=8234&&s<=8238||s>=8294&&s<=8297||s>=8206&&s<=8207||s===1564}function Tae(s,e){const t=[];let i=new Ws(0,"",0,!1),n=0;for(const r of e){const o=r.endIndex;for(;n<o;n++){const a=s.charCodeAt(n);uK(a)&&(n>i.endIndex&&(i=new Ws(n,r.type,r.metadata,r.containsRTL),t.push(i)),i=new Ws(n+1,"mtkcontrol",r.metadata,!1),t.push(i))}n>i.endIndex&&(i=new Ws(o,r.type,r.metadata,r.containsRTL),t.push(i))}return t}function Dae(s,e,t,i){const n=s.continuesWithWrappedLine,r=s.fauxIndentLength,o=s.tabSize,a=s.startVisibleColumn,l=s.useMonospaceOptimizations,c=s.selectionsOnLine,h=s.renderWhitespace===1,d=s.renderWhitespace===3,g=s.renderSpaceWidth!==s.spaceWidth,_=[];let b=0,C=0,S=i[C].type,E=i[C].containsRTL,x=i[C].endIndex;const T=i.length;let N=!1,A=Pa(e),P;A===-1?(N=!0,A=t,P=t):P=I0(e);let O=!1,V=0,U=c&&c[V],Y=a%o;for(let F=r;F<t;F++){const W=e.charCodeAt(F);U&&U.endExclusive<=F&&(V++,U=c&&c[V]);let ee;if(F<A||F>P)ee=!0;else if(W===9)ee=!0;else if(W===32)if(h)if(O)ee=!0;else{const X=F+1<t?e.charCodeAt(F+1):0;ee=X===32||X===9}else ee=!0;else ee=!1;if(ee&&c&&(ee=!!U&&U.start<=F&&F<U.endExclusive),ee&&d&&(ee=N||F>P),ee&&E&&F>=A&&F<=P&&(ee=!1),O){if(!ee||!l&&Y>=o){if(g){const X=b>0?_[b-1].endIndex:r;for(let $=X+1;$<=F;$++)_[b++]=new Ws($,"mtkw",1,!1)}else _[b++]=new Ws(F,"mtkw",1,!1);Y=Y%o}}else(F===x||ee&&F>r)&&(_[b++]=new Ws(F,S,0,E),Y=Y%o);for(W===9?Y=o:op(W)?Y+=2:Y++,O=ee;F===x&&(C++,C<T);)S=i[C].type,E=i[C].containsRTL,x=i[C].endIndex}let B=!1;if(O)if(n&&h){const F=t>0?e.charCodeAt(t-1):0,W=t>1?e.charCodeAt(t-2):0;F===32&&W!==32&&W!==9||(B=!0)}else B=!0;if(B)if(g){const F=b>0?_[b-1].endIndex:r;for(let W=F+1;W<=t;W++)_[b++]=new Ws(W,"mtkw",1,!1)}else _[b++]=new Ws(t,"mtkw",1,!1);else _[b++]=new Ws(t,S,0,E);return _}function Nae(s,e,t,i){i.sort(_c.compare);const n=yae.normalize(s,i),r=n.length;let o=0;const a=[];let l=0,c=0;for(let d=0,g=t.length;d<g;d++){const _=t[d],b=_.endIndex,C=_.type,S=_.metadata,E=_.containsRTL;for(;o<r&&n[o].startOffset<b;){const x=n[o];if(x.startOffset>c&&(c=x.startOffset,a[l++]=new Ws(c,C,S,E)),x.endOffset+1<=b)c=x.endOffset+1,a[l++]=new Ws(c,C+" "+x.className,S|x.metadata,E),o++;else{c=b,a[l++]=new Ws(c,C+" "+x.className,S|x.metadata,E);break}}b>c&&(c=b,a[l++]=new Ws(c,C,S,E))}const h=t[t.length-1].endIndex;if(o<r&&n[o].startOffset===h)for(;o<r&&n[o].startOffset===h;){const d=n[o];a[l++]=new Ws(c,d.className,d.metadata,!1),o++}return a}function Iae(s,e){const t=s.fontIsMonospace,i=s.canUseHalfwidthRightwardsArrow,n=s.containsForeignElements,r=s.lineContent,o=s.len,a=s.isOverflowing,l=s.overflowingCharCount,c=s.parts,h=s.fauxIndentLength,d=s.tabSize,g=s.startVisibleColumn,_=s.spaceWidth,b=s.renderSpaceCharCode,C=s.renderWhitespace,S=s.renderControlCharacters,E=new gd(o+1,c.length);let x=!1,T=0,N=g,A=0,P=0,O=0;e.appendString("<span>");for(let V=0,U=c.length;V<U;V++){const Y=c[V],B=Y.endIndex,F=Y.type,W=Y.containsRTL,ee=C!==0&&Y.isWhitespace(),X=ee&&!t&&(F==="mtkw"||!n),$=T===B&&Y.isPseudoAfter();if(A=0,e.appendString("<span "),W&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(X?"mtkz":F),e.appendASCIICharCode(34),ee){let te=0;{let ce=T,he=N;for(;ce<B;ce++){const ae=(r.charCodeAt(ce)===9?d-he%d:1)|0;te+=ae,ce>=h&&(he+=ae)}}for(X&&(e.appendString(' style="width:'),e.appendString(String(_*te)),e.appendString('px"')),e.appendASCIICharCode(62);T<B;T++){E.setColumnInfo(T+1,V-O,A,P),O=0;const ce=r.charCodeAt(T);let he,j;if(ce===9){he=d-N%d|0,j=he,!i||j>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let ae=2;ae<=j;ae++)e.appendCharCode(160)}else he=2,j=1,e.appendCharCode(b),e.appendCharCode(8204);A+=he,P+=j,T>=h&&(N+=j)}}else for(e.appendASCIICharCode(62);T<B;T++){E.setColumnInfo(T+1,V-O,A,P),O=0;const te=r.charCodeAt(T);let ce=1,he=1;switch(te){case 9:ce=d-N%d,he=ce;for(let j=1;j<=ce;j++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:S?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:op(te)&&he++,S&&te<32?e.appendCharCode(9216+te):S&&te===127?e.appendCharCode(9249):S&&uK(te)?(e.appendString("[U+"),e.appendString(Aae(te)),e.appendString("]"),ce=8,he=ce):e.appendCharCode(te)}A+=ce,P+=he,T>=h&&(N+=he)}$?O++:O=0,T>=o&&!x&&Y.isPseudoAfter()&&(x=!0,E.setColumnInfo(T+1,V,A,P)),e.appendString("</span>")}return x||E.setColumnInfo(o+1,c.length-1,A,P),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(y(792,"Show more ({0})",Rae(l))),e.appendString("</span>")),e.appendString("</span>"),new e7(E,n)}function Aae(s){return s.toString(16).toUpperCase().padStart(4,"0")}function Rae(s){return s<1024?y(793,"{0} chars",s):s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/1024/1024).toFixed(1)} MB`}class oW{constructor(e,t,i,n){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=n|0}}class Mae{constructor(e,t){this.tabSize=e,this.data=t}}class HP{constructor(e,t,i,n,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=n,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class Rl{constructor(e,t,i,n,r,o,a,l,c,h,d,g){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=n,this.isBasicASCII=Rl.isBasicASCII(i,o),this.containsRTL=Rl.containsRTL(i,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=h,this.textDirection=d,this.hasVariableFonts=g}static isBasicASCII(e,t){return t?oP(e):!0}static containsRTL(e,t,i){return!t&&i?mx(e):!1}}class Nx{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&vs(e.data,t.data)}static equalsArr(e,t){return vs(e,t,Nx.equals)}}function Oae(s){return Array.isArray(s)}function Pae(s){return!Oae(s)}function hK(s){return typeof s=="string"}function aW(s){return!hK(s)}function t1(s){return!s}function gg(s,e){return s.ignoreCase&&e?e.toLowerCase():e}function lW(s){return s.replace(/[&<>'"_]/g,"-")}function Bae(s,e){console.log(`${s.languageId}: ${e}`)}function Ji(s,e){return new Error(`${s.languageId}: ${e}`)}function Am(s,e,t,i,n){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,h,d,g,_,b,C){return t1(c)?t1(h)?!t1(d)&&d<i.length?gg(s,i[d]):!t1(_)&&s&&typeof s[_]=="string"?s[_]:(o===null&&(o=n.split("."),o.unshift(n)),!t1(g)&&g<o.length?gg(s,o[g]):""):gg(s,t):"$"})}function Fae(s,e,t){const i=/\$[sS](\d\d?)/g;let n=null;return e.replace(i,function(r,o){return n===null&&(n=t.split("."),n.unshift(t)),!t1(o)&&o<n.length?Ad(gg(s,n[o])):""})}function yT(s,e){let t=e;for(;t&&t.length>0;){const i=s.tokenizer[t];if(i)return i;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return null}function Vae(s,e){let t=e;for(;t&&t.length>0;){if(s.stateNames[t])return!0;const n=t.lastIndexOf(".");n<0?t=null:t=t.substr(0,n)}return!1}var Hae=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Wae=function(s,e){return function(t,i){e(t,i,s)}},t7;const dK=5,uA=class uA{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Dw(e,t);let i=Dw.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let n=this._entries[i];return n||(n=new Dw(e,t),this._entries[i]=n,n)}};uA._INSTANCE=new uA(dK);let Ix=uA;class Dw{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Dw._equals(this,e)}push(e){return Ix.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Ix.create(this.parent,e)}}class Yv{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Yv(this.languageId,this.state)}}const hA=class hA{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new gL(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new gL(e,t);const i=Dw.getStackElementId(e);let n=this._entries[i];return n||(n=new gL(e,null),this._entries[i]=n,n)}};hA._INSTANCE=new hA(dK);let Rm=hA;class gL{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Rm.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof gL)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class zae{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new gx(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,n){const r=i.languageId,o=i.state,a=es.get(r);if(!a)return this.enterLanguage(r),this.emit(n,""),o;const l=a.tokenize(e,t,o);if(n!==0)for(const c of l.tokens)this._tokens.push(new gx(c.offset+n,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new eP(this._tokens,e)}}class kN{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const n=e!==null?e.length:0,r=t.length,o=i!==null?i.length:0;if(n===0&&r===0&&o===0)return new Uint32Array(0);if(n===0&&r===0)return i;if(r===0&&o===0)return e;const a=new Uint32Array(n+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[n+l]=t[l];return i!==null&&a.set(i,n+r),a}nestedLanguageTokenize(e,t,i,n){const r=i.languageId,o=i.state,a=es.get(r);if(!a)return this.enterLanguage(r),this.emit(n,""),o;const l=a.tokenizeEncoded(e,t,o);if(n!==0)for(let c=0,h=l.tokens.length;c<h;c+=2)l.tokens[c]+=n;return this._prependTokens=kN._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new YA(kN._merge(this._prependTokens,this._tokens,null),e)}}let Ax=t7=class extends pe{constructor(e,t,i,n,r){super(),this._configurationService=r,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=n,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(es.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,h=a.changedLanguages.length;c<h;c++){const d=a.changedLanguages[c];if(this._embeddedLanguages[d]){l=!0;break}}l&&(o=!0,es.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=es.get(t);if(i){if(i instanceof t7){const n=i.getLoadStatus();n.loaded===!1&&e.push(n.promise)}continue}es.isResolved(t)||e.push(es.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=Ix.create(null,this._lexer.start);return Rm.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return lK(this._languageId,i);const n=new zae,r=this._tokenize(e,t,i,n);return n.finalize(r)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return FP(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const n=new kN(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),r=this._tokenize(e,t,i,n);return n.finalize(r)}_tokenize(e,t,i,n){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,n):this._myTokenize(e,t,i,0,n)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=yT(this._lexer,t.stack.state),!i))throw Ji(this._lexer,"tokenizer state is not defined: "+t.stack.state);let n=-1,r=!1;for(const o of i){if(!aW(o.action)||!(o.action.nextEmbedded==="@pop"||o.action.hasEmbeddedEndInCases))continue;r=!0;let a=o.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),h)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(n===-1||c<n)&&(n=c)}if(!r)throw Ji(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return n}_nestedTokenize(e,t,i,n,r){const o=this._findLeavingNestedLanguageOffset(e,i);if(o===-1){const c=r.nestedLanguageTokenize(e,t,i.embeddedLanguageData,n);return Rm.create(i.stack,new Yv(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&r.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,n);const l=e.substring(o);return this._myTokenize(l,t,i,n+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,n,r){r.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,h=i.stack,d=0,g=null,_=!0;for(;_||d<l;){const b=d,C=h.depth,S=g?g.groups.length:0,E=h.state;let x=null,T=null,N=null,A=null,P=null;if(g){x=g.matches;const U=g.groups.shift();T=U.matched,N=U.action,A=g.rule,g.groups.length===0&&(g=null)}else{if(!_&&d>=l)break;_=!1;let U=this._lexer.tokenizer[E];if(!U&&(U=yT(this._lexer,E),!U))throw Ji(this._lexer,"tokenizer state is not defined: "+E);const Y=a.substr(d);for(const B of U)if((d===0||!B.matchOnlyAtLineStart)&&(x=Y.match(B.resolveRegex(E)),x)){T=x[0],N=B.action;break}}if(x||(x=[""],T=""),N||(d<l&&(x=[a.charAt(d)],T=x[0]),N=this._lexer.defaultToken),T===null)break;for(d+=T.length;Pae(N)&&aW(N)&&N.test;)N=N.test(T,x,E,d===l);let O=null;if(typeof N=="string"||Array.isArray(N))O=N;else if(N.group)O=N.group;else if(N.token!==null&&N.token!==void 0){if(N.tokenSubst?O=Am(this._lexer,N.token,T,x,E):O=N.token,N.nextEmbedded)if(N.nextEmbedded==="@pop"){if(!c)throw Ji(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Ji(this._lexer,"cannot enter embedded language from within an embedded language");P=Am(this._lexer,N.nextEmbedded,T,x,E)}if(N.goBack&&(d=Math.max(0,d-N.goBack)),N.switchTo&&typeof N.switchTo=="string"){let U=Am(this._lexer,N.switchTo,T,x,E);if(U[0]==="@"&&(U=U.substr(1)),yT(this._lexer,U))h=h.switchTo(U);else throw Ji(this._lexer,"trying to switch to a state '"+U+"' that is undefined in rule: "+this._safeRuleName(A))}else{if(N.transform&&typeof N.transform=="function")throw Ji(this._lexer,"action.transform not supported");if(N.next)if(N.next==="@push"){if(h.depth>=this._lexer.maxStack)throw Ji(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(E)}else if(N.next==="@pop"){if(h.depth<=1)throw Ji(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(A));h=h.pop()}else if(N.next==="@popall")h=h.popall();else{let U=Am(this._lexer,N.next,T,x,E);if(U[0]==="@"&&(U=U.substr(1)),yT(this._lexer,U))h=h.push(U);else throw Ji(this._lexer,"trying to set a next state '"+U+"' that is undefined in rule: "+this._safeRuleName(A))}}N.log&&typeof N.log=="string"&&Bae(this._lexer,this._lexer.languageId+": "+Am(this._lexer,N.log,T,x,E))}if(O===null)throw Ji(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(A));const V=U=>{const Y=this._languageService.getLanguageIdByLanguageName(U)||this._languageService.getLanguageIdByMimeType(U)||U,B=this._getNestedEmbeddedLanguageData(Y);if(d<l){const F=e.substr(d);return this._nestedTokenize(F,t,Rm.create(h,B),n+d,r)}else return Rm.create(h,B)};if(Array.isArray(O)){if(g&&g.groups.length>0)throw Ji(this._lexer,"groups cannot be nested: "+this._safeRuleName(A));if(x.length!==O.length+1)throw Ji(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(A));let U=0;for(let Y=1;Y<x.length;Y++)U+=x[Y].length;if(U!==T.length)throw Ji(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(A));g={rule:A,matches:x,groups:[]};for(let Y=0;Y<O.length;Y++)g.groups[Y]={action:O[Y],matched:x[Y+1]};d-=T.length;continue}else{if(O==="@rematch"&&(d-=T.length,T="",x=null,O="",P!==null))return V(P);if(T.length===0){if(l===0||C!==h.depth||E!==h.state||(g?g.groups.length:0)!==S)continue;throw Ji(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(A))}let U=null;if(hK(O)&&O.indexOf("@brackets")===0){const Y=O.substr(9),B=Uae(this._lexer,T);if(!B)throw Ji(this._lexer,"@brackets token returned but no bracket defined as: "+T);U=lW(B.token+Y)}else{const Y=O===""?"":O+this._lexer.tokenPostfix;U=lW(Y)}b<o&&r.emit(b+n,U)}if(P!==null)return V(P)}return Rm.create(h,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new Yv(e,Dx);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),es.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=es.get(e);return t?new Yv(e,t.getInitialState()):new Yv(e,Dx)}};Ax=t7=Hae([Wae(4,cn)],Ax);function Uae(s,e){if(!e)return null;e=gg(s,e);const t=s.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const qae=bp("standaloneColorizer",{createHTML:s=>s});class WP{static colorizeElement(e,t,i,n){n=n||{};const r=n.theme||"vs",o=n.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(r);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+r;const c=h=>{const d=qae?.createHTML(h)??h;i.innerHTML=d};return this.colorize(t,l||"",a,n).then(c,h=>console.error(h))}static async colorize(e,t,i,n){const r=e.languageIdCodec;let o=4;n&&typeof n.tabSize=="number"&&(o=n.tabSize),lP(t)&&(t=t.substr(1));const a=LC(t);if(!e.isRegisteredLanguageId(i))return cW(a,o,r);const l=await es.getOrCreate(i);return l?$ae(a,o,l,r):cW(a,o,r)}static colorizeLine(e,t,i,n,r=4){const o=Rl.isBasicASCII(e,t),a=Rl.containsRTL(e,o,i);return CR(new B0(!1,!0,e,!1,o,a,0,n,[],r,0,0,0,0,-1,"none",!1,!1,null,null,0)).html}static colorizeModelLine(e,t,i=4){const n=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(n,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,i)}}function $ae(s,e,t,i){return new Promise((n,r)=>{const o=()=>{const a=jae(s,e,t,i);if(t instanceof Ax){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}n(a)};o()})}function cW(s,e,t){let i=[];const r=new Uint32Array(2);r[0]=0,r[1]=33587200;for(let o=0,a=s.length;o<a;o++){const l=s[o];r[0]=l.length;const c=new Ts(r,l,t),h=Rl.isBasicASCII(l,!0),d=Rl.containsRTL(l,h,!0),g=CR(new B0(!1,!0,l,!1,h,d,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null,null,0));i=i.concat(g.html),i.push("<br/>")}return i.join("")}function jae(s,e,t,i){let n=[],r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o],c=t.tokenizeEncoded(l,!0,r);Ts.convertToEndOffset(c.tokens,l.length);const h=new Ts(c.tokens,l,i),d=Rl.isBasicASCII(l,!0),g=Rl.containsRTL(l,d,!0),_=CR(new B0(!1,!0,l,!1,d,g,0,h.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null,null,0));n=n.concat(_.html),n.push("<br/>"),r=c.endState}return n.join("")}const uW=2e4;let i1,ED,i7,TD,n7;function Gae(s){i1=document.createElement("div"),i1.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),i1.appendChild(i),i};ED=e(),i7=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),i1.appendChild(i),i};TD=t(),n7=t(),s.appendChild(i1)}function Rx(s){i1&&(ED.textContent!==s?(oh(i7),TN(ED,s)):(oh(ED),TN(i7,s)))}function EN(s){i1&&(TD.textContent!==s?(oh(n7),TN(TD,s)):(oh(TD),TN(n7,s)))}function TN(s,e){oh(s),e.length>uW&&(e=e.substr(0,uW)),s.textContent=e,s.style.visibility="hidden",s.style.visibility="visible"}const fK=At("markerDecorationsService");var Kae=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Yae=function(s,e){return function(t,i){e(t,i,s)}},Yw;let DN=(Yw=class{constructor(e,t){}dispose(){}},Yw.ID="editor.contrib.markerDecorations",Yw);DN=Kae([Yae(1,fK)],DN);FG(DN.ID,DN,0);class gK extends pe{constructor(e,t){super(),this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,n=!1;const r=()=>{if(i&&!n)try{i=!1,n=!0,t()}finally{na(nt(this._referenceDomElement),()=>{n=!1,r()})}};this._resizeObserver=new ResizeObserver(o=>{o&&o[0]&&o[0].contentRect?e={width:o[0].contentRect.width,height:o[0].contentRect.height}:e=null,i=!0,r()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,n=0;t?(i=t.width,n=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,n=this._referenceDomElement.clientHeight),i=Math.max(5,i),n=Math.max(5,n),(this._width!==i||this._height!==n)&&(this._width=i,this._height=n,e&&this._onDidChange.fire())}}const gw=class gw{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=gw._read(e,this.key),i=r=>gw._read(e,r),n=(r,o)=>gw._write(e,r,o);this.migrate(t,i,n)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const n=t.substring(0,i);return this._read(e[n],t.substring(i+1))}return e[t]}static _write(e,t,i){const n=t.indexOf(".");if(n>=0){const r=t.substring(0,n);e[r]=e[r]||{},this._write(e[r],t.substring(n+1),i);return}e[t]=i}};gw.items=[];let Mx=gw;function Lc(s,e){Mx.items.push(new Mx(s,e))}function xo(s,e){Lc(s,(t,i,n)=>{if(typeof t<"u"){for(const[r,o]of e)if(t===r){n(s,o);return}}})}function Zae(s){Mx.items.forEach(e=>e.apply(s))}xo("wordWrap",[[!0,"on"],[!1,"off"]]);xo("lineNumbers",[[!0,"on"],[!1,"off"]]);xo("cursorBlinking",[["visible","solid"]]);xo("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);xo("renderLineHighlight",[[!0,"line"],[!1,"none"]]);xo("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);xo("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);xo("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);xo("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);xo("autoIndent",[[!1,"advanced"],[!0,"full"]]);xo("matchBrackets",[[!0,"always"],[!1,"never"]]);xo("renderFinalNewline",[[!0,"on"],[!1,"off"]]);xo("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);xo("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);xo("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);xo("defaultColorDecorators",[[!0,"auto"],[!1,"never"]]);xo("minimap.autohide",[[!0,"mouseover"],[!1,"none"]]);Lc("autoClosingBrackets",(s,e,t)=>{s===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Lc("renderIndentGuides",(s,e,t)=>{typeof s<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!s))});Lc("highlightActiveIndentGuide",(s,e,t)=>{typeof s<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!s))});const Xae={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Lc("suggest.filteredTypes",(s,e,t)=>{if(s&&typeof s=="object"){for(const i of Object.entries(Xae))s[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});Lc("quickSuggestions",(s,e,t)=>{if(typeof s=="boolean"){const i=s?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});Lc("experimental.stickyScroll.enabled",(s,e,t)=>{typeof s=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",s))});Lc("experimental.stickyScroll.maxLineCount",(s,e,t)=>{typeof s=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",s))});Lc("editor.experimentalEditContextEnabled",(s,e,t)=>{typeof s=="boolean"&&(t("editor.experimentalEditContextEnabled",void 0),typeof e("editor.editContext")>"u"&&t("editor.editContext",s))});Lc("codeActionsOnSave",(s,e,t)=>{if(s&&typeof s=="object"){let i=!1;const n={};for(const r of Object.entries(s))typeof r[1]=="boolean"?(i=!0,n[r[0]]=r[1]?"explicit":"never"):n[r[0]]=r[1];i&&t("codeActionsOnSave",n)}});Lc("codeActionWidget.includeNearbyQuickfixes",(s,e,t)=>{typeof s=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",s))});Lc("lightbulb.enabled",(s,e,t)=>{typeof s=="boolean"&&t("lightbulb.enabled",s?void 0:"off")});Lc("inlineSuggest.edits.codeShifting",(s,e,t)=>{typeof s=="boolean"&&(t("inlineSuggest.edits.codeShifting",void 0),t("inlineSuggest.edits.allowCodeShifting",s?"always":"never"))});class Qae{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new ne,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const NN=new Qae,Ol=At("accessibilityService"),Jae=new et("accessibilityModeEnabled",!1);class ele{constructor(){this._inputMode="insert",this._onDidChangeInputMode=new ne,this.onDidChangeInputMode=this._onDidChangeInputMode.event}getInputMode(){return this._inputMode}}const s7=new ele;var tle=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ile=function(s,e){return function(t,i){e(t,i,s)}};let r7=class extends pe{constructor(e,t,i,n,r){super(),this._accessibilityService=r,this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new ne),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Vj,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new gK(n,i.dimension)),this._targetWindowId=nt(n).vscodeWindowId,this._rawOptions=hW(i),this._validatedOptions=Mm.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(19)&&this._containerObserver.startObserving(),this._register(Im.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(NN.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(A3.onDidChange(()=>this._recomputeOptions())),this._register(fN.getInstance(nt(n)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._register(s7.onDidChangeInputMode(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Mm.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=P1.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:this._validatedOptions.get(164)||NN.getTabFocusMode(),inputMode:s7.getInputMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount,editContextSupported:e.editContextSupported};return Mm.computeOptions(this._validatedOptions,n)}_readEnvConfiguration(){return{extraEditorClassName:sle(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:XA||Va,pixelRatio:fN.getInstance(QV(this._targetWindowId,!0).window).value,editContextSupported:typeof globalThis.EditContext=="function",accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return A3.readFontInfo(QV(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=hW(e);Mm.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Mm.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=nle(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};r7=tle([ile(4,Ol)],r7);function nle(s){let e=0;for(;s;)s=Math.floor(s/10),e++;return e||1}function sle(){let s="";return u0||lG?(s+="no-minimap-shadow ",s+="enable-user-select "):s+="no-user-select ",Bt&&(s+="mac "),s}class rle{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class ole{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Mm{static validateOptions(e){const t=new rle;for(const i of Wv){const n=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(n))}return t}static computeOptions(e,t){const i=new ole;for(const n of Wv)i._write(n.id,n.compute(t,i,e._read(n.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?vs(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Mm._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let n=!1;for(const r of Wv){const o=!Mm._deepEquals(e._read(r.id),t._read(r.id));i[r.id]=o,o&&(n=!0)}return n?new Fj(i):null}static applyUpdate(e,t){let i=!1;for(const n of Wv)if(t.hasOwnProperty(n.name)){const r=n.applyUpdate(e[n.name],t[n.name]);e[n.name]=r.newValue,i=i||r.didChange}return i}}function hW(s){const e=Gf(s);return Zae(e),e}var Vm;(function(s){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},n={...e};let r=0;const o={keydown:0,input:0,render:0};function a(){E(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}s.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,S()}s.onBeforeInput=c;function h(){o.input===0&&c(),queueMicrotask(d)}s.onInput=h;function d(){o.input===1&&(performance.mark("input/end"),o.input=2)}function g(){E()}s.onKeyUp=g;function _(){E()}s.onSelectionChange=_;function b(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(C),S())}s.onRenderStart=b;function C(){o.render===1&&(performance.mark("render/end"),o.render=2)}function S(){setTimeout(E)}function E(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),x("keydown",e),x("input",t),x("render",i),x("inputlatency",n),r++,T())}function x(O,V){const U=performance.getEntriesByName(O)[0].duration;V.total+=U,V.min=Math.min(V.min,U),V.max=Math.max(V.max,U)}function T(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function N(){if(r===0)return;const O={keydown:A(e),input:A(t),render:A(i),total:A(n),sampleCount:r};return P(e),P(t),P(i),P(n),r=0,O}s.getAndClearMeasurements=N;function A(O){return{average:O.total/r,max:O.max,min:O.min}}function P(O){O.total=0,O.min=Number.MAX_VALUE,O.max=0}})(Vm||(Vm={}));const mK=new Map;function ah(s=Ri.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e?.(i),s.appendChild(i),s===Ri.document.head){const n=new Set;mK.set(i,n);for(const{window:r,disposables:o}of vG())r!==Ri&&o.add(ale(i,n,r))}return i}function ale(s,e,t){const i=new Ze,n=s.cloneNode(!0);t.document.head.appendChild(n),i.add(lt(()=>n.remove()));for(const r of cle(s))n.sheet?.insertRule(r.cssText,n.sheet?.cssRules.length);return i.add(rse.observe(s,i,{childList:!0,subtree:Va,characterData:Va})(()=>{n.textContent=s.textContent})),e.add(n),i.add(lt(()=>e.delete(n))),i}let BM=null;function lle(){return BM||(BM=ah()),BM}function cle(s){return s?.sheet?.rules?s.sheet.rules:s?.sheet?.cssRules?s.sheet.cssRules:[]}function o7(s,e,t=lle()){if(!(!t||!e)){t.sheet?.insertRule(`${s} {${e}}`,0);for(const i of mK.get(t)??[])o7(s,e,i)}}class yR{constructor(){this._hooks=new Ze,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,n,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=n,this._onStopCallback=r;let o=e;try{e.setPointerCapture(t),this._hooks.add(lt(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=nt(e)}this._hooks.add(ue(o,Re.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(ue(o,Re.POINTER_UP,a=>this.stopMonitoring(!0)))}}function zP(s){return`--vscode-${s.replace(/\./g,"-")}`}function Fe(s){return`var(${zP(s)})`}function ule(s,e){return`var(${zP(s)}, ${e})`}function hle(s){return s!==null&&typeof s=="object"&&"light"in s&&"dark"in s}const pK={ColorContribution:"base.contributions.colors"},dle="default";class fle extends pe{constructor(){super(),this._onDidChangeSchema=this._register(new ne),this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,n=!1,r){const o={id:e,description:i,defaults:t,needsTransparency:n,deprecationMessage:r};this.colorsById[e]=o;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),n&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=y(2004,"This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[a,{type:"string",const:dle,description:y(2005,"Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i?.defaults){const n=hle(i.defaults)?i.defaults[t.type]:i.defaults;return sc(n,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const n=t.indexOf(".")===-1?0:1,r=i.indexOf(".")===-1?0:1;return n!==r?n-r:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const SR=new fle;or.add(pK.ColorContribution,SR);function Q(s,e,t,i,n){return SR.registerColor(s,e,t,i,n)}function gle(s,e){switch(s.op){case 0:return sc(s.value,e)?.darken(s.factor);case 1:return sc(s.value,e)?.lighten(s.factor);case 2:return sc(s.value,e)?.transparent(s.factor);case 7:{const t=sc(s.color,e)||xe.transparent,i=sc(s.with,e)||xe.transparent;return t.mix(i,s.ratio)}case 3:{const t=sc(s.background,e);return t?sc(s.value,e)?.makeOpaque(t):sc(s.value,e)}case 4:for(const t of s.values){const i=sc(t,e);if(i)return i}return;case 6:return sc(e.defines(s.if)?s.then:s.else,e);case 5:{const t=sc(s.value,e);if(!t)return;const i=sc(s.background,e);return i?t.isDarkerThan(i)?xe.getLighterColor(t,i,s.factor).transparent(s.transparency):xe.getDarkerColor(t,i,s.factor).transparent(s.transparency):t.transparent(s.factor*s.transparency)}default:throw z6()}}function F0(s,e){return{op:0,value:s,factor:e}}function nh(s,e){return{op:1,value:s,factor:e}}function Pt(s,e){return{op:2,value:s,factor:e}}function dW(...s){return{op:4,values:s}}function mle(s,e,t){return{op:6,if:s,then:e,else:t}}function fW(s,e,t,i){return{op:5,value:s,background:e,factor:t,transparency:i}}function sc(s,e){if(s!==null){if(typeof s=="string")return s[0]==="#"?xe.fromHex(s):e.getColor(s);if(s instanceof xe)return s;if(typeof s=="object")return gle(s,e)}}const _K="vscode://schemas/workbench-colors",bK=or.as(bR.JSONContribution);bK.registerSchema(_K,SR.getColorSchema());const gW=new Or(()=>bK.notifySchemaChanged(_K),200);SR.onDidChangeSchema(()=>{gW.isScheduled()||gW.schedule()});const Oi=Q("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},y(1756,"Overall foreground color. This color is only used if not overridden by a component."));Q("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},y(1757,"Overall foreground for disabled elements. This color is only used if not overridden by a component."));Q("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},y(1758,"Overall foreground color for error messages. This color is only used if not overridden by a component."));Q("descriptionForeground",{light:"#717171",dark:Pt(Oi,.7),hcDark:Pt(Oi,.7),hcLight:Pt(Oi,.7)},y(1759,"Foreground color for description text providing additional information, for example for a label."));const a7=Q("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},y(1760,"The default color for icons in the workbench.")),Rd=Q("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},y(1761,"Overall border color for focused elements. This color is only used if not overridden by a component.")),ti=Q("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},y(1762,"An extra border around elements to separate them from others for greater contrast.")),$n=Q("contrastActiveBorder",{light:null,dark:null,hcDark:Rd,hcLight:Rd},y(1763,"An extra border around active elements to separate them from others for greater contrast."));Q("selection.background",null,y(1764,"The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const ple=Q("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},y(1765,"Foreground color for links in text."));Q("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},y(1766,"Foreground color for links in text when clicked on and on mouse hover."));Q("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:xe.black,hcLight:"#292929"},y(1767,"Color for text separators."));Q("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},y(1768,"Foreground color for preformatted text segments."));Q("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},y(1769,"Background color for preformatted text segments."));Q("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},y(1770,"Background color for block quotes in text."));Q("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:xe.white,hcLight:"#292929"},y(1771,"Border color for block quotes in text."));Q("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:xe.black,hcLight:"#F2F2F2"},y(1772,"Background color for code blocks in text."));Q("sash.hoverBorder",Rd,y(1977,"Border color of active sashes."));const DD=Q("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:xe.black,hcLight:"#0F4A85"},y(1978,"Badge background color. Badges are small information labels, e.g. for search results count.")),_le=Q("badge.foreground",{dark:xe.white,light:"#333",hcDark:xe.white,hcLight:xe.white},y(1979,"Badge foreground color. Badges are small information labels, e.g. for search results count."));Q("activityWarningBadge.foreground",{dark:xe.black.lighten(.2),light:xe.white,hcDark:null,hcLight:xe.black.lighten(.2)},y(1980,"Foreground color of the warning activity badge"));Q("activityWarningBadge.background",{dark:"#CCA700",light:"#BF8803",hcDark:null,hcLight:"#CCA700"},y(1981,"Background color of the warning activity badge"));Q("activityErrorBadge.foreground",{dark:xe.black.lighten(.2),light:xe.white,hcDark:null,hcLight:xe.black.lighten(.2)},y(1982,"Foreground color of the error activity badge"));Q("activityErrorBadge.background",{dark:"#F14C4C",light:"#E51400",hcDark:null,hcLight:"#F14C4C"},y(1983,"Background color of the error activity badge"));const UP=Q("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},y(1984,"Scrollbar shadow to indicate that the view is scrolled.")),vK=Q("scrollbarSlider.background",{dark:xe.fromHex("#797979").transparent(.4),light:xe.fromHex("#646464").transparent(.4),hcDark:Pt(ti,.6),hcLight:Pt(ti,.4)},y(1985,"Scrollbar slider background color.")),wK=Q("scrollbarSlider.hoverBackground",{dark:xe.fromHex("#646464").transparent(.7),light:xe.fromHex("#646464").transparent(.7),hcDark:Pt(ti,.8),hcLight:Pt(ti,.8)},y(1986,"Scrollbar slider background color when hovering.")),CK=Q("scrollbarSlider.activeBackground",{dark:xe.fromHex("#BFBFBF").transparent(.4),light:xe.fromHex("#000000").transparent(.6),hcDark:ti,hcLight:ti},y(1987,"Scrollbar slider background color when clicked on.")),ble=Q("progressBar.background",{dark:xe.fromHex("#0E70C0"),light:xe.fromHex("#0E70C0"),hcDark:ti,hcLight:ti},y(1988,"Background color of the progress bar that can show for long running operations."));Q("chart.line",{dark:"#236B8E",light:"#236B8E",hcDark:"#236B8E",hcLight:"#236B8E"},y(1989,"Line color for the chart."));Q("chart.axis",{dark:xe.fromHex("#BFBFBF").transparent(.4),light:xe.fromHex("#000000").transparent(.6),hcDark:ti,hcLight:ti},y(1990,"Axis color for the chart."));Q("chart.guide",{dark:xe.fromHex("#BFBFBF").transparent(.2),light:xe.fromHex("#000000").transparent(.2),hcDark:ti,hcLight:ti},y(1991,"Guide line for the chart."));const ou=Q("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:xe.black,hcLight:xe.white},y(1781,"Editor background color.")),R2=Q("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:xe.white,hcLight:Oi},y(1782,"Editor default foreground color."));Q("editorStickyScroll.background",ou,y(1783,"Background color of sticky scroll in the editor"));Q("editorStickyScrollGutter.background",ou,y(1784,"Background color of the gutter part of sticky scroll in the editor"));Q("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:xe.fromHex("#0F4A85").transparent(.1)},y(1785,"Background color of sticky scroll on hover in the editor"));Q("editorStickyScroll.border",{dark:null,light:null,hcDark:ti,hcLight:ti},y(1786,"Border color of sticky scroll in the editor"));Q("editorStickyScroll.shadow",UP,y(1787," Shadow color of sticky scroll in the editor"));const iu=Q("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:xe.white},y(1788,"Background color of editor widgets, such as find/replace.")),LR=Q("editorWidget.foreground",Oi,y(1789,"Foreground color of editor widgets, such as find/replace.")),yK=Q("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:ti,hcLight:ti},y(1790,"Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));Q("editorWidget.resizeBorder",null,y(1791,"Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));Q("editorError.background",null,y(1792,"Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const qP=Q("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},y(1793,"Foreground color of error squigglies in the editor."));Q("editorError.border",{dark:null,light:null,hcDark:xe.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},y(1794,"If set, color of double underlines for errors in the editor."));const vle=Q("editorWarning.background",null,y(1795,"Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),cp=Q("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},y(1796,"Foreground color of warning squigglies in the editor.")),IN=Q("editorWarning.border",{dark:null,light:null,hcDark:xe.fromHex("#FFCC00").transparent(.8),hcLight:xe.fromHex("#FFCC00").transparent(.8)},y(1797,"If set, color of double underlines for warnings in the editor."));Q("editorInfo.background",null,y(1798,"Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const p0=Q("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},y(1799,"Foreground color of info squigglies in the editor.")),AN=Q("editorInfo.border",{dark:null,light:null,hcDark:xe.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},y(1800,"If set, color of double underlines for infos in the editor.")),wle=Q("editorHint.foreground",{dark:xe.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},y(1801,"Foreground color of hint squigglies in the editor."));Q("editorHint.border",{dark:null,light:null,hcDark:xe.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},y(1802,"If set, color of double underlines for hints in the editor."));Q("editorLink.activeForeground",{dark:"#4E94CE",light:xe.blue,hcDark:xe.cyan,hcLight:"#292929"},y(1803,"Color of active links."));const Zv=Q("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},y(1804,"Color of the editor selection.")),Cle=Q("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:xe.white},y(1805,"Color of the selected text for high contrast.")),SK=Q("editor.inactiveSelectionBackground",{light:Pt(Zv,.5),dark:Pt(Zv,.5),hcDark:Pt(Zv,.7),hcLight:Pt(Zv,.5)},y(1806,"Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),LK=Q("editor.selectionHighlightBackground",{light:fW(Zv,ou,.3,.6),dark:fW(Zv,ou,.3,.6),hcDark:null,hcLight:null},y(1807,"Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);Q("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:$n,hcLight:$n},y(1808,"Border color for regions with the same content as the selection."));Q("editor.compositionBorder",{light:"#000000",dark:"#ffffff",hcLight:"#000000",hcDark:"#ffffff"},y(1809,"The border color for an IME composition."));Q("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},y(1810,"Color of the current search match."));Q("editor.findMatchForeground",null,y(1811,"Text color of the current search match."));const Hm=Q("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},y(1812,"Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);Q("editor.findMatchHighlightForeground",null,y(1813,"Foreground color of the other search matches."),!0);Q("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},y(1814,"Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Q("editor.findMatchBorder",{light:null,dark:null,hcDark:$n,hcLight:$n},y(1815,"Border color of the current search match."));const Xv=Q("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:$n,hcLight:$n},y(1816,"Border color of the other search matches."));Q("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Pt($n,.4),hcLight:Pt($n,.4)},y(1817,"Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Q("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},y(1818,"Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const mW=Q("editorHoverWidget.background",iu,y(1819,"Background color of the editor hover."));Q("editorHoverWidget.foreground",LR,y(1820,"Foreground color of the editor hover."));const yle=Q("editorHoverWidget.border",yK,y(1821,"Border color of the editor hover."));Q("editorHoverWidget.statusBarBackground",{dark:nh(mW,.2),light:F0(mW,.05),hcDark:iu,hcLight:iu},y(1822,"Background color of the editor hover status bar."));const xK=Q("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:xe.white,hcLight:xe.black},y(1823,"Foreground color of inline hints")),kK=Q("editorInlayHint.background",{dark:Pt(DD,.1),light:Pt(DD,.1),hcDark:Pt(xe.white,.1),hcLight:Pt(DD,.1)},y(1824,"Background color of inline hints"));Q("editorInlayHint.typeForeground",xK,y(1825,"Foreground color of inline hints for types"));Q("editorInlayHint.typeBackground",kK,y(1826,"Background color of inline hints for types"));Q("editorInlayHint.parameterForeground",xK,y(1827,"Foreground color of inline hints for parameters"));Q("editorInlayHint.parameterBackground",kK,y(1828,"Background color of inline hints for parameters"));const Sle=Q("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},y(1829,"The color used for the lightbulb actions icon."));Q("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},y(1830,"The color used for the lightbulb auto fix actions icon."));Q("editorLightBulbAi.foreground",Sle,y(1831,"The color used for the lightbulb AI icon."));Q("editor.snippetTabstopHighlightBackground",{dark:new xe(new ge(124,124,124,.3)),light:new xe(new ge(10,50,100,.2)),hcDark:new xe(new ge(124,124,124,.3)),hcLight:new xe(new ge(10,50,100,.2))},y(1832,"Highlight background color of a snippet tabstop."));Q("editor.snippetTabstopHighlightBorder",null,y(1833,"Highlight border color of a snippet tabstop."));Q("editor.snippetFinalTabstopHighlightBackground",null,y(1834,"Highlight background color of the final tabstop of a snippet."));Q("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new xe(new ge(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},y(1835,"Highlight border color of the final tabstop of a snippet."));const l7=new xe(new ge(155,185,85,.2)),c7=new xe(new ge(255,0,0,.2)),Lle=Q("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},y(1836,"Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),xle=Q("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},y(1837,"Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Q("diffEditor.insertedLineBackground",{dark:l7,light:l7,hcDark:null,hcLight:null},y(1838,"Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);Q("diffEditor.removedLineBackground",{dark:c7,light:c7,hcDark:null,hcLight:null},y(1839,"Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Q("diffEditorGutter.insertedLineBackground",null,y(1840,"Background color for the margin where lines got inserted."));Q("diffEditorGutter.removedLineBackground",null,y(1841,"Background color for the margin where lines got removed."));const kle=Q("diffEditorOverview.insertedForeground",null,y(1842,"Diff overview ruler foreground for inserted content.")),Ele=Q("diffEditorOverview.removedForeground",null,y(1843,"Diff overview ruler foreground for removed content."));Q("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},y(1844,"Outline color for the text that got inserted."));Q("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},y(1845,"Outline color for text that got removed."));Q("diffEditor.border",{dark:null,light:null,hcDark:ti,hcLight:ti},y(1846,"Border color between the two text editors."));Q("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},y(1847,"Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));Q("diffEditor.unchangedRegionBackground","sideBar.background",y(1848,"The background color of unchanged blocks in the diff editor."));Q("diffEditor.unchangedRegionForeground","foreground",y(1849,"The foreground color of unchanged blocks in the diff editor."));Q("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},y(1850,"The background color of unchanged code in the diff editor."));const M2=Q("widget.shadow",{dark:Pt(xe.black,.36),light:Pt(xe.black,.16),hcDark:null,hcLight:null},y(1851,"Shadow color of widgets such as find/replace inside the editor.")),EK=Q("widget.border",{dark:null,light:null,hcDark:ti,hcLight:ti},y(1852,"Border color of widgets such as find/replace inside the editor.")),pW=Q("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},y(1853,"Toolbar background when hovering over actions using the mouse"));Q("toolbar.hoverOutline",{dark:null,light:null,hcDark:$n,hcLight:$n},y(1854,"Toolbar outline when hovering over actions using the mouse"));Q("toolbar.activeBackground",{dark:nh(pW,.1),light:F0(pW,.1),hcDark:null,hcLight:null},y(1855,"Toolbar background when holding the mouse over actions"));const Tle=Q("breadcrumb.foreground",Pt(Oi,.8),y(1856,"Color of focused breadcrumb items.")),Dle=Q("breadcrumb.background",ou,y(1857,"Background color of breadcrumb items.")),_W=Q("breadcrumb.focusForeground",{light:F0(Oi,.2),dark:nh(Oi,.1),hcDark:nh(Oi,.1),hcLight:nh(Oi,.1)},y(1858,"Color of focused breadcrumb items.")),Nle=Q("breadcrumb.activeSelectionForeground",{light:F0(Oi,.2),dark:nh(Oi,.1),hcDark:nh(Oi,.1),hcLight:nh(Oi,.1)},y(1859,"Color of selected breadcrumb items."));Q("breadcrumbPicker.background",iu,y(1860,"Background color of breadcrumb item picker."));const TK=.5,bW=xe.fromHex("#40C8AE").transparent(TK),vW=xe.fromHex("#40A6FF").transparent(TK),wW=xe.fromHex("#606060").transparent(.4),$P=.4,cC=1,u7=Q("merge.currentHeaderBackground",{dark:bW,light:bW,hcDark:null,hcLight:null},y(1861,"Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Q("merge.currentContentBackground",Pt(u7,$P),y(1862,"Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const h7=Q("merge.incomingHeaderBackground",{dark:vW,light:vW,hcDark:null,hcLight:null},y(1863,"Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Q("merge.incomingContentBackground",Pt(h7,$P),y(1864,"Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const d7=Q("merge.commonHeaderBackground",{dark:wW,light:wW,hcDark:null,hcLight:null},y(1865,"Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Q("merge.commonContentBackground",Pt(d7,$P),y(1866,"Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const uC=Q("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},y(1867,"Border color on headers and the splitter in inline merge-conflicts."));Q("editorOverviewRuler.currentContentForeground",{dark:Pt(u7,cC),light:Pt(u7,cC),hcDark:uC,hcLight:uC},y(1868,"Current overview ruler foreground for inline merge-conflicts."));Q("editorOverviewRuler.incomingContentForeground",{dark:Pt(h7,cC),light:Pt(h7,cC),hcDark:uC,hcLight:uC},y(1869,"Incoming overview ruler foreground for inline merge-conflicts."));Q("editorOverviewRuler.commonContentForeground",{dark:Pt(d7,cC),light:Pt(d7,cC),hcDark:uC,hcLight:uC},y(1870,"Common ancestor overview ruler foreground for inline merge-conflicts."));Q("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},y(1871,"Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);Q("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",y(1872,"Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const Ile=Q("problemsErrorIcon.foreground",qP,y(1873,"The color used for the problems error icon.")),Ale=Q("problemsWarningIcon.foreground",cp,y(1874,"The color used for the problems warning icon.")),Rle=Q("problemsInfoIcon.foreground",p0,y(1875,"The color used for the problems info icon.")),Mle=Q("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},y(1966,"Minimap marker color for find matches."),!0);Q("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},y(1967,"Minimap marker color for repeating editor selections."),!0);const CW=Q("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},y(1968,"Minimap marker color for the editor selection."),!0),Ole=Q("minimap.infoHighlight",{dark:p0,light:p0,hcDark:AN,hcLight:AN},y(1969,"Minimap marker color for infos.")),Ple=Q("minimap.warningHighlight",{dark:cp,light:cp,hcDark:IN,hcLight:IN},y(1970,"Minimap marker color for warnings.")),Ble=Q("minimap.errorHighlight",{dark:new xe(new ge(255,18,18,.7)),light:new xe(new ge(255,18,18,.7)),hcDark:new xe(new ge(255,50,50,1)),hcLight:"#B5200D"},y(1971,"Minimap marker color for errors.")),Fle=Q("minimap.background",null,y(1972,"Minimap background color.")),Vle=Q("minimap.foregroundOpacity",xe.fromHex("#000f"),y(1973,'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));Q("minimapSlider.background",Pt(vK,.5),y(1974,"Minimap slider background color."));Q("minimapSlider.hoverBackground",Pt(wK,.5),y(1975,"Minimap slider background color when hovering."));Q("minimapSlider.activeBackground",Pt(CK,.5),y(1976,"Minimap slider background color when clicked on."));Q("charts.foreground",Oi,y(1773,"The foreground color used in charts."));Q("charts.lines",Pt(Oi,.5),y(1774,"The color used for horizontal lines in charts."));Q("charts.red",qP,y(1775,"The red color used in chart visualizations."));Q("charts.blue",p0,y(1776,"The blue color used in chart visualizations."));Q("charts.yellow",cp,y(1777,"The yellow color used in chart visualizations."));Q("charts.orange",Mle,y(1778,"The orange color used in chart visualizations."));Q("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},y(1779,"The green color used in chart visualizations."));Q("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},y(1780,"The purple color used in chart visualizations."));const Hle=Q("input.background",{dark:"#3C3C3C",light:xe.white,hcDark:xe.black,hcLight:xe.white},y(1876,"Input box background.")),Wle=Q("input.foreground",Oi,y(1877,"Input box foreground.")),zle=Q("input.border",{dark:null,light:null,hcDark:ti,hcLight:ti},y(1878,"Input box border.")),DK=Q("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:ti,hcLight:ti},y(1879,"Border color of activated options in input fields.")),Ule=Q("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},y(1880,"Background color of activated options in input fields.")),NK=Q("inputOption.activeBackground",{dark:Pt(Rd,.4),light:Pt(Rd,.2),hcDark:xe.transparent,hcLight:xe.transparent},y(1881,"Background hover color of options in input fields.")),IK=Q("inputOption.activeForeground",{dark:xe.white,light:xe.black,hcDark:Oi,hcLight:Oi},y(1882,"Foreground color of activated options in input fields."));Q("input.placeholderForeground",{light:Pt(Oi,.5),dark:Pt(Oi,.5),hcDark:Pt(Oi,.7),hcLight:Pt(Oi,.7)},y(1883,"Input box foreground color for placeholder text."));const qle=Q("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:xe.black,hcLight:xe.white},y(1884,"Input validation background color for information severity.")),$le=Q("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Oi},y(1885,"Input validation foreground color for information severity.")),jle=Q("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:ti,hcLight:ti},y(1886,"Input validation border color for information severity.")),Gle=Q("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:xe.black,hcLight:xe.white},y(1887,"Input validation background color for warning severity.")),Kle=Q("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Oi},y(1888,"Input validation foreground color for warning severity.")),Yle=Q("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:ti,hcLight:ti},y(1889,"Input validation border color for warning severity.")),Zle=Q("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:xe.black,hcLight:xe.white},y(1890,"Input validation background color for error severity.")),Xle=Q("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Oi},y(1891,"Input validation foreground color for error severity.")),Qle=Q("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:ti,hcLight:ti},y(1892,"Input validation border color for error severity.")),xR=Q("dropdown.background",{dark:"#3C3C3C",light:xe.white,hcDark:xe.black,hcLight:xe.white},y(1893,"Dropdown background.")),Jle=Q("dropdown.listBackground",{dark:null,light:null,hcDark:xe.black,hcLight:xe.white},y(1894,"Dropdown list background.")),jP=Q("dropdown.foreground",{dark:"#F0F0F0",light:Oi,hcDark:xe.white,hcLight:Oi},y(1895,"Dropdown foreground.")),GP=Q("dropdown.border",{dark:xR,light:"#CECECE",hcDark:ti,hcLight:ti},y(1896,"Dropdown border.")),AK=Q("button.foreground",xe.white,y(1897,"Button foreground color.")),ece=Q("button.separator",Pt(AK,.4),y(1898,"Button separator color.")),US=Q("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},y(1899,"Button background color.")),tce=Q("button.hoverBackground",{dark:nh(US,.2),light:F0(US,.2),hcDark:US,hcLight:US},y(1900,"Button background color when hovering.")),ice=Q("button.border",ti,y(1901,"Button border color.")),nce=Q("button.secondaryForeground",{dark:xe.white,light:xe.white,hcDark:xe.white,hcLight:Oi},y(1902,"Secondary button foreground color.")),f7=Q("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:xe.white},y(1903,"Secondary button background color.")),sce=Q("button.secondaryHoverBackground",{dark:nh(f7,.2),light:F0(f7,.2),hcDark:null,hcLight:null},y(1904,"Secondary button background color when hovering.")),qS=Q("radio.activeForeground",IK,y(1905,"Foreground color of active radio option.")),rce=Q("radio.activeBackground",NK,y(1906,"Background color of active radio option.")),oce=Q("radio.activeBorder",DK,y(1907,"Border color of the active radio option.")),ace=Q("radio.inactiveForeground",null,y(1908,"Foreground color of inactive radio option.")),lce=Q("radio.inactiveBackground",null,y(1909,"Background color of inactive radio option.")),cce=Q("radio.inactiveBorder",{light:Pt(qS,.2),dark:Pt(qS,.2),hcDark:Pt(qS,.4),hcLight:Pt(qS,.2)},y(1910,"Border color of the inactive radio option.")),uce=Q("radio.inactiveHoverBackground",Ule,y(1911,"Background color of inactive active radio option when hovering.")),KP=Q("checkbox.background",xR,y(1912,"Background color of checkbox widget."));Q("checkbox.selectBackground",iu,y(1913,"Background color of checkbox widget when the element it's in is selected."));const YP=Q("checkbox.foreground",jP,y(1914,"Foreground color of checkbox widget.")),hce=Q("checkbox.border",GP,y(1915,"Border color of checkbox widget."));Q("checkbox.selectBorder",a7,y(1916,"Border color of checkbox widget when the element it's in is selected."));const dce=Q("checkbox.disabled.background",{op:7,color:KP,with:YP,ratio:.33},y(1917,"Background of a disabled checkbox.")),fce=Q("checkbox.disabled.foreground",{op:7,color:YP,with:KP,ratio:.33},y(1918,"Foreground of a disabled checkbox.")),gce=Q("keybindingLabel.background",{dark:new xe(new ge(128,128,128,.17)),light:new xe(new ge(221,221,221,.4)),hcDark:xe.transparent,hcLight:xe.transparent},y(1919,"Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),mce=Q("keybindingLabel.foreground",{dark:xe.fromHex("#CCCCCC"),light:xe.fromHex("#555555"),hcDark:xe.white,hcLight:Oi},y(1920,"Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),pce=Q("keybindingLabel.border",{dark:new xe(new ge(51,51,51,.6)),light:new xe(new ge(204,204,204,.4)),hcDark:new xe(new ge(111,195,223)),hcLight:ti},y(1921,"Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),_ce=Q("keybindingLabel.bottomBorder",{dark:new xe(new ge(68,68,68,.6)),light:new xe(new ge(187,187,187,.4)),hcDark:new xe(new ge(111,195,223)),hcLight:Oi},y(1922,"Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),bce=Q("list.focusBackground",null,y(1923,"List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vce=Q("list.focusForeground",null,y(1924,"List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),wce=Q("list.focusOutline",{dark:Rd,light:Rd,hcDark:$n,hcLight:$n},y(1925,"List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Cce=Q("list.focusAndSelectionOutline",null,y(1926,"List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),_0=Q("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:xe.fromHex("#0F4A85").transparent(.1)},y(1927,"List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ox=Q("list.activeSelectionForeground",{dark:xe.white,light:xe.white,hcDark:null,hcLight:null},y(1928,"List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),RK=Q("list.activeSelectionIconForeground",null,y(1929,"List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),yce=Q("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:xe.fromHex("#0F4A85").transparent(.1)},y(1930,"List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Sce=Q("list.inactiveSelectionForeground",null,y(1931,"List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Lce=Q("list.inactiveSelectionIconForeground",null,y(1932,"List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),xce=Q("list.inactiveFocusBackground",null,y(1933,"List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),kce=Q("list.inactiveFocusOutline",null,y(1934,"List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),MK=Q("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:xe.white.transparent(.1),hcLight:xe.fromHex("#0F4A85").transparent(.1)},y(1935,"List/Tree background when hovering over items using the mouse.")),OK=Q("list.hoverForeground",null,y(1936,"List/Tree foreground when hovering over items using the mouse.")),Ece=Q("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},y(1937,"List/Tree drag and drop background when moving items over other items when using the mouse.")),Tce=Q("list.dropBetweenBackground",{dark:a7,light:a7,hcDark:null,hcLight:null},y(1938,"List/Tree drag and drop border color when moving items between items when using the mouse.")),ST=Q("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Rd,hcLight:Rd},y(1939,"List/Tree foreground color of the match highlights when searching inside the list/tree."));Q("list.focusHighlightForeground",{dark:ST,light:mle(_0,ST,"#BBE7FF"),hcDark:ST,hcLight:ST},y(1940,"List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));Q("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},y(1941,"List/Tree foreground color for invalid items, for example an unresolved root in explorer."));Q("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},y(1942,"Foreground color of list items containing errors."));Q("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},y(1943,"Foreground color of list items containing warnings."));const Dce=Q("listFilterWidget.background",{light:F0(iu,0),dark:nh(iu,0),hcDark:iu,hcLight:iu},y(1944,"Background color of the type filter widget in lists and trees.")),Nce=Q("listFilterWidget.outline",{dark:xe.transparent,light:xe.transparent,hcDark:"#f38518",hcLight:"#007ACC"},y(1945,"Outline color of the type filter widget in lists and trees.")),Ice=Q("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:ti,hcLight:ti},y(1946,"Outline color of the type filter widget in lists and trees, when there are no matches.")),Ace=Q("listFilterWidget.shadow",M2,y(1947,"Shadow color of the type filter widget in lists and trees."));Q("list.filterMatchBackground",{dark:Hm,light:Hm,hcDark:null,hcLight:null},y(1948,"Background color of the filtered match."));Q("list.filterMatchBorder",{dark:Xv,light:Xv,hcDark:ti,hcLight:$n},y(1949,"Border color of the filtered match."));Q("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},y(1950,"List/Tree foreground color for items that are deemphasized."));const PK=Q("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},y(1951,"Tree stroke color for the indentation guides.")),Rce=Q("tree.inactiveIndentGuidesStroke",Pt(PK,.4),y(1952,"Tree stroke color for the indentation guides that are not active.")),Mce=Q("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},y(1953,"Table border color between columns.")),Oce=Q("tree.tableOddRowsBackground",{dark:Pt(Oi,.04),light:Pt(Oi,.04),hcDark:null,hcLight:null},y(1954,"Background color for odd table rows."));Q("editorActionList.background",iu,y(1955,"Action List background color."));Q("editorActionList.foreground",LR,y(1956,"Action List foreground color."));Q("editorActionList.focusForeground",Ox,y(1957,"Action List foreground color for the focused item."));Q("editorActionList.focusBackground",_0,y(1958,"Action List background color for the focused item."));const Pce=Q("menu.border",{dark:null,light:null,hcDark:ti,hcLight:ti},y(1959,"Border color of menus.")),Bce=Q("menu.foreground",jP,y(1960,"Foreground color of menu items.")),Fce=Q("menu.background",xR,y(1961,"Background color of menu items.")),Vce=Q("menu.selectionForeground",Ox,y(1962,"Foreground color of the selected menu item in menus.")),Hce=Q("menu.selectionBackground",_0,y(1963,"Background color of the selected menu item in menus.")),Wce=Q("menu.selectionBorder",{dark:null,light:null,hcDark:$n,hcLight:$n},y(1964,"Border color of the selected menu item in menus.")),zce=Q("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:ti,hcLight:ti},y(1965,"Color of a separator menu item in menus.")),FM=Q("quickInput.background",iu,y(1992,"Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Uce=Q("quickInput.foreground",LR,y(1993,"Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),qce=Q("quickInputTitle.background",{dark:new xe(new ge(255,255,255,.105)),light:new xe(new ge(0,0,0,.06)),hcDark:"#000000",hcLight:xe.white},y(1994,"Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),BK=Q("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:xe.white,hcLight:"#0F4A85"},y(1995,"Quick picker color for grouping labels.")),$ce=Q("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:xe.white,hcLight:"#0F4A85"},y(1996,"Quick picker color for grouping borders.")),yW=Q("quickInput.list.focusBackground",null,"",void 0,y(1997,"Please use quickInputList.focusBackground instead")),g7=Q("quickInputList.focusForeground",Ox,y(1998,"Quick picker foreground color for the focused item.")),FK=Q("quickInputList.focusIconForeground",RK,y(1999,"Quick picker icon foreground color for the focused item.")),m7=Q("quickInputList.focusBackground",{dark:dW(yW,_0),light:dW(yW,_0),hcDark:null,hcLight:null},y(2e3,"Quick picker background color for the focused item."));Q("search.resultsInfoForeground",{light:Oi,dark:Pt(Oi,.65),hcDark:Oi,hcLight:Oi},y(2001,"Color of the text in the search viewlet's completion message."));Q("searchEditor.findMatchBackground",{light:Pt(Hm,.66),dark:Pt(Hm,.66),hcDark:Hm,hcLight:Hm},y(2002,"Color of the Search Editor query matches."));Q("searchEditor.findMatchBorder",{light:Pt(Xv,.66),dark:Pt(Xv,.66),hcDark:Xv,hcLight:Xv},y(2003,"Border color of the Search Editor query matches."));class O2{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new VK(this.x-e.scrollX,this.y-e.scrollY)}}class VK{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new O2(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class jce{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n,this._editorPagePositionBrand=void 0}}class Gce{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function kR(s){const e=pc(s);return new jce(e.left,e.top,e.width,e.height)}function ER(s,e,t){const i=e.width/s.offsetWidth,n=e.height/s.offsetHeight,r=(t.x-e.x)/i,o=(t.y-e.y)/n;return new Gce(r,o)}class up extends kl{constructor(e,t,i){super(nt(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new O2(this.posx,this.posy),this.editorPos=kR(i),this.relativePos=ER(i,this.editorPos,this.pos)}}class Kce{constructor(e){this._editorViewDomNode=e}_create(e){return new up(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return ue(e,Re.CONTEXT_MENU,i=>{t(this._create(i))})}onMouseUp(e,t){return ue(e,Re.MOUSE_UP,i=>{t(this._create(i))})}onMouseDown(e,t){return ue(e,Re.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return ue(e,Re.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return ue(e,Re.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return ue(e,Re.MOUSE_MOVE,i=>t(this._create(i)))}}class Yce{constructor(e){this._editorViewDomNode=e}_create(e){return new up(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return ue(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return ue(e,Re.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return ue(e,Re.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return ue(e,"pointermove",i=>t(this._create(i)))}}class Zce extends pe{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new yR),this._keydownListener=null}startMonitoring(e,t,i,n,r){this._keydownListener=Cr(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,o=>{n(new up(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),r(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class V0 extends pe{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,n=e.length;i<n;i++){const r=e[i];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class ko extends V0{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class lh{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let n=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=i[n-o-1];return r}}class Xce{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getLineHeightForLineNumber(e){return this._viewLayout.getLineHeightForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Qce extends Xce{constructor(e,t,i,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i,this._viewLinesGpu=n}linesVisibleRangesForRange(e,t){const i=this._viewLines.linesVisibleRangesForRange(e,t);if(!this._viewLinesGpu)return i??null;const n=this._viewLinesGpu.linesVisibleRangesForRange(e,t);return i?n?i.concat(n).sort((r,o)=>r.lineNumber-o.lineNumber):i:n}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)??this._viewLinesGpu?.visibleRangeForPosition(e)??null}}class HK{constructor(e,t,i,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=n}}class P2{static from(e){const t=new Array(e.length);for(let i=0,n=e.length;i<n;i++){const r=e[i];t[i]=new P2(r.left,r.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class Qm{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class WK{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class p7{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class ND{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,n,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(i,n),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Qm.compare);const t=[];let i=0,n=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];n.left+n.width+.9>=a.left?n.width=Math.max(n.width,a.left+a.width-n.left):(t[i++]=n,n=a)}return t[i++]=n,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const n=[];for(let r=0,o=e.length;r<o;r++){const a=e[r];n[r]=new Qm(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,i,n,r,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),n=Math.min(l,Math.max(0,n)),t===n&&i===r&&i===0&&!e.children[t].firstChild){const g=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(g,o.clientRectDeltaLeft,o.clientRectScale)}t!==n&&n>0&&r===0&&(n--,r=1073741824);let c=e.children[t].firstChild,h=e.children[n].firstChild;if((!c||!h)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!h&&r===0&&n>0&&(h=e.children[n-1].firstChild,r=1073741824)),!c||!h)return null;i=Math.min(c.textContent.length,Math.max(0,i)),r=Math.min(h.textContent.length,Math.max(0,r));const d=this._readClientRects(c,i,h,r,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(d,o.clientRectDeltaLeft,o.clientRectScale)}}var bc;(function(s){s.DARK="dark",s.LIGHT="light",s.HIGH_CONTRAST_DARK="hcDark",s.HIGH_CONTRAST_LIGHT="hcLight"})(bc||(bc={}));var Qv;(function(s){s.VS="vs",s.VS_DARK="vs-dark",s.HC_BLACK="hc-black",s.HC_LIGHT="hc-light"})(Qv||(Qv={}));function Nw(s){return s===bc.HIGH_CONTRAST_DARK||s===bc.HIGH_CONTRAST_LIGHT}function B2(s){return s===bc.DARK||s===bc.HIGH_CONTRAST_DARK}const Jce=(function(){return cx?!0:!(Fa||Va||u0)})();let Iw=!0;const dA=class dA{constructor(e,t){this._viewGpuContext=e,this._options=t,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ei(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Nw(this._options.themeType)||this._renderedViewLine?.input.renderWhitespace===2?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,n,r){if(this._options.useGpu&&this._viewGpuContext?.canRender(this._options,n,e))return this._renderedViewLine?.domNode?.domNode.remove(),this._renderedViewLine=null,!1;if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=n.getViewLineRenderingData(e),a=this._options,l=_c.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn),c=o.hasVariableFonts||a.experimentalWhitespaceRendering==="off"?a.renderWhitespace:"none",h=!o.hasVariableFonts;let d=null;if(Nw(a.themeType)||c==="selection"){const C=n.selections;for(const S of C){if(S.endLineNumber<e||S.startLineNumber>e)continue;const E=S.startLineNumber===e?S.startColumn:o.minColumn,x=S.endLineNumber===e?S.endColumn:o.maxColumn;E<x&&(Nw(a.themeType)&&l.push(new _c(E,x,"inline-selected-text",0)),c==="selection"&&(d||(d=[]),d.push(new it(E-1,x-1))))}}const g=new B0(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,l,o.tabSize,o.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,c,a.renderControlCharacters,a.fontLigatures!==rp.OFF,d,o.textDirection,a.verticalScrollbarSize);if(this._renderedViewLine&&this._renderedViewLine.input.equals(g))return!1;r.appendString("<div "),o.textDirection===El.RTL?r.appendString('dir="rtl" '):o.containsRTL&&r.appendString('dir="ltr" '),r.appendString('style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(i)),r.appendString("px;line-height:"),r.appendString(String(i)),o.textDirection===El.RTL&&(r.appendString("px;padding-right:"),r.appendString(String(a.verticalScrollbarSize))),r.appendString('px;" class="'),r.appendString(dA.CLASS_NAME),r.appendString('">');const _=wR(g,r);r.appendString("</div>");let b=null;return h&&Iw&&Jce&&o.isBasicASCII&&g.isLTR&&a.useMonospaceOptimizations&&_.containsForeignElements===0&&(b=new LT(this._renderedViewLine?this._renderedViewLine.domNode:null,g,_.characterMapping)),b||(b=UK(this._renderedViewLine?this._renderedViewLine.domNode:null,g,_.characterMapping,_.containsForeignElements)),this._renderedViewLine=b,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i),this._renderedViewLine.domNode.setLineHeight(i))}isRenderedRTL(){return this._renderedViewLine?this._renderedViewLine.input.textDirection===El.RTL:!1}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof LT:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof LT?this._renderedViewLine.monospaceAssumptionsAreValid():Iw}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof LT&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,n){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const r=this._renderedViewLine.input.stopRenderingLineAfter;if(r!==-1&&t>r+1&&i>r+1)return new p7(!0,[new Qm(this.getWidth(n),0)]);r!==-1&&t>r+1&&(t=r+1),r!==-1&&i>r+1&&(i=r+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,i,n);return o&&o.length>0?new p7(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};dA.CLASS_NAME="view-line";let ig=dA;class LT{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const n=Math.floor(t.lineContent.length/300);if(n>0){this._keyColumnPixelOffsetCache=new Float32Array(n);for(let r=0;r<n;r++)this._keyColumnPixelOffsetCache[r]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return Iw;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Iw=!1)}return Iw}toSlowRenderedLine(){return UK(this.domNode,this.input,this._characterMapping,0)}getVisibleRangesForRange(e,t,i,n){const r=this._getColumnPixelOffset(e,t,n),o=this._getColumnPixelOffset(e,i,n);return[new Qm(r,o-r)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const n=Math.floor((t-1)/300)-1,r=(n+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[n],o===-1&&(o=this._actualReadPixelOffset(e,r,i),this._keyColumnPixelOffsetCache[n]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(r),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const n=this._characterMapping.getDomPosition(t),r=ND.readHorizontalRanges(this._getReadingTarget(this.domNode),n.partIndex,n.charIndex,n.partIndex,n.charIndex,i);return!r||r.length===0?-1:r[0].left}getColumnOfNodeOffset(e,t){return RN(this._characterMapping,e,t)}}class zK{constructor(e,t,i,n){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=n,this._cachedWidth=-1,this._pixelOffsetCache=null,t.isLTR){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,o=this._characterMapping.length;r<=o;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,n){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,n);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,i,n);return o===-1?null:[new Qm(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,n)}_readVisibleRangesForRange(e,t,i,n,r){if(i===n){const o=this._readPixelOffset(e,t,i,r);return o===-1?null:[new Qm(o,0)]}else return this._readRawVisibleRangesForRange(e,i,n,r)}_readPixelOffset(e,t,i,n){if(this.input.isLTR&&this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(n);const r=this._getReadingTarget(e);return r.firstChild?(n.markDidDomLayout(),r.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[i];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,i,n);return this._pixelOffsetCache[i]=o,o}return this._actualReadPixelOffset(e,t,i,n)}_actualReadPixelOffset(e,t,i,n){if(this._characterMapping.length===0){const l=ND.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,n);return!l||l.length===0?-1:l[0].left}if(this.input.isLTR&&i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(n);const r=this._characterMapping.getDomPosition(i),o=ND.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,n);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,n){if(this.input.isLTR&&t===1&&i===this._characterMapping.length)return[new Qm(0,this.getWidth(n))];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(i);return ND.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,n)}getColumnOfNodeOffset(e,t){return RN(this._characterMapping,e,t)}}class eue extends zK{_readVisibleRangesForRange(e,t,i,n,r){const o=super._readVisibleRangesForRange(e,t,i,n,r);if(!o||o.length===0||i===n||i===1&&n===this._characterMapping.length)return o;if(this.input.isLTR){const a=this._readPixelOffset(e,t,n,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const UK=(function(){return XA?tue:iue})();function tue(s,e,t,i){return new eue(s,e,t,i)}function iue(s,e,t,i){return new zK(s,e,t,i)}function RN(s,e,t){const i=e.textContent.length;let n=-1;for(;e;)e=e.previousSibling,n++;return s.getColumn(new cK(n,t),i)}class wn{static _nextVisibleColumn(e,t,i){return e===9?wn.nextRenderTabStop(t,i):op(e)||aP(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const n=Math.min(t-1,e.length),r=e.substring(0,n),o=new hN(r);let a=0;for(;!o.eol();){const l=uN(r,n,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const n=e.length,r=new hN(e);let o=0,a=1;for(;!r.eol();){const l=uN(e,n,r.offset);r.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,i),h=r.offset+1;if(c>=t){const d=t-o;return c-t<d?h:a}o=c,a=h}return n+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return wn.nextRenderTabStop(e,t)}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return wn.prevRenderTabStop(e,t)}}class Px{static whitespaceVisibleColumn(e,t,i){const n=e.length;let r=0,o=-1,a=-1;for(let l=0;l<n;l++){if(l===t)return[o,a,r];switch(r%i===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=wn.nextRenderTabStop(r,i);break;default:return[-1,-1,-1]}}return t===n?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,i,n){const r=e.length,[o,a,l]=Px.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(n){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(o===-1)return-1;let g=a;for(let _=o;_<r;++_){if(g===a+i)return o;switch(e.charCodeAt(_)){case 32:g+=1;break;case 9:g=wn.nextRenderTabStop(g,i);break;default:return-1}}return g===a+i?o:-1}const h=wn.nextRenderTabStop(l,i);let d=l;for(let g=t;g<r;g++){if(d===h)return g;switch(e.charCodeAt(g)){case 32:d+=1;break;case 9:d=wn.nextRenderTabStop(d,i);break;default:return-1}}return d===h?r:-1}}class Lm{constructor(e=null){this.hitTarget=e,this.type=0}}class qK{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var n1;(function(s){function e(t,i,n){const r=t.getPositionFromDOMInfo(i,n);return r?new qK(r,i,null):new Lm(i)}s.createFromDOMInfo=e})(n1||(n1={}));class nue{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class vr{static _deduceRage(e,t=null){return!t&&e?new ie(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,n,r,o){return{type:e,element:t,mouseColumn:i,position:n,range:r,detail:o}}static createViewZone(e,t,i,n,r){return{type:e,element:t,mouseColumn:i,position:n,range:this._deduceRage(n),detail:r}}static createContentText(e,t,i,n,r){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,n),detail:r}}static createContentEmpty(e,t,i,n){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:n}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,n){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:n}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class co{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class hC{constructor(e,t,i){this.viewModel=e.viewModel;const n=e.configuration.options;this.layoutInfo=n.get(165),this.viewDomNode=t.viewDomNode,this.viewLinesGpu=t.viewLinesGpu,this.lineHeight=n.get(75),this.stickyTabStops=n.get(132),this.typicalHalfwidthCharacterWidth=n.get(59).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return hC.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const n=i.verticalOffset+i.height/2,r=e.viewModel.getLineCount();let o=null,a,l=null;return i.afterLineNumber!==r&&(l=new se(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new se(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=o:o===null?a=l:t<n?a=o:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const n=this._context.viewModel.getLineCount(),r=this._context.viewModel.getLineMaxColumn(n);return{range:new ie(n,r,n,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new ie(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return hC._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}isRtl(e){return this.viewModel.getTextDirection(e)===El.RTL}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class sue{constructor(e,t,i,n){this.editorPos=t,this.pos=i,this.relativePos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Xr._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class rue extends sue{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=lh.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,n,r){super(e,t,i,n),this.hitTestResult=new po(()=>Xr.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=r;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?wn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return vr.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return vr.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,n){return vr.createMargin(e,this.target,this._getMouseColumn(t),t,i,n)}fulfillViewZone(e,t,i){return vr.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return vr.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return vr.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return vr.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return vr.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return vr.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const SW={isAfterLines:!0};function A_(s){return{isAfterLines:!1,horizontalDistanceToText:s}}class Xr{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=lh.collect(t,this._viewHelper.viewDomNode);return!!(co.isChildOfContentWidgets(i)||co.isChildOfOverflowingContentWidgets(i)||co.isChildOfOverlayWidgets(i)||co.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,n,r){const o=new hC(this._context,this._viewHelper,e),a=new rue(o,t,i,n,r);try{const l=Xr._createMouseTarget(o,a);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=Xr._snapToSoftTabBoundary(l.position,o.viewModel),h=ie.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,h,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let n=null;return!co.isChildOfOverflowGuard(t.targetPath)&&!co.isChildOfOverflowingContentWidgets(t.targetPath)&&!co.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(n=n||t.fulfillUnknown()),n=n||Xr._hitTestContentWidget(e,i),n=n||Xr._hitTestOverlayWidget(e,i),n=n||Xr._hitTestMinimap(e,i),n=n||Xr._hitTestScrollbarSlider(e,i),n=n||Xr._hitTestViewZone(e,i),n=n||Xr._hitTestMargin(e,i),n=n||Xr._hitTestViewCursor(e,i),n=n||Xr._hitTestTextArea(e,i),n=n||Xr._hitTestViewLines(e,i),n=n||Xr._hitTestScrollbar(e,i),n||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(co.isChildOfContentWidgets(t.targetPath)||co.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(co.isChildOfOverlayWidgets(t.targetPath)||co.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const n of i)if(t.target===n.domNode)return t.fulfillContentText(n.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,n=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of i){if(n<o.contentLeft||n>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const n=t.isInContentArea?8:5;return t.fulfillViewZone(n,i.position,i)}return null}static _hitTestTextArea(e,t){return co.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),n=i.range.getStartPosition();let r=Math.abs(t.relativePos.x);const o={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};if(r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=l[Math.floor(r/e.lineHeight)],t.fulfillMargin(2,n,i.range,o)}return r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,n,i.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,n,i.range,o))}return null}static _hitTestViewLines(e,t){if(!co.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new se(1,1),SW);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const n=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(n);return t.fulfillContentEmpty(new se(n,r),SW)}if(co.isStrictChildOfViewLines(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineLength(n),o=e.getLineWidth(n);if(r===0){const l=A_(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new se(n,1),l)}if(e.isRtl(n)){if(t.mouseContentHorizontalOffset+o<=e.layoutInfo.contentWidth-e.layoutInfo.verticalScrollbarWidth){const l=A_(t.mouseContentHorizontalOffset-o),c=new se(n,e.viewModel.getLineMaxColumn(n));return t.fulfillContentEmpty(c,l)}}else if(t.mouseContentHorizontalOffset>=o){const l=A_(t.mouseContentHorizontalOffset-o),c=new se(n,e.viewModel.getLineMaxColumn(n));return t.fulfillContentEmpty(c,l)}}else if(e.viewLinesGpu){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(n)===0){const l=e.getLineWidth(n),c=A_(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(new se(n,1),c)}const r=e.getLineWidth(n);if(e.isRtl(n)){if(t.mouseContentHorizontalOffset+r<=e.layoutInfo.contentWidth-e.layoutInfo.verticalScrollbarWidth){const l=A_(t.mouseContentHorizontalOffset-r),c=new se(n,e.viewModel.getLineMaxColumn(n));return t.fulfillContentEmpty(c,l)}}else if(t.mouseContentHorizontalOffset>=r){const l=A_(t.mouseContentHorizontalOffset-r),c=new se(n,e.viewModel.getLineMaxColumn(n));return t.fulfillContentEmpty(c,l)}const a=e.viewLinesGpu.getPositionAtCoordinate(n,t.mouseContentHorizontalOffset);if(a){const l={injectedText:null,mightBeForeignElement:!1};return t.fulfillContentText(a,ie.fromPositions(a,a),l)}}const i=t.hitTestResult.value;return i.type===1?Xr.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(co.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new se(i,n))}return null}static _hitTestScrollbarSlider(e,t){if(co.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new se(n,r))}}return null}static _hitTestScrollbar(e,t){if(co.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new se(i,n))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(165),n=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return Xr._getMouseColumn(n,t.get(59).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,n,r){const o=n.lineNumber,a=n.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const E=A_(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(n,E)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(n);const h=c.left;if(Math.abs(t.mouseContentHorizontalOffset-h)<1)return t.fulfillContentText(n,null,{mightBeForeignElement:!!r,injectedText:r});const d=[];if(d.push({offset:c.left,column:a}),a>1){const E=e.visibleRangeForPosition(o,a-1);E&&d.push({offset:E.left,column:a-1})}const g=e.viewModel.getLineMaxColumn(o);if(a<g){const E=e.visibleRangeForPosition(o,a+1);E&&d.push({offset:E.left,column:a+1})}d.sort((E,x)=>E.offset-x.offset);const _=t.pos.toClientCoordinates(nt(e.viewDomNode)),b=i.getBoundingClientRect(),C=b.left<=_.clientX&&_.clientX<=b.right;let S=null;for(let E=1;E<d.length;E++){const x=d[E-1],T=d[E];if(x.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=T.offset){S=new ie(o,x.column,o,T.column);const N=Math.abs(x.offset-t.mouseContentHorizontalOffset),A=Math.abs(T.offset-t.mouseContentHorizontalOffset);n=N<A?new se(o,x.column):new se(o,T.column);break}}return t.fulfillContentText(n,S,{mightBeForeignElement:!C||!!r,injectedText:r})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),n=e.getVerticalOffsetForLineNumber(i),r=n+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>r)){const a=Math.floor((n+r)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new O2(t.pos.x,l),h=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(nt(e.viewDomNode)));if(h.type===1)return h}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(nt(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=f0(e.viewDomNode);let n;if(i?typeof i.caretRangeFromPoint>"u"?n=oue(i,t.clientX,t.clientY):n=i.caretRangeFromPoint(t.clientX,t.clientY):n=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new Lm;const r=n.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===ig.CLASS_NAME?n1.createFromDOMInfo(e,o,n.startOffset):new Lm(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===ig.CLASS_NAME?n1.createFromDOMInfo(e,r,r.textContent.length):new Lm(r)}return new Lm}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const n=i.offsetNode.parentNode,r=n?n.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===ig.CLASS_NAME?n1.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Lm(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const n=i.offsetNode.parentNode,r=n&&n.nodeType===n.ELEMENT_NODE?n.className:null,o=n?n.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===ig.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return n1.createFromDOMInfo(e,l,0)}else if(a===ig.CLASS_NAME)return n1.createFromDOMInfo(e,i.offsetNode,0)}return new Lm(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:n}=t.model.getOptions(),r=Px.atomicPosition(i,e.column-1,n,2);return r!==-1?new se(e.lineNumber,r+1):e}static doHitTest(e,t){let i=new Lm;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(nt(e.viewDomNode)))),i.type===1){const n=e.viewModel.getInjectedTextAt(i.position),r=e.viewModel.normalizePosition(i.position,2);(n||!r.equals(i.position))&&(i=new qK(r,i.spanNode,n))}return i}}function oue(s,e,t){const i=document.createRange();let n=s.elementFromPoint(e,t);if(n?.hasChildNodes()){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;const r=n.getBoundingClientRect(),o=nt(n),a=o.getComputedStyle(n,null).getPropertyValue("font-style"),l=o.getComputedStyle(n,null).getPropertyValue("font-variant"),c=o.getComputedStyle(n,null).getPropertyValue("font-weight"),h=o.getComputedStyle(n,null).getPropertyValue("font-size"),d=o.getComputedStyle(n,null).getPropertyValue("line-height"),g=o.getComputedStyle(n,null).getPropertyValue("font-family"),_=`${a} ${l} ${c} ${h}/${d} ${g}`,b=n.innerText;let C=r.left,S=0,E;if(e>r.left+r.width)S=b.length;else{const x=_7.getInstance();for(let T=0;T<b.length+1;T++){if(E=x.getCharWidth(b.charAt(T),_)/2,C+=E,e<C){S=T;break}C+=E}}i.setStart(n.firstChild,S),i.setEnd(n.firstChild,S)}return i}const v1=class v1{static getInstance(){return v1._INSTANCE||(v1._INSTANCE=new v1),v1._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const n=this._canvas.getContext("2d");n.font=t;const o=n.measureText(e).width;return this._cache[i]=o,o}};v1._INSTANCE=null;let _7=v1;function En(s,e,t){let i=null,n=null;if(typeof t.value=="function"?(i="value",n=t.value,n.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",n=t.get),!n)throw new Error("not supported");const r=`$memoize$${e}`;t[i]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,o)}),this[r]}}var aue=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ji;(function(s){s.Tap="-monaco-gesturetap",s.Change="-monaco-gesturechange",s.Start="-monaco-gesturestart",s.End="-monaco-gesturesend",s.Contextmenu="-monaco-gesturecontextmenu"})(ji||(ji={}));const _r=class _r extends pe{constructor(){super(),this.dispatched=!1,this.targets=new ea,this.ignoreTargets=new ea,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Ie.runAndSubscribe(k2,({window:e,disposables:t})=>{t.add(ue(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(ue(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(ue(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:Ri,disposables:this._store}))}static addTarget(e){if(!_r.isTouchDevice())return pe.None;_r.INSTANCE||(_r.INSTANCE=new _r);const t=_r.INSTANCE.targets.push(e);return lt(t)}static ignoreTarget(e){if(!_r.isTouchDevice())return pe.None;_r.INSTANCE||(_r.INSTANCE=new _r);const t=_r.INSTANCE.ignoreTargets.push(e);return lt(t)}static isTouchDevice(){return"ontouchstart"in Ri||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,n=e.targetTouches.length;i<n;i++){const r=e.targetTouches.item(i);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};const o=this.newGestureEvent(ji.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),n=Object.keys(this.activeTouches).length;for(let r=0,o=t.changedTouches.length;r<o;r++){const a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<_r.HOLD_DELAY&&Math.abs(l.initialPageX-l.rollingPageX.at(-1))<30&&Math.abs(l.initialPageY-l.rollingPageY.at(-1))<30){const h=this.newGestureEvent(ji.Tap,l.initialTarget);h.pageX=l.rollingPageX.at(-1),h.pageY=l.rollingPageY.at(-1),this.dispatchEvent(h)}else if(c>=_r.HOLD_DELAY&&Math.abs(l.initialPageX-l.rollingPageX.at(-1))<30&&Math.abs(l.initialPageY-l.rollingPageY.at(-1))<30){const h=this.newGestureEvent(ji.Contextmenu,l.initialTarget);h.pageX=l.rollingPageX.at(-1),h.pageY=l.rollingPageY.at(-1),this.dispatchEvent(h)}else if(n===1){const h=l.rollingPageX.at(-1),d=l.rollingPageY.at(-1),g=l.rollingTimestamps.at(-1)-l.rollingTimestamps[0],_=h-l.rollingPageX[0],b=d-l.rollingPageY[0],C=[...this.targets].filter(S=>l.initialTarget instanceof Node&&S.contains(l.initialTarget));this.inertia(e,C,i,Math.abs(_)/g,_>0?1:-1,h,Math.abs(b)/g,b>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(ji.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===ji.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>_r.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===ji.Change||e.type===ji.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let n=0,r=e.initialTarget;for(;r&&r!==i;)n++,r=r.parentElement;t.push([n,i])}t.sort((i,n)=>i[0]-n[0]);for(const[i,n]of t)n.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,n,r,o,a,l,c){this.handle=na(e,()=>{const h=Date.now(),d=h-i;let g=0,_=0,b=!0;n+=_r.SCROLL_FRICTION*d,a+=_r.SCROLL_FRICTION*d,n>0&&(b=!1,g=r*n*d),a>0&&(b=!1,_=l*a*d);const C=this.newGestureEvent(ji.Change);C.translationX=g,C.translationY=_,t.forEach(S=>S.dispatchEvent(C)),b||this.inertia(e,t,h,n,r,o+g,a,l,c+_)})}onTouchMove(e){const t=Date.now();for(let i=0,n=e.changedTouches.length;i<n;i++){const r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}const o=this.activeTouches[r.identifier],a=this.newGestureEvent(ji.Change,o.initialTarget);a.translationX=r.pageX-o.rollingPageX.at(-1),a.translationY=r.pageY-o.rollingPageY.at(-1),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};_r.SCROLL_FRICTION=-.005,_r.HOLD_DELAY=700,_r.CLEAR_TAP_COUNT_TIME=400;let Co=_r;aue([En],Co,"isTouchDevice",null);let Ud=class extends pe{onclick(e,t){this._register(ue(e,Re.CLICK,i=>t(new kl(nt(e),i))))}onmousedown(e,t){this._register(ue(e,Re.MOUSE_DOWN,i=>t(new kl(nt(e),i))))}onmouseover(e,t){this._register(ue(e,Re.MOUSE_OVER,i=>t(new kl(nt(e),i))))}onmouseleave(e,t){this._register(ue(e,Re.MOUSE_LEAVE,i=>t(new kl(nt(e),i))))}onkeydown(e,t){this._register(ue(e,Re.KEY_DOWN,i=>t(new Mi(i))))}onkeyup(e,t){this._register(ue(e,Re.KEY_UP,i=>t(new Mi(i))))}oninput(e,t){this._register(ue(e,Re.INPUT,t))}onblur(e,t){this._register(ue(e,Re.BLUR,t))}onfocus(e,t){this._register(ue(e,Re.FOCUS,t))}ignoreGesture(e){return Co.ignoreTarget(e)}};const dC=11;class lue extends Ud{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Gt.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=dC+"px",this.domNode.style.height=dC+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new yR),this._register(Cr(this.bgDomNode,Re.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Cr(this.domNode,Re.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new iR),this._pointerdownScheduleRepeatTimer=this._register(new vg)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,nt(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class cue extends pe{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new vg)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}}const uue=140;class $K extends Ud{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new cue(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new yR),this._shouldRender=!0,this.domNode=ei(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ue(this.domNode.domNode,Re.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new lue(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,n){this.slider=ei(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ue(this.slider.domNode,Re.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);i<=r&&r<=n?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const o=pc(this.domNode.domNode);t=e.pageX-o.left,i=e.pageY-o.top}const n=e.pointerType==="mouse",r=e.button===0;if(r||!n){const o=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(o):this._scrollbarState.getDesiredScrollPositionFromOffset(o))}r&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),n=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{const o=this._sliderOrthogonalPointerPosition(r),a=Math.abs(o-i);if(ia&&a>uue){this._setDesiredScrollPositionNow(n.getScrollPosition());return}const c=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(n.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const hue=20;class fC{constructor(e,t,i,n,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=n,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new fC(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,n,r){const o=Math.max(0,i-e),a=Math.max(0,o-2*t),l=n>0&&n>i;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(hue,Math.floor(i*a/n))),h=(a-c)/(n-i),d=r*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:h,computedSliderPosition:Math.round(d)}}_refreshComputedValues(){const e=fC._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class due extends $K{constructor(e,t,i){const n=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new fC(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,n.width,n.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-dC)/2,a=(t.horizontalScrollbarSize-dC)/2;this._createArrow({className:"scra",icon:Ue.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new d0(null,1,0))}),this._createArrow({className:"scra",icon:Ue.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new d0(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class fue extends $K{constructor(e,t,i){const n=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new fC(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,n.height,n.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-dC)/2,a=(t.verticalScrollbarSize-dC)/2;this._createArrow({className:"scra",icon:Ue.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new d0(null,0,1))}),this._createArrow({className:"scra",icon:Ue.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new d0(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class MN{constructor(e,t,i,n,r,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,n=n|0,r=r|0,o=o|0,a=a|0),this.rawScrollLeft=n,this.rawScrollTop=a,t<0&&(t=0),n+t>i&&(n=i-t),n<0&&(n=0),r<0&&(r=0),a+r>o&&(a=o-r),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=n,this.height=r,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new MN(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new MN(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,n=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:n,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class DC extends pe{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new ne),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new MN(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let n;t?n=new Bx(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):n=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=n}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=Bx.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class LW{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function VM(s,e){const t=e-s;return function(i){return s+t*pue(i)}}function gue(s,e,t){return function(i){return i<t?s(i/t):e((i-t)/(1-t))}}class Bx{constructor(e,t,i,n){this.from=e,this.to=t,this.duration=n,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let r,o;return e<t?(r=e+.75*i,o=t-.75*i):(r=e-.75*i,o=t+.75*i),gue(VM(e,r),VM(o,t),.33)}return VM(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),n=this.scrollTop(t);return new LW(i,n,!1)}return new LW(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return Bx.start(e,t,i)}static start(e,t,i){i=i+10;const n=Date.now()-10;return new Bx(e,t,n,i)}}function mue(s){return Math.pow(s,3)}function pue(s){return 1-mue(1-s)}const _ue=500,xW=50;class bue{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}const fA=class fA{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,n=this._rear;do{const r=n===this._front?e:Math.pow(2,-i);if(e-=r,t+=this._memory[n].score*r,n===this._front)break;n=(this._capacity+n-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(y2){const t=nt(e.browserEvent),i=m3(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let n=null;const r=new bue(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(n=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,n)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const n=Math.abs(e.deltaX),r=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(n,o),1),c=Math.max(Math.min(r,a),1),h=Math.max(n,o),d=Math.max(r,a);h%l===0&&d%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){const t=Number.EPSILON*100;return Math.abs(Math.round(e)-e)<.01+t}};fA.INSTANCE=new fA;let ON=fA;class ZP extends Ud{get onScroll(){return this._onScroll.event}get options(){return this._options}constructor(e,t,i){super(),this._inertialTimeout=null,this._inertialSpeed={X:0,Y:0},this._onScroll=this._register(new ne),this._onWillScroll=this._register(new ne),e.style.overflow="hidden",this._options=wue(t),this._scrollable=i,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const n={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new fue(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new due(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ei(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ei(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ei(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new vg),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Cs(this._mouseWheelToDispose),this._inertialTimeout&&(this._inertialTimeout.dispose(),this._inertialTimeout=null),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Bt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new d0(e))}async _periodicSync(){let e=!1;(this._inertialSpeed.X!==0||this._inertialSpeed.Y!==0)&&(this._scrollable.setScrollPositionNow({scrollTop:this._scrollable.getCurrentScrollPosition().scrollTop-this._inertialSpeed.Y*100,scrollLeft:this._scrollable.getCurrentScrollPosition().scrollLeft-this._inertialSpeed.X*100}),this._inertialSpeed.X*=.9,this._inertialSpeed.Y*=.9,Math.abs(this._inertialSpeed.X)<.01&&(this._inertialSpeed.X=0),Math.abs(this._inertialSpeed.Y)<.01&&(this._inertialSpeed.Y=0),e=this._inertialSpeed.X!==0||this._inertialSpeed.Y!==0),e?(this._inertialTimeout||(this._inertialTimeout=new vg),this._inertialTimeout.cancelAndSet(()=>this._periodicSync(),1e3/60)):(this._inertialTimeout?.dispose(),this._inertialTimeout=null)}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Cs(this._mouseWheelToDispose),e)){const i=n=>{this._onMouseWheel(new d0(n))};this._mouseWheelToDispose.push(ue(this._listenOnDomNode,Re.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;const t=ON.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&o+r===0?o=r=0:Math.abs(r)>=Math.abs(o)?o=0:r=0),this._options.flipAxes&&([r,o]=[o,r]);const a=!Bt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(r){const h=xW*r,d=l.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(c,d)}if(o){const h=xW*o,d=l.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(c,d)}if(c=this._scrollable.validateScrollPosition(c),this._options.inertialScroll&&(o||r)){let h=!1;this._inertialSpeed.X===0&&this._inertialSpeed.Y===0&&(h=!0),this._inertialSpeed.Y=(r<0?-1:1)*Math.abs(r)**1.02,this._inertialSpeed.X=(o<0?-1:1)*Math.abs(o)**1.02,h&&this._periodicSync()}(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),i=!0)}let n=i;!n&&this._options.alwaysConsumeMouseWheel&&(n=!0),!n&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(n=!0),n&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,n=i?" left":"",r=t?" top":"",o=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${n}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${n}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),_ue)}}class vue extends ZP{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new DC({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>na(nt(e),n)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class TR extends ZP{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class XP extends ZP{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new DC({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:n=>na(nt(e),n)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function wue(s){const e={lazyRender:typeof s.lazyRender<"u"?s.lazyRender:!1,className:typeof s.className<"u"?s.className:"",useShadows:typeof s.useShadows<"u"?s.useShadows:!0,handleMouseWheel:typeof s.handleMouseWheel<"u"?s.handleMouseWheel:!0,flipAxes:typeof s.flipAxes<"u"?s.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof s.consumeMouseWheelIfScrollbarIsNeeded<"u"?s.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof s.alwaysConsumeMouseWheel<"u"?s.alwaysConsumeMouseWheel:!1,scrollYToX:typeof s.scrollYToX<"u"?s.scrollYToX:!1,mouseWheelScrollSensitivity:typeof s.mouseWheelScrollSensitivity<"u"?s.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof s.fastScrollSensitivity<"u"?s.fastScrollSensitivity:5,scrollPredominantAxis:typeof s.scrollPredominantAxis<"u"?s.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof s.mouseWheelSmoothScroll<"u"?s.mouseWheelSmoothScroll:!0,inertialScroll:typeof s.inertialScroll<"u"?s.inertialScroll:!1,arrowSize:typeof s.arrowSize<"u"?s.arrowSize:11,listenOnDomNode:typeof s.listenOnDomNode<"u"?s.listenOnDomNode:null,horizontal:typeof s.horizontal<"u"?s.horizontal:1,horizontalScrollbarSize:typeof s.horizontalScrollbarSize<"u"?s.horizontalScrollbarSize:10,horizontalSliderSize:typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:0,horizontalHasArrows:typeof s.horizontalHasArrows<"u"?s.horizontalHasArrows:!1,vertical:typeof s.vertical<"u"?s.vertical:1,verticalScrollbarSize:typeof s.verticalScrollbarSize<"u"?s.verticalScrollbarSize:10,verticalHasArrows:typeof s.verticalHasArrows<"u"?s.verticalHasArrows:!1,verticalSliderSize:typeof s.verticalSliderSize<"u"?s.verticalSliderSize:0,scrollByPage:typeof s.scrollByPage<"u"?s.scrollByPage:!1};return e.horizontalSliderSize=typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof s.verticalSliderSize<"u"?s.verticalSliderSize:e.verticalScrollbarSize,Bt&&(e.className+=" mac"),e}class jK extends pe{constructor(e,t,i,n){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=this._createDragScrollingOperation(e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class GK extends pe{constructor(e,t,i,n,r,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._position=r,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=na(nt(o.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}}class Cue extends jK{_createDragScrollingOperation(e,t){return new yue(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}}class yue extends GK{_getScrollSpeed(){const e=this._context.configuration.options.get(75),t=this._context.configuration.options.get(165).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(75),t=this._getScrollSpeed(),i=this._tick(),n=t*(i/1e3)*e,r=this._position.outsidePosition==="above"?-n:n;this._context.viewModel.viewLayout.deltaScrollNow(0,r),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=kR(this._viewHelper.viewDomNode),h=this._context.configuration.options.get(165).horizontalScrollbarHeight,d=new O2(this._mouseEvent.pos.x,c.y+c.height-h-.1),g=ER(this._viewHelper.viewDomNode,c,d);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,d,g,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=vr.createOutsideEditor(this._position.mouseColumn,new se(a,1),"above",this._position.outsideDistance):l=vr.createOutsideEditor(this._position.mouseColumn,new se(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=na(nt(l.element),()=>this._execute())}}class Sue extends jK{_createDragScrollingOperation(e,t){return new Lue(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}}class Lue extends GK{_getScrollSpeed(){const e=this._context.configuration.options.get(59).typicalFullwidthCharacterWidth,t=this._context.configuration.options.get(165).contentWidth/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(59).typicalFullwidthCharacterWidth,t=this._getScrollSpeed(),i=this._tick(),n=t*(i/1e3)*e*.5,r=this._position.outsidePosition==="left"?-n:n;if(this._context.viewModel.viewLayout.deltaScrollNow(r,0),this._viewHelper.renderNow(),!this._position.position)return;const o=this._position.position.lineNumber;let a;{const l=kR(this._viewHelper.viewDomNode),c=this._context.configuration.options.get(165).horizontalScrollbarHeight,h=new O2(this._mouseEvent.pos.x,l.y+l.height-c-.1),d=ER(this._viewHelper.viewDomNode,l,h);a=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),l,h,d,null)}this._position.outsidePosition==="left"?a=vr.createOutsideEditor(a.mouseColumn,new se(o,a.mouseColumn),"left",this._position.outsideDistance):a=vr.createOutsideEditor(a.mouseColumn,new se(o,a.mouseColumn),"right",this._position.outsideDistance),this._dispatchMouse(a,!0,2),this._animationFrameDisposable=na(nt(a.element),()=>this._execute())}}class QP extends V0{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new Xr(this._context,i),this._mouseDownOperation=this._register(new xue(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(165).height;const n=new Kce(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=ue(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new up(a,!1,this.viewHelper.viewDomNode))}))})),this._register(n.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let r=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{r=a})),this._register(ue(this.viewHelper.viewDomNode,Re.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(n.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,r))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=ON.INSTANCE;let t=0,i=Im.getZoomLevel(),n=!1,r=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(84))return;const c=new d0(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const h=Im.getZoomLevel(),d=c.deltaY>0?1:-1;Im.setZoomLevel(h+d),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=Im.getZoomLevel(),n=a(l),r=0),t=Date.now(),r+=c.deltaY,n&&(Im.setZoomLevel(i+r/5),c.preventDefault(),c.stopPropagation())};this._register(ue(this.viewHelper.viewDomNode,Re.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return Bt?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(165)){const t=this._context.configuration.options.get(165).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const n=new VK(e,t).toPageCoordinates(nt(this.viewHelper.viewDomNode)),r=kR(this.viewHelper.viewDomNode);if(n.y<r.y||n.y>r.y+r.height||n.x<r.x||n.x>r.x+r.width)return null;const o=ER(this.viewHelper.viewDomNode,r,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,n,o,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const n=f0(this.viewHelper.viewDomNode);n&&(i=n.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),n=i.type===6||i.type===7,r=i.type===2||i.type===3||i.type===4,o=i.type===3,a=this._context.configuration.options.get(125),l=i.type===8||i.type===5,c=i.type===9;let h=e.leftButton||e.middleButton;Bt&&e.leftButton&&e.ctrlKey&&(h=!1);const d=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(h&&(n||o&&a))d(),this._mouseDownOperation.start(i.type,e,t);else if(r)e.preventDefault();else if(l){const g=i.detail;h&&this.viewHelper.shouldSuppressMouseDownOnViewZone(g.viewZoneId)&&(d(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(d(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class xue extends pe{constructor(e,t,i,n,r,o){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=n,this._createMouseTarget=r,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new Zce(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new Cue(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._leftRightDragScrolling=this._register(new Sue(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new b7,this._currentSelection=new Yt(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13?t.outsidePosition==="above"||t.outsidePosition==="below"?(this._topBottomDragScrolling.start(t,e),this._leftRightDragScrolling.stop()):(this._leftRightDragScrolling.start(t,e),this._topBottomDragScrolling.stop()):(this._topBottomDragScrolling.stop(),this._leftRightDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(104)&&r.get(42)&&!r.get(28)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);Kf(o)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop(),this._leftRightDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,n=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const d=t.y-e.posy,g=Math.max(n.getCurrentScrollTop()-d,0),_=hC.getZoneAtCoord(this._context,g);if(_){const C=this._helpPositionJumpOverViewZone(_);if(C)return vr.createOutsideEditor(r,C,"above",d)}const b=n.getLineNumberAtVerticalOffset(g);return vr.createOutsideEditor(r,new se(b,1),"above",d)}if(e.posy>t.y+t.height){const d=e.posy-t.y-t.height,g=n.getCurrentScrollTop()+e.relativePos.y,_=hC.getZoneAtCoord(this._context,g);if(_){const C=this._helpPositionJumpOverViewZone(_);if(C)return vr.createOutsideEditor(r,C,"below",d)}const b=n.getLineNumberAtVerticalOffset(g);return vr.createOutsideEditor(r,new se(b,i.getLineMaxColumn(b)),"below",d)}const o=n.getLineNumberAtVerticalOffset(n.getCurrentScrollTop()+e.relativePos.y),a=this._context.configuration.options.get(165),l=a.contentLeft;if(e.relativePos.x<=l){const d=l-e.relativePos.x;return vr.createOutsideEditor(r,new se(o,1),"left",d)}const h=a.minimap.minimapLeft===0?a.width-a.verticalScrollbarWidth:a.minimap.minimapLeft;if(e.relativePos.x>=h){const d=e.relativePos.x-h;return vr.createOutsideEditor(r,new se(o,i.getLineMaxColumn(o)),"right",d)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const n=this._createMouseTarget(e,t);if(!n.position)return null;if(n.type===8||n.type===5){const o=this._helpPositionJumpOverViewZone(n.detail);if(o)return vr.createViewZone(n.type,n.element,n.mouseColumn,o,n.detail)}return n}_helpPositionJumpOverViewZone(e){const t=new se(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,n=e.positionAfter;return i&&n?i.isBefore(t)?i:n:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}const gA=class gA{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>gA.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};gA.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let b7=gA;class gi{get event(){return this.emitter.event}constructor(e,t,i){const n=r=>this.emitter.fire(r);this.emitter=new ne({onWillAddFirstListener:()=>e.addEventListener(t,n,i),onDidRemoveLastListener:()=>e.removeEventListener(t,n,i)})}dispose(){this.emitter.dispose()}}function KK(s,e,t,i){const n=s.getPlainTextToCopy(e,t,ia),r=s.model.getEOL(),o=t&&e.length===1&&e[0].isEmpty(),a=Array.isArray(n)?n:null,l=Array.isArray(n)?n.join(r):n;let c,h=null;if(i&&l.length<65536){const g=s.getRichTextToCopy(e,t);g&&(c=g.html,h=g.mode)}return{isFromEmptySelection:o,multicursorText:a,text:l,html:c,mode:h}}const mA=class mA{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};mA.INSTANCE=new mA;let V1=mA;const PN={getTextData(s){const e=s.getData(eg.text);let t=null;const i=s.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&s.files.length>0?[Array.prototype.slice.call(s.files,0).map(r=>r.name).join(`
`),null]:[e,t]},setTextData(s,e,t,i){s.setData(eg.text,e),typeof t=="string"&&s.setData("text/html",t),s.setData("vscode-editor-data",JSON.stringify(i))}},w1=class w1{constructor(e,t,i,n,r){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=n,this.newlineCountBeforeSelection=r}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),n=e.getSelectionStart(),r=e.getSelectionEnd();let o;if(t){const a=i.substring(0,n),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new w1(i,n,r,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new w1(this.value,this.value.length,this.value.length,null,void 0)}isWrittenToTextArea(e,t){const i=this.value===e.getValue();return t?this.selectionStart===e.getSelectionStart()&&this.selectionEnd===e.getSelectionEnd()&&i:i}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const n=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,n,-1)}if(e>=this.selectionEnd){const n=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,n,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("…")===-1)return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let n=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)n++;return[e,i*t.length,n]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const n=Math.min(Jw(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(eC(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(n,e.value.length-r);const o=t.value.substring(n,t.value.length-r),a=e.selectionStart-n,l=e.selectionEnd-n,c=t.selectionStart-n,h=t.selectionEnd-n;if(c===h){const g=e.selectionStart-n;return{text:o,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}const d=l-a;return{text:o,replacePrevCharCnt:d,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(Jw(e.value,t.value),e.selectionEnd),n=Math.min(eC(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(i,e.value.length-n),o=t.value.substring(i,t.value.length-n);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}static fromScreenReaderContentState(e){return new w1(e.value,e.selectionStart,e.selectionEnd,e.selection,e.newlineCountBeforeSelection)}};w1.EMPTY=new w1("",0,0,null,void 0);let Qr=w1;const JP=(function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const s=new Uint8Array(16),e=[];for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(s),s[6]=s[6]&15|64,s[8]=s[8]&63|128;let i=0,n="";return n+=e[s[i++]],n+=e[s[i++]],n+=e[s[i++]],n+=e[s[i++]],n+="-",n+=e[s[i++]],n+=e[s[i++]],n+="-",n+=e[s[i++]],n+=e[s[i++]],n+="-",n+=e[s[i++]],n+=e[s[i++]],n+="-",n+=e[s[i++]],n+=e[s[i++]],n+=e[s[i++]],n+=e[s[i++]],n+=e[s[i++]],n+=e[s[i++]],n}})();function kue(s){return`${s}-${JP()}`}var Eue=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},kW=function(s,e){return function(t,i){e(t,i,s)}},BN;(function(s){s.Tap="-monaco-textarea-synthetic-tap"})(BN||(BN={}));class Tue{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let v7=class extends pe{get textAreaState(){return this._textAreaState}constructor(e,t,i,n,r,o){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=n,this._accessibilityService=r,this._logService=o,this._onFocus=this._register(new ne),this.onFocus=this._onFocus.event,this._onBlur=this._register(new ne),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new ne),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new ne),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new ne),this.onCut=this._onCut.event,this._onPaste=this._register(new ne),this.onPaste=this._onPaste.event,this._onType=this._register(new ne),this.onType=this._onType.event,this._onCompositionStart=this._register(new ne),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new ne),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new ne),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new ne),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new qs),this._asyncTriggerCut=this._register(new Or(()=>this._onCut.fire(),0)),this._textAreaState=Qr.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Ie.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new Or(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new Mi(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new Mi(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new Tue;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const d=Qr.readFromTextArea(this._textArea,this._textAreaState),g=Qr.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(g),this._onCompositionUpdate.fire(l);return}const h=c.handleCompositionUpdate(l.data);this._textAreaState=Qr.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(h),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const d=Qr.readFromTextArea(this._textArea,this._textAreaState),g=Qr.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(g),this._onCompositionEnd.fire();return}const h=c.handleCompositionUpdate(l.data);this._textAreaState=Qr.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(h),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=Qr.readFromTextArea(this._textArea,this._textAreaState),h=Qr.deduceInput(this._textAreaState,c,this._OS===2);h.replacePrevCharCnt===0&&h.text.length===1&&(xs(h.text.charCodeAt(0))||h.text.charCodeAt(0)===127)||(this._textAreaState=c,(h.text!==""||h.replacePrevCharCnt!==0||h.replaceNextCharCnt!==0||h.positionDelta!==0)&&(l.inputType==="insertFromPaste"?this._onPaste.fire({text:h.text,metadata:V1.INSTANCE.get(h.text)}):this._onType.fire(h)))})),this._register(this._textArea.onCut(l=>{this._logService.trace("TextAreaInput#onCut",l),this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._logService.trace("TextAreaInput#onCopy",l),this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._logService.trace("TextAreaInput#onPaste",l),this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,h]=PN.getTextData(l.clipboardData);this._logService.trace("TextAreaInput#onPaste with id : ",h?.id," with text.length: ",c.length),c&&(h=h||V1.INSTANCE.get(c),this._logService.trace("TextAreaInput#onPaste (before onPaste)"),this._onPaste.fire({text:c,metadata:h}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new Or(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return ue(this._textArea.ownerDocument,"selectionchange",t=>{if(Vm.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),n=i-e;if(e=i,n<5)return;const r=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(c[0],c[1],c[2]),d=this._textAreaState.deduceEditorPosition(l),g=this._host.deduceModelPosition(d[0],d[1],d[2]),_=new Yt(h.lineNumber,h.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(_)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.isWrittenToTextArea(this._textArea,this._hasFocus)||this._logService.trace(`writeTextAreaState(reason: ${e})`),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy();let i;this._logService.getLevel()===Hs.Trace&&(i=JP());const n={version:1,id:i,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};V1.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&PN.setTextData(e.clipboardData,t.text,t.html,n),this._logService.trace("TextAreaEditContextInput#_ensureClipboardGetsEditorSelection with id : ",i," with text.length: ",t.text.length)}};v7=Eue([kW(4,Ol),kW(5,Lo)],v7);class Due extends pe{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this._onSyntheticTap=this._register(new ne),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this.onKeyDown=this._register(new gi(this._actual,"keydown")).event,this.onKeyPress=this._register(new gi(this._actual,"keypress")).event,this.onKeyUp=this._register(new gi(this._actual,"keyup")).event,this.onCompositionStart=this._register(new gi(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new gi(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new gi(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new gi(this._actual,"beforeinput")).event,this.onInput=this._register(new gi(this._actual,"input")).event,this.onCut=this._register(new gi(this._actual,"cut")).event,this.onCopy=this._register(new gi(this._actual,"copy")).event,this.onPaste=this._register(new gi(this._actual,"paste")).event,this.onFocus=this._register(new gi(this._actual,"focus")).event,this.onBlur=this._register(new gi(this._actual,"blur")).event,this._register(this.onKeyDown(()=>Vm.onKeyDown())),this._register(this.onBeforeInput(()=>Vm.onBeforeInput())),this._register(this.onInput(()=>Vm.onInput())),this._register(this.onKeyUp(()=>Vm.onKeyUp())),this._register(ue(this._actual,BN.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=f0(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Us()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const n=this._actual;let r=null;const o=f0(n);o?r=o.activeElement:r=Us();const a=nt(r),l=r===n,c=n.selectionStart,h=n.selectionEnd;if(l&&c===t&&h===i){Va&&a.parent!==a&&n.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(t,i),Va&&a.parent!==a&&n.focus();return}try{const d=ase(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(t,i),lse(n,d)}catch{}}}class Nue extends QP{constructor(e,t,i){super(e,t,i),this._register(Co.addTarget(this.viewHelper.linesContentDomNode)),this._register(ue(this.viewHelper.linesContentDomNode,ji.Tap,r=>this.onTap(r))),this._register(ue(this.viewHelper.linesContentDomNode,ji.Change,r=>this.onChange(r))),this._register(ue(this.viewHelper.linesContentDomNode,ji.Contextmenu,r=>this._onContextMenu(new up(r,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(ue(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const n=new Yce(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,r=>this._onMouseMove(r))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,(r,o)=>this._onMouseDown(r,o)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new up(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class Iue extends QP{constructor(e,t,i){super(e,t,i),this._register(Co.addTarget(this.viewHelper.linesContentDomNode)),this._register(ue(this.viewHelper.linesContentDomNode,ji.Tap,n=>this.onTap(n))),this._register(ue(this.viewHelper.linesContentDomNode,ji.Change,n=>this.onChange(n))),this._register(ue(this.viewHelper.linesContentDomNode,ji.Contextmenu,n=>this._onContextMenu(new up(n,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new up(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(BN.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class Aue extends pe{constructor(e,t,i){super(),(Nd||Qee&&Mj)&&S2.pointerEvents?this.handler=this._register(new Nue(e,t,i)):Ri.TouchEvent?this.handler=this._register(new Iue(e,t,i)):this.handler=this._register(new QP(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}function Rue(s,e,t){let i=0;for(let r=0;r<s.length;r++)s.charAt(r)==="	"?i=wn.nextIndentTabStop(i,e):i++;let n="";if(!t){const r=Math.floor(i/e);i=i%e;for(let o=0;o<r;o++)n+="	"}for(let r=0;r<i;r++)n+=" ";return n}function YK(s,e,t){let i=Pa(s);return i===-1&&(i=s.length),Rue(s.substring(0,i),e,t)+s.substring(i)}const Mue=()=>!0,Oue=()=>!1,Pue=s=>s===" "||s==="	";class Lv{static shouldRecreate(e){return e.hasChanged(165)||e.hasChanged(148)||e.hasChanged(45)||e.hasChanged(85)||e.hasChanged(88)||e.hasChanged(89)||e.hasChanged(10)||e.hasChanged(11)||e.hasChanged(15)||e.hasChanged(13)||e.hasChanged(14)||e.hasChanged(20)||e.hasChanged(145)||e.hasChanged(141)||e.hasChanged(59)||e.hasChanged(104)||e.hasChanged(147)||e.hasChanged(93)}constructor(e,t,i,n){this.languageConfigurationService=n,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=i.options,o=r.get(165),a=r.get(59);this.readOnly=r.get(104),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(132),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=r.get(145),this.trimWhitespaceOnDelete=r.get(141),this.wordSeparators=r.get(148),this.emptySelectionClipboard=r.get(45),this.copyWithSyntaxHighlighting=r.get(31),this.multiCursorMergeOverlapping=r.get(85),this.multiCursorPaste=r.get(88),this.multiCursorLimit=r.get(89),this.autoClosingBrackets=r.get(10),this.autoClosingComments=r.get(11),this.autoClosingQuotes=r.get(15),this.autoClosingDelete=r.get(13),this.autoClosingOvertype=r.get(14),this.autoSurround=r.get(20),this.autoIndent=r.get(16),this.wordSegmenterLocales=r.get(147),this.overtypeOnPaste=r.get(93),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const h of l)this.surroundingPairs[h.open]=h.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=c?.blockCommentStartToken??null}get electricChars(){if(!this._electricChars){this._electricChars={};const e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}get inputMode(){return s7.getInputMode()}onElectricCharacter(e,t,i){const n=x1(t,i-1),r=this.languageConfigurationService.getLanguageConfiguration(n.languageId).electricCharacter;return r?r.onElectricCharacter(e,n,i-n.firstCharOffset):null}normalizeIndentation(e){return YK(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return Pue;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return Mue;case"never":return Oue}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return n=>i.indexOf(n)!==-1}visibleColumnFromColumn(e,t){return wn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const n=wn.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),r=e.getLineMinColumn(t);if(n<r)return r;const o=e.getLineMaxColumn(t);return n>o?o:n}}class Ht{static fromModelState(e){return new Bue(e)}static fromViewState(e){return new Fue(e)}static fromModelSelection(e){const t=Yt.liftSelection(e),i=new nr(ie.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return Ht.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class Bue{constructor(e){this.modelState=e,this.viewState=null}}class Fue{constructor(e){this.modelState=null,this.viewState=e}}class nr{constructor(e,t,i,n,r){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=n,this.leftoverVisibleColumns=r,this._singleCursorStateBrand=void 0,this.selection=nr._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,n){return e?new nr(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new se(t,i),n):new nr(new ie(t,i,t,i),0,n,new se(t,i),n)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Yt.fromPositions(e.getStartPosition(),t):Yt.fromPositions(e.getEndPosition(),t)}}class yo{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function hp(s){return s==="'"||s==='"'||s==="`"}class s1{static columnSelect(e,t,i,n,r,o){const a=Math.abs(r-i)+1,l=i>r,c=n>o,h=n<o,d=[];for(let g=0;g<a;g++){const _=i+(l?-g:g),b=e.columnFromVisibleColumn(t,_,n),C=e.columnFromVisibleColumn(t,_,o),S=e.visibleColumnFromColumn(t,new se(_,b)),E=e.visibleColumnFromColumn(t,new se(_,C));h&&(S>o||E<n)||c&&(E>n||S<o)||d.push(new nr(new ie(_,b,_,b),0,0,new se(_,C),0))}if(d.length===0)for(let g=0;g<a;g++){const _=i+(l?-g:g),b=t.getLineMaxColumn(_);d.push(new nr(new ie(_,b,_,b),0,0,new se(_,b),0))}return{viewStates:d,reversed:l,fromLineNumber:i,fromVisualColumn:n,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,i){let n=i.toViewVisualColumn;return n>0&&n--,s1.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,n)}static columnSelectRight(e,t,i){let n=0;const r=Math.min(i.fromViewLineNumber,i.toViewLineNumber),o=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),h=e.visibleColumnFromColumn(t,new se(l,c));n=Math.max(n,h)}let a=i.toViewVisualColumn;return a<n&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,n){const r=n?e.pageSize:1,o=Math.max(1,i.toViewLineNumber-r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}static columnSelectDown(e,t,i,n){const r=n?e.pageSize:1,o=Math.min(t.getLineCount(),i.toViewLineNumber+r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}}class Aa{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Yt.fromPositions(n.getEndPosition())}}class w7{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){const i=this._range.getStartPosition(),n=this._range.getEndPosition(),r=n.lineNumber,o=this._text.length+(this._range.isEmpty()?0:-1);let a=ZK(e,n,o);a.lineNumber>r&&(a=new se(r,e.getLineMaxColumn(r)));const l=ie.fromPositions(i,a);t.addTrackedEditOperation(l,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Yt.fromPositions(n.getEndPosition())}}class ID{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Yt.fromPositions(n.getStartPosition())}}class FN{constructor(e,t,i,n,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=n,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Yt.fromPositions(n.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class Vue{constructor(e){this._range=e}getEditOperations(e,t){const i=e.getValueInRange(this._range),n=this._range.getEndPosition(),r=n.lineNumber;let o=ZK(e,n,i.length);o.lineNumber>r&&(o=new se(r,e.getLineMaxColumn(r)));const a=ie.fromPositions(n,o);t.addTrackedEditOperation(a,"")}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Yt.fromPositions(n.getEndPosition())}}class Hue{constructor(e,t,i,n=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=n,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function ZK(s,e,t){if(t<0)throw new Error("Unexpected negative delta");const i=s.getLineCount();let n=new se(i,s.getLineMaxColumn(i));for(let r=e.lineNumber;r<=i;r++)if(r===e.lineNumber){const o=t-s.getLineMaxColumn(e.lineNumber)+e.column;if(o<=0){n=new se(e.lineNumber,e.column+t);break}t=o}else{const o=t-s.getLineMaxColumn(r);if(o<=0){n=new se(r,t);break}t=o}return n}class HM{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class ui{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-nG(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new se(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const n=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=Px.atomicPosition(r,t.column-1,i,0);if(o!==-1&&o+1>=n)return new se(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,i){const n=e.stickyTabStops?ui.leftPositionAtomicSoftTabs(t,i,e.tabSize):ui.leftPosition(t,i);return new HM(n.lineNumber,n.column,0)}static moveLeft(e,t,i,n,r){let o,a;if(i.hasSelection()&&!n)o=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(r-1)),c=t.normalizePosition(ui.clipPositionColumn(l,t),0),h=ui.left(e,t,c);o=h.lineNumber,a=h.column}return i.move(n,o,a,0)}static clipPositionColumn(e,t){return new se(e.lineNumber,ui.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+rP(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new se(t,i)}static rightPositionAtomicSoftTabs(e,t,i,n,r){if(i<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=Px.atomicPosition(o,i-1,n,1);if(a!==-1)return new se(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const n=e.stickyTabStops?ui.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):ui.rightPosition(t,i.lineNumber,i.column);return new HM(n.lineNumber,n.column,0)}static moveRight(e,t,i,n,r){let o,a;if(i.hasSelection()&&!n)o=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,r-1),c=t.normalizePosition(ui.clipPositionColumn(l,t),1),h=ui.right(e,t,c);o=h.lineNumber,a=h.column}return i.move(n,o,a,0)}static vertical(e,t,i,n,r,o,a,l){const c=wn.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize)+r,h=t.getLineCount(),d=i===1&&n===1,g=i===h&&n===t.getLineMaxColumn(i),_=o<i?d:g;if(i=o,i<1?(i=1,a?n=t.getLineMinColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):i>h?(i=h,a?n=t.getLineMaxColumn(i):n=Math.min(t.getLineMaxColumn(i),n)):n=e.columnFromVisibleColumn(t,i,c),_?r=0:r=c-wn.visibleColumnFromColumn(t.getLineContent(i),n,e.tabSize),l!==void 0){const b=new se(i,n),C=t.normalizePosition(b,l);r=r+(n-C.column),i=C.lineNumber,n=C.column}return new HM(i,n,r)}static down(e,t,i,n,r,o,a){return this.vertical(e,t,i,n,r,i+o,a,4)}static moveDown(e,t,i,n,r){let o,a;i.hasSelection()&&!n?(o=i.selection.endLineNumber,a=i.selection.endColumn):(o=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=ui.down(e,t,o+l,a,i.leftoverVisibleColumns,r,!0),t.normalizePosition(new se(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return i.move(n,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const n=i.selection,r=ui.down(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=ui.down(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new nr(new ie(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new se(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,i,n,r,o,a){return this.vertical(e,t,i,n,r,i-o,a,3)}static moveUp(e,t,i,n,r){let o,a;i.hasSelection()&&!n?(o=i.selection.startLineNumber,a=i.selection.startColumn):(o=i.position.lineNumber,a=i.position.column);const l=ui.up(e,t,o,a,i.leftoverVisibleColumns,r,!0);return i.move(n,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const n=i.selection,r=ui.up(e,t,n.selectionStartLineNumber,n.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=ui.up(e,t,n.positionLineNumber,n.positionColumn,i.leftoverVisibleColumns,1,!1);return new nr(new ie(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new se(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,n){let r=i.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return i.move(n,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,i,n){const r=t.getLineCount();let o=i.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return i.move(n,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,i,n){const r=i.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o;let l;return i.position.column===a?l=o:l=a,i.move(n,r,l,0)}static moveToEndOfLine(e,t,i,n,r){const o=i.position.lineNumber,a=t.getLineMaxColumn(o);return i.move(n,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,n){return i.move(n,1,1,0)}static moveToEndOfBuffer(e,t,i,n){const r=t.getLineCount(),o=t.getLineMaxColumn(r);return i.move(n,r,o,0)}}class b0{static deleteRight(e,t,i,n){const r=[];let o=e!==3;for(let a=0,l=n.length;a<l;a++){const c=n[a],h=this.getDeleteRightRange(c,i,t);if(h.isEmpty()){r[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(o=!0),r[a]=new Aa(h,"")}return[o,r]}static getDeleteRightRange(e,t,i){if(!e.isEmpty())return e;const n=e.getPosition(),r=ui.right(i,t,n);if(i.trimWhitespaceOnDelete&&r.lineNumber!==n.lineNumber){const o=t.getLineFirstNonWhitespaceColumn(n.lineNumber)>0,a=t.getLineFirstNonWhitespaceColumn(r.lineNumber);if(o&&a>0)return new ie(r.lineNumber,a,n.lineNumber,n.column)}return new ie(r.lineNumber,r.column,n.lineNumber,n.column)}static isAutoClosingPairDelete(e,t,i,n,r,o,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const h=o[l],d=h.getPosition();if(!h.isEmpty())return!1;const g=r.getLineContent(d.lineNumber);if(d.column<2||d.column>=g.length+1)return!1;const _=g.charAt(d.column-2),b=n.get(_);if(!b)return!1;if(hp(_)){if(i==="never")return!1}else if(t==="never")return!1;const C=g.charAt(d.column-1);let S=!1;for(const E of b)E.open===_&&E.close===C&&(S=!0);if(!S)return!1;if(e==="auto"){let E=!1;for(let x=0,T=a.length;x<T;x++){const N=a[x];if(d.lineNumber===N.startLineNumber&&d.column===N.startColumn){E=!0;break}}if(!E)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const n=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].getPosition(),l=new ie(a.lineNumber,a.column-1,a.lineNumber,a.column+1);n[r]=new Aa(l,"")}return[!0,n]}static deleteLeft(e,t,i,n,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,n,r))return this._runAutoClosingPairDelete(t,i,n);const o=[];let a=e!==2;for(let l=0,c=n.length;l<c;l++){const h=b0.getDeleteLeftRange(n[l],i,t);if(h.isEmpty()){o[l]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),o[l]=new Aa(h,"")}return[a,o]}static getDeleteLeftRange(e,t,i){if(!e.isEmpty())return e;const n=e.getPosition();if(i.useTabStops&&n.column>1){const r=t.getLineContent(n.lineNumber),o=Pa(r),a=o===-1?r.length+1:o+1;if(n.column<=a){const l=i.visibleColumnFromColumn(t,n),c=wn.prevIndentTabStop(l,i.indentSize),h=i.columnFromVisibleColumn(t,n.lineNumber,c);return new ie(n.lineNumber,h,n.lineNumber,n.column)}}return ie.fromPositions(b0.getPositionAfterDeleteLeft(n,t),n)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=$ie(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new se(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const n=[];let r=null;i.sort((o,a)=>se.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=i.length;o<a;o++){const l=i[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let h,d,g,_;c.lineNumber<t.getLineCount()?(h=c.lineNumber,d=1,g=c.lineNumber+1,_=1):c.lineNumber>1&&r?.endLineNumber!==c.lineNumber?(h=c.lineNumber-1,d=t.getLineMaxColumn(c.lineNumber-1),g=c.lineNumber,_=t.getLineMaxColumn(c.lineNumber)):(h=c.lineNumber,d=1,g=c.lineNumber,_=t.getLineMaxColumn(c.lineNumber));const b=new ie(h,d,g,_);r=b,b.isEmpty()?n[o]=null:n[o]=new Aa(b,"")}else n[o]=null;else n[o]=new Aa(l,"")}return new yo(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Vn{static _createWord(e,t,i,n,r){return{start:n,end:r,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(n,e,i)}static _doFindPreviousWordOnLine(e,t,i){let n=0;const r=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let o=i.column-2;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return this._createIntlWord(r,l);if(l===0){if(n===2)return this._createWord(e,n,l,o+1,this._findEndOfWord(e,t,n,o+1));n=1}else if(l===2){if(n===1)return this._createWord(e,n,l,o+1,this._findEndOfWord(e,t,n,o+1));n=2}else if(l===1&&n!==0)return this._createWord(e,n,l,o+1,this._findEndOfWord(e,t,n,o+1))}return n!==0?this._createWord(e,n,1,0,this._findEndOfWord(e,t,n,0)):null}static _findEndOfWord(e,t,i,n){const r=t.findNextIntlWordAtOrAfterOffset(e,n),o=e.length;for(let a=n;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index+r.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return o}static _findNextWordOnLine(e,t,i){const n=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(n,e,i)}static _doFindNextWordOnLine(e,t,i){let n=0;const r=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index)return this._createIntlWord(o,c);if(c===0){if(n===2)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a);n=1}else if(c===2){if(n===1)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a);n=2}else if(c===1&&n!==0)return this._createWord(e,n,c,this._findStartOfWord(e,t,n,a-1),a)}return n!==0?this._createWord(e,n,1,this._findStartOfWord(e,t,n,r-1),r):null}static _findStartOfWord(e,t,i,n){const r=t.findPrevIntlWordBeforeOrAtOffset(e,n);for(let o=n;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return o;if(l===1||i===1&&l===2||i===2&&l===0)return o+1}return 0}static moveWordLeft(e,t,i,n,r){let o=i.lineNumber,a=i.column;a===1&&o>1&&(o=o-1,a=t.getLineMaxColumn(o));let l=Vn._findPreviousWordOnLine(e,t,new se(o,a));if(n===0)return new se(o,l?l.start+1:1);if(n===1)return!r&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Vn._findPreviousWordOnLine(e,t,new se(o,l.start+1))),new se(o,l?l.start+1:1);if(n===3){for(;l&&l.wordType===2;)l=Vn._findPreviousWordOnLine(e,t,new se(o,l.start+1));return new se(o,l?l.start+1:1)}return l&&a<=l.end+1&&(l=Vn._findPreviousWordOnLine(e,t,new se(o,l.start+1))),new se(o,l?l.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===1)return i>1?new se(i-1,e.getLineMaxColumn(i-1)):t;const r=e.getLineContent(i);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new se(i,o);if(a===45&&l!==45)return new se(i,o);if((zv(a)||fT(a))&&Em(l))return new se(i,o);if(Em(a)&&Em(l)&&o+1<n){const c=r.charCodeAt(o);if(zv(c)||fT(c))return new se(i,o)}}return new se(i,1)}static moveWordRight(e,t,i,n){let r=i.lineNumber,o=i.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=Vn._findNextWordOnLine(e,t,new se(r,o));if(n===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Vn._findNextWordOnLine(e,t,new se(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(n===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=Vn._findNextWordOnLine(e,t,new se(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=Vn._findNextWordOnLine(e,t,new se(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new se(r,o)}static _moveWordPartRight(e,t){const i=t.lineNumber,n=e.getLineMaxColumn(i);if(t.column===n)return i<e.getLineCount()?new se(i+1,1):t;const r=e.getLineContent(i);for(let o=t.column+1;o<n;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new se(i,o);if(a!==45&&l===45)return new se(i,o);if((zv(a)||fT(a))&&Em(l))return new se(i,o);if(Em(a)&&Em(l)&&o+1<n){const c=r.charCodeAt(o);if(zv(c)||fT(c))return new se(i,o)}}return new se(i,n)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-2,r=I0(i,n);return r+1<n?new ie(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,n=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(b0.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const d=e.selection.getPosition();return new ie(d.lineNumber,d.column-1,d.lineNumber,d.column+1)}const a=new se(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const d=this._deleteWordLeftWhitespace(n,a);if(d)return d}let h=Vn._findPreviousWordOnLine(i,n,a);return t===0?h?c=h.start+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l)):(h&&c<=h.end+1&&(h=Vn._findPreviousWordOnLine(i,n,new se(l,h.start+1))),h?c=h.end+1:c>1?c=1:(l--,c=n.getLineMaxColumn(l))),new ie(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const n=new se(i.positionLineNumber,i.positionColumn),r=this._deleteInsideWordWhitespace(t,n);return r||this._deleteInsideWordDetermineDeleteRange(e,t,n)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=i.length;if(n===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,r))return null;let o=Math.min(t.column-1,n-1);if(!this._charAtIsWhitespace(i,o))return null;for(;r>0&&this._charAtIsWhitespace(i,r-1);)r--;for(;o+1<n&&this._charAtIsWhitespace(i,o+1);)o++;return new ie(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const n=t.getLineContent(i.lineNumber),r=n.length;if(r===0)return i.lineNumber>1?new ie(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new ie(i.lineNumber,1,i.lineNumber+1,1):new ie(i.lineNumber,1,i.lineNumber,1);const o=d=>d.start+1<=i.column&&i.column<=d.end+1,a=(d,g)=>(d=Math.min(d,i.column),g=Math.max(g,i.column),new ie(i.lineNumber,d,i.lineNumber,g)),l=d=>{let g=d.start+1,_=d.end+1,b=!1;for(;_-1<r&&this._charAtIsWhitespace(n,_-1);)b=!0,_++;if(!b)for(;g>1&&this._charAtIsWhitespace(n,g-2);)g--;return a(g,_)},c=Vn._findPreviousWordOnLine(e,t,i);if(c&&o(c))return l(c);const h=Vn._findNextWordOnLine(e,t,i);return h&&o(h)?l(h):c&&h?a(c.end+1,h.start+1):c?a(c.start+1,c.end+1):h?a(h.start+1,h.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=Vn._moveWordPartLeft(e,i);return new ie(i.lineNumber,i.column,n.lineNumber,n.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let n=t;n<i;n++){const r=e.charAt(n);if(r!==" "&&r!=="	")return n}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),n=t.column-1,r=this._findFirstNonWhitespaceChar(i,n);return n+1<r?new ie(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,n=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new se(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const h=n.getLineCount(),d=n.getLineMaxColumn(l);if(l===h&&c===d)return null;if(o){const _=this._deleteWordRightWhitespace(n,a);if(_)return _}let g=Vn._findNextWordOnLine(i,n,a);return t===2?g?c=g.end+1:c<d||l===h?c=d:(l++,g=Vn._findNextWordOnLine(i,n,new se(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l)):(g&&c>=g.start+1&&(g=Vn._findNextWordOnLine(i,n,new se(l,g.end+1))),g?c=g.start+1:c<d||l===h?c=d:(l++,g=Vn._findNextWordOnLine(i,n,new se(l,1)),g?c=g.start+1:c=n.getLineMaxColumn(l))),new ie(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),n=Vn._moveWordPartRight(e,i);return new ie(i.lineNumber,i.column,n.lineNumber,n.column)}static _createWordAtPosition(e,t,i){const n=new ie(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(n),startColumn:n.startColumn,endColumn:n.endColumn}}static getWordAtPosition(e,t,i,n){const r=rC(t,i),o=Vn._findPreviousWordOnLine(r,e,n);if(o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end)return Vn._createWordAtPosition(e,n.lineNumber,o);const a=Vn._findNextWordOnLine(r,e,n);return a&&a.wordType===1&&a.start<=n.column-1&&n.column-1<=a.end?Vn._createWordAtPosition(e,n.lineNumber,a):null}static word(e,t,i,n,r){const o=rC(e.wordSeparators,e.wordSegmenterLocales),a=Vn._findPreviousWordOnLine(o,t,r),l=Vn._findNextWordOnLine(o,t,r);if(!n){let _,b;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(_=a.start+1,b=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(_=l.start+1,b=l.end+1):(a?_=a.end+1:_=1,l?b=l.start+1:b=t.getLineMaxColumn(r.lineNumber)),new nr(new ie(r.lineNumber,_,r.lineNumber,b),1,0,new se(r.lineNumber,b),0)}let c,h;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,h=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,h=l.end+1):(c=r.column,h=r.column);const d=r.lineNumber;let g;if(i.selectionStart.containsPosition(r))g=i.selectionStart.endColumn;else if(r.isBeforeOrEqual(i.selectionStart.getStartPosition())){g=c;const _=new se(d,g);i.selectionStart.containsPosition(_)&&(g=i.selectionStart.endColumn)}else{g=h;const _=new se(d,g);i.selectionStart.containsPosition(_)&&(g=i.selectionStart.startColumn)}return i.move(!0,d,g,0)}}class Kr{static addCursorDown(e,t,i){const n=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];n[r++]=new Ht(l.modelState,l.viewState),i?n[r++]=Ht.fromModelState(ui.translateDown(e.cursorConfig,e.model,l.modelState)):n[r++]=Ht.fromViewState(ui.translateDown(e.cursorConfig,e,l.viewState))}return n}static addCursorUp(e,t,i){const n=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];n[r++]=new Ht(l.modelState,l.viewState),i?n[r++]=Ht.fromModelState(ui.translateUp(e.cursorConfig,e.model,l.modelState)):n[r++]=Ht.fromViewState(ui.translateUp(e.cursorConfig,e,l.viewState))}return n}static moveToBeginningOfLine(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];n[r]=this._moveToLineStart(e,a,i)}return n}static _moveToLineStart(e,t,i){const n=t.viewState.position.column,r=t.modelState.position.column,o=n===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(n===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return Ht.fromViewState(ui.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return Ht.fromModelState(ui.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,i,n)}return r}static _moveToLineEnd(e,t,i,n){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),h=o-r.column===c-l.column;return a||h?this._moveToLineEndByModel(e,t,i,n):this._moveToLineEndByView(e,t,i,n)}static _moveToLineEndByView(e,t,i,n){return Ht.fromViewState(ui.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,n))}static _moveToLineEndByModel(e,t,i,n){return Ht.fromModelState(ui.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,n))}static expandLineSelection(e,t){const i=[];for(let n=0,r=t.length;n<r;n++){const o=t[n],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,h;c===l?h=e.model.getLineMaxColumn(l):(c++,h=1),i[n]=Ht.fromModelState(new nr(new ie(a,1,a,1),0,0,new se(c,h),0))}return i}static moveToBeginningOfBuffer(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];n[r]=Ht.fromModelState(ui.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static moveToEndOfBuffer(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];n[r]=Ht.fromModelState(ui.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return n}static selectAll(e,t){const i=e.model.getLineCount(),n=e.model.getLineMaxColumn(i);return Ht.fromModelState(new nr(new ie(1,1,1,1),0,0,new se(i,n),0))}static line(e,t,i,n,r){const o=e.model.validatePosition(n),a=r?e.coordinatesConverter.validateViewPosition(new se(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!i){const c=e.model.getLineCount();let h=o.lineNumber+1,d=1;return h>c&&(h=c,d=e.model.getLineMaxColumn(h)),Ht.fromModelState(new nr(new ie(o.lineNumber,1,h,d),2,0,new se(h,d),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Ht.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let h=a.lineNumber+1,d=1;return h>c&&(h=c,d=e.getLineMaxColumn(h)),Ht.fromViewState(t.viewState.move(!0,h,d,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Ht.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,n){const r=e.model.validatePosition(n);return Ht.fromModelState(Vn.word(e.cursorConfig,e.model,t.modelState,i,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Ht(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,n=t.viewState.position.column;return Ht.fromViewState(new nr(new ie(i,n,i,n),0,0,new se(i,n),0))}static moveTo(e,t,i,n,r){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,n);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,n,r)}const o=e.model.validatePosition(n),a=r?e.coordinatesConverter.validateViewPosition(new se(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Ht.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,n,r,o){switch(i){case 0:return o===4?this._moveHalfLineLeft(e,t,n):this._moveLeft(e,t,n,r);case 1:return o===4?this._moveHalfLineRight(e,t,n):this._moveRight(e,t,n,r);case 2:return o===2?this._moveUpByViewLines(e,t,n,r):this._moveUpByModelLines(e,t,n,r);case 3:return o===2?this._moveDownByViewLines(e,t,n,r):this._moveDownByModelLines(e,t,n,r);case 4:return o===2?t.map(a=>Ht.fromViewState(ui.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>Ht.fromModelState(ui.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 5:return o===2?t.map(a=>Ht.fromViewState(ui.moveToNextBlankLine(e.cursorConfig,e,a.viewState,n))):t.map(a=>Ht.fromModelState(ui.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,n)));case 6:return this._moveToViewMinColumn(e,t,n);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,n);case 8:return this._moveToViewCenterColumn(e,t,n);case 9:return this._moveToViewMaxColumn(e,t,n);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,n);default:return null}}static viewportMove(e,t,i,n,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],n,l,c)]}case 14:{const l=[];for(let c=0,h=t.length;c<h;c++){const d=t[c];l[c]=this.findPositionInViewportIfOutside(e,d,o,n)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,n){const r=t.viewState.position.lineNumber;if(i.startLineNumber<=r&&r<=i.endLineNumber-1)return new Ht(t.modelState,t.viewState);{let o;r>i.endLineNumber-1?o=i.endLineNumber-1:r<i.startLineNumber?o=i.startLineNumber:o=r;const a=ui.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Ht.fromViewState(t.viewState.move(n,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.min(t.endLineNumber,n+i-1)}static _lastLineNumberInRange(e,t,i){let n=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(n)&&n++,Math.max(n,t.endLineNumber-i+1)}static _moveLeft(e,t,i,n){return t.map(r=>{const a=e.getTextDirection(r.viewState.position.lineNumber)===El.RTL;return Ht.fromViewState(a?ui.moveRight(e.cursorConfig,e,r.viewState,i,n):ui.moveLeft(e.cursorConfig,e,r.viewState,i,n))})}static _moveHalfLineLeft(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);n[r]=Ht.fromViewState(ui.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveRight(e,t,i,n){return t.map(r=>{const a=e.getTextDirection(r.viewState.position.lineNumber)===El.RTL;return Ht.fromViewState(a?ui.moveLeft(e.cursorConfig,e,r.viewState,i,n):ui.moveRight(e.cursorConfig,e,r.viewState,i,n))})}static _moveHalfLineRight(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);n[r]=Ht.fromViewState(ui.moveRight(e.cursorConfig,e,a.viewState,i,c))}return n}static _moveDownByViewLines(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Ht.fromViewState(ui.moveDown(e.cursorConfig,e,l.viewState,i,n))}return r}static _moveDownByModelLines(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Ht.fromModelState(ui.moveDown(e.cursorConfig,e.model,l.modelState,i,n))}return r}static _moveUpByViewLines(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Ht.fromViewState(ui.moveUp(e.cursorConfig,e,l.viewState,i,n))}return r}static _moveUpByModelLines(e,t,i,n){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Ht.fromModelState(ui.moveUp(e.cursorConfig,e.model,l.modelState,i,n))}return r}static _moveToViewPosition(e,t,i,n,r){return Ht.fromViewState(t.viewState.move(i,n,r,0))}static _moveToModelPosition(e,t,i,n,r){return Ht.fromModelState(t.modelState.move(i,n,r,0))}static _moveToViewMinColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewCenterColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewMaxColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}static _moveToViewLastNonWhitespaceColumn(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);n[r]=this._moveToViewPosition(e,a,i,l,c)}return n}}var VN;(function(s){const e=function(i){if(!Xo(i))return!1;const n=i;return!(!rr(n.to)||!mc(n.select)&&!Ej(n.select)||!mc(n.by)&&!rr(n.by)||!mc(n.value)&&!D0(n.value))};s.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},s.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let n;switch(i.to){case s.RawDirection.Left:n=0;break;case s.RawDirection.Right:n=1;break;case s.RawDirection.Up:n=2;break;case s.RawDirection.Down:n=3;break;case s.RawDirection.PrevBlankLine:n=4;break;case s.RawDirection.NextBlankLine:n=5;break;case s.RawDirection.WrappedLineStart:n=6;break;case s.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case s.RawDirection.WrappedLineColumnCenter:n=8;break;case s.RawDirection.WrappedLineEnd:n=9;break;case s.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case s.RawDirection.ViewPortTop:n=11;break;case s.RawDirection.ViewPortBottom:n=13;break;case s.RawDirection.ViewPortCenter:n=12;break;case s.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let r=0;switch(i.by){case s.RawUnit.Line:r=1;break;case s.RawUnit.WrappedLine:r=2;break;case s.RawUnit.Character:r=3;break;case s.RawUnit.HalfLine:r=4;break}return{direction:n,unit:r,select:!!i.select,value:i.value||1}}s.parse=t})(VN||(VN={}));class Wue{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new XK(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class eB{constructor(e,t){this.model=e,this.indentationLineProcessor=new XK(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),n=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:n}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=x1(t,e.startColumn-1);let n;if(tB(this.model,e.getStartPosition())){const o=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+o;n=t.sliceAndInflate(a,l,0)}else{const o=e.startColumn-1;n=t.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(n)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),n=x1(i,t.column-1),r=t.column-1-n.firstCharOffset,o=n.firstCharOffset+r,a=n.firstCharOffset+n.getLineLength(),l=i.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=_=>{this.model.tokenization.forceTokenization(_);const b=this.model.tokenization.getLineTokens(_),C=this.model.getLineMaxColumn(_)-1;return x1(b,C)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),n=x1(i,e.startColumn-1),r=Ts.createEmpty("",n.languageIdCodec),o=e.startLineNumber-1;if(o===0||!(n.firstCharOffset===0))return r;const c=t(o);if(!(n.languageId===c.languageId))return r;const d=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(d)}}class XK{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){const i=(o,a)=>{const l=fo(o);return a+o.substring(l.length)};this.model.tokenization.forceTokenization?.(e);const n=this.model.tokenization.getLineTokens(e);let r=this.getProcessedTokens(n).getLineContent();return t!==void 0&&(r=i(r,t)),r}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),o=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let h=e.getTokenText(l);t(c)&&(h=h.replace(r,""));const d=e.getMetadata(l);o.push({text:h,metadata:d})}),Ts.createFromTextAndMetadata(o,e.languageIdCodec)}}function tB(s,e){s.tokenization.forceTokenization(e.lineNumber);const t=s.tokenization.getLineTokens(e.lineNumber),i=x1(t,e.column-1),n=i.firstCharOffset===0,r=t.getLanguageId(0)===i.languageId;return!n&&!r}function iB(s,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const n=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=i.getLanguageConfiguration(n);if(!r)return null;const a=new eB(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),h=a.afterRangeProcessedTokens.getLineContent(),d=r.onEnter(s,l,c,h);if(!d)return null;const g=d.indentAction;let _=d.appendText;const b=d.removeText||0;_?g===_o.Indent&&(_="	"+_):g===_o.Indent||g===_o.IndentOutdent?_="	":_="";let C=QG(e,t.startLineNumber,t.startColumn);return b&&(C=C.substring(0,C.length-b)),{indentAction:g,appendText:_,removeText:b,indentation:C}}var zue=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Uue=function(s,e){return function(t,i){e(t,i,s)}},AD;const WM=Object.create(null);function R_(s,e){if(e<=0)return"";WM[s]||(WM[s]=["",s]);const t=WM[s];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+s;return t[e]}let v0=AD=class{static unshiftIndent(e,t,i,n,r){const o=wn.visibleColumnFromColumn(e,t,i);if(r){const a=R_(" ",n),c=wn.prevIndentTabStop(o,n)/n;return R_(a,c)}else{const c=wn.prevRenderTabStop(o,i)/i;return R_("	",c)}}static shiftIndent(e,t,i,n,r){const o=wn.visibleColumnFromColumn(e,t,i);if(r){const a=R_(" ",n),c=wn.nextIndentTabStop(o,n)/n;return R_(a,c)}else{const c=wn.nextRenderTabStop(o,i)/i;return R_("	",c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let n=this._selection.endLineNumber;this._selection.endColumn===1&&i!==n&&(n=n-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=i===n;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,h=0;for(let d=i;d<=n;d++,c=h){h=0;const g=e.getLineContent(d);let _=Pa(g);if(this._opts.isUnshift&&(g.length===0||_===0)||!l&&!this._opts.isUnshift&&g.length===0)continue;if(_===-1&&(_=g.length),d>1&&wn.visibleColumnFromColumn(g,_+1,r)%o!==0&&e.tokenization.isCheapToTokenize(d-1)){const S=iB(this._opts.autoIndent,e,new ie(d-1,e.getLineMaxColumn(d-1),d-1,e.getLineMaxColumn(d-1)),this._languageConfigurationService);if(S){if(h=c,S.appendText)for(let E=0,x=S.appendText.length;E<x&&h<o&&S.appendText.charCodeAt(E)===32;E++)h++;S.removeText&&(h=Math.max(0,h-S.removeText));for(let E=0;E<h&&!(_===0||g.charCodeAt(_-1)!==32);E++)_--}}if(this._opts.isUnshift&&_===0)continue;let b;this._opts.isUnshift?b=AD.unshiftIndent(g,_+1,r,o,a):b=AD.shiftIndent(g,_+1,r,o,a),this._addEditOperation(t,new ie(d,1,d,_+1),b),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=_+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?R_(" ",o):"	";for(let h=i;h<=n;h++){const d=e.getLineContent(h);let g=Pa(d);if(!(this._opts.isUnshift&&(d.length===0||g===0))&&!(!l&&!this._opts.isUnshift&&d.length===0)&&(g===-1&&(g=d.length),!(this._opts.isUnshift&&g===0)))if(this._opts.isUnshift){g=Math.min(g,o);for(let _=0;_<g;_++)if(d.charCodeAt(_)===9){g=_+1;break}this._addEditOperation(t,new ie(h,1,h,g+1),"")}else this._addEditOperation(t,new ie(h,1,h,1),c),h===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const n=t.getInverseEditOperations()[0];return new Yt(n.range.endLineNumber,n.range.endColumn,n.range.endLineNumber,n.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const n=this._selection.startColumn;return i.startColumn<=n?i:i.getDirection()===0?new Yt(i.startLineNumber,n,i.endLineNumber,i.endColumn):new Yt(i.endLineNumber,i.endColumn,i.startLineNumber,n)}return i}};v0=AD=zue([Uue(2,zd)],v0);class que{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new ie(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new ie(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection||null)}computeCursorState(e,t){const i=t.getInverseEditOperations(),n=i[0].range,r=i[1].range;return new Yt(n.endLineNumber,n.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class $ue{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new ie(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return new Yt(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}}function jue(s,e,t){const i=s.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let n,r=-1;for(n=e-1;n>=1;n--){if(s.tokenization.getLanguageIdAtPosition(n,0)!==i)return r;const o=s.getLineContent(n);if(t.shouldIgnore(n)||/^\s+$/.test(o)||o===""){r=n;continue}return n}}return-1}function HN(s,e,t,i=!0,n){if(s<4)return null;const r=n.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;const o=new Wue(e,r,n);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=jue(e,t,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:fo(l),action:_o.Indent,line:a}}else if(o.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:fo(l),action:null,line:a}}else{if(a===1)return{indentation:fo(e.getLineContent(a)),action:null,line:a};const l=a-1,c=r.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let h=0;for(let d=l-1;d>0;d--)if(!o.shouldIndentNextLine(d)){h=d;break}return{indentation:fo(e.getLineContent(h+1)),action:null,line:h+1}}if(i)return{indentation:fo(e.getLineContent(a)),action:null,line:a};for(let h=a;h>0;h--){if(o.shouldIncrease(h))return{indentation:fo(e.getLineContent(h)),action:_o.Indent,line:h};if(o.shouldIndentNextLine(h)){let d=0;for(let g=h-1;g>0;g--)if(!o.shouldIndentNextLine(h)){d=g;break}return{indentation:fo(e.getLineContent(d+1)),action:null,line:d+1}}else if(o.shouldDecrease(h))return{indentation:fo(e.getLineContent(h)),action:null,line:h}}return{indentation:fo(e.getLineContent(1)),action:null,line:1}}}function Gue(s,e,t,i,n){if(s<4)return null;const r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=n.getLanguageConfiguration(r).indentRulesSupport;if(!o)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new eB(e,n).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,h=l.beforeRangeProcessedTokens,d=fo(h.getLineContent()),g=Yue(e,t.startLineNumber,h),_=tB(e,t.getStartPosition()),b=e.getLineContent(t.startLineNumber),C=fo(b),S=HN(s,g,t.startLineNumber+1,void 0,n);if(!S){const x=_?C:d;return{beforeEnter:x,afterEnter:x}}let E=_?C:S.indentation;return S.action===_o.Indent&&(E=i.shiftIndent(E)),o.shouldDecrease(c.getLineContent())&&(E=i.unshiftIndent(E)),{beforeEnter:_?C:d,afterEnter:E}}function Kue(s,e,t,i,n,r){const o=s.autoIndent;if(o<4||tB(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=r.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const d=new eB(e,r).getProcessedTokenContextAroundRange(t),g=d.beforeRangeProcessedTokens.getLineContent(),_=d.afterRangeProcessedTokens.getLineContent(),b=g+_,C=g+i+_;if(!c.shouldDecrease(b)&&c.shouldDecrease(C)){const E=HN(o,e,t.startLineNumber,!1,r);if(!E)return null;let x=E.indentation;return E.action!==_o.Indent&&(x=n.unshiftIndent(x)),x}const S=t.startLineNumber-1;if(S>0){const E=e.getLineContent(S);if(c.shouldIndentNextLine(E)&&c.shouldIncrease(C)){const T=HN(o,e,t.startLineNumber,!1,r)?.indentation;if(T!==void 0){const N=e.getLineContent(t.startLineNumber),A=fo(N),O=n.shiftIndent(T)===A,V=/^\s*$/.test(b),U=s.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),B=U&&U.length>0&&V;if(O&&B)return T}}}return null}function Yue(s,e,t){return{tokenization:{getLineTokens:n=>n===e?t:s.tokenization.getLineTokens(n),getLanguageId:()=>s.getLanguageId(),getLanguageIdAtPosition:(n,r)=>s.getLanguageIdAtPosition(n,r)},getLineContent:n=>n===e?t.getLineContent():s.getLineContent(n)}}class Zue{static getEdits(e,t,i,n,r){if(!r&&this._isAutoIndentType(e,t,i)){const o=[];for(const l of i){const c=this._findActualIndentationForSelection(e,t,l,n);if(c===null)return;o.push({selection:l,indentation:c})}const a=C7.getAutoClosingPairClose(e,t,i,n,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,n,a)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let n=0,r=i.length;n<r;n++)if(!t.tokenization.isCheapToTokenize(i[n].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,n){const r=Kue(e,t,i,n,{shiftIndent:a=>rB(e,a),unshiftIndent:a=>WN(e,a)},e.languageConfigurationService);if(r===null)return null;const o=QG(t,i.startLineNumber,i.startColumn);return r===e.normalizeIndentation(o)?null:r}static _getIndentationAndAutoClosingPairEdits(e,t,i,n,r){const o=i.map(({selection:l,indentation:c})=>{if(r!==null){const h=this._getEditFromIndentationAndSelection(e,t,c,l,n,!1);return new ahe(h,l,n,r)}else{const h=this._getEditFromIndentationAndSelection(e,t,c,l,n,!0);return z_(h.range,h.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new yo(4,o,a)}static _getEditFromIndentationAndSelection(e,t,i,n,r,o=!0){const a=n.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(i);if(l!==0){const d=t.getLineContent(a);c+=d.substring(l-1,n.startColumn-1)}return c+=o?r:"",{range:new ie(a,1,n.endLineNumber,n.endColumn),text:c}}}class Xue{static getEdits(e,t,i,n,r,o){if(JK(t,i,n,r,o))return this._runAutoClosingOvertype(e,n,o)}static _runAutoClosingOvertype(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const l=t[r].getPosition(),c=new ie(l.lineNumber,l.column,l.lineNumber,l.column+1);n[r]=new Aa(c,i)}return new yo(4,n,{shouldPushStackElementBefore:DR(e,4),shouldPushStackElementAfter:!1})}}class Que{static getEdits(e,t,i,n,r){if(JK(e,t,i,n,r)){const o=i.map(a=>new Aa(new ie(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new yo(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class C7{static getEdits(e,t,i,n,r,o){if(!o){const a=this.getAutoClosingPairClose(e,t,i,n,r);if(a!==null)return this._runAutoClosingOpenCharType(i,n,r,a)}}static _runAutoClosingOpenCharType(e,t,i,n){const r=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];r[o]=new ohe(l,t,!i,n)}return new yo(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,n,r){for(const b of i)if(!b.isEmpty())return null;const o=i.map(b=>{const C=b.getPosition();return r?{lineNumber:C.lineNumber,beforeColumn:C.column-n.length,afterColumn:C.column}:{lineNumber:C.lineNumber,beforeColumn:C.column,afterColumn:C.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(b=>new se(b.lineNumber,b.beforeColumn)),n);if(!a)return null;let l,c;if(hp(n)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const d=this._findContainedAutoClosingPair(e,a),g=d?d.close:"";let _=!0;for(const b of o){const{lineNumber:C,beforeColumn:S,afterColumn:E}=b,x=t.getLineContent(C),T=x.substring(0,S-1),N=x.substring(E-1);if(N.startsWith(g)||(_=!1),N.length>0){const V=N.charAt(0);if(!this._isBeforeClosingBrace(e,N)&&!c(V))return null}if(a.open.length===1&&(n==="'"||n==='"')&&l!=="always"){const V=rC(e.wordSeparators,[]);if(T.length>0){const U=T.charCodeAt(T.length-1);if(V.get(U)===0)return null}}if(!t.tokenization.isCheapToTokenize(C))return null;t.tokenization.forceTokenization(C);const A=t.tokenization.getLineTokens(C),P=x1(A,S-1);if(!a.shouldAutoClose(P,S-P.firstCharOffset))return null;const O=a.findNeutralCharacter();if(O){const V=t.tokenization.getTokenTypeIfInsertingCharacter(C,S,O);if(!a.isOK(V))return null}}return _?a.close.substring(0,a.close.length-g.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),n=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let r=null;for(const o of n)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r}static _findAutoClosingPairOpen(e,t,i,n){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(n);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new ie(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+n!==a.open){l=!1;break}l&&(o=a)}return o}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),n=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],o=n.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}}class EW{static getEdits(e,t){if(!(e.inputMode==="overtype"))return null;const n=t.map(r=>new Vue(r.insertedTextRange));return new yo(4,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}class Jue{static getEdits(e,t,i,n,r){if(!r&&this._isSurroundSelectionType(e,t,i,n))return this._runSurroundSelectionType(e,i,n)}static _runSurroundSelectionType(e,t,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=e.surroundingPairs[i];n[r]=new que(a,i,l)}return new yo(0,n,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,n){if(!eY(e,n)||!e.surroundingPairs.hasOwnProperty(n))return!1;const r=hp(n);for(const o of i){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),h=l===o.startLineNumber?o.startColumn-1:0,d=l===o.endLineNumber?o.endColumn-1:c.length,g=c.substring(h,d);if(/[^ \t]/.test(g)){a=!1;break}}if(a)return!1;if(r&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(hp(l))return!1}}return!0}}class ehe{static getEdits(e,t,i,n,r,o){if(!o&&this._isTypeInterceptorElectricChar(t,i,n)){const a=this._typeInterceptorElectricChar(e,t,i,n[0],r);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,n,r){if(!t.electricChars.hasOwnProperty(r)||!n.isEmpty())return null;const o=n.getPosition();i.tokenization.forceTokenization(o.lineNumber);const a=i.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(r,a,o.column)}catch(c){return mi(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,h=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(h){if(h.startLineNumber===o.lineNumber)return null;const d=i.getLineContent(h.startLineNumber),g=fo(d),_=t.normalizeIndentation(g),b=i.getLineContent(o.lineNumber),C=i.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,S=b.substring(C-1,o.column-1),E=_+S+r,x=new ie(o.lineNumber,1,o.lineNumber,o.column),T=new Aa(x,E);return new yo(sB(E,e),[T],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class the{static getEdits(e,t,i,n,r){const o=[];for(let l=0,c=i.length;l<c;l++){const h=e.inputMode==="overtype"&&!r?w7:Aa;o[l]=new h(i[l],n)}const a=sB(n,t);return new yo(a,o,{shouldPushStackElementBefore:DR(t,a),shouldPushStackElementAfter:!1})}}class QK{static getEdits(e,t,i,n,r){if(!r&&n===`
`){const o=[];for(let a=0,l=i.length;a<l;a++)o[a]=this._enter(e,t,!1,i[a]);return new yo(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,n){if(e.autoIndent===0)return z_(n,`
`,i);if(!t.tokenization.isCheapToTokenize(n.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(n.startLineNumber),c=fo(l).substring(0,n.startColumn-1);return z_(n,`
`+e.normalizeIndentation(c),i)}const r=iB(e.autoIndent,t,n,e.languageConfigurationService);if(r){if(r.indentAction===_o.None)return z_(n,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===_o.Indent)return z_(n,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===_o.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),h=`
`+c+`
`+l;return i?new ID(n,h,!0):new FN(n,h,-1,c.length-l.length,!0)}else if(r.indentAction===_o.Outdent){const l=WN(e,r.indentation);return z_(n,`
`+e.normalizeIndentation(l+r.appendText),i)}}const o=t.getLineContent(n.startLineNumber),a=fo(o).substring(0,n.startColumn-1);if(e.autoIndent>=4){const l=Gue(e.autoIndent,t,n,{unshiftIndent:c=>WN(e,c),shiftIndent:c=>rB(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,n.getEndPosition());const h=n.endColumn,d=t.getLineContent(n.endLineNumber),g=Pa(d);if(g>=0?n=n.setEndPosition(n.endLineNumber,Math.max(n.endColumn,g+1)):n=n.setEndPosition(n.endLineNumber,t.getLineMaxColumn(n.endLineNumber)),i)return new ID(n,`
`+e.normalizeIndentation(l.afterEnter),!0);{let _=0;return h<=g+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),_=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new FN(n,`
`+e.normalizeIndentation(l.afterEnter),0,_,!0)}}}return z_(n,`
`+e.normalizeIndentation(a),i)}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const n=[];for(let r=0,o=i.length;r<o;r++){let a=i[r].positionLineNumber;if(a===1)n[r]=new ID(new ie(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);n[r]=this._enter(e,t,!1,new ie(a,l,a,l))}}return n}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const n=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].positionLineNumber,l=t.getLineMaxColumn(a);n[r]=this._enter(e,t,!1,new ie(a,l,a,l))}return n}static lineBreakInsert(e,t,i){const n=[];for(let r=0,o=i.length;r<o;r++)n[r]=this._enter(e,t,!0,i[r]);return n}}class ihe{static getEdits(e,t,i,n,r,o){const a=this._distributePasteToCursors(e,i,n,r,o);return a?(i=i.sort(ie.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,n,r)}static _distributePasteToCursors(e,t,i,n,r){if(n||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substring(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substring(0,i.length-1));const o=LC(i);if(o.length===t.length)return o}return null}static _distributedPaste(e,t,i,n){const r=[];for(let o=0,a=i.length;o<a;o++){const c=e.overtypeOnPaste&&e.inputMode==="overtype"?w7:Aa;r[o]=new c(i[o],n[o])}return new yo(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,n,r){const o=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],h=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&n.indexOf(`
`)!==n.length-1&&(r=!1),r){const d=new ie(h.lineNumber,1,h.lineNumber,1);o[a]=new Hue(d,n,c,!0)}else{const g=e.overtypeOnPaste&&e.inputMode==="overtype"?w7:Aa;o[a]=new g(c,n)}}return new yo(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class nhe{static getEdits(e,t,i,n,r,o,a,l){const c=n.map(h=>this._compositionType(i,h,r,o,a,l));return new yo(4,c,{shouldPushStackElementBefore:DR(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,n,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-n),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),h=new ie(a.lineNumber,l,a.lineNumber,c);return new FN(h,i,0,o)}}class she{static getEdits(e,t,i){const n=[];for(let o=0,a=t.length;o<a;o++)n[o]=new Aa(t[o],i);const r=sB(i,e);return new yo(r,n,{shouldPushStackElementBefore:DR(e,r),shouldPushStackElementAfter:!1})}}class rhe{static getCommands(e,t,i){const n=[];for(let r=0,o=i.length;r<o;r++){const a=i[r];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const h=e.normalizeIndentation(c);if(!l.startsWith(h)){n[r]=new Aa(new ie(a.startLineNumber,1,a.startLineNumber,l.length+1),h,!0);continue}}n[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){n[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}n[r]=new v0(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return n}static _goodIndentForLine(e,t,i){let n=null,r="";const o=HN(e.autoIndent,t,i,!1,e.languageConfigurationService);if(o)n=o.action,r=o.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const h=t.getLineContent(a);if(I0(h)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=iB(e.autoIndent,t,new ie(a,l,a,l),e.languageConfigurationService);c&&(r=c.indentation+c.appendText)}return n&&(n===_o.Indent&&(r=rB(e,r)),n===_o.Outdent&&(r=WN(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,i,n){let r="";const o=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let h=0;h<c;h++)r+=" "}else r="	";return new Aa(i,r,n)}}class nB extends FN{constructor(e,t,i,n,r,o){super(e,t,i,n),this._openCharacter=r,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new ie(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new ie(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class ohe extends nB{constructor(e,t,i,n){const r=(i?t:"")+n,o=0,a=-n.length;super(e,r,o,a,t,n)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,n,t)}}class ahe extends nB{constructor(e,t,i,n){const r=i+n,o=0,a=i.length;super(t,r,o,a,i,n),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:r}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length!==2)throw new Error("There should be two inverse edit operations!");const n=i[0].range,r=i[1].range,o=n.plusRange(r);return this._computeCursorStateWithRange(e,o,t)}}function sB(s,e){return s===" "?e===5||e===6?6:5:4}function DR(s,e){return DW(s)&&!DW(e)?!0:s===5?!1:TW(s)!==TW(e)}function TW(s){return s===6||s===5?"space":s}function DW(s){return s===4||s===5||s===6}function JK(s,e,t,i,n){if(s.autoClosingOvertype==="never"||!s.autoClosingPairs.autoClosingPairsCloseSingleChar.has(n))return!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==n)return!1;const d=hp(n);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&d)return!1;if(s.autoClosingOvertype==="auto"){let _=!1;for(let b=0,C=i.length;b<C;b++){const S=i[b];if(l.lineNumber===S.startLineNumber&&l.column===S.startColumn){_=!0;break}}if(!_)return!1}}return!0}function z_(s,e,t){return t?new ID(s,e,!0):new Aa(s,e,!0)}function rB(s,e,t){return t=t||1,v0.shiftIndent(e,e.length+t,s.tabSize,s.indentSize,s.insertSpaces)}function WN(s,e,t){return t=t||1,v0.unshiftIndent(e,e.length+t,s.tabSize,s.indentSize,s.insertSpaces)}function eY(s,e){return hp(e)?s.autoSurround==="quotes"||s.autoSurround==="languageDefined":s.autoSurround==="brackets"||s.autoSurround==="languageDefined"}class r1{static indent(e,t,i){if(t===null||i===null)return[];const n=[];for(let r=0,o=i.length;r<o;r++)n[r]=new v0(i[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static outdent(e,t,i){const n=[];for(let r=0,o=i.length;r<o;r++)n[r]=new v0(i[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return n}static paste(e,t,i,n,r,o){return ihe.getEdits(e,t,i,n,r,o)}static tab(e,t,i){return rhe.getCommands(e,t,i)}static compositionType(e,t,i,n,r,o,a,l){return nhe.getEdits(e,t,i,n,r,o,a,l)}static compositionEndWithInterceptors(e,t,i,n,r,o){if(!n)return null;let a=null;for(const g of n)if(a===null)a=g.insertedText;else if(a!==g.insertedText)return null;if(!a||a.length!==1)return EW.getEdits(t,n);const l=a;let c=!1;for(const g of n)if(g.deletedText.length!==0){c=!0;break}if(c){if(!eY(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const g=hp(l);for(const C of n)if(C.deletedSelectionStart!==0||C.deletedSelectionEnd!==C.deletedText.length||/^[ \t]+$/.test(C.deletedText)||g&&hp(C.deletedText))return null;const _=[];for(const C of r){if(!C.isEmpty())return null;_.push(C.getPosition())}if(_.length!==n.length)return null;const b=[];for(let C=0,S=_.length;C<S;C++)b.push(new $ue(_[C],n[C].deletedText,t.surroundingPairs[l]));return new yo(4,b,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const h=Que.getEdits(t,i,r,o,l);if(h!==void 0)return h;const d=C7.getEdits(t,i,r,l,!0,!1);return d!==void 0?d:EW.getEdits(t,n)}static typeWithInterceptors(e,t,i,n,r,o,a){const l=QK.getEdits(i,n,r,a,e);if(l!==void 0)return l;const c=Zue.getEdits(i,n,r,a,e);if(c!==void 0)return c;const h=Xue.getEdits(t,i,n,r,o,a);if(h!==void 0)return h;const d=C7.getEdits(i,n,r,a,!1,e);if(d!==void 0)return d;const g=Jue.getEdits(i,n,r,a,e);if(g!==void 0)return g;const _=ehe.getEdits(t,i,n,r,a,e);return _!==void 0?_:the.getEdits(i,t,r,a,e)}static typeWithoutInterceptors(e,t,i,n,r){return she.getEdits(e,n,r)}}class lhe{constructor(e,t,i,n,r,o,a){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=n,this.insertedSelectionStart=r,this.insertedSelectionEnd=o,this.insertedTextRange=a}}var Ge;(function(s){s.editorSimpleInput=new et("editorSimpleInput",!1,!0),s.editorTextFocus=new et("editorTextFocus",!1,y(678,"Whether the editor text has focus (cursor is blinking)")),s.focus=new et("editorFocus",!1,y(679,"Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),s.textInputFocus=new et("textInputFocus",!1,y(680,"Whether an editor or a rich text input has focus (cursor is blinking)")),s.readOnly=new et("editorReadonly",!1,y(681,"Whether the editor is read-only")),s.inDiffEditor=new et("inDiffEditor",!1,y(682,"Whether the context is a diff editor")),s.isEmbeddedDiffEditor=new et("isEmbeddedDiffEditor",!1,y(683,"Whether the context is an embedded diff editor")),s.multiDiffEditorAllCollapsed=new et("multiDiffEditorAllCollapsed",void 0,y(684,"Whether all files in multi diff editor are collapsed")),s.hasChanges=new et("diffEditorHasChanges",!1,y(685,"Whether the diff editor has changes")),s.comparingMovedCode=new et("comparingMovedCode",!1,y(686,"Whether a moved code block is selected for comparison")),s.accessibleDiffViewerVisible=new et("accessibleDiffViewerVisible",!1,y(687,"Whether the accessible diff viewer is visible")),s.diffEditorRenderSideBySideInlineBreakpointReached=new et("diffEditorRenderSideBySideInlineBreakpointReached",!1,y(688,"Whether the diff editor render side by side inline breakpoint is reached")),s.diffEditorInlineMode=new et("diffEditorInlineMode",!1,y(689,"Whether inline mode is active")),s.diffEditorOriginalWritable=new et("diffEditorOriginalWritable",!1,y(690,"Whether modified is writable in the diff editor")),s.diffEditorModifiedWritable=new et("diffEditorModifiedWritable",!1,y(691,"Whether modified is writable in the diff editor")),s.diffEditorOriginalUri=new et("diffEditorOriginalUri","",y(692,"The uri of the original document")),s.diffEditorModifiedUri=new et("diffEditorModifiedUri","",y(693,"The uri of the modified document")),s.columnSelection=new et("editorColumnSelection",!1,y(694,"Whether `editor.columnSelection` is enabled")),s.writable=s.readOnly.toNegated(),s.hasNonEmptySelection=new et("editorHasSelection",!1,y(695,"Whether the editor has text selected")),s.hasOnlyEmptySelection=s.hasNonEmptySelection.toNegated(),s.hasMultipleSelections=new et("editorHasMultipleSelections",!1,y(696,"Whether the editor has multiple selections")),s.hasSingleSelection=s.hasMultipleSelections.toNegated(),s.tabMovesFocus=new et("editorTabMovesFocus",!1,y(697,"Whether `Tab` will move focus out of the editor")),s.tabDoesNotMoveFocus=s.tabMovesFocus.toNegated(),s.isInEmbeddedEditor=new et("isInEmbeddedEditor",!1,!0),s.canUndo=new et("canUndo",!1,!0),s.canRedo=new et("canRedo",!1,!0),s.hoverVisible=new et("editorHoverVisible",!1,y(698,"Whether the editor hover is visible")),s.hoverFocused=new et("editorHoverFocused",!1,y(699,"Whether the editor hover is focused")),s.stickyScrollFocused=new et("stickyScrollFocused",!1,y(700,"Whether the sticky scroll is focused")),s.stickyScrollVisible=new et("stickyScrollVisible",!1,y(701,"Whether the sticky scroll is visible")),s.standaloneColorPickerVisible=new et("standaloneColorPickerVisible",!1,y(702,"Whether the standalone color picker is visible")),s.standaloneColorPickerFocused=new et("standaloneColorPickerFocused",!1,y(703,"Whether the standalone color picker is focused")),s.inCompositeEditor=new et("inCompositeEditor",void 0,y(704,"Whether the editor is part of a larger editor (e.g. notebooks)")),s.notInCompositeEditor=s.inCompositeEditor.toNegated(),s.languageId=new et("editorLangId","",y(705,"The language identifier of the editor")),s.hasCompletionItemProvider=new et("editorHasCompletionItemProvider",!1,y(706,"Whether the editor has a completion item provider")),s.hasCodeActionsProvider=new et("editorHasCodeActionsProvider",!1,y(707,"Whether the editor has a code actions provider")),s.hasCodeLensProvider=new et("editorHasCodeLensProvider",!1,y(708,"Whether the editor has a code lens provider")),s.hasDefinitionProvider=new et("editorHasDefinitionProvider",!1,y(709,"Whether the editor has a definition provider")),s.hasDeclarationProvider=new et("editorHasDeclarationProvider",!1,y(710,"Whether the editor has a declaration provider")),s.hasImplementationProvider=new et("editorHasImplementationProvider",!1,y(711,"Whether the editor has an implementation provider")),s.hasTypeDefinitionProvider=new et("editorHasTypeDefinitionProvider",!1,y(712,"Whether the editor has a type definition provider")),s.hasHoverProvider=new et("editorHasHoverProvider",!1,y(713,"Whether the editor has a hover provider")),s.hasDocumentHighlightProvider=new et("editorHasDocumentHighlightProvider",!1,y(714,"Whether the editor has a document highlight provider")),s.hasDocumentSymbolProvider=new et("editorHasDocumentSymbolProvider",!1,y(715,"Whether the editor has a document symbol provider")),s.hasReferenceProvider=new et("editorHasReferenceProvider",!1,y(716,"Whether the editor has a reference provider")),s.hasRenameProvider=new et("editorHasRenameProvider",!1,y(717,"Whether the editor has a rename provider")),s.hasSignatureHelpProvider=new et("editorHasSignatureHelpProvider",!1,y(718,"Whether the editor has a signature help provider")),s.hasInlayHintsProvider=new et("editorHasInlayHintsProvider",!1,y(719,"Whether the editor has an inline hints provider")),s.hasDocumentFormattingProvider=new et("editorHasDocumentFormattingProvider",!1,y(720,"Whether the editor has a document formatting provider")),s.hasDocumentSelectionFormattingProvider=new et("editorHasDocumentSelectionFormattingProvider",!1,y(721,"Whether the editor has a document selection formatting provider")),s.hasMultipleDocumentFormattingProvider=new et("editorHasMultipleDocumentFormattingProvider",!1,y(722,"Whether the editor has multiple document formatting providers")),s.hasMultipleDocumentSelectionFormattingProvider=new et("editorHasMultipleDocumentSelectionFormattingProvider",!1,y(723,"Whether the editor has multiple document selection formatting providers"))})(Ge||(Ge={}));const Qt=0;class xn extends m0{runEditorCommand(e,t,i){const n=t._getViewModel();n&&this.runCoreEditorCommand(n,i||{})}}var mr;(function(s){const e=function(i){if(!Xo(i))return!1;const n=i;return!(!rr(n.to)||!mc(n.by)&&!rr(n.by)||!mc(n.value)&&!D0(n.value)||!mc(n.revealCursor)&&!Ej(n.revealCursor))};s.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},s.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let n;switch(i.to){case s.RawDirection.Up:n=1;break;case s.RawDirection.Right:n=2;break;case s.RawDirection.Down:n=3;break;case s.RawDirection.Left:n=4;break;default:return null}let r;switch(i.by){case s.RawUnit.Line:r=1;break;case s.RawUnit.WrappedLine:r=2;break;case s.RawUnit.Page:r=3;break;case s.RawUnit.HalfPage:r=4;break;case s.RawUnit.Editor:r=5;break;case s.RawUnit.Column:r=6;break;default:r=2}const o=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:n,unit:r,value:o,revealCursor:a,select:!!i.select}}s.parse=t})(mr||(mr={}));var Jv;(function(s){const e=function(t){if(!Xo(t))return!1;const i=t;return!(!D0(i.lineNumber)&&!rr(i.lineNumber)||!mc(i.at)&&!rr(i.at))};s.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},s.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Jv||(Jv={}));class y7{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const n=t.get(Es).getFocusedCodeEditor();return n&&n.hasTextFocus()?this._runEditorCommand(t,n,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const n=Us();return n&&ih(n)?(this.runDOMCommand(n),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const n=t.get(Es).getActiveCodeEditor();return n?(n.focus(),this._runEditorCommand(t,n,i)):!1})}_runEditorCommand(e,t,i){const n=this.runEditorCommand(e,t,i);return n||!0}}var Ps;(function(s){class e extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){if(!T.position)return;x.model.pushStackElement(),x.setCursorStates(T.source,3,[Kr.moveTo(x,x.getPrimaryCursorState(),this._inSelectionMode,T.position,T.viewPosition)])&&T.revealType!==2&&x.revealAllCursors(T.source,!0,!0)}}s.MoveTo=Ct(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),s.MoveToSelect=Ct(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends xn{runCoreEditorCommand(x,T){x.model.pushStackElement();const N=this._getColumnSelectResult(x,x.getPrimaryCursorState(),x.getCursorColumnSelectData(),T);N!==null&&(x.setCursorStates(T.source,3,N.viewStates.map(A=>Ht.fromViewState(A))),x.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:N.fromLineNumber,fromViewVisualColumn:N.fromVisualColumn,toViewLineNumber:N.toLineNumber,toViewVisualColumn:N.toVisualColumn}),N.reversed?x.revealTopMostCursor(T.source):x.revealBottomMostCursor(T.source))}}s.ColumnSelect=Ct(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(E,x,T,N){if(typeof N.position>"u"||typeof N.viewPosition>"u"||typeof N.mouseColumn>"u")return null;const A=E.model.validatePosition(N.position),P=E.coordinatesConverter.validateViewPosition(new se(N.viewPosition.lineNumber,N.viewPosition.column),A),O=N.doColumnSelect?T.fromViewLineNumber:P.lineNumber,V=N.doColumnSelect?T.fromViewVisualColumn:N.mouseColumn-1;return s1.columnSelect(E.cursorConfig,E,O,V,P.lineNumber,N.mouseColumn-1)}}),s.CursorColumnSelectLeft=Ct(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(E,x,T,N){return s1.columnSelectLeft(E.cursorConfig,E,T)}}),s.CursorColumnSelectRight=Ct(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(E,x,T,N){return s1.columnSelectRight(E.cursorConfig,E,T)}});class i extends t{constructor(x){super(x),this._isPaged=x.isPaged}_getColumnSelectResult(x,T,N,A){return s1.columnSelectUp(x.cursorConfig,x,N,this._isPaged)}}s.CursorColumnSelectUp=Ct(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:3600,linux:{primary:0}}})),s.CursorColumnSelectPageUp=Ct(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:3595,linux:{primary:0}}}));class n extends t{constructor(x){super(x),this._isPaged=x.isPaged}_getColumnSelectResult(x,T,N,A){return s1.columnSelectDown(x.cursorConfig,x,N,this._isPaged)}}s.CursorColumnSelectDown=Ct(new n({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:3602,linux:{primary:0}}})),s.CursorColumnSelectPageDown=Ct(new n({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends xn{constructor(){super({id:"cursorMove",precondition:void 0,metadata:VN.metadata})}runCoreEditorCommand(x,T){const N=VN.parse(T);N&&this._runCursorMove(x,T.source,N)}_runCursorMove(x,T,N){x.model.pushStackElement(),x.setCursorStates(T,3,r._move(x,x.getCursorStates(),N)),x.revealAllCursors(T,!0)}static _move(x,T,N){const A=N.select,P=N.value;switch(N.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Kr.simpleMove(x,T,N.direction,A,P,N.unit);case 11:case 13:case 12:case 14:return Kr.viewportMove(x,T,N.direction,A,P);default:return null}}}s.CursorMoveImpl=r,s.CursorMove=Ct(new r);class o extends xn{constructor(x){super(x),this._staticArgs=x.args}runCoreEditorCommand(x,T){let N=this._staticArgs;this._staticArgs.value===-1&&(N={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:T.pageSize||x.cursorConfig.pageSize}),x.model.pushStackElement(),x.setCursorStates(T.source,3,Kr.simpleMove(x,x.getCursorStates(),N.direction,N.select,N.value,N.unit)),x.revealAllCursors(T.source,!0)}}s.CursorLeft=Ct(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),s.CursorLeftSelect=Ct(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:1039}})),s.CursorRight=Ct(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),s.CursorRightSelect=Ct(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:1041}})),s.CursorUp=Ct(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),s.CursorUpSelect=Ct(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),s.CursorPageUp=Ct(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:11}})),s.CursorPageUpSelect=Ct(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:1035}})),s.CursorDown=Ct(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),s.CursorDownSelect=Ct(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),s.CursorPageDown=Ct(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:12}})),s.CursorPageDownSelect=Ct(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:1036}})),s.CreateCursor=Ct(new class extends xn{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(E,x){if(!x.position)return;let T;x.wholeLine?T=Kr.line(E,E.getPrimaryCursorState(),!1,x.position,x.viewPosition):T=Kr.moveTo(E,E.getPrimaryCursorState(),!1,x.position,x.viewPosition);const N=E.getCursorStates();if(N.length>1){const A=T.modelState?T.modelState.position:null,P=T.viewState?T.viewState.position:null;for(let O=0,V=N.length;O<V;O++){const U=N[O];if(!(A&&!U.modelState.selection.containsPosition(A))&&!(P&&!U.viewState.selection.containsPosition(P))){N.splice(O,1),E.model.pushStackElement(),E.setCursorStates(x.source,3,N);return}}}N.push(T),E.model.pushStackElement(),E.setCursorStates(x.source,3,N)}}),s.LastCursorMoveToSelect=Ct(new class extends xn{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(E,x){if(!x.position)return;const T=E.getLastAddedCursorIndex(),N=E.getCursorStates(),A=N.slice(0);A[T]=Kr.moveTo(E,N[T],!0,x.position,x.viewPosition),E.model.pushStackElement(),E.setCursorStates(x.source,3,A)}});class a extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){x.model.pushStackElement(),x.setCursorStates(T.source,3,Kr.moveToBeginningOfLine(x,x.getCursorStates(),this._inSelectionMode)),x.revealAllCursors(T.source,!0)}}s.CursorHome=Ct(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),s.CursorHomeSelect=Ct(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){x.model.pushStackElement(),x.setCursorStates(T.source,3,this._exec(x.getCursorStates())),x.revealAllCursors(T.source,!0)}_exec(x){const T=[];for(let N=0,A=x.length;N<A;N++){const P=x[N],O=P.modelState.position.lineNumber;T[N]=Ht.fromModelState(P.modelState.move(this._inSelectionMode,O,1,0))}return T}}s.CursorLineStart=Ct(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:287}}})),s.CursorLineStartSelect=Ct(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){x.model.pushStackElement(),x.setCursorStates(T.source,3,Kr.moveToEndOfLine(x,x.getCursorStates(),this._inSelectionMode,T.sticky||!1)),x.revealAllCursors(T.source,!0)}}s.CursorEnd=Ct(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Qt,kbExpr:Ge.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:y(61,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),s.CursorEndSelect=Ct(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:Qt,kbExpr:Ge.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:y(62,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){x.model.pushStackElement(),x.setCursorStates(T.source,3,this._exec(x,x.getCursorStates())),x.revealAllCursors(T.source,!0)}_exec(x,T){const N=[];for(let A=0,P=T.length;A<P;A++){const O=T[A],V=O.modelState.position.lineNumber,U=x.model.getLineMaxColumn(V);N[A]=Ht.fromModelState(O.modelState.move(this._inSelectionMode,V,U,0))}return N}}s.CursorLineEnd=Ct(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:291}}})),s.CursorLineEndSelect=Ct(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:1315}}}));class d extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){x.model.pushStackElement(),x.setCursorStates(T.source,3,Kr.moveToBeginningOfBuffer(x,x.getCursorStates(),this._inSelectionMode)),x.revealAllCursors(T.source,!0)}}s.CursorTop=Ct(new d({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:2062,mac:{primary:2064}}})),s.CursorTopSelect=Ct(new d({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:3086,mac:{primary:3088}}}));class g extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){x.model.pushStackElement(),x.setCursorStates(T.source,3,Kr.moveToEndOfBuffer(x,x.getCursorStates(),this._inSelectionMode)),x.revealAllCursors(T.source,!0)}}s.CursorBottom=Ct(new g({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:2061,mac:{primary:2066}}})),s.CursorBottomSelect=Ct(new g({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:3085,mac:{primary:3090}}}));class _ extends xn{constructor(){super({id:"editorScroll",precondition:void 0,metadata:mr.metadata})}determineScrollMethod(x){const T=[6],N=[1,2,3,4,5,6],A=[4,2],P=[1,3];return T.includes(x.unit)&&A.includes(x.direction)?this._runHorizontalEditorScroll.bind(this):N.includes(x.unit)&&P.includes(x.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(x,T){const N=mr.parse(T);if(!N)return;const A=this.determineScrollMethod(N);A&&A(x,T.source,N)}_runVerticalEditorScroll(x,T,N){const A=this._computeDesiredScrollTop(x,N);if(N.revealCursor){const P=x.getCompletelyVisibleViewRangeAtScrollTop(A);x.setCursorStates(T,3,[Kr.findPositionInViewportIfOutside(x,x.getPrimaryCursorState(),P,N.select)])}x.viewLayout.setScrollPosition({scrollTop:A},0)}_computeDesiredScrollTop(x,T){if(T.unit===1){const P=x.viewLayout.getFutureViewport(),O=x.getCompletelyVisibleViewRangeAtScrollTop(P.top),V=x.coordinatesConverter.convertViewRangeToModelRange(O);let U;T.direction===1?U=Math.max(1,V.startLineNumber-T.value):U=Math.min(x.model.getLineCount(),V.startLineNumber+T.value);const Y=x.coordinatesConverter.convertModelPositionToViewPosition(new se(U,1));return x.viewLayout.getVerticalOffsetForLineNumber(Y.lineNumber)}if(T.unit===5){let P=0;return T.direction===3&&(P=x.model.getLineCount()-x.cursorConfig.pageSize),x.viewLayout.getVerticalOffsetForLineNumber(P)}let N;T.unit===3?N=x.cursorConfig.pageSize*T.value:T.unit===4?N=Math.round(x.cursorConfig.pageSize/2)*T.value:N=T.value;const A=(T.direction===1?-1:1)*N;return x.viewLayout.getCurrentScrollTop()+A*x.cursorConfig.lineHeight}_runHorizontalEditorScroll(x,T,N){const A=this._computeDesiredScrollLeft(x,N);x.viewLayout.setScrollPosition({scrollLeft:A},0)}_computeDesiredScrollLeft(x,T){const N=(T.direction===4?-1:1)*T.value;return x.viewLayout.getCurrentScrollLeft()+N*x.cursorConfig.typicalHalfwidthCharacterWidth}}s.EditorScrollImpl=_,s.EditorScroll=Ct(new _),s.ScrollLineUp=Ct(new class extends xn{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(E,x){s.EditorScroll.runCoreEditorCommand(E,{to:mr.RawDirection.Up,by:mr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:x.source})}}),s.ScrollPageUp=Ct(new class extends xn{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(E,x){s.EditorScroll.runCoreEditorCommand(E,{to:mr.RawDirection.Up,by:mr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:x.source})}}),s.ScrollEditorTop=Ct(new class extends xn{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus}})}runCoreEditorCommand(E,x){s.EditorScroll.runCoreEditorCommand(E,{to:mr.RawDirection.Up,by:mr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:x.source})}}),s.ScrollLineDown=Ct(new class extends xn{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(E,x){s.EditorScroll.runCoreEditorCommand(E,{to:mr.RawDirection.Down,by:mr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:x.source})}}),s.ScrollPageDown=Ct(new class extends xn{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(E,x){s.EditorScroll.runCoreEditorCommand(E,{to:mr.RawDirection.Down,by:mr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:x.source})}}),s.ScrollEditorBottom=Ct(new class extends xn{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus}})}runCoreEditorCommand(E,x){s.EditorScroll.runCoreEditorCommand(E,{to:mr.RawDirection.Down,by:mr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:x.source})}}),s.ScrollLeft=Ct(new class extends xn{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus}})}runCoreEditorCommand(E,x){s.EditorScroll.runCoreEditorCommand(E,{to:mr.RawDirection.Left,by:mr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:x.source})}}),s.ScrollRight=Ct(new class extends xn{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus}})}runCoreEditorCommand(E,x){s.EditorScroll.runCoreEditorCommand(E,{to:mr.RawDirection.Right,by:mr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:x.source})}});class b extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){T.position&&(x.model.pushStackElement(),x.setCursorStates(T.source,3,[Kr.word(x,x.getPrimaryCursorState(),this._inSelectionMode,T.position)]),T.revealType!==2&&x.revealAllCursors(T.source,!0,!0))}}s.WordSelect=Ct(new b({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),s.WordSelectDrag=Ct(new b({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),s.LastCursorWordSelect=Ct(new class extends xn{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(E,x){if(!x.position)return;const T=E.getLastAddedCursorIndex(),N=E.getCursorStates(),A=N.slice(0),P=N[T];A[T]=Kr.word(E,P,P.modelState.hasSelection(),x.position),E.model.pushStackElement(),E.setCursorStates(x.source,3,A)}});class C extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){T.position&&(x.model.pushStackElement(),x.setCursorStates(T.source,3,[Kr.line(x,x.getPrimaryCursorState(),this._inSelectionMode,T.position,T.viewPosition)]),T.revealType!==2&&x.revealAllCursors(T.source,!1,!0))}}s.LineSelect=Ct(new C({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),s.LineSelectDrag=Ct(new C({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class S extends xn{constructor(x){super(x),this._inSelectionMode=x.inSelectionMode}runCoreEditorCommand(x,T){if(!T.position)return;const N=x.getLastAddedCursorIndex(),A=x.getCursorStates(),P=A.slice(0);P[N]=Kr.line(x,A[N],this._inSelectionMode,T.position,T.viewPosition),x.model.pushStackElement(),x.setCursorStates(T.source,3,P)}}s.LastCursorLineSelect=Ct(new S({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),s.LastCursorLineSelectDrag=Ct(new S({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),s.CancelSelection=Ct(new class extends xn{constructor(){super({id:"cancelSelection",precondition:Ge.hasNonEmptySelection,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(E,x){E.model.pushStackElement(),E.setCursorStates(x.source,3,[Kr.cancelSelection(E,E.getPrimaryCursorState())]),E.revealAllCursors(x.source,!0)}}),s.RemoveSecondaryCursors=Ct(new class extends xn{constructor(){super({id:"removeSecondaryCursors",precondition:Ge.hasMultipleSelections,kbOpts:{weight:Qt+1,kbExpr:Ge.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(E,x){E.model.pushStackElement(),E.setCursorStates(x.source,3,[E.getPrimaryCursorState()]),E.revealAllCursors(x.source,!0),EN(y(63,"Removed secondary cursors"))}}),s.RevealLine=Ct(new class extends xn{constructor(){super({id:"revealLine",precondition:void 0,metadata:Jv.metadata})}runCoreEditorCommand(E,x){const T=x,N=T.lineNumber||0;let A=typeof N=="number"?N+1:parseInt(N)+1;A<1&&(A=1);const P=E.model.getLineCount();A>P&&(A=P);const O=new ie(A,1,A,E.model.getLineMaxColumn(A));let V=0;if(T.at)switch(T.at){case Jv.RawAtArgument.Top:V=3;break;case Jv.RawAtArgument.Center:V=1;break;case Jv.RawAtArgument.Bottom:V=4;break}const U=E.coordinatesConverter.convertModelRangeToViewRange(O);E.revealRange(x.source,!1,U,V,0)}}),s.SelectAll=new class extends y7{constructor(){super(fre)}runDOMCommand(E){Va&&(E.focus(),E.select()),E.ownerDocument.execCommand("selectAll")}runEditorCommand(E,x,T){const N=x._getViewModel();N&&this.runCoreEditorCommand(N,T)}runCoreEditorCommand(E,x){E.model.pushStackElement(),E.setCursorStates("keyboard",3,[Kr.selectAll(E,E.getPrimaryCursorState())])}},s.SetSelection=Ct(new class extends xn{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(E,x){x.selection&&(E.model.pushStackElement(),E.setCursorStates(x.source,3,[Ht.fromModelSelection(x.selection)]))}})})(Ps||(Ps={}));const che=Kt.and(Ge.textInputFocus,Ge.columnSelection);function NC(s,e){_p.registerKeybindingRule({id:s,primary:e,when:che,weight:Qt+1})}NC(Ps.CursorColumnSelectLeft.id,1039);NC(Ps.CursorColumnSelectRight.id,1041);NC(Ps.CursorColumnSelectUp.id,1040);NC(Ps.CursorColumnSelectPageUp.id,1035);NC(Ps.CursorColumnSelectDown.id,1042);NC(Ps.CursorColumnSelectPageDown.id,1036);function NW(s){return s.register(),s}var IW;(function(s){class e extends m0{runEditorCommand(i,n,r){const o=n._getViewModel();o&&this.runCoreEditingCommand(n,o,r||{})}}s.CoreEditingCommand=e,s.LineBreakInsert=Ct(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Ge.writable,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,QK.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection)))}}),s.Outdent=Ct(new class extends e{constructor(){super({id:"outdent",precondition:Ge.writable,kbOpts:{weight:Qt,kbExpr:Kt.and(Ge.editorTextFocus,Ge.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,r1.outdent(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),s.Tab=Ct(new class extends e{constructor(){super({id:"tab",precondition:Ge.writable,kbOpts:{weight:Qt,kbExpr:Kt.and(Ge.editorTextFocus,Ge.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,n){t.pushUndoStop(),t.executeCommands(this.id,r1.tab(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),s.DeleteLeft=Ct(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,n){const[r,o]=b0.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(2)}}),s.DeleteRight=Ct(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:Qt,kbExpr:Ge.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,n){const[r,o]=b0.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(3)}}),s.Undo=new class extends y7{constructor(){super(VG)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(104)===!0))return i.getModel().undo()}},s.Redo=new class extends y7{constructor(){super(HG)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,n){if(!(!i.hasModel()||i.getOption(104)===!0))return i.getModel().redo()}}})(IW||(IW={}));class AW extends pR{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(Es).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function H0(s,e){NW(new AW("default:"+s,s)),NW(new AW(s,s,e))}H0("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});H0("replacePreviousChar");H0("compositionType");H0("compositionStart");H0("compositionEnd");H0("paste");H0("cut");class uhe{constructor(e,t,i,n){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=n}paste(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Ps.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new se(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(86)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(86)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Fa&&t.get(121),n=t.get(28),r=t.get(171);e.middleButton&&!i?r||this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Ps.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Ps.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),Ps.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),Ps.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Ps.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Ps.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Ps.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Ps.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Ps.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Ps.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Ps.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Ps.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Ps.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class tY{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new at("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>n)return null;let r=0,o=0;for(let l=i;l<=n;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),r=this.getEndLineNumber();let o=!1;for(let a=e;a<=i;a++)a>=n&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,n=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>r)return null;if(i+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let d=0;d<i;d++)o[d]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),h=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(o).concat(c),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let n=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let h=l;h<=c;h++){const d=h-this._rendLineNumberStart;this._lines[d].onTokensChanged(),n=!0}}return n}}class iY{constructor(e,t){this._viewContext=e,this._lineFactory=t,this.domNode=this._createDomNode(),this._linesCollection=new tY(this._lineFactory)}_createDomNode(){const e=ei(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(165)}onFlushed(e,t){if(t){const i=this._linesCollection.getStartLineNumber(),n=this._linesCollection.getEndLineNumber();for(let r=i;r<=n;r++)this._linesCollection.getLine(r).getDomNode()?.remove()}return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++)t[i].getDomNode()?.remove();return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,n=t.length;i<n;i++)t[i].getDomNode()?.remove();return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new S7(this.domNode.domNode,this._lineFactory,e,this._viewContext),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}const $f=class $f{constructor(e,t,i,n){this._domNode=e,this._lineFactory=t,this._viewportData=i,this._viewContext=n}render(e,t,i,n){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||i<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=i-t+1,r.lines=[];for(let o=t;o<=i;o++)r.lines[o-t]=this._lineFactory.createLine();return this._finishRendering(r,!0,n),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(i-r.rendLineNumberStart,r.linesLength-1),n,t),r.rendLineNumberStart>t){const o=t,a=Math.min(i,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,n,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<i){const o=r.rendLineNumberStart+r.linesLength,a=i;o<=a&&(this._insertLinesAfter(r,o,a,n,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>i){const o=Math.max(0,i-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,n),r}_renderUntouchedLines(e,t,i,n,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=o+l;a[l].layoutLine(c,n[c-r],this._lineHeightForLineNumber(c))}}_insertLinesBefore(e,t,i,n,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++)e.lines[i].getDomNode()?.remove();e.lines.splice(0,t)}_insertLinesAfter(e,t,i,n,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let n=0;n<t;n++)e.lines[i+n].getDomNode()?.remove();e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,n){$f._ttPolicy&&(i=$f._ttPolicy.createHTML(i));const r=this._domNode.lastChild;t||!r?this._domNode.innerHTML=i:r.insertAdjacentHTML("afterend",i);let o=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];n[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const n=document.createElement("div");$f._ttPolicy&&(t=$f._ttPolicy.createHTML(t)),n.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(i[r]){const a=n.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,i){const n=$f._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{n.reset();let c=!1;for(let h=0;h<r;h++){const d=o[h];if(l[h]=!1,d.getDomNode())continue;const _=h+a;d.renderLine(_,i[h],this._lineHeightForLineNumber(_),this._viewportData,n)&&(l[h]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,n.build(),l)}{n.reset();let c=!1;const h=[];for(let d=0;d<r;d++){const g=o[d];if(h[d]=!1,l[d])continue;const _=d+a;g.renderLine(_,i[d],this._lineHeightForLineNumber(_),this._viewportData,n)&&(h[d]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,n.build(),h)}}_lineHeightForLineNumber(e){return this._viewContext.viewLayout.getLineHeightForLineNumber(e)}};$f._ttPolicy=bp("editorViewLayer",{createHTML:e=>e}),$f._sb=new TC(1e5);let S7=$f;class nY extends ko{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new iY(this._context,{createLine:()=>new hhe(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(59);Sr(this.domNode,i),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(59);return Sr(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,n=t.length;i<n;i++){const r=t[i];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class hhe{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ei(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,n,r){let o="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];o+=c.render(n.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(i)),r.appendString("px;line-height:"),r.appendString(String(i)),r.appendString('px;">'),r.appendString(o),r.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i),this._domNode.setLineHeight(i))}}class dhe extends nY{constructor(e){super(e);const i=this._context.configuration.options.get(165);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(165);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class fhe extends nY{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(165);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Sr(this.domNode,t.get(59))}onConfigurationChanged(e){const t=this._context.configuration.options;Sr(this.domNode,t.get(59));const i=t.get(165);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class NR{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown?.(e)}emitKeyUp(e){this.onKeyUp?.(e)}emitContextMenu(e){this.onContextMenu?.(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove?.(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave?.(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown?.(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp?.(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag?.(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop?.(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled?.()}emitMouseWheel(e){this.onMouseWheel?.(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return NR.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new se(e.afterLineNumber,1)).lineNumber}}}class ghe extends ko{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=ei(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(165),n=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==n&&(this.contentWidth=n,e=!0);const r=i.contentLeft;return this.contentLeft!==r&&(this.contentLeft=r,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const n of i){if(!n.options.blockClassName)continue;let r=this.blocks[t];r||(r=this.blocks[t]=ei(document.createElement("div")),this.domNode.appendChild(r));let o,a;n.options.blockIsAfterEnd?(o=e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0)):(o=e.getVerticalOffsetForLineNumber(n.range.startLineNumber,!0),a=n.range.isEmpty()&&!n.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(n.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(n.range.endLineNumber,!0));const[l,c,h,d]=n.options.blockPadding??[0,0,0,0];r.setClassName("blockDecorations-block "+n.options.blockClassName),r.setLeft(this.contentLeft-d),r.setWidth(this.contentWidth+d+c),r.setTop(o-e.scrollTop-l),r.setHeight(a-o+l+h),t++}for(let n=t;n<this.blocks.length;n++)this.blocks[n].domNode.remove();this.blocks.length=t}}class mhe extends ko{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ei(document.createElement("div")),lh.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ei(document.createElement("div")),lh.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new phe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,n,r){this._widgets[e.getId()].setPosition(t,i,n,r),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const n=i.domNode.domNode;n.remove(),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class phe{constructor(e,t,i){this._primaryAnchor=new vS(null,null),this._secondaryAnchor=new vS(null,null),this._context=e,this._viewDomNode=t,this._actual=i;const n=this._context.configuration.options,r=n.get(165),o=n.get(4);this.domNode=ei(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=(this._actual.allowEditorOverflow||!1)&&o,this.suppressMouseDown=this._actual.suppressMouseDown||!1,this._fixedOverflowWidgets=n.get(51),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(e.hasChanged(165)){const i=t.get(165);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=n(t,this._context.viewModel,this._affinity),this._secondaryAnchor=n(i,this._context.viewModel,this._affinity);function n(r,o,a){if(!r)return new vS(null,null);const l=o.model.validatePosition(r);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new vS(r,c)}return new vS(r,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?t?.innerWidth||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,n){this._setPosition(n,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,n){const r=e.top,o=r,a=e.top+e.height,l=n.viewportHeight-a,c=r-i,h=o>=i,d=a,g=l>=i;let _=e.left;return _+t>n.scrollLeft+n.viewportWidth&&(_=n.scrollLeft+n.viewportWidth-t),_<n.scrollLeft&&(_=n.scrollLeft),{fitsAbove:h,aboveTop:c,fitsBelow:g,belowTop:d,left:_}}_layoutHorizontalSegmentInPage(e,t,i,n){const a=Math.max(15,t.left-n),l=Math.min(t.left+t.width+n,e.width-15),h=this._viewDomNode.domNode.ownerDocument.defaultView;let d=t.left+i-(h?.scrollX??0);if(d+n>l){const g=d-(l-n);d-=g,i-=g}if(d<a){const g=d-a;d-=g,i-=g}return[i,d]}_layoutBoxInPage(e,t,i,n){const r=e.top-i,o=e.top+e.height,a=pc(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,h=a.top+r-(c?.scrollY??0),d=a.top+o-(c?.scrollY??0),g=E3(l.body),[_,b]=this._layoutHorizontalSegmentInPage(g,a,e.left-n.scrollLeft+this._contentLeft,t),C=22,S=22,E=h>=C,x=d+i<=g.height-S;return this._fixedOverflowWidgets?{fitsAbove:E,aboveTop:Math.max(h,C),fitsBelow:x,belowTop:d,left:b}:{fitsAbove:E,aboveTop:r,fitsBelow:x,belowTop:o,left:_}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new wS(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){const t=r(this._primaryAnchor.viewPosition,this._affinity),i=this._secondaryAnchor.viewPosition?.lineNumber===this._primaryAnchor.viewPosition?.lineNumber?this._secondaryAnchor.viewPosition:null,n=r(i,this._affinity);return{primary:t,secondary:n};function r(o,a){if(!o)return null;const l=e.visibleRangeForPosition(o);if(!l)return null;const c=o.column===1&&a===3?0:l.left,h=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.scrollTop,d=e.getLineHeightForLineNumber(o.lineNumber);return new RW(h,c,d)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const n=this._context.configuration.options.get(59);let r=t.left;return r<e.left?r=Math.max(r,e.left-i+n.typicalFullwidthCharacterWidth):r=Math.min(r,e.left+i-n.typicalFullwidthCharacterWidth),new RW(e.top,r,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=zM(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const n=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let r;this.allowEditorOverflow?r=this._layoutBoxInPage(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):r=this._layoutBoxInViewport(n,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!r)return null;if(o===2||r.fitsAbove)return{kind:"inViewport",coordinate:new wS(r.aboveTop,r.left),position:1}}else if(a===2){if(!r)return null;if(o===2||r.fitsBelow)return{kind:"inViewport",coordinate:new wS(r.belowTop,r.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new wS(n.top,n.left)),position:0}:{kind:"inViewport",coordinate:new wS(n.top,n.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this._renderData?.kind==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&zM(this._actual.afterRender,this._actual,null,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&zM(this._actual.afterRender,this._actual,this._renderData.position,this._renderData.coordinate)}}class vS{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class wS{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class RW{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function zM(s,e,...t){try{return s.call(e,...t)}catch{return null}}class vp extends V0{}const za=At("themeService");function xv(s){return{id:s}}function L7(s){switch(s){case bc.DARK:return Qv.VS_DARK;case bc.HIGH_CONTRAST_DARK:return Qv.HC_BLACK;case bc.HIGH_CONTRAST_LIGHT:return Qv.HC_LIGHT;default:return Qv.VS}}const sY={ThemingContribution:"base.contributions.theming"};class _he extends pe{constructor(){super(),this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=this._register(new ne)}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),lt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const rY=new _he;or.add(sY.ThemingContribution,rY);function Lg(s){return rY.onColorThemeChange(s)}class bhe extends pe{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}const oY=Q("editor.lineHighlightBackground",null,y(607,"Background color for the highlight of line at the cursor position.")),MW=Q("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:ti},y(608,"Background color for the border around the line at the cursor position."));Q("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},y(609,"Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);Q("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:$n,hcLight:$n},y(610,"Background color of the border around highlighted ranges."));Q("editor.symbolHighlightBackground",{dark:Hm,light:Hm,hcDark:null,hcLight:null},y(611,"Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);Q("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:$n,hcLight:$n},y(612,"Background color of the border around highlighted symbols."));const IR=Q("editorCursor.foreground",{dark:"#AEAFAD",light:xe.black,hcDark:xe.white,hcLight:"#0F4A85"},y(613,"Color of the editor cursor.")),oB=Q("editorCursor.background",null,y(614,"The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),aY=Q("editorMultiCursor.primary.foreground",IR,y(615,"Color of the primary editor cursor when multiple cursors are present.")),vhe=Q("editorMultiCursor.primary.background",oB,y(616,"The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),lY=Q("editorMultiCursor.secondary.foreground",IR,y(617,"Color of secondary editor cursors when multiple cursors are present.")),whe=Q("editorMultiCursor.secondary.background",oB,y(618,"The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),aB=Q("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},y(619,"Color of whitespace characters in the editor.")),Che=Q("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:xe.white,hcLight:"#292929"},y(620,"Color of editor line numbers.")),yhe=Q("editorIndentGuide.background",aB,y(621,"Color of the editor indentation guides."),!1,y(622,"'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),She=Q("editorIndentGuide.activeBackground",aB,y(623,"Color of the active editor indentation guides."),!1,y(624,"'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),F2=Q("editorIndentGuide.background1",yhe,y(625,"Color of the editor indentation guides (1).")),Lhe=Q("editorIndentGuide.background2","#00000000",y(626,"Color of the editor indentation guides (2).")),xhe=Q("editorIndentGuide.background3","#00000000",y(627,"Color of the editor indentation guides (3).")),khe=Q("editorIndentGuide.background4","#00000000",y(628,"Color of the editor indentation guides (4).")),Ehe=Q("editorIndentGuide.background5","#00000000",y(629,"Color of the editor indentation guides (5).")),The=Q("editorIndentGuide.background6","#00000000",y(630,"Color of the editor indentation guides (6).")),V2=Q("editorIndentGuide.activeBackground1",She,y(631,"Color of the active editor indentation guides (1).")),Dhe=Q("editorIndentGuide.activeBackground2","#00000000",y(632,"Color of the active editor indentation guides (2).")),Nhe=Q("editorIndentGuide.activeBackground3","#00000000",y(633,"Color of the active editor indentation guides (3).")),Ihe=Q("editorIndentGuide.activeBackground4","#00000000",y(634,"Color of the active editor indentation guides (4).")),Ahe=Q("editorIndentGuide.activeBackground5","#00000000",y(635,"Color of the active editor indentation guides (5).")),Rhe=Q("editorIndentGuide.activeBackground6","#00000000",y(636,"Color of the active editor indentation guides (6).")),Mhe=Q("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:$n,hcLight:$n},y(637,"Color of editor active line number"),!1,y(638,"Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));Q("editorLineNumber.activeForeground",Mhe,y(639,"Color of editor active line number"));const Ohe=Q("editorLineNumber.dimmedForeground",null,y(640,"Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),Phe=Q("editorRuler.foreground",{dark:"#5A5A5A",light:xe.lightgrey,hcDark:xe.white,hcLight:"#292929"},y(641,"Color of the editor rulers."));Q("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},y(642,"Foreground color of editor CodeLens"));Q("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},y(643,"Background color behind matching brackets"));Q("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:ti,hcLight:ti},y(644,"Color for matching brackets boxes"));const Bhe=Q("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},y(645,"Color of the overview ruler border.")),Fhe=Q("editorOverviewRuler.background",null,y(646,"Background color of the editor overview ruler."));Q("editorGutter.background",ou,y(647,"Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));Q("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:xe.fromHex("#fff").transparent(.8),hcLight:ti},y(648,"Border color of unnecessary (unused) source code in the editor."));const Vhe=Q("editorUnnecessaryCode.opacity",{dark:xe.fromHex("#000a"),light:xe.fromHex("#0007"),hcDark:null,hcLight:null},y(649,`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));Q("editorGhostText.border",{dark:null,light:null,hcDark:xe.fromHex("#fff").transparent(.8),hcLight:xe.fromHex("#292929").transparent(.8)},y(650,"Border color of ghost text in the editor."));Q("editorGhostText.foreground",{dark:xe.fromHex("#ffffff56"),light:xe.fromHex("#0007"),hcDark:null,hcLight:null},y(651,"Foreground color of the ghost text in the editor."));Q("editorGhostText.background",null,y(652,"Background color of the ghost text in the editor."));const Hhe=new xe(new ge(0,122,204,.6));Q("editorOverviewRuler.rangeHighlightForeground",Hhe,y(653,"Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const Whe=Q("editorOverviewRuler.errorForeground",{dark:new xe(new ge(255,18,18,.7)),light:new xe(new ge(255,18,18,.7)),hcDark:new xe(new ge(255,50,50,1)),hcLight:"#B5200D"},y(654,"Overview ruler marker color for errors.")),zhe=Q("editorOverviewRuler.warningForeground",{dark:cp,light:cp,hcDark:IN,hcLight:IN},y(655,"Overview ruler marker color for warnings.")),Uhe=Q("editorOverviewRuler.infoForeground",{dark:p0,light:p0,hcDark:AN,hcLight:AN},y(656,"Overview ruler marker color for infos.")),cY=Q("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},y(657,"Foreground color of brackets (1). Requires enabling bracket pair colorization.")),uY=Q("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},y(658,"Foreground color of brackets (2). Requires enabling bracket pair colorization.")),hY=Q("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},y(659,"Foreground color of brackets (3). Requires enabling bracket pair colorization.")),dY=Q("editorBracketHighlight.foreground4","#00000000",y(660,"Foreground color of brackets (4). Requires enabling bracket pair colorization.")),fY=Q("editorBracketHighlight.foreground5","#00000000",y(661,"Foreground color of brackets (5). Requires enabling bracket pair colorization.")),gY=Q("editorBracketHighlight.foreground6","#00000000",y(662,"Foreground color of brackets (6). Requires enabling bracket pair colorization.")),qhe=Q("editorBracketHighlight.unexpectedBracket.foreground",{dark:new xe(new ge(255,18,18,.8)),light:new xe(new ge(255,18,18,.8)),hcDark:new xe(new ge(255,50,50,1)),hcLight:"#B5200D"},y(663,"Foreground color of unexpected brackets.")),$he=Q("editorBracketPairGuide.background1","#00000000",y(664,"Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),jhe=Q("editorBracketPairGuide.background2","#00000000",y(665,"Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Ghe=Q("editorBracketPairGuide.background3","#00000000",y(666,"Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Khe=Q("editorBracketPairGuide.background4","#00000000",y(667,"Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Yhe=Q("editorBracketPairGuide.background5","#00000000",y(668,"Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Zhe=Q("editorBracketPairGuide.background6","#00000000",y(669,"Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Xhe=Q("editorBracketPairGuide.activeBackground1","#00000000",y(670,"Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Qhe=Q("editorBracketPairGuide.activeBackground2","#00000000",y(671,"Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Jhe=Q("editorBracketPairGuide.activeBackground3","#00000000",y(672,"Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),ede=Q("editorBracketPairGuide.activeBackground4","#00000000",y(673,"Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),tde=Q("editorBracketPairGuide.activeBackground5","#00000000",y(674,"Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),ide=Q("editorBracketPairGuide.activeBackground6","#00000000",y(675,"Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));Q("editorUnicodeHighlight.border",cp,y(676,"Border color used to highlight unicode characters."));Q("editorUnicodeHighlight.background",vle,y(677,"Background color used to highlight unicode characters."));Lg((s,e)=>{const t=s.getColor(ou),i=s.getColor(oY),n=i&&!i.isTransparent()?i:t;n&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${n}; }`)});class mY extends vp{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(165);this._renderLineHighlight=t.get(110),this._renderLineHighlightOnlyWhenFocus=t.get(111),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Yt(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const r of this._selections)t.add(r.positionLineNumber);const i=Array.from(t);i.sort((r,o)=>r-o),vs(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const n=this._selections.every(r=>r.isEmpty());return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(165);return this._renderLineHighlight=t.get(110),this._renderLineHighlightOnlyWhenFocus=t.get(111),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=[];for(let o=t;o<=i;o++){const a=o-t;n[a]=""}if(this._wordWrap){const o=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new se(a,1)).lineNumber,h=l.convertModelPositionToViewPosition(new se(c,1)).lineNumber,d=l.convertModelPositionToViewPosition(new se(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,g=Math.max(h,t),_=Math.min(d,i);for(let b=g;b<=_;b++){const C=b-t;n[C]=o}}}const r=this._renderOne(e,!0);for(const o of this._cursorLineNumbers){if(o<t||o>i)continue;const a=o-t;n[a]=r}this._renderData=n}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class nde extends mY{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class sde extends mY{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Lg((s,e)=>{const t=s.getColor(oY);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||s.defines(MW)){const i=s.getColor(MW);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),Nw(s.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class rde extends vp{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(59).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(59).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],n=0;for(let l=0,c=t.length;l<c;l++){const h=t[l];h.options.className&&(i[n++]=h)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const h=l.options.className,d=c.options.className;return h<d?-1:h>d?1:ie.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',h=Math.max(l.range.startLineNumber,n),d=Math.min(l.range.endLineNumber,r);for(let g=h;g<=d;g++){const _=g-n;i[_]+=c}}}_renderNormalDecorations(e,t,i){const n=e.visibleRange.startLineNumber;let r=null,o=!1,a=null,l=!1;for(let c=0,h=t.length;c<h;c++){const d=t[c];if(d.options.isWholeLine)continue;const g=d.options.className,_=!!d.options.showIfCollapsed;let b=d.range;if(_&&b.endColumn===1&&b.endLineNumber!==b.startLineNumber&&(b=new ie(b.startLineNumber,b.startColumn,b.endLineNumber-1,this._context.viewModel.getLineMaxColumn(b.endLineNumber-1))),r===g&&o===_&&ie.areIntersectingOrTouching(a,b)){a=ie.plusRange(a,b);continue}r!==null&&this._renderNormalDecoration(e,a,r,l,o,n,i),r=g,o=_,a=b,l=d.options.shouldFillLineOnLineBreak??!1}r!==null&&this._renderNormalDecoration(e,a,r,l,o,n,i)}_renderNormalDecoration(e,t,i,n,r,o,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,h=l.length;c<h;c++){const d=l[c];if(d.outsideRenderedLine)continue;const g=d.lineNumber-o;if(r&&d.ranges.length===1){const _=d.ranges[0];if(_.width<this._typicalHalfwidthCharacterWidth){const b=Math.round(_.left+_.width/2),C=Math.max(0,Math.round(b-this._typicalHalfwidthCharacterWidth/2));d.ranges[0]=new P2(C,this._typicalHalfwidthCharacterWidth)}}for(let _=0,b=d.ranges.length;_<b;_++){const C=n&&d.continuesOnNextLine&&b===1,S=d.ranges[_],E='<div class="cdr '+i+'" style="left:'+String(S.left)+"px;width:"+(C?"100%;":String(S.width)+"px;")+'"></div>';a[g]+=E}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class ode extends ko{constructor(e,t,i,n){super(e);const r=this._context.configuration.options,o=r.get(117),a=r.get(83),l=r.get(49),c=r.get(120),h=r.get(158),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+L7(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage,inertialScroll:h};this.scrollbar=this._register(new TR(t.domNode,d,this._context.viewLayout.getScrollable())),lh.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=ei(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const g=(_,b,C)=>{const S={};{const E=_.scrollTop;E&&(S.scrollTop=this._context.viewLayout.getCurrentScrollTop()+E,_.scrollTop=0)}if(C){const E=_.scrollLeft;E&&(S.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+E,_.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(S,1)};this._register(ue(i.domNode,"scroll",_=>g(i.domNode,!0,!0))),this._register(ue(t.domNode,"scroll",_=>g(t.domNode,!0,!1))),this._register(ue(n.domNode,"scroll",_=>g(n.domNode,!0,!1))),this._register(ue(this.scrollbarDomNode.domNode,"scroll",_=>g(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(165);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(81).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(117)||e.hasChanged(83)||e.hasChanged(49)){const t=this._context.configuration.options,i=t.get(117),n=t.get(83),r=t.get(49),o=t.get(120),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(165)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+L7(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class x7{constructor(e,t,i,n,r){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=n,this._decorationToRenderBrand=void 0,this.zIndex=r??0}}class ade{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class lde{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class pY extends vp{_render(e,t,i){const n=[];for(let a=e;a<=t;a++){const l=a-e;n[l]=new lde}if(i.length===0)return n;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],h=c.className,d=c.zIndex;let g=Math.max(c.startLineNumber,e)-e;const _=Math.min(c.endLineNumber,t)-e;r===h?(g=Math.max(o+1,g),o=Math.max(o,_)):(r=h,o=_);for(let b=g;b<=o;b++)n[b].add(new ade(h,d,c.tooltip))}return n}}class cde extends ko{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(165);this.domNode=ei(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(75),this._glyphMargin=t.get(66),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(165);return this._lineHeight=t.get(75),this._glyphMargin=t.get(66),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=ei(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&ie.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=e.getDecorationsInViewport();for(const o of r){const a=o.options.glyphMarginClassName;if(!a)continue;const l=Math.max(o.range.startLineNumber,i),c=Math.min(o.range.endLineNumber,n),h=o.options.glyphMargin?.position??lp.Center,d=o.options.zIndex??0;for(let g=l;g<=c;g++){const _=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(g,0)),b=this._context.viewModel.glyphLanes.getLanesAtLine(_.lineNumber).indexOf(h);t.push(new ude(g,b,d,a))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(const r of Object.values(this._widgets)){const o=r.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(ie.lift(o));if(!a||!l||l<i||a>n)continue;const c=Math.max(a,i),h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(c,0)),d=this._context.viewModel.glyphLanes.getLanesAtLine(h.lineNumber).indexOf(r.preference.lane);t.push(new hde(c,d,r.preference.zIndex,r))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,n)=>i.lineNumber===n.lineNumber?i.laneIndex===n.laneIndex?i.zIndex===n.zIndex?n.type===i.type?i.type===0&&n.type===0?i.className<n.className?-1:1:0:n.type-i.type:n.zIndex-i.zIndex:i.laneIndex-n.laneIndex:i.lineNumber-n.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const n of Object.values(this._widgets))n.renderInfo=null;const t=new _g(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const n=t.peek();if(!n)break;const r=t.takeWhile(a=>a.lineNumber===n.lineNumber&&a.laneIndex===n.laneIndex);if(!r||r.length===0)break;const o=r[0];if(o.type===0){const a=[];for(const l of r){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;)this._managedDomNodes.pop()?.domNode.remove();return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const n=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(n),i.domNode.setLeft(r),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const n=this._decorationGlyphsToRender[i],r=n.lineNumber,o=e.viewportData.relativeVerticalOffset[r-e.viewportData.startLineNumber],a=this._glyphMarginLeft+n.laneIndex*this._lineHeight;let l;i<this._managedDomNodes.length?l=this._managedDomNodes[i]:(l=ei(document.createElement("div")),this._managedDomNodes.push(l),this.domNode.appendChild(l));const c=this._context.viewLayout.getLineHeightForLineNumber(r);l.setClassName("cgmr codicon "+n.combinedClassName),l.setPosition("absolute"),l.setTop(o),l.setLeft(a),l.setWidth(t),l.setHeight(c)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;)this._managedDomNodes.pop()?.domNode.remove()}}class ude{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=n,this.type=0}accept(e){return new dde(this.lineNumber,this.laneIndex,e)}}class hde{constructor(e,t,i,n){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=n,this.type=1}}class dde{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class _Y extends pe{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function fde(s,e){let t=0,i=0;const n=s.length;for(;i<n;){const r=s.charCodeAt(i);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;i++}return i===n?-1:t}var H1;(function(s){s[s.Disabled=0]="Disabled",s[s.EnabledForActive=1]="EnabledForActive",s[s.Enabled=2]="Enabled"})(H1||(H1={}));class k1{constructor(e,t,i,n,r,o){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=n,this.forWrappedLinesAfterColumn=r,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class mL{constructor(e,t){this.top=e,this.endColumn=t}}class gde extends _Y{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return fde(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new at("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,h=-1;const d=O=>{if(a!==-1&&(a===-2||a>O-1)){a=-1,l=-1;for(let V=O-2;V>=0;V--){const U=this._computeIndentLevel(V);if(U>=0){a=V,l=U;break}}}if(c===-2){c=-1,h=-1;for(let V=O;V<n;V++){const U=this._computeIndentLevel(V);if(U>=0){c=V,h=U;break}}}};let g=-2,_=-1,b=-2,C=-1;const S=O=>{if(g===-2){g=-1,_=-1;for(let V=O-2;V>=0;V--){const U=this._computeIndentLevel(V);if(U>=0){g=V,_=U;break}}}if(b!==-1&&(b===-2||b<O-1)){b=-1,C=-1;for(let V=O;V<n;V++){const U=this._computeIndentLevel(V);if(U>=0){b=V,C=U;break}}}};let E=0,x=!0,T=0,N=!0,A=0,P=0;for(let O=0;x||N;O++){const V=e-O,U=e+O;O>1&&(V<1||V<t)&&(x=!1),O>1&&(U>n||U>i)&&(N=!1),O>5e4&&(x=!1,N=!1);let Y=-1;if(x&&V>=1){const F=this._computeIndentLevel(V-1);F>=0?(c=V-1,h=F,Y=Math.ceil(F/this.textModel.getOptions().indentSize)):(d(V),Y=this._getIndentLevelForWhitespaceLine(o,l,h))}let B=-1;if(N&&U<=n){const F=this._computeIndentLevel(U-1);F>=0?(g=U-1,_=F,B=Math.ceil(F/this.textModel.getOptions().indentSize)):(S(U),B=this._getIndentLevelForWhitespaceLine(o,_,C))}if(O===0){P=Y;continue}if(O===1){if(U<=n&&B>=0&&P+1===B){x=!1,E=U,T=U,A=B;continue}if(V>=1&&Y>=0&&Y-1===P){N=!1,E=V,T=V,A=Y;continue}if(E=e,T=e,A=P,A===0)return{startLineNumber:E,endLineNumber:T,indent:A}}x&&(Y>=A?E=V:x=!1),N&&(B>=A?T=U:N=!1)}return{startLineNumber:E,endLineNumber:T,indent:A}}getLinesBracketGuides(e,t,i,n){const r=[];for(let d=e;d<=t;d++)r.push([]);const o=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new ie(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(i&&a.length>0){const d=(e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(ie.fromPositions(i)).toArray()).filter(g=>ie.strictContainsPosition(g.range,i));l=CN(d,g=>o)?.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,h=new bY;for(const d of a){if(!d.closingBracketRange)continue;const g=l&&d.range.equalsRange(l);if(!g&&!n.includeInactive)continue;const _=h.getInlineClassName(d.nestingLevel,d.nestingLevelOfEqualBracketType,c)+(n.highlightActive&&g?" "+h.activeClassName:""),b=d.openingBracketRange.getStartPosition(),C=d.closingBracketRange.getStartPosition(),S=n.horizontalGuides===H1.Enabled||n.horizontalGuides===H1.EnabledForActive&&g;if(d.range.startLineNumber===d.range.endLineNumber){S&&r[d.range.startLineNumber-e].push(new k1(-1,d.openingBracketRange.getEndPosition().column,_,new mL(!1,C.column),-1,-1));continue}const E=this.getVisibleColumnFromPosition(C),x=this.getVisibleColumnFromPosition(d.openingBracketRange.getStartPosition()),T=Math.min(x,E,d.minVisibleColumnIndentation+1);let N=!1;Pa(this.textModel.getLineContent(d.closingBracketRange.startLineNumber))<d.closingBracketRange.startColumn-1&&(N=!0);const O=Math.max(b.lineNumber,e),V=Math.min(C.lineNumber,t),U=N?1:0;for(let Y=O;Y<V+U;Y++)r[Y-e].push(new k1(T,-1,_,null,Y===b.lineNumber?b.column:-1,Y===C.lineNumber?C.column:-1));S&&(b.lineNumber>=e&&x>T&&r[b.lineNumber-e].push(new k1(T,-1,_,new mL(!1,b.column),-1,-1)),C.lineNumber<=t&&E>T&&r[C.lineNumber-e].push(new k1(T,-1,_,new mL(!N,C.column),-1,-1)))}for(const d of r)d.sort((g,_)=>g.visibleColumn-_.visibleColumn);return r}getVisibleColumnFromPosition(e){return wn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const n=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide),a=new Array(t-e+1);let l=-2,c=-1,h=-2,d=-1;for(let g=e;g<=t;g++){const _=g-e,b=this._computeIndentLevel(g-1);if(b>=0){l=g-1,c=b,a[_]=Math.ceil(b/n.indentSize);continue}if(l===-2){l=-1,c=-1;for(let C=g-2;C>=0;C--){const S=this._computeIndentLevel(C);if(S>=0){l=C,c=S;break}}}if(h!==-1&&(h===-2||h<g-1)){h=-1,d=-1;for(let C=g;C<i;C++){const S=this._computeIndentLevel(C);if(S>=0){h=C,d=S;break}}}a[_]=this._getIndentLevelForWhitespaceLine(o,c,d)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const n=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/n.indentSize):t===i||e?Math.ceil(i/n.indentSize):1+Math.floor(i/n.indentSize)}}class bY{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class mde extends vp{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(166),n=t.get(59);this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(22),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(166),n=t.get(59);return this._spaceWidth=n.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*n.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(22),!0}onCursorStateChanged(e){const i=e.selections[0].getPosition();return this._primaryPosition?.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=e.scrollWidth,r=this._primaryPosition,o=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),r),a=[];for(let l=t;l<=i;l++){const c=l-t,h=o[c];let d="";const g=e.visibleRangeForPosition(new se(l,1))?.left??0;for(const _ of h){const b=_.column===-1?g+(_.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new se(l,_.column)).left;if(b>n||this._maxIndentLeft>0&&b>this._maxIndentLeft)break;const C=_.horizontalLine?_.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",S=_.horizontalLine?(e.visibleRangeForPosition(new se(l,_.horizontalLine.endColumn))?.left??b+this._spaceWidth)-b:this._spaceWidth;d+=`<div class="core-guide ${_.className} ${C}" style="left:${b}px;width:${S}px"></div>`}a[c]=d}this._renderResult=a}getGuidesByLine(e,t,i){const n=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?H1.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?H1.EnabledForActive:H1.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const d=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);o=d.startLineNumber,a=d.endLineNumber,l=d.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),h=[];for(let d=e;d<=t;d++){const g=new Array;h.push(g);const _=n?n[d-e]:[],b=new _g(_),C=r?r[d-e]:0;for(let S=1;S<=C;S++){const E=(S-1)*c+1,x=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||_.length===0)&&o<=d&&d<=a&&S===l;g.push(...b.takeWhile(N=>N.visibleColumn<E)||[]);const T=b.peek();(!T||T.visibleColumn!==E||T.horizontalLine)&&g.push(new k1(E,-1,`core-guide-indent lvl-${(S-1)%30}`+(x?" indent-active":""),null,-1,-1))}g.push(...b.takeWhile(S=>!0)||[])}return h}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function kv(s){if(!(s&&s.isTransparent()))return s}Lg((s,e)=>{const t=[{bracketColor:cY,guideColor:$he,guideColorActive:Xhe},{bracketColor:uY,guideColor:jhe,guideColorActive:Qhe},{bracketColor:hY,guideColor:Ghe,guideColorActive:Jhe},{bracketColor:dY,guideColor:Khe,guideColorActive:ede},{bracketColor:fY,guideColor:Yhe,guideColorActive:tde},{bracketColor:gY,guideColor:Zhe,guideColorActive:ide}],i=new bY,n=[{indentColor:F2,indentColorActive:V2},{indentColor:Lhe,indentColorActive:Dhe},{indentColor:xhe,indentColorActive:Nhe},{indentColor:khe,indentColorActive:Ihe},{indentColor:Ehe,indentColorActive:Ahe},{indentColor:The,indentColorActive:Rhe}],r=t.map(a=>{const l=s.getColor(a.bracketColor),c=s.getColor(a.guideColor),h=s.getColor(a.guideColorActive),d=kv(kv(c)??l?.transparent(.3)),g=kv(kv(h)??l);if(!(!d||!g))return{guideColor:d,guideColorActive:g}}).filter(dc),o=n.map(a=>{const l=s.getColor(a.indentColor),c=s.getColor(a.indentColorActive),h=kv(l),d=kv(c);if(!(!h||!d))return{indentColor:h,indentColorActive:d}}).filter(dc);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});const pA=class pA extends vp{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new se(1,1),this._renderResult=null,this._activeModelLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(75);const t=e.get(76);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(109);const i=e.get(165);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeModelLineNumber!==this._lastCursorModelPosition.lineNumber&&(this._activeModelLineNumber=this._lastCursorModelPosition.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const n=Math.abs(this._lastCursorModelPosition.lineNumber-i);return n===0?'<span class="relative-current-line-number">'+i+"</span>":String(n)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const n=this._context.viewModel.getLineCount();return i===n?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Fa?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);r.sort((c,h)=>ie.compareRangesUsingEnds(c.range,h.range));let o=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=n;c++){const h=c-i,d=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(c,1)).lineNumber;let g=this._getLineRenderLineNumber(c),_="";for(;o<r.length&&r[o].range.endLineNumber<c;)o++;for(let b=o;b<r.length;b++){const{range:C,options:S}=r[b];C.startLineNumber<=c&&(_+=" "+S.lineNumberClassName)}if(!g&&!_){l[h]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(g=""),this._renderFinalNewline==="dimmed"&&(_+=" dimmed-line-number")),d===this._activeModelLineNumber&&(_+=" active-line-number"),l[h]=`<div class="${pA.CLASS_NAME}${t}${_}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${g}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};pA.CLASS_NAME="line-numbers";let zN=pA;Lg((s,e)=>{const t=s.getColor(Che),i=s.getColor(Ohe);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const Aw="monaco-mouse-cursor-text";class UM{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class UN{constructor(e,t){this.themeType=t;const i=e.options,n=i.get(59);this.renderWhitespace=i.get(113),this.experimentalWhitespaceRendering=i.get(47),this.renderControlCharacters=i.get(108),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.useMonospaceOptimizations=n.isMonospace&&!i.get(40),this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(75),this.stopRenderingLineAfter=i.get(133),this.fontLigatures=i.get(60),this.verticalScrollbarSize=i.get(117).verticalScrollbarSize,this.useGpu=i.get(46)==="on"}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.experimentalWhitespaceRendering===e.experimentalWhitespaceRendering&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures&&this.verticalScrollbarSize===e.verticalScrollbarSize&&this.useGpu===e.useGpu}}class pde{constructor(){this._currentVisibleRange=new ie(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class _de{constructor(e,t,i,n,r,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=n,this.startScrollTop=r,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class bde{constructor(e,t,i,n,r){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=n,this.scrollType=r,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const h=t[l];o=Math.min(o,h.startLineNumber),a=Math.max(a,h.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}const _A=class _A extends ko{constructor(e,t,i){super(e);const n=this._context.configuration,r=this._context.configuration.options,o=r.get(59),a=r.get(166);this._lineHeight=r.get(75),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=a.isViewportWrapping,this._revealHorizontalRightPadding=r.get(114),this._cursorSurroundingLines=r.get(35),this._cursorSurroundingLinesStyle=r.get(36),this._canUseLayerHinting=!r.get(39),this._viewLineOptions=new UN(n,this._context.theme.type),this._linesContent=i,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new iY(this._context,{createLine:()=>new ig(t,this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,lh.write(this.domNode,8),this.domNode.setClassName(`view-lines ${Aw}`),Sr(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Or(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Or(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new pde,this._horizontalRevealRequest=null,this._stickyScrollEnabled=r.get(131).enabled,this._maxNumberStickyLines=r.get(131).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(166)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(59),n=t.get(166);return this._lineHeight=t.get(75),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=n.isViewportWrapping,this._revealHorizontalRightPadding=t.get(114),this._cursorSurroundingLines=t.get(35),this._cursorSurroundingLinesStyle=t.get(36),this._canUseLayerHinting=!t.get(39),this._stickyScrollEnabled=t.get(131).enabled,this._maxNumberStickyLines=t.get(131).maxLineCount,Sr(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(165)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new UN(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=i;r<=n;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=!1;for(let r=t;r<=i;r++)n=this._visibleLines.getVisibleLine(r).onSelectionChanged()||n;return n}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e,this._viewLineOptions.useGpu);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new _de(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new bde(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const n=this._getLineNumberFor(i);if(n===-1||n<1||n>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(n)===1)return new se(n,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(n<r||n>o)return null;let a=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(n);return a<l&&(a=l),new se(n,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===ig.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let n=t;n<=i;n++){const r=this._visibleLines.getVisibleLine(n);if(e===r.getDomNode())return n}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const n=new UM(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getWidth(n);return this._updateLineWidthsSlowIfDomDidLayout(n),r}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,n=ie.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;const r=[];let o=0;const a=new UM(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(n.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let d=n.startLineNumber;d<=n.endLineNumber;d++){if(d<c||d>h)continue;const g=d===n.startLineNumber?n.startColumn:1,_=d!==i,b=_?this._context.viewModel.getLineMaxColumn(d):n.endColumn,S=this._visibleLines.getVisibleLine(d).getVisibleRangesForRange(d,g,b,a);if(S){if(t&&d<i){const E=l;if(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(d+1,1)).lineNumber,E!==l){const x=S.ranges[S.ranges.length-1];x.width+=this._typicalHalfwidthCharacterWidth,this._context.viewModel.getTextDirection(E)===El.RTL&&(x.left-=this._typicalHalfwidthCharacterWidth)}}r[o++]=new HK(S.outsideRenderedLine,d,P2.from(S.ranges),_)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:r}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const n=new UM(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,n);return this._updateLineWidthsSlowIfDomDidLayout(n),r}_lineIsRenderedRTL(e){return e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?!1:this._visibleLines.getVisibleLine(e).isRenderedRTL()}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new WK(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let n=1,r=!0;for(let o=t;o<=i;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}n=Math.max(n,a.getWidth(null))}return r&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=i;r<=n;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=i;r<=n;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const n=this._computeScrollLeftToReveal(i);n&&(!this._isViewportWrapping&&!n.hasRTL&&this._ensureMaxLineWidth(n.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:n.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Fa&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=i;r<=n;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,n,r,o){const a=e.top,l=e.height,c=a+l;let h,d,g;if(r&&r.length>0){let E=r[0].startLineNumber,x=r[0].endLineNumber;for(let T=1,N=r.length;T<N;T++){const A=r[T];E=Math.min(E,A.startLineNumber),x=Math.max(x,A.endLineNumber)}h=!1,d=this._context.viewLayout.getVerticalOffsetForLineNumber(E),g=this._context.viewLayout.getVerticalOffsetForLineNumber(x)+this._lineHeight}else if(n)h=!0,d=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),g=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;const _=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let b=0,C=0;if(_)i||(b=this._lineHeight);else{const E=l/this._lineHeight,x=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),T=Math.min(E/2,x);b=T*this._lineHeight,C=Math.max(0,T-1)*this._lineHeight}i||(o===0||o===4)&&(C+=this._lineHeight),d-=b,g+=C;let S;if(g-d>l){if(!h)return-1;S=d}else if(o===5||o===6)if(o===6&&a<=d&&g<=c)S=a;else{const E=Math.max(5*this._lineHeight,l*.2),x=d-E,T=g-l;S=Math.max(T,x)}else if(o===1||o===2)if(o===2&&a<=d&&g<=c)S=a;else{const E=(d+g)/2;S=Math.max(0,E-l/2)}else S=this._computeMinimumScrolling(a,c,d,g,o===3,o===4);return S}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(165),n=t.left,r=n+t.width-i.verticalScrollbarWidth;let o=1073741824,a=0,l=!1;if(e.type==="range"){l=this._lineIsRenderedRTL(e.lineNumber);const h=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!h)return null;for(const d of h.ranges)o=Math.min(o,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const h of e.selections){if(h.startLineNumber!==h.endLineNumber)return null;const d=this._visibleRangesForLineRange(h.startLineNumber,h.startColumn,h.endColumn);if(l||=this._lineIsRenderedRTL(h.startLineNumber),!d)return null;for(const g of d.ranges)o=Math.min(o,Math.round(g.left)),a=Math.max(a,Math.round(g.left+g.width))}return e.minimalReveal||(o=Math.max(0,o-_A.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,r,o,a),maxHorizontalOffset:a,hasRTL:l}}_computeMinimumScrolling(e,t,i,n,r,o){e=e|0,t=t|0,i=i|0,n=n|0,r=!!r,o=!!o;const a=t-e;if(n-i<a){if(r)return i;if(o)return Math.max(0,n-a);if(i<e)return i;if(n>t)return Math.max(0,n-a)}else return i;return e}};_A.HORIZONTAL_EXTRA_PX=30;let k7=_A;class vde extends pY{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(165);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(165);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[n++]=new x7(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const h=a.options.firstLineDecorationClassName;h&&(i[n++]=new x7(a.range.startLineNumber,a.range.startLineNumber,h,a.options.linesDecorationsTooltip??null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=i;c++){const h=c-t,d=n[h].getDecorations();let g="";for(const _ of d){let b='<div class="cldr '+_.className;_.tooltip!==null&&(b+='" title="'+_.tooltip),b+=a,g+=b}l[h]=g}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const mw=class mw extends ko{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(165);this._canUseLayerHinting=!t.get(39),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=ei(document.createElement("div")),this._domNode.setClassName(mw.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ei(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(mw.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(165);return this._canUseLayerHinting=!t.get(39),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};mw.CLASS_NAME="glyph-margin",mw.OUTER_CLASS_NAME="margin";let qN=mw;class wde extends pY{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let n=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[n++]=new x7(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),r=[];for(let o=t;o<=i;o++){const a=o-t,l=n[a].getDecorations();let c="";for(const h of l)c+='<div class="cmdr '+h.className+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const Dm=class Dm{constructor(e,t,i,n){this._rgba8Brand=void 0,this.r=Dm._clamp(e),this.g=Dm._clamp(t),this.b=Dm._clamp(i),this.a=Dm._clamp(n)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};Dm.Empty=new Dm(0,0,0,0);let mg=Dm;const bA=class bA extends pe{static getInstance(){return this._INSTANCE||(this._INSTANCE=new bA),this._INSTANCE}constructor(){super(),this._onDidChange=new ne,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(es.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=es.getColorMap();if(!e){this._colors=[mg.Empty],this._backgroundIsLight=!0;return}this._colors=[mg.Empty];for(let i=1;i<e.length;i++){const n=e[i].rgba;this._colors[i]=new mg(n.r,n.g,n.b,Math.round(n.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};bA._INSTANCE=null;let $N=bA;const Cde=(()=>{const s=[];for(let e=32;e<=126;e++)s.push(e);return s.push(65533),s})(),yde=(s,e)=>(s-=32,s<0||s>96?e<=2?(s+96)%96:95:s);class Fx{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Fx.soften(e,12/15),this.charDataLight=Fx.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=bN(e[n]*t);return i}renderChar(e,t,i,n,r,o,a,l,c,h,d){const g=1*this.scale,_=2*this.scale,b=d?1:_;if(t+g>e.width||i+b>e.height){console.warn("bad render request outside image data");return}const C=h?this.charDataLight:this.charDataNormal,S=yde(n,c),E=e.width*4,x=a.r,T=a.g,N=a.b,A=r.r-x,P=r.g-T,O=r.b-N,V=Math.max(o,l),U=e.data;let Y=S*g*_,B=i*E+t*4;for(let F=0;F<b;F++){let W=B;for(let ee=0;ee<g;ee++){const X=C[Y++]/255*(o/255);U[W++]=x+A*X,U[W++]=T+P*X,U[W++]=N+O*X,U[W++]=V}B+=E}}blockRenderChar(e,t,i,n,r,o,a,l){const c=1*this.scale,h=2*this.scale,d=l?1:h;if(t+c>e.width||i+d>e.height){console.warn("bad render request outside image data");return}const g=e.width*4,_=.5*(r/255),b=o.r,C=o.g,S=o.b,E=n.r-b,x=n.g-C,T=n.b-S,N=b+E*_,A=C+x*_,P=S+T*_,O=Math.max(r,a),V=e.data;let U=i*g+t*4;for(let Y=0;Y<d;Y++){let B=U;for(let F=0;F<c;F++)V[B++]=N,V[B++]=A,V[B++]=P,V[B++]=O;U+=g}}}const OW={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},PW=s=>{const e=new Uint8ClampedArray(s.length/2);for(let t=0;t<s.length;t+=2)e[t>>1]=OW[s[t]]<<4|OW[s[t+1]]&15;return e},BW={1:dx(()=>PW("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:dx(()=>PW("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class pL{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return BW[e]?i=new Fx(BW[e](),e):i=pL.createFromSampleData(pL.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=960,t.style.width="960px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let n=0;for(const r of Cde)i.fillText(String.fromCharCode(r),n,16/2),n+=10;return i.getImageData(0,0,960,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const n=pL._downsample(e,t);return new Fx(n,t)}static _downsampleChar(e,t,i,n,r){const o=1*r,a=2*r;let l=n,c=0;for(let h=0;h<a;h++){const d=h/a*16,g=(h+1)/a*16;for(let _=0;_<o;_++){const b=_/o*10,C=(_+1)/o*10;let S=0,E=0;for(let T=d;T<g;T++){const N=t+Math.floor(T)*3840,A=1-(T-Math.floor(T));for(let P=b;P<C;P++){const O=1-(P-Math.floor(P)),V=N+Math.floor(P)*4,U=O*A;E+=U,S+=e[V]*e[V+3]/255*U}}const x=S/E;c=Math.max(c,x),i[l++]=bN(x)}}return c}static _downsample(e,t){const i=2*t*1*t,n=i*96,r=new Uint8ClampedArray(n);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=i,a+=40;if(l>0){const c=255/l;for(let h=0;h<n;h++)r[h]*=c}return r}}const Sde=ia?'"Segoe WPC", "Segoe UI", sans-serif':Bt?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif';class vY{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}function Lde(s,e){return!(e.options.hideInCommentTokens&&xde(s,e)||e.options.hideInStringTokens&&kde(s,e))}function xde(s,e){return wY(s,e.range,t=>t===1)}function kde(s,e){return wY(s,e.range,t=>t===2)}function wY(s,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const n=s.tokenization.getLineTokens(i),r=i===e.startLineNumber,o=i===e.endLineNumber;let a=r?n.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<n.getCount()&&!(o&&n.getStartOffset(a)>e.endColumn-1);){if(!t(n.getStandardTokenType(a)))return!1;a++}}return!0}const Ede=140,Tde=2;class Rw{constructor(e,t,i){const n=e.options,r=n.get(163),o=n.get(165),a=o.minimap,l=n.get(59),c=n.get(81);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(119),this.paddingTop=n.get(96).top,this.paddingBottom=n.get(96).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(75),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=Sde,this.sectionHeaderFontSize=c.sectionHeaderFontSize*r,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=Rw._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=dx(()=>pL.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=Rw._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Rw._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(Fle);return i?new mg(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(Vle);return t?mg._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(R2);return i?new mg(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class _L{constructor(e,t,i,n,r,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=r,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,n,r,o,a,l,c,h,d){const g=e.pixelRatio,_=e.minimapLineHeight,b=Math.floor(e.canvasInnerHeight/_),C=e.lineHeight;if(e.minimapHeightIsEditorHeight){let P=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(P+=Math.max(0,r-e.lineHeight-e.paddingBottom));const O=Math.max(1,Math.floor(r*r/P)),V=Math.max(0,e.minimapHeight-O),U=V/(h-r),Y=c*U,B=V>0,F=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),W=Math.floor(e.paddingTop/e.lineHeight);return new _L(c,h,B,U,Y,O,W,1,Math.min(a,F))}let S;if(o&&i!==a){const P=i-t+1;S=Math.floor(P*_/g)}else{const P=r/C;S=Math.floor(P*_/g)}const E=Math.floor(e.paddingTop/C);let x=Math.floor(e.paddingBottom/C);if(e.scrollBeyondLastLine){const P=r/C;x=Math.max(x,P-1)}let T;if(x>0){const P=r/C;T=(E+a+x-P-1)*_/g}else T=Math.max(0,(E+a)*_/g-S);T=Math.min(e.minimapHeight-S,T);const N=T/(h-r),A=c*N;if(b>=E+a+x){const P=T>0;return new _L(c,h,P,N,A,S,E,1,a)}else{let P;t>1?P=t+E:P=Math.max(1,c/C);let O,V=Math.max(1,Math.floor(P-A*g/_));V<E?(O=E-V+1,V=1):(O=0,V=Math.max(1,V-E)),d&&d.scrollHeight===h&&(d.scrollTop>c&&(V=Math.min(V,d.startLineNumber),O=Math.max(O,d.topPaddingLineCount)),d.scrollTop<c&&(V=Math.max(V,d.startLineNumber),O=Math.min(O,d.topPaddingLineCount)));const U=Math.min(a,V-O+b-1),Y=(c-n)/C;let B;return c>=e.paddingTop?B=(t-V+O+Y)*_/g:B=c/e.paddingTop*(O+Y)*_/g,new _L(c,h,!0,N,B,S,O,V,U)}}}const vA=class vA{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};vA.INVALID=new vA(-1);let jN=vA;class FW{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new tY({createLine:()=>jN.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let n=0,r=i.length;n<r;n++)if(i[n].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class lB{constructor(e,t,i,n){this._backgroundFillData=lB._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const n=i.r,r=i.g,o=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let h=0;h<t;h++)for(let d=0;d<e;d++)l[c]=n,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class Vx{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:n}=yw.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),r=t/n,o=r/2;if(!i||i.minimapLines.length===0){const S=[];if(S[0]=1,n>1){for(let E=0,x=n-1;E<x;E++)S[E]=Math.round(E*r+o);S[n-1]=t}return[new Vx(r,S),[]]}const a=i.minimapLines,l=a.length,c=[];let h=0,d=0,g=1;const _=10;let b=[],C=null;for(let S=0;S<n;S++){const E=Math.max(g,Math.round(S*r)),x=Math.max(E,Math.round((S+1)*r));for(;h<l&&a[h]<E;){if(b.length<_){const N=h+1+d;C&&C.type==="deleted"&&C._oldIndex===h-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:h,deleteFromLineNumber:N,deleteToLineNumber:N},b.push(C)),d--}h++}let T;if(h<l&&a[h]<=x)T=a[h],h++;else if(S===0?T=1:S+1===n?T=t:T=Math.round(S*r+o),b.length<_){const N=h+1+d;C&&C.type==="inserted"&&C._i===S-1?C.insertToLineNumber++:(C={type:"inserted",_i:S,insertFromLineNumber:N,insertToLineNumber:N},b.push(C)),d++}c[S]=T,g=T}if(b.length<_)for(;h<l;){const S=h+1+d;C&&C.type==="deleted"&&C._oldIndex===h-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:h,deleteFromLineNumber:S,deleteToLineNumber:S},b.push(C)),d--,h++}else b=[{type:"flush"}];return[new Vx(r,c),b]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){const r=this.minimapLines[i];if(r<e||r>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,n=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,r),n=Math.max(n,r)):this.minimapLines[r]-=t;return[i,n]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class Dde extends ko{constructor(e){super(e),this._sectionHeaderCache=new T2(10,1.5),this.tokensColorTracker=$N.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Rw(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Vx.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new ew(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Rw(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged(e)}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const n=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);n&&t.push({fromLineNumber:n[0],toLineNumber:n[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=Vx.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const n of i)switch(n.type){case"deleted":this._actual.onLinesDeleted(n.deleteFromLineNumber,n.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(n.insertFromLineNumber,n.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const n=[];for(let r=0,o=t-e+1;r<o;r++)i[r]?n[r]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+r-1]):n[r]=null;return n}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Yt(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){return this._getMinimapDecorationsInViewport(e,t).filter(i=>!i.options.minimap?.sectionHeaderStyle)}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.sectionHeaderFontSize/this.options.minimapLineHeight;return e=Math.floor(Math.max(1,e-i)),this._getMinimapDecorationsInViewport(e,t).filter(n=>!!n.options.minimap?.sectionHeaderStyle)}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const r=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];i=new ie(r,1,o,this._context.viewModel.getLineMaxColumn(o))}else i=new ie(e,1,t,this._context.viewModel.getLineMaxColumn(t));const n=this._context.viewModel.getMinimapDecorationsInRange(i);if(this._samplingState){const r=[];for(const o of n){if(!o.options.minimap)continue;const a=o.range,l=this._samplingState.modelLineToMinimapLine(a.startLineNumber),c=this._samplingState.modelLineToMinimapLine(a.endLineNumber);r.push(new vY(new ie(l,a.startColumn,c,a.endColumn),o.options))}return r}return n}getSectionHeaderText(e,t){const i=e.options.minimap?.sectionHeaderText;if(!i)return null;const n=this._sectionHeaderCache.get(i);if(n)return n;const r=t(i);return this._sectionHeaderCache.set(i,r),r}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new ie(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class ew extends pe{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._isMouseOverMinimap=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(CW),this._domNode=ei(document.createElement("div")),lh.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ei(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ei(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ei(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ei(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ei(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._hideDelayedScheduler=this._register(new Or(()=>this._hideImmediatelyIfMouseIsOutside(),500)),this._register(Cr(this._domNode.domNode,Re.MOUSE_OVER,()=>{this._isMouseOverMinimap=!0})),this._register(Cr(this._domNode.domNode,Re.MOUSE_LEAVE,()=>{this._isMouseOverMinimap=!1})),this._pointerDownListener=Cr(this._domNode.domNode,Re.POINTER_DOWN,i=>{i.preventDefault();const n=i.pointerType==="mouse",r=i.button===0;if(this._model.options.renderMinimap!==0&&this._lastRenderData){if(this._model.options.size!=="proportional"){if(r&&this._lastRenderData){const a=pc(this._slider.domNode),l=a.top+a.height/2;this._startSliderDragging(i,l,this._lastRenderData.renderedLayout)}return}if(r||!n){const a=this._model.options.minimapLineHeight,l=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let h=Math.floor(l/a)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;h=Math.min(h,this._model.getLineCount()),this._model.revealLineNumber(h)}}}),this._sliderPointerMoveMonitor=new yR,this._sliderPointerDownListener=Cr(this._slider.domNode,Re.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Co.addTarget(this._domNode.domNode),this._sliderTouchStartListener=ue(this._domNode.domNode,ji.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=ue(this._domNode.domNode,ji.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Cr(this._domNode.domNode,ji.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_hideSoon(){this._hideDelayedScheduler.cancel(),this._hideDelayedScheduler.schedule()}_hideImmediatelyIfMouseIsOutside(){if(this._isMouseOverMinimap){this._hideSoon();return}this._domNode.toggleClassName("active",!1)}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const n=e.pageX;this._slider.toggleClassName("active",!0);const r=(o,a)=>{const l=pc(this._domNode.domNode),c=Math.min(Math.abs(a-n),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(ia&&c>Ede){this._model.setScrollTop(i.scrollTop);return}const h=o-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(h))};e.pageY!==t&&r(e.pageY,n),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>r(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide==="mouseover"?e.push("minimap-autohide-mouseover"):this._model.options.autohide==="scroll"&&e.push("minimap-autohide-scroll"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new lB(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData?.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData?.onLinesInserted(e,t),!0}onScrollChanged(e){return this._model.options.autohide==="scroll"&&(e.scrollTopChanged||e.scrollHeightChanged)&&(this._domNode.toggleClassName("active",!0),this._hideSoon()),this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(CW),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=_L.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(ie.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((g,_)=>(g.options.zIndex||0)-(_.options.zIndex||0));const{canvasInnerWidth:n,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,n,r);const h=new VW(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,h,e,o),this._renderDecorationsLineHighlights(c,i,h,e,o);const d=new VW(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,d,e,o,l,a,n),this._renderDecorationsHighlights(c,i,d,e,o,l,a,n),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,n,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=n.intersectWithViewport(l);if(!c)continue;const[h,d]=c;for(let b=h;b<=d;b++)i.set(b,!0);const g=n.getYForLineNumber(h,r),_=n.getYForLineNumber(d,r);a>=g||(a>o&&e.fillRect(td,o,e.canvas.width,a-o),o=g),a=_}a>o&&e.fillRect(td,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,i,n,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const h=n.intersectWithViewport(l.range);if(!h)continue;const[d,g]=h,_=c.getColor(this._theme.value);if(!_||_.isTransparent())continue;let b=o.get(_.toString());b||(b=_.transparent(.5).toString(),o.set(_.toString(),b)),e.fillStyle=b;for(let C=d;C<=g;C++){if(i.has(C))continue;i.set(C,!0);const S=n.getYForLineNumber(d,r);e.fillRect(td,S,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,i,n,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const h=n.intersectWithViewport(c);if(!h)continue;const[d,g]=h;for(let _=d;_<=g;_++)this.renderDecorationOnLine(e,i,c,this._selectionColor,n,_,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,i,n,r,o,a,l){for(const c of t){const h=c.options.minimap;if(!h)continue;const d=n.intersectWithViewport(c.range);if(!d)continue;const[g,_]=d,b=h.getColor(this._theme.value);if(!(!b||b.isTransparent()))for(let C=g;C<=_;C++)switch(h.position){case 1:this.renderDecorationOnLine(e,i,c.range,b,n,C,r,r,o,a,l);continue;case 2:{const S=n.getYForLineNumber(C,r);this.renderDecoration(e,b,2,S,Tde,r);continue}}}}renderDecorationOnLine(e,t,i,n,r,o,a,l,c,h,d){const g=r.getYForLineNumber(o,l);if(g+a<0||g>this._model.options.canvasInnerHeight)return;const{startLineNumber:_,endLineNumber:b}=i,C=_===o?i.startColumn:1,S=b===o?i.endColumn:this._model.getLineMaxColumn(o),E=this.getXOffsetForPosition(t,o,C,c,h,d),x=this.getXOffsetForPosition(t,o,S,c,h,d);this.renderDecoration(e,n,E,g,x-E,a)}getXOffsetForPosition(e,t,i,n,r,o){if(i===1)return td;if((i-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[td];let h=td;for(let d=1;d<c.length+1;d++){const g=c.charCodeAt(d-1),_=g===9?n*r:op(g)?2*r:r,b=h+_;if(b>=o){l[d]=o;break}l[d]=b,h=b}e.set(t,l)}return i-1<l.length?l[i-1]:o}renderDecoration(e,t,i,n,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,r,o)}_renderSectionHeaders(e){const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,n=this._model.options.sectionHeaderLetterSpacing,r=i*1.5,{canvasInnerWidth:o}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,h=`rgb(${c.r} ${c.g} ${c.b})`,d=h,g=this._decorationsCanvas.domNode.getContext("2d");g.letterSpacing=n+"px",g.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,g.strokeStyle=d,g.lineWidth=.4;const _=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);_.sort((C,S)=>C.range.startLineNumber-S.range.startLineNumber);const b=ew._fitSectionHeader.bind(null,g,o-td);for(const C of _){const S=e.getYForLineNumber(C.range.startLineNumber,t)+i,E=S-i,x=E+2,T=this._model.getSectionHeaderText(C,b);ew._renderSectionLabel(g,T,C.options.minimap?.sectionHeaderStyle===2,l,h,o,E,r,S,x)}}static _fitSectionHeader(e,t,i){if(!i)return i;const n="…",r=e.measureText(i).width,o=e.measureText(n).width;if(r<=t||r<=o)return i;const a=i.length,l=r/i.length,c=Math.floor((t-o)/l)-1;let h=Math.ceil(c/2);for(;h>0&&/\s/.test(i[h-1]);)--h;return i.substring(0,h)+n+i.substring(a-(c-h))}static _renderSectionLabel(e,t,i,n,r,o,a,l,c,h){t&&(e.fillStyle=n,e.fillRect(0,a,o,l),e.fillStyle=r,e.fillText(t,td,c)),i&&(e.beginPath(),e.moveTo(0,h),e.lineTo(o,h),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const X=this._lastRenderData._get();return new FW(e,X.imageData,X.lines)}const r=this._getBuffer();if(!r)return null;const[o,a,l]=ew._renderUntouchedLines(r,e.topPaddingLineCount,t,i,n,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),h=this._model.getOptions().tabSize,d=this._model.options.defaultBackgroundColor,g=this._model.options.backgroundColor,_=this._model.options.foregroundAlpha,b=this._model.tokensColorTracker,C=b.backgroundIsLight(),S=this._model.options.renderMinimap,E=this._model.options.charRenderer(),x=this._model.options.fontScale,T=this._model.options.minimapCharWidth,A=(S===1?2:3)*x,P=n>A?Math.floor((n-A)/2):0,O=g.a/255,V=new mg(Math.round((g.r-d.r)*O+d.r),Math.round((g.g-d.g)*O+d.g),Math.round((g.b-d.b)*O+d.b),255);let U=e.topPaddingLineCount*n;const Y=[];for(let X=0,$=i-t+1;X<$;X++)l[X]&&ew._renderLine(r,V,g.a,C,S,T,b,_,E,U,P,h,c[X],x,n),Y[X]=new jN(U),U+=n;const B=o===-1?0:o,W=(a===-1?r.height:a)-B;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,B,r.width,W),new FW(e,r,Y)}static _renderUntouchedLines(e,t,i,n,r,o){const a=[];if(!o){for(let U=0,Y=n-i+1;U<Y;U++)a[U]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,h=l.rendLineNumberStart,d=l.lines,g=d.length,_=e.width,b=e.data,C=(n-i+1)*r*_*4;let S=-1,E=-1,x=-1,T=-1,N=-1,A=-1,P=t*r;for(let U=i;U<=n;U++){const Y=U-i,B=U-h,F=B>=0&&B<g?d[B].dy:-1;if(F===-1){a[Y]=!0,P+=r;continue}const W=F*_*4,ee=(F+r)*_*4,X=P*_*4,$=(P+r)*_*4;T===W&&A===X?(T=ee,A=$):(x!==-1&&(b.set(c.subarray(x,T),N),S===-1&&x===0&&x===N&&(S=T),E===-1&&T===C&&x===N&&(E=x)),x=W,T=ee,N=X,A=$),a[Y]=!1,P+=r}x!==-1&&(b.set(c.subarray(x,T),N),S===-1&&x===0&&x===N&&(S=T),E===-1&&T===C&&x===N&&(E=x));const O=S===-1?-1:S/(_*4),V=E===-1?-1:E/(_*4);return[O,V,a]}static _renderLine(e,t,i,n,r,o,a,l,c,h,d,g,_,b,C){const S=_.content,E=_.tokens,x=e.width-o,T=C===1;let N=td,A=0,P=0;for(let O=0,V=E.getCount();O<V;O++){const U=E.getEndOffset(O),Y=E.getForeground(O),B=a.getColor(Y);for(;A<U;A++){if(N>x)return;const F=S.charCodeAt(A);if(F===9){const W=g-(A+P)%g;P+=W-1,N+=W*o}else if(F===32)N+=o;else{const W=op(F)?2:1;for(let ee=0;ee<W;ee++)if(r===2?c.blockRenderChar(e,N,h+d,B,l,t,i,T):c.renderChar(e,N,h+d,F,B,l,t,i,b,n,T),N+=o,N>x)return}}}}}class VW{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let n=0,r=this._endLineNumber-this._startLineNumber+1;n<r;n++)this._values[n]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class Nde extends ko{constructor(e,t){super(e),this._viewDomNode=t;const n=this._context.configuration.options.get(165);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=ei(document.createElement("div")),lh.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=ei(document.createElement("div")),lh.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(165);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}_widgetCanOverflow(e){const i=this._context.configuration.options.get(4);return(e.allowEditorOverflow||!1)&&i}addWidget(e){const t=ei(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._widgetCanOverflow(e)?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],n=t?t.preference:null,r=t?.stackOridinal;return i.preference===n&&i.stack===r?(this._updateMaxMinWidth(),!1):(i.preference=n,i.stack=r,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t].domNode.domNode;delete this._widgets[t],n.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let e=0;const t=Object.keys(this._widgets);for(let i=0,n=t.length;i<n;i++){const r=t[i],a=this._widgets[r].widget.getMinContentWidthInPx?.();typeof a<"u"&&(e=Math.max(e,a))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const n=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const r=i.domNode.clientHeight;i.setTop(this._editorHeight-r-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(n)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:r,left:o}=e.preference;if(this._context.configuration.options.get(51)&&this._widgetCanOverflow(e.widget)){const l=this._viewDomNodeRect;i.setTop(r+l.top),i.setLeft(o+l.left),i.setPosition("fixed")}else i.setTop(r),i.setLeft(o),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=pc(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((n,r)=>(this._widgets[n].stack||0)-(this._widgets[r].stack||0));for(let n=0,r=t.length;n<r;n++){const o=t[n];this._renderWidget(this._widgets[o],i)}}}class Ide{constructor(e,t){const i=e.options;this.lineHeight=i.get(75),this.pixelRatio=i.get(163),this.overviewRulerLanes=i.get(95),this.renderBorder=i.get(94);const n=t.getColor(Bhe);this.borderColor=n?n.toString():null,this.hideCursor=i.get(68);const r=t.getColor(IR);this.cursorColorSingle=r?r.transparent(.7).toString():null;const o=t.getColor(aY);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const a=t.getColor(lY);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(81),c=l.enabled,h=l.side,d=t.getColor(Fhe),g=es.getDefaultBackground();d?this.backgroundColor=d:c&&h==="right"?this.backgroundColor=g:this.backgroundColor=null;const b=i.get(165).overviewRuler;this.top=b.top,this.right=b.right,this.domWidth=b.width,this.domHeight=b.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[C,S]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=C,this.w=S}_initLanes(e,t,i){const n=t-e;if(i>=3){const r=Math.floor(n/3),o=Math.floor(n/3),a=n-r-o,l=e,c=l+r,h=l+r+a;return[[0,l,c,l,h,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(i===2){const r=Math.floor(n/2),o=n-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=n;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&xe.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class Ade extends ko{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=ei(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=es.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new se(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Ide(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let n=this._settings.cursorColorSingle;i>1&&(n=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:n})}return this._cursorPositions.sort((t,i)=>se.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?xe.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(Nx.compareByRenderingProps),this._actualShouldRender===1&&!Nx.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!vs(this._renderedCursorPositions,this._cursorPositions,(b,C)=>b.position.lineNumber===C.position.lineNumber&&b.color===C.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,n=this._settings.canvasHeight,r=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=n/a,c=6*this._settings.pixelRatio|0,h=c/2|0,d=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(d.fillStyle=xe.Format.CSS.formatHexA(e),d.fillRect(0,0,i,n)):(d.clearRect(0,0,i,n),d.fillStyle=xe.Format.CSS.formatHexA(e),d.fillRect(0,0,i,n)):d.clearRect(0,0,i,n);const g=this._settings.x,_=this._settings.w;for(const b of t){const C=b.color,S=b.data;d.fillStyle=C;let E=0,x=0,T=0;for(let N=0,A=S.length/3;N<A;N++){const P=S[3*N],O=S[3*N+1],V=S[3*N+2];let U=o.getVerticalOffsetForLineNumber(O)*l|0,Y=(o.getVerticalOffsetForLineNumber(V)+r)*l|0;if(Y-U<c){let F=(U+Y)/2|0;F<h?F=h:F+h>n&&(F=n-h),U=F-h,Y=F+h}U>T+1||P!==E?(N!==0&&d.fillRect(g[E],x,_[E],T-x),E=P,x=U,T=Y):Y>T&&(T=Y)}d.fillRect(g[E],x,_[E],T-x)}if(!this._settings.hideCursor){const b=2*this._settings.pixelRatio|0,C=b/2|0,S=this._settings.x[7],E=this._settings.w[7];let x=-100,T=-100,N=null;for(let A=0,P=this._cursorPositions.length;A<P;A++){const O=this._cursorPositions[A].color;if(!O)continue;const V=this._cursorPositions[A].position;let U=o.getVerticalOffsetForLineNumber(V.lineNumber)*l|0;U<C?U=C:U+C>n&&(U=n-C);const Y=U-C,B=Y+b;Y>T+1||O!==N?(A!==0&&N&&d.fillRect(S,x,E,T-x),x=Y,T=B):B>T&&(T=B),N=O,d.fillStyle=O}N&&d.fillRect(S,x,E,T-x)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,n),d.moveTo(1,0),d.lineTo(i,0),d.stroke())}}class HW{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class CY{constructor(e,t,i,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class Rde{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(CY.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),n=Math.floor(this._outerHeight),r=i/n,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const h=this._zones[l];if(!e){const N=h.getColorZones();if(N){a.push(N);continue}}const d=this._getVerticalOffsetForLine(h.startLineNumber),g=h.heightInLines===0?this._getVerticalOffsetForLine(h.endLineNumber)+t:d+h.heightInLines*t,_=Math.floor(r*d),b=Math.floor(r*g);let C=Math.floor((_+b)/2),S=b-C;S<o&&(S=o),C-S<0&&(C=S),C+S>i&&(C=i-S);const E=h.color;let x=this._color2Id[E];x||(x=++this._lastAssignedId,this._color2Id[E]=x,this._id2Color[x]=E);const T=new HW(C-S,C+S,x);h.setColorZone(T),a.push(T)}return this._colorZonesInvalid=!1,a.sort(HW.compare),a}}class Mde extends V0{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=ei(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new Rde(n=>this._context.viewLayout.getVerticalOffsetForLineNumber(n)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(75)),this._zoneManager.setPixelRatio(i.get(163)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(75)&&(this._zoneManager.setLineHeight(t.get(75)),this._render()),e.hasChanged(163)&&(this._zoneManager.setPixelRatio(t.get(163)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(r,i,n,e),!0}_renderOneLane(e,t,i,n){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,h=l.from,d=l.to;c!==r?(e.fillRect(0,o,n,a-o),r=c,e.fillStyle=i[r],o=h,a=d):a>=h?a=Math.max(a,d):(e.fillRect(0,o,n,a-o),o=h,a=d)}e.fillRect(0,o,n,a-o)}}class Ode extends ko{constructor(e){super(e),this.domNode=ei(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(116),this._typicalHalfwidthCharacterWidth=t.get(59).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(116),this._typicalHalfwidthCharacterWidth=t.get(59).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:n}=this._context.viewModel.model.getOptions(),r=n;let o=t-e;for(;o>0;){const a=ei(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let i=e-t;for(;i>0;){const n=this._renderedRulers.pop();this.domNode.removeChild(n),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const n=this._renderedRulers[t],r=this._rulers[t];n.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}class Pde extends ko{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(117);this._useShadows=i.useShadows,this._domNode=ei(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(165);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(117);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class Bde{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class Fde{constructor(e,t){this.lineNumber=e,this.ranges=t}}function Vde(s){return new Bde(s)}function Hde(s){return new Fde(s.lineNumber,s.ranges.map(Vde))}const In=class In extends vp{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(115),this._typicalHalfwidthCharacterWidth=t.get(59).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(115),this._typicalHalfwidthCharacterWidth=t.get(59).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const n=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<i.length;c++)i[c].lineNumber===a&&(r=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!o&&c>=0;c--)i[c].lineNumber===l&&(o=i[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],h=c.left,d=c.left+c.width,g={top:0,bottom:0},_={top:0,bottom:0};if(a>0){const b=t[a-1].ranges[0].left,C=t[a-1].ranges[0].left+t[a-1].ranges[0].width;xT(h-b)<n?g.top=2:h>b&&(g.top=1),xT(d-C)<n?_.top=2:b<d&&d<C&&(_.top=1)}else r&&(g.top=r.startStyle.top,_.top=r.endStyle.top);if(a+1<l){const b=t[a+1].ranges[0].left,C=t[a+1].ranges[0].left+t[a+1].ranges[0].width;xT(h-b)<n?g.bottom=2:b<h&&h<C&&(g.bottom=1),xT(d-C)<n?_.bottom=2:d<C&&(_.bottom=1)}else o&&(g.bottom=o.startStyle.bottom,_.bottom=o.endStyle.bottom);c.startStyle=g,c.endStyle=_}}_getVisibleRangesWithStyle(e,t,i){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(Hde);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,i),r}_createSelectionPiece(e,t,i,n,r){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+n.toString()+"px;width:"+r.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(n.length===0)return;const r=!!n[0].ranges[0].startStyle,o=n[0].lineNumber,a=n[n.length-1].lineNumber;for(let l=0,c=n.length;l<c;l++){const h=n[l],d=h.lineNumber,g=d-t,_=i&&d===o?1:0,b=i&&d!==o&&d===a?1:0;let C="",S="";for(let E=0,x=h.ranges.length;E<x;E++){const T=h.ranges[E];if(r){const A=T.startStyle,P=T.endStyle;if(A.top===1||A.bottom===1){C+=this._createSelectionPiece(_,b,In.SELECTION_CLASS_NAME,T.left-In.ROUNDED_PIECE_WIDTH,In.ROUNDED_PIECE_WIDTH);let O=In.EDITOR_BACKGROUND_CLASS_NAME;A.top===1&&(O+=" "+In.SELECTION_TOP_RIGHT),A.bottom===1&&(O+=" "+In.SELECTION_BOTTOM_RIGHT),C+=this._createSelectionPiece(_,b,O,T.left-In.ROUNDED_PIECE_WIDTH,In.ROUNDED_PIECE_WIDTH)}if(P.top===1||P.bottom===1){C+=this._createSelectionPiece(_,b,In.SELECTION_CLASS_NAME,T.left+T.width,In.ROUNDED_PIECE_WIDTH);let O=In.EDITOR_BACKGROUND_CLASS_NAME;P.top===1&&(O+=" "+In.SELECTION_TOP_LEFT),P.bottom===1&&(O+=" "+In.SELECTION_BOTTOM_LEFT),C+=this._createSelectionPiece(_,b,O,T.left+T.width,In.ROUNDED_PIECE_WIDTH)}}let N=In.SELECTION_CLASS_NAME;if(r){const A=T.startStyle,P=T.endStyle;A.top===0&&(N+=" "+In.SELECTION_TOP_LEFT),A.bottom===0&&(N+=" "+In.SELECTION_BOTTOM_LEFT),P.top===0&&(N+=" "+In.SELECTION_TOP_RIGHT),P.bottom===0&&(N+=" "+In.SELECTION_BOTTOM_RIGHT)}S+=this._createSelectionPiece(_,b,N,T.left,T.width)}e[g][0]+=C,e[g][1]+=S}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let o=i;o<=n;o++){const a=o-i;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};In.SELECTION_CLASS_NAME="selected-text",In.SELECTION_TOP_LEFT="top-left-radius",In.SELECTION_BOTTOM_LEFT="bottom-left-radius",In.SELECTION_TOP_RIGHT="top-right-radius",In.SELECTION_BOTTOM_RIGHT="bottom-right-radius",In.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",In.ROUNDED_PIECE_WIDTH=10;let E7=In;Lg((s,e)=>{const t=s.getColor(Cle);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function xT(s){return s<0?-s:s}class WW{constructor(e,t,i,n,r,o,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=n,this.height=r,this.textContent=o,this.textContentClassName=a}}var og;(function(s){s[s.Single=0]="Single",s[s.MultiPrimary=1]="MultiPrimary",s[s.MultiSecondary=2]="MultiSecondary"})(og||(og={}));class zW{constructor(e,t){this._context=e;const i=this._context.configuration.options,n=i.get(59);this._cursorStyle=i.get(161),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(37),this._typicalHalfwidthCharacterWidth),this._lineCursorHeight=i.get(38),this._isVisible=!0,this._domNode=ei(document.createElement("div")),this._domNode.setClassName(`cursor ${Aw}`),this._domNode.setHeight(this._context.viewLayout.getLineHeightForLineNumber(1)),this._domNode.setTop(0),this._domNode.setLeft(0),Sr(this._domNode,n),this._domNode.setDisplay("none"),this._position=new se(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case og.Single:this._pluralityClass="";break;case og.MultiPrimary:this._pluralityClass="cursor-primary";break;case og.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(59);return this._cursorStyle=t.get(161),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(37),this._typicalHalfwidthCharacterWidth),this._lineCursorHeight=t.get(38),Sr(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[n,r]=Hie(i,t-1);return[new se(e,n+1),i.substring(n,r)]}_prepareRender(e){let t="",i="";const[n,r]=this._getGraphemeAwarePosition(),o=this._context.viewLayout.getLineHeightForLineNumber(n.lineNumber),a=this._lineCursorHeight===0?o:Math.min(o,this._lineCursorHeight),l=(o-a)/2;if(this._cursorStyle===Vs.Line||this._cursorStyle===Vs.LineThin){const C=e.visibleRangeForPosition(n);if(!C||C.outsideRenderedLine)return null;const S=nt(this._domNode.domNode);let E;this._cursorStyle===Vs.Line?(E=iH(S,this._lineCursorWidth>0?this._lineCursorWidth:2),E>2&&(t=r,i=this._getTokenClassName(n))):E=iH(S,1);let x=C.left,T=0;E>=2&&x>=1&&(T=1,x-=T);const N=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta+l;return new WW(N,x,T,E,a,t,i)}const c=e.linesVisibleRangesForRange(new ie(n.lineNumber,n.column,n.lineNumber,n.column+r.length),!1);if(!c||c.length===0)return null;const h=c[0];if(h.outsideRenderedLine||h.ranges.length===0)return null;const d=h.ranges[0],g=r==="	"?this._typicalHalfwidthCharacterWidth:d.width<1?this._typicalHalfwidthCharacterWidth:d.width;this._cursorStyle===Vs.Block&&(t=r,i=this._getTokenClassName(n));let _=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.bigNumbersDelta,b=o;return(this._cursorStyle===Vs.Underline||this._cursorStyle===Vs.UnderlineThin)&&(_+=o-2,b=2),new WW(_,d.left,0,g,b,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${Aw} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const XL=class XL extends ko{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(104),this._cursorBlinking=t.get(32),this._cursorStyle=t.get(161),this._cursorSmoothCaretAnimation=t.get(33),this._editContextEnabled=t.get(170),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new zW(this._context,og.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=ei(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new vg,this._cursorFlatBlinkInterval=new iR,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(104),this._cursorBlinking=t.get(32),this._cursorStyle=t.get(161),this._cursorSmoothCaretAnimation=t.get(33),this._editContextEnabled=t.get(170),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const n=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?og.MultiPrimary:og.Single),this._primaryCursor.onCursorPositionChanged(e,n),this._updateBlinking(),this._secondaryCursors.length<t.length){const r=t.length-this._secondaryCursors.length;for(let o=0;o<r;o++){const a=new zW(this._context,og.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const r=this._secondaryCursors.length-t.length;for(let o=0;o<r;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let r=0;r<t.length;r++)this._secondaryCursors[r].onCursorPositionChanged(t[r],n)}onCursorStateChanged(e){const t=[];for(let n=0,r=e.selections.length;n<r;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let n=0,r=e.ranges.length;n<r;n++)if(e.ranges[n].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput&&!this._editContextEnabled||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},XL.BLINK_INTERVAL,nt(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},XL.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Vs.Line:e+=" cursor-line-style";break;case Vs.Block:e+=" cursor-block-style";break;case Vs.Underline:e+=" cursor-underline-style";break;case Vs.LineThin:e+=" cursor-line-thin-style";break;case Vs.BlockOutline:e+=" cursor-block-outline-style";break;case Vs.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};XL.BLINK_INTERVAL=500;let T7=XL;Lg((s,e)=>{const t=[{class:".cursor",foreground:IR,background:oB},{class:".cursor-primary",foreground:aY,background:vhe},{class:".cursor-secondary",foreground:lY,background:whe}];for(const i of t){const n=s.getColor(i.foreground);if(n){let r=s.getColor(i.background);r||(r=n.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${n}; border-color: ${n}; color: ${r}; }`),Nw(s.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${r}; border-right: 1px solid ${r}; }`)}}});const qM=()=>{throw new Error("Invalid change accessor")};class Wde extends ko{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(165);this._lineHeight=t.get(75),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=ei(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ei(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const n of e)t.set(n.id,n);let i=!1;return this._context.viewModel.changeWhitespace(n=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],h=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=h.isInHiddenArea;const d=t.get(l);d&&(d.afterLineNumber!==h.afterViewLineNumber||d.height!==h.heightInPx)&&(n.changeOneWhitespace(l,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(c.delegate,h.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(165);return this._lineHeight=t.get(75),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(75)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new se(o,this._context.viewModel.model.getLineMaxColumn(o))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),r=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!r,afterViewLineNumber:n.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const n={addZone:r=>(t=!0,this._addZone(i,r)),removeZone:r=>{r&&(t=this._removeZone(i,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(i,r)||t)}};zde(e,n),n.addZone=qM,n.removeZone=qM,n.layoutZone=qM}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:ei(t.domNode),marginDomNode:t.marginDomNode?ei(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,i.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=n.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){mi(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){mi(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let n=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(i[o.id]=o,n=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let h=0,d=0,g="none";i.hasOwnProperty(l)?(h=i[l].verticalOffset-e.bigNumbersDelta,d=i[l].height,g="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(h),c.domNode.setHeight(d),c.domNode.setDisplay(g),c.marginDomNode&&(c.marginDomNode.setTop(h),c.marginDomNode.setHeight(d),c.marginDomNode.setDisplay(g))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function zde(s,e){try{return s(e)}catch(t){mi(t)}}class Ude extends vp{constructor(e){super(),this._context=e,this._options=new UW(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new UW(this._context.configuration);return this._options.equals(t)?e.hasChanged(165):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber-t+1,r=new Array(n);for(let o=0;o<n;o++)r[o]=!0;this._renderResult=[];for(let o=e.viewportData.startLineNumber;o<=e.viewportData.endLineNumber;o++){const a=o-e.viewportData.startLineNumber,l=this._context.viewModel.getViewLineRenderingData(o);let c=null;if(this._options.renderWhitespace==="selection"){const h=this._selection;for(const d of h){if(d.endLineNumber<o||d.startLineNumber>o)continue;const g=d.startLineNumber===o?d.startColumn:l.minColumn,_=d.endLineNumber===o?d.endColumn:l.maxColumn;g<_&&(c||(c=[]),c.push(new it(g-1,_-1)))}}this._renderResult[a]=this._applyRenderWhitespace(e,o,c,l)}}_applyRenderWhitespace(e,t,i,n){if(n.hasVariableFonts||this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&n.continuesWithWrappedLine)return"";const r=this._context.theme.getColor(aB),o=this._options.renderWithSVG,a=n.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=n.continuesWithWrappedLine,h=n.minColumn-1,d=this._options.renderWhitespace==="boundary",g=this._options.renderWhitespace==="trailing",_=e.getLineHeightForLineNumber(t),b=this._options.middotWidth,C=this._options.wsmiddotWidth,S=this._options.spaceWidth,E=Math.abs(C-S),x=Math.abs(b-S),T=E<x?11825:183,N=this._options.canUseHalfwidthRightwardsArrow;let A="",P=!1,O=Pa(a),V;O===-1?(P=!0,O=l,V=l):V=I0(a);let U=0,Y=i&&i[U],B=0;for(let F=h;F<l;F++){const W=a.charCodeAt(F);if(Y&&Y.endExclusive<=F&&(U++,Y=i&&i[U]),W!==9&&W!==32||g&&!P&&F<=V)continue;if(d&&F>=O&&F<=V&&W===32){const X=F-1>=0?a.charCodeAt(F-1):0,$=F+1<l?a.charCodeAt(F+1):0;if(X!==32&&$!==32)continue}if(d&&c&&F===l-1){const X=F-1>=0?a.charCodeAt(F-1):0;if(W===32&&X!==32&&X!==9)continue}if(i&&!(Y&&Y.start<=F&&F<Y.endExclusive))continue;const ee=e.visibleRangeForPosition(new se(t,F+1));ee&&(o?(B=Math.max(B,ee.left),W===9?A+=this._renderArrow(_,S,ee.left):A+=`<circle cx="${(ee.left+S/2).toFixed(2)}" cy="${(_/2).toFixed(2)}" r="${(S/7).toFixed(2)}" />`):W===9?A+=`<div class="mwh" style="left:${ee.left}px;height:${_}px;">${N?"￫":"→"}</div>`:A+=`<div class="mwh" style="left:${ee.left}px;height:${_}px;">${String.fromCharCode(T)}</div>`)}return o?(B=Math.round(B+S),`<svg style="bottom:0;position:absolute;width:${B}px;height:${_}px" viewBox="0 0 ${B} ${_}" xmlns="http://www.w3.org/2000/svg" fill="${r}">`+A+"</svg>"):A}_renderArrow(e,t,i){const n=t/7,r=t,o=e/2,a=i,l={x:0,y:n/2},c={x:100/125*r,y:l.y},h={x:c.x-.2*c.x,y:c.y+.2*c.x},d={x:h.x+.1*c.x,y:h.y+.1*c.x},g={x:d.x+.35*c.x,y:d.y-.35*c.x},_={x:g.x,y:-g.y},b={x:d.x,y:-d.y},C={x:h.x,y:-h.y},S={x:c.x,y:-c.y},E={x:l.x,y:-l.y};return`<path d="M ${[l,c,h,d,g,_,b,C,S,E].map(N=>`${(a+N.x).toFixed(2)} ${(o+N.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class UW{constructor(e){const t=e.options,i=t.get(59),n=t.get(47);n==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):n==="svg"?(this.renderWhitespace=t.get(113),this.renderWithSVG=!0):(this.renderWhitespace=t.get(113),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(75),this.stopRenderingLineAfter=t.get(133)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class qde{constructor(e,t,i,n){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=n,this.visibleRange=new ie(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class $de{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class jde{constructor(e,t,i){this.configuration=e,this.theme=new $de(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}const W1=new Float32Array([1,0,1,1,0,1,0,0,0,1,1,0]);function gC(s){if(!s)throw new Error(`Value "${s}" cannot be null`);return s}function yY(s,e,t){let i=new e.ResizeObserver(n=>{const r=n.find(l=>l.target===s);if(!r)return;if(!("devicePixelContentBoxSize"in r)){i?.disconnect(),i=void 0;return}const o=r.devicePixelContentBoxSize[0].inlineSize,a=r.devicePixelContentBoxSize[0].blockSize;o>0&&a>0&&t(o,a)});try{i.observe(s,{box:["device-pixel-content-box"]})}catch{throw i.disconnect(),i=void 0,new at("Could not observe device pixel dimensions")}return lt(()=>i?.disconnect())}var Gde=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};let Kde=0;class GN extends pe{get cacheKey(){return`${this.fontFamily}_${this.fontSize}px`}constructor(e,t,i,n){super(),this.fontSize=e,this.fontFamily=t,this.devicePixelRatio=i,this._decorationStyleCache=n,this.id=Kde++,this._workGlyph={source:null,boundingBox:{left:0,bottom:0,right:0,top:0},originOffset:{x:0,y:0},fontBoundingBoxAscent:0,fontBoundingBoxDescent:0},this._workGlyphConfig={chars:void 0,tokenMetadata:0,decorationStyleSetId:0},this._antiAliasing=Bt?"greyscale":"subpixel";const r=Math.ceil(this.fontSize*i);this._canvas=new OffscreenCanvas(r*3,r*3),this._ctx=gC(this._canvas.getContext("2d",{willReadFrequently:!0,alpha:this._antiAliasing==="greyscale"})),this._ctx.textBaseline="top",this._ctx.fillStyle="#FFFFFF",this._ctx.font=`${r}px ${this.fontFamily}`,this._textMetrics=this._ctx.measureText("A")}rasterizeGlyph(e,t,i,n){return e===""?{source:this._canvas,boundingBox:{top:0,left:0,bottom:-1,right:-1},originOffset:{x:0,y:0},fontBoundingBoxAscent:0,fontBoundingBoxDescent:0}:this._workGlyphConfig.chars===e&&this._workGlyphConfig.tokenMetadata===t&&this._workGlyphConfig.decorationStyleSetId===i?this._workGlyph:(this._workGlyphConfig.chars=e,this._workGlyphConfig.tokenMetadata=t,this._workGlyphConfig.decorationStyleSetId=i,this._rasterizeGlyph(e,t,i,n))}_rasterizeGlyph(e,t,i,n){const r=Math.ceil(this.fontSize*this.devicePixelRatio),o=r*3;this._canvas.width!==o&&(this._canvas.width=o,this._canvas.height=o),this._ctx.save();const a=(t&15)/10,l=Cl.getBackground(t),c=n[l],h=this._decorationStyleCache.getStyleSet(i);this._antiAliasing==="subpixel"?(this._ctx.fillStyle=c,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height)):this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);const d=new TC(200),g=Cl.getFontStyle(t);g&1&&d.appendString("italic "),h?.bold!==void 0?h.bold&&d.appendString("bold "):g&2&&d.appendString("bold "),d.appendString(`${r}px ${this.fontFamily}`),this._ctx.font=d.build();const _=r,b=r;h?.color!==void 0?this._ctx.fillStyle=`#${h.color.toString(16).padStart(8,"0")}`:this._ctx.fillStyle=n[Cl.getForeground(t)],this._ctx.textBaseline="top",h?.opacity!==void 0&&(this._ctx.globalAlpha=h.opacity),this._ctx.fillText(e,_+a,b),this._ctx.restore();const C=this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height);if(this._antiAliasing==="subpixel"){const S=parseInt(c.substring(1,3),16),E=parseInt(c.substring(3,5),16),x=parseInt(c.substring(5,7),16);this._clearColor(C,S,E,x),this._ctx.putImageData(C,0,0)}return this._findGlyphBoundingBox(C,this._workGlyph.boundingBox),this._workGlyph.source=this._canvas,this._workGlyph.originOffset.x=this._workGlyph.boundingBox.left-_,this._workGlyph.originOffset.y=this._workGlyph.boundingBox.top-b,this._workGlyph.fontBoundingBoxAscent=this._textMetrics.fontBoundingBoxAscent,this._workGlyph.fontBoundingBoxDescent=this._textMetrics.fontBoundingBoxDescent,this._workGlyph}_clearColor(e,t,i,n){for(let r=0;r<e.data.length;r+=4)e.data[r]===t&&e.data[r+1]===i&&e.data[r+2]===n&&(e.data[r+3]=0)}_findGlyphBoundingBox(e,t){const i=this._canvas.height,n=this._canvas.width;let r=!1;for(let o=0;o<i;o++){for(let a=0;a<n;a++){const l=o*n*4+a*4+3;if(e.data[l]!==0){t.top=o,r=!0;break}}if(r)break}t.left=0,r=!1;for(let o=0;o<n;o++){for(let a=0;a<i;a++){const l=a*n*4+o*4+3;if(e.data[l]!==0){t.left=o,r=!0;break}}if(r)break}t.right=n,r=!1;for(let o=n-1;o>=t.left;o--){for(let a=0;a<i;a++){const l=a*n*4+o*4+3;if(e.data[l]!==0){t.right=o,r=!0;break}}if(r)break}t.bottom=t.top,r=!1;for(let o=i-1;o>=0;o--){for(let a=0;a<n;a++){const l=o*n*4+a*4+3;if(e.data[l]!==0){t.bottom=o,r=!0;break}}if(r)break}}getTextMetrics(e){return this._ctx.measureText(e)}}Gde([En],GN.prototype,"cacheKey",null);var Yde=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Zde=function(s,e){return function(t,i){e(t,i,s)}};let KN=class extends pe{constructor(e){super(),this._logService=e,this._tasks=[],this._i=0,this._register(lt(()=>this.clear()))}enqueue(e){this._tasks.push(e),this._start()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,n=e.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),r=e.timeRemaining(),i*1.5>r){n-t<-20&&this._logService.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(n-t))}ms`),this._start();return}n=r}this.clear()}};KN=Yde([Zde(0,Lo)],KN);class Xde extends KN{_requestCallback(e){return wi().setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){wi().clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}class Qde extends KN{_requestCallback(e){return wi().requestIdleCallback(e)}_cancelCallback(e){wi().cancelIdleCallback(e)}}const Jde="requestIdleCallback"in wi()?Qde:Xde;class efe{constructor(e,t){this._canvas=e,this._textureIndex=t,this._currentRow={x:0,y:0,h:0},this._allocatedGlyphs=new Set,this._nextIndex=0,this._ctx=gC(this._canvas.getContext("2d",{willReadFrequently:!0}))}allocate(e){const t=e.boundingBox.right-e.boundingBox.left+1,i=e.boundingBox.bottom-e.boundingBox.top+1;if(t>this._canvas.width||i>this._canvas.height)throw new at("Glyph is too large for the atlas page");if(e.boundingBox.right-e.boundingBox.left+1>this._canvas.width-this._currentRow.x&&(this._currentRow.x=0,this._currentRow.y+=this._currentRow.h,this._currentRow.h=1),this._currentRow.y+e.boundingBox.bottom-e.boundingBox.top+1>this._canvas.height)return;this._ctx.drawImage(e.source,e.boundingBox.left,e.boundingBox.top,t,i,this._currentRow.x,this._currentRow.y,t,i);const n={pageIndex:this._textureIndex,glyphIndex:this._nextIndex++,x:this._currentRow.x,y:this._currentRow.y,w:t,h:i,originOffsetX:e.originOffset.x,originOffsetY:e.originOffset.y,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent};return this._currentRow.x+=t,this._currentRow.h=Math.max(this._currentRow.h,i),this._allocatedGlyphs.add(n),n}getUsagePreview(){const e=this._canvas.width,t=this._canvas.height,i=new OffscreenCanvas(e,t),n=gC(i.getContext("2d"));n.fillStyle="#808080",n.fillRect(0,0,e,t);const r=new Map,o=new Map;for(const a of this._allocatedGlyphs)r.set(a.y,Math.max(r.get(a.y)??0,a.h)),o.set(a.y,Math.max(o.get(a.y)??0,a.x+a.w));for(const a of this._allocatedGlyphs)n.fillStyle="#4040FF",n.fillRect(a.x,a.y,a.w,a.h),n.fillStyle="#FF0000",n.fillRect(a.x,a.y+a.h,a.w,r.get(a.y)-a.h);for(const[a,l]of o.entries())a!==this._currentRow.y&&(n.fillStyle="#FF0000",n.fillRect(l,a,e-l,r.get(a)));return i.convertToBlob()}getStats(){const e=this._canvas.width,t=this._canvas.height;let i=0,n=0;const r=e*t,o=new Map,a=new Map;for(const l of this._allocatedGlyphs)o.set(l.y,Math.max(o.get(l.y)??0,l.h)),a.set(l.y,Math.max(a.get(l.y)??0,l.x+l.w));for(const l of this._allocatedGlyphs)i+=l.w*l.h,n+=l.w*(o.get(l.y)-l.h);for(const[l,c]of a.entries())l!==this._currentRow.y&&(n+=(e-c)*o.get(l));return[`page${this._textureIndex}:`,`     Total: ${r} (${e}x${t})`,`      Used: ${i} (${(i/r*100).toPrecision(2)}%)`,`    Wasted: ${n} (${(n/r*100).toPrecision(2)}%)`,`Efficiency: ${(i/(i+n)*100).toPrecision(2)}%`].join(`
`)}}class tfe{constructor(e,t,i){this._canvas=e,this._textureIndex=t,this._slabs=[],this._activeSlabsByDims=new mR,this._unusedRects=[],this._openRegionsByHeight=new Map,this._openRegionsByWidth=new Map,this._allocatedGlyphs=new Set,this._nextIndex=0,this._ctx=gC(this._canvas.getContext("2d",{willReadFrequently:!0})),this._slabW=Math.min(i?.slabW??64<<Math.max(Math.floor(wi().devicePixelRatio)-1,0),this._canvas.width),this._slabH=Math.min(i?.slabH??this._slabW,this._canvas.height),this._slabsPerRow=Math.floor(this._canvas.width/this._slabW),this._slabsPerColumn=Math.floor(this._canvas.height/this._slabH)}allocate(e){const t=e.boundingBox.right-e.boundingBox.left+1,i=e.boundingBox.bottom-e.boundingBox.top+1;if(t>this._canvas.width||i>this._canvas.height)throw new at("Glyph is too large for the atlas page");if(t>this._slabW||i>this._slabH){if(this._allocatedGlyphs.size>0)return;let c=this._canvas.width;for(;t<c/2&&i<c/2;)c/=2;this._slabW=c,this._slabH=c,this._slabsPerRow=Math.floor(this._canvas.width/this._slabW),this._slabsPerColumn=Math.floor(this._canvas.height/this._slabH)}const n={w:t,h:i};let r=this._activeSlabsByDims.get(n.w,n.h);if(r){const c=Math.floor(this._slabW/r.entryW)*Math.floor(this._slabH/r.entryH);r.count>=c&&(r=void 0)}let o,a;if(!r)if(t<i){const c=this._openRegionsByWidth.get(t);if(c?.length)for(let h=c.length-1;h>=0;h--){const d=c[h];if(d.w>=t&&d.h>=i){o=d.x,a=d.y,t<d.w&&this._unusedRects.push({x:d.x+t,y:d.y,w:d.w-t,h:i}),d.y+=i,d.h-=i,d.h===0&&(h===c.length-1?c.pop():this._unusedRects.splice(h,1));break}}}else{const c=this._openRegionsByHeight.get(i);if(c?.length)for(let h=c.length-1;h>=0;h--){const d=c[h];if(d.w>=t&&d.h>=i){o=d.x,a=d.y,i<d.h&&this._unusedRects.push({x:d.x,y:d.y+i,w:t,h:d.h-i}),d.x+=t,d.w-=t,d.h===0&&(h===c.length-1?c.pop():this._unusedRects.splice(h,1));break}}}if(o===void 0||a===void 0){if(!r){if(this._slabs.length>=this._slabsPerRow*this._slabsPerColumn)return;r={x:Math.floor(this._slabs.length%this._slabsPerRow)*this._slabW,y:Math.floor(this._slabs.length/this._slabsPerRow)*this._slabH,entryW:n.w,entryH:n.h,count:0};const h=this._slabW%r.entryW,d=this._slabH%r.entryH;h&&qW(this._openRegionsByWidth,h,{x:r.x+this._slabW-h,w:h,y:r.y,h:this._slabH-(d??0)}),d&&qW(this._openRegionsByHeight,d,{x:r.x,w:this._slabW,y:r.y+this._slabH-d,h:d}),this._slabs.push(r),this._activeSlabsByDims.set(r,n.w,n.h)}const c=Math.floor(this._slabW/r.entryW);o=r.x+Math.floor(r.count%c)*r.entryW,a=r.y+Math.floor(r.count/c)*r.entryH,r.count++}this._ctx.drawImage(e.source,e.boundingBox.left,e.boundingBox.top,t,i,o,a,t,i);const l={pageIndex:this._textureIndex,glyphIndex:this._nextIndex++,x:o,y:a,w:t,h:i,originOffsetX:e.originOffset.x,originOffsetY:e.originOffset.y,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent};return this._allocatedGlyphs.add(l),l}getUsagePreview(){const e=this._canvas.width,t=this._canvas.height,i=new OffscreenCanvas(e,t),n=gC(i.getContext("2d"));n.fillStyle="#808080",n.fillRect(0,0,e,t);let r=0,o=0,a=0;const l=64<<Math.floor(wi().devicePixelRatio)-1,c=l;for(const d of this._slabs){let g=0,_=0;for(let S=0;S<d.count;S++)g+d.entryW>l&&(g=0,_+=d.entryH),n.fillStyle="#FF0000",n.fillRect(d.x+g,d.y+_,d.entryW,d.entryH),r+=d.entryW*d.entryH,g+=d.entryW;const b=Math.floor(l/d.entryW),C=Math.floor(c/d.entryH);d.entryW*b*d.entryH*C}for(const d of this._allocatedGlyphs)o+=d.w*d.h,n.fillStyle="#4040FF",n.fillRect(d.x,d.y,d.w,d.h);const h=Array.from(this._openRegionsByWidth.values()).flat().concat(Array.from(this._openRegionsByHeight.values()).flat());for(const d of h)n.fillStyle="#FF000088",n.fillRect(d.x,d.y,d.w,d.h),a+=d.w*d.h;return n.globalAlpha=.5,n.drawImage(this._canvas,0,0),n.globalAlpha=1,i.convertToBlob()}getStats(){const e=this._canvas.width,t=this._canvas.height;let i=0,n=0,r=0,o=0,a=0;const l=e*t,c=64<<Math.floor(wi().devicePixelRatio)-1,h=c;for(const b of this._slabs){let C=0,S=0;for(let N=0;N<b.count;N++)C+b.entryW>c&&(C=0,S+=b.entryH),i+=b.entryW*b.entryH,C+=b.entryW;const E=Math.floor(c/b.entryW),x=Math.floor(h/b.entryH),T=b.entryW*E*b.entryH*x;r+=c*h-T}for(const b of this._allocatedGlyphs)n+=b.w*b.h;const d=Array.from(this._openRegionsByWidth.values()).flat().concat(Array.from(this._openRegionsByHeight.values()).flat());for(const b of d)a+=b.w*b.h;const g=r-a;o=i-(n-g);const _=n/(n+o+a);return[`page[${this._textureIndex}]:`,`     Total: ${l}px (${e}x${t})`,`      Used: ${n}px (${(n/l*100).toFixed(2)}%)`,`    Wasted: ${o}px (${(o/l*100).toFixed(2)}%)`,`Restricted: ${a}px (${(a/l*100).toFixed(2)}%) (hard to allocate)`,`Efficiency: ${_===1?"100":(_*100).toFixed(2)}%`,`     Slabs: ${this._slabs.length} of ${Math.floor(this._canvas.width/c)*Math.floor(this._canvas.height/h)}`].join(`
`)}}function qW(s,e,t){let i=s.get(e);i||(i=[],s.set(e,i)),i.push(t)}var ife=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},$W=function(s,e){return function(t,i){e(t,i,s)}},D7,K1;let ju=(K1=class extends pe{get version(){return this._version}get usedArea(){return this._usedArea}get source(){return this._canvas}get glyphs(){return this._glyphInOrderSet.values()}constructor(e,t,i,n,r){switch(super(),this._logService=n,this._version=0,this._usedArea={left:0,top:0,right:0,bottom:0},this._glyphMap=new mR,this._glyphInOrderSet=new Set,this._canvas=new OffscreenCanvas(t,t),this._colorMap=r.getColorTheme().tokenColorMap,i){case"shelf":this._allocator=new efe(this._canvas,e);break;case"slab":this._allocator=new tfe(this._canvas,e);break;default:this._allocator=i(this._canvas,e);break}this._register(lt(()=>{this._canvas.width=1,this._canvas.height=1}))}getGlyph(e,t,i,n){return this._glyphMap.get(t,i,n,e.cacheKey)??this._createGlyph(e,t,i,n)}_createGlyph(e,t,i,n){if(this._glyphInOrderSet.size>=D7.maximumGlyphCount)return;const r=e.rasterizeGlyph(t,i,n,this._colorMap),o=this._allocator.allocate(r);if(o!==void 0)return this._glyphMap.set(o,t,i,n,e.cacheKey),this._glyphInOrderSet.add(o),this._version++,this._usedArea.right=Math.max(this._usedArea.right,o.x+o.w-1),this._usedArea.bottom=Math.max(this._usedArea.bottom,o.y+o.h-1),this._logService.getLevel()===Hs.Trace&&this._logService.trace("New glyph",{chars:t,tokenMetadata:i,decorationStyleSetId:n,rasterizedGlyph:r,glyph:o}),o}getUsagePreview(){return this._allocator.getUsagePreview()}getStats(){return this._allocator.getStats()}},D7=K1,K1.maximumGlyphCount=5e3,K1);ju=D7=ife([$W(3,Lo),$W(4,za)],ju);var nfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},jW=function(s,e){return function(t,i){e(t,i,s)}},RD,Y1;let Wm=(Y1=class extends pe{get pages(){return this._pages}constructor(e,t,i,n,r){super(),this._maxTextureSize=e,this._decorationStyleCache=i,this._themeService=n,this._instantiationService=r,this._warmUpTask=this._register(new qs),this._warmedUpRasterizers=new Set,this._pages=[],this._glyphPageIndex=new mR,this._onDidDeleteGlyphs=this._register(new ne),this.onDidDeleteGlyphs=this._onDidDeleteGlyphs.event,this._allocatorType=t?.allocatorType??"slab",this._register(Ie.runAndSubscribe(this._themeService.onDidColorThemeChange,()=>{this._colorMap&&this.clear(),this._colorMap=this._themeService.getColorTheme().tokenColorMap}));const o=Math.max(1,Math.floor(wi().devicePixelRatio));this.pageSize=Math.min(1024*o,this._maxTextureSize),this._initFirstPage(),this._register(lt(()=>Cs(this._pages)))}_initFirstPage(){const e=this._instantiationService.createInstance(ju,0,this.pageSize,this._allocatorType);this._pages.push(e);const t=new GN(1,"",1,this._decorationStyleCache);e.getGlyph(t,"",0,0),t.dispose()}clear(){for(const e of this._pages)e.dispose();this._pages.length=0,this._glyphPageIndex.clear(),this._warmedUpRasterizers.clear(),this._warmUpTask.clear(),this._initFirstPage(),this._onDidDeleteGlyphs.fire()}getGlyph(e,t,i,n,r){return i&=-2048,i|=Math.floor(r%1*10),this._warmedUpRasterizers.has(e.id)||(this._warmUpAtlas(e),this._warmedUpRasterizers.add(e.id)),this._tryGetGlyph(this._glyphPageIndex.get(t,i,n,e.cacheKey)??0,e,t,i,n)}_tryGetGlyph(e,t,i,n,r){return this._glyphPageIndex.set(e,i,n,r,t.cacheKey),this._pages[e].getGlyph(t,i,n,r)??(e+1<this._pages.length?this._tryGetGlyph(e+1,t,i,n,r):void 0)??this._getGlyphFromNewPage(t,i,n,r)}_getGlyphFromNewPage(e,t,i,n){if(this._pages.length>=RD.maximumPageCount)throw new Error(`Attempt to create a texture atlas page past the limit ${RD.maximumPageCount}`);return this._pages.push(this._instantiationService.createInstance(ju,this._pages.length,this.pageSize,this._allocatorType)),this._glyphPageIndex.set(this._pages.length-1,t,i,n,e.cacheKey),this._pages[this._pages.length-1].getGlyph(e,t,i,n)}getStats(){return this._pages.map(e=>e.getStats())}_warmUpAtlas(e){const t=this._colorMap;if(!t)throw new at("Cannot warm atlas without color map");this._warmUpTask.value?.clear();const i=this._warmUpTask.value=this._instantiationService.createInstance(Jde);for(let n=65;n<=90;n++)for(const r of t.keys())i.enqueue(()=>{for(let o=0;o<1;o+=.1)this.getGlyph(e,String.fromCharCode(n),r<<15&16744448,0,o)});for(let n=97;n<=122;n++)for(const r of t.keys())i.enqueue(()=>{for(let o=0;o<1;o+=.1)this.getGlyph(e,String.fromCharCode(n),r<<15&16744448,0,o)});for(let n=33;n<=126;n++)for(const r of t.keys())i.enqueue(()=>{for(let o=0;o<1;o+=.1)this.getGlyph(e,String.fromCharCode(n),r<<15&16744448,0,o)})}},RD=Y1,Y1.maximumPageCount=16,Y1);Wm=RD=nfe([jW(3,za),jW(4,Zt)],Wm);var Hx;(function(s){s[s.Ignore=0]="Ignore",s[s.Info=1]="Info",s[s.Warning=2]="Warning",s[s.Error=3]="Error"})(Hx||(Hx={}));(function(s){const e="error",t="warning",i="warn",n="info",r="ignore";function o(l){return l?Uv(e,l)?s.Error:Uv(t,l)||Uv(i,l)?s.Warning:Uv(n,l)?s.Info:s.Ignore:s.Ignore}s.fromValue=o;function a(l){switch(l){case s.Error:return e;case s.Warning:return t;case s.Info:return n;default:return r}}s.toString=a})(Hx||(Hx={}));const Wn=Hx;var SY=Wn;const cu=At("notificationService");class sfe{}var Qo;(function(s){async function e(n){try{if(!navigator.gpu)throw new Error("This browser does not support WebGPU");const r=await navigator.gpu.requestAdapter();if(!r)throw new Error("This browser supports WebGPU but it appears to be disabled");return $M(await r.requestDevice())}catch(r){throw n&&n(r.message),r}}s.requestDevice=e;function t(n,r,o){const a=n.createBuffer(r);return o&&n.queue.writeBuffer(a,0,Qw(o)?o():o),$M(a)}s.createBuffer=t;function i(n,r){return $M(n.createTexture(r))}s.createTexture=i})(Qo||(Qo={}));function $M(s){return{object:s,dispose:()=>s.destroy()}}class rfe{get dataOffset(){return this._startIndex}get dirtySize(){if(!(this._startIndex===void 0||this._endIndex===void 0))return this._endIndex-this._startIndex+1}get isDirty(){return this._startIndex!==void 0}flag(e,t=1){return this._flag(e),t>1&&this._flag(e+t-1),e}_flag(e){(this._startIndex===void 0||e<this._startIndex)&&(this._startIndex=e),(this._endIndex===void 0||e>this._endIndex)&&(this._endIndex=e)}clear(){this._startIndex=void 0,this._endIndex=void 0}}function ofe(s,e){return new afe(s,e)}class afe extends pe{get entryCount(){return this._entries.size}get dirtyTracker(){return this._dirtyTracker}constructor(e,t){super(),this.propertySpecs=e,this.capacity=t,this._dirtyTracker=new rfe,this._propertySpecsMap=new Map,this._entries=new ea,this._onDidChange=this._register(new ne),this._onDidChangeBuffer=this._register(new ne),this.onDidChangeBuffer=this._onDidChangeBuffer.event,this.view=new Float32Array(t*e.length),this.buffer=this.view.buffer,this._entrySize=e.length;for(let i=0;i<e.length;i++){const n={offset:i,...e[i]};this._propertySpecsMap.set(n.name,n)}this._register(lt(()=>Cs(this._entries)))}createEntry(e){this._entries.size===this.capacity&&(this._expandBuffer(),this._onDidChangeBuffer.fire());const t=new lfe(this.view,this._propertySpecsMap,this._dirtyTracker,this._entries.size,e),i=this._entries.push(t),n=[];return n.push(Ie.forward(t.onDidChange,this._onDidChange)),n.push(t.onWillDispose(()=>{const r=t.i;i(),this.view.set(this.view.subarray(r*this._entrySize+2,this._entries.size*this._entrySize+2),r*this._entrySize);for(const o of this._entries)o.i>r&&o.i--;this._dirtyTracker.flag(r,(this._entries.size-r)*this._entrySize),Cs(n)})),t}_expandBuffer(){this.capacity*=2;const e=new Float32Array(this.capacity*this._entrySize);e.set(this.view),this.view=e,this.buffer=this.view.buffer}}class lfe extends pe{constructor(e,t,i,n,r){super(),this._view=e,this._propertySpecsMap=t,this._dirtyTracker=i,this.i=n,this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event,this._onWillDispose=this._register(new ne),this.onWillDispose=this._onWillDispose.event;for(const o of this._propertySpecsMap.values())this._view[this.i*this._propertySpecsMap.size+o.offset]=r[o.name];this._dirtyTracker.flag(this.i*this._propertySpecsMap.size,this._propertySpecsMap.size)}dispose(){this._onWillDispose.fire(),super.dispose()}setRaw(e){if(e.length!==this._propertySpecsMap.size)throw new Error(`Data length ${e.length} does not match the number of properties in the collection (${this._propertySpecsMap.size})`);this._view.set(e,this.i*this._propertySpecsMap.size),this._dirtyTracker.flag(this.i*this._propertySpecsMap.size,this._propertySpecsMap.size)}}const cfe=`

struct Vertex {
	@location(0) position: vec2f,
};

struct LayoutInfo {
	canvasDims: vec2f,
	viewportOffset: vec2f,
	viewportDims: vec2f,
}

struct ScrollOffset {
	offset: vec2f,
}

struct Shape {
	position: vec2f,
	size: vec2f,
	color: vec4f,
};

struct VSOutput {
	@builtin(position) position: vec4f,
	@location(1)       color:    vec4f,
};

// Uniforms
@group(0) @binding(1) var<uniform>       layoutInfo:      LayoutInfo;

// Storage buffers
@group(0) @binding(0)            var<storage, read> shapes:          array<Shape>;
@group(0) @binding(2)      var<uniform>       scrollOffset:    ScrollOffset;

@vertex fn vs(
	vert: Vertex,
	@builtin(instance_index) instanceIndex: u32,
	@builtin(vertex_index) vertexIndex : u32
) -> VSOutput {
	let shape = shapes[instanceIndex];

	var vsOut: VSOutput;
	vsOut.position = vec4f(
		(
			// Top left corner
			vec2f(-1,  1) +
			// Convert pixel position to clipspace
			vec2f( 2, -2) / layoutInfo.canvasDims *
			// Shape position and size
			(layoutInfo.viewportOffset - scrollOffset.offset + shape.position + vert.position * shape.size)
		),
		0.0,
		1.0
	);
	vsOut.color = shape.color;
	return vsOut;
}

@fragment fn fs(vsOut: VSOutput) -> @location(0) vec4f {
	return vsOut.color;
}
`;class ufe extends V0{constructor(e,t,i,n,r,o){super(),this._context=e,this._contentLeft=t,this._devicePixelRatio=i,this._canvas=n,this._ctx=r,this._shapeBindBuffer=this._register(new qs),this._initialized=!1,this._shapeCollection=this._register(ofe([{name:"x"},{name:"y"},{name:"width"},{name:"height"},{name:"red"},{name:"green"},{name:"blue"},{name:"alpha"}],32)),this._context.addEventHandler(this),this._initWebgpu(o)}async _initWebgpu(e){if(this._device=await e,this._store.isDisposed)return;const t=navigator.gpu.getPreferredCanvasFormat();this._ctx.configure({device:this._device,format:t,alphaMode:"premultiplied"}),this._renderPassColorAttachment={view:null,loadOp:"load",storeOp:"store"},this._renderPassDescriptor={label:"Monaco rectangle renderer render pass",colorAttachments:[this._renderPassColorAttachment]};let i;{const a=new Float32Array(6),l=(c=this._canvas.width,h=this._canvas.height)=>(a[0]=c,a[1]=h,a[2]=Math.ceil(this._context.configuration.options.get(165).contentLeft*wi().devicePixelRatio),a[3]=0,a[4]=a[0]-a[2],a[5]=a[1]-a[3],a);i=this._register(Qo.createBuffer(this._device,{label:"Monaco rectangle renderer uniform buffer",size:24,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST},()=>l())).object,this._register(yY(this._canvas,wi(),(c,h)=>{this._device.queue.writeBuffer(i,0,l(c,h))}))}const n=2;this._scrollOffsetBindBuffer=this._register(Qo.createBuffer(this._device,{label:"Monaco rectangle renderer scroll offset buffer",size:n*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})).object,this._scrollOffsetValueBuffer=new Float32Array(n);const r=()=>Qo.createBuffer(this._device,{label:"Monaco rectangle renderer shape buffer",size:this._shapeCollection.buffer.byteLength,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST});this._shapeBindBuffer.value=r(),this._register(Ie.runAndSubscribe(this._shapeCollection.onDidChangeBuffer,()=>{this._shapeBindBuffer.value=r(),this._pipeline&&this._updateBindGroup(this._pipeline,i)})),this._vertexBuffer=this._register(Qo.createBuffer(this._device,{label:"Monaco rectangle renderer vertex buffer",size:W1.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST},W1)).object;const o=this._device.createShaderModule({label:"Monaco rectangle renderer shader module",code:cfe});this._pipeline=this._device.createRenderPipeline({label:"Monaco rectangle renderer render pipeline",layout:"auto",vertex:{module:o,buffers:[{arrayStride:2*Float32Array.BYTES_PER_ELEMENT,attributes:[{shaderLocation:0,offset:0,format:"float32x2"}]}]},fragment:{module:o,targets:[{format:t,blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"}}}]}}),this._updateBindGroup(this._pipeline,i),this._initialized=!0}_updateBindGroup(e,t){this._bindGroup=this._device.createBindGroup({label:"Monaco rectangle renderer bind group",layout:e.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this._shapeBindBuffer.value.object}},{binding:1,resource:{buffer:t}},{binding:2,resource:{buffer:this._scrollOffsetBindBuffer}}]})}register(e,t,i,n,r,o,a,l){return this._shapeCollection.createEntry({x:e,y:t,width:i,height:n,red:r,green:o,blue:a,alpha:l})}onScrollChanged(e){if(this._device){const t=wi().devicePixelRatio;this._scrollOffsetValueBuffer[0]=this._context.viewLayout.getCurrentScrollLeft()*t,this._scrollOffsetValueBuffer[1]=this._context.viewLayout.getCurrentScrollTop()*t,this._device.queue.writeBuffer(this._scrollOffsetBindBuffer,0,this._scrollOffsetValueBuffer)}return!0}_update(){if(!this._device)return;const e=this._shapeCollection;e.dirtyTracker.isDirty&&(this._device.queue.writeBuffer(this._shapeBindBuffer.value.object,0,e.buffer,e.dirtyTracker.dataOffset,e.dirtyTracker.dirtySize*e.view.BYTES_PER_ELEMENT),e.dirtyTracker.clear())}draw(e){if(!this._initialized)return;this._update();const t=this._device.createCommandEncoder({label:"Monaco rectangle renderer command encoder"});this._renderPassColorAttachment.view=this._ctx.getCurrentTexture().createView();const i=t.beginRenderPass(this._renderPassDescriptor);i.setPipeline(this._pipeline),i.setVertexBuffer(0,this._vertexBuffer),i.setBindGroup(0,this._bindGroup);const n=Math.ceil(this._contentLeft.get()*this._devicePixelRatio.get());i.setScissorRect(n,0,this._canvas.width-n,this._canvas.height),i.draw(W1.length/2,this._shapeCollection.entryCount),i.end();const r=t.finish();this._device.queue.submit([r])}}class hfe extends pe{constructor(){super(),this._ruleCache=new Map,this._container=ot("div.monaco-decoration-css-rule-extractor"),this._dummyElement=ot("span"),this._container.appendChild(this._dummyElement),this._register(lt(()=>this._container.remove()))}getStyleRules(e,t){const i=this._ruleCache.get(t);if(i)return i;this._dummyElement.className=t,e.appendChild(this._container);const n=this._getStyleRules(t);return this._ruleCache.set(t,n),e.removeChild(this._container),n}_getStyleRules(e){const t=[],n=[...nR().styleSheets];for(let r=0;r<n.length;r++){const o=n[r];for(const a of o.cssRules)if(a instanceof CSSImportRule)a.styleSheet&&n.push(a.styleSheet);else if(a instanceof CSSStyleRule){const l=`.${e}`,c=a.selectorText.indexOf(l);if(c!==-1){const h=c+l.length;(a.selectorText.length===h||a.selectorText.substring(h,h+1).match(/[ :]/))&&t.push(a)}}}return t}}class dfe{constructor(){this._nextId=1,this._cacheById=new Map,this._cacheByStyle=new mR}getOrCreateEntry(e,t,i){if(e===void 0&&t===void 0&&i===void 0)return 0;const n=this._cacheByStyle.get(e??0,t?1:0,i===void 0?"":i.toFixed(2));if(n)return n.id;const r=this._nextId++,o={id:r,color:e,bold:t,opacity:i};return this._cacheById.set(r,o),this._cacheByStyle.set(o,e??0,t?1:0,i===void 0?"":i.toFixed(2)),r}getStyleSet(e){if(e!==0)return this._cacheById.get(e)}}var ffe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},jM=function(s,e){return function(t,i){e(t,i,s)}},uo,np;let hc=(np=class extends pe{static get decorationCssRuleExtractor(){return uo._decorationCssRuleExtractor}static get decorationStyleCache(){return uo._decorationStyleCache}static get atlas(){if(!uo._atlas)throw new at("Cannot call ViewGpuContext.textureAtlas before device is resolved");return uo._atlas}get atlas(){return uo.atlas}constructor(e,t,i,n){super(),this._instantiationService=t,this._notificationService=i,this.configurationService=n,this.maxGpuCols=2e3,this.canvas=ei(document.createElement("canvas")),this.canvas.setClassName("editorCanvas"),this._register(Ie.runAndSubscribe(n.onDidChangeConfiguration,l=>{if(!l||l.affectsConfiguration("editor.scrollbar.verticalScrollbarSize")){const c=n.getValue("editor").scrollbar?.verticalScrollbarSize??14;this.canvas.domNode.style.boxSizing="border-box",this.canvas.domNode.style.paddingRight=`${c}px`}})),this.ctx=gC(this.canvas.domNode.getContext("webgpu")),uo.device||(uo.device=Qo.requestDevice(l=>{const c=[{label:y(73,"Use DOM-based rendering"),run:()=>this.configurationService.updateValue("editor.experimentalGpuAcceleration","off")}];this._notificationService.prompt(SY.Warning,l,c)}).then(l=>(uo.deviceSync=l.object,uo._atlas||(uo._atlas=this._instantiationService.createInstance(Wm,l.object.limits.maxTextureDimension2D,void 0,uo.decorationStyleCache)),l.object)));const r=xt(this,wi().devicePixelRatio);this._register(ue(wi(),"resize",()=>{r.set(wi().devicePixelRatio,void 0)})),this.devicePixelRatio=r,this._register(cL(this.devicePixelRatio,()=>uo.atlas?.clear()));const o=xt(this,{width:this.canvas.domNode.width,height:this.canvas.domNode.height});this._register(yY(this.canvas.domNode,wi(),(l,c)=>{this.canvas.domNode.width=l,this.canvas.domNode.height=c,o.set({width:l,height:c},void 0)})),this.canvasDevicePixelDimensions=o;const a=xt(this,0);this._register(this.configurationService.onDidChangeConfiguration(l=>{a.set(e.configuration.options.get(165).contentLeft,void 0)})),this.contentLeft=a,this.rectangleRenderer=this._instantiationService.createInstance(ufe,e,this.contentLeft,this.devicePixelRatio,this.canvas.domNode,this.ctx,uo.device)}canRender(e,t,i){const n=t.getViewLineRenderingData(i);if(n.containsRTL||n.maxColumn>this.maxGpuCols)return!1;if(n.inlineDecorations.length>0){let r=!0;for(const o of n.inlineDecorations){if(o.type!==0){r=!1;break}const a=uo._decorationCssRuleExtractor.getStyleRules(this.canvas.domNode,o.inlineClassName);if(r&&=a.every(l=>{if(l.selectorText.includes(":"))return!1;for(const c of l.style)if(!GW(c,l.style))return!1;return!0}),!r)break}return r}return!0}canRenderDetailed(e,t,i){const n=t.getViewLineRenderingData(i),r=[];if(n.containsRTL&&r.push("containsRTL"),n.maxColumn>this.maxGpuCols&&r.push("maxColumn > maxGpuCols"),n.inlineDecorations.length>0){let o=!0;const a=[],l=[],c=[];for(const h of n.inlineDecorations){if(h.type!==0){a.push(h.type),o=!1;continue}const d=uo._decorationCssRuleExtractor.getStyleRules(this.canvas.domNode,h.inlineClassName);o&&=d.every(g=>{if(g.selectorText.includes(":"))return l.push(g.selectorText),!1;for(const _ of g.style)if(!GW(_,g.style))return c.push(`${_}: ${g.style[_]}`),!1;return!0})}a.length>0&&r.push(`inlineDecorations with unsupported types (${a.map(h=>`\`${h}\``).join(", ")})`),c.length>0&&r.push(`inlineDecorations with unsupported CSS rules (${c.map(h=>`\`${h}\``).join(", ")})`),l.length>0&&r.push(`inlineDecorations with unsupported CSS selectors (${l.map(h=>`\`${h}\``).join(", ")})`)}return r}},uo=np,np._decorationCssRuleExtractor=new hfe,np._decorationStyleCache=new dfe,np);hc=uo=ffe([jM(1,Zt),jM(2,cu),jM(3,cn)],hc);const gfe=["color","font-weight","opacity"];function GW(s,e){return!!gfe.includes(s)}function YN(s,e){return s.isBasicASCII&&e.useMonospaceOptimizations?new mfe(s):new pfe(s)}class mfe{constructor(e){this._content=e.content}getSegmentAtIndex(e){return this._content[e]}}class pfe{constructor(e){this._segments=[];const t=e.content,i=A2.Segmenter(void 0,{granularity:"grapheme"}).value,n=Array.from(i.segment(t));let r=0;for(let o=0;o<t.length;o++){const a=n[r];if(!a)break;if(a.index!==o){this._segments.push(void 0);continue}r++,this._segments.push(a)}}getSegmentAtIndex(e){return this._segments[e]?.segment}}class LY extends V0{get glyphRasterizer(){return this._glyphRasterizer.value}constructor(e,t,i,n){super(),this._context=e,this._viewGpuContext=t,this._device=i,this._glyphRasterizer=n,this._context.addEventHandler(this)}}const xY=`
struct GlyphInfo {
	position: vec2f,
	size: vec2f,
	origin: vec2f,
};

struct Vertex {
	@location(0) position: vec2f,
};

struct Cell {
	position: vec2f,
	unused1: vec2f,
	glyphIndex: f32,
	textureIndex: f32
};

struct LayoutInfo {
	canvasDims: vec2f,
	viewportOffset: vec2f,
	viewportDims: vec2f,
}

struct ScrollOffset {
	offset: vec2f
}

struct VSOutput {
	@builtin(position) position:   vec4f,
	@location(1)       layerIndex: f32,
	@location(0)       texcoord:   vec2f,
};

// Uniforms
@group(0) @binding(4)       var<uniform>       layoutInfo:      LayoutInfo;
@group(0) @binding(5)  var<uniform>       atlasDims:       vec2f;
@group(0) @binding(6)            var<uniform>       scrollOffset:    ScrollOffset;

// Storage buffers
@group(0) @binding(0)               var<storage, read> glyphInfo:       array<array<GlyphInfo, ${ju.maximumGlyphCount}>, ${Wm.maximumPageCount}>;
@group(0) @binding(1)                   var<storage, read> cells:           array<Cell>;

@vertex fn vs(
	vert: Vertex,
	@builtin(instance_index) instanceIndex: u32,
	@builtin(vertex_index) vertexIndex : u32
) -> VSOutput {
	let cell = cells[instanceIndex];
	var glyph = glyphInfo[u32(cell.textureIndex)][u32(cell.glyphIndex)];

	var vsOut: VSOutput;
	// Multiple vert.position by 2,-2 to get it into clipspace which ranged from -1 to 1
	vsOut.position = vec4f(
		// Make everything relative to top left instead of center
		vec2f(-1, 1) +
		((vert.position * vec2f(2, -2)) / layoutInfo.canvasDims) * glyph.size +
		((cell.position * vec2f(2, -2)) / layoutInfo.canvasDims) +
		((glyph.origin * vec2f(2, -2)) / layoutInfo.canvasDims) +
		(((layoutInfo.viewportOffset - scrollOffset.offset * vec2(1, -1)) * 2) / layoutInfo.canvasDims),
		0.0,
		1.0
	);

	vsOut.layerIndex = cell.textureIndex;
	// Textures are flipped from natural direction on the y-axis, so flip it back
	vsOut.texcoord = vert.position;
	vsOut.texcoord = (
		// Glyph offset (0-1)
		(glyph.position / atlasDims) +
		// Glyph coordinate (0-1)
		(vsOut.texcoord * (glyph.size / atlasDims))
	);

	return vsOut;
}

@group(0) @binding(2) var ourSampler: sampler;
@group(0) @binding(3)        var ourTexture: texture_2d_array<f32>;

@fragment fn fs(vsOut: VSOutput) -> @location(0) vec4f {
	return textureSample(ourTexture, ourSampler, vsOut.texcoord, u32(vsOut.layerIndex));
}
`,ld=class ld extends LY{get bindGroupEntries(){return[{binding:1,resource:{buffer:this._cellBindBuffer}},{binding:6,resource:{buffer:this._scrollOffsetBindBuffer}}]}constructor(e,t,i,n){super(e,t,i,n),this.type="viewport",this.wgsl=xY,this._cellBindBufferLineCapacity=63,this._activeDoubleBufferIndex=0,this._visibleObjectCount=0,this._scrollInitialized=!1,this._onDidChangeBindGroupEntries=this._register(new ne),this.onDidChangeBindGroupEntries=this._onDidChangeBindGroupEntries.event,this._rebuildCellBuffer(this._cellBindBufferLineCapacity);const r=2;this._scrollOffsetBindBuffer=this._register(Qo.createBuffer(this._device,{label:"Monaco scroll offset buffer",size:r*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})).object,this._scrollOffsetValueBuffer=new Float32Array(r)}_rebuildCellBuffer(e){this._cellBindBuffer?.destroy();const t=(Math.floor(e/32)+1)*32,i=t*ld.maxSupportedColumns*6*Float32Array.BYTES_PER_ELEMENT;this._cellBindBuffer=this._register(Qo.createBuffer(this._device,{label:"Monaco full file cell buffer",size:i,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST})).object,this._cellValueBuffers=[new ArrayBuffer(i),new ArrayBuffer(i)],this._cellBindBufferLineCapacity=t,this._onDidChangeBindGroupEntries.fire()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onTokensChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onLinesChanged(e){return!0}onScrollChanged(e){const t=wi().devicePixelRatio;return this._scrollOffsetValueBuffer[0]=(e?.scrollLeft??this._context.viewLayout.getCurrentScrollLeft())*t,this._scrollOffsetValueBuffer[1]=(e?.scrollTop??this._context.viewLayout.getCurrentScrollTop())*t,this._device.queue.writeBuffer(this._scrollOffsetBindBuffer,0,this._scrollOffsetValueBuffer),!0}onThemeChanged(e){return!0}onLineMappingChanged(e){return!0}onZonesChanged(e){return!0}reset(){for(const e of[0,1]){const t=new Float32Array(this._cellValueBuffers[e]);t.fill(0,0,t.length),this._device.queue.writeBuffer(this._cellBindBuffer,0,t.buffer,0,t.byteLength)}}update(e,t){let i="",n,r=0,o=0,a=0,l=0,c=0,h=0,d,g=0,_=0,b=0,C=0,S,E,x,T,N,A=0,P=0,O;const V=wi().devicePixelRatio;let U;this._scrollInitialized||(this.onScrollChanged(),this._scrollInitialized=!0),this._cellBindBufferLineCapacity<e.endLineNumber-e.startLineNumber+1&&this._rebuildCellBuffer(e.endLineNumber-e.startLineNumber+1);const Y=new Float32Array(this._cellValueBuffers[this._activeDoubleBufferIndex]);Y.fill(0);const B=ld.maxSupportedColumns*6;for(o=e.startLineNumber;o<=e.endLineNumber;o++)if(this._viewGpuContext.canRender(t,e,o)){T=e.getViewLineRenderingData(o),h=0,U=YN(T,t),r=t.spaceWidth*V,l=0,O=T.tokens,_=T.minColumn-1,b=0;for(let W=0,ee=O.getCount();W<ee;W++)if(b=O.getEndOffset(W),!(b<=_)){for(C=O.getMetadata(W),a=_;a<b&&!(a>ld.maxSupportedColumns);a++){if(n=U.getSegmentAtIndex(a),n===void 0)continue;i=n,T.isBasicASCII&&t.useMonospaceOptimizations||(r=this.glyphRasterizer.getTextMetrics(i).width),E=void 0,S=void 0,x=void 0;for(N of T.inlineDecorations){if(o<N.range.startLineNumber||o>N.range.endLineNumber||o===N.range.startLineNumber&&a<N.range.startColumn-1||o===N.range.endLineNumber&&a>=N.range.endColumn-1)continue;const $=hc.decorationCssRuleExtractor.getStyleRules(this._viewGpuContext.canvas.domNode,N.inlineClassName);for(const te of $)for(const ce of te.style){const he=te.styleMap.get(ce)?.toString()??"";switch(ce){case"color":{const j=xe.Format.CSS.parse(he);if(!j)throw new at("Invalid color format "+he);E=j.toNumber32Bit();break}case"font-weight":{_fe(he)>=400?S=!0:S=!1;break}case"opacity":{x=bfe(he);break}default:throw new at("Unexpected inline decoration style")}}}if(i===" "||i==="	"){if(g=((o-1)*ld.maxSupportedColumns+a)*6,Y.fill(0,g,g+6),i==="	"){const $=a+h;h=wn.nextRenderTabStop(a+h,T.tabSize),l+=r*(h-$),h-=a+1}else l+=r;continue}const X=hc.decorationStyleCache.getOrCreateEntry(E,S,x);d=this._viewGpuContext.atlas.getGlyph(this.glyphRasterizer,i,C,X,l),c=Math.round(e.relativeVerticalOffset[o-e.startLineNumber]*V+Math.floor((e.lineHeight*V-(d.fontBoundingBoxAscent+d.fontBoundingBoxDescent))/2)+d.fontBoundingBoxAscent),g=((o-e.startLineNumber)*ld.maxSupportedColumns+a)*6,Y[g+0]=Math.floor(l),Y[g+1]=c,Y[g+4]=d.glyphIndex,Y[g+5]=d.pageIndex,l+=r}_=b}A=((o-e.startLineNumber)*ld.maxSupportedColumns+b)*6,P=(o-e.startLineNumber)*ld.maxSupportedColumns*6,Y.fill(0,A,P)}const F=(e.endLineNumber-e.startLineNumber+1)*B;return this._device.queue.writeBuffer(this._cellBindBuffer,0,Y.buffer,0,(e.endLineNumber-e.startLineNumber)*B*Float32Array.BYTES_PER_ELEMENT),this._activeDoubleBufferIndex=this._activeDoubleBufferIndex?0:1,this._visibleObjectCount=F,F}draw(e,t){if(this._visibleObjectCount<=0)throw new at("Attempt to draw 0 objects");e.draw(W1.length/2,this._visibleObjectCount)}};ld.maxSupportedColumns=2e3;let N7=ld;function _fe(s){switch(s){case"lighter":case"normal":return 400;case"bolder":case"bold":return 700}return parseInt(s)}function bfe(s){return s.endsWith("%")?parseFloat(s.substring(0,s.length-1))/100:s.match(/^\d+(?:\.\d*)/)?parseFloat(s):1}const br=class br extends LY{get bindGroupEntries(){return[{binding:1,resource:{buffer:this._cellBindBuffer}},{binding:6,resource:{buffer:this._scrollOffsetBindBuffer}}]}constructor(e,t,i,n){super(e,t,i,n),this.type="fullfile",this.wgsl=xY,this._activeDoubleBufferIndex=0,this._upToDateLines=[new Set,new Set],this._visibleObjectCount=0,this._finalRenderedLine=0,this._scrollInitialized=!1,this._queuedBufferUpdates=[[],[]];const r=br.maxSupportedLines*br.maxSupportedColumns*6*Float32Array.BYTES_PER_ELEMENT;this._cellBindBuffer=this._register(Qo.createBuffer(this._device,{label:"Monaco full file cell buffer",size:r,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST})).object,this._cellValueBuffers=[new ArrayBuffer(r),new ArrayBuffer(r)];const o=2;this._scrollOffsetBindBuffer=this._register(Qo.createBuffer(this._device,{label:"Monaco scroll offset buffer",size:o*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})).object,this._scrollOffsetValueBuffer=new Float32Array(o)}onConfigurationChanged(e){return this._invalidateAllLines(),this._queueBufferUpdate(e),!0}onDecorationsChanged(e){return this._invalidateAllLines(),!0}onTokensChanged(e){for(const t of e.ranges)this._invalidateLineRange(t.fromLineNumber,t.toLineNumber);return!0}onLinesDeleted(e){return this._invalidateLinesFrom(e.fromLineNumber),this._queueBufferUpdate(e),!0}onLinesInserted(e){return this._invalidateLinesFrom(e.fromLineNumber),!0}onLinesChanged(e){return this._invalidateLineRange(e.fromLineNumber,e.fromLineNumber+e.count),!0}onScrollChanged(e){const t=wi().devicePixelRatio;return this._scrollOffsetValueBuffer[0]=(e?.scrollLeft??this._context.viewLayout.getCurrentScrollLeft())*t,this._scrollOffsetValueBuffer[1]=(e?.scrollTop??this._context.viewLayout.getCurrentScrollTop())*t,this._device.queue.writeBuffer(this._scrollOffsetBindBuffer,0,this._scrollOffsetValueBuffer),!0}onThemeChanged(e){return this._invalidateAllLines(),!0}onLineMappingChanged(e){return this._invalidateAllLines(),this._queueBufferUpdate(e),!0}onZonesChanged(e){return this._invalidateAllLines(),this._queueBufferUpdate(e),!0}_invalidateAllLines(){this._upToDateLines[0].clear(),this._upToDateLines[1].clear()}_invalidateLinesFrom(e){for(const t of[0,1]){const i=this._upToDateLines[t];for(const n of i)n>=e&&i.delete(n)}}_invalidateLineRange(e,t){for(let i=e;i<=t;i++)this._upToDateLines[0].delete(i),this._upToDateLines[1].delete(i)}reset(){this._invalidateAllLines();for(const e of[0,1]){const t=new Float32Array(this._cellValueBuffers[e]);t.fill(0,0,t.length),this._device.queue.writeBuffer(this._cellBindBuffer,0,t.buffer,0,t.byteLength)}this._finalRenderedLine=0}update(e,t){let i="",n,r=0,o=0,a=0,l=0,c=0,h=0,d,g=0,_=0,b=0,C=0,S,E,x,T,N,A=0,P=0,O;const V=wi().devicePixelRatio;let U;this._scrollInitialized||(this.onScrollChanged(),this._scrollInitialized=!0);const Y=new Float32Array(this._cellValueBuffers[this._activeDoubleBufferIndex]),B=br.maxSupportedColumns*6,F=this._upToDateLines[this._activeDoubleBufferIndex];let W=3e3,ee=0;const X=this._queuedBufferUpdates[this._activeDoubleBufferIndex];for(;X.length;){const te=X.shift();switch(te.type){case 2:case 8:case 17:{Y.fill(0),W=1,ee=Math.max(ee,this._finalRenderedLine),this._finalRenderedLine=0;break}case 10:{const ce=(te.fromLineNumber-1)*br.maxSupportedColumns*6,he=te.toLineNumber*br.maxSupportedColumns*6,j=(this._finalRenderedLine-(te.toLineNumber-te.fromLineNumber+1))*br.maxSupportedColumns*6;Y.set(Y.subarray(he),ce),Y.fill(0,j),W=Math.min(W,te.fromLineNumber),ee=Math.max(ee,this._finalRenderedLine),this._finalRenderedLine-=te.toLineNumber-te.fromLineNumber+1;break}}}for(o=e.startLineNumber;o<=e.endLineNumber;o++){if(!this._viewGpuContext.canRender(t,e,o)){A=(o-1)*br.maxSupportedColumns*6,P=o*br.maxSupportedColumns*6,Y.fill(0,A,P),W=Math.min(W,o),ee=Math.max(ee,o);continue}if(!F.has(o)){W=Math.min(W,o),ee=Math.max(ee,o),T=e.getViewLineRenderingData(o),h=0,U=YN(T,t),r=t.spaceWidth*V,l=0,O=T.tokens,_=T.minColumn-1,b=0;for(let te=0,ce=O.getCount();te<ce;te++)if(b=O.getEndOffset(te),!(b<=_)){for(C=O.getMetadata(te),a=_;a<b&&!(a>br.maxSupportedColumns);a++){if(n=U.getSegmentAtIndex(a),n===void 0)continue;i=n,T.isBasicASCII&&t.useMonospaceOptimizations||(r=this.glyphRasterizer.getTextMetrics(i).width),E=void 0,S=void 0,x=void 0;for(N of T.inlineDecorations){if(o<N.range.startLineNumber||o>N.range.endLineNumber||o===N.range.startLineNumber&&a<N.range.startColumn-1||o===N.range.endLineNumber&&a>=N.range.endColumn-1)continue;const j=hc.decorationCssRuleExtractor.getStyleRules(this._viewGpuContext.canvas.domNode,N.inlineClassName);for(const ae of j)for(const Te of ae.style){const Le=ae.styleMap.get(Te)?.toString()??"";switch(Te){case"color":{const Oe=xe.Format.CSS.parse(Le);if(!Oe)throw new at("Invalid color format "+Le);E=Oe.toNumber32Bit();break}case"font-weight":{vfe(Le)>=400?S=!0:S=!1;break}case"opacity":{x=wfe(Le);break}default:throw new at("Unexpected inline decoration style")}}}if(i===" "||i==="	"){if(g=((o-1)*br.maxSupportedColumns+a)*6,Y.fill(0,g,g+6),i==="	"){const j=a+h;h=wn.nextRenderTabStop(a+h,T.tabSize),l+=r*(h-j),h-=a+1}else l+=r;continue}const he=hc.decorationStyleCache.getOrCreateEntry(E,S,x);d=this._viewGpuContext.atlas.getGlyph(this.glyphRasterizer,i,C,he,l),c=Math.round(e.relativeVerticalOffset[o-e.startLineNumber]*V+Math.floor((e.lineHeight*V-(d.fontBoundingBoxAscent+d.fontBoundingBoxDescent))/2)+d.fontBoundingBoxAscent),g=((o-1)*br.maxSupportedColumns+a)*6,Y[g+0]=Math.floor(l),Y[g+1]=c,Y[g+4]=d.glyphIndex,Y[g+5]=d.pageIndex,l+=r}_=b}A=((o-1)*br.maxSupportedColumns+b)*6,P=o*br.maxSupportedColumns*6,Y.fill(0,A,P),F.add(o)}}const $=(e.endLineNumber-e.startLineNumber+1)*B;return W=Math.min(W,br.maxSupportedLines),ee=Math.min(ee,br.maxSupportedLines),W<=ee&&this._device.queue.writeBuffer(this._cellBindBuffer,(W-1)*B*Float32Array.BYTES_PER_ELEMENT,Y.buffer,(W-1)*B*Float32Array.BYTES_PER_ELEMENT,(ee-W+1)*B*Float32Array.BYTES_PER_ELEMENT),this._finalRenderedLine=Math.max(this._finalRenderedLine,ee),this._activeDoubleBufferIndex=this._activeDoubleBufferIndex?0:1,this._visibleObjectCount=$,$}draw(e,t){if(this._visibleObjectCount<=0)throw new at("Attempt to draw 0 objects");e.draw(W1.length/2,this._visibleObjectCount,void 0,(t.startLineNumber-1)*br.maxSupportedColumns)}_queueBufferUpdate(e){this._queuedBufferUpdates[0].push(e),this._queuedBufferUpdates[1].push(e)}};br.maxSupportedLines=3e3,br.maxSupportedColumns=200;let o1=br;function vfe(s){switch(s){case"lighter":case"normal":return 400;case"bolder":case"bold":return 700}return parseInt(s)}function wfe(s){return s.endsWith("%")?parseFloat(s.substring(0,s.length-1))/100:s.match(/^\d+(?:\.\d*)/)?parseFloat(s):1}var Cfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},KW=function(s,e){return function(t,i){e(t,i,s)}};let I7=class extends ko{constructor(e,t,i,n){super(e),this._viewGpuContext=t,this._instantiationService=i,this._logService=n,this._atlasGpuTextureVersions=[],this._initialized=!1,this._glyphRasterizer=this._register(new qs),this._renderStrategy=this._register(new qs),this.canvas=this._viewGpuContext.canvas.domNode,this._register(qt(r=>{this._viewGpuContext.canvasDevicePixelDimensions.read(r);const o=this._lastViewportData;o&&setTimeout(()=>{o===this._lastViewportData&&this.renderText(o)})})),this.initWebgpu()}async initWebgpu(){if(this._device=hc.deviceSync||await hc.device,this._store.isDisposed)return;const e=hc.atlas;this._register(e.onDidDeleteGlyphs(()=>{this._atlasGpuTextureVersions.length=0,this._atlasGpuTextureVersions[0]=0,this._atlasGpuTextureVersions[1]=0,this._renderStrategy.value.reset()}));const t=navigator.gpu.getPreferredCanvasFormat();this._viewGpuContext.ctx.configure({device:this._device,format:t,alphaMode:"premultiplied"}),this._renderPassColorAttachment={view:null,loadOp:"load",storeOp:"store"},this._renderPassDescriptor={label:"Monaco render pass",colorAttachments:[this._renderPassColorAttachment]};let i;{const l=new Float32Array(6),c=(h=this.canvas.width,d=this.canvas.height)=>(l[0]=h,l[1]=d,l[2]=Math.ceil(this._context.configuration.options.get(165).contentLeft*wi().devicePixelRatio),l[3]=0,l[4]=l[0]-l[2],l[5]=l[1]-l[3],l);i=this._register(Qo.createBuffer(this._device,{label:"Monaco uniform buffer",size:24,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST},()=>c())).object,this._register(cL(this._viewGpuContext.canvasDevicePixelDimensions,({width:h,height:d})=>{this._device.queue.writeBuffer(i,0,c(h,d))})),this._register(cL(this._viewGpuContext.contentLeft,()=>{this._device.queue.writeBuffer(i,0,c())}))}let n;n=this._register(Qo.createBuffer(this._device,{label:"Monaco atlas info uniform buffer",size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST},()=>{const l=new Float32Array(2);return l[0]=e.pageSize,l[1]=e.pageSize,l})).object;const r=this._context.configuration.options.get(58),o=this._context.configuration.options.get(61);this._glyphRasterizer.value=this._register(new GN(o,r,this._viewGpuContext.devicePixelRatio.get(),hc.decorationStyleCache)),this._register(cL(this._viewGpuContext.devicePixelRatio,()=>{this._refreshGlyphRasterizer()})),this._renderStrategy.value=this._instantiationService.createInstance(o1,this._context,this._viewGpuContext,this._device,this._glyphRasterizer),this._glyphStorageBuffer=this._register(Qo.createBuffer(this._device,{label:"Monaco glyph storage buffer",size:Wm.maximumPageCount*(ju.maximumGlyphCount*24),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST})).object,this._atlasGpuTextureVersions[0]=0,this._atlasGpuTextureVersions[1]=0,this._atlasGpuTexture=this._register(Qo.createTexture(this._device,{label:"Monaco atlas texture",format:"rgba8unorm",size:{width:e.pageSize,height:e.pageSize,depthOrArrayLayers:Wm.maximumPageCount},dimension:"2d",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT})).object,this._updateAtlasStorageBufferAndTexture(),this._vertexBuffer=this._register(Qo.createBuffer(this._device,{label:"Monaco vertex buffer",size:W1.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST},W1)).object;const a=this._device.createShaderModule({label:"Monaco shader module",code:this._renderStrategy.value.wgsl});if(this._pipeline=this._device.createRenderPipeline({label:"Monaco render pipeline",layout:"auto",vertex:{module:a,buffers:[{arrayStride:2*Float32Array.BYTES_PER_ELEMENT,attributes:[{shaderLocation:0,offset:0,format:"float32x2"}]}]},fragment:{module:a,targets:[{format:t,blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"}}}]}}),this._rebuildBindGroup=()=>{this._bindGroup=this._device.createBindGroup({label:"Monaco bind group",layout:this._pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this._glyphStorageBuffer}},{binding:2,resource:this._device.createSampler({label:"Monaco atlas sampler",magFilter:"nearest",minFilter:"nearest"})},{binding:3,resource:this._atlasGpuTexture.createView()},{binding:4,resource:{buffer:i}},{binding:5,resource:{buffer:n}},...this._renderStrategy.value.bindGroupEntries]})},this._rebuildBindGroup(),this._initialized=!0,this._initViewportData){for(const l of this._initViewportData)this.renderText(l);this._initViewportData=void 0}}_refreshRenderStrategy(e){if(this._renderStrategy.value?.type==="viewport"||e.endLineNumber<o1.maxSupportedLines&&this._viewportMaxColumn(e)<o1.maxSupportedColumns)return;this._logService.trace(`File is larger than ${o1.maxSupportedLines} lines or ${o1.maxSupportedColumns} columns, switching to viewport render strategy`);const t=this._instantiationService.createInstance(N7,this._context,this._viewGpuContext,this._device,this._glyphRasterizer);this._renderStrategy.value=t,this._register(t.onDidChangeBindGroupEntries(()=>this._rebuildBindGroup?.())),this._rebuildBindGroup?.()}_viewportMaxColumn(e){let t=0,i;for(let n=e.startLineNumber;n<=e.endLineNumber;n++)i=e.getViewLineRenderingData(n),t=Math.max(t,i.maxColumn);return t}_updateAtlasStorageBufferAndTexture(){for(const[e,t]of hc.atlas.pages.entries()){if(e>=Wm.maximumPageCount){console.log(`Attempt to upload atlas page [${e}], only ${Wm.maximumPageCount} are supported currently`);continue}if(t.version===this._atlasGpuTextureVersions[e])continue;this._logService.trace("Updating atlas page[",e,"] from version ",this._atlasGpuTextureVersions[e]," to version ",t.version);const i=6*ju.maximumGlyphCount,n=new Float32Array(i);let r=0;for(const o of t.glyphs)n[r+0]=o.x,n[r+0+1]=o.y,n[r+2]=o.w,n[r+2+1]=o.h,n[r+4]=o.originOffsetX,n[r+4+1]=o.originOffsetY,r+=6;if(r/6>ju.maximumGlyphCount)throw new Error(`Attempting to write more glyphs (${r/6}) than the GPUBuffer can hold (${ju.maximumGlyphCount})`);this._device.queue.writeBuffer(this._glyphStorageBuffer,e*6*ju.maximumGlyphCount*Float32Array.BYTES_PER_ELEMENT,n,0,6*ju.maximumGlyphCount),t.usedArea.right-t.usedArea.left>0&&t.usedArea.bottom-t.usedArea.top>0&&this._device.queue.copyExternalImageToTexture({source:t.source},{texture:this._atlasGpuTexture,origin:{x:t.usedArea.left,y:t.usedArea.top,z:e}},{width:t.usedArea.right-t.usedArea.left+1,height:t.usedArea.bottom-t.usedArea.top+1}),this._atlasGpuTextureVersions[e]=t.version}}prepareRender(e){throw new at("Should not be called")}render(e){throw new at("Should not be called")}onConfigurationChanged(e){return this._refreshGlyphRasterizer(),!0}onCursorStateChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onLineMappingChanged(e){return!0}onRevealRangeRequest(e){return!0}onScrollChanged(e){return!0}onThemeChanged(e){return!0}onZonesChanged(e){return!0}_refreshGlyphRasterizer(){const e=this._glyphRasterizer.value;if(!e)return;const t=this._context.configuration.options.get(58),i=this._context.configuration.options.get(61),n=this._viewGpuContext.devicePixelRatio.get();(e.fontFamily!==t||e.fontSize!==i||e.devicePixelRatio!==n)&&(this._glyphRasterizer.value=new GN(i,t,n,hc.decorationStyleCache))}renderText(e){if(this._initialized)return this._refreshRenderStrategy(e),this._renderText(e);this._initViewportData=this._initViewportData??[],this._initViewportData.push(e)}_renderText(e){this._viewGpuContext.rectangleRenderer.draw(e);const t=new UN(this._context.configuration,this._context.theme.type);this._renderStrategy.value.update(e,t),this._updateAtlasStorageBufferAndTexture();const i=this._device.createCommandEncoder({label:"Monaco command encoder"});this._renderPassColorAttachment.view=this._viewGpuContext.ctx.getCurrentTexture().createView({label:"Monaco canvas texture view"});const n=i.beginRenderPass(this._renderPassDescriptor);n.setPipeline(this._pipeline),n.setVertexBuffer(0,this._vertexBuffer);const r=Math.ceil(this._viewGpuContext.contentLeft.get()*this._viewGpuContext.devicePixelRatio.get());n.setScissorRect(r,0,this.canvas.width-r,this.canvas.height),n.setBindGroup(0,this._bindGroup),this._renderStrategy.value.draw(n,e),n.end();const o=i.finish();this._device.queue.submit([o]),this._lastViewportData=e,this._lastViewLineOptions=t}linesVisibleRangesForRange(e,t){if(!this._lastViewportData)return null;const i=e.endLineNumber,n=ie.intersectRanges(e,this._lastViewportData.visibleRange);if(!n)return null;const r=this._lastViewportData.startLineNumber,o=this._lastViewportData.endLineNumber,a=this._lastViewportData,l=this._lastViewLineOptions;if(!a||!l)return null;const c=[];let h=0;t&&(h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(n.startLineNumber,1)).lineNumber);for(let d=n.startLineNumber;d<=n.endLineNumber;d++){if(d<r||d>o)continue;const g=d===n.startLineNumber?n.startColumn:1,_=d!==i,b=_?this._context.viewModel.getLineMaxColumn(d):n.endColumn,C=this._visibleRangesForLineRange(d,g,b);if(C){if(t&&d<i){const S=h;h=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new se(d+1,1)).lineNumber,S!==h&&(C.ranges[C.ranges.length-1].width+=l.spaceWidth)}c.push(new HK(C.outsideRenderedLine,d,P2.from(C.ranges),_))}}return c.length===0?null:c}_visibleRangesForLineRange(e,t,i){if(this.shouldRender())return null;const n=this._lastViewportData,r=this._lastViewLineOptions;if(!n||!r||e<n.startLineNumber||e>n.endLineNumber)return null;const o=n.getViewLineRenderingData(e),a=o.content;let l;o.isBasicASCII&&r.useMonospaceOptimizations||(l=YN(o,r));let c="",h=0,d=0;for(let C=0;C<t-1;C++){if(o.isBasicASCII&&r.useMonospaceOptimizations)c=a.charAt(C);else{if(c=l.getSegmentAtIndex(C),c===void 0)continue;d+=this._renderStrategy.value.glyphRasterizer.getTextMetrics(c).width/wi().devicePixelRatio-r.spaceWidth}c==="	"?h=wn.nextRenderTabStop(h,o.tabSize):h++}let g=h,_=0;for(let C=t-1;C<i-1;C++){if(o.isBasicASCII&&r.useMonospaceOptimizations)c=a.charAt(C);else{if(c=l.getSegmentAtIndex(C),c===void 0)continue;_+=this._renderStrategy.value.glyphRasterizer.getTextMetrics(c).width/wi().devicePixelRatio-r.spaceWidth}c==="	"?g=wn.nextRenderTabStop(g,o.tabSize):g++}return new p7(!1,[new Qm(h*r.spaceWidth+d,(g-h)*r.spaceWidth+_)])}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new WK(t.outsideRenderedLine,t.ranges[0].left):null}getLineWidth(e){if(!this._lastViewportData||!this._lastViewLineOptions||!this._viewGpuContext.canRender(this._lastViewLineOptions,this._lastViewportData,e))return;const t=this._lastViewportData.getViewLineRenderingData(e),n=this._visibleRangesForLineRange(e,1,t.maxColumn)?.ranges.at(-1);if(n)return n.width}getPositionAtCoordinate(e,t){if(!this._lastViewportData||!this._lastViewLineOptions||!this._viewGpuContext.canRender(this._lastViewLineOptions,this._lastViewportData,e))return;const i=this._lastViewportData.getViewLineRenderingData(e),n=i.content,r=wi().devicePixelRatio,o=t*r,a=this._lastViewLineOptions.spaceWidth*r,l=YN(i,this._lastViewLineOptions);let c=0,h=0,d=0,g=0;for(let _=0;_<n.length;_++){const b=l.getSegmentAtIndex(_);if(b===void 0){g++;continue}if(b==="	"){const C=_+d;d=wn.nextRenderTabStop(_+d,i.tabSize),h=a*(d-C),d-=_+1}else i.isBasicASCII&&this._lastViewLineOptions.useMonospaceOptimizations?h=a:h=this._renderStrategy.value.glyphRasterizer.getTextMetrics(b).width;if(o<c+h/2)break;c+=h,g++}return new se(e,g+1)}};I7=Cfe([KW(2,Zt),KW(3,Lo)],I7);class yfe{constructor(){this._onDidChange=new ne,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const Ld=new yfe,ar=At("keybindingService");class kY extends ko{}class EY{_getPageOfLine(e,t){return Math.floor((e-1)/t)}_getRangeForPage(e,t){const i=e*t,n=i+1,r=i+t;return new ie(n,1,r+1,1)}fromEditorSelection(e,t,i,n){const o=this._getPageOfLine(t.startLineNumber,i),a=this._getRangeForPage(o,i),l=this._getPageOfLine(t.endLineNumber,i),c=this._getRangeForPage(l,i);let h=a.intersectRanges(new ie(1,1,t.startLineNumber,t.startColumn));if(n&&e.getValueLengthInRange(h,1)>500){const T=e.modifyPosition(h.getEndPosition(),-500);h=ie.fromPositions(T,h.getEndPosition())}const d=e.getValueInRange(h,1),g=e.getLineCount(),_=e.getLineMaxColumn(g);let b=c.intersectRanges(new ie(t.endLineNumber,t.endColumn,g,_));if(n&&e.getValueLengthInRange(b,1)>500){const T=e.modifyPosition(b.getStartPosition(),500);b=ie.fromPositions(b.getStartPosition(),T)}const C=e.getValueInRange(b,1);let S;if(o===l||o+1===l)S=e.getValueInRange(t,1);else{const T=a.intersectRanges(t),N=c.intersectRanges(t);S=e.getValueInRange(T,1)+"…"+e.getValueInRange(N,1)}n&&S.length>2*500&&(S=S.substring(0,500)+"…"+S.substring(S.length-500,S.length));let E,x;return t.getDirection()===0?(E=d.length,x=d.length+S.length):(x=d.length,E=d.length+S.length),{value:d+S+C,selection:t,selectionStart:E,selectionEnd:x,startPositionWithinEditor:h.getStartPosition(),newlineCountBeforeSelection:h.endLineNumber-h.startLineNumber}}}function A7(s,e){if(s.get(2)===1){const i=e.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),n=e.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),r=e.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),o=y(56,"The editor is not accessible at this time.");return i?y(57,"{0} To enable screen reader optimized mode, use {1}",o,i):n?y(58,"{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",o,n):r?y(59,"{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",o,r):o}return s.get(8)}function YW(s){let e=0,t=-1;do{if(t=s.indexOf(`
`,t+1),t===-1)break;e++}while(!0);return e}var Sfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ZW=function(s,e){return function(t,i){e(t,i,s)}};class Lfe{constructor(e,t,i,n,r){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=n,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new se(this.modelLineNumber,this.distanceToModelLineStart+1),i=new se(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const GM=Va;let R7=class extends kY{constructor(e,t,i,n,r,o){super(e),this._keybindingService=r,this._instantiationService=o,this._primaryCursorPosition=new se(1,1),this._primaryCursorVisibleRange=null,this._viewController=i,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const a=this._context.configuration.options,l=a.get(165);this._setAccessibilityOptions(a),this._contentLeft=l.contentLeft,this._contentWidth=l.contentWidth,this._contentHeight=l.height,this._fontInfo=a.get(59),this._emptySelectionClipboard=a.get(45),this._copyWithSyntaxHighlighting=a.get(31),this._visibleTextArea=null,this._selections=[new Yt(1,1,1,1)],this._modelSelections=[new Yt(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ei(document.createElement("textarea")),lh.write(this.textArea,7),this.textArea.setClassName(`inputarea ${Aw}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:c}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${c*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",A7(a,this._keybindingService)),this.textArea.setAttribute("aria-required",a.get(9)?"true":"false"),this.textArea.setAttribute("tabindex",String(a.get(140))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",y(60,"editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",a.get(104)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=ei(document.createElement("div")),this.textAreaCover.setPosition("absolute"),t.appendChild(this.textArea),t.appendChild(this.textAreaCover);const h=new EY,d={getDataToCopy:()=>KK(this._context.viewModel,this._modelSelections,this._emptySelectionClipboard,this._copyWithSyntaxHighlighting),getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const b=this._selections[0];if(Bt&&b.isEmpty()){const S=b.getStartPosition();let E=this._getWordBeforePosition(S);if(E.length===0&&(E=this._getCharacterBeforePosition(S)),E.length>0)return new Qr(E,E.length,E.length,ie.fromPositions(S),0)}if(Bt&&!b.isEmpty()&&this._context.viewModel.getValueLengthInRange(b,0)<500){const S=this._context.viewModel.getValueInRange(b,0);return new Qr(S,0,S.length,b,0)}if(u0&&!b.isEmpty()){const S="vscode-placeholder";return new Qr(S,0,S.length,null,void 0)}return Qr.EMPTY}if(BV){const b=this._selections[0];if(b.isEmpty()){const C=b.getStartPosition(),[S,E]=this._getAndroidWordAtPosition(C);if(S.length>0)return new Qr(S,E,E,ie.fromPositions(C),0)}return Qr.EMPTY}const _=h.fromEditorSelection(this._context.viewModel,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0);return Qr.fromScreenReaderContentState(_)},deduceModelPosition:(_,b,C)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(_,b,C)},g=this._register(new Due(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(v7,d,g,tu,{isAndroid:BV,isChrome:y2,isFirefox:Va,isSafari:u0})),this._register(this._textAreaInput.onKeyDown(_=>{this._viewController.emitKeyDown(_)})),this._register(this._textAreaInput.onKeyUp(_=>{this._viewController.emitKeyUp(_)})),this._register(this._textAreaInput.onPaste(_=>{let b=!1,C=null,S=null;_.metadata&&(b=this._emptySelectionClipboard&&!!_.metadata.isFromEmptySelection,C=typeof _.metadata.multicursorText<"u"?_.metadata.multicursorText:null,S=_.metadata.mode),this._viewController.paste(_.text,b,C,S)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(_=>{_.replacePrevCharCnt||_.replaceNextCharCnt||_.positionDelta?this._viewController.compositionType(_.text,_.replacePrevCharCnt,_.replaceNextCharCnt,_.positionDelta):this._viewController.type(_.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(_=>{this._viewController.setSelection(_)})),this._register(this._textAreaInput.onCompositionStart(_=>{const b=this.textArea.domNode,C=this._modelSelections[0],{distanceToModelLineStart:S,widthOfHiddenTextBefore:E}=(()=>{const T=b.value.substring(0,Math.min(b.selectionStart,b.selectionEnd)),N=T.lastIndexOf(`
`),A=T.substring(N+1),P=A.lastIndexOf("	"),O=A.length-P-1,V=C.getStartPosition(),U=Math.min(V.column-1,O),Y=V.column-1-U,B=A.substring(0,A.length-U),{tabSize:F}=this._context.viewModel.model.getOptions(),W=xfe(this.textArea.domNode.ownerDocument,B,this._fontInfo,F);return{distanceToModelLineStart:Y,widthOfHiddenTextBefore:W}})(),{distanceToModelLineEnd:x}=(()=>{const T=b.value.substring(Math.max(b.selectionStart,b.selectionEnd)),N=T.indexOf(`
`),A=N===-1?T:T.substring(0,N),P=A.indexOf("	"),O=P===-1?A.length:A.length-P-1,V=C.getEndPosition(),U=Math.min(this._context.viewModel.model.getLineMaxColumn(V.lineNumber)-V.column,O);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(V.lineNumber)-V.column-U}})();this._context.viewModel.revealRange("keyboard",!0,ie.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Lfe(this._context,C.startLineNumber,S,E,x),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Aw} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(_=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${Aw}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(Ld.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}get domNode(){return this.textArea}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose(),this.textArea.domNode.remove(),this.textAreaCover.domNode.remove()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),n=rC(t,[]);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const h=i.charCodeAt(o-2);n.get(h)!==0?r=!1:o--}if(a&&l>i.length&&(a=!1),a){const h=i.charCodeAt(l-1);n.get(h)!==0?a=!1:l++}c++}return[i.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=rC(this._context.configuration.options.get(148),[]);let n=e.column,r=0;for(;n>1;){const o=t.charCodeAt(n-2);if(i.get(o)!==0||r>50)return t.substring(n-1,e.column-1);r++,n--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!xs(i.charCodeAt(0)))return i}return""}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===N0.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const n=e.get(165).wrappingColumn;if(n!==-1&&this._accessibilitySupport!==1){const r=e.get(59);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*r.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=GM?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(165);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(59),this._emptySelectionClipboard=t.get(45),this._copyWithSyntaxHighlighting=t.get(31),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:n}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${n*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",A7(t,this._keybindingService)),this.textArea.setAttribute("aria-required",t.get(9)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(140))),(e.hasChanged(41)||e.hasChanged(104))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focus(){this._textAreaInput.focusTextArea()}refreshFocusState(){this._textAreaInput.refreshFocusState()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!Ld.enabled||e.get(41)&&e.get(104)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){this._primaryCursorPosition=new se(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,n=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(r&&o&&i&&n&&n.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=YW(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,h=this._contentLeft+i.left-this._scrollLeft,d=n.left-i.left+1;if(h<this._contentLeft){const T=this._contentLeft-h;h+=T,c+=T,d-=T}d>this._contentWidth&&(d=this._contentWidth);const g=this._context.viewLayout.getLineHeightForLineNumber(r.lineNumber),_=this._context.viewModel.getFontSizeAtPosition(this._primaryCursorPosition),b=this._context.viewModel.getViewLineData(r.lineNumber),C=b.tokens.findTokenIndexAtOffset(r.column-1),S=b.tokens.findTokenIndexAtOffset(o.column-1),E=C===S,x=this._visibleTextArea.definePresentation(E?b.tokens.getPresentation(C):null);this.textArea.domNode.scrollTop=l*g,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:h,width:d,height:g,useCover:!1,color:(es.getColorMap()||[])[x.foreground],italic:x.italic,bold:x.bold,underline:x.underline,strikethrough:x.strikethrough,fontSize:_})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Bt||this._accessibilitySupport===2){const i=this._primaryCursorPosition.lineNumber,n=this._context.viewLayout.getLineHeightForLineNumber(i);this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:n,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const r=this._textAreaInput.textAreaState.newlineCountBeforeSelection??YW(this.textArea.domNode.value.substring(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=r*n;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:GM?0:1,useCover:!1})}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:GM?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;Sr(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setLineHeight(e.height),t.setFontSize(e.fontSize??this._fontInfo.fontSize),t.setColor(e.color?xe.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const n=this._context.configuration.options;n.get(66)?i.setClassName("monaco-editor-background textAreaCover "+qN.OUTER_CLASS_NAME):n.get(76).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+zN.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};R7=Sfe([ZW(4,ar),ZW(5,Zt)],R7);function xfe(s,e,t,i){if(e.length===0)return 0;const n=s.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";const r=s.createElement("span");Sr(r,t),r.style.whiteSpace="pre",r.style.tabSize=`${i*t.spaceWidth}px`,r.append(e),n.appendChild(r),s.body.appendChild(n);const o=r.offsetWidth;return n.remove(),o}var kfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Efe=function(s,e){return function(t,i){e(t,i,s)}};let M7=class extends pe{constructor(e,t,i){super(),this._domNode=t,this._onFocusChange=i,this._isFocused=!1,this._isPaused=!1,this._register(ue(this._domNode,"focus",()=>{e.trace("NativeEditContext.focus"),!this._isPaused&&this.refreshFocusState()})),this._register(ue(this._domNode,"blur",()=>{e.trace("NativeEditContext.blur"),!this._isPaused&&this._handleFocusedChanged(!1)}))}pause(){this._isPaused=!0}resume(){this._isPaused=!1,this.refreshFocusState()}_handleFocusedChanged(e){this._isFocused!==e&&(this._isFocused=e,this._onFocusChange(this._isFocused))}focus(){this._domNode.focus(),this.refreshFocusState()}refreshFocusState(){const e=f0(this._domNode),t=e?e.activeElement:Us(),i=this._domNode===t;this._handleFocusedChanged(i)}get isFocused(){return this._isFocused}};M7=kfe([Efe(0,Lo)],M7);function CS(s,e,t,i){return s.addEventListener(e,t,i),{dispose(){s.removeEventListener(e,t)}}}var Tfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Dfe=function(s,e){return function(t,i){e(t,i,s)}};const Nfe=bp("richScreenReaderContent",{createHTML:s=>s}),KM="data-line-number";let O7=class extends pe{constructor(e,t,i,n){super(),this._domNode=e,this._context=t,this._viewController=i,this._accessibilityService=n,this._selectionChangeListener=this._register(new qs),this._accessibilityPageSize=1,this._ignoreSelectionChangeTime=0,this._state=Wx.NULL,this._strategy=new Rfe,this._renderedLines=new Map,this._renderedSelection=new Yt(1,1,1,1),this.onConfigurationChanged(this._context.configuration.options)}updateScreenReaderContent(e){const t=wi().document.activeElement;if(!t||t!==this._domNode.domNode)return;if(this._accessibilityService.isScreenReaderOptimized()){const n=this._getScreenReaderContentLineIntervals(e);this._state.equals(n)||(this._state=n,this._renderedLines=this._renderScreenReaderContent(n)),this._renderedSelection.equalsSelection(e)||(this._renderedSelection=e,this._setSelectionOnScreenReaderContent(this._context,this._renderedLines,e))}else this._state=Wx.NULL,this._setIgnoreSelectionChangeTime("setValue"),this._domNode.domNode.textContent=""}updateScrollTop(e){const t=this._state.intervals;if(!t.length)return;const i=this._context.viewModel.viewLayout,n=t[0].startLine,r=i.getVerticalOffsetForLineNumber(n),o=i.getVerticalOffsetForLineNumber(e.positionLineNumber);this._domNode.domNode.scrollTop=o-r}onFocusChange(e){e?this._selectionChangeListener.value=this._setSelectionChangeListener():this._selectionChangeListener.value=void 0}onConfigurationChanged(e){this._accessibilityPageSize=e.get(3)}onWillCut(){this._setIgnoreSelectionChangeTime("onCut")}onWillPaste(){this._setIgnoreSelectionChangeTime("onWillPaste")}_setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}_setSelectionChangeListener(){let e=0;return ue(this._domNode.domNode.ownerDocument,"selectionchange",()=>{if(!(wi().document.activeElement===this._domNode.domNode)||!this._accessibilityService.isScreenReaderOptimized()||!Ld.enabled)return;const r=Date.now(),o=r-e;if(e=r,o<5)return;const a=r-this._ignoreSelectionChangeTime;if(this._ignoreSelectionChangeTime=0,a<100)return;const l=this._getEditorSelectionFromDomRange();l&&this._viewController.setSelection(l)})}_renderScreenReaderContent(e){const t=[],i=new Map;for(const n of e.intervals)for(let r=n.startLine;r<=n.endLine;r++){const o=this._renderLine(r);i.set(r,o),t.push(o.domNode)}return this._setIgnoreSelectionChangeTime("setValue"),this._domNode.domNode.replaceChildren(...t),i}_renderLine(e){const t=this._context.viewModel,i=t.getViewLineRenderingData(e),n=this._context.configuration.options,r=n.get(59),o=n.get(133),a=n.get(108),l=n.get(60),c=n.get(40),h=_c.filter(i.inlineDecorations,e,i.minColumn,i.maxColumn),d=r.isMonospace&&!c,g=l!==rp.OFF;let _;n.get(47)==="off"?_=n.get(113):_="none";const C=new B0(d,r.canUseHalfwidthRightwardsArrow,i.content,i.continuesWithWrappedLine,i.isBasicASCII,i.containsRTL,i.minColumn-1,i.tokens,h,i.tabSize,i.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,o,_,a,g,null,null,0,!0),S=new TC(1e4),E=wR(C,S),x=S.build(),T=Nfe?.createHTML(x)??x,N=t.viewLayout.getLineHeightForLineNumber(e)+"px",A=document.createElement("div");return A.innerHTML=T,A.style.lineHeight=N,A.style.height=N,A.setAttribute(KM,e.toString()),new Ife(A,E.characterMapping)}_setSelectionOnScreenReaderContent(e,t,i){const r=wi().document.getSelection();if(!r)return;const o=i.startLineNumber,a=i.endLineNumber,l=t.get(o),c=t.get(a);if(!l||!c)return;const h=e.viewModel,d=h.model,g=h.coordinatesConverter,_=new ie(o,1,o,i.selectionStartColumn),b=g.convertViewRangeToModelRange(_),C=d.getCharacterCountInRange(b),S=new ie(a,1,a,i.positionColumn),E=g.convertViewRangeToModelRange(S),x=d.getCharacterCountInRange(E),T=l.characterMapping.getDomPosition(C),N=c.characterMapping.getDomPosition(x),A=l.domNode.firstChild,P=c.domNode.firstChild,O=A.childNodes,V=P.childNodes,U=O.item(T.partIndex),Y=V.item(N.partIndex);!U.firstChild||!Y.firstChild||(this._setIgnoreSelectionChangeTime("setRange"),r.setBaseAndExtent(U.firstChild,i.startColumn===1?0:T.charIndex+1,Y.firstChild,i.endColumn===1?0:N.charIndex+1))}_getScreenReaderContentLineIntervals(e){return this._strategy.fromEditorSelection(this._context.viewModel,e,this._accessibilityPageSize)}_getEditorSelectionFromDomRange(){if(!this._renderedLines)return;const e=wi().document.getSelection();if(!e||e.rangeCount===0)return;const i=e.getRangeAt(0),n=i.startContainer,r=i.endContainer,o=n.parentElement,a=r.parentElement;if(!o||!qn(o)||!a||!qn(a))return;const l=o.parentElement?.parentElement,c=a.parentElement?.parentElement;if(!l||!c)return;const h=l.getAttribute(KM),d=c.getAttribute(KM);if(!h||!d)return;const g=parseInt(h),_=parseInt(d),b=this._renderedLines.get(g)?.characterMapping,C=this._renderedLines.get(_)?.characterMapping;if(!b||!C)return;const S=RN(b,o,i.startOffset),E=RN(C,a,i.endOffset);return e.direction==="forward"?new Yt(g,S,_,E):new Yt(_,E,g,S)}};O7=Tfe([Dfe(3,Ol)],O7);class Ife{constructor(e,t){this.domNode=e,this.characterMapping=t}}class Afe{constructor(e,t){this.startLine=e,this.endLine=t}}class Wx{constructor(e,t){this.intervals=t;let i="";for(const n of t)for(let r=n.startLine;r<=n.endLine;r++)i+=e.getLineContent(r)+`
`;this.value=i}equals(e){return this.value===e.value}static get NULL(){const e={getLineContent:()=>"",getLineCount:()=>1,getLineMaxColumn:()=>1,getValueInRange:()=>"",getValueLengthInRange:()=>0,modifyPosition:(t,i)=>t};return new Wx(e,[])}}class Rfe{constructor(){}_getPageOfLine(e,t){return Math.floor((e-1)/t)}_getRangeForPage(e,t,i){const n=t*i,r=n+1,o=Math.min(n+i,e.getLineCount());return new Afe(r,o)}fromEditorSelection(e,t,i){const n=this._getPageOfLine(t.startLineNumber,i),r=this._getRangeForPage(e,n,i),o=this._getPageOfLine(t.endLineNumber,i),a=this._getRangeForPage(e,o,i),l=[{startLine:r.startLine,endLine:r.endLine}];return n+1<o&&l.push({startLine:a.startLine,endLine:a.endLine}),new Wx(e,l)}}class Mfe{constructor(e){this.replacements=e;let t=-1;for(const i of e){if(!(i.replaceRange.start>=t))throw new at(`Edits must be disjoint and sorted. Found ${i} after ${t}`);t=i.replaceRange.endExclusive}}toString(){return`[${this.replacements.map(t=>t.toString()).join(", ")}]`}normalize(){const e=[];let t;for(const i of this.replacements)if(!(i.getNewLength()===0&&i.replaceRange.length===0)){if(t&&t.replaceRange.endExclusive===i.replaceRange.start){const n=t.tryJoinTouching(i);if(n){t=n;continue}}t&&e.push(t),t=i}return t&&e.push(t),this._createNew(e)}compose(e){const t=this.normalize(),i=e.normalize();if(t.isEmpty())return i;if(i.isEmpty())return t;const n=[...t.replacements],r=[];let o=0;for(const a of i.replacements){for(;;){const d=n[0];if(!d||d.replaceRange.start+o+d.getNewLength()>=a.replaceRange.start)break;n.shift(),r.push(d),o+=d.getNewLength()-d.replaceRange.length}const l=o;let c,h;for(;;){const d=n[0];if(!d||d.replaceRange.start+o>a.replaceRange.endExclusive)break;c||(c=d),h=d,n.shift(),o+=d.getNewLength()-d.replaceRange.length}if(!c)r.push(a.delta(-o));else{const d=Math.min(c.replaceRange.start,a.replaceRange.start-l),g=a.replaceRange.start-(c.replaceRange.start+l);if(g>0){const S=c.slice(it.emptyAt(d),new it(0,g));r.push(S)}if(!h)throw new at("Invariant violation: lastIntersecting is undefined");const _=h.replaceRange.endExclusive+o-a.replaceRange.endExclusive;if(_>0){const S=h.slice(it.ofStartAndLength(h.replaceRange.endExclusive,0),new it(h.getNewLength()-_,h.getNewLength()));n.unshift(S),o-=S.getNewLength()-S.replaceRange.length}const b=new it(d,a.replaceRange.endExclusive-o),C=a.slice(b,new it(0,a.getNewLength()));r.push(C)}}for(;;){const a=n.shift();if(!a)break;r.push(a)}return this._createNew(r).normalize()}getNewRanges(){const e=[];let t=0;for(const i of this.replacements)e.push(it.ofStartAndLength(i.replaceRange.start+t,i.getNewLength())),t+=i.getLengthDelta();return e}isEmpty(){return this.replacements.length===0}}class Ofe{constructor(e){this.replaceRange=e}delta(e){return this.slice(this.replaceRange.delta(e),new it(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new it(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}}class Pfe extends Mfe{apply(e){const t=[];let i=0;for(const n of this.replacements)t.push(e.substring(i,n.replaceRange.start)),t.push(n.newText),i=n.replaceRange.endExclusive;return t.push(e.substring(i)),t.join("")}}class Bfe extends Ofe{constructor(e,t){super(e),this.newText=t}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(e){return e.substring(0,this.replaceRange.start)+this.newText+e.substring(this.replaceRange.endExclusive)}removeCommonSuffixPrefix(e){const t=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=Jw(t,this.newText),n=Math.min(t.length-i,this.newText.length-i,eC(t,this.newText)),r=new it(this.replaceRange.start+i,this.replaceRange.endExclusive-n),o=this.newText.substring(i,this.newText.length-n);return new E1(r,o)}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){const t=this.replaceRange.substring(e),i=Jw(t,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new it(i,this.newText.length))}removeCommonSuffix(e){const t=this.replaceRange.substring(e),i=eC(t,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new it(0,this.newText.length-i))}toJson(){return{txt:this.newText,pos:this.replaceRange.start,len:this.replaceRange.length}}}const pw=class pw extends Pfe{static compose(e){if(e.length===0)return pw.empty;let t=e[0];for(let i=1;i<e.length;i++)t=t.compose(e[i]);return t}constructor(e){super(e)}_createNew(e){return new pw(e)}};pw.empty=new pw([]);let P7=pw;class E1 extends Bfe{static insert(e,t){return new E1(it.emptyAt(e),t)}static replace(e,t){return new E1(e,t)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new E1(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,t){return new E1(e,t?t.substring(this.newText):this.newText)}}Doe({StringEdit:P7,StringReplacement:E1,TextReplacement:$u,TextEdit:Ex,TextLength:Ha});var Ffe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Vfe=function(s,e){return function(t,i){e(t,i,s)}};let B7=class extends pe{constructor(e,t,i,n){super(),this._domNode=e,this._context=t,this._viewController=i,this._accessibilityService=n,this._selectionChangeListener=this._register(new qs),this._accessibilityPageSize=1,this._ignoreSelectionChangeTime=0,this._strategy=new EY,this.onConfigurationChanged(this._context.configuration.options)}updateScreenReaderContent(e){const t=this._domNode.domNode,i=wi().document.activeElement;if(!i||i!==t)return;if(this._accessibilityService.isScreenReaderOptimized()){this._state=this._getScreenReaderContentState(e),t.textContent!==this._state.value&&(this._setIgnoreSelectionChangeTime("setValue"),t.textContent=this._state.value);const r=wi().document.getSelection();if(!r)return;const o=this._getScreenReaderRange(this._state.selectionStart,this._state.selectionEnd);if(!o)return;this._setIgnoreSelectionChangeTime("setRange"),r.setBaseAndExtent(o.anchorNode,o.anchorOffset,o.focusNode,o.focusOffset)}else this._state=void 0,this._setIgnoreSelectionChangeTime("setValue"),this._domNode.domNode.textContent=""}updateScrollTop(e){if(!this._state)return;const t=this._context.viewModel.viewLayout,i=this._state.startPositionWithinEditor.lineNumber,n=t.getVerticalOffsetForLineNumber(i),r=t.getVerticalOffsetForLineNumber(e.positionLineNumber);this._domNode.domNode.scrollTop=r-n}onFocusChange(e){e?this._selectionChangeListener.value=this._setSelectionChangeListener():this._selectionChangeListener.value=void 0}onConfigurationChanged(e){this._accessibilityPageSize=e.get(3)}onWillCut(){this._setIgnoreSelectionChangeTime("onCut")}onWillPaste(){this._setIgnoreSelectionChangeTime("onWillPaste")}_setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}_setSelectionChangeListener(){let e=0;return ue(this._domNode.domNode.ownerDocument,"selectionchange",()=>{const t=this._accessibilityService.isScreenReaderOptimized();if(!this._state||!t||!Ld.enabled||!(wi().document.activeElement===this._domNode.domNode))return;const r=wi().document.getSelection();if(!r||r.rangeCount===0)return;const a=r.getRangeAt(0),l=Date.now(),c=l-e;if(e=l,c<5)return;const h=l-this._ignoreSelectionChangeTime;this._ignoreSelectionChangeTime=0,!(h<100)&&this._viewController.setSelection(this._getEditorSelectionFromDomRange(this._context,this._state,r.direction,a))})}_getScreenReaderContentState(e){const t=this._strategy.fromEditorSelection(this._context.viewModel,e,this._accessibilityPageSize,this._accessibilityService.getAccessibilitySupport()===0),i=this._context.viewModel.model.getPositionAt(1/0);let n=t.value;return i.column===1&&e.getEndPosition().equals(i)&&(n+=`
`),t.value=n,t}_getScreenReaderRange(e,t){const i=this._domNode.domNode.firstChild;if(!i)return;const n=new globalThis.Range;return n.setStart(i,e),n.setEnd(i,t),{anchorNode:i,anchorOffset:e,focusNode:i,focusOffset:t}}_getEditorSelectionFromDomRange(e,t,i,n){const r=e.viewModel,o=r.model,l=r.coordinatesConverter.convertViewPositionToModelPosition(t.startPositionWithinEditor),c=o.getOffsetAt(l);let h=n.startOffset+c,d=n.endOffset+c;if(o.getEndOfLineSequence()===1){const E=t.value,x=new vR(E),T=x.getPosition(n.startOffset),N=x.getPosition(n.endOffset);h+=T.lineNumber-1,d+=N.lineNumber-1}const _=o.getPositionAt(h),b=o.getPositionAt(d),C=i==="forward"?_:b,S=i==="forward"?b:_;return Yt.fromPositions(C,S)}};B7=Ffe([Vfe(3,Ol)],B7);var Hfe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},XW=function(s,e){return function(t,i){e(t,i,s)}};let F7=class extends pe{constructor(e,t,i,n,r){super(),this._domNode=e,this._context=t,this._viewController=i,this._keybindingService=n,this._accessibilityService=r,this._contentLeft=1,this._contentWidth=1,this._contentHeight=1,this._divWidth=1,this._primarySelection=new Yt(1,1,1,1),this._primaryCursorVisibleRange=null,this._state=this._register(new qs),this._instantiateScreenReaderContent(),this._updateConfigurationSettings(),this._updateDomAttributes()}onWillPaste(){this._state.value?.onWillPaste()}onWillCut(){this._state.value?.onWillCut()}handleFocusChange(e){this._state.value?.onFocusChange(e),this.writeScreenReaderContent()}onConfigurationChanged(e){this._instantiateScreenReaderContent(),this._updateConfigurationSettings(),this._updateDomAttributes(),e.hasChanged(2)&&this.writeScreenReaderContent()}_instantiateScreenReaderContent(){const e=this._context.configuration.options.get(107);this._renderRichContent!==e&&(this._renderRichContent=e,this._state.value=this._createScreenReaderContent(e))}_createScreenReaderContent(e){return e?new O7(this._domNode,this._context,this._viewController,this._accessibilityService):new B7(this._domNode,this._context,this._viewController,this._accessibilityService)}_updateConfigurationSettings(){const e=this._context.configuration.options,t=e.get(165),i=t.wrappingColumn;this._contentLeft=t.contentLeft,this._contentWidth=t.contentWidth,this._contentHeight=t.height,this._fontInfo=e.get(59),this._divWidth=Math.round(i*this._fontInfo.typicalHalfwidthCharacterWidth),this._state.value?.onConfigurationChanged(e)}_updateDomAttributes(){const e=this._context.configuration.options;this._domNode.domNode.setAttribute("role","textbox"),this._domNode.domNode.setAttribute("aria-required",e.get(9)?"true":"false"),this._domNode.domNode.setAttribute("aria-multiline","true"),this._domNode.domNode.setAttribute("aria-autocomplete",e.get(104)?"none":"both"),this._domNode.domNode.setAttribute("aria-roledescription",y(55,"editor")),this._domNode.domNode.setAttribute("aria-label",A7(e,this._keybindingService));const t=this._context.viewModel.model.getOptions().tabSize,i=e.get(59).spaceWidth;this._domNode.domNode.style.tabSize=`${t*i}px`;const n=e.get(154),r=n==="inherit"?e.get(153):n,o=r==="inherit"?e.get(149):r;this._domNode.domNode.style.textWrap=o==="off"?"nowrap":"wrap"}onCursorStateChanged(e){this._primarySelection=e.selections[0]??new Yt(1,1,1,1)}prepareRender(e){this.writeScreenReaderContent(),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primarySelection.getPosition())}render(e){if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const t=this._context.viewLayout.getCurrentScrollLeft(),i=this._contentLeft+this._primaryCursorVisibleRange.left-t;if(i<this._contentLeft||i>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const n=this._context.viewLayout.getCurrentScrollTop(),r=this._primarySelection.positionLineNumber,o=this._context.viewLayout.getVerticalOffsetForLineNumber(r)-n;if(o<0||o>this._contentHeight){this._renderAtTopLeft();return}const a=this._context.viewLayout.getLineHeightForLineNumber(r);this._doRender(o,this._contentLeft,this._divWidth,a),this._state.value?.updateScrollTop(this._primarySelection)}_renderAtTopLeft(){this._doRender(0,0,this._contentWidth,1)}_doRender(e,t,i,n){Sr(this._domNode,this._fontInfo),this._domNode.setTop(e),this._domNode.setLeft(t),this._domNode.setWidth(i),this._domNode.setHeight(n),this._domNode.setLineHeight(n)}setAriaOptions(e){e.activeDescendant?(this._domNode.setAttribute("aria-haspopup","true"),this._domNode.setAttribute("aria-autocomplete","list"),this._domNode.setAttribute("aria-activedescendant",e.activeDescendant)):(this._domNode.setAttribute("aria-haspopup","false"),this._domNode.setAttribute("aria-autocomplete","both"),this._domNode.removeAttribute("aria-activedescendant")),e.role&&this._domNode.setAttribute("role",e.role)}writeScreenReaderContent(){this._state.value?.updateScreenReaderContent(this._primarySelection)}};F7=Hfe([XW(3,ar),XW(4,Ol)],F7);var V7;(function(s){function e(t,i){return new t.EditContext(i)}s.create=e})(V7||(V7={}));class Wfe{constructor(){this._nativeEditContextMapping=new Map}register(e,t){return this._nativeEditContextMapping.set(e,t),{dispose:()=>{this._nativeEditContextMapping.delete(e)}}}get(e){return this._nativeEditContextMapping.get(e)}}const zfe=new Wfe;var Ufe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},QW=function(s,e){return function(t,i){e(t,i,s)}},bL;(function(s){s.NONE="edit-context-composition-none",s.SECONDARY="edit-context-composition-secondary",s.PRIMARY="edit-context-composition-primary"})(bL||(bL={}));let ZN=class extends kY{constructor(e,t,i,n,r,o,a){super(t),this._viewController=n,this._visibleRangeProvider=r,this.logService=a,this._previousEditContextSelection=new it(0,0),this._editContextPrimarySelection=new Yt(1,1,1,1),this._decorations=[],this._primarySelection=new Yt(1,1,1,1),this._targetWindowId=-1,this._scrollTop=0,this._scrollLeft=0,this.domNode=new gN(document.createElement("div")),this.domNode.setClassName("native-edit-context"),this._imeTextArea=new gN(document.createElement("textarea")),this._imeTextArea.setClassName("ime-text-area"),this._imeTextArea.setAttribute("readonly","true"),this._imeTextArea.setAttribute("tabindex","-1"),this._imeTextArea.setAttribute("aria-hidden","true"),this.domNode.setAttribute("autocorrect","off"),this.domNode.setAttribute("autocapitalize","off"),this.domNode.setAttribute("autocomplete","off"),this.domNode.setAttribute("spellcheck","false"),this._updateDomAttributes(),i.appendChild(this.domNode),i.appendChild(this._imeTextArea),this._parent=i.domNode,this._focusTracker=this._register(new M7(a,this.domNode.domNode,d=>{a.trace("NativeEditContext#handleFocusChange : ",d),this._screenReaderSupport.handleFocusChange(d),this._context.viewModel.setHasFocus(d)}));const l=nt(this.domNode.domNode);this._editContext=V7.create(l),this.setEditContextOnDomNode(),this._screenReaderSupport=this._register(o.createInstance(F7,this.domNode,t,this._viewController)),this._register(ue(this.domNode.domNode,"copy",d=>{this.logService.trace("NativeEditContext#copy"),this._ensureClipboardGetsEditorSelection(d)})),this._register(ue(this.domNode.domNode,"cut",d=>{this.logService.trace("NativeEditContext#cut"),this._screenReaderSupport.onWillCut(),this._ensureClipboardGetsEditorSelection(d),this.logService.trace("NativeEditContext#cut (before viewController.cut)"),this._viewController.cut()})),this._register(ue(this.domNode.domNode,"keyup",d=>this._onKeyUp(d))),this._register(ue(this.domNode.domNode,"keydown",async d=>this._onKeyDown(d))),this._register(ue(this._imeTextArea.domNode,"keyup",d=>this._onKeyUp(d))),this._register(ue(this._imeTextArea.domNode,"keydown",async d=>this._onKeyDown(d))),this._register(ue(this.domNode.domNode,"beforeinput",async d=>{(d.inputType==="insertParagraph"||d.inputType==="insertLineBreak")&&this._onType(this._viewController,{text:`
`,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0})})),this._register(ue(this.domNode.domNode,"paste",d=>{if(this.logService.trace("NativeEditContext#paste"),d.preventDefault(),!d.clipboardData)return;let[g,_]=PN.getTextData(d.clipboardData);if(this.logService.trace("NativeEditContext#paste with id : ",_?.id," with text.length: ",g.length),!g)return;_=_||V1.INSTANCE.get(g);let b=!1,C=null,S=null;_&&(b=this._context.configuration.options.get(45)&&!!_.isFromEmptySelection,C=typeof _.multicursorText<"u"?_.multicursorText:null,S=_.mode),this.logService.trace("NativeEditContext#paste (before viewController.paste)"),this._viewController.paste(g,b,C,S)})),this._register(CS(this._editContext,"textformatupdate",d=>this._handleTextFormatUpdate(d))),this._register(CS(this._editContext,"characterboundsupdate",d=>this._updateCharacterBounds(d)));let c;this._register(CS(this._editContext,"textupdate",d=>{const g=d.text;if(g.length===1){const _=g.charCodeAt(0);if(xs(_)){c=g;return}if(c0(_)&&c){const b={text:c+g,selectionEnd:d.selectionEnd,selectionStart:d.selectionStart,updateRangeStart:d.updateRangeStart-1,updateRangeEnd:d.updateRangeEnd-1};c=void 0,this._emitTypeEvent(this._viewController,b);return}}this._emitTypeEvent(this._viewController,d)})),this._register(CS(this._editContext,"compositionstart",d=>{this._updateEditContext(),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(CS(this._editContext,"compositionend",d=>{this._updateEditContext(),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()}));let h=!1;this._register(Ld.onDidChange(()=>{Ld.enabled&&h&&(this._focusTracker.resume(),this.domNode.focus(),h=!1),!Ld.enabled&&this.isFocused()&&(this._focusTracker.pause(),this._imeTextArea.focus(),h=!0)})),this._register(zfe.register(e,this))}dispose(){this.domNode.domNode.editContext=void 0,this.domNode.domNode.blur(),this.domNode.domNode.remove(),this._imeTextArea.domNode.remove(),super.dispose()}setAriaOptions(e){this._screenReaderSupport.setAriaOptions(e)}getLastRenderData(){return this._primarySelection.getPosition()}prepareRender(e){this._screenReaderSupport.prepareRender(e),this._updateSelectionAndControlBounds(e)}render(e){this._screenReaderSupport.render(e)}onCursorStateChanged(e){return this._primarySelection=e.modelSelections[0]??new Yt(1,1,1,1),this._screenReaderSupport.onCursorStateChanged(e),this._updateEditContext(),!0}onConfigurationChanged(e){return this._screenReaderSupport.onConfigurationChanged(e),this._updateDomAttributes(),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return this._updateEditContextOnLineChange(e.fromLineNumber,e.fromLineNumber+e.count-1),!0}onLinesDeleted(e){return this._updateEditContextOnLineChange(e.fromLineNumber,e.toLineNumber),!0}onLinesInserted(e){return this._updateEditContextOnLineChange(e.fromLineNumber,e.toLineNumber),!0}_updateEditContextOnLineChange(e,t){this._editContextPrimarySelection.endLineNumber<e||this._editContextPrimarySelection.startLineNumber>t||this._updateEditContext()}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}onWillPaste(){this.logService.trace("NativeEditContext#onWillPaste"),this._onWillPaste()}_onWillPaste(){this._screenReaderSupport.onWillPaste()}onWillCopy(){this.logService.trace("NativeEditContext#onWillCopy"),this.logService.trace("NativeEditContext#isFocused : ",this.domNode.domNode===Us())}writeScreenReaderContent(){this._screenReaderSupport.writeScreenReaderContent()}isFocused(){return this._focusTracker.isFocused}focus(){this._focusTracker.focus(),this.refreshFocusState()}refreshFocusState(){this._focusTracker.refreshFocusState()}setEditContextOnDomNode(){const e=nt(this.domNode.domNode),t=yx(e);this._targetWindowId!==t&&(this.domNode.domNode.editContext=this._editContext,this._targetWindowId=t)}_onKeyUp(e){this._viewController.emitKeyUp(new Mi(e))}_onKeyDown(e){const t=new Mi(e);t.keyCode===114&&t.stopPropagation(),this._viewController.emitKeyDown(t)}_updateDomAttributes(){const e=this._context.configuration.options;this.domNode.domNode.setAttribute("tabindex",String(e.get(140)))}_updateEditContext(){const e=this._getNewEditContextState();e&&(this._editContext.updateText(0,Number.MAX_SAFE_INTEGER,e.text??" "),this._editContext.updateSelection(e.selectionStartOffset,e.selectionEndOffset),this._editContextPrimarySelection=e.editContextPrimarySelection,this._previousEditContextSelection=new it(e.selectionStartOffset,e.selectionEndOffset))}_emitTypeEvent(e,t){if(!this._editContext)return;const i=this._previousEditContextSelection.endExclusive,n=this._previousEditContextSelection.start;this._previousEditContextSelection=new it(t.selectionStart,t.selectionEnd);let r=0,o=0;t.updateRangeEnd>i&&(r=t.updateRangeEnd-i),t.updateRangeStart<n&&(o=n-t.updateRangeStart);let a="";n<t.updateRangeStart&&(a+=this._editContext.text.substring(n,t.updateRangeStart)),a+=t.text,i>t.updateRangeEnd&&(a+=this._editContext.text.substring(t.updateRangeEnd,i));let l=0;t.selectionStart===t.selectionEnd&&n===i&&(l=t.selectionStart-(t.updateRangeStart+t.text.length));const c={text:a,replacePrevCharCnt:o,replaceNextCharCnt:r,positionDelta:l};this._onType(e,c)}_onType(e,t){t.replacePrevCharCnt||t.replaceNextCharCnt||t.positionDelta?e.compositionType(t.text,t.replacePrevCharCnt,t.replaceNextCharCnt,t.positionDelta):e.type(t.text)}_getNewEditContextState(){const e=this._primarySelection,t=this._context.viewModel.model;if(!t.isValidRange(e))return;const i=e.startLineNumber,n=e.endLineNumber,r=t.getLineMaxColumn(n),o=new ie(i,1,n,r),a=t.getValueInRange(o,0),l=e.startColumn-1,c=a.length+e.endColumn-r;return{text:a,selectionStartOffset:l,selectionEndOffset:c,editContextPrimarySelection:e}}_editContextStartPosition(){return new se(this._editContextPrimarySelection.startLineNumber,1)}_handleTextFormatUpdate(e){if(!this._editContext)return;const t=e.getTextFormats(),i=this._editContextStartPosition(),n=[];t.forEach(r=>{const o=this._context.viewModel.model,a=o.getOffsetAt(i),l=o.getPositionAt(a+r.rangeStart),c=o.getPositionAt(a+r.rangeEnd),h=ie.fromPositions(l,c),d=r.underlineThickness.toLowerCase();let g=bL.NONE;switch(d){case"thin":g=bL.SECONDARY;break;case"thick":g=bL.PRIMARY;break}n.push({range:h,options:{description:"textFormatDecoration",inlineClassName:g}})}),this._decorations=this._context.viewModel.model.deltaDecorations(this._decorations,n)}_updateSelectionAndControlBounds(e){if(!this._parent)return;const i=this._context.configuration.options.get(165).contentLeft,n=this._parent.getBoundingClientRect(),r=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(this._primarySelection),o=this._context.viewLayout.getVerticalOffsetForLineNumber(r.startLineNumber),a=n.top+o-this._scrollTop,c=this._context.viewLayout.getVerticalOffsetAfterLineNumber(r.endLineNumber)-o;let h=n.left+i-this._scrollLeft,d;if(this._primarySelection.isEmpty()){const _=e.visibleRangeForPosition(r.getStartPosition());_&&(h+=_.left),d=0}else d=n.width-i;const g=new DOMRect(h,a,d,c);this._editContext.updateSelectionBounds(g),this._editContext.updateControlBounds(g)}_updateCharacterBounds(e){if(!this._parent)return;const t=this._context.configuration.options,i=t.get(59).typicalHalfwidthCharacterWidth,n=t.get(165).contentLeft,r=this._parent.getBoundingClientRect(),o=[],a=new vR(this._editContext.text);for(let l=e.rangeStart;l<e.rangeEnd;l++){const c=a.getPosition(l),h=this._editContextPrimarySelection.startLineNumber-1,d=new se(h+c.lineNumber,c.column),g=d.delta(0,1),_=ie.fromPositions(d,g),b=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(_),C=this._visibleRangeProvider.linesVisibleRangesForRange(b,!0)??[],S=b.startLineNumber,E=this._context.viewLayout.getVerticalOffsetForLineNumber(S),x=r.top+E-this._scrollTop;let T=0,N=i;if(C.length>0)for(const P of C[0].ranges){T=P.left,N=P.width;break}const A=this._context.viewLayout.getLineHeightForLineNumber(S);o.push(new DOMRect(r.left+n+T-this._scrollLeft,x,N,A))}this._editContext.updateCharacterBounds(e.rangeStart,o)}_ensureClipboardGetsEditorSelection(e){const t=this._context.configuration.options,i=t.get(45),n=t.get(31),r=this._context.viewModel.getCursorStates().map(c=>c.modelState.selection),o=KK(this._context.viewModel,r,i,n);let a;this.logService.getLevel()===Hs.Trace&&(a=JP());const l={version:1,id:a,isFromEmptySelection:o.isFromEmptySelection,multicursorText:o.multicursorText,mode:o.mode};V1.INSTANCE.set(Va?o.text.replace(/\r\n/g,`
`):o.text,l),e.preventDefault(),e.clipboardData&&PN.setTextData(e.clipboardData,o.text,o.html,l),this.logService.trace("NativeEditContext#_ensureClipboardGetsEditorSelectios with id : ",a," with text.length: ",o.text.length)}};ZN=Ufe([QW(5,Zt),QW(6,Lo)],ZN);class qfe extends ko{constructor(e,t){super(e),this._viewGpuContext=t,this._gpuShapes=[],this._register(qt(i=>this._updateEntries(i)))}onConfigurationChanged(e){return this._updateEntries(void 0),!0}prepareRender(e){}render(e){}_updateEntries(e){const t=this._context.configuration.options,i=t.get(116),n=t.get(59).typicalHalfwidthCharacterWidth,r=this._viewGpuContext.devicePixelRatio.read(e);for(let o=0,a=i.length;o<a;o++){const l=i[o],c=this._gpuShapes[o],h=l.color?xe.fromHex(l.color):this._context.theme.getColor(Phe)??xe.white,d=[l.column*n*r,0,Math.max(1,Math.ceil(r)),Number.MAX_SAFE_INTEGER,h.rgba.r/255,h.rgba.g/255,h.rgba.b/255,h.rgba.a];c?c.setRaw(d):this._gpuShapes[o]=this._viewGpuContext.rectangleRenderer.register(...d)}for(;this._gpuShapes.length>i.length;)this._gpuShapes.splice(-1,1)[0].dispose()}}const wA=class wA extends vp{constructor(e,t){super(),this._viewGpuContext=t,this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onCursorStateChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return!0}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=e.viewportData,r=new UN(this._context.configuration,this._context.theme.type),o=[];for(let a=t;a<=i;a++){const l=a-t,c=this._viewGpuContext.canRenderDetailed(r,n,a);o[l]=c.length?`<div class="${wA.CLASS_NAME}" title="Cannot render on GPU: ${c.join(", ")}"></div>`:""}this._renderResult=o}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};wA.CLASS_NAME="gpu-mark";let H7=wA;var $fe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},jfe=function(s,e){return function(t,i){e(t,i,s)}};let W7=class extends V0{constructor(e,t,i,n,r,o,a,l,c){super(),this._instantiationService=c,this._shouldRecomputeGlyphMarginLanes=!1,this._ownerID=t,this._widgetFocusTracker=this._register(new Gfe(e,l)),this._register(this._widgetFocusTracker.onChange(()=>{this._context.viewModel.setHasWidgetFocus(this._widgetFocusTracker.hasFocus())})),this._selections=[new Yt(1,1,1,1)],this._renderAnimationFrame=null,this._overflowGuardContainer=ei(document.createElement("div")),lh.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._viewController=new uhe(n,o,a,i),this._context=new jde(n,r,o),this._context.addEventHandler(this),this._viewParts=[],this._editContextEnabled=this._context.configuration.options.get(170),this._accessibilitySupport=this._context.configuration.options.get(2),this._editContext=this._instantiateEditContext(),this._viewParts.push(this._editContext),this._linesContent=ei(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ei(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._context.configuration.options.get(46)==="on"&&(this._viewGpuContext=this._instantiationService.createInstance(hc,this._context)),this._scrollbar=new ode(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new k7(this._context,this._viewGpuContext,this._linesContent),this._viewGpuContext&&(this._viewLinesGpu=this._instantiationService.createInstance(I7,this._context,this._viewGpuContext)),this._viewZones=new Wde(this._context),this._viewParts.push(this._viewZones);const h=new Ade(this._context);this._viewParts.push(h);const d=new Pde(this._context);this._viewParts.push(d);const g=new dhe(this._context);this._viewParts.push(g),g.addDynamicOverlay(new nde(this._context)),g.addDynamicOverlay(new E7(this._context)),g.addDynamicOverlay(new mde(this._context)),g.addDynamicOverlay(new rde(this._context)),g.addDynamicOverlay(new Ude(this._context));const _=new fhe(this._context);this._viewParts.push(_),_.addDynamicOverlay(new sde(this._context)),_.addDynamicOverlay(new wde(this._context)),_.addDynamicOverlay(new vde(this._context)),_.addDynamicOverlay(new zN(this._context)),this._viewGpuContext&&_.addDynamicOverlay(new H7(this._context,this._viewGpuContext)),this._glyphMarginWidgets=new cde(this._context),this._viewParts.push(this._glyphMarginWidgets);const b=new qN(this._context);b.getDomNode().appendChild(this._viewZones.marginDomNode),b.getDomNode().appendChild(_.getDomNode()),b.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(b),this._contentWidgets=new mhe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new T7(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Nde(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const C=this._viewGpuContext?new qfe(this._context,this._viewGpuContext):new Ode(this._context);this._viewParts.push(C);const S=new ghe(this._context);this._viewParts.push(S);const E=new Dde(this._context);if(this._viewParts.push(E),h){const x=this._scrollbar.getOverviewRulerLayoutInfo();x.parent.insertBefore(h.getDomNode(),x.insertBefore)}this._linesContent.appendChild(g.getDomNode()),"domNode"in C&&this._linesContent.appendChild(C.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(b.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._viewGpuContext&&this._overflowGuardContainer.appendChild(this._viewGpuContext.canvas),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(E.getDomNode()),this._overflowGuardContainer.appendChild(S.domNode),this.domNode.appendChild(this._overflowGuardContainer),l?(l.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),l.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new Aue(this._context,this._viewController,this._createPointerHandlerHelper()))}_instantiateEditContext(){return this._context.configuration.options.get(170)?this._instantiationService.createInstance(ZN,this._ownerID,this._context,this._overflowGuardContainer,this._viewController,this._createTextAreaHandlerHelper()):this._instantiationService.createInstance(R7,this._context,this._overflowGuardContainer,this._viewController,this._createTextAreaHandlerHelper())}_updateEditContext(){const e=this._context.configuration.options.get(170),t=this._context.configuration.options.get(2);if(this._editContextEnabled===e&&this._accessibilitySupport===t)return;this._editContextEnabled=e,this._accessibilitySupport=t;const i=this._editContext.isFocused(),n=this._viewParts.indexOf(this._editContext);this._editContext.dispose(),this._editContext=this._instantiateEditContext(),i&&this._editContext.focus(),n!==-1&&this._viewParts.splice(n,1,this._editContext)}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],n=0;i=i.concat(e.getAllMarginDecorations().map(r=>{const o=r.options.glyphMargin?.position??lp.Center;return n=Math.max(n,r.range.endLineNumber),{range:r.range,lane:o,persist:r.options.glyphMargin?.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(r=>{const o=e.validateRange(r.preference.range);return n=Math.max(n,o.endLineNumber),{range:o,lane:r.preference.lane}})),i.sort((r,o)=>ie.compareRangesUsingStarts(r.range,o.range)),t.reset(n);for(const r of i)t.push(r.lane,r.range,r.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,viewLinesGpu:this._viewLinesGpu,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._editContext.domNode.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._editContext.getLastRenderData();return new nue(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>{this._flushAccumulatedAndRenderNow();const i=new se(e,t);return this._viewLines.visibleRangeForPosition(i)??this._viewLinesGpu?.visibleRangeForPosition(i)??null},getLineWidth:e=>{if(this._flushAccumulatedAndRenderNow(),this._viewLinesGpu){const t=this._viewLinesGpu.getLineWidth(e);if(t!==void 0)return t}return this._viewLines.getLineWidth(e)}}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e)),linesVisibleRangesForRange:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.linesVisibleRangesForRange(e,t))}}_applyLayout(){const t=this._context.configuration.options.get(165);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._editContext.isFocused()?" focused":"";return this._context.configuration.options.get(162)+" "+L7(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._updateEditContext(),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewGpuContext?.dispose(),this._viewLines.dispose(),this._viewLinesGpu?.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new at;if(this._renderAnimationFrame===null){this._editContext instanceof ZN&&this._editContext.setEditContextOnDomNode();const e=this._createCoordinatedRendering();this._renderAnimationFrame=z7.INSTANCE.scheduleCoordinatedRendering({window:nt(this.domNode?.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new at;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new at;return e.renderText()},prepareRender:(t,i)=>{if(this._store.isDisposed)throw new at;return e.prepareRender(t,i)},render:(t,i)=>{if(this._store.isDisposed)throw new at;return e.render(t,i)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();zm(()=>e.prepareRenderText());const t=zm(()=>e.renderText());if(t){const[i,n]=t;zm(()=>e.prepareRender(i,n)),zm(()=>e.render(i,n))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Vm.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new qde(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),this._viewLinesGpu?.shouldRender()&&(this._viewLinesGpu.renderText(i),this._viewLinesGpu.onDidRender()),[e,new Qce(this._context.viewLayout,i,this._viewLines,this._viewLinesGpu)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),n=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new se(n.lineNumber,n.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?NR.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new Mde(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._editContext.writeScreenReaderContent(e)}focus(){this._editContext.focus()}isFocused(){return this._editContext.isFocused()}isWidgetFocused(){return this._widgetFocusTracker.hasFocus()}setAriaOptions(e){this._editContext.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){this._contentWidgets.setWidgetPosition(e.widget,e.position?.position??null,e.position?.secondaryPosition??null,e.position?.preference??null,e.position?.positionAffinity??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};W7=$fe([jfe(8,Zt)],W7);function zm(s){try{return s()}catch(e){return mi(e),null}}const CA=class CA{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,n]of this._animationFrameRunners)n.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,wG(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)zm(()=>i.prepareRenderText());const t=[];for(let i=0,n=e.length;i<n;i++){const r=e[i];t[i]=zm(()=>r.renderText())}for(let i=0,n=e.length;i<n;i++){const r=e[i],o=t[i];if(!o)continue;const[a,l]=o;zm(()=>r.prepareRender(a,l))}for(let i=0,n=e.length;i<n;i++){const r=e[i],o=t[i];if(!o)continue;const[a,l]=o;zm(()=>r.render(a,l))}}};CA.INSTANCE=new CA;let z7=CA;class Gfe extends pe{constructor(e,t){super(),this._onChange=this._register(new ne),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(iC(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(iC(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class vL{constructor(e,t,i,n,r){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=n,this.wrappedTextIndentLength=r}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let n=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&n>this.injectionOffsets[r];r++)n<this.injectionOffsets[r]+this.injectionOptions[r].content.length?n=this.injectionOffsets[r]:n-=this.injectionOptions[r].content.length;return n}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let n=0;n<this.injectionOffsets.length&&!(e<this.injectionOffsets[n]||t!==1&&e===this.injectionOffsets[n]);n++)i+=this.injectionOptions[n].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,n=this.breakOffsets.length-1,r=0,o=0;for(;i<=n;){r=i+(n-i)/2|0;const l=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)n=r-1;else if(e>l)i=r+1;else break;else if(e<o)n=r-1;else if(e>=l)i=r+1;else break}let a=e-o;return r>0&&(a+=this.wrappedTextIndentLength),new kT(r,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const n=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.normalizeOffsetInInputWithInjectionsAroundInjections(n,i);if(r!==n)return this.offsetInInputWithInjectionsToOutputPosition(r,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new kT(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const n=this.getOutputLineCount()-1;if(e<n&&t===this.getMaxOutputOffset(e))return new kT(e+1,this.getMinOutputOffset(e+1))}return new kT(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&JW(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let n=i.offsetInInputWithInjections;if(ez(this.injectionOptions[i.injectedTextIndex].cursorStops))return n;let r=i.injectedTextIndex-1;for(;r>=0&&this.injectionOffsets[r]===this.injectionOffsets[i.injectedTextIndex]&&!(JW(this.injectionOptions[r].cursorStops)||(n-=this.injectionOptions[r].content.length,ez(this.injectionOptions[r].cursorStops)));)r--;return n}}else if(t===1||t===4){let n=i.offsetInInputWithInjections+i.length,r=i.injectedTextIndex;for(;r+1<this.injectionOffsets.length&&this.injectionOffsets[r+1]===this.injectionOffsets[r];)n+=this.injectionOptions[r+1].content.length,r++;return n}else if(t===0||t===3){let n=i.offsetInInputWithInjections,r=i.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)n-=this.injectionOptions[r-1].content.length,r--;return n}z6()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),n=this.getInjectedTextAtOffset(i);return n?{options:this.injectionOptions[n.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let n=0;for(let r=0;r<t.length;r++){const o=i[r].content.length,a=t[r]+n,l=t[r]+n+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInInputWithInjections:a,length:o};n+=o}}}}function JW(s){return s==null?!0:s===oC.Right||s===oC.Both}function ez(s){return s==null?!0:s===oC.Left||s===oC.Both}class kT{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new se(e+this.outputLineIndex,this.outputOffset+1)}}class Kfe{constructor(){this.changeType=1}}class ch{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",n=0;for(const r of t)i+=e.substring(n,r.column-1),n=r.column-1,i+=r.options.content;return i+=e.substring(n),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new ch(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new ch(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,n)=>i.lineNumber===n.lineNumber?i.column===n.column?i.order-n.order:i.column-n.column:i.lineNumber-n.lineNumber),t}constructor(e,t,i,n,r){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=n,this.order=r}}class tz{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class Yfe{constructor(e,t,i,n){this.ownerId=e,this.decorationId=t,this.lineNumber=i,this.lineHeight=n}}class Zfe{constructor(e,t){this.ownerId=e,this.lineNumber=t}}class Xfe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class Qfe{constructor(e,t,i,n){this.changeType=4,this.injectedTexts=n,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class Jfe{constructor(){this.changeType=5}}class Mw{constructor(e,t,i,n){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=n,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new Mw(i,n,r,o)}}class TY{constructor(e){this.changes=e}}let DY=class{constructor(e){this.changes=e}},NY=class{constructor(e){this.changes=e}};class z1{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Mw.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=z1._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new z1(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),n=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:n,isEolChange:c,versionId:r,isUndoing:o,isRedoing:a,isFlush:l,detailedReasons:e.detailedReasons.concat(t.detailedReasons),detailedReasonsChangeLengths:e.detailedReasonsChangeLengths.concat(t.detailedReasonsChangeLengths)}}}const ege=bp("domLineBreaksComputer",{createHTML:s=>s});class cB{static create(e){return new cB(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,n,r,o){const a=[],l=[];return{addRequest:(c,h,d)=>{a.push(c),l.push(h)},finalize:()=>tge(Tj(this.targetWindow.deref()),a,e,t,i,n,r,l)}}}function tge(s,e,t,i,n,r,o,a){function l(U){const Y=a[U];if(Y){const B=ch.applyInjectedText(e[U],Y),F=Y.map(ee=>ee.options),W=Y.map(ee=>ee.column-1);return new vL(W,F,[B.length],[],0)}else return null}if(n===-1){const U=[];for(let Y=0,B=e.length;Y<B;Y++)U[Y]=l(Y);return U}const c=Math.round(n*t.typicalHalfwidthCharacterWidth),d=Math.round(i*(r===3?2:r===2?1:0)),g=Math.ceil(t.spaceWidth*d),_=document.createElement("div");Sr(_,t);const b=new TC(1e4),C=[],S=[],E=[],x=[],T=[];for(let U=0;U<e.length;U++){const Y=ch.applyInjectedText(e[U],a[U]);let B=0,F=0,W=c;if(r!==0)if(B=Pa(Y),B===-1)B=0;else{for(let te=0;te<B;te++){const ce=Y.charCodeAt(te)===9?i-F%i:1;F+=ce}const $=Math.ceil(t.spaceWidth*F);$+t.typicalFullwidthCharacterWidth>c?(B=0,F=0):W=c-$}const ee=Y.substr(B),X=ige(ee,F,i,W,b,g);C[U]=B,S[U]=F,E[U]=ee,x[U]=X[0],T[U]=X[1]}const N=b.build(),A=ege?.createHTML(N)??N;_.innerHTML=A,_.style.position="absolute",_.style.top="10000",o==="keepAll"?(_.style.wordBreak="keep-all",_.style.overflowWrap="anywhere"):(_.style.wordBreak="inherit",_.style.overflowWrap="break-word"),s.document.body.appendChild(_);const P=document.createRange(),O=Array.prototype.slice.call(_.children,0),V=[];for(let U=0;U<e.length;U++){const Y=O[U],B=nge(P,Y,E[U],x[U]);if(B===null){V[U]=l(U);continue}const F=C[U],W=S[U]+d,ee=T[U],X=[];for(let he=0,j=B.length;he<j;he++)X[he]=ee[B[he]];if(F!==0)for(let he=0,j=B.length;he<j;he++)B[he]+=F;let $,te;const ce=a[U];ce?($=ce.map(he=>he.options),te=ce.map(he=>he.column-1)):($=null,te=null),V[U]=new vL(te,$,B,X,W)}return _.remove(),V}function ige(s,e,t,i,n,r){if(r!==0){const g=String(r);n.appendString('<div style="text-indent: -'),n.appendString(g),n.appendString("px; padding-left: "),n.appendString(g),n.appendString("px; box-sizing: border-box; width:")}else n.appendString('<div style="width:');n.appendString(String(i)),n.appendString('px;">');const o=s.length;let a=e,l=0;const c=[],h=[];let d=0<o?s.charCodeAt(0):0;n.appendString("<span>");for(let g=0;g<o;g++){g!==0&&g%16384===0&&n.appendString("</span><span>"),c[g]=l,h[g]=a;const _=d;d=g+1<o?s.charCodeAt(g+1):0;let b=1,C=1;switch(_){case 9:b=t-a%t,C=b;for(let S=1;S<=b;S++)S<b?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 32:d===32?n.appendCharCode(160):n.appendASCIICharCode(32);break;case 60:n.appendString("&lt;");break;case 62:n.appendString("&gt;");break;case 38:n.appendString("&amp;");break;case 0:n.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:n.appendCharCode(65533);break;default:op(_)&&C++,_<32?n.appendCharCode(9216+_):n.appendCharCode(_)}l+=b,a+=C}return n.appendString("</span>"),c[s.length]=l,h[s.length]=a,n.appendString("</div>"),[c,h]}function nge(s,e,t,i){if(t.length<=1)return null;const n=Array.prototype.slice.call(e.children,0),r=[];try{U7(s,n,i,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function U7(s,e,t,i,n,r,o,a){if(i===r||(n=n||YM(s,e,t[i],t[i+1]),o=o||YM(s,e,t[r],t[r+1]),Math.abs(n[0].top-o[0].top)<=.1))return;if(i+1===r){a.push(r);return}const l=i+(r-i)/2|0,c=YM(s,e,t[l],t[l+1]);U7(s,e,t,i,n,l,c,a),U7(s,e,t,l,c,r,o,a)}function YM(s,e,t,i){return s.setStart(e[t/16384|0].firstChild,t%16384),s.setEnd(e[i/16384|0].firstChild,i%16384),s.getClientRects()}class sge extends pe{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new Z6),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const n of t){if(this._pending.has(n.id)){mi(new Error(`Cannot have two contributions with the same id ${n.id}`));continue}this._pending.set(n.id,n)}this._instantiateSome(0),this._register(pT(nt(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(pT(nt(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(pT(nt(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){return pT(nt(this._editor?.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){mi(i)}}}}class IY{constructor(e,t,i,n,r,o,a){this.id=e,this.label=t,this.alias=i,this.metadata=n,this._precondition=r,this._run=o,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}function mC(s){let e=0,t=0,i=0,n=0;for(let r=0,o=s.length;r<o;r++){const a=s.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&s.charCodeAt(r+1)===10?(n|=2,r++):n|=3,i=r+1):a===10&&(n|=1,e===0&&(t=r),e++,i=r+1)}return e===0&&(t=s.length),[e,t,s.length-i,n]}class iz{constructor(e,t,i,n){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=n}}class rge{constructor(e,t,i,n,r,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=r,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class oge extends rge{constructor(e,t,i,n,r,o,a){super(e,t,i,n,r,o),this.minVisibleColumnIndentation=a}}function age(s,e,t,i){return s!==t?Hn(t-s,i):Hn(0,i-e)}const ta=0;function XN(s){return s===0}const Tl=2**26;function Hn(s,e){return s*Tl+e}function Cc(s){const e=s,t=Math.floor(e/Tl),i=e-t*Tl;return new Ha(t,i)}function lge(s){return Math.floor(s/Tl)}function us(s,e){let t=s+e;return e>=Tl&&(t=t-s%Tl),t}function cge(s,e){return s.reduce((t,i)=>us(t,e(i)),ta)}function AY(s,e){return s===e}function zx(s,e){const t=s,i=e;if(i-t<=0)return ta;const r=Math.floor(t/Tl),o=Math.floor(i/Tl),a=i-o*Tl;if(r===o){const l=t-r*Tl;return Hn(0,a-l)}else return Hn(o-r,a)}function Ow(s,e){return s<e}function Pw(s,e){return s<=e}function $S(s,e){return s>=e}function tw(s){return Hn(s.lineNumber-1,s.column-1)}function U1(s,e){const t=s,i=Math.floor(t/Tl),n=t-i*Tl,r=e,o=Math.floor(r/Tl),a=r-o*Tl;return new ie(i+1,n+1,o+1,a+1)}function uge(s){const e=LC(s);return Hn(e.length-1,e[e.length-1].length)}class ag{static fromModelContentChanges(e){return e.map(i=>{const n=ie.lift(i.range);return new ag(tw(n.getStartPosition()),tw(n.getEndPosition()),uge(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${Cc(this.startOffset)}...${Cc(this.endOffset)}) -> ${Cc(this.newLength)}`}}class hge{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>uB.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:zx(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Hn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Hn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Cc(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Hn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Hn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(Pw(i,e)){this.nextEditIdx++;const n=Cc(i),r=Cc(this.translateOldToCur(t.endOffsetBeforeObj)),o=n.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=n.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class uB{static from(e){return new uB(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=Cc(t),this.endOffsetAfterObj=Cc(us(e,i)),this.offsetObj=Cc(e)}}const ET=[],oc=class oc{static create(e,t){if(e<=128&&t.length===0){let i=oc.cache[e];return i||(i=new oc(e,t),oc.cache[e]=i),i}return new oc(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let n=i>>5;if(n===0){const o=1<<i|this.items;return o===this.items?this:oc.create(o,this.additionalItems)}n--;const r=this.additionalItems.slice(0);for(;r.length<n;)r.push(0);return r[n]|=1<<(i&31),oc.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===ET&&e.additionalItems===ET)return t===this.items?this:t===e.items?e:oc.create(t,ET);const i=[];for(let n=0;n<Math.max(this.additionalItems.length,e.additionalItems.length);n++){const r=this.additionalItems[n]||0,o=e.additionalItems[n]||0;i.push(r|o)}return oc.create(t,i)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}};oc.cache=new Array(129),oc.empty=oc.create(0,ET);let Ra=oc;const nz={getKey(s){return s}};class dge{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class hB{get length(){return this._length}constructor(e){this._length=e}}class Ux extends hB{static create(e,t,i){let n=e.length;return t&&(n=us(n,t.length)),i&&(n=us(n,i.length)),new Ux(n,e,t,i,t?t.missingOpeningBracketIds:Ra.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,n,r){super(e),this.openingBracket=t,this.child=i,this.closingBracket=n,this.missingOpeningBracketIds=r}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Ux(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(us(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Md extends hB{static create23(e,t,i,n=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=us(r,t.length),o=o.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");r=us(r,i.length),o=o.merge(i.missingOpeningBracketIds)}return n?new fge(r,e.listHeight+1,e,t,i,o):new qx(r,e.listHeight+1,e,t,i,o)}static getEmpty(){return new gge(ta,0,[],Ra.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new at;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let n=1;n<e;n++){const r=this.getChild(n);t=us(t,r.length),i=i.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,n=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(i=Math.min(i,o.computeMinIndentation(n,t)),n=us(n,o.length))}return this.cachedMinIndentation=i,i}}class qx extends Md{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,n,r,o){super(e,t,o),this._item1=i,this._item2=n,this._item3=r}deepClone(){return new qx(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class fge extends qx{toMutable(){return new qx(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class QN extends Md{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,n){super(e,t,n),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new QN(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class gge extends QN{toMutable(){return new QN(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const mge=[];class dB extends hB{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return mge}deepClone(){return this}}class a1 extends dB{get kind(){return 0}get missingOpeningBracketIds(){return Ra.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Cc(e),n=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,r=lge(us(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=n;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const h=wn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,h)}return o}}class JN extends dB{static create(e,t,i){return new JN(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return Ra.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class pge extends dB{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Om{constructor(e,t,i,n,r){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=n,this.astNode=r}}class _ge{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new bge(this.textModel,this.bracketTokens),this._offset=ta,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Hn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=us(this._offset,e);const t=Cc(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=us(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class bge{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Cl.getTokenType(l)===0,h=Cl.containsBalancedBrackets(l),d=r.getEndOffset(this.lineTokenOffset);if(h&&c&&this.lineCharOffset<d){const g=r.getLanguageId(this.lineTokenOffset),_=this.line.substring(this.lineCharOffset,d),b=this.bracketTokens.getSingleLanguageBracketTokens(g),C=b.regExpGlobal;if(C){C.lastIndex=0;const S=C.exec(_);S&&(a=b.getToken(S[0]),a&&(this.lineCharOffset+=S.index))}}if(i+=d-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=d}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const n=age(e,t,this.lineIdx,this.lineCharOffset);return new Om(n,0,-1,Ra.getEmpty(),new a1(n))}}class vge{constructor(e,t){this.text=e,this._offset=ta,this.idx=0;const i=t.getRegExpStr(),n=i?new RegExp(i+`|
`,"gi"):null,r=[];let o,a=0,l=0,c=0,h=0;const d=[];for(let b=0;b<60;b++)d.push(new Om(Hn(0,b),0,-1,Ra.getEmpty(),new a1(Hn(0,b))));const g=[];for(let b=0;b<60;b++)g.push(new Om(Hn(1,b),0,-1,Ra.getEmpty(),new a1(Hn(1,b))));if(n)for(n.lastIndex=0;(o=n.exec(e))!==null;){const b=o.index,C=o[0];if(C===`
`)a++,l=b+1;else{if(c!==b){let S;if(h===a){const E=b-c;if(E<d.length)S=d[E];else{const x=Hn(0,E);S=new Om(x,0,-1,Ra.getEmpty(),new a1(x))}}else{const E=a-h,x=b-l;if(E===1&&x<g.length)S=g[x];else{const T=Hn(E,x);S=new Om(T,0,-1,Ra.getEmpty(),new a1(T))}}r.push(S)}r.push(t.getToken(C)),c=b+C.length,h=a}}const _=e.length;if(c!==_){const b=h===a?Hn(0,_-c):Hn(a-h,_-l);r.push(new Om(b,0,-1,Ra.getEmpty(),new a1(b)))}this.length=Hn(a,_-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Pee}}class fB{static createFromLanguage(e,t){function i(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}const n=new Map;for(const r of e.bracketsNew.openingBrackets){const o=Hn(0,r.bracketText.length),a=i(r),l=Ra.getEmpty().add(a,nz);n.set(r.bracketText,new Om(o,1,a,l,JN.create(o,r,l)))}for(const r of e.bracketsNew.closingBrackets){const o=Hn(0,r.bracketText.length);let a=Ra.getEmpty();const l=r.getOpeningBrackets();for(const c of l)a=a.add(i(c),nz);n.set(r.bracketText,new Om(o,2,i(l[0]),a,JN.create(o,r,a)))}return new fB(n)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>wge(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function wge(s){let e=Ad(s);return/^[\w ]+/.test(s)&&(e=`\\b${e}`),/[\w ]+$/.test(s)&&(e=`${e}\\b`),e}class Cge{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=fB.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function yge(s){if(s.length===0)return null;if(s.length===1)return s[0];let e=0;function t(){if(e>=s.length)return null;const o=e,a=s[o].listHeight;for(e++;e<s.length&&s[e].listHeight===a;)e++;return e-o>=2?RY(o===0&&e===s.length?s:s.slice(o,e),!1):s[o]}let i=t(),n=t();if(!n)return i;for(let o=t();o;o=t())sz(i,n)<=sz(n,o)?(i=ZM(i,n),n=o):n=ZM(n,o);return ZM(i,n)}function RY(s,e=!1){if(s.length===0)return null;if(s.length===1)return s[0];let t=s.length;for(;t>3;){const i=t>>1;for(let n=0;n<i;n++){const r=n<<1;s[n]=Md.create23(s[r],s[r+1],r+3===t?s[r+2]:null,e)}t=i}return Md.create23(s[0],s[1],t>=3?s[2]:null,e)}function sz(s,e){return Math.abs(s.listHeight-e.listHeight)}function ZM(s,e){return s.listHeight===e.listHeight?Md.create23(s,e,null,!1):s.listHeight>e.listHeight?Sge(s,e):Lge(e,s)}function Sge(s,e){s=s.toMutable();let t=s;const i=[];let n;for(;;){if(e.listHeight===t.listHeight){n=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let r=i.length-1;r>=0;r--){const o=i[r];n?o.childrenLength>=3?n=Md.create23(o.unappendChild(),n,null,!1):(o.appendChildOfSameHeight(n),n=void 0):o.handleChildrenChanged()}return n?Md.create23(s,n,null,!1):s}function Lge(s,e){s=s.toMutable();let t=s;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let n=e;for(let r=i.length-1;r>=0;r--){const o=i[r];n?o.childrenLength>=3?n=Md.create23(n,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(n),n=void 0):o.handleChildrenChanged()}return n?Md.create23(n,s,null,!1):s}class xge{constructor(e){this.lastOffset=ta,this.nextNodes=[e],this.offsets=[ta],this.idxs=[]}readLongestNodeAt(e,t){if(Ow(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=yS(this.nextNodes);if(!i)return;const n=yS(this.offsets);if(Ow(e,n))return;if(Ow(n,e))if(us(n,i.length)<=e)this.nextNodeAfterCurrent();else{const r=XM(i);r!==-1?(this.nextNodes.push(i.getChild(r)),this.offsets.push(n),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const r=XM(i);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(r)),this.offsets.push(n),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=yS(this.offsets),t=yS(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=yS(this.nextNodes),n=XM(i,this.idxs[this.idxs.length-1]);if(n!==-1){this.nextNodes.push(i.getChild(n)),this.offsets.push(us(e,t.length)),this.idxs[this.idxs.length-1]=n;break}else this.idxs.pop()}}}function XM(s,e=-1){for(;;){if(e++,e>=s.childrenLength)return-1;if(s.getChild(e))return e}}function yS(s){return s.length>0?s[s.length-1]:void 0}function rz(s,e,t,i){return new kge(s,e,t,i).parseDocument()}class kge{constructor(e,t,i,n){if(this.tokenizer=e,this.createImmutableLists=n,this._itemsConstructed=0,this._itemsFromCache=0,i&&n)throw new Error("Not supported");this.oldNodeReader=i?new xge(i):void 0,this.positionMapper=new hge(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ra.getEmpty(),0);return e||(e=Md.getEmpty()),e}parseList(e,t){const i=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===4&&r.childrenLength===0||i.push(r)}return this.oldNodeReader?yge(i):RY(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!XN(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),n=>t!==null&&!Ow(n.length,t)?!1:n.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new pge(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new a1(i.length);const n=e.merge(i.bracketIds),r=this.parseList(n,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===i.bracketId||o.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),Ux.create(i.astNode,r,o.astNode)):Ux.create(i.astNode,r,null)}default:throw new Error("unexpected")}}}function eI(s,e){if(s.length===0)return e;if(e.length===0)return s;const t=new _g(oz(s)),i=oz(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let n=t.dequeue();function r(c){if(c===void 0){const d=t.takeWhile(g=>!0)||[];return n&&d.unshift(n),d}const h=[];for(;n&&!XN(c);){const[d,g]=n.splitAt(c);h.push(d),c=zx(d.lengthAfter,c),n=g??t.dequeue()}return XN(c)||h.push(new Um(!1,c,c)),h}const o=[];function a(c,h,d){if(o.length>0&&AY(o[o.length-1].endOffset,c)){const g=o[o.length-1];o[o.length-1]=new ag(g.startOffset,h,us(g.newLength,d))}else o.push({startOffset:c,endOffset:h,newLength:d})}let l=ta;for(const c of i){const h=r(c.lengthBefore);if(c.modified){const d=cge(h,_=>_.lengthBefore),g=us(l,d);a(l,g,c.lengthAfter),l=g}else for(const d of h){const g=l;l=us(l,d.lengthBefore),d.modified&&a(g,l,d.lengthAfter)}}return o}class Um{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=zx(e,this.lengthAfter);return AY(t,ta)?[this,void 0]:this.modified?[new Um(this.modified,this.lengthBefore,e),new Um(this.modified,ta,t)]:[new Um(this.modified,e,e),new Um(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Cc(this.lengthBefore)} -> ${Cc(this.lengthAfter)}`}}function oz(s){const e=[];let t=ta;for(const i of s){const n=zx(t,i.startOffset);XN(n)||e.push(new Um(!1,n,n));const r=zx(i.startOffset,i.endOffset);e.push(new Um(!0,r,i.newLength)),t=i.endOffset}return e}class Ege extends pe{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new ne,this.denseKeyProvider=new dge,this.brackets=new Cge(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),n=new vge(this.textModel.getValue(),i);this.initialAstWithoutTokens=rz(n,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new ag(Hn(i.fromLineNumber-1,0),Hn(i.toLineNumber,0),Hn(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=ag.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=eI(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=eI(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const n=t,r=new _ge(this.textModel,this.brackets);return rz(r,e,n,i)}getBracketsInRange(e,t){this.flushQueue();const i=Hn(e.startLineNumber-1,e.startColumn-1),n=Hn(e.endLineNumber-1,e.endColumn-1);return new M1(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens;q7(o,ta,o.length,i,n,r,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=tw(e.getStartPosition()),n=tw(e.getEndPosition());return new M1(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new Tge(r,t,this.textModel);$7(o,ta,o.length,i,n,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return OY(t,ta,t.length,tw(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return MY(t,ta,t.length,tw(e))}}function MY(s,e,t,i){if(s.kind===4||s.kind===2){const n=[];for(const r of s.children)t=us(e,r.length),n.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=n.length-1;r>=0;r--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=n[r];if(Ow(o,i)){const l=MY(s.children[r],o,a,i);if(l)return l}}return null}else{if(s.kind===3)return null;if(s.kind===1){const n=U1(e,t);return{bracketInfo:s.bracketInfo,range:n}}}return null}function OY(s,e,t,i){if(s.kind===4||s.kind===2){for(const n of s.children){if(t=us(e,n.length),Ow(i,t)){const r=OY(n,e,t,i);if(r)return r}e=t}return null}else{if(s.kind===3)return null;if(s.kind===1){const n=U1(e,t);return{bracketInfo:s.bracketInfo,range:n}}}return null}function q7(s,e,t,i,n,r,o,a,l,c,h=!1){if(o>200)return!0;e:for(;;)switch(s.kind){case 4:{const d=s.childrenLength;for(let g=0;g<d;g++){const _=s.getChild(g);if(_){if(t=us(e,_.length),Pw(e,n)&&$S(t,i)){if($S(t,n)){s=_;continue e}if(!q7(_,e,t,i,n,r,o,0,l,c))return!1}e=t}}return!0}case 2:{const d=!c||!s.closingBracket||s.closingBracket.bracketInfo.closesColorized(s.openingBracket.bracketInfo);let g=0;if(l){let b=l.get(s.openingBracket.text);b===void 0&&(b=0),g=b,d&&(b++,l.set(s.openingBracket.text,b))}const _=s.childrenLength;for(let b=0;b<_;b++){const C=s.getChild(b);if(C){if(t=us(e,C.length),Pw(e,n)&&$S(t,i)){if($S(t,n)&&C.kind!==1){s=C,d?(o++,a=g+1):a=g;continue e}if((d||C.kind!==1||!s.closingBracket)&&!q7(C,e,t,i,n,r,d?o+1:o,d?g+1:g,l,c,!s.closingBracket))return!1}e=t}}return l?.set(s.openingBracket.text,g),!0}case 3:{const d=U1(e,t);return r(new iz(d,o-1,0,!0))}case 1:{const d=U1(e,t);return r(new iz(d,o-1,a-1,h))}case 0:return!0}}class Tge{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function $7(s,e,t,i,n,r,o,a){if(o>200)return!0;let l=!0;if(s.kind===2){let c=0;if(a){let g=a.get(s.openingBracket.text);g===void 0&&(g=0),c=g,g++,a.set(s.openingBracket.text,g)}const h=us(e,s.openingBracket.length);let d=-1;if(r.includeMinIndentation&&(d=s.computeMinIndentation(e,r.textModel)),l=r.push(new oge(U1(e,t),U1(e,h),s.closingBracket?U1(us(h,s.child?.length||ta),t):void 0,o,c,s,d)),e=h,l&&s.child){const g=s.child;if(t=us(e,g.length),Pw(e,n)&&$S(t,i)&&(l=$7(g,e,t,i,n,r,o+1,a),!l))return!1}a?.set(s.openingBracket.text,c)}else{let c=e;for(const h of s.children){const d=c;if(c=us(c,h.length),Pw(d,n)&&Pw(i,c)&&(l=$7(h,d,c,i,n,r,o,a),!l))return!1}}return l}class Dge extends pe{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new qs),this.onDidChangeEmitter=new ne,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){(!e.languageId||this.bracketPairsTree.value?.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Ze;this.bracketPairsTree.value=Nge(e.add(new Ege(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||M1.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||M1.empty}getBracketsInRange(e,t=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||M1.empty}findMatchingBracketUp(e,t,i){const n=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(ie.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?TT(this._findMatchingBracketUp(l,n,QM(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(ie.fromPositions(e,e)).filter(n=>n.closingBracketRange!==void 0&&(n.openingBracketRange.containsPosition(e)||n.closingBracketRange.containsPosition(e))).findLastMaxBy(Dl(n=>n.openingBracketRange.containsPosition(e)?n.openingBracketRange:n.closingBracketRange,ie.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=QM(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,n){const r=t.getCount(),o=t.getLanguageId(n);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=n-1;c>=0;c--){const h=t.getEndOffset(c);if(h<=a)break;if(id(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=h;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=n+1;c<r;c++){const h=t.getStartOffset(c);if(h>=l)break;if(id(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=h;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,n=this.textModel.tokenization.getLineTokens(i),r=this.textModel.getLineContent(i),o=n.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(o)).brackets;if(a&&!id(n.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,n,a,o),h=null;for(;;){const d=$c.findNextBracketInRange(a.forwardRegex,i,r,l,c);if(!d)break;if(d.startColumn<=e.column&&e.column<=d.endColumn){const g=r.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),_=this._matchFoundBracket(d,a.textIsBracket[g],a.textIsOpenBracket[g],t);if(_){if(_ instanceof Yf)return null;h=_}}l=d.endColumn-1}if(h)return h}if(o>0&&n.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(l)).brackets;if(c&&!id(n.getStandardTokenType(l))){const{searchStartOffset:h,searchEndOffset:d}=this._establishBracketSearchOffsets(e,n,c,l),g=$c.findPrevBracketInRange(c.reversedRegex,i,r,h,d);if(g&&g.startColumn<=e.column&&e.column<=g.endColumn){const _=r.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),b=this._matchFoundBracket(g,c.textIsBracket[_],c.textIsOpenBracket[_],t);if(b)return b instanceof Yf?null:b}}}return null}_matchFoundBracket(e,t,i,n){if(!t)return null;const r=i?this._findMatchingBracketDown(t,e.getEndPosition(),n):this._findMatchingBracketUp(t,e.getStartPosition(),n);return r?r instanceof Yf?r:[e,r]:null}_findMatchingBracketUp(e,t,i){const n=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,h,d,g)=>{for(;;){if(i&&++a%100===0&&!i())return Yf.INSTANCE;const _=$c.findPrevBracketInRange(r,c,h,d,g);if(!_)break;const b=h.substring(_.startColumn-1,_.endColumn-1).toLowerCase();if(e.isOpen(b)?o++:e.isClose(b)&&o--,o===0)return _;g=_.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const h=this.textModel.tokenization.getLineTokens(c),d=h.getCount(),g=this.textModel.getLineContent(c);let _=d-1,b=g.length,C=g.length;c===t.lineNumber&&(_=h.findTokenIndexAtOffset(t.column-1),b=t.column-1,C=t.column-1);let S=!0;for(;_>=0;_--){const E=h.getLanguageId(_)===n&&!id(h.getStandardTokenType(_));if(E)S?b=h.getStartOffset(_):(b=h.getStartOffset(_),C=h.getEndOffset(_));else if(S&&b!==C){const x=l(c,g,b,C);if(x)return x}S=E}if(S&&b!==C){const E=l(c,g,b,C);if(E)return E}}return null}_findMatchingBracketDown(e,t,i){const n=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(h,d,g,_)=>{for(;;){if(i&&++a%100===0&&!i())return Yf.INSTANCE;const b=$c.findNextBracketInRange(r,h,d,g,_);if(!b)break;const C=d.substring(b.startColumn-1,b.endColumn-1).toLowerCase();if(e.isOpen(C)?o++:e.isClose(C)&&o--,o===0)return b;g=b.endColumn-1}return null},c=this.textModel.getLineCount();for(let h=t.lineNumber;h<=c;h++){const d=this.textModel.tokenization.getLineTokens(h),g=d.getCount(),_=this.textModel.getLineContent(h);let b=0,C=0,S=0;h===t.lineNumber&&(b=d.findTokenIndexAtOffset(t.column-1),C=t.column-1,S=t.column-1);let E=!0;for(;b<g;b++){const x=d.getLanguageId(b)===n&&!id(d.getStandardTokenType(b));if(x)E||(C=d.getStartOffset(b)),S=d.getEndOffset(b);else if(E&&C!==S){const T=l(h,_,C,S);if(T)return T}E=x}if(E&&C!==S){const x=l(h,_,C,S);if(x)return x}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let i=null,n=null,r=null;for(let o=t.lineNumber;o>=1;o--){const a=this.textModel.tokenization.getLineTokens(o),l=a.getCount(),c=this.textModel.getLineContent(o);let h=l-1,d=c.length,g=c.length;if(o===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),d=t.column-1,g=t.column-1;const b=a.getLanguageId(h);i!==b&&(i=b,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let _=!0;for(;h>=0;h--){const b=a.getLanguageId(h);if(i!==b){if(n&&r&&_&&d!==g){const S=$c.findPrevBracketInRange(n.reversedRegex,o,c,d,g);if(S)return this._toFoundBracket(r,S);_=!1}i=b,n=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const C=!!n&&!id(a.getStandardTokenType(h));if(C)_?d=a.getStartOffset(h):(d=a.getStartOffset(h),g=a.getEndOffset(h));else if(r&&n&&_&&d!==g){const S=$c.findPrevBracketInRange(n.reversedRegex,o,c,d,g);if(S)return this._toFoundBracket(r,S)}_=C}if(r&&n&&_&&d!==g){const b=$c.findPrevBracketInRange(n.reversedRegex,o,c,d,g);if(b)return this._toFoundBracket(r,b)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;const i=this.textModel.getLineCount();let n=null,r=null,o=null;for(let a=t.lineNumber;a<=i;a++){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),h=this.textModel.getLineContent(a);let d=0,g=0,_=0;if(a===t.lineNumber){d=l.findTokenIndexAtOffset(t.column-1),g=t.column-1,_=t.column-1;const C=l.getLanguageId(d);n!==C&&(n=C,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let b=!0;for(;d<c;d++){const C=l.getLanguageId(d);if(n!==C){if(o&&r&&b&&g!==_){const E=$c.findNextBracketInRange(r.forwardRegex,a,h,g,_);if(E)return this._toFoundBracket(o,E);b=!1}n=C,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const S=!!r&&!id(l.getStandardTokenType(d));if(S)b||(g=l.getStartOffset(d)),_=l.getEndOffset(d);else if(o&&r&&b&&g!==_){const E=$c.findNextBracketInRange(r.forwardRegex,a,h,g,_);if(E)return this._toFoundBracket(o,E)}b=S}if(o&&r&&b&&g!==_){const C=$c.findNextBracketInRange(r.forwardRegex,a,h,g,_);if(C)return this._toFoundBracket(o,C)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const _=ie.fromPositions(i),b=this.getBracketPairsInRange(ie.fromPositions(i,i)).findLast(C=>C.closingBracketRange!==void 0&&C.range.strictContainsRange(_));return b?[b.openingBracketRange,b.closingBracketRange]:null}const n=QM(t),r=this.textModel.getLineCount(),o=new Map;let a=[];const l=(_,b)=>{if(!o.has(_)){const C=[];for(let S=0,E=b?b.brackets.length:0;S<E;S++)C[S]=0;o.set(_,C)}a=o.get(_)};let c=0;const h=(_,b,C,S,E)=>{for(;;){if(n&&++c%100===0&&!n())return Yf.INSTANCE;const x=$c.findNextBracketInRange(_.forwardRegex,b,C,S,E);if(!x)break;const T=C.substring(x.startColumn-1,x.endColumn-1).toLowerCase(),N=_.textIsBracket[T];if(N&&(N.isOpen(T)?a[N.index]++:N.isClose(T)&&a[N.index]--,a[N.index]===-1))return this._matchFoundBracket(x,N,!1,n);S=x.endColumn-1}return null};let d=null,g=null;for(let _=i.lineNumber;_<=r;_++){const b=this.textModel.tokenization.getLineTokens(_),C=b.getCount(),S=this.textModel.getLineContent(_);let E=0,x=0,T=0;if(_===i.lineNumber){E=b.findTokenIndexAtOffset(i.column-1),x=i.column-1,T=i.column-1;const A=b.getLanguageId(E);d!==A&&(d=A,g=this.languageConfigurationService.getLanguageConfiguration(d).brackets,l(d,g))}let N=!0;for(;E<C;E++){const A=b.getLanguageId(E);if(d!==A){if(g&&N&&x!==T){const O=h(g,_,S,x,T);if(O)return TT(O);N=!1}d=A,g=this.languageConfigurationService.getLanguageConfiguration(d).brackets,l(d,g)}const P=!!g&&!id(b.getStandardTokenType(E));if(P)N||(x=b.getStartOffset(E)),T=b.getEndOffset(E);else if(g&&N&&x!==T){const O=h(g,_,S,x,T);if(O)return TT(O)}N=P}if(g&&N&&x!==T){const A=h(g,_,S,x,T);if(A)return TT(A)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const n=e.getBracketInfo(i);return n?{range:t,bracketInfo:n}:null}}function Nge(s,e){return{object:s,dispose:()=>e?.dispose()}}function QM(s){if(typeof s>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=s}}const yA=class yA{constructor(){this._searchCanceledBrand=void 0}};yA.INSTANCE=new yA;let Yf=yA;function TT(s){return s instanceof Yf?null:s}class Ige extends pe{constructor(e){super(),this.textModel=e,this.colorProvider=new PY,this.onDidChangeEmitter=new ne,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,n){return n?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new ie(1,1,this.textModel.getLineCount(),1),e,t):[]}}class PY{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Lg((s,e)=>{const t=[cY,uY,hY,dY,fY,gY],i=new PY;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${s.getColor(qhe)}; }`);const n=t.map(r=>s.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=n[r%n.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});function DT(s){return s.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class wr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${DT(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${DT(this.oldText)}")`:`(replace@${this.oldPosition} "${DT(this.oldText)}" with "${DT(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const n=t.length;zu(e,n,i),i+=4;for(let r=0;r<n;r++)gne(e,t.charCodeAt(r),i),i+=2;return i}static _readString(e,t){const i=Wu(e,t);return t+=4,Nre(e,t,i)}writeSize(){return 8+wr._writeStringSize(this.oldText)+wr._writeStringSize(this.newText)}write(e,t){return zu(e,this.oldPosition,t),t+=4,zu(e,this.newPosition,t),t+=4,t=wr._writeString(e,this.oldText,t),t=wr._writeString(e,this.newText,t),t}static read(e,t,i){const n=Wu(e,t);t+=4;const r=Wu(e,t);t+=4;const o=wr._readString(e,t);t+=wr._writeStringSize(o);const a=wr._readString(e,t);return t+=wr._writeStringSize(a),i.push(new wr(n,o,r,a)),t}}function Age(s,e){return s===null||s.length===0?e:new rd(s,e).compress()}class rd{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),n=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(n),n=this._getCurr(++t);continue}if(n===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldEnd<=i.newPosition){this._acceptCurr(n),n=this._getCurr(++t);continue}if(i.newEnd<=n.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(n.oldPosition<i.newPosition){const[c,h]=rd._splitCurr(n,i.newPosition-n.oldPosition);this._acceptCurr(c),n=h;continue}if(i.newPosition<n.oldPosition){const[c,h]=rd._splitPrev(i,n.oldPosition-i.newPosition);this._acceptPrev(c),i=h;continue}let a,l;if(n.oldEnd===i.newEnd)a=i,l=n,i=this._getPrev(++e),n=this._getCurr(++t);else if(n.oldEnd<i.newEnd){const[c,h]=rd._splitPrev(i,n.oldLength);a=c,l=n,i=h,n=this._getCurr(++t)}else{const[c,h]=rd._splitCurr(n,i.newLength);a=i,l=c,i=this._getPrev(++e),n=h}this._result[this._resultLen++]=new wr(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=rd._merge(this._result);return rd._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=rd._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=rd._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new wr(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new wr(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),n=e.newText.substr(t);return[new wr(e.oldPosition,e.oldText,e.newPosition,i),new wr(e.oldEnd,"",e.newPosition+t,n)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),n=e.oldText.substr(t);return[new wr(e.oldPosition,i,e.newPosition,e.newText),new wr(e.oldPosition+t,n,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,n=e[0];for(let r=1;r<e.length;r++){const o=e[r];n.oldEnd===o.oldPosition?n=new wr(n.oldPosition,n.oldText+o.oldText,n.newPosition,n.newText+o.newText):(t[i++]=n,n=o)}return t[i++]=n,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let n=0;n<e.length;n++){const r=e[n];r.oldText!==r.newText&&(t[i++]=r)}return t}}const Rge=Symbol("TextModelEditSource");class BY{constructor(e,t){this.metadata=e}toString(){return`${this.metadata.source}`}getType(){const e=this.metadata;switch(e.source){case"cursor":return e.kind;case"inlineCompletionAccept":return e.source+(e.$nes?":nes":"");case"unknown":return e.name||"unknown";default:return e.source}}toKey(e,t={}){const i=this.metadata;return Object.entries(i).filter(([r,o])=>{const a=t[r];return a!==void 0?a:(r.match(/\$/g)||[]).length<=e&&o!==void 0&&o!==null&&o!==""}).map(([r,o])=>`${r}:${o}`).join("-")}}function jo(s){return new BY(s,Rge)}const lc={unknown(s){return jo({source:"unknown",name:s.name})},rename:()=>jo({source:"rename"}),chatApplyEdits(s){return jo({source:"Chat.applyEdits",$modelId:az(s.modelId),$extensionId:s.extensionId?.extensionId,$extensionVersion:s.extensionId?.version,$$languageId:s.languageId,$$sessionId:s.sessionId,$$requestId:s.requestId,$$mode:s.mode,$$codeBlockSuggestionId:s.codeBlockSuggestionId})},chatUndoEdits:()=>jo({source:"Chat.undoEdits"}),chatReset:()=>jo({source:"Chat.reset"}),inlineCompletionAccept(s){return jo({source:"inlineCompletionAccept",$nes:s.nes,...NT(s.providerId),$$requestUuid:s.requestUuid,$$languageId:s.languageId})},inlineCompletionPartialAccept(s){return jo({source:"inlineCompletionPartialAccept",type:s.type,$nes:s.nes,...NT(s.providerId),$$requestUuid:s.requestUuid,$$languageId:s.languageId})},inlineChatApplyEdit(s){return jo({source:"inlineChat.applyEdits",$modelId:az(s.modelId),$extensionId:s.extensionId?.extensionId,$extensionVersion:s.extensionId?.version,$$requestId:s.requestId,$$languageId:s.languageId})},reloadFromDisk:()=>jo({source:"reloadFromDisk"}),cursor(s){return jo({source:"cursor",kind:s.kind,detailedSource:s.detailedSource})},setValue:()=>jo({source:"setValue"}),eolChange:()=>jo({source:"eolChange"}),applyEdits:()=>jo({source:"applyEdits"}),snippet:()=>jo({source:"snippet"}),suggest:s=>jo({source:"suggest",...NT(s.providerId)}),codeAction:s=>jo({source:"codeAction",$kind:s.kind,...NT(s.providerId)})};function NT(s){return s?{$extensionId:s.extensionId,$extensionVersion:s.extensionVersion,$providerId:s.providerId}:{}}function az(s){if(s!==void 0)return s.replaceAll("/","|")}class tI{static fromText(e){const t=Ha.ofText(e).lineCount,i=e.length;return new tI(t,0,i,0)}static tryCreate(e,t,i,n){if(!(e===void 0||t===void 0||i===void 0||n===void 0))return new tI(e,t,i,n)}constructor(e,t,i,n){this.linesAdded=e,this.linesRemoved=t,this.charsAdded=i,this.charsRemoved=n}}var lz;(function(s){function e(){const t=kue("sgt");return t}s.newId=e})(lz||(lz={}));function Ev(s){return s.toString()}class Bs{static create(e,t){const i=e.getAlternativeVersionId(),n=j7(e);return new Bs(i,i,n,n,t,t,[])}constructor(e,t,i,n,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=n,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}append(e,t,i,n,r){t.length>0&&(this.changes=Age(this.changes,t)),this.afterEOL=i,this.afterVersionId=n,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,i){if(zu(e,t?t.length:0,i),i+=4,t)for(const n of t)zu(e,n.selectionStartLineNumber,i),i+=4,zu(e,n.selectionStartColumn,i),i+=4,zu(e,n.positionLineNumber,i),i+=4,zu(e,n.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const n=Wu(e,t);t+=4;for(let r=0;r<n;r++){const o=Wu(e,t);t+=4;const a=Wu(e,t);t+=4;const l=Wu(e,t);t+=4;const c=Wu(e,t);t+=4,i.push(new Yt(o,a,l,c))}return t}serialize(){let e=10+Bs._writeSelectionsSize(this.beforeCursorState)+Bs._writeSelectionsSize(this.afterCursorState)+4;for(const n of this.changes)e+=n.writeSize();const t=new Uint8Array(e);let i=0;zu(t,this.beforeVersionId,i),i+=4,zu(t,this.afterVersionId,i),i+=4,UV(t,this.beforeEOL,i),i+=1,UV(t,this.afterEOL,i),i+=1,i=Bs._writeSelections(t,this.beforeCursorState,i),i=Bs._writeSelections(t,this.afterCursorState,i),zu(t,this.changes.length,i),i+=4;for(const n of this.changes)i=n.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const n=Wu(t,i);i+=4;const r=Wu(t,i);i+=4;const o=zV(t,i);i+=1;const a=zV(t,i);i+=1;const l=[];i=Bs._readSelections(t,i,l);const c=[];i=Bs._readSelections(t,i,c);const h=Wu(t,i);i+=4;const d=[];for(let g=0;g<h;g++)i=wr.read(t,i,d);return new Bs(n,r,o,a,l,c,d)}}class FY{get type(){return 0}get resource(){return Ot.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,n){this.label=e,this.code=t,this.model=i,this._data=Bs.create(i,n)}toString(){return(this._data instanceof Bs?this._data:Bs.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ot.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Bs}append(e,t,i,n,r){this._data instanceof Bs&&this._data.append(e,t,i,n,r)}close(){this._data instanceof Bs&&(this._data=this._data.serialize())}open(){this._data instanceof Bs||(this._data=Bs.deserialize(this._data))}undo(){if(Ot.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Bs&&(this._data=this._data.serialize());const e=Bs.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ot.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Bs&&(this._data=this._data.serialize());const e=Bs.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Bs&&(this._data=this._data.serialize()),this._data.byteLength+168}}class Mge{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const r=Ev(n.resource);this._editStackElementsMap.set(r,n)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=Ev(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Ev(Ot.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Ev(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,n,r){const o=Ev(e.uri);this._editStackElementsMap.get(o).append(e,t,i,n,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Ev(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${TP(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function j7(s){return s.getEOL()===`
`?0:1}function Zf(s){return s?s instanceof FY||s instanceof Mge:!1}class gB{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Zf(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Zf(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(Zf(i)&&i.canAppend(this._model))return i;const n=new FY(y(781,"Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n,t),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],j7(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,n,r=lc.unknown({name:"pushEditOperation"})){const o=this._getOrCreateEditStackElement(e,n),a=this._model.applyEdits(t,!0,r),l=gB._computeCursorState(i,a),c=a.map((h,d)=>({index:d,textChange:h.textChange}));return c.sort((h,d)=>h.textChange.oldPosition===d.textChange.oldPosition?h.index-d.index:h.textChange.oldPosition-d.textChange.oldPosition),o.append(this._model,c.map(h=>h.textChange),j7(this._model),this._model.getAlternativeVersionId(),l),l}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return mi(i),null}}}class Oge{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function Pge(s,e,t,i,n){n.spacesDiff=0,n.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<i;r++){const g=s.charCodeAt(r),_=t.charCodeAt(r);if(g!==_)break}let o=0,a=0;for(let g=r;g<e;g++)s.charCodeAt(g)===32?o++:a++;let l=0,c=0;for(let g=r;g<i;g++)t.charCodeAt(g)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const h=Math.abs(a-c),d=Math.abs(o-l);if(h===0){n.spacesDiff=d,d>0&&0<=l-1&&l-1<s.length&&l<t.length&&t.charCodeAt(l)!==32&&s.charCodeAt(l-1)===32&&s.charCodeAt(s.length-1)===44&&(n.looksLikeAlignment=!0);return}if(d%h===0){n.spacesDiff=d/h;return}}function cz(s,e,t){const i=Math.min(s.getLineCount(),1e4);let n=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,h=[0,0,0,0,0,0,0,0,0],d=new Oge;for(let b=1;b<=i;b++){const C=s.getLineLength(b),S=s.getLineContent(b),E=C<=65536;let x=!1,T=0,N=0,A=0;for(let O=0,V=C;O<V;O++){const U=E?S.charCodeAt(O):s.getLineCharCode(b,O);if(U===9)A++;else if(U===32)N++;else{x=!0,T=O;break}}if(!x||(A>0?n++:N>1&&r++,Pge(o,a,S,T,d),d.looksLikeAlignment&&!(t&&e===d.spacesDiff)))continue;const P=d.spacesDiff;P<=c&&h[P]++,o=S,a=T}let g=t;n!==r&&(g=n<r);let _=e;if(g){let b=g?0:.1*i;l.forEach(C=>{const S=h[C];S>b&&(b=S,_=C)}),_===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(_=2)}return{insertSpaces:g,tabSize:_}}function Go(s){return(s.metadata&1)>>>0}function Qi(s,e){s.metadata=s.metadata&254|e<<0}function Lr(s){return(s.metadata&2)>>>1===1}function Ki(s,e){s.metadata=s.metadata&253|(e?1:0)<<1}function VY(s){return(s.metadata&4)>>>2===1}function uz(s,e){s.metadata=s.metadata&251|(e?1:0)<<2}function HY(s){return(s.metadata&64)>>>6===1}function hz(s,e){s.metadata=s.metadata&191|(e?1:0)<<6}function WY(s){return(s.metadata&128)>>>7===1}function dz(s,e){s.metadata=s.metadata&127|(e?1:0)<<7}function Bge(s){return(s.metadata&24)>>>3}function fz(s,e){s.metadata=s.metadata&231|e<<3}function Fge(s){return(s.metadata&32)>>>5===1}function gz(s,e){s.metadata=s.metadata&223|(e?1:0)<<5}class zY{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,Qi(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,uz(this,!1),hz(this,!1),fz(this,1),gz(this,!1),dz(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,Ki(this,!1)}reset(e,t,i,n){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=n}setOptions(e){this.options=e;const t=this.options.className;uz(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),hz(this,this.options.glyphMarginClassName!==null),fz(this,this.options.stickiness),gz(this,this.options.collapseOnReplaceEdit),dz(this,this.options.affectsFont??!1)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const Tt=new zY(null,0,0);Tt.parent=Tt;Tt.left=Tt;Tt.right=Tt;Qi(Tt,0);class JM{constructor(){this.root=Tt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,n,r,o,a){return this.root===Tt?[]:jge(this,e,t,i,n,r,o,a)}search(e,t,i,n,r){return this.root===Tt?[]:$ge(this,e,t,i,n,r)}collectNodesFromOwner(e){return Uge(this,e)}collectNodesPostOrder(){return qge(this)}insert(e){mz(this,e),this._normalizeDeltaIfNecessary()}delete(e){pz(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let n=0;for(;e!==this.root;)e===e.parent.right&&(n+=e.parent.delta),e=e.parent;const r=i.start+n,o=i.end+n;i.setCachedOffsets(r,o,t)}acceptReplace(e,t,i,n){const r=Wge(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];pz(this,l)}this._normalizeDeltaIfNecessary(),zge(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,Hge(l,e,e+t,i,n),l.maxEnd=l.end,mz(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,Vge(this))}}function Vge(s){let e=s.root,t=0;for(;e!==Tt;){if(e.left!==Tt&&!Lr(e.left)){e=e.left;continue}if(e.right!==Tt&&!Lr(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,dp(e),Ki(e,!0),Ki(e.left,!1),Ki(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Ki(s.root,!1)}function Tv(s,e,t,i){return s<t?!0:s>t||i===1?!1:i===2?!0:e}function Hge(s,e,t,i,n){const r=Bge(s),o=r===0||r===2,a=r===1||r===2,l=t-e,c=i,h=Math.min(l,c),d=s.start;let g=!1;const _=s.end;let b=!1;e<=d&&_<=t&&Fge(s)&&(s.start=e,g=!0,s.end=e,b=!0);{const S=n?1:l>0?2:0;!g&&Tv(d,o,e,S)&&(g=!0),!b&&Tv(_,a,e,S)&&(b=!0)}if(h>0&&!n){const S=l>c?2:0;!g&&Tv(d,o,e+h,S)&&(g=!0),!b&&Tv(_,a,e+h,S)&&(b=!0)}{const S=n?1:0;!g&&Tv(d,o,t,S)&&(s.start=e+c,g=!0),!b&&Tv(_,a,t,S)&&(s.end=e+c,b=!0)}const C=c-l;g||(s.start=Math.max(0,d+C)),b||(s.end=Math.max(0,_+C)),s.start>s.end&&(s.end=s.start)}function Wge(s,e,t){let i=s.root,n=0,r=0,o=0,a=0;const l=[];let c=0;for(;i!==Tt;){if(Lr(i)){Ki(i.left,!1),Ki(i.right,!1),i===i.parent.right&&(n-=i.parent.delta),i=i.parent;continue}if(!Lr(i.left)){if(r=n+i.maxEnd,r<e){Ki(i,!0);continue}if(i.left!==Tt){i=i.left;continue}}if(o=n+i.start,o>t){Ki(i,!0);continue}if(a=n+i.end,a>=e&&(i.setCachedOffsets(o,a,0),l[c++]=i),Ki(i,!0),i.right!==Tt&&!Lr(i.right)){n+=i.delta,i=i.right;continue}}return Ki(s.root,!1),l}function zge(s,e,t,i){let n=s.root,r=0,o=0,a=0;const l=i-(t-e);for(;n!==Tt;){if(Lr(n)){Ki(n.left,!1),Ki(n.right,!1),n===n.parent.right&&(r-=n.parent.delta),dp(n),n=n.parent;continue}if(!Lr(n.left)){if(o=r+n.maxEnd,o<e){Ki(n,!0);continue}if(n.left!==Tt){n=n.left;continue}}if(a=r+n.start,a>t){n.start+=l,n.end+=l,n.delta+=l,(n.delta<-1073741824||n.delta>1073741824)&&(s.requestNormalizeDelta=!0),Ki(n,!0);continue}if(Ki(n,!0),n.right!==Tt&&!Lr(n.right)){r+=n.delta,n=n.right;continue}}Ki(s.root,!1)}function Uge(s,e){let t=s.root;const i=[];let n=0;for(;t!==Tt;){if(Lr(t)){Ki(t.left,!1),Ki(t.right,!1),t=t.parent;continue}if(t.left!==Tt&&!Lr(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[n++]=t),Ki(t,!0),t.right!==Tt&&!Lr(t.right)){t=t.right;continue}}return Ki(s.root,!1),i}function qge(s){let e=s.root;const t=[];let i=0;for(;e!==Tt;){if(Lr(e)){Ki(e.left,!1),Ki(e.right,!1),e=e.parent;continue}if(e.left!==Tt&&!Lr(e.left)){e=e.left;continue}if(e.right!==Tt&&!Lr(e.right)){e=e.right;continue}t[i++]=e,Ki(e,!0)}return Ki(s.root,!1),t}function $ge(s,e,t,i,n,r){let o=s.root,a=0,l=0,c=0;const h=[];let d=0;for(;o!==Tt;){if(Lr(o)){Ki(o.left,!1),Ki(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(o.left!==Tt&&!Lr(o.left)){o=o.left;continue}l=a+o.start,c=a+o.end,o.setCachedOffsets(l,c,n);let g=!0;if(e&&o.ownerId&&o.ownerId!==e&&(g=!1),t&&VY(o)&&(g=!1),i&&WY(o)&&(g=!1),r&&!HY(o)&&(g=!1),g&&(h[d++]=o),Ki(o,!0),o.right!==Tt&&!Lr(o.right)){a+=o.delta,o=o.right;continue}}return Ki(s.root,!1),h}function jge(s,e,t,i,n,r,o,a){let l=s.root,c=0,h=0,d=0,g=0;const _=[];let b=0;for(;l!==Tt;){if(Lr(l)){Ki(l.left,!1),Ki(l.right,!1),l===l.parent.right&&(c-=l.parent.delta),l=l.parent;continue}if(!Lr(l.left)){if(h=c+l.maxEnd,h<e){Ki(l,!0);continue}if(l.left!==Tt){l=l.left;continue}}if(d=c+l.start,d>t){Ki(l,!0);continue}if(g=c+l.end,g>=e){l.setCachedOffsets(d,g,o);let C=!0;i&&l.ownerId&&l.ownerId!==i&&(C=!1),n&&VY(l)&&(C=!1),r&&WY(l)&&(C=!1),a&&!HY(l)&&(C=!1),C&&(_[b++]=l)}if(Ki(l,!0),l.right!==Tt&&!Lr(l.right)){c+=l.delta,l=l.right;continue}}return Ki(s.root,!1),_}function mz(s,e){if(s.root===Tt)return e.parent=Tt,e.left=Tt,e.right=Tt,Qi(e,0),s.root=e,s.root;Gge(s,e),xm(e.parent);let t=e;for(;t!==s.root&&Go(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;Go(i)===1?(Qi(t.parent,0),Qi(i,0),Qi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,wL(s,t)),Qi(t.parent,0),Qi(t.parent.parent,1),CL(s,t.parent.parent))}else{const i=t.parent.parent.left;Go(i)===1?(Qi(t.parent,0),Qi(i,0),Qi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,CL(s,t)),Qi(t.parent,0),Qi(t.parent.parent,1),wL(s,t.parent.parent))}return Qi(s.root,0),e}function Gge(s,e){let t=0,i=s.root;const n=e.start,r=e.end;for(;;)if(Yge(n,r,i.start+t,i.end+t)<0)if(i.left===Tt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===Tt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=Tt,e.right=Tt,Qi(e,1)}function pz(s,e){let t,i;if(e.left===Tt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Tt?(t=e.left,i=e):(i=Kge(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(s.requestNormalizeDelta=!0)),i===s.root){s.root=t,Qi(t,0),e.detach(),e5(),dp(t),s.root.parent=Tt;return}const n=Go(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,Qi(i,Go(e)),e===s.root?s.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==Tt&&(i.left.parent=i),i.right!==Tt&&(i.right.parent=i)),e.detach(),n){xm(t.parent),i!==e&&(xm(i),xm(i.parent)),e5();return}xm(t),xm(t.parent),i!==e&&(xm(i),xm(i.parent));let r;for(;t!==s.root&&Go(t)===0;)t===t.parent.left?(r=t.parent.right,Go(r)===1&&(Qi(r,0),Qi(t.parent,1),wL(s,t.parent),r=t.parent.right),Go(r.left)===0&&Go(r.right)===0?(Qi(r,1),t=t.parent):(Go(r.right)===0&&(Qi(r.left,0),Qi(r,1),CL(s,r),r=t.parent.right),Qi(r,Go(t.parent)),Qi(t.parent,0),Qi(r.right,0),wL(s,t.parent),t=s.root)):(r=t.parent.left,Go(r)===1&&(Qi(r,0),Qi(t.parent,1),CL(s,t.parent),r=t.parent.left),Go(r.left)===0&&Go(r.right)===0?(Qi(r,1),t=t.parent):(Go(r.left)===0&&(Qi(r.right,0),Qi(r,1),wL(s,r),r=t.parent.left),Qi(r,Go(t.parent)),Qi(t.parent,0),Qi(r.left,0),CL(s,t.parent),t=s.root));Qi(t,0),e5()}function Kge(s){for(;s.left!==Tt;)s=s.left;return s}function e5(){Tt.parent=Tt,Tt.delta=0,Tt.start=0,Tt.end=0}function wL(s,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Tt&&(t.left.parent=e),t.parent=e.parent,e.parent===Tt?s.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,dp(e),dp(t)}function CL(s,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(s.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Tt&&(t.right.parent=e),t.parent=e.parent,e.parent===Tt?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,dp(e),dp(t)}function UY(s){let e=s.end;if(s.left!==Tt){const t=s.left.maxEnd;t>e&&(e=t)}if(s.right!==Tt){const t=s.right.maxEnd+s.delta;t>e&&(e=t)}return e}function dp(s){s.maxEnd=UY(s)}function xm(s){for(;s!==Tt;){const e=UY(s);if(s.maxEnd===e)return;s.maxEnd=e,s=s.parent}}function Yge(s,e,t,i){return s===t?e-i:s-t}class G7{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==gt)return mB(this.right);let e=this;for(;e.parent!==gt&&e.parent.left!==e;)e=e.parent;return e.parent===gt?gt:e.parent}prev(){if(this.left!==gt)return qY(this.left);let e=this;for(;e.parent!==gt&&e.parent.right!==e;)e=e.parent;return e.parent===gt?gt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const gt=new G7(null,0);gt.parent=gt;gt.left=gt;gt.right=gt;gt.color=0;function mB(s){for(;s.left!==gt;)s=s.left;return s}function qY(s){for(;s.right!==gt;)s=s.right;return s}function pB(s){return s===gt?0:s.size_left+s.piece.length+pB(s.right)}function _B(s){return s===gt?0:s.lf_left+s.piece.lineFeedCnt+_B(s.right)}function t5(){gt.parent=gt}function yL(s,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==gt&&(t.left.parent=e),t.parent=e.parent,e.parent===gt?s.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function SL(s,e){const t=e.left;e.left=t.right,t.right!==gt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===gt?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function IT(s,e){let t,i;if(e.left===gt?(i=e,t=i.right):e.right===gt?(i=e,t=i.left):(i=mB(e.right),t=i.right),i===s.root){s.root=t,t.color=0,e.detach(),t5(),s.root.parent=gt;return}const n=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,jS(s,t)):(i.parent===e?t.parent=i:t.parent=i.parent,jS(s,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===s.root?s.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==gt&&(i.left.parent=i),i.right!==gt&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,jS(s,i)),e.detach(),t.parent.left===t){const o=pB(t),a=_B(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Of(s,t.parent,l,c)}}if(jS(s,t.parent),n){t5();return}let r;for(;t!==s.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,yL(s,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,SL(s,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,yL(s,t.parent),t=s.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,SL(s,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,yL(s,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,SL(s,t.parent),t=s.root));t.color=0,t5()}function _z(s,e){for(jS(s,e);e!==s.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,yL(s,e)),e.parent.color=0,e.parent.parent.color=1,SL(s,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,SL(s,e)),e.parent.color=0,e.parent.parent.color=1,yL(s,e.parent.parent))}s.root.color=0}function Of(s,e,t,i){for(;e!==s.root&&e!==gt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function jS(s,e){let t=0,i=0;if(e!==s.root){for(;e!==s.root&&e===e.parent.right;)e=e.parent;if(e!==s.root)for(e=e.parent,t=pB(e.left)-e.size_left,i=_B(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==s.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const Df=65535;function $Y(s){let e;return s[s.length-1]<65536?e=new Uint16Array(s.length):e=new Uint32Array(s.length),e.set(s,0),e}class Zge{constructor(e,t,i,n,r){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=r}}function Ff(s,e=!0){const t=[0];let i=1;for(let n=0,r=s.length;n<r;n++){const o=s.charCodeAt(n);o===13?n+1<r&&s.charCodeAt(n+1)===10?(t[i++]=n+2,n++):t[i++]=n+1:o===10&&(t[i++]=n+1)}return e?$Y(t):t}function Xge(s,e){s.length=0,s[0]=0;let t=1,i=0,n=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const h=e.charCodeAt(l);h===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,s[t++]=l+2,l++):(i++,s[t++]=l+1):h===10?(n++,s[t++]=l+1):o&&h!==9&&(h<32||h>126)&&(o=!1)}const a=new Zge($Y(s),i,n,r,o);return s.length=0,a}class Ea{constructor(e,t,i,n,r){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=r}}class l1{constructor(e,t){this.buffer=e,this.lineStarts=t}}class Qge{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==gt&&e.iterate(e.root,i=>(i!==gt&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class Jge{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const r=i[n];if(r.node.parent===null||r.nodeStartOffset>=e){i[n]=null,t=!0;continue}}if(t){const n=[];for(const r of i)r!==null&&n.push(r);this._cache=n}}}class eme{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new l1("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=gt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=Ff(e[r].buffer));const a=new Ea(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),n=this.rbInsertRight(n,a)}this._searchCache=new Jge(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Df,i=t-Math.floor(t/3),n=i*2;let r="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),h=c.length;if(o<=i||o+h<n)return r+=c,o+=h,!0;const d=r.replace(/\r\n|\r|\n/g,e);return a.push(new l1(d,Ff(d))),r=c,o=h,!0}),o>0){const l=r.replace(/\r\n|\r|\n/g,e);a.push(new l1(l,Ff(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new Qge(this,e)}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==gt;)if(n.left!==gt&&n.lf_left+1>=e)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;const r=this.getAccumulatedValue(n,e-n.lf_left-2);return i+=r+t-1}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==gt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const r=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+r.index,r.index===0){const o=this.getOffsetAt(i+1,1),a=n-o;return new se(i+1,a+1)}return new se(i+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===gt){const r=this.getOffsetAt(i+1,1),o=n-e-r;return new se(i+1,o+1)}else t=t.right;return new se(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(i,n);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=n.substring(r+e.remainder,r+i.piece.length);for(i=i.next();i!==gt;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,i.piece.length);i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",n=!1;return this.iterate(this.root,r=>{if(r===gt)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,d=o.end.line;let g=c[h]+o.start.column;if(n&&(l.charCodeAt(g)===10&&(g++,a--),e[t++]=i,i="",n=!1,a===0))return!0;if(h===d)return!this._EOLNormalized&&l.charCodeAt(g+a-1)===13?(n=!0,i+=l.substr(g,a-1)):i+=l.substr(g,a),!0;i+=this._EOLNormalized?l.substring(g,Math.max(g,c[h+1]-this._EOLLength)):l.substring(g,c[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let _=h+1;_<d;_++)i=this._EOLNormalized?l.substring(c[_],c[_+1]-this._EOLLength):l.substring(c[_],c[_+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[d]+o.end.column-1)===13?(n=!0,o.end.column===0?t--:i=l.substr(c[d],o.end.column-1)):i=l.substr(c[d],o.end.column),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}else{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getNearestChunk(e){const t=this.nodeAt(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===gt)return"";const n=this._buffers[i.piece.bufferIndex],r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n.buffer.substring(r,r+i.piece.length)}else{const i=this._buffers[t.node.piece.bufferIndex],n=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),r=n+t.remainder,o=n+t.node.piece.length;return i.buffer.substring(r,o)}}findMatchesInNode(e,t,i,n,r,o,a,l,c,h,d){const g=this._buffers[e.piece.bufferIndex],_=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),b=this.offsetInBuffer(e.piece.bufferIndex,r),C=this.offsetInBuffer(e.piece.bufferIndex,o);let S;const E={line:0,column:0};let x,T;t._wordSeparators?(x=g.buffer.substring(b,C),T=N=>N+b,t.reset(0)):(x=g.buffer,T=N=>N,t.reset(b));do if(S=t.next(x),S){if(T(S.index)>=C)return h;this.positionInBuffer(e,T(S.index)-_,E);const N=this.getLineFeedCnt(e.piece.bufferIndex,r,E),A=E.line===r.line?E.column-r.column+n:E.column+1,P=A+S[0].length;if(d[h++]=Q_(new ie(i+N,A,i+N,P),S,l),T(S.index)+S[0].length>=C||h>=c)return h}while(S);return h}findMatchesLineByLine(e,t,i,n){const r=[];let o=0;const a=new Gv(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let h=this.positionInBuffer(l.node,l.remainder);const d=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,h,d,t,i,n,o,r),r;let g=e.startLineNumber,_=l.node;for(;_!==c.node;){const C=this.getLineFeedCnt(_.piece.bufferIndex,h,_.piece.end);if(C>=1){const E=this._buffers[_.piece.bufferIndex].lineStarts,x=this.offsetInBuffer(_.piece.bufferIndex,_.piece.start),T=E[h.line+C],N=g===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(_,a,g,N,h,this.positionInBuffer(_,T-x),t,i,n,o,r),o>=n)return r;g+=C}const S=g===e.startLineNumber?e.startColumn-1:0;if(g===e.endLineNumber){const E=this.getLineContent(g).substring(S,e.endColumn-1);return o=this._findMatchesInLine(t,a,E,e.endLineNumber,S,o,r,i,n),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(g).substr(S),g,S,o,r,i,n),o>=n)return r;g++,l=this.nodeAt2(g,1),_=l.node,h=this.positionInBuffer(l.node,l.remainder)}if(g===e.endLineNumber){const C=g===e.startLineNumber?e.startColumn-1:0,S=this.getLineContent(g).substring(C,e.endColumn-1);return o=this._findMatchesInLine(t,a,S,e.endLineNumber,C,o,r,i,n),r}const b=g===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,g,b,h,d,t,i,n,o,r),r}_findMatchesInLine(e,t,i,n,r,o,a,l,c){const h=e.wordSeparators;if(!l&&e.simpleSearch){const g=e.simpleSearch,_=g.length,b=i.length;let C=-_;for(;(C=i.indexOf(g,C+_))!==-1;)if((!h||IP(h,i,b,C,_))&&(a[o++]=new kx(new ie(n,C+1+r,n,C+1+_+r),null),o>=c))return o;return o}let d;t.reset(0);do if(d=t.next(i),d&&(a[o++]=Q_(new ie(n,d.index+1+r,n,d.index+1+d[0].length+r),d,l),o>=c))return o;while(d);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==gt){const{node:n,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=n.piece,l=a.bufferIndex,c=this.positionInBuffer(n,r);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Df){this.appendToNode(n,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(o+n.piece.length>e){const h=[];let d=new Ea(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,r)===10){const C={line:d.start.line+1,column:0};d=new Ea(d.bufferIndex,C,d.end,this.getLineFeedCnt(d.bufferIndex,C,d.end),d.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,r-1)===13){const C=this.positionInBuffer(n,r-1);this.deleteNodeTail(n,C),t="\r"+t,n.piece.length===0&&h.push(n)}else this.deleteNodeTail(n,c);else this.deleteNodeTail(n,c);const g=this.createNewPieces(t);d.length>0&&this.rbInsertRight(n,d);let _=n;for(let b=0;b<g.length;b++)_=this.rbInsertRight(_,g[b]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,n)}else{const n=this.createNewPieces(t);let r=this.rbInsertLeft(null,n[0]);for(let o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===gt)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),r=i.node,o=n.node;if(r===o){const g=this.positionInBuffer(r,i.remainder),_=this.positionInBuffer(r,n.remainder);if(i.nodeStartOffset===e){if(t===r.piece.length){const b=r.next();IT(this,r),this.validateCRLFWithPrevNode(b),this.computeBufferMetadata();return}this.deleteNodeHead(r,_),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(i.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,g),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,g,_),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(r,i.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);const c=this.positionInBuffer(o,n.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const h=r.next();for(let g=h;g!==gt&&g!==o;g=g.next())a.push(g);const d=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(d),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new Ea(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,Of(this,t,-1,-1),t.piece.length===0&&i.push(t)}const n=this.createNewPieces(e);let r=this.rbInsertLeft(t,n[n.length-1]);for(let o=n.length-2;o>=0;o--)r=this.rbInsertLeft(r,n[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let r=n;for(let o=1;o<i.length;o++)r=this.rbInsertRight(r,i[o]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[n.start.line]+n.start.column+t;let c=n.start.line,h=n.end.line,d=0,g=0,_=0;for(;c<=h&&(d=c+(h-c)/2|0,_=o[d],d!==h);)if(g=o[d+1],l<_)h=d-1;else if(l>=g)c=d+1;else break;return i?(i.line=d,i.column=l-_,null):{line:d,column:l-_}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const r=n[i.line+1],o=n[i.line]+i.column;if(r>o+1)return i.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)IT(this,e[t])}createNewPieces(e){if(e.length>Df){const h=[];for(;e.length>Df;){const g=e.charCodeAt(Df-1);let _;g===13||g>=55296&&g<=56319?(_=e.substring(0,Df-1),e=e.substring(Df-1)):(_=e.substring(0,Df),e=e.substring(Df));const b=Ff(_);h.push(new Ea(this._buffers.length,{line:0,column:0},{line:b.length-1,column:_.length-b[b.length-1]},b.length-1,_.length)),this._buffers.push(new l1(_,b))}const d=Ff(e);return h.push(new Ea(this._buffers.length,{line:0,column:0},{line:d.length-1,column:e.length-d[d.length-1]},d.length-1,e.length)),this._buffers.push(new l1(e,d)),h}let t=this._buffers[0].buffer.length;const i=Ff(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let h=0;h<i.length;h++)i[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<i.length;h++)i[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Ea(0,n,l,this.getLineFeedCnt(0,n,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,n="";const r=this._searchCache.get2(e);if(r){i=r.node;const o=this.getAccumulatedValue(i,e-r.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(r.nodeStartLineNumber+i.piece.lineFeedCnt===e)n=a.substring(l+o,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;i!==gt;)if(i.left!==gt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),h=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-i.lf_left)}),h.substring(d+l,d+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,h=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=c.substring(h+l,h+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==gt;){const o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=o.substring(l,l+a-t),n}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=o.substr(a,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==gt;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),r=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,r=i.start.line+t+1;return r>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[r]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.end),o=t,a=this.offsetInBuffer(i.bufferIndex,o),l=this.getLineFeedCnt(i.bufferIndex,i.start,o),c=l-n,h=a-r,d=i.length+h;e.piece=new Ea(i.bufferIndex,i.start,o,l,d),Of(this,e,h,c)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.start),o=t,a=this.getLineFeedCnt(i.bufferIndex,o,i.end),l=this.offsetInBuffer(i.bufferIndex,o),c=a-n,h=r-l,d=i.length+h;e.piece=new Ea(i.bufferIndex,o,i.end,a,d),Of(this,e,h,c)}shrinkNode(e,t,i){const n=e.piece,r=n.start,o=n.end,a=n.length,l=n.lineFeedCnt,c=t,h=this.getLineFeedCnt(n.bufferIndex,n.start,c),d=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,r);e.piece=new Ea(n.bufferIndex,n.start,c,h,d),Of(this,e,d-a,h-l);const g=new Ea(n.bufferIndex,i,o,this.getLineFeedCnt(n.bufferIndex,i,o),this.offsetInBuffer(n.bufferIndex,o)-this.offsetInBuffer(n.bufferIndex,i)),_=this.rbInsertRight(e,g);this.validateCRLFWithPrevNode(_)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=Ff(t,!1);for(let _=0;_<r.length;_++)r[_]+=n;if(i){const _=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-_}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,h=e.piece.lineFeedCnt,d=this.getLineFeedCnt(0,e.piece.start,l),g=d-h;e.piece=new Ea(e.piece.bufferIndex,e.piece.start,l,d,c),this._lastChangeBufferPos=l,Of(this,e,t.length,g)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==gt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){n+=t.size_left;const r={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==gt;)if(i.left!==gt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(r+t-1,o),nodeStartOffset:n}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2);if(r+t-1<=i.piece.length)return{node:i,remainder:r+t-1,nodeStartOffset:n};t-=i.piece.length-r;break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==gt;){if(i.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(i.piece.length>=t-1){const r=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:r}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===gt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,r=i[n]+t.start.column;return n===i.length-1||i[n+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===gt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Ea(e.piece.bufferIndex,e.piece.start,r,a,o),Of(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Ea(t.piece.bufferIndex,l,t.piece.end,h,c),Of(this,t,-1,-1),t.piece.length===0&&i.push(t);const d=this.createNewPieces(`\r
`);this.rbInsertRight(e,d[0]);for(let g=0;g<i.length;g++)IT(this,i[g])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)IT(this,i);else{const n=i.piece,r={line:n.start.line+1,column:0},o=n.length-1,a=this.getLineFeedCnt(n.bufferIndex,r,n.end);i.piece=new Ea(n.bufferIndex,r,n.end,a,o),Of(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===gt)return t(gt);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===gt)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),r=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new G7(t,1);if(i.left=gt,i.right=gt,i.parent=gt,i.size_left=0,i.lf_left=0,this.root===gt)this.root=i,i.color=0;else if(e.right===gt)e.right=i,i.parent=e;else{const r=mB(e.right);r.left=i,i.parent=r}return _z(this,i),i}rbInsertLeft(e,t){const i=new G7(t,1);if(i.left=gt,i.right=gt,i.parent=gt,i.size_left=0,i.lf_left=0,this.root===gt)this.root=i,i.color=0;else if(e.left===gt)e.left=i,i.parent=e;else{const n=qY(e.left);n.right=i,i.parent=n}return _z(this,i),i}}class Bw extends pe{constructor(e,t,i,n,r,o,a){super(),this._onDidChangeContent=this._register(new ne),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=r,this._pieceTree=new eme(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),r=this.getPositionAt(i);return new ie(n.lineNumber,n.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;r=l*c}return n-i+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,r=e.endLineNumber;for(let o=n;o<=r;o++){const a=this.getLineContent(o),l=o===n?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let h=l;h<c;h++)xs(a.charCodeAt(h))?(i=i+1,h=h+1):i=i+1}return i+=this._getEndOfLine(t).length*(r-n),i}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Pa(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=I0(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let C=0;C<e.length;C++){const S=e[C];a&&S._isTracked&&(a=!1);const E=S.range;if(S.text){let P=!0;o||(P=!oP(S.text),o=P),!n&&P&&(n=mx(S.text)),!r&&P&&(r=rG(S.text))}let x="",T=0,N=0,A=0;if(S.text){let P;[T,N,A,P]=mC(S.text);const O=this.getEOL();P===0||P===(O===`\r
`?2:1)?x=S.text:x=S.text.replace(/\r\n|\r|\n/g,O)}l[C]={sortIndex:C,identifier:S.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:x,eolCount:T,firstLineLength:N,lastLineLength:A,forceMoveMarkers:!!S.forceMoveMarkers,isAutoWhitespaceEdit:S.isAutoWhitespaceEdit||!1}}l.sort(Bw._sortOpsAscending);let c=!1;for(let C=0,S=l.length-1;C<S;C++){const E=l[C].range.getEndPosition(),x=l[C+1].range.getStartPosition();if(x.isBeforeOrEqual(E)){if(x.isBefore(E))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const h=i||t?Bw._getInverseEditRanges(l):[],d=[];if(t)for(let C=0;C<l.length;C++){const S=l[C],E=h[C];if(S.isAutoWhitespaceEdit&&S.range.isEmpty())for(let x=E.startLineNumber;x<=E.endLineNumber;x++){let T="";x===E.startLineNumber&&(T=this.getLineContent(S.range.startLineNumber),Pa(T)!==-1)||d.push({lineNumber:x,oldContent:T})}}let g=null;if(i){let C=0;g=[];for(let S=0;S<l.length;S++){const E=l[S],x=h[S],T=this.getValueInRange(E.range),N=E.rangeOffset+C;C+=E.text.length-T.length,g[S]={sortIndex:E.sortIndex,identifier:E.identifier,range:x,text:T,textChange:new wr(E.rangeOffset,T,N,E.text)}}c||g.sort((S,E)=>S.sortIndex-E.sortIndex)}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const _=this._doApplyEdits(l);let b=null;if(t&&d.length>0){d.sort((C,S)=>S.lineNumber-C.lineNumber),b=[];for(let C=0,S=d.length;C<S;C++){const E=d[C].lineNumber;if(C>0&&d[C-1].lineNumber===E)continue;const x=d[C].oldContent,T=this.getLineContent(E);T.length===0||T===x||Pa(T)!==-1||b.push(E)}}return this._onDidChangeContent.fire(),new poe(g,_,b)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,r=new ie(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let o=i.startLineNumber,a=i.startColumn;const l=[];for(let _=0,b=e.length;_<b;_++){const C=e[_],S=C.range;t=t||C.forceMoveMarkers,l.push(this.getValueInRange(new ie(o,a,S.startLineNumber,S.startColumn))),C.text.length>0&&l.push(C.text),o=S.endLineNumber,a=S.endColumn}const c=l.join(""),[h,d,g]=mC(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:h,firstLineLength:d,lastLineLength:g,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Bw._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],r=n.range.startLineNumber,o=n.range.startColumn,a=n.range.endLineNumber,l=n.range.endColumn;if(r===a&&o===l&&n.text.length===0)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const c=new ie(r,o,a,l);t.push({range:c,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}static _getInverseEditRanges(e){const t=[];let i=0,n=0,r=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,h;r?r.range.endLineNumber===l.range.startLineNumber?(c=i,h=n+(l.range.startColumn-r.range.endColumn)):(c=i+(l.range.startLineNumber-r.range.endLineNumber),h=l.range.startColumn):(c=l.range.startLineNumber,h=l.range.startColumn);let d;if(l.text.length>0){const g=l.eolCount+1;g===1?d=new ie(c,h,c,h+l.firstLineLength):d=new ie(c,h,c+g-1,l.lastLineLength+1)}else d=new ie(c,h,c,h);i=d.endLineNumber,n=d.endColumn,t.push(d),r=l}return t}static _sortOpsAscending(e,t){const i=ie.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=ie.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class tme{constructor(e,t,i,n,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=i.length;r<o;r++){const a=i[r].buffer.replace(/\r\n|\r|\n/g,t),l=Ff(a);i[r]=new l1(a,l)}const n=new Bw(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}}class jY{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&lP(e)&&(this.BOM=Uie,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=Xge(this._tmpLineStarts,e);this.chunks.push(new l1(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=mx(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=rG(e)))}finish(e=!0){return this._finish(),new tme(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Ff(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class ime{constructor(){this._onDidChangeVisibleRanges=new ne,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set,this._viewsChanged=wx(this),this.visibleLineRanges=Sd({owner:this,equalsFn:L3(Sne())},e=>(this._viewsChanged.read(e),dt.joinMany([...this._views].map(i=>i.state.read(e)?.visibleLineRanges??[]))))}attachView(){const e=new sme(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),this._viewsChanged.trigger(void 0),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0}),this._viewsChanged.trigger(void 0)}}class nme{constructor(e,t){this.visibleLineRanges=e,this.stabilized=t}equals(e){return this===e?!0:!(!vs(this.visibleLineRanges,e.visibleLineRanges,(t,i)=>t.equals(i))||this.stabilized!==e.stabilized)}}class sme{get state(){return this._state}constructor(e){this.handleStateChange=e,this._state=lL({owner:this,equalsFn:WS((t,i)=>t.equals(i))},void 0)}setVisibleLines(e,t){const i=e.map(r=>new dt(r.startLineNumber,r.endLineNumber+1)),n=new nme(i,t);this._state.set(n,void 0,void 0),this.handleStateChange(n)}}class rme extends pe{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Or(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){vs(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class GY extends pe{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t){super(),this._languageIdCodec=e,this._textModel=t,this._onDidChangeTokens=this._register(new ne),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}function ome(s,e){const t=s.gotoNextSibling(),i=e.gotoNextSibling();if(t!==i)throw new Error("Trees are out of sync");return t&&i}function KY(s,e){const t=s.gotoParent(),i=e.gotoParent();if(t!==i)throw new Error("Trees are out of sync");return t&&i}function ame(s,e,t){const i=s.gotoFirstChild(),n=e.gotoFirstChild();if(i!==n)throw new Error("Trees are out of sync");if(t===0)return i&&n;for(let r=1;r<=t;r++){const o=s.gotoNextSibling(),a=e.gotoNextSibling();if(o!==a)throw new Error("Trees are out of sync");if(!o||!a)return!1}return i&&n}function bz(s,e){do{if(s.currentNode.nextSibling)return ome(s,e);s.currentNode.parent&&KY(s,e)}while(s.currentNode.nextSibling||s.currentNode.parent);return!1}function lme(s,e){const t=e.walk();t.resetTo(s);const i=s.currentNode;do if(t.currentNode.previousSibling&&t.currentNode.endIndex-t.currentNode.startIndex!==0)t.gotoPreviousSibling();else{for(;!t.currentNode.previousSibling&&t.currentNode.parent;)t.gotoParent();t.gotoPreviousSibling()}while(t.currentNode.endIndex>i.startIndex&&(t.currentNode.parent||t.currentNode.previousSibling)&&t.currentNode.id!==i.id);if(t.currentNode.id!==i.id&&t.currentNode.endIndex<=i.startIndex)return t.currentNode}var cme=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},vz=function(s,e){return function(t,i){e(t,i,s)}};let K7=class extends pe{constructor(e,t,i,n,r,o,a){super(),this.languageId=e,this._ranges=t,this._parser=i,this._parserClass=n,this.textModel=r,this._logService=o,this._telemetryService=a,this._tree=xt(this,void 0),this.tree=this._tree,this._treeLastParsedVersion=xt(this,-1),this.treeLastParsedVersion=this._treeLastParsedVersion,this._onDidChangeContentQueue=new one,this._tree=xt(this,void 0),this.tree=this._tree,this._register(lt(()=>{this._tree.get()?.delete(),this._lastFullyParsed?.delete(),this._lastFullyParsedWithEdits?.delete(),this._parser.delete()})),this.handleContentChange(void 0,this._ranges)}handleContentChange(e,t){const i=this.textModel.getVersionId();let n=[];t&&(n=this._setRanges(t)),e&&this._applyEdits(e.changes),this._onDidChangeContentQueue.clearPending(),this._onDidChangeContentQueue.schedule(async()=>{if(this._store.isDisposed)return;const r=this._lastFullyParsed;let o;this._lastFullyParsedWithEdits&&this._lastFullyParsed&&(o=this._findChangedNodes(this._lastFullyParsedWithEdits,this._lastFullyParsed));const a=await this._parseAndUpdateTree(i);if(a){let l;o?r&&o&&(l=this._findTreeChanges(a,o,n)):this._ranges&&(l=this._ranges.map(h=>({newRange:new ie(h.startPosition.row+1,h.startPosition.column+1,h.endPosition.row+1,h.endPosition.column+1),oldRangeLength:h.endIndex-h.startIndex,newRangeStartOffset:h.startIndex,newRangeEndOffset:h.endIndex}))),l||(l=[{newRange:this.textModel.getFullModelRange(),newRangeStartOffset:0,newRangeEndOffset:this.textModel.getValueLength()}]);const c=this._tree.get();Un(h=>{this._tree.set(a,h,{ranges:l,versionId:i}),this._treeLastParsedVersion.set(i,h)}),c?.delete()}})}_applyEdits(e){for(const t of e){const i=Ha.ofRange(ie.lift(t.range)),n=Ha.ofText(t.text),r=t.text.length===0?n:i.add(n),o={startIndex:t.rangeOffset,oldEndIndex:t.rangeOffset+t.rangeLength,newEndIndex:t.rangeOffset+t.text.length,startPosition:{row:t.range.startLineNumber-1,column:t.range.startColumn-1},oldEndPosition:{row:t.range.endLineNumber-1,column:t.range.endColumn-1},newEndPosition:{row:t.range.startLineNumber+r.lineCount-1,column:r.lineCount?r.columnCount:t.range.endColumn+r.columnCount}};this._tree.get()?.edit(o),this._lastFullyParsedWithEdits?.edit(o)}}_findChangedNodes(e,t){if(this._ranges&&this._ranges.every(a=>a.startPosition.row!==e.rootNode.startPosition.row)||e.rootNode.startPosition.row!==0)return[];const i=e.walk(),n=t.walk(),r=[];let o=!0;do if(i.currentNode.hasChanges){const a=i.currentNode.children,l=[],c=a.filter((h,d)=>h?.hasChanges||n.currentNode.children.length<=d?(l.push(d),!0):!1);if(c.length===0||i.currentNode.hasError!==n.currentNode.hasError){for(;i.currentNode.parent&&o&&!i.currentNode.isNamed;)o=KY(i,n);const h=i.currentNode,d=lme(i,e)??h;r.push({startIndex:d.startIndex,endIndex:h.endIndex,startPosition:d.startPosition,endPosition:h.endPosition}),o=bz(i,n)}else c.length>=1&&(o=ame(i,n,l[0]))}else o=bz(i,n);while(o);return i.delete(),n.delete(),r}_findTreeChanges(e,t,i){let n=0;const r=[];for(let o=0;o<t.length;o++){const a=t[o];if(r.length>0&&a.startIndex>=r[r.length-1].newRangeStartOffset&&a.endIndex<=r[r.length-1].newRangeEndOffset)continue;const l=e.walk(),c=()=>l.startIndex<a.startIndex&&l.endIndex>a.endIndex;for(;c();){let C=l.gotoFirstChild(),S=!1;for(;C;)if(c()&&l.currentNode.isNamed){S=!0;break}else C=l.gotoNextSibling();if(!S){l.gotoParent();break}if(l.currentNode.childCount===0)break}const h=l.currentNode.startPosition,d=l.currentNode.endPosition,g=l.currentNode.startIndex,_=l.currentNode.endIndex,b={newRange:new ie(h.row+1,h.column+1,d.row+1,d.column+1),newRangeStartOffset:g,newRangeEndOffset:_};n<i.length&&wz(i[n],{startIndex:g,endIndex:_})?(i[n].startIndex<b.newRangeStartOffset&&(b.newRange=b.newRange.setStartPosition(i[n].startPosition.row+1,i[n].startPosition.column+1),b.newRangeStartOffset=i[n].startIndex),i[n].endIndex>b.newRangeEndOffset&&(b.newRange=b.newRange.setEndPosition(i[n].endPosition.row+1,i[n].endPosition.column+1),b.newRangeEndOffset=i[n].endIndex),n++):n<i.length&&i[n].endIndex<b.newRangeStartOffset&&r.push({newRange:new ie(i[n].startPosition.row+1,i[n].startPosition.column+1,i[n].endPosition.row+1,i[n].endPosition.column+1),newRangeStartOffset:i[n].startIndex,newRangeEndOffset:i[n].endIndex}),r.length>0&&r[r.length-1].newRangeEndOffset>=b.newRangeStartOffset?(r[r.length-1].newRange=ie.fromPositions(r[r.length-1].newRange.getStartPosition(),b.newRange.getEndPosition()),r[r.length-1].newRangeEndOffset=b.newRangeEndOffset):r.push(b)}return this._constrainRanges(r)}_constrainRanges(e){if(!this._ranges)return e;const t=[];let i=0,n=0;for(;i<e.length&&n<this._ranges.length;){const r=e[i],o=this._ranges[n];if(r.newRangeEndOffset<o.startIndex)i++;else if(r.newRangeStartOffset>o.endIndex)n++;else{const a=Math.max(r.newRangeStartOffset,o.startIndex),l=Math.min(r.newRangeEndOffset,o.endIndex),c=r.newRange.intersectRanges(new ie(o.startPosition.row+1,o.startPosition.column+1,o.endPosition.row+1,o.endPosition.column+1));t.push({newRange:c,newRangeEndOffset:l,newRangeStartOffset:a}),l<r.newRangeEndOffset?(r.newRange=ie.fromPositions(c.getEndPosition(),r.newRange.getEndPosition()),r.newRangeStartOffset=l+1):i++}}return t}async _parseAndUpdateTree(e){const t=await this._parse();if(t)return this._lastFullyParsed?.delete(),this._lastFullyParsed=t.copy(),this._lastFullyParsedWithEdits?.delete(),this._lastFullyParsedWithEdits=t.copy(),t;this._tree.get()||this._parser.reset()}_parse(){let e="fullParse";return this._tree.get()&&(e="incrementalParse"),this._parseAndYield(e)}async _parseAndYield(e){let t=0,i=0;const n=this.textModel.getVersionId();let r;const o=ume();do{const a=performance.now();r=this._parser.parse((l,c)=>this._parseCallback(l),this._tree.get(),{progressCallback:o,includedRanges:this._ranges}),t+=performance.now()-a,i++,await new Promise(l=>jA(l))}while(!this._store.isDisposed&&!r&&n===this.textModel.getVersionId());return this._sendParseTimeTelemetry(e,t,i),r&&n===this.textModel.getVersionId()?r:void 0}_parseCallback(e){try{return this.textModel.getTextBuffer().getNearestChunk(e)}catch(t){this._logService.debug("Error getting chunk for tree-sitter parsing",t)}}_setRanges(e){const t=[];if(this._ranges)for(const i of e){let n=!1;for(let r=0;r<this._ranges.length;r++){const o=this._ranges[r];if(hme(o,i)||wz(o,i)){n=!0;break}}n||t.push(i)}else t.push(...e);return this._ranges=e,t}_sendParseTimeTelemetry(e,t,i){this._logService.debug(`Tree parsing (${e}) took ${t} ms and ${i} passes.`),e==="fullParse"?this._telemetryService.publicLog2("treeSitter.fullParse",{languageId:this.languageId,time:t,passes:i}):this._telemetryService.publicLog2("treeSitter.incrementalParse",{languageId:this.languageId,time:t,passes:i})}createParsedTreeSync(e){const t=new this._parserClass;t.setLanguage(this._parser.language);const i=t.parse(e);return t.delete(),i??void 0}};K7=cme([vz(5,Lo),vz(6,Sg)],K7);function ume(){let s=performance.now();return function(t){const i=performance.now();return i-s>50?(s=i,!0):!1}}function hme(s,e){return s.startPosition.row===e.startPosition.row&&s.startPosition.column===e.startPosition.column&&s.endPosition.row===e.endPosition.row&&s.endPosition.column===e.endPosition.column&&s.startIndex===e.startIndex&&s.endIndex===e.endIndex}function wz(s,e){return s.startIndex<=e.startIndex&&s.endIndex>=e.startIndex||e.startIndex<=s.startIndex&&e.endIndex>=s.startIndex}class dme{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const n=this._store.slice(0,e),r=this._store.slice(e+t),o=fme(i,this._default);this._store=n.concat(o,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let n=0;n<t;n++)i[n]=this._default;this._store=qA(this._store,e,i)}}function fme(s,e){const t=[];for(let i=0;i<s;i++)t[i]=e;return t}class gme{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class Y7{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new gme(e,[t]))}finalize(){return this._tokens}}class mme{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new Z7(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class pme extends mme{constructor(e,t,i,n){super(e,t),this._textModel=i,this._languageIdCodec=n}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const n=this.getFirstInvalidLine();if(!n||n.lineNumber>t)break;const r=this._textModel.getLineContent(n.lineNumber),o=SS(this._languageIdCodec,i,this.tokenizationSupport,r,!0,n.startState);e.add(n.lineNumber,o.tokens),this.store.setEndState(n.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const n=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),o=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=SS(this._languageIdCodec,n,this.tokenizationSupport,o,!0,i),l=new Ts(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLinesAt(e,t){const i=this.getStartState(e);if(!i)return null;const n=this._textModel.getLanguageId(),r=[];let o=i;for(const a of t){const l=SS(this._languageIdCodec,n,this.tokenizationSupport,a,!0,o);r.push(new Ts(l.tokens,a,this._languageIdCodec)),o=l.endState}return r}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let n=this.guessStartState(t);const r=this._textModel.getLanguageId();for(let o=t;o<=i;o++){const a=this._textModel.getLineContent(o),l=SS(this._languageIdCodec,r,this.tokenizationSupport,a,!0,n);e.add(o,l.tokens),n=l.endState}return{heuristicTokens:!0}}guessStartState(e){let{likelyRelevantLines:t,initialState:i}=YY(this._textModel,e,this);i||(i=this.tokenizationSupport.getInitialState());const n=this._textModel.getLanguageId();let r=i;for(const o of t)r=SS(this._languageIdCodec,n,this.tokenizationSupport,o,!1,r).endState;return r}}function YY(s,e,t){let i=s.getLineFirstNonWhitespaceColumn(e);const n=[];let r=null;for(let o=e-1;i>1&&o>=1;o--){const a=s.getLineFirstNonWhitespaceColumn(o);if(a!==0&&a<i&&(n.push(s.getLineContent(o)),i=a,r=t?.getStartState(o),r))break}return n.reverse(),{likelyRelevantLines:n,initialState:r??void 0}}class Z7{constructor(e){this.lineCount=e,this._tokenizationStateStore=new _me,this._invalidEndStatesLineNumbers=new bme,this._invalidEndStatesLineNumbers.addRange(new it(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new at("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new it(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new it(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=mC(t.text);this.acceptChange(new dt(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new it(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new at("Start state must be defined");return{lineNumber:t,startState:i}}}class _me{constructor(){this._lineEndStates=new dme(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class bme{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new it(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new it(i.start,e):this._ranges.splice(t,1,new it(i.start,e),new it(e+1,i.endExclusive))}}addRange(e){it.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let n=i;for(;!(n>=this._ranges.length||e.endExclusive<this._ranges[n].start);)n++;const r=t-e.length;for(let o=n;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(r);if(i===n){const o=new it(e.start,e.start+t);o.isEmpty||this._ranges.splice(i,0,o)}else{const o=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[n-1].endExclusive),l=new it(o,a+r);l.isEmpty?this._ranges.splice(i,n-i):this._ranges.splice(i,n-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function SS(s,e,t,i,n,r){let o=null;if(t)try{o=t.tokenizeEncoded(i,n,r.clone())}catch(a){mi(a)}return o||(o=FP(s.encodeLanguageId(e),r)),Ts.convertToEndOffset(o.tokens,i.length),o}class vme{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,uP(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?jA(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new Y7,i=bg.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){const t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new dt(e,t))}}class w0{get children(){return this._children}get length(){return this._length}constructor(e){this.height=e,this._children=[],this._length=0}static create(e,t){const i=new w0(e.height+1);return i.appendChild(e),i.appendChild(t),i}canAppendChild(){return this._children.length<3}appendChild(e){if(!this.canAppendChild())throw new Error("Cannot insert more than 3 children in a ListNode");this._children.push(e),this._length+=e.length,this._updateParentLength(e.length),ho(e)||(e.parent=this)}_updateParentLength(e){let t=this.parent;for(;t;)t._length+=e,t=t.parent}unappendChild(){const e=this._children.pop();return this._length-=e.length,this._updateParentLength(-e.length),e}prependChild(e){if(this._children.length>=3)throw new Error("Cannot prepend more than 3 children in a ListNode");this._children.unshift(e),this._length+=e.length,this._updateParentLength(e.length),ho(e)||(e.parent=this)}unprependChild(){const e=this._children.shift();return this._length-=e.length,this._updateParentLength(-e.length),e}lastChild(){return this._children[this._children.length-1]}dispose(){this._children.splice(0,this._children.length)}}var wl;(function(s){s[s.None=0]="None",s[s.ViewportGuess=1]="ViewportGuess",s[s.EditGuess=2]="EditGuess",s[s.Accurate=3]="Accurate"})(wl||(wl={}));function ho(s){return s.token!==void 0}function ZY(s,e){let t=s;const i=[];let n;for(;;){if(e.height===t.height){n=e;break}if(ho(t))throw new Error("unexpected");i.push(t),t=t.lastChild()}for(let r=i.length-1;r>=0;r--){const o=i[r];n&&(o.children.length>=3?n=w0.create(o.unappendChild(),n):(o.appendChild(n),n=void 0))}if(n){const r=new w0(n.height+1);return r.appendChild(s),r.appendChild(n),r}else return s}function wme(s,e){let t=s;const i=[];for(;e.height!==t.height;){if(ho(t))throw new Error("unexpected");i.push(t),t=t.children[0]}let n=e;for(let r=i.length-1;r>=0;r--){const o=i[r];n&&(o.children.length>=3?n=w0.create(n,o.unprependChild()):(o.prependChild(n),n=void 0))}return n?w0.create(n,s):s}function Cme(s,e){return s.height===e.height?w0.create(s,e):s.height>e.height?ZY(s,e):wme(e,s)}class yme{constructor(e){this._textModel=e,this._root=this.createEmptyRoot()}createEmptyRoot(){return{length:this._textModel.getValueLength(),token:0,height:0,tokenQuality:wl.None}}buildStore(e,t){this._root=this.createFromUpdates(e,t)}createFromUpdates(e,t){if(e.length===0)return this.createEmptyRoot();let i={length:e[0].length,token:e[0].token,height:0,tokenQuality:t};for(let n=1;n<e.length;n++)i=ZY(i,{length:e[n].length,token:e[n].token,height:0,tokenQuality:t});return i}update(e,t,i){t.length!==0&&this.replace(e,t[0].startOffsetInclusive,t,i)}delete(e,t){this.replace(e,t,[],wl.EditGuess)}replace(e,t,i,n){const r=t+e,o=[],a=[],l=[{node:this._root,offset:0}];for(;l.length>0;){const d=l.pop(),g=d.offset;if(g<t&&g+d.node.length<=t){ho(d.node)||(d.node.parent=void 0),o.push(d.node);continue}else ho(d.node)&&g<t&&o.push({length:t-g,token:d.node.token,height:0,tokenQuality:d.node.tokenQuality});if(!(t<=g&&g+d.node.length<=r)){if(g>=r){ho(d.node)||(d.node.parent=void 0),a.push(d.node);continue}else if(ho(d.node)&&g+d.node.length>r){a.push({length:g+d.node.length-r,token:d.node.token,height:0,tokenQuality:d.node.tokenQuality});continue}if(!ho(d.node)){let _=g+d.node.length;for(let b=d.node.children.length-1;b>=0;b--)_-=d.node.children[b].length,l.push({node:d.node.children[b],offset:_})}}}let c;i.length>0?c=o.concat(this.createFromUpdates(i,n),a):c=o.concat(a);let h=c[0];for(let d=1;d<c.length;d++)h=Cme(h,c[d]);this._root=h??this.createEmptyRoot()}traverseInOrderInRange(e,t,i){const n=[{node:this._root,offset:0}];for(;n.length>0;){const{node:r,offset:o}=n.pop();if(!(o+r.length<=e||o>=t)){if(i(r,o))return;if(!ho(r)){let l=o+r.length;for(let c=r.children.length-1;c>=0;c--)l-=r.children[c].length,n.push({node:r.children[c],offset:l})}}}}getTokenAt(e){let t;return this.traverseInOrderInRange(e,this._root.length,(i,n)=>ho(i)?(t={token:i.token,startOffsetInclusive:n,length:i.length},!0):!1),t}getTokensInRange(e,t){const i=[];return this.traverseInOrderInRange(e,t,(n,r)=>{if(ho(n)){let o=n.length,a=r;r<e&&r+n.length>t?(a=e,o=t-e):r<e?(o-=e-r,a=e):r+n.length>t&&(o-=r+n.length-t),i.push({token:n.token,startOffsetInclusive:a,length:o})}return!1}),i}markForRefresh(e,t){this.traverseInOrderInRange(e,t,i=>(ho(i)&&(i.tokenQuality=wl.None),!1))}rangeHasTokens(e,t,i){let n=!0;return this.traverseInOrderInRange(e,t,r=>(ho(r)&&r.tokenQuality<i&&(n=!1),!1)),n}rangeNeedsRefresh(e,t){let i=!1;return this.traverseInOrderInRange(e,t,n=>(ho(n)&&n.tokenQuality!==wl.Accurate&&(i=!0),!1)),i}getNeedsRefresh(){const e=[];return this.traverseInOrderInRange(0,this._textModel.getValueLength(),(t,i)=>(ho(t)&&t.tokenQuality!==wl.Accurate&&(e.length>0&&e[e.length-1].endOffset===i?e[e.length-1].endOffset+=t.length:e.push({startOffset:i,endOffset:i+t.length})),!1)),e}dispose(){const e=[[this._root,!1]];for(;e.length>0;){const[t,i]=e.pop();if(!ho(t))if(i)t.dispose(),t.parent=void 0;else{e.push([t,!0]);for(let n=t.children.length-1;n>=0;n--)e.push([t.children[n],!1])}}this._root=void 0}}const Sme=At("treeSitterThemeService");var Lme=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},xme=function(s,e){return function(t,i){e(t,i,s)}};let X7=class extends pe{get _textModel(){return this._tree.textModel}constructor(e,t,i,n,r){super(),this._tree=e,this._highlightingQueries=t,this._languageIdCodec=i,this._visibleLineRanges=n,this._treeSitterThemeService=r,this._onDidChangeTokens=this._register(new ne),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidCompleteBackgroundTokenization=this._register(new ne),this.onDidChangeBackgroundTokenization=this._onDidCompleteBackgroundTokenization.event,this._encodedLanguageId=this._languageIdCodec.encodeLanguageId(this._tree.languageId),this._register(cL(this._treeSitterThemeService.onChange,()=>{this._updateTheme()})),this._tokenStore=this._register(new yme(this._textModel)),this._accurateVersion=this._textModel.getVersionId(),this._guessVersion=this._textModel.getVersionId(),this._tokenStore.buildStore(this._createEmptyTokens(),wl.None),this._register(qt(o=>{const a=this._visibleLineRanges.read(o);this._parseAndTokenizeViewPort(a)})),this._register(EC({owner:this,changeTracker:Fne({tree:this._tree.tree})},(o,a)=>{const l=a.changes.at(0)?.change;if(a.changes.length>1)throw new at("The tree changed twice in one transaction. This is currently not supported and should not happen.");if(!l)a.tree&&this._firstTreeUpdate(this._tree.treeLastParsedVersion.read(o));else{if(this.hasTokens())for(const c of l.ranges)this._markForRefresh(c.newRange);this.hasTokens()?this._handleTreeUpdate(l.ranges,l.versionId):this._firstTreeUpdate(l.versionId)}}))}handleContentChanged(e){this._guessVersion=e.versionId;for(const t of e.changes)if(t.text.length>t.rangeLength){const i=t.rangeOffset>0?t.rangeOffset-1:t.rangeOffset,n=this._tokenStore.getTokenAt(i);let r;n?(r={startOffsetInclusive:n.startOffsetInclusive,length:n.length+t.text.length-t.rangeLength,token:n.token},this._tokenStore.markForRefresh(i,t.rangeOffset+(t.text.length>t.rangeLength?t.text.length:t.rangeLength))):r={startOffsetInclusive:i,length:t.text.length,token:0},this._tokenStore.update(n?.length??0,[r],wl.EditGuess)}else if(t.text.length<t.rangeLength){const i=t.rangeLength-t.text.length;this._tokenStore.delete(i,t.rangeOffset)}}getLineTokens(e){const t=this._textModel.getLineContent(e),i=this.getTokens(e);return new Ts(i,t,this._languageIdCodec)}_createEmptyTokens(){const e=this._emptyToken(),t=this._textModel.getValueLength();return[this._emptyTokensForOffsetAndLength(0,t,e)]}_emptyToken(){return this._treeSitterThemeService.findMetadata([],this._encodedLanguageId,!1,void 0)}_emptyTokensForOffsetAndLength(e,t,i){return{token:i,length:e+t,startOffsetInclusive:0}}hasAccurateTokensForLine(e){return this.hasTokens(new ie(e,1,e,this._textModel.getLineMaxColumn(e)))}tokenizeLinesAt(e,t){const i=this._guessTokensForLinesContent(e,t),n=[];if(!i)return null;for(let r=0;r<i.length;r++)n.push(new Ts(i[r],t[r],this._languageIdCodec));return n}_rangeHasTokens(e,t){return this._tokenStore.rangeHasTokens(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()),t)}hasTokens(e){return!e||this._guessVersion===this._accurateVersion?!0:!this._tokenStore.rangeNeedsRefresh(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()))}getTokens(e){const t=this._textModel.getOffsetAt({lineNumber:e,column:1}),i=this._textModel.getOffsetAt({lineNumber:e,column:this._textModel.getLineLength(e)+1}),n=this._tokenStore.getTokensInRange(t,i),r=new Uint32Array(n.length*2);for(let o=0;o<n.length;o++)r[o*2]=n[o].startOffsetInclusive-t+n[o].length,r[o*2+1]=n[o].token;return r}getTokensInRange(e,t,i,n){const r=n?this._tokenizeCapturesWithMetadata(n,t,i):this._tokenize(e,t,i);if(r?.endOffsetsAndMetadata)return this._rangeTokensAsUpdates(t,r.endOffsetsAndMetadata)}_updateTokensInStore(e,t,i){this._accurateVersion=e;for(const n of t){const r=n.newTokens.length>0?n.newTokens[n.newTokens.length-1]:void 0;let o;r&&this._guessVersion>=e?o=r.startOffsetInclusive+r.length-n.newTokens[0].startOffsetInclusive:n.oldRangeLength?o=n.oldRangeLength:o=0,this._tokenStore.update(o,n.newTokens,i)}}_markForRefresh(e){this._tokenStore.markForRefresh(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()))}_getNeedsRefresh(){const e=this._tokenStore.getNeedsRefresh();return e?e.map(t=>({range:ie.fromPositions(this._textModel.getPositionAt(t.startOffset),this._textModel.getPositionAt(t.endOffset)),startOffset:t.startOffset,endOffset:t.endOffset})):[]}_parseAndTokenizeViewPort(e){const t=e.map(i=>i.toInclusiveRange()).filter(dc);for(const i of t){const n=this._textModel.getOffsetAt(i.getStartPosition()),r=this._textModel.getOffsetAt(i.getEndPosition()),o=this._textModel.getVersionId();if(this._rangeHasTokens(i,wl.ViewportGuess))continue;const a=this._textModel.getValueInRange(i),l=this._forceParseAndTokenizeContent(i,n,r,a,!0);if(!l||this._rangeHasTokens(i,wl.ViewportGuess)||l.length===0)continue;const c=l[l.length-1],h=c.startOffsetInclusive+c.length-l[0].startOffsetInclusive;this._updateTokensInStore(o,[{newTokens:l,oldRangeLength:h}],wl.ViewportGuess),this._onDidChangeTokens.fire({changes:{semanticTokensApplied:!1,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]}})}}_guessTokensForLinesContent(e,t){if(t.length===0)return;const i=t.join(this._textModel.getEOL()),n=new ie(1,1,e+t.length,t[t.length-1].length+1),r=this._textModel.getOffsetAt({lineNumber:e,column:1}),o=this._forceParseAndTokenizeContent(n,r,r+i.length,i,!1);if(!o)return;const a=new Array(t.length);let l=0,c=0,h=0;for(let d=0;d<t.length;d++){const g=[];let _=!1;for(let b=l;!_&&b<o.length;b++){const C=o[b],S=C.endOffset-h,E=c-h;if(S<=t[d].length)g.push({endOffset:S,metadata:C.metadata}),l++;else if(E<t[d].length){const x={endOffset:t[d].length,metadata:C.metadata};g.push(x),_=!0}else _=!0;c=C.endOffset}a[d]=this._endOffsetTokensToUint32Array(g),h+=t[d].length+this._textModel.getEOL().length}return a}_forceParseAndTokenizeContent(e,t,i,n,r){const o=YY(this._textModel,e.startLineNumber).likelyRelevantLines,a=o.join(this._textModel.getEOL()),l=this._tree.createParsedTreeSync(`${a}${n}`);if(!l)return;const c=new ie(1,1,e.endLineNumber-e.startLineNumber+1+o.length,e.endColumn),h=this.captureAtRange(c),d=this._tokenizeCapturesWithMetadata(h,a.length,i-t+a.length);if(l.delete(),!!d)return r?this._rangeTokensAsUpdates(t,d.endOffsetsAndMetadata,a.length):d.endOffsetsAndMetadata}_firstTreeUpdate(e){return this._setViewPortTokens(e)}_setViewPortTokens(e){const t=this._visibleLineRanges.get().map(i=>{const n=i.toInclusiveRange();if(!n)return;const r=this._textModel.getOffsetAt(n.getStartPosition()),o=this._textModel.getOffsetAt(n.getEndPosition());return{newRange:n,newRangeEndOffset:o,newRangeStartOffset:r}}).filter(dc);return this._handleTreeUpdate(t,e)}_handleTreeUpdate(e,t){const i=[];for(let o=0;o<e.length;o++)if(e[o].newRange.endLineNumber-e[o].newRange.startLineNumber>1e3){const l=e[o].newRange.endLineNumber;let c=e[o].newRange.startLineNumber,h=e[o].newRange.startColumn,d=c+1e3;do{const g=new se(c,h),_=d===e[o].newRange.endLineNumber?e[o].newRange.endColumn:this._textModel.getLineMaxColumn(d),b=new se(d,_),C=ie.fromPositions(g,b);i.push({range:C,startOffset:this._textModel.getOffsetAt(C.getStartPosition()),endOffset:this._textModel.getOffsetAt(C.getEndPosition())}),c=d+1,h=1,d<l&&d+1e3>l?d=l:d=d+1e3}while(d<=l)}else if(o===0||i[o-1].endOffset<e[o].newRangeStartOffset)i.push({range:e[o].newRange,startOffset:e[o].newRangeStartOffset,endOffset:e[o].newRangeEndOffset});else if(i[o-1].endOffset<e[o].newRangeEndOffset){const l=this._textModel.getPositionAt(i[o-1].endOffset+1),c=new ie(l.lineNumber,l.column,e[o].newRange.endLineNumber,e[o].newRange.endColumn);i.push({range:c,startOffset:i[o-1].endOffset+1,endOffset:e[o].newRangeEndOffset})}const r=i.map(o=>this._getCaptures(o.range));return this._updateTreeForRanges(i,t,r).then(()=>{!this._textModel.isDisposed()&&this._tree.treeLastParsedVersion.get()===this._textModel.getVersionId()&&this._refreshNeedsRefresh(t)})}async _updateTreeForRanges(e,t,i){let n;for(let r=0;r<e.length&&!(!this._textModel.isDisposed()&&t!==this._textModel.getVersionId());r++){const o=i[r],a=e[r],l=this.getTokensInRange(a.range,a.startOffset,a.endOffset,o);l?n={newTokens:l}:n={newTokens:[]},this._updateTokensInStore(t,[n],wl.Accurate),this._onDidChangeTokens.fire({changes:{semanticTokensApplied:!1,ranges:[{fromLineNumber:a.range.getStartPosition().lineNumber,toLineNumber:a.range.getEndPosition().lineNumber}]}}),await new Promise(c=>jA(c))}this._onDidCompleteBackgroundTokenization.fire()}_refreshNeedsRefresh(e){const t=this._getNeedsRefresh();if(t.length===0)return;const i=new Array(t.length);for(let n=0;n<t.length;n++){const r=t[n];i[n]={newRange:r.range,newRangeStartOffset:r.startOffset,newRangeEndOffset:r.endOffset}}this._handleTreeUpdate(i,e)}_rangeTokensAsUpdates(e,t,i){const n=[];let r=0;for(const o of t){if(o.endOffset<=r||i&&o.endOffset<i)continue;let a;i&&r<i?a={startOffsetInclusive:e+i,length:o.endOffset-i,token:o.metadata}:a={startOffsetInclusive:e+r,length:o.endOffset-r,token:o.metadata},n.push(a),r=o.endOffset}return n}_updateTheme(){const e=this._textModel.getFullModelRange();this._markForRefresh(e),this._parseAndTokenizeViewPort(this._visibleLineRanges.get())}captureAtRange(e){const t=this._tree.tree.get();return t?this._highlightingQueries.captures(t.rootNode,{startPosition:{row:e.startLineNumber-1,column:e.startColumn-1},endPosition:{row:e.endLineNumber-1,column:e.endColumn-1}}).map(i=>({name:i.name,text:i.node.text,node:{startIndex:i.node.startIndex,endIndex:i.node.endIndex,startPosition:{lineNumber:i.node.startPosition.row+1,column:i.node.startPosition.column+1},endPosition:{lineNumber:i.node.endPosition.row+1,column:i.node.endPosition.column+1}},encodedLanguageId:this._encodedLanguageId})):[]}captureAtRangeWithInjections(e){const t=this.captureAtRange(e);for(let i=0;i<t.length;i++){const n=t[i],r=n.node.startPosition.lineNumber,o=n.node.endPosition.lineNumber,a=n.node.startPosition.column,l=n.node.endPosition.column,c=r>e.startLineNumber&&r<e.endLineNumber?r:e.startLineNumber,h=o>e.startLineNumber&&o<e.endLineNumber?o:e.endLineNumber,d=r===e.startLineNumber?a<e.startColumn?e.startColumn:a:r<e.startLineNumber?e.startColumn:a,g=o===e.endLineNumber?l>e.endColumn?e.endColumn:l:o>e.endLineNumber?e.endColumn:l,_=new ie(c,d,h,g),b=this._getInjectionCaptures(n,_);b&&b.length>0&&(t.splice(i+1,0,...b),i+=b.length)}return t}tokenizeEncoded(e){const t=this._tokenizeEncoded(e);if(!t)return;const i=this._rangeTokensAsUpdates(this._textModel.getOffsetAt({lineNumber:e,column:1}),t.result);t.versionId===this._textModel.getVersionId()&&this._updateTokensInStore(t.versionId,[{newTokens:i,oldRangeLength:this._textModel.getLineLength(e)}],wl.Accurate)}_getCaptures(e){return this.captureAtRangeWithInjections(e)}_tokenize(e,t,i){const n=this._getCaptures(e),r=this._tokenizeCapturesWithMetadata(n,t,i);if(r)return{...r,versionId:this._tree.treeLastParsedVersion.get()}}_createTokensFromCaptures(e,t,i){const n=this._tree.tree.get(),r=bg.create(),o=i-t,a=this._languageIdCodec.encodeLanguageId(this._tree.languageId),l=kme[this._tree.languageId]||"source";if(e.length===0)return n?(r.stop(),{endOffsets:[{endOffset:o,scopes:[],encodedLanguageId:a}],captureTime:r.elapsed()}):void 0;const c=Array(e.length);c.fill({endOffset:0,scopes:[l],encodedLanguageId:a});let h=0;const d=()=>{c.push({endOffset:0,scopes:[l],encodedLanguageId:a})},g=(C,S)=>C.name.includes("punctuation")&&C.text?Array.from(C.text.matchAll(Eme)).map(E=>S+E.index):void 0,_=(C,S,E,x)=>{if(x!==void 0){const T=c[x].scopes;let N=c[x].bracket;if((x>0?c[x-1].endOffset:0)!==S){let P;if(N&&N.length>0){P=[];const O=[];for(let V=0;V<N.length;V++){const U=N[V];U<S?P.push(U):U>E&&O.push(U)}P.length===0&&(P=void 0),O.length===0?N=void 0:N=O}c.splice(x,0,{endOffset:S,scopes:[...T],bracket:P,encodedLanguageId:C.encodedLanguageId}),x++,d(),h++}c.splice(x,0,{endOffset:E,scopes:[...T,C.name],bracket:g(C,S),encodedLanguageId:C.encodedLanguageId}),c[h].bracket=N}else c[h]={endOffset:E,scopes:[l,C.name],bracket:g(C,S),encodedLanguageId:C.encodedLanguageId};h++};for(let C=0;C<e.length;C++){const S=e[C],E=S.node.endIndex<i?S.node.endIndex<t?t:S.node.endIndex:i,x=S.node.startIndex<t?t:S.node.startIndex,T=E-t;let N;const A=E-x;C>0?N=c[h-1].endOffset:N=x-t-1;const P=T-A;if(N>=0&&N<P&&(c[h]={endOffset:P,scopes:[l],encodedLanguageId:this._encodedLanguageId},h++,d()),!(A<0))if(N>=T){let O=h-1,V=c[O].endOffset,U=O>=2?c[O-1].endOffset:0;do{if(U+A===V){if(U===P){c[O].scopes.push(S.name);const Y=c[O].bracket;c[O].bracket=Y&&Y.length>0?Y:g(S,P)}}else if(U<=P){_(S,P,T,O);break}O--,U=O>=1?c[O-1].endOffset:0,V=O>=0?c[O].endOffset:0}while(V>P)}else _(S,P,T)}c[h-1].endOffset<o&&o-c[h-1].endOffset>0&&(d(),c[h]={endOffset:o,scopes:c[h].scopes,encodedLanguageId:this._encodedLanguageId},h++);for(let C=0;C<c.length;C++)if(c[C].endOffset===0&&C!==0){c.splice(C,c.length-C);break}const b=r.elapsed();return{endOffsets:c,captureTime:b}}_getInjectionCaptures(e,t){return[]}_tokenizeCapturesWithMetadata(e,t,i){const n=bg.create(),r=this._createTokensFromCaptures(e,t,i);if(!r)return;const o=r.endOffsets;for(let l=0;l<o.length;l++){const c=o[l];c.metadata=this._treeSitterThemeService.findMetadata(c.scopes,c.encodedLanguageId,!!c.bracket&&c.bracket.length>0,void 0)}const a=n.elapsed();return{endOffsetsAndMetadata:o,captureTime:r.captureTime,metadataTime:a}}_tokenizeEncoded(e){const t=this._textModel.getOffsetAt({lineNumber:e,column:1}),i=this._textModel.getLineCount(),n=e+1<=i?this._textModel.getOffsetAt({lineNumber:e+1,column:1}):this._textModel.getValueLength(),r=n-t,o=this._tokenize(new ie(e,1,e,r+1),t,n);if(o)return{result:o.endOffsetsAndMetadata,captureTime:o.captureTime,metadataTime:o.metadataTime,versionId:o.versionId}}_endOffsetTokensToUint32Array(e){const t=new Uint32Array(e.length*2);for(let i=0;i<e.length;i++)t[i*2]=e[i].endOffset,t[i*2+1]=e[i].metadata;return t}};X7=Lme([xme(4,Sme)],X7);const kme={css:"source.css",typescript:"source.ts",ini:"source.ini",regex:"source.regex"},Eme=/[\{\}\[\]\<\>\(\)]/g,bB=At("treeSitterLibraryService");var Tme=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Cz=function(s,e){return function(t,i){e(t,i,s)}};let Q7=class extends GY{constructor(e,t,i,n,r,o){super(t,i),this._languageIdObs=e,this._treeSitterLibraryService=r,this._instantiationService=o,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new ne),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;const a=new Mne(this._treeSitterLibraryService.getParserClass()),l=Je(this,c=>a.promiseResult?.read(c)?.getDataOrThrow());this._tree=Je(this,c=>{const h=l.read(c);if(!h)return;const d=this._languageIdObs.read(c),g=this._treeSitterLibraryService.getLanguage(d,c);if(!g)return;const _=new h;if(c.store.add(lt(()=>{_.delete()})),_.setLanguage(g),this._treeSitterLibraryService.getInjectionQueries(d,c)!==void 0)return c.store.add(this._instantiationService.createInstance(K7,d,void 0,_,h,this._textModel))}),this._tokenizationImpl=Je(this,c=>{const h=this._tree.read(c);if(!h)return;const d=this._treeSitterLibraryService.getHighlightingQueries(h.languageId,c);if(d)return c.store.add(this._instantiationService.createInstance(X7,h,d,this._languageIdCodec,n))}),this._register(qt(c=>{const h=this._tokenizationImpl.read(c);h&&(c.store.add(h.onDidChangeTokens(d=>{this._onDidChangeTokens.fire(d.changes)})),c.store.add(h.onDidChangeBackgroundTokenization(d=>{this._backgroundTokenizationState=2,this._onDidChangeBackgroundTokenizationState.fire()})))}))}getLineTokens(e){const t=this._tokenizationImpl.get();if(!t){const i=this._textModel.getLineContent(e);return Ts.createEmpty(i,this._languageIdCodec)}return t.getLineTokens(e)}todo_resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush?this.todo_resetTokenization(!1):this._tokenizationImpl.get()?.handleContentChanged(e),this._tree.get()?.handleContentChange(e)}forceTokenization(e){const t=this._tokenizationImpl.get();t&&(t.hasAccurateTokensForLine(e)||t.tokenizeEncoded(e))}hasAccurateTokensForLine(e){const t=this._tokenizationImpl.get();return t?t.hasAccurateTokensForLine(e):!1}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLinesAt(e,t){const i=this._tokenizationImpl.get();return i?i.tokenizeLinesAt(e,t):null}get hasTokens(){const e=this._tokenizationImpl.get();return e?e.hasTokens():!1}};Q7=Tme([Cz(4,bB),Cz(5,Zt)],Q7);class vB{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t,i=void 0){if(this._pieces=e||[],this._isComplete=t,i)for(const n of this._pieces)n.reportIfInvalid(i)}setPartial(e,t){let i=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;i=e.plusRange(r).plusRange(o)}let n=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:r};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){n=n||{index:r};continue}const[l,c]=a.split(i);if(l.isEmpty()){n=n||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,n=n||{index:r})}return n=n||{index:this._pieces.length},t.length>0&&(this._pieces=qA(this._pieces,n.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getTextLength()===0)return t;const i=this._pieces;if(i.length===0)return t;const n=vB._findFirstPieceWithLine(i,e),r=i[n].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0;const c=[];let h=0,d=0;const g=(_,b)=>{_!==d&&(d=_,c[h++]=_,c[h++]=b)};for(let _=0;_<a;_++){const b=Math.min(r.getStartCharacter(_),t.getTextLength()),C=Math.min(r.getEndCharacter(_),t.getTextLength()),S=r.getMetadata(_),E=((S&1?2048:0)|(S&2?4096:0)|(S&4?8192:0)|(S&8?16384:0)|(S&16?16744448:0)|(S&32?4278190080:0))>>>0,x=~E>>>0;for(;l<o&&t.getEndOffset(l)<=b;)g(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<b&&g(b,t.getMetadata(l));l<o&&t.getEndOffset(l)<C;)g(t.getEndOffset(l),t.getMetadata(l)&x|S&E),l++;if(l<o)g(C,t.getMetadata(l)&x|S&E),t.getEndOffset(l)===C&&l++;else{const T=Math.min(Math.max(0,l-1),o-1);g(C,t.getMetadata(T)&x|S&E)}}for(;l<o;)g(t.getEndOffset(l),t.getMetadata(l)),l++;return new Ts(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,n=e.length-1;for(;i<n;){let r=i+Math.floor((n-i)/2);if(e[r].endLineNumber<t)i=r+1;else if(e[r].startLineNumber>t)n=r-1;else{for(;r>i&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return i}acceptEdit(e,t,i,n,r){for(const o of this._pieces)o.acceptEdit(e,t,i,n,r)}}const Vf=new Uint32Array(0).buffer;class ud{static deleteBeginning(e,t){return e===null||e===Vf?e:ud.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Vf)return e;const i=ng(e),n=i[i.length-2];return ud.delete(e,t,n)}static delete(e,t,i){if(e===null||e===Vf||t===i)return e;const n=ng(e),r=n.length>>>1;if(t===0&&n[n.length-2]===i)return Vf;const o=Ts.findIndexInTokensArray(n,t),a=o>0?n[o-1<<1]:0,l=n[o<<1];if(i<l){const _=i-t;for(let b=o;b<r;b++)n[b<<1]-=_;return e}let c,h;a!==t?(n[o<<1]=t,c=o+1<<1,h=t):(c=o<<1,h=a);const d=i-t;for(let _=o+1;_<r;_++){const b=n[_<<1]-d;b>h&&(n[c++]=b,n[c++]=n[(_<<1)+1],h=b)}if(c===n.length)return e;const g=new Uint32Array(c);return g.set(n.subarray(0,c),0),g.buffer}static append(e,t){if(t===Vf)return e;if(e===Vf)return t;if(e===null)return e;if(t===null)return null;const i=ng(e),n=ng(t),r=n.length>>>1,o=new Uint32Array(i.length+n.length);o.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<r;c++)o[a++]=n[c<<1]+l,o[a++]=n[(c<<1)+1];return o.buffer}static insert(e,t,i){if(e===null||e===Vf)return e;const n=ng(e),r=n.length>>>1;let o=Ts.findIndexInTokensArray(n,t);o>0&&n[o-1<<1]===t&&o--;for(let a=o;a<r;a++)n[a<<1]+=i;return e}}function ng(s){return s instanceof Uint32Array?s:new Uint32Array(s)}class $x{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let n=null;if(t<this._len&&(n=this._lineTokens[t]),n!==null&&n!==Vf)return new Ts(ng(n),i,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=i.length,r[1]=yz(this._languageIdCodec.encodeLanguageId(e)),new Ts(r,i,this._languageIdCodec)}static _massageTokens(e,t,i){const n=i?ng(i):null;if(t===0){let r=!1;if(n&&n.length>1&&(r=Cl.getLanguageId(n[1])!==e),!r)return Vf}if(!n||n.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=yz(e),r.buffer}return n[n.length-2]=t,n.byteOffset===0&&n.byteLength===n.buffer.byteLength?n.buffer:n}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let n=0;n<t;n++)i[n]=null;this._lineTokens=qA(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,n,r){const o=$x._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,n);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!$x._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=ng(e),n=ng(t);if(i.length!==n.length)return!1;for(let r=0,o=i.length;r<o;r++)if(i[r]!==n[r])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new se(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=ud.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=ud.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let n=null;i<this._len&&(n=ud.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=ud.append(this._lineTokens[t],n),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const n=e.lineNumber-1;if(!(n>=this._len)){if(t===0){this._lineTokens[n]=ud.insert(this._lineTokens[n],e.column-1,i);return}this._lineTokens[n]=ud.deleteEnding(this._lineTokens[n],e.column-1),this._lineTokens[n]=ud.insert(this._lineTokens[n],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];let a=0,l=0,c=!1;for(let h=o.startLineNumber;h<=o.endLineNumber;h++)c?(this.setTokens(t.getLanguageId(),h-1,t.getLineLength(h),o.getLineTokens(h),!1),l=h):this.setTokens(t.getLanguageId(),h-1,t.getLineLength(h),o.getLineTokens(h),!0)&&(c=!0,a=h,l=h);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function yz(s){return(s<<0|0|0|32768|2<<24|1024)>>>0}class Dme extends GY{constructor(e,t,i,n){super(e,t),this.getLanguageId=i,this._tokenizer=null,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new ne),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new qs),this._tokens=new $x(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new qs),this._attachedViewStates=this._register(new Z6),this._register(es.onDidChange(r=>{const o=this.getLanguageId();r.changedLanguages.indexOf(o)!==-1&&this.todo_resetTokenization()})),this.todo_resetTokenization(),this._register(n.onDidChangeVisibleRanges(({view:r,state:o})=>{if(o){let a=this._attachedViewStates.get(r);a||(a=new rme(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(r)}))}todo_resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new Z7(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=es.get(this.getLanguageId());if(!r)return[null,null];let o;try{o=r.getInitialState()}catch(a){return mi(a),[null,null]}return[r,o]},[i,n]=t();if(i&&n?this._tokenizer=new pme(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:o=>{this.setTokens(o)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const o=2;this._backgroundTokenizationState=o,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(o,a)=>{if(!this._tokenizer)return;const l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&o>=l&&this._tokenizer?.store.setEndState(o,a)}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new vme(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),i?.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new $x(this._languageIdCodec),this._debugBackgroundStates=new Z7(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:o=>{this._debugBackgroundTokens?.setMultilineTokens(o,this._textModel)},backgroundTokenizationFinished(){},setEndState:(o,a)=>{this._debugBackgroundStates?.setEndState(o,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.todo_resetTokenization(!1);else if(!e.isEolChange){for(const t of e.changes){const[i,n]=mC(t.text);this._tokens.acceptEdit(t.range,i,n),this._debugBackgroundTokens?.acceptEdit(t.range,i,n)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=dt.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new Y7,{heuristicTokens:n}=this._tokenizer.tokenizeHeuristically(i,e,t),r=this.setTokens(i.finalize());if(n)for(const o of r.changes)this._backgroundTokenizer.value?.requestTokens(o.fromLineNumber,o.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){const t=new Y7;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const n=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(n)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const n=this._textModel.validatePosition(new se(e,t));return this.forceTokenization(n.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(n,i)}tokenizeLinesAt(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLinesAt(e,t)):null}get hasTokens(){return this._tokens.hasTokens}}var Nme=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},AT=function(s,e){return function(t,i){e(t,i,s)}},MD;let J7=MD=class extends _Y{constructor(e,t,i,n,r,o,a,l){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=n,this._languageService=r,this._languageConfigurationService=o,this._instantiationService=a,this._treeSitterLibraryService=l,this._languageIdObs=xt(this,this._languageId),this._useTreeSitter=Je(this,h=>{const d=this._languageIdObs.read(h);return this._treeSitterLibraryService.supportsLanguage(d,h)}),this.tokens=Je(this,h=>{let d;return this._useTreeSitter.read(h)?d=h.store.add(this._instantiationService.createInstance(Q7,this._languageIdObs,this._languageService.languageIdCodec,this._textModel,this._attachedViews.visibleLineRanges)):d=h.store.add(new Dme(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),h.store.add(d.onDidChangeTokens(g=>{this._emitModelTokensChangedEvent(g)})),h.store.add(d.onDidChangeBackgroundTokenizationState(g=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),d});let c=!1;this.tokens.recomputeInitiallyAndOnChange(this._store,h=>{c&&h.todo_resetTokenization(),c=!0}),this._semanticTokens=new vB(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new ne),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new ne),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new ne),this.onDidChangeTokens=this._onDidChangeTokens.event}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,n,r]=mC(t.text);this._semanticTokens.acceptEdit(t.range,i,n,r,t.text.length>0?t.text.charCodeAt(0):0)}this.tokens.get().handleDidChangeContent(e)}handleDidChangeAttached(){this.tokens.get().handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.tokens.get().getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new at("Illegal value for lineNumber")}get hasTokens(){return this.tokens.get().hasTokens}resetTokenization(){this.tokens.get().todo_resetTokenization()}get backgroundTokenizationState(){return this.tokens.get().backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.tokens.get().forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this.tokens.get().hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.tokens.get().isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.tokens.get().tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this.tokens.get().getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLinesAt(e,t){return this.tokens.get().tokenizeLinesAt(e,t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t,this._textModel),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),n=this.getLineTokens(t.lineNumber),r=n.findTokenIndexAtOffset(t.column-1),[o,a]=MD._findLanguageBoundaries(n,r),l=ux(t.column,this.getLanguageConfiguration(n.getLanguageId(r)).getWordDefinition(),i.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,h]=MD._findLanguageBoundaries(n,r-1),d=ux(t.column,this.getLanguageConfiguration(n.getLanguageId(r-1)).getWordDefinition(),i.substring(c,h),c);if(d&&d.startColumn<=e.column&&e.column<=d.endColumn)return d}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let n=0;for(let o=t;o>=0&&e.getLanguageId(o)===i;o--)n=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===i;o++)r=e.getEndOffset(o);return[n,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new se(e,t)),n=this.getLineTokens(i.lineNumber);return n.getLanguageId(n.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._languageIdObs.set(e,void 0),this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};J7=MD=Nme([AT(4,$s),AT(5,zd),AT(6,Zt),AT(7,bB)],J7);const wB=At("undoRedoService");class XY{constructor(e,t){this.resource=e,this.elements=t}}const _w=class _w{constructor(){this.id=_w._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};_w._ID=0,_w.None=new _w;let e9=_w;const bw=class bw{constructor(){this.id=bw._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};bw._ID=0,bw.None=new bw;let c1=bw;var Sz;function Ime(s,e){const t=[],i=[];for(const n of s)e.has(n)||t.push(n);for(const n of e)s.has(n)||i.push(n);return{removed:t,added:i}}function QY(s,e){const t=new Set;for(const i of e)s.has(i)&&t.add(i);return t}class Lz{constructor(e,t){this.toKey=t,this._map=new Map,this[Sz]="SetWithKey";for(const i of e)this.add(i)}get size(){return this._map.size}add(e){const t=this.toKey(e);return this._map.set(t,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(const e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,t){this._map.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}}Sz=Symbol.toStringTag;var Ame=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},RT=function(s,e){return function(t,i){e(t,i,s)}},U_;function Rme(s){const e=new jY;return e.acceptChunk(s),e.finish()}function Mme(s){const e=new jY;let t;for(;typeof(t=s.read())=="string";)e.acceptChunk(t);return e.finish()}function xz(s,e){let t;return typeof s=="string"?t=Rme(s):goe(s)?t=Mme(s):t=s,t.create(e)}let MT=0;const Ome=999,Pme=1e4,Bme=300;class Fme{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const n=this._source.read();if(n===null)return this._eos=!0,t===0?null:e.join("");if(n.length>0&&(e[t++]=n,i+=n.length),i>=64*1024)return e.join("")}while(!0)}}const LS=()=>{throw new Error("Invalid change accessor")};var Xu;let t9=(Xu=class extends pe{static resolveOptions(e,t){if(t.detectIndentation){const i=cz(e,t.tabSize,t.insertSpaces);return new xD({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new xD(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}get onDidChangeOptions(){return this._onDidChangeOptions.event}get onDidChangeAttached(){return this._onDidChangeAttached.event}get onDidChangeLineHeight(){return this._onDidChangeLineHeight.event}get onDidChangeFont(){return this._onDidChangeFont.event}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return yd(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,n=null,r,o,a,l){super(),this._undoRedoService=r,this._languageService=o,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new ne),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new qme((b,C,S)=>this.handleBeforeFireDecorationsChangedEvent(b,C,S))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new ne),this._onDidChangeAttached=this._register(new ne),this._onDidChangeInjectedText=this._register(new ne),this._onDidChangeLineHeight=this._register(new ne),this._onDidChangeFont=this._register(new ne),this._eventEmitter=this._register(new $me),this._languageSelectionListener=this._register(new qs),this._deltaDecorationCallCnt=0,this._attachedViews=new ime,MT++,this.id="$model"+MT,this.isForSimpleWidget=i.isForSimpleWidget,typeof n>"u"||n===null?this._associatedResource=Ot.parse("inmemory://model/"+MT):this._associatedResource=n,this._attachedEditorCount=0;const{textBuffer:c,disposable:h}=xz(e,i.defaultEOL);this._buffer=c,this._bufferDisposable=h;const d=this._buffer.getLineCount(),g=this._buffer.getValueLengthInRange(new ie(1,1,d,this._buffer.getLineLength(d)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=g>U_.LARGE_FILE_SIZE_THRESHOLD||d>U_.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=g>U_.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._options=U_.resolveOptions(this._buffer,i);const _=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new Dge(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new gde(this,this._languageConfigurationService)),this._decorationProvider=this._register(new Ige(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(J7,this,this._bracketPairs,_,this._attachedViews),this._isTooLargeForSyncing=g>U_._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=oG(MT),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new kz,this._commandManager=new gB(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(_),this._register(this._languageConfigurationService.onDidChange(b=>{this._bracketPairs.handleLanguageConfigurationServiceChange(b),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(b)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Bw([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=pe.None}_assertNotDisposed(){if(this._isDisposed)throw new at("Model is disposed!")}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new z1(e,t)))}setValue(e,t=lc.setValue()){if(this._assertNotDisposed(),e==null)throw $A();const{textBuffer:i,disposable:n}=xz(e,this._options.defaultEOL);this._setValueFromTextBuffer(i,n,t)}_createContentChanged2(e,t,i,n,r,o,a,l,c,h){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:r}],eol:this._buffer.getEOL(),isEolChange:c,versionId:this.getVersionId(),isUndoing:o,isRedoing:a,isFlush:l,detailedReasons:[h],detailedReasonsChangeLengths:[1]}}_setValueFromTextBuffer(e,t,i){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),o=this.getLineCount(),a=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new kz,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Mw([new Kfe],this._versionId,!1,!1),this._createContentChanged2(new ie(1,1,o,a),0,r,new se(o,a),this.getValue(),!1,!1,!0,!1,i))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),n=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Mw([new Jfe],this._versionId,!1,!1),this._createContentChanged2(new ie(1,1,r,o),0,n,new se(r,o),this.getValue(),!1,!1,!1,!0,lc.eolChange()))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,n=t.length;i<n;i++){const r=t[i],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,dp(r)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let n=1;n<=i;n++){const r=this._buffer.getLineLength(n);r>=Pme?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,n=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new xD({tabSize:t,indentSize:i,insertSpaces:n,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=cz(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),YK(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(sG.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new at("Operation would exceed heap memory limits");const i=this.getFullModelRange(),n=this.getValueInRange(i,e);return t?this._buffer.getBOM()+n:n}createSnapshot(e=!1){return new Fme(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),n=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+n:n}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new at("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new at("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new at("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new at("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new at("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new at("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,n=e.startColumn;let r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),o=Math.floor(typeof n=="number"&&!isNaN(n)?n:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const d=this.getLineMaxColumn(r);o>=d&&(o=d)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,h=1;else if(c>t)c=t,h=this.getLineMaxColumn(c);else if(h<=1)h=1;else{const d=this.getLineMaxColumn(c);h>=d&&(h=d)}return i===r&&n===o&&a===c&&l===h&&e instanceof ie&&!(e instanceof Yt)?e:new ie(r,o,c,h)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const n=this._buffer.getLineCount();if(e>n)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(i===1){const o=this._buffer.getLineCharCode(e,t-2);if(xs(o))return!1}return!0}_validatePosition(e,t,i){const n=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(n<1)return new se(1,1);if(n>o)return new se(o,this.getLineMaxColumn(o));if(r<=1)return new se(n,1);const a=this.getLineMaxColumn(n);if(r>=a)return new se(n,a);if(i===1){const l=this._buffer.getLineCharCode(n,r-2);if(xs(l))return new se(n,r-1)}return new se(n,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof se&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}isValidRange(e){return this._isValidRange(e,1)}_isValidRange(e,t){const i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(i,n,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=n>1?this._buffer.getLineCharCode(i,n-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=xs(a),h=xs(l);return!c&&!h}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof ie&&!(e instanceof Yt)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),r=i.lineNumber,o=i.column,a=n.lineNumber,l=n.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,h=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,d=xs(c),g=xs(h);return!d&&!g?new ie(r,o,a,l):r===a&&o===l?new ie(r,o-1,a,l-1):d&&g?new ie(r,o-1,a,l+1):d?new ie(r,o-1,a,l):new ie(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new ie(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,n){return this._buffer.findMatchesLineByLine(e,t,i,n)}findMatches(e,t,i,n,r,o,a=Ome){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(d=>ie.isIRange(d))&&(l=t.map(d=>this.validateRange(d)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((d,g)=>d.startLineNumber-g.startLineNumber||d.startColumn-g.startColumn);const c=[];c.push(l.reduce((d,g)=>ie.areIntersecting(d,g)?d.plusRange(g):(c.push(d),g)));let h;if(!i&&e.indexOf(`
`)<0){const g=new Cv(e,i,n,r).parseSearchRequest();if(!g)return[];h=_=>this.findMatchesLineByLine(_,g,o,a)}else h=d=>vT.findMatches(this,new Cv(e,i,n,r),d,o,a);return c.map(h).reduce((d,g)=>d.concat(g),[])}findNextMatch(e,t,i,n,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new Cv(e,i,n,r).parseSearchRequest();if(!c)return null;const h=this.getLineCount();let d=new ie(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),g=this.findMatchesLineByLine(d,c,o,1);return vT.findNextMatch(this,new Cv(e,i,n,r),a,o),g.length>0||(d=new ie(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),g=this.findMatchesLineByLine(d,c,o,1),g.length>0)?g[0]:null}return vT.findNextMatch(this,new Cv(e,i,n,r),a,o)}findPreviousMatch(e,t,i,n,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return vT.findPreviousMatch(this,new Cv(e,i,n,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof OM?e:new OM(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,n,r){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,n,r)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,n,r){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const o=t.map(l=>({range:this.validateRange(l.range),text:l.text}));let a=!0;if(e)for(let l=0,c=e.length;l<c;l++){const h=e[l];let d=!1;for(let g=0,_=o.length;g<_;g++){const b=o[g].range,C=b.startLineNumber>h.endLineNumber,S=h.startLineNumber>b.endLineNumber;if(!C&&!S){d=!0;break}}if(!d){a=!1;break}}if(a)for(let l=0,c=this._trimAutoWhitespaceLines.length;l<c;l++){const h=this._trimAutoWhitespaceLines[l],d=this.getLineMaxColumn(h);let g=!0;for(let _=0,b=o.length;_<b;_++){const C=o[_].range,S=o[_].text;if(!(h<C.startLineNumber||h>C.endLineNumber)&&!(h===C.startLineNumber&&C.startColumn===d&&C.isEmpty()&&S&&S.length>0&&S.charAt(0)===`
`)&&!(h===C.startLineNumber&&C.startColumn===1&&C.isEmpty()&&S&&S.length>0&&S.charAt(S.length-1)===`
`)){g=!1;break}}if(g){const _=new ie(h,1,h,d);t.push(new OM(null,_,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,n,r)}_applyUndo(e,t,i,n){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new ie(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,i,n)}_applyRedo(e,t,i,n){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new ie(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,i,n)}_applyUndoRedoEdits(e,t,i,n,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=n,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t,i){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t??!1,i??lc.applyEdits())}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t,i){const n=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),a=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,a.length!==0){for(let h=0,d=a.length;h<d;h++){const g=a[h];this._decorationsTree.acceptReplace(g.rangeOffset,g.rangeLength,g.text.length,g.forceMoveMarkers)}const l=[];this._increaseVersionId();let c=n;for(let h=0,d=a.length;h<d;h++){const g=a[h],[_]=mC(g.text);this._onDidChangeDecorations.fire();const b=g.range.startLineNumber,C=g.range.endLineNumber,S=C-b,E=_,x=Math.min(S,E),T=E-S,N=o-c-T+b,A=N,P=N+E,O=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new se(A,1)),this.getOffsetAt(new se(P,this.getLineMaxColumn(P))),0),V=ch.fromDecorations(O),U=new _g(V);for(let Y=x;Y>=0;Y--){const B=b+Y,F=N+Y;U.takeFromEndWhile(ee=>ee.lineNumber>F);const W=U.takeFromEndWhile(ee=>ee.lineNumber===F);l.push(new tz(B,this.getLineContent(F),W))}if(x<S){const Y=b+x;l.push(new Xfe(Y+1,C))}if(x<E){const Y=new _g(V),B=b+x,F=E-x,W=o-c-F+B+1,ee=[],X=[];for(let $=0;$<F;$++){const te=W+$;X[$]=this.getLineContent(te),Y.takeWhile(ce=>ce.lineNumber<te),ee[$]=Y.takeWhile(ce=>ce.lineNumber===te)}l.push(new Qfe(B+1,b+E,X,ee))}c+=T}this._emitContentChangedEvent(new Mw(l,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:a,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1,detailedReasons:[i],detailedReasonsChangeLengths:[a.length]})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e,t,i){if(e&&e.size>0){const r=Array.from(e).map(o=>new tz(o,this.getLineContent(o),this._getInjectedTextInLine(o)));this._onDidChangeInjectedText.fire(new TY(r))}if(t&&t.size>0){const r=Array.from(t).map(o=>new Yfe(o.ownerId,o.decorationId,o.lineNumber,o.lineHeight));this._onDidChangeLineHeight.fire(new DY(r))}if(i&&i.size>0){const r=Array.from(i).map(o=>new Zfe(o.ownerId,o.lineNumber));this._onDidChangeFont.fire(new NY(r))}}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(e,r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(e,r,Tz(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)};let n=null;try{n=t(i)}catch(r){mi(r)}return i.addDecoration=LS,i.changeDecoration=LS,i.changeDecorationOptions=LS,i.removeDecoration=LS,i.deltaDecorations=LS,n}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),mi(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const n=e?this._decorations[e]:null;if(!n)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:Ez[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(n),delete this._decorations[n.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,a,r),n.setOptions(Ez[i]),this._decorationsTree.insert(n),n.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,n=t.length;i<n;i++){const r=t[i];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i,n)}getLinesDecorations(e,t,i=0,n=!1,r=!1,o=!1){const a=this.getLineCount(),l=Math.min(a,Math.max(1,e)),c=Math.min(a,Math.max(1,t)),h=this.getLineMaxColumn(c),d=new ie(l,1,c,h),g=this._getDecorationsInRange(d,i,n,r,o);return iO(g,this._decorationProvider.getDecorationsInRange(d,i,n)),g}getDecorationsInRange(e,t=0,i=!1,n=!1,r=!1,o=!1){const a=this.validateRange(e),l=this._getDecorationsInRange(a,t,i,n,o);return iO(l,this._decorationProvider.getDecorationsInRange(a,t,i,r)),l}getOverviewRulerDecorations(e=0,t=!1,i=!1){return this._decorationsTree.getAll(this,e,t,i,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}getCustomLineHeightsDecorations(e=0){return this._decorationsTree.getAllCustomLineHeights(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),n=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return ch.fromDecorations(n).filter(r=>r.lineNumber===e)}getFontDecorationsInRange(e,t=0){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),n=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getFontDecorationsInInterval(this,i,n,t)}getAllDecorations(e=0,t=!1,i=!1){let n=this._decorationsTree.getAll(this,e,t,i,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!1,!0)}_getDecorationsInRange(e,t,i,n,r){const o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),a=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,o,a,t,i,n,r)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t,i){const n=this._decorations[t];if(!n)return;if(n.options.after){const l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(n.options.before){const l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}if(n.options.lineHeight!==null){const l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,l.startLineNumber,null)}if(n.options.affectsFont){const l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,n.id,l.startLineNumber)}const r=this._validateRangeRelaxedNoAllocations(i),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,a,r),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber),n.options.lineHeight!==null&&this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,r.startLineNumber,n.options.lineHeight),n.options.affectsFont&&this._onDidChangeDecorations.recordLineAffectedByFontChange(e,n.id,r.startLineNumber)}_changeDecorationOptionsImpl(e,t,i){const n=this._decorations[t];if(!n)return;const r=!!(n.options.overviewRuler&&n.options.overviewRuler.color),o=!!(i.overviewRuler&&i.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(i),n.options.after||i.after){const c=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(c.endLineNumber)}if(n.options.before||i.before){const c=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(c.startLineNumber)}if(n.options.lineHeight!==null||i.lineHeight!==null){const c=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,c.startLineNumber,i.lineHeight)}if(n.options.affectsFont||i.affectsFont){const c=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,t,c.startLineNumber)}const a=r!==o,l=Hme(i)!==OD(n);a||l?(this._decorationsTree.delete(n),n.setOptions(i),this._decorationsTree.insert(n)):n.setOptions(i)}_deltaDecorationsImpl(e,t,i,n=!1){const r=this.getVersionId(),o=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const h=new Array(l);for(;a<o||c<l;){let d=null;if(a<o){let g;do g=t[a++],d=this._decorations[g];while(!d&&a<o);if(d){if(d.options.after){const _=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_.endLineNumber)}if(d.options.before){const _=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_.startLineNumber)}if(d.options.lineHeight!==null){const _=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,g,_.startLineNumber,null)}if(d.options.affectsFont){const _=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByFontChange(e,g,_.startLineNumber)}this._decorationsTree.delete(d),n||this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(c<l){if(!d){const E=++this._lastDecorationId,x=`${this._instanceId};${E}`;d=new zY(x,0,0),this._decorations[x]=d}const g=i[c],_=this._validateRangeRelaxedNoAllocations(g.range),b=Tz(g.options),C=this._buffer.getOffsetAt(_.startLineNumber,_.startColumn),S=this._buffer.getOffsetAt(_.endLineNumber,_.endColumn);d.ownerId=e,d.reset(r,C,S,_),d.setOptions(b),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(_.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(_.startLineNumber),d.options.lineHeight!==null&&this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,d.id,_.startLineNumber,d.options.lineHeight),d.options.affectsFont&&this._onDidChangeDecorations.recordLineAffectedByFontChange(e,d.id,_.startLineNumber),n||this._onDidChangeDecorations.checkAffectedAndFire(b),this._decorationsTree.insert(d),h[c]=d.id,c++}else d&&delete this._decorations[d.id]}return h}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return Vme(this.getLineContent(e))+1}toString(){return`TextModel(${this.uri.toString()})`}},U_=Xu,Xu._MODEL_SYNC_LIMIT=50*1024*1024,Xu.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,Xu.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,Xu.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,Xu.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ar.tabSize,indentSize:Ar.indentSize,insertSpaces:Ar.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ar.trimAutoWhitespace,largeFileOptimizations:Ar.largeFileOptimizations,bracketPairColorizationOptions:Ar.bracketPairColorizationOptions},Xu);t9=U_=Ame([RT(4,wB),RT(5,$s),RT(6,zd),RT(7,Zt)],t9);function Vme(s){let e=0;for(const t of s)if(t===" "||t==="	")e++;else break;return e}function i5(s){return!!(s.options.overviewRuler&&s.options.overviewRuler.color)}function Hme(s){return!!s.after||!!s.before}function OD(s){return!!s.options.after||!!s.options.before}class kz{constructor(){this._decorationsTree0=new JM,this._decorationsTree1=new JM,this._injectedTextDecorationsTree=new JM}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,n,r,o,a){const l=e.getVersionId(),c=this._intervalSearch(t,i,n,r,o,l,a);return this._ensureNodesHaveRanges(e,c)}_intervalSearch(e,t,i,n,r,o,a){const l=this._decorationsTree0.intervalSearch(e,t,i,n,r,o,a),c=this._decorationsTree1.intervalSearch(e,t,i,n,r,o,a),h=this._injectedTextDecorationsTree.intervalSearch(e,t,i,n,r,o,a);return l.concat(c).concat(h)}getInjectedTextInInterval(e,t,i,n){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,i,n,!1,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getFontDecorationsInInterval(e,t,i,n){const r=e.getVersionId(),o=this._decorationsTree0.intervalSearch(t,i,n,!1,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.affectsFont)}getAllInjectedText(e,t){const i=e.getVersionId(),n=this._injectedTextDecorationsTree.search(t,!1,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAllCustomLineHeights(e,t){const i=e.getVersionId(),n=this._search(t,!1,!1,!1,i,!1);return this._ensureNodesHaveRanges(e,n).filter(r=>typeof r.options.lineHeight=="number")}getAll(e,t,i,n,r,o){const a=e.getVersionId(),l=this._search(t,i,n,r,a,o);return this._ensureNodesHaveRanges(e,l)}_search(e,t,i,n,r,o){if(n)return this._decorationsTree1.search(e,t,i,r,o);{const a=this._decorationsTree0.search(e,t,i,r,o),l=this._decorationsTree1.search(e,t,i,r,o),c=this._injectedTextDecorationsTree.search(e,t,i,r,o);return a.concat(l).concat(c)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),n=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){OD(e)?this._injectedTextDecorationsTree.insert(e):i5(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){OD(e)?this._injectedTextDecorationsTree.delete(e):i5(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){OD(e)?this._injectedTextDecorationsTree.resolveNode(e,t):i5(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,n){this._decorationsTree0.acceptReplace(e,t,i,n),this._decorationsTree1.acceptReplace(e,t,i,n),this._injectedTextDecorationsTree.acceptReplace(e,t,i,n)}}function Qh(s){return s.replace(/[^a-z0-9\-_]/gi," ")}class JY{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class Wme extends JY{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:wN.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class zme{constructor(e){this.position=e?.position??lp.Center,this.persistLane=e?.persistLane}}class Ume extends JY{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?xe.fromHex(e):t.getColor(e.id)}}class jx{static from(e){return e instanceof jx?e:new jx(e)}constructor(e){this.content=e.content||"",this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class ks{static register(e){return new ks(e)}static createDynamic(e){return new ks(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?Qh(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?Qh(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.lineHeight=e.lineHeight?Math.min(e.lineHeight,Bme):null,this.fontSize=e.fontSize||null,this.affectsFont=!!e.fontSize||!!e.fontFamily||!!e.fontWeight||!!e.fontStyle,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Wme(e.overviewRuler):null,this.minimap=e.minimap?new Ume(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new zme(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?Qh(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?Qh(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?Qh(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?Pie(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?Qh(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?Qh(e.marginClassName):null,this.inlineClassName=e.inlineClassName?Qh(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?Qh(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?Qh(e.afterContentClassName):null,this.after=e.after?jx.from(e.after):null,this.before=e.before?jx.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1,this.textDirection=e.textDirection??null}}ks.EMPTY=ks.register({description:"empty"});const Ez=[ks.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ks.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ks.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ks.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function Tz(s){return s instanceof ks?s:ks.createDynamic(s)}class Dz{static toKey(e){return`${e.ownerId};${e.decorationId};${e.lineNumber}`}constructor(e,t,i,n){this.ownerId=e,this.decorationId=t,this.lineNumber=i,this.lineHeight=n}}class Nz{static toKey(e){return`${e.ownerId};${e.decorationId};${e.lineNumber}`}constructor(e,t,i){this.ownerId=e,this.decorationId=t,this.lineNumber=i}}class qme extends pe{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new ne),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._affectedLineHeights=null,this._affectedFontLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null,this._affectedLineHeights?.clear(),this._affectedLineHeights=null,this._affectedFontLines?.clear(),this._affectedFontLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}recordLineAffectedByLineHeightChange(e,t,i,n){this._affectedLineHeights||(this._affectedLineHeights=new Lz([],Dz.toKey)),this._affectedLineHeights.add(new Dz(e,t,i,n))}recordLineAffectedByFontChange(e,t,i){this._affectedFontLines||(this._affectedFontLines=new Lz([],Nz.toKey)),this._affectedFontLines.add(new Nz(e,t,i))}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines,this._affectedLineHeights,this._affectedFontLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class $me extends pe{constructor(){super(),this._fastEmitter=this._register(new ne),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new ne),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}class CB{static create(e){return new CB(e.get(151),e.get(150))}constructor(e,t){this.classifier=new jme(e,t)}createLineBreaksComputer(e,t,i,n,r,o){const a=[],l=[],c=[];return{addRequest:(h,d,g)=>{a.push(h),l.push(d),c.push(g)},finalize:()=>{const h=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let g=0,_=a.length;g<_;g++){const b=l[g],C=c[g];C&&!C.injectionOptions&&!b&&!o?d[g]=Gme(this.classifier,C,a[g],t,i,h,n,r):d[g]=Kme(this.classifier,a[g],b,t,i,h,n,r,o)}return i9.length=0,n9.length=0,d}}}}class jme extends I2{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let i9=[],n9=[];function Gme(s,e,t,i,n,r,o,a){if(n===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",h=e.breakOffsets,d=e.breakOffsetsVisibleColumn,g=eZ(t,i,n,r,o),_=n-g,b=i9,C=n9;let S=0,E=0,x=0,T=n;const N=h.length;let A=0;if(A>=0){let P=Math.abs(d[A]-T);for(;A+1<N;){const O=Math.abs(d[A+1]-T);if(O>=P)break;P=O,A++}}for(;A<N;){let P=A<0?0:h[A],O=A<0?0:d[A];E>P&&(P=E,O=x);let V=0,U=0,Y=0,B=0;if(O<=T){let W=O,ee=P===0?0:t.charCodeAt(P-1),X=P===0?0:s.get(ee),$=!0;for(let te=P;te<l;te++){const ce=te,he=t.charCodeAt(te);let j,ae;if(xs(he)?(te++,j=0,ae=2):(j=s.get(he),ae=LL(he,W,i,r)),ce>E&&s9(ee,X,he,j,c)&&(V=ce,U=W),W+=ae,W>T){ce>E?(Y=ce,B=W-ae):(Y=te+1,B=W),W-U>_&&(V=0),$=!1;break}ee=he,X=j}if($){S>0&&(b[S]=h[h.length-1],C[S]=d[h.length-1],S++);break}}if(V===0){let W=O,ee=t.charCodeAt(P),X=s.get(ee),$=!1;for(let te=P-1;te>=E;te--){const ce=te+1,he=t.charCodeAt(te);if(he===9){$=!0;break}let j,ae;if(c0(he)?(te--,j=0,ae=2):(j=s.get(he),ae=op(he)?r:1),W<=T){if(Y===0&&(Y=ce,B=W),W<=T-_)break;if(s9(he,j,ee,X,c)){V=ce,U=W;break}}W-=ae,ee=he,X=j}if(V!==0){const te=_-(B-U);if(te<=i){const ce=t.charCodeAt(Y);let he;xs(ce)?he=2:he=LL(ce,B,i,r),te-he<0&&(V=0)}}if($){A--;continue}}if(V===0&&(V=Y,U=B),V<=E){const W=t.charCodeAt(E);xs(W)?(V=E+2,U=x+2):(V=E+1,U=x+LL(W,x,i,r))}for(E=V,b[S]=V,x=U,C[S]=U,S++,T=U+_;A<0||A<N&&d[A]<U;)A++;let F=Math.abs(d[A]-T);for(;A+1<N;){const W=Math.abs(d[A+1]-T);if(W>=F)break;F=W,A++}}return S===0?null:(b.length=S,C.length=S,i9=e.breakOffsets,n9=e.breakOffsetsVisibleColumn,e.breakOffsets=b,e.breakOffsetsVisibleColumn=C,e.wrappedTextIndentLength=g,e)}function Kme(s,e,t,i,n,r,o,a,l){const c=ch.applyInjectedText(e,t);let h,d;if(t&&t.length>0?(h=t.map(Y=>Y.options),d=t.map(Y=>Y.column-1)):(h=null,d=null),n===-1)return h?new vL(d,h,[c.length],[],0):null;const g=c.length;if(g<=1)return h?new vL(d,h,[c.length],[],0):null;const _=a==="keepAll",b=eZ(c,i,n,r,o),C=n-b,S=[],E=[];let x=0,T=0,N=0,A=n,P=c.charCodeAt(0),O=s.get(P),V=LL(P,0,i,r),U=1;xs(P)&&(V+=1,P=c.charCodeAt(1),O=s.get(P),U++);for(let Y=U;Y<g;Y++){const B=Y,F=c.charCodeAt(Y);let W,ee;xs(F)?(Y++,W=0,ee=2):(W=s.get(F),ee=LL(F,V,i,r)),s9(P,O,F,W,_)&&(T=B,N=V),V+=ee,l&&Yme(c,Y)&&(V+=A),V>A&&((T===0||V-N>C)&&(T=B,N=V-ee),S[x]=T,E[x]=N,x++,A=N+C,T=0),P=F,O=W}return x===0&&(!t||t.length===0)?null:(S[x]=g,E[x]=V,new vL(d,h,S,E,b))}function LL(s,e,t,i){return s===9?t-e%t:op(s)||s<32?i:1}function Iz(s,e){return e-s%e}function Yme(s,e){return e>=2&&(e<3||s.charAt(e-3)!=="\\")&&s.charAt(e-2)==="\\"&&s.charAt(e-1)==="n"&&s.includes('"')}function s9(s,e,t,i,n){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!n&&e===3&&i!==2||!n&&i===3&&e!==1)}function eZ(s,e,t,i,n){let r=0;if(n!==0){const o=Pa(s);if(o!==-1){for(let l=0;l<o;l++){const c=s.charCodeAt(l)===9?Iz(r,e):1;r+=c}const a=n===3?2:n===2?1:0;for(let l=0;l<a;l++){const c=Iz(r,e);r+=c}r+i>t&&(r=0)}}return r}let Az=class tZ{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new nr(new ie(1,1,1,1),0,0,new se(1,1),0),new nr(new ie(1,1,1,1),0,0,new se(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Ht(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Yt.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Yt.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,n){return t.equals(i)?n:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,n=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,n,i,o),l=this._validatePositionWithCache(e,r,n,a);return i.equals(o)&&n.equals(a)&&r.equals(l)?t:new nr(ie.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+n.column-a.column,o,t.leftoverVisibleColumns+i.column-o.column)}_setState(e,t,i){if(i&&(i=tZ._validateViewState(e.viewModel,i)),t){const n=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new nr(n,t.selectionStartKind,r,o,a)}else{if(!i)return;const n=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new nr(n,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,r,i.leftoverVisibleColumns)}if(i){const n=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new nr(n,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const n=e.coordinatesConverter.convertModelPositionToViewPosition(new se(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new se(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new ie(n.lineNumber,n.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new nr(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}};class Rz{constructor(e){this.context=e,this.cursors=[new Az(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return koe(this.cursors,Dl(e=>e.viewState.position,se.compare)).viewState.position}getBottomMostViewPosition(){return xoe(this.cursors,Dl(e=>e.viewState.position,se.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Ht.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const n=i-t;for(let r=0;r<n;r++)this._addSecondaryCursor()}else if(t>i){const n=t-i;for(let r=0;r<n;r++)this._removeSecondaryCursor(this.cursors.length-2)}for(let n=0;n<i;n++)this.cursors[n+1].setState(this.context,e[n].modelState,e[n].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Az(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,n=e.length;i<n;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(Dl(i=>i.selection,ie.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const n=t[i],r=t[i+1],o=n.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=n.index<r.index?i:i+1,h=n.index<r.index?i+1:i,d=t[h].index,g=t[c].index,_=t[h].selection,b=t[c].selection;if(!_.equalsSelection(b)){const C=_.plusRange(b),S=_.selectionStartLineNumber===_.startLineNumber&&_.selectionStartColumn===_.startColumn,E=b.selectionStartLineNumber===b.startLineNumber&&b.selectionStartColumn===b.startColumn;let x;d===this.lastAddedCursorIndex?(x=S,this.lastAddedCursorIndex=g):x=E;let T;x?T=new Yt(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn):T=new Yt(C.endLineNumber,C.endColumn,C.startLineNumber,C.startColumn),t[c].selection=T;const N=Ht.fromModelSelection(T);e[g].setState(this.context,N.modelState,N.viewState)}for(const C of t)C.index>d&&C.index--;e.splice(d,1),t.splice(h,1),this._removeSecondaryCursor(d-1),i--}}}}class Mz{constructor(e,t,i,n){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=n}}class Zme{constructor(){this.type=0}}class Xme{constructor(){this.type=1}}class Qme{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class Jme{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class M_{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class OT{constructor(){this.type=5}}class epe{constructor(e){this.type=6,this.isFocused=e}}class tpe{constructor(){this.type=7}}class PT{constructor(){this.type=8}}class iZ{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class r9{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class o9{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class xL{constructor(e,t,i,n,r,o,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=n,this.verticalType=r,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class ipe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class npe{constructor(e){this.theme=e,this.type=14}}class spe{constructor(e){this.type=15,this.ranges=e}}class rpe{constructor(){this.type=16}}let ope=class{constructor(){this.type=17}};class ape extends pe{constructor(){super(),this._onEvent=this._register(new ne),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const n=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(n){this._outgoingEvents[t]=n;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new lpe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class lpe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class yB{constructor(e,t,i,n){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=n,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new yB(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class AR{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new AR(this.oldHasFocus,e.hasFocus)}}class cpe{constructor(e,t){this.kind=2,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new AR(this.oldHasFocus,e.hasFocus)}}class SB{constructor(e,t,i,n,r,o,a,l){this.kind=3,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=n,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new SB(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class upe{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class hpe{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class iI{constructor(e,t,i,n,r,o,a){this.kind=7,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=n,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,n=t.length;if(i!==n)return!1;for(let r=0;r<i;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return iI._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new iI(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class dpe{constructor(){this.kind=6}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class fpe{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class gpe{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class mpe{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class ppe{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class _pe{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class bpe{constructor(e){this.event=e,this.kind=13}isNoOp(){return!1}attemptToMerge(e){return null}}class vpe{constructor(e){this.event=e,this.kind=14}isNoOp(){return!1}attemptToMerge(e){return null}}class wpe{constructor(e){this.event=e,this.kind=15}isNoOp(){return!1}attemptToMerge(e){return null}}class Cpe extends pe{constructor(e,t,i,n){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new Mz(this._model,this._viewModel,this._coordinatesConverter,n),this._cursors=new Rz(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Cs(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new Mz(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,n){let r=!1;const o=this.context.cursorConfig.multiCursorLimit;n!==null&&n.length>o&&(n=n.slice(0,o),r=!0);const a=kL.from(this._model,this);return this._cursors.setStates(n),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,n,r,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=ie.fromPositions(a[0],a[0]),e.emitViewEvent(new xL(t,i,l,c,n,r,o))}revealPrimary(e,t,i,n,r,o){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new xL(t,i,null,l,n,r,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,n=t.length;i<n;i++){const r=t[i];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){const i=[];for(let n=0,r=t.length;n<r;n++){const o=t[n];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,h=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(h=o.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:h,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Ht.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof TY){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const n=i.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new Rz(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const r=Ht.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,r)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Ht.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,n){this.setStates(e,t,n,Ht.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],n=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),n.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],i),o=this._model.deltaDecorations([],n);this._autoClosedActions.push(new Oz(this._model,r,o))}_executeEditOperation(e,t){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const i=ype.executeCommands(this._model,this._cursors.getSelections(),e.commands,t);if(i){this._interpretCommandResult(i);const n=[],r=[];for(let o=0;o<e.commands.length;o++){const a=e.commands[o];a instanceof nB&&a.enclosingRange&&a.closeCharacterRange&&(n.push(a.closeCharacterRange),r.push(a.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,r),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,n,r){const o=kL.from(this._model,this);if(o.equals(n))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new Jme(l,a,i)),!n||n.cursorState.length!==o.cursorState.length||o.cursorState.some((c,h)=>!c.modelState.equals(n.cursorState[h].modelState))){const c=n?n.cursorState.map(d=>d.modelState.selection):null,h=n?n.modelVersionId:0;e.emitOutgoingEvent(new iI(c,a,h,o.modelVersionId,t||"keyboard",i,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,n=e.length;i<n;i++){const r=e[i];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,h=r.text.length-o[2].length-1,d=r.text.lastIndexOf(c,h-1);if(d===-1)return null;t.push([d,h])}return t}executeEdits(e,t,i,n,r){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);const a=[],l=[],c=this._model.pushEditOperations(this.getSelections(),i,h=>{if(o)for(let g=0,_=o.length;g<_;g++){const[b,C]=o[g],S=h[g],E=S.range.startLineNumber,x=S.range.startColumn-1+b,T=S.range.startColumn-1+C;a.push(new ie(E,T+1,E,T+2)),l.push(new ie(E,x+1,E,T+2))}const d=n(h);return d&&(this._isHandling=!0),d},void 0,r);c&&(this._isHandling=!1,this.setSelections(e,t,c,0)),a.length>0&&this._pushAutoClosedAction(a,l)}_executeEdit(e,t,i,n=0){if(this.context.cursorConfig.readOnly)return;const r=kL.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){mi(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,n,r,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return Oz.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new EL(this._model,this.getSelections())}endComposition(e,t){const i=lc.cursor({kind:"compositionEnd",detailedSource:t}),n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(r1.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()),i)},e,t)}type(e,t,i){const n=lc.cursor({kind:"type",detailedSource:i});this._executeEdit(()=>{if(i==="keyboard"){const r=t.length;let o=0;for(;o<r;){const a=rP(t,o),l=t.substr(o,a);this._executeEditOperation(r1.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),l),n),o+=a}}else this._executeEditOperation(r1.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t),n)},e,i)}compositionType(e,t,i,n,r,o){const a=lc.cursor({kind:"compositionType",detailedSource:o});if(t.length===0&&i===0&&n===0){if(r!==0){const l=this.getSelections().map(c=>{const h=c.getPosition();return new Yt(h.lineNumber,h.column+r,h.lineNumber,h.column+r)});this.setSelections(e,o,l,0)}return}this._executeEdit(()=>{this._executeEditOperation(r1.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,n,r),a)},e,o)}paste(e,t,i,n,r){const o=lc.cursor({kind:"paste",detailedSource:r});this._executeEdit(()=>{this._executeEditOperation(r1.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,n||[]),o)},e,r,4)}cut(e,t){const i=lc.cursor({kind:"cut",detailedSource:t});this._executeEdit(()=>{this._executeEditOperation(b0.cut(this.context.cursorConfig,this._model,this.getSelections()),i)},e,t)}executeCommand(e,t,i){const n=lc.cursor({kind:"executeCommand",detailedSource:i});this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new yo(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}),n)},e,i)}executeCommands(e,t,i){const n=lc.cursor({kind:"executeCommands",detailedSource:i});this._executeEdit(()=>{this._executeEditOperation(new yo(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}),n)},e,i)}}class kL{static from(e,t){return new kL(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class Oz{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const n=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(n&&(t.push(n),n.startLineNumber!==n.endLineNumber))return!1}t.sort(ie.compareRangesUsingStarts),e.sort(ie.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class ype{static executeCommands(e,t,i,n=lc.unknown({name:"executeCommands"})){const r={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(r,i,n);for(let a=0,l=r.trackedRanges.length;a<l;a++)r.model._setTrackedRange(r.trackedRanges[a],null,0);return o}static _innerExecuteCommands(e,t,i){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const r=n.operations,o=this._getLoserCursorMap(r);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const a=[];for(let h=0,d=r.length;h<d;h++)o.hasOwnProperty(r[h].identifier.major.toString())||a.push(r[h]);n.hadTrackedEditOperation&&a.length>0&&(a[0]._isTracked=!0);let l=e.model.pushEditOperations(e.selectionsBefore,a,h=>{const d=[];for(let b=0;b<e.selectionsBefore.length;b++)d[b]=[];for(const b of h)b.identifier&&d[b.identifier.major].push(b);const g=(b,C)=>b.identifier.minor-C.identifier.minor,_=[];for(let b=0;b<e.selectionsBefore.length;b++)d[b].length>0?(d[b].sort(g),_[b]=t[b].computeCursorState(e.model,{getInverseEditOperations:()=>d[b],getTrackedSelection:C=>{const S=parseInt(C,10),E=e.model._getTrackedRange(e.trackedRanges[S]);return e.trackedRangesDirection[S]===0?new Yt(E.startLineNumber,E.startColumn,E.endLineNumber,E.endColumn):new Yt(E.endLineNumber,E.endColumn,E.startLineNumber,E.startColumn)}})):_[b]=e.selectionsBefore[b];return _},void 0,i);l||(l=e.selectionsBefore);const c=[];for(const h in o)o.hasOwnProperty(h)&&c.push(parseInt(h,10));c.sort((h,d)=>d-h);for(const h of c)l.splice(h,1);return l}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],n=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);i=i.concat(l.operations),n=n||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:n}}static _getEditOperationsFromCommand(e,t,i){const n=[];let r=0;const o=(d,g,_=!1)=>{ie.isEmpty(d)&&g===""||n.push({identifier:{major:t,minor:r++},range:d,text:g,forceMoveMarkers:_,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:o,addTrackedEditOperation:(d,g,_)=>{a=!0,o(d,g,_)},trackSelection:(d,g)=>{const _=Yt.liftSelection(d);let b;if(_.isEmpty())if(typeof g=="boolean")g?b=2:b=3;else{const E=e.model.getLineMaxColumn(_.startLineNumber);_.startColumn===E?b=2:b=3}else b=1;const C=e.trackedRanges.length,S=e.model._setTrackedRange(null,_,b);return e.trackedRanges[C]=S,e.trackedRangesDirection[C]=_.getDirection(),C.toString()}};try{i.getEditOperations(e.model,h)}catch(d){return mi(d),{operations:[],hadTrackedEditOperation:!1}}return{operations:n,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,n)=>-ie.compareRangesUsingEnds(i.range,n.range));const t={};for(let i=1;i<e.length;i++){const n=e[i-1],r=e[i];if(ie.getStartPosition(n.range).isBefore(ie.getEndPosition(r.range))){let o;n.identifier.major>r.identifier.major?o=n.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class Spe{constructor(e,t,i,n){this.text=e,this.lineNumber=t,this.startSelectionOffset=i,this.endSelectionOffset=n}}class EL{static _capture(e,t){const i=[];for(const n of t){if(n.startLineNumber!==n.endLineNumber)return null;const r=n.startLineNumber;i.push(new Spe(e.getLineContent(r),r,n.startColumn-1,n.endColumn-1))}return i}constructor(e,t){this._original=EL._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=EL._capture(e,t);if(!i||this._original.length!==i.length)return null;const n=[];for(let r=0,o=this._original.length;r<o;r++)n.push(EL._deduceOutcome(this._original[r],i[r]));return n}static _deduceOutcome(e,t){const i=Math.min(e.startSelectionOffset,t.startSelectionOffset,Jw(e.text,t.text)),n=Math.min(e.text.length-e.endSelectionOffset,t.text.length-t.endSelectionOffset,eC(e.text,t.text)),r=e.text.substring(i,e.text.length-n),o=i,a=t.text.length-n,l=t.text.substring(o,a),c=new ie(t.lineNumber,o+1,t.lineNumber,a+1);return new lhe(r,e.startSelectionOffset-i,e.endSelectionOffset-i,l,t.startSelectionOffset-i,t.endSelectionOffset-i,c)}}const Pz={getInitialState:()=>Dx,tokenizeEncoded:(s,e,t)=>FP(0,t)};async function Lpe(s,e,t){if(!t)return Bz(e,s.languageIdCodec,Pz);const i=await es.getOrCreate(t);return Bz(e,s.languageIdCodec,i||Pz)}function xpe(s,e,t,i,n,r,o){let a="<div>",l=i,c=0,h=!0;for(let d=0,g=e.getCount();d<g;d++){const _=e.getEndOffset(d);if(_<=i)continue;let b="";for(;l<_&&l<n;l++){const C=s.charCodeAt(l);switch(C){case 9:{let S=r-(l+c)%r;for(c+=S-1;S>0;)o&&h?(b+="&#160;",h=!1):(b+=" ",h=!0),S--;break}case 60:b+="&lt;",h=!1;break;case 62:b+="&gt;",h=!1;break;case 38:b+="&amp;",h=!1;break;case 0:b+="&#00;",h=!1;break;case 65279:case 8232:case 8233:case 133:b+="�",h=!1;break;case 13:b+="&#8203",h=!1;break;case 32:o&&h?(b+="&#160;",h=!1):(b+=" ",h=!0);break;default:b+=String.fromCharCode(C),h=!1}}if(a+=`<span style="${e.getInlineStyle(d,t)}">${b}</span>`,_>n||l>=n)break}return a+="</div>",a}function Bz(s,e,t){let i='<div class="monaco-tokenized-source">';const n=LC(s);let r=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o];o>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,r);Ts.convertToEndOffset(c.tokens,l.length);const d=new Ts(c.tokens,l,e).inflate();let g=0;for(let _=0,b=d.getCount();_<b;_++){const C=d.getClassName(_),S=d.getEndOffset(_);i+=`<span class="${C}">${su(l.substring(g,S))}</span>`,g=S}r=c.endState}return i+="</div>",i}class kpe{constructor(e,t,i,n,r){this.decorationId=e,this.index=t,this.lineNumber=i,this.specialHeight=n,this.prefixSum=r,this.maximumSpecialHeight=n,this.deleted=!1}}class Fz{constructor(e,t){if(this._decorationIDToCustomLine=new n5,this._orderedCustomLines=[],this._pendingSpecialLinesToInsert=[],this._invalidIndex=0,this._hasPending=!1,this._defaultLineHeight=e,t.length>0){for(const i of t)this.insertOrChangeCustomLineHeight(i.decorationId,i.startLineNumber,i.endLineNumber,i.lineHeight);this.commit()}}set defaultLineHeight(e){this._defaultLineHeight=e}get defaultLineHeight(){return this._defaultLineHeight}removeCustomLineHeight(e){const t=this._decorationIDToCustomLine.get(e);if(t){this._decorationIDToCustomLine.delete(e);for(const i of t)i.deleted=!0,this._invalidIndex=Math.min(this._invalidIndex,i.index);this._hasPending=!0}}insertOrChangeCustomLineHeight(e,t,i,n){this.removeCustomLineHeight(e);for(let r=t;r<=i;r++){const o=new kpe(e,-1,r,n,0);this._pendingSpecialLinesToInsert.push(o)}this._hasPending=!0}heightForLineNumber(e){const t=this._binarySearchOverOrderedCustomLinesArray(e);return t>=0?this._orderedCustomLines[t].maximumSpecialHeight:this._defaultLineHeight}getAccumulatedLineHeightsIncludingLineNumber(e){const t=this._binarySearchOverOrderedCustomLinesArray(e);if(t>=0)return this._orderedCustomLines[t].prefixSum+this._orderedCustomLines[t].maximumSpecialHeight;if(t===-1)return this._defaultLineHeight*e;const i=-(t+1),n=this._orderedCustomLines[i-1];return n.prefixSum+n.maximumSpecialHeight+this._defaultLineHeight*(e-n.lineNumber)}onLinesDeleted(e,t){const i=t-e+1,n=this._orderedCustomLines.length,r=this._binarySearchOverOrderedCustomLinesArray(e);let o;if(r>=0){o=r;for(let d=r-1;d>=0&&this._orderedCustomLines[d].lineNumber===e;d--)o--}else o=r===-(n+1)&&r!==-1?n-1:-(r+1);const a=this._binarySearchOverOrderedCustomLinesArray(t);let l;if(a>=0){l=a;for(let d=a+1;d<n&&this._orderedCustomLines[d].lineNumber===t;d++)l++}else l=a===-(n+1)&&a!==-1?n-1:-(a+1);const c=l>o,h=l===o&&this._orderedCustomLines[o]&&this._orderedCustomLines[o].lineNumber>=e&&this._orderedCustomLines[o].lineNumber<=t;if(c||h){let d=0;for(let P=o;P<=l;P++)d=Math.max(d,this._orderedCustomLines[P].maximumSpecialHeight);let g=0;if(o>0){const P=this._orderedCustomLines[o-1];g=P.prefixSum+P.maximumSpecialHeight+this._defaultLineHeight*(e-P.lineNumber-1)}else g=e>0?(e-1)*this._defaultLineHeight:0;const _=this._orderedCustomLines[o],b=this._orderedCustomLines[l],C=this._orderedCustomLines[l+1],S=C&&C.lineNumber===t+1?C.maximumSpecialHeight:this._defaultLineHeight,E=b.prefixSum+b.maximumSpecialHeight-_.prefixSum+this._defaultLineHeight*(t-b.lineNumber)+this._defaultLineHeight*(_.lineNumber-e)+S-d,x=new Set,T=[],N=new n5;let A=0;for(let P=0;P<this._orderedCustomLines.length;P++){const O=this._orderedCustomLines[P];if(P<o)T.push(O),N.add(O.decorationId,O);else if(P>=o&&P<=l){const V=O.decorationId;x.has(V)?A++:(O.index-=A,O.lineNumber=e,O.prefixSum=g,O.maximumSpecialHeight=d,T.push(O),N.add(O.decorationId,O))}else P>l&&(O.index-=A,O.lineNumber-=i,O.prefixSum-=E,T.push(O),N.add(O.decorationId,O));x.add(O.decorationId)}this._orderedCustomLines=T,this._decorationIDToCustomLine=N}else{const d=i*this._defaultLineHeight;for(let g=l;g<this._orderedCustomLines.length;g++){const _=this._orderedCustomLines[g];_.lineNumber>t&&(_.lineNumber-=i,_.prefixSum-=d)}}}onLinesInserted(e,t){const i=t-e+1,n=this._binarySearchOverOrderedCustomLinesArray(e);let r;if(n>=0){r=n;for(let h=n-1;h>=0&&this._orderedCustomLines[h].lineNumber===e;h--)r--}else r=-(n+1);const o=[],a=new Set;for(let h=r;h<this._orderedCustomLines.length;h++)this._orderedCustomLines[h].lineNumber===e&&a.add(this._orderedCustomLines[h].decorationId);const l=new Set;for(let h=r-1;h>=0;h--)this._orderedCustomLines[h].lineNumber===e-1&&l.add(this._orderedCustomLines[h].decorationId);const c=QY(l,a);for(let h=r;h<this._orderedCustomLines.length;h++)this._orderedCustomLines[h].lineNumber+=i,this._orderedCustomLines[h].prefixSum+=this._defaultLineHeight*i;if(c.size>0){for(const h of c){const d=this._decorationIDToCustomLine.get(h);if(d){const g=d.reduce((C,S)=>Math.min(C,S.lineNumber),e),_=d.reduce((C,S)=>Math.max(C,S.lineNumber),e),b=d.reduce((C,S)=>Math.max(C,S.specialHeight),0);o.push({decorationId:h,startLineNumber:g,endLineNumber:_,lineHeight:b})}}for(const h of o)this.insertOrChangeCustomLineHeight(h.decorationId,h.startLineNumber,h.endLineNumber,h.lineHeight);this.commit()}}commit(){if(!this._hasPending)return;for(const r of this._pendingSpecialLinesToInsert){const o=this._binarySearchOverOrderedCustomLinesArray(r.lineNumber),a=o>=0?o:-(o+1);this._orderedCustomLines.splice(a,0,r),this._invalidIndex=Math.min(this._invalidIndex,a)}this._pendingSpecialLinesToInsert=[];const e=new n5,t=[];for(let r=0;r<this._invalidIndex;r++){const o=this._orderedCustomLines[r];t.push(o),e.add(o.decorationId,o)}let i=0,n=this._invalidIndex>0?t[this._invalidIndex-1]:void 0;for(let r=this._invalidIndex;r<this._orderedCustomLines.length;r++){const o=this._orderedCustomLines[r];if(o.deleted){i++;continue}if(o.index=r-i,n&&n.lineNumber===o.lineNumber)o.maximumSpecialHeight=n.maximumSpecialHeight,o.prefixSum=n.prefixSum;else{let a=o.specialHeight;for(let c=r;c<this._orderedCustomLines.length;c++){const h=this._orderedCustomLines[c];if(!h.deleted){if(h.lineNumber!==o.lineNumber)break;a=Math.max(a,h.specialHeight)}}o.maximumSpecialHeight=a;let l;n?l=n.prefixSum+n.maximumSpecialHeight+this._defaultLineHeight*(o.lineNumber-n.lineNumber-1):l=this._defaultLineHeight*(o.lineNumber-1),o.prefixSum=l}n=o,t.push(o),e.add(o.decorationId,o)}this._orderedCustomLines=t,this._decorationIDToCustomLine=e,this._invalidIndex=1/0,this._hasPending=!1}_binarySearchOverOrderedCustomLinesArray(e){return Lj(this._orderedCustomLines.length,t=>{const i=this._orderedCustomLines[t];return i.lineNumber===e?0:i.lineNumber<e?-1:1})}}class n5{constructor(){this._map=new Map}add(e,t){const i=this._map.get(e);i?i.push(t):this._map.set(e,[t])}get(e){return this._map.get(e)}delete(e){this._map.delete(e)}}class Epe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,n=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,n)}}class Tpe{constructor(e,t,i,n,r){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=n,this.minWidth=r,this.prefixSum=0}}var sp;let Dpe=(sp=class{constructor(e,t,i,n,r){this._instanceId=oG(++sp.INSTANCE_COUNT),this._pendingChanges=new Epe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._paddingTop=i,this._paddingBottom=n,this._lineHeightsManager=new Fz(t,r)}static findInsertionIndex(e,t,i){let n=0,r=e.length;for(;n<r;){const o=n+r>>>1;t===e[o].afterLineNumber?i<e[o].ordinal?r=o:n=o+1:t<e[o].afterLineNumber?r=o:n=o+1}return n}setDefaultLineHeight(e){this._lineHeightsManager.defaultLineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e,t){this._lineCount=e,this._lineHeightsManager=new Fz(this._lineHeightsManager.defaultLineHeight,t)}changeLineHeights(e){let t=!1;try{e({insertOrChangeCustomLineHeight:(n,r,o,a)=>{t=!0,this._lineHeightsManager.insertOrChangeCustomLineHeight(n,r,o,a)},removeCustomLineHeight:n=>{t=!0,this._lineHeightsManager.removeCustomLineHeight(n)}})}finally{this._lineHeightsManager.commit()}return t}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(n,r,o,a)=>{t=!0,n=n|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Tpe(l,n,r,o,a)),l},changeOneWhitespace:(n,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:n,newAfterLineNumber:r,newHeight:o})},removeWhitespace:n=>{t=!0,this._pendingChanges.remove({id:n})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const n=new Set;for(const l of i)n.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{const c=[];for(const h of l)if(!n.has(h.id)){if(r.has(h.id)){const d=r.get(h.id);h.afterLineNumber=d.newAfterLineNumber,h.height=d.newHeight}c.push(h)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_insertWhitespace(e){const t=sp.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,n=t.length;i<n;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const n=this._findWhitespaceIndex(e);if(n!==-1&&(this._arr[n].height!==i&&(this._arr[n].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,n-1)),this._arr[n].afterLineNumber!==t)){const r=this._arr[n];this._removeWhitespace(n),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const r=this._arr[i].afterLineNumber;e<=r&&r<=t?this._arr[i].afterLineNumber=e-1:r>t&&(this._arr[i].afterLineNumber-=t-e+1)}this._lineHeightsManager.onLinesDeleted(e,t)}onLinesInserted(e,t){e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,n=this._arr.length;i<n;i++){const r=this._arr[i].afterLineNumber;e<=r&&(this._arr[i].afterLineNumber+=t-e+1)}this._lineHeightsManager.onLinesInserted(e,t)}getWhitespacesTotalHeight(){return this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){const e=this._lineHeightsManager.getAccumulatedLineHeightsIncludingLineNumber(this._lineCount),t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,n=t.length-1;for(;i<=n;){const o=(n-i|0)/2|0,a=i+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else n=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){e=e|0;let i;e>1?i=this._lineHeightsManager.getAccumulatedLineHeightsIncludingLineNumber(e-1):i=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+n+this._paddingTop}getLineHeightForLineNumber(e){return this._lineHeightsManager.heightForLineNumber(e)}getVerticalOffsetAfterLineNumber(e,t=!1){e=e|0;const i=this._lineHeightsManager.getAccumulatedLineHeightsIncludingLineNumber(e),n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+n+this._paddingTop}getWhitespaceMinWidth(){if(this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:e<this._paddingTop}isInBottomPadding(e){if(this._paddingBottom===0)return!1;const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(e=e|0,e<0)return 1;const t=this._lineCount|0;let i=1,n=t;for(;i<n;){const r=(i+n)/2|0,o=this.getLineHeightForLineNumber(r),a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+o)i=r+1;else{if(e>=a)return r;n=r}}return i>t?t:i}getLinesViewportData(e,t){e=e|0,t=t|0;const i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,n=this.getVerticalOffsetForLineNumber(i)|0;let r=this._lineCount|0,o=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const a=this.getWhitespacesCount()|0;let l,c;o===-1?(o=a,c=r+1,l=0):(c=this.getAfterLineNumberForWhitespaceIndex(o)|0,l=this.getHeightForWhitespaceIndex(o)|0);let h=n,d=h;const g=5e5;let _=0;n>=g&&(_=Math.floor(n/g)*g,_=Math.floor(_/this._lineHeightsManager.defaultLineHeight)*this._lineHeightsManager.defaultLineHeight,d-=_);const b=[],C=e+(t-e)/2;let S=-1;for(let N=i;N<=r;N++){const A=this.getLineHeightForLineNumber(N);if(S===-1){const P=h,O=h+A;(P<=C&&C<O||P>C)&&(S=N)}for(h+=A,b[N-i]=d,d+=A;c===N;)d+=l,h+=l,o++,o>=a?c=r+1:(c=this.getAfterLineNumberForWhitespaceIndex(o)|0,l=this.getHeightForWhitespaceIndex(o)|0);if(h>=t){r=N;break}}S===-1&&(S=r);const E=this.getVerticalOffsetForLineNumber(r)|0;let x=i,T=r;if(x<T&&n<e&&x++,x<T){const N=this.getLineHeightForLineNumber(r);E+N>t&&T--}return{bigNumbersDelta:_,startLineNumber:i,endLineNumber:r,relativeVerticalOffset:b,centeredLineNumber:S,completelyVisibleStartLineNumber:x,completelyVisibleEndLineNumber:T,lineHeight:this._lineHeightsManager.defaultLineHeight}}getVerticalOffsetForWhitespaceIndex(e){e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeightsManager.getAccumulatedLineHeightsIncludingLineNumber(t):i=0;let n;return e>0?n=this.getWhitespacesAccumulatedHeight(e-1):n=0,i+n+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const n=this.getVerticalOffsetForWhitespaceIndex(i),r=this.getHeightForWhitespaceIndex(i);if(e>=n+r)return-1;for(;t<i;){const o=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;i=o}}return t}getWhitespaceAtVerticalOffset(e){e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const n=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:i,height:n}}getWhitespaceViewportData(e,t){e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),n=this.getWhitespacesCount()-1;if(i<0)return[];const r=[];for(let o=i;o<=n;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._arr.slice(0)}getWhitespacesCount(){return this._arr.length}getIdForWhitespaceIndex(e){return e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return e=e|0,this._arr[e].height}},sp.INSTANCE_COUNT=0,sp);const Npe=125;class GS{constructor(e,t,i,n){e=e|0,t=t|0,i=i|0,n=n|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),n<0&&(n=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=n,this.scrollHeight=Math.max(i,n)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class Ipe extends pe{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new ne),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new GS(0,0,0,0),this._scrollable=this._register(new DC({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,n=t.contentHeight!==e.contentHeight;(i||n)&&this._onDidContentSizeChange.fire(new yB(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class Ape extends pe{constructor(e,t,i,n){super(),this._configuration=e;const r=this._configuration.options,o=r.get(165),a=r.get(96);this._linesLayout=new Dpe(t,r.get(75),a.top,a.bottom,i),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new Ipe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new GS(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(130)?Npe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(75)&&this._linesLayout.setDefaultLineHeight(t.get(75)),e.hasChanged(96)){const i=t.get(96);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(165)){const i=t.get(165),n=i.contentWidth,r=i.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new GS(n,o.contentWidth,r,this._getContentHeight(n,r,a)))}else this._updateHeight();e.hasChanged(130)&&this._configureSmoothScrollDuration()}onFlushed(e,t){this._linesLayout.onFlushed(e,t)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const n=this._configuration.options.get(117);return n.horizontal===2||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,i){const n=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return n.get(119)?r+=Math.max(0,t-n.get(75)-n.get(96).bottom):n.get(117).ignoreHorizontalScrollbarInContentHeight||(r+=this._getHorizontalScrollbarHeight(e,i)),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,n=e.contentWidth;this._scrollable.setScrollDimensions(new GS(t,e.contentWidth,i,this._getContentHeight(t,i,n)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new oW(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new oW(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(166),n=e.get(59),r=e.get(165);if(i.isViewportWrapping){const o=e.get(81);return t>r.contentWidth+n.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+r.verticalScrollbarWidth:t}else{const o=e.get(118)*n.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+r.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new GS(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),n=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-n,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}changeSpecialLineHeights(e){const t=this._linesLayout.changeLineHeights(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}getLineHeightForLineNumber(e){return this._linesLayout.getLineHeightForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class TL{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class Rpe{constructor(e,t,i,n){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=n}toInlineDecoration(e){return new TL(new ie(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class Mpe{constructor(e,t,i,n,r){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=n,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const n=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new se(n.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new se(n.endLineNumber,this.model.getLineMaxColumn(n.endLineNumber)),1);o=new ie(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(n,1);i=new vY(o,r),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getDecorationsOnLine(e,t=!1,i=!1){const n=new ie(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(n,t,i)}_getDecorationsInRange(e,t,i){const n=this._linesCollection.getDecorationsInRange(e,this.editorId,rN(this.configuration.options),oN(this.configuration.options),t,i),r=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let d=r;d<=o;d++)c[d-r]=[];let h=!1;for(let d=0,g=n.length;d<g;d++){const _=n[d],b=_.options;if(!Lde(this.model,_))continue;const C=this._getOrCreateViewModelDecoration(_),S=C.range;if(a[l++]=C,b.inlineClassName){const E=new TL(S,b.inlineClassName,b.inlineClassNameAffectsLetterSpacing?3:0),x=Math.max(r,S.startLineNumber),T=Math.min(o,S.endLineNumber);for(let N=x;N<=T;N++)c[N-r].push(E)}if(b.beforeContentClassName&&r<=S.startLineNumber&&S.startLineNumber<=o){const E=new TL(new ie(S.startLineNumber,S.startColumn,S.startLineNumber,S.startColumn),b.beforeContentClassName,1);c[S.startLineNumber-r].push(E)}if(b.afterContentClassName&&r<=S.endLineNumber&&S.endLineNumber<=o){const E=new TL(new ie(S.endLineNumber,S.endColumn,S.endLineNumber,S.endColumn),b.afterContentClassName,2);c[S.endLineNumber-r].push(E)}b.affectsFont&&(h=!0)}return{decorations:a,inlineDecorations:c,hasVariableFonts:h}}}function s5(s,e){return s===null?e?nI.INSTANCE:sI.INSTANCE:new Ope(s,e)}class Ope{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const n=i>0?this._projectionData.breakOffsets[i-1]:0,r=this._projectionData.breakOffsets[i];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,h)=>new ch(0,0,c+1,this._projectionData.injectionOptions[h],0));o=ch.applyInjectedText(e.getLineContent(t),a).substring(n,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:n+1,endLineNumber:t,endColumn:r+1});return i>0&&(o=Vz(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const n=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],n),n[0]}getViewLinesData(e,t,i,n,r,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,h=l.injectionOptions;let d=null;if(c){d=[];let _=0,b=0;for(let C=0;C<l.getOutputLineCount();C++){const S=new Array;d[C]=S;const E=C>0?l.breakOffsets[C-1]:0,x=l.breakOffsets[C];for(;b<c.length;){const T=h[b].content.length,N=c[b]+_,A=N+T;if(N>x)break;if(E<A){const P=h[b];if(P.inlineClassName){const O=C>0?l.wrappedTextIndentLength:0,V=O+Math.max(N-E,0),U=O+Math.min(A-E,x-E);V!==U&&S.push(new Rpe(V,U,P.inlineClassName,P.inlineClassNameAffectsLetterSpacing))}}if(A<=x)_+=T,b++;else break}}}let g;if(c){const _=[];for(let b=0;b<c.length;b++){const C=c[b],S=h[b].tokens;S?S.forEach((E,x)=>{_.push({offset:C,text:E.substring(h[b].content),tokenMetadata:x.metadata})}):_.push({offset:C,text:h[b].content,tokenMetadata:Ts.defaultTokenMetadata})}g=e.tokenization.getLineTokens(t).withInserted(_)}else g=e.tokenization.getLineTokens(t);for(let _=i;_<i+n;_++){const b=r+_-i;if(!o[b]){a[b]=null;continue}a[b]=this._getViewLineData(g,d?d[_]:null,_)}}_getViewLineData(e,t,i){this._assertVisible();const n=this._projectionData,r=i>0?n.wrappedTextIndentLength:0,o=i>0?n.breakOffsets[i-1]:0,a=n.breakOffsets[i],l=e.sliceAndInflate(o,a,r);let c=l.getLineContent();i>0&&(c=Vz(n.wrappedTextIndentLength)+c);const h=this._projectionData.getMinOutputOffset(i)+1,d=c.length+1,g=i+1<this.getViewLineCount(),_=i===0?0:n.breakOffsetsVisibleColumn[i-1];return new HP(c,g,h,d,_,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const n=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(n)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const SA=class SA{constructor(){}isVisible(){return!0}setVisible(e){return e?this:sI.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const n=e.tokenization.getLineTokens(t),r=n.getLineContent();return new HP(r,!1,1,r.length+1,0,n.inflate(),null)}getViewLinesData(e,t,i,n,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new se(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};SA.INSTANCE=new SA;let nI=SA;const LA=class LA{constructor(){}isVisible(){return!1}setVisible(e){return e?nI.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,n,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};LA.INSTANCE=new LA;let sI=LA;const r5=[""];function Vz(s){if(s>=r5.length)for(let e=1;e<=s;e++)r5[e]=Ppe(e);return r5[s]}function Ppe(s){return new Array(s+1).join(" ")}class Bpe{constructor(e){this._model=e}_validPosition(e){return this._model.validatePosition(e)}_validRange(e){return this._model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class Fpe{constructor(e,t,i,n,r,o,a,l,c,h,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=n,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=h,this.wrapOnEscapedLineFeeds=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new Hpe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),n=this.model.getInjectedTextDecorations(this._editorId),r=i.length,o=this.createLineBreaksComputer(),a=new _g(ch.fromDecorations(n));for(let C=0;C<r;C++){const S=a.takeWhile(E=>E.lineNumber===C+1);o.addRequest(i[C],S,t?t[C]:null)}const l=o.finalize(),c=[],h=this.hiddenAreasDecorationIds.map(C=>this.model.getDecorationRange(C)).sort(ie.compareRangesUsingStarts);let d=1,g=0,_=-1,b=_+1<h.length?g+1:r+2;for(let C=0;C<r;C++){const S=C+1;S===b&&(_++,d=h[_].startLineNumber,g=h[_].endLineNumber,b=_+1<h.length?g+1:r+2);const E=S>=d&&S<=g,x=s5(l[C],!E);c[C]=x.getViewLineCount(),this.modelLineProjections[C]=x}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new hae(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(g=>this.model.validateRange(g)),i=Vpe(t),n=this.hiddenAreasDecorationIds.map(g=>this.model.getDecorationRange(g)).sort(ie.compareRangesUsingStarts);if(i.length===n.length){let g=!1;for(let _=0;_<i.length;_++)if(!i[_].equalsRange(n[_])){g=!0;break}if(!g)return!1}const r=i.map(g=>({range:g,options:ks.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,r);const o=i;let a=1,l=0,c=-1,h=c+1<o.length?l+1:this.modelLineProjections.length+2,d=!1;for(let g=0;g<this.modelLineProjections.length;g++){const _=g+1;_===h&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,h=c+1<o.length?l+1:this.modelLineProjections.length+2);let b=!1;if(_>=a&&_<=l?this.modelLineProjections[g].isVisible()&&(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!1),b=!0):(d=!0,this.modelLineProjections[g].isVisible()||(this.modelLineProjections[g]=this.modelLineProjections[g].setVisible(!0),b=!0)),b){const C=this.modelLineProjections[g].getViewLineCount();this.projectedModelLineLineCounts.setValue(g,C)}}return d||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,n,r){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===n,h=this.wordBreak===r;if(o&&a&&l&&c&&h)return!1;const d=o&&a&&!l&&c&&h;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=n,this.wordBreak=r;let g=null;if(d){g=[];for(let _=0,b=this.modelLineProjections.length;_<b;_++)g[_]=this.modelLineProjections[_].getProjectionData()}return this._constructLines(!1,g),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak,this.wrapOnEscapedLineFeeds)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const n=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new r9(n,r)}onModelLinesInserted(e,t,i,n){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let h=0,d=n.length;h<d;h++){const g=s5(n[h],!r);l.push(g);const _=g.getViewLineCount();a+=_,c[h]=_}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new o9(o,o+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const n=t-1,r=this.modelLineProjections[n].getViewLineCount(),o=this.modelLineProjections[n].isVisible(),a=s5(i,o);this.modelLineProjections[n]=a;const l=this.modelLineProjections[n].getViewLineCount();let c=!1,h=0,d=-1,g=0,_=-1,b=0,C=-1;r>l?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=h+l-1,b=d+1,C=b+(r-l)-1,c=!0):r<l?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=h+r-1,g=d+1,_=g+(l-r)-1,c=!0):(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=h+l-1),this.projectedModelLineLineCounts.setValue(n,l);const S=h<=d?new iZ(h,d-h+1):null,E=g<=_?new o9(g,_):null,x=b<=C?new r9(b,C):null;return[c,S,E,x]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(n.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,n=t.remainder;return new Hz(i+1,n)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new se(e.modelLineNumber,n)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),n=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new se(e.modelLineNumber,n)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),n=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=n.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const h=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,d=l===n.modelLineNumber?n.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let g=h;g<d;g++)a.push(new Hz(l,g))}if(!c.isVisible()&&o){const h=new se(l-1,this.model.getLineMaxColumn(l-1)+1),d=ie.fromPositions(o,h);r.push(new Wz(d,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new se(l,1))}if(o){const l=ie.fromPositions(o,this.getModelEndPositionOfViewLine(n));r.push(new Wz(l,a))}return r}getViewLinesBracketGuides(e,t,i,n){const r=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,n);for(const h of a.viewLines){const g=c[h.modelLineNumber-l].map(_=>{if(_.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[h.modelLineNumber-1].getViewPositionOfModelPosition(0,_.forWrappedLinesAfterColumn).lineNumber>=h.modelLineWrappedLineIdx||_.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[h.modelLineNumber-1].getViewPositionOfModelPosition(0,_.forWrappedLinesBeforeOrAtColumn).lineNumber<h.modelLineWrappedLineIdx)return;if(!_.horizontalLine)return _;let b=-1;if(_.column!==-1){const E=this.modelLineProjections[h.modelLineNumber-1].getViewPositionOfModelPosition(0,_.column);if(E.lineNumber===h.modelLineWrappedLineIdx)b=E.column;else if(E.lineNumber<h.modelLineWrappedLineIdx)b=this.getMinColumnOfViewLine(h);else if(E.lineNumber>h.modelLineWrappedLineIdx)return}const C=this.convertModelPositionToViewPosition(h.modelLineNumber,_.horizontalLine.endColumn),S=this.modelLineProjections[h.modelLineNumber-1].getViewPositionOfModelPosition(0,_.horizontalLine.endColumn);return S.lineNumber===h.modelLineWrappedLineIdx?new k1(_.visibleColumn,b,_.className,new mL(_.horizontalLine.top,C.column),-1,-1):S.lineNumber<h.modelLineWrappedLineIdx||_.visibleColumn!==-1?void 0:new k1(_.visibleColumn,b,_.className,new mL(_.horizontalLine.top,this.getMaxColumnOfViewLine(h)),-1,-1)});o.push(g.filter(_=>!!_))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),n=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[];const o=[],a=[],l=i.lineNumber-1,c=n.lineNumber-1;let h=null;for(let b=l;b<=c;b++){const C=this.modelLineProjections[b];if(C.isVisible()){const S=C.getViewLineNumberOfModelPosition(0,b===l?i.column:1),E=C.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(b+1)),x=E-S+1;let T=0;x>1&&C.getViewLineMinColumn(this.model,b+1,E)===1&&(T=S===0?1:2),o.push(x),a.push(T),h===null&&(h=new se(b+1,0))}else h!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,b)),h=null)}h!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,n.lineNumber)),h=null);const d=t-e+1,g=new Array(d);let _=0;for(let b=0,C=r.length;b<C;b++){let S=r[b];const E=Math.min(d-_,o[b]),x=a[b];let T;x===2?T=0:x===1?T=1:T=E;for(let N=0;N<E;N++)N===T&&(S=0),g[_++]=S}return g}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.projectedModelLineLineCounts.getIndexOf(e-1);let r=e;const o=n.index,a=n.remainder,l=[];for(let c=o,h=this.model.getLineCount();c<h;c++){const d=this.modelLineProjections[c];if(!d.isVisible())continue;const g=c===o?a:0;let _=d.getViewLineCount()-g,b=!1;if(r+_>t&&(b=!0,_=t-r+1),d.getViewLinesData(this.model,c+1,g,_,r-e,i,l),r+=_,b)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const n=this.projectedModelLineLineCounts.getIndexOf(e-1),r=n.index,o=n.remainder,a=this.modelLineProjections[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);const h=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new se(r+1,h)).equals(i)?new se(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),n=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new ie(i.lineNumber,i.column,n.lineNumber,n.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),n=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new se(i.modelLineNumber,n))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new ie(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,n=!1,r=!1){const o=this.model.validatePosition(new se(e,t)),a=o.lineNumber,l=o.column;let c=a-1,h=!1;if(r)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,h=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,h=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new se(n?0:1,1);const d=1+this.projectedModelLineLineCounts.getPrefixSum(c);let g;return h?r?g=this.modelLineProjections[c].getViewPositionOfModelPosition(d,1,i):g=this.modelLineProjections[c].getViewPositionOfModelPosition(d,this.model.getLineMaxColumn(c+1),i):g=this.modelLineProjections[a-1].getViewPositionOfModelPosition(d,l,i),g}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return ie.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new ie(i.lineNumber,i.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const r=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(r,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const n=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(n,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,n,r,o){const a=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),l=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(l.lineNumber-a.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new ie(a.lineNumber,1,l.lineNumber,l.column),t,i,n,r,o);let c=[];const h=a.lineNumber-1,d=l.lineNumber-1;let g=null;for(let S=h;S<=d;S++)if(this.modelLineProjections[S].isVisible())g===null&&(g=new se(S+1,S===h?a.column:1));else if(g!==null){const x=this.model.getLineMaxColumn(S);c=c.concat(this.model.getDecorationsInRange(new ie(g.lineNumber,g.column,S,x),t,i,n,r)),g=null}g!==null&&(c=c.concat(this.model.getDecorationsInRange(new ie(g.lineNumber,g.column,l.lineNumber,l.column),t,i,n,r)),g=null),c.sort((S,E)=>{const x=ie.compareRangesUsingStarts(S.range,E.range);return x===0?S.id<E.id?-1:S.id>E.id?1:0:x});const _=[];let b=0,C=null;for(const S of c){const E=S.id;C!==E&&(C=E,_[b++]=S)}return _}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function Vpe(s){if(s.length===0)return[];const e=s.slice();e.sort(ie.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,n=e[0].endLineNumber;for(let r=1,o=e.length;r<o;r++){const a=e[r];a.startLineNumber>n+1?(t.push(new ie(i,1,n,1)),i=a.startLineNumber,n=a.endLineNumber):a.endLineNumber>n&&(n=a.endLineNumber)}return t.push(new ie(i,1,n,1)),t}class Hz{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class Wz{constructor(e,t){this.modelRange=e,this.viewLines=t}}class Hpe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,n){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,n)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class Wpe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new Bpe(this.model)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,n){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,n)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new r9(t,i)}onModelLinesInserted(e,t,i,n){return new o9(t,i)}onModelLineChanged(e,t,i){return[!1,new iZ(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,n=new Array(i);for(let r=0;r<i;r++)n[r]=0;return n}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new HP(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const n=this.model.getLineCount();e=Math.min(Math.max(1,e),n),t=Math.min(Math.max(1,t),n);const r=[];for(let o=e;o<=t;o++){const a=o-e;r[a]=i[a]?this.getViewLineData(o):null}return r}getDecorationsInRange(e,t,i,n,r,o){return this.model.getDecorationsInRange(e,t,i,n,r,o)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}const O_=lp.Right;class zpe{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*O_/8))}reset(e){const t=Math.ceil((e+1)*O_/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let n=t.startLineNumber;n<=t.endLineNumber;n++){const r=O_*n+(e-1);this.lanes[r>>>3]|=1<<r%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(n))}}getLanesAtLine(e){const t=[];let i=O_*e;for(let n=0;n<O_;n++)(this.persist&1<<n||this.lanes[i>>>3]&1<<i%8)&&t.push(n+1),i++;return t.length?t:[lp.Center]}countAtLine(e){let t=O_*e,i=0;for(let n=0;n<O_;n++)(this.persist&1<<n||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let Upe=class extends pe{constructor(e,t,i,n,r,o,a,l,c,h){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=h,this.hiddenAreasModel=new $pe,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new ape,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Lv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Or(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=LB.create(this.model),this.glyphLanes=new zpe(0),this.model.isTooLargeForTokenization())this._lines=new Wpe(this.model);else{const d=this._configuration.options,g=d.get(59),_=d.get(156),b=d.get(166),C=d.get(155),S=d.get(146),E=d.get(160);this._lines=new Fpe(this._editorId,this.model,n,r,g,this.model.getOptions().tabSize,_,b.wrappingColumn,C,S,E)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Cpe(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new Ape(this._configuration,this.getLineCount(),this._getCustomLineHeights(),o)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._handleVisibleLinesChanged(),d.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new ipe(d)),this._eventDispatcher.emitOutgoingEvent(new SB(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new Mpe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const g=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(g,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register($N.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new rpe)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new npe(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_getCustomLineHeights(){return this._configuration.options.get(5)?this.model.getCustomLineHeightsDecorations(this._editorId).map(i=>{const n=i.range.startLineNumber,r=this.coordinatesConverter.convertModelRangeToViewRange(new ie(n,1,n,this.model.getLineMaxColumn(n)));return{decorationId:i.id,startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,lineHeight:i.options.lineHeight||0}}):[]}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new ie(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new epe(e)),this._eventDispatcher.emitOutgoingEvent(new AR(!e,e))}setHasWidgetFocus(e){this._eventDispatcher.emitOutgoingEvent(new cpe(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new Zme)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new Xme)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new se(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new Uz(t,this._viewportStart.startLineDelta)}return new Uz(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),n=this._configuration.options,r=n.get(59),o=n.get(156),a=n.get(166),l=n.get(155),c=n.get(146);this._lines.setWrappingSettings(r,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new OT),e.emitViewEvent(new PT),e.emitViewEvent(new M_(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount(),this._getCustomLineHeights()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(104)&&(this._decorations.reset(),e.emitViewEvent(new M_(null))),t.hasChanged(112)&&(this._decorations.reset(),e.emitViewEvent(new M_(null))),e.emitViewEvent(new Qme(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),Lv.shouldRecreate(t)&&(this.cursorConfig=new Lv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(i=>{try{const r=this._eventDispatcher.beginEmitViewEvents();let o=!1,a=!1;const l=i instanceof z1?i.rawContentChangedEvent.changes:i.changes,c=i instanceof z1?i.rawContentChangedEvent.versionId:null,h=this._lines.createLineBreaksComputer();for(const _ of l)switch(_.changeType){case 4:{for(let b=0;b<_.detail.length;b++){const C=_.detail[b];let S=_.injectedTexts[b];S&&(S=S.filter(E=>!E.ownerId||E.ownerId===this._editorId)),h.addRequest(C,S,null)}break}case 2:{let b=null;_.injectedText&&(b=_.injectedText.filter(C=>!C.ownerId||C.ownerId===this._editorId)),h.addRequest(_.detail,b,null);break}}const d=h.finalize(),g=new _g(d);for(const _ of l)switch(_.changeType){case 1:{this._lines.onModelFlushed(),r.emitViewEvent(new OT),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount(),this._getCustomLineHeights()),o=!0;break}case 3:{const b=this._lines.onModelLinesDeleted(c,_.fromLineNumber,_.toLineNumber);b!==null&&(r.emitViewEvent(b),this.viewLayout.onLinesDeleted(b.fromLineNumber,b.toLineNumber)),o=!0;break}case 4:{const b=g.takeCount(_.detail.length),C=this._lines.onModelLinesInserted(c,_.fromLineNumber,_.toLineNumber,b);C!==null&&(r.emitViewEvent(C),this.viewLayout.onLinesInserted(C.fromLineNumber,C.toLineNumber)),o=!0;break}case 2:{const b=g.dequeue(),[C,S,E,x]=this._lines.onModelLineChanged(c,_.lineNumber,b);a=C,S&&r.emitViewEvent(S),E&&(r.emitViewEvent(E),this.viewLayout.onLinesInserted(E.fromLineNumber,E.toLineNumber)),x&&(r.emitViewEvent(x),this.viewLayout.onLinesDeleted(x.fromLineNumber,x.toLineNumber));break}case 5:break}c!==null&&this._lines.acceptVersionId(c),this.viewLayout.onHeightMaybeChanged(),!o&&a&&(r.emitViewEvent(new PT),r.emitViewEvent(new M_(null)),this._cursor.onLineMappingChanged(r),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const n=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&n){const r=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(r){const o=this.coordinatesConverter.convertModelPositionToViewPosition(r.getStartPosition()),a=this.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber);this.viewLayout.setScrollPosition({scrollTop:a+this._viewportStart.startLineDelta},1)}}try{const r=this._eventDispatcher.beginEmitViewEvents();i instanceof z1&&r.emitOutgoingEvent(new ppe(i.contentChangedEvent)),this._cursor.onModelContentChanged(r,i)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._configuration.options.get(5)&&this._register(this.model.onDidChangeLineHeight(i=>{const n=i.changes.filter(r=>r.ownerId===this._editorId||r.ownerId===0);if(this.viewLayout.changeSpecialLineHeights(r=>{for(const o of n){const{decorationId:a,lineNumber:l,lineHeight:c}=o,h=this.coordinatesConverter.convertModelRangeToViewRange(new ie(l,1,l,this.model.getLineMaxColumn(l)));c!==null?r.insertOrChangeCustomLineHeight(a,h.startLineNumber,h.endLineNumber,c):r.removeCustomLineHeight(a)}}),n.length>0){const r=new DY(n);this._eventDispatcher.emitOutgoingEvent(new vpe(r))}})),this._configuration.options.get(172)&&this._register(this.model.onDidChangeFont(i=>{const n=i.changes.filter(r=>r.ownerId===this._editorId||r.ownerId===0);if(n.length>0){const r=new NY(n);this._eventDispatcher.emitOutgoingEvent(new wpe(r))}})),this._register(this.model.onDidChangeTokens(i=>{const n=[];for(let r=0,o=i.ranges.length;r<o;r++){const a=i.ranges[r],l=this.coordinatesConverter.convertModelPositionToViewPosition(new se(a.fromLineNumber,1)).lineNumber,c=this.coordinatesConverter.convertModelPositionToViewPosition(new se(a.toLineNumber,this.model.getLineMaxColumn(a.toLineNumber))).lineNumber;n[r]={fromLineNumber:l,toLineNumber:c}}this._eventDispatcher.emitSingleViewEvent(new spe(n)),this._eventDispatcher.emitOutgoingEvent(new bpe(i))})),this._register(this.model.onDidChangeLanguageConfiguration(i=>{this._eventDispatcher.emitSingleViewEvent(new tpe),this.cursorConfig=new Lv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new mpe(i))})),this._register(this.model.onDidChangeLanguage(i=>{this.cursorConfig=new Lv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new gpe(i))})),this._register(this.model.onDidChangeOptions(i=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const n=this._eventDispatcher.beginEmitViewEvents();n.emitViewEvent(new OT),n.emitViewEvent(new PT),n.emitViewEvent(new M_(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount(),this._getCustomLineHeights())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Lv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new _pe(i))})),this._register(this.model.onDidChangeDecorations(i=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new M_(i)),this._eventDispatcher.emitOutgoingEvent(new fpe(i))}))}getFontSizeAtPosition(e){if(!this._configuration.options.get(172))return null;const i=this.model.getFontDecorationsInRange(ie.fromPositions(e),this._editorId);let n=this._configuration.options.get(59).fontSize+"px";for(const r of i)if(r.options.fontSize){n=r.options.fontSize;break}return n}setHiddenAreas(e,t,i){this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas&&!i)return;this.previousHiddenAreas=n;const r=this._captureStableViewport();let o=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(n),o&&(a.emitViewEvent(new OT),a.emitViewEvent(new PT),a.emitViewEvent(new M_(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount(),this._getCustomLineHeights()),this.viewLayout.onHeightMaybeChanged());const l=r.viewportStartModelPosition?.lineNumber;l&&n.some(h=>h.startLineNumber<=l&&l<=h.endLineNumber)||r.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new hpe)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(165),t=this._configuration.options.get(75),i=Math.max(20,Math.round(e.height/t)),n=this.viewLayout.getLinesViewportData(),r=Math.max(1,n.completelyVisibleStartLineNumber-i),o=Math.min(this.getLineCount(),n.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new ie(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const n=[];let r=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let h=0,d=i.length;h<d;h++){const g=i[h].startLineNumber,_=i[h].endLineNumber;_<o||g>l||(o<g&&(n[r++]=new ie(o,a,g-1,this.model.getLineMaxColumn(g-1))),o=_+1,a=1)}return(o<l||o===l&&a<c)&&(n[r++]=new ie(o,a,l,c)),n}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new ie(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,n=t.completelyVisibleEndLineNumber;return new ie(i,this.getLineMinColumn(i),n,this.getLineMaxColumn(n))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),n=this.coordinatesConverter.convertViewPositionToModelPosition(new se(i,this.getLineMinColumn(i))),r=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:n,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),n=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:n}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,n){return this._lines.getViewLinesBracketGuides(e,t,i,n)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Pa(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=I0(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}_getTextDirection(e,t){let i=0;for(const n of t){const r=n.range;if(r.startLineNumber>e||r.endLineNumber<e)continue;const o=n.options.textDirection;o===El.RTL?i++:o===El.LTR&&i--}return i>0?El.RTL:El.LTR}getTextDirection(e){const t=this._decorations.getDecorationsOnLine(e);return this._getTextDirection(e,t.decorations)}getViewportViewLineRenderingData(e,t){const i=this._decorations.getDecorationsViewportData(e),n=i.inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n,i.hasVariableFonts,i.decorations)}getViewLineRenderingData(e){const t=this._decorations.getDecorationsOnLine(e);return this._getViewLineRenderingData(e,t.inlineDecorations[0],t.hasVariableFonts,t.decorations)}_getViewLineRenderingData(e,t,i,n){const r=this.model.mightContainRTL(),o=this.model.mightContainNonBasicASCII(),a=this.getTabSize(),l=this._lines.getViewLineData(e);return l.inlineDecorations&&(t=[...t,...l.inlineDecorations.map(c=>c.toInlineDecoration(e))]),new Rl(l.minColumn,l.maxColumn,l.content,l.continuesWithWrappedLine,r,o,l.tokens,t,a,l.startVisibleColumn,this._getTextDirection(e,n),i)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const n=this._lines.getViewLinesData(e,t,i);return new Mae(this.getTabSize(),n)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,rN(this._configuration.options),oN(this._configuration.options)),i=new qpe;for(const n of t){const r=n.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.startLineNumber,n.range.startColumn),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(n.range.endLineNumber,n.range.endColumn);i.accept(l,r.zIndex,c,h,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e)t.options.overviewRuler?.invalidateCachedColor(),t.options.minimap?.invalidateCachedColor()}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),n=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(n)}deduceModelPositionRelativeToViewPosition(e,t,i){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const o=this.model.getOffsetAt(n)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,i){const n=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(ie.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(h=>h.startLineNumber);let c="";for(let h=0;h<l.length;h++)h>0&&l[h-1]===l[h]||(c+=this.model.getLineContent(l[h])+n);return c}if(r&&t){const l=[];let c=0;for(const h of e){const d=h.startLineNumber;h.isEmpty()?d!==c&&l.push(this.model.getLineContent(d)):l.push(this.model.getValueInRange(h,i?2:0)),c=d}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===ru||e.length!==1)return null;let n=e[0];if(n.isEmpty()){if(!t)return null;const h=n.startLineNumber;n=new ie(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const r=this._configuration.options.get(59),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===Nl.fontFamily;let c;return l?c=Nl.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Nl.fontFamily}`),{mode:i,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(n,o)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,n=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=r;c++){const h=this.model.tokenization.getLineTokens(c),d=h.getLineContent(),g=c===i?n-1:0,_=c===r?o-1:d.length;d===""?l+="<br>":l+=xpe(d,h.inflate(),t,g,_,a,ia)}return l}_getColorMap(){const e=es.getColorMap(),t=["#000000"];if(e)for(let i=1,n=e.length;i<n;i++)t[i]=xe.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(n=>this._cursor.setStates(n,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(n=>this._cursor.setSelections(n,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new dpe);return}this._withViewEventsCollector(e)}executeEdits(e,t,i,n){this._executeCursorEdit(r=>this._cursor.executeEdits(r,e,t,i,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,n,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,i,n,r))}paste(e,t,i,n){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,i,n))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealAll(n,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new ie(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new xL(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new ie(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(n=>n.emitViewEvent(new xL(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,n,r){this._withViewEventsCollector(o=>o.emitViewEvent(new xL(e,!1,i,null,n,t,r)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new ope),this._eventDispatcher.emitOutgoingEvent(new upe))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class LB{static create(e){const t=e._setTrackedRange(null,new ie(1,1,1,1),1);return new LB(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,n,r){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=n,this._startLineDelta=r}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new se(t,e.getLineMinColumn(t))),n=e.model._setTrackedRange(this._modelTrackedRange,new ie(i.lineNumber,i.column,i.lineNumber,i.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=n,this._startLineDelta=o-r}invalidate(){this._isValid=!1}}class qpe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,n,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=i){n>c&&(a[a.length-1]=n);return}a.push(r,i,n)}else{const a=new Nx(e,t,[r,i,n]);this._asMap[e]=a,this.asArray.push(a)}}}class $pe{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&zz(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>jpe(t,i),[]);return zz(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function jpe(s,e){const t=[];let i=0,n=0;for(;i<s.length&&n<e.length;){const r=s[i],o=e[n];if(r.endLineNumber<o.startLineNumber-1)t.push(s[i++]);else if(o.endLineNumber<r.startLineNumber-1)t.push(e[n++]);else{const a=Math.min(r.startLineNumber,o.startLineNumber),l=Math.max(r.endLineNumber,o.endLineNumber);t.push(new ie(a,1,l,1)),i++,n++}}for(;i<s.length;)t.push(s[i++]);for(;n<e.length;)t.push(e[n++]);return t}function zz(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].equalsRange(e[t]))return!1;return!0}class Uz{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),n=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:n+this.startLineDelta},1)}}class IC{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}var Gpe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Nf=function(s,e){return function(t,i){e(t,i,s)}},q_,Z1;let rI=(Z1=class extends pe{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}get contextKeyService(){return this._contextKeyService}constructor(e,t,i,n,r,o,a,l,c,h,d,g){super(),this.languageConfigurationService=d,this._deliveryQueue=eie(),this._contributions=this._register(new sge),this._onDidDispose=this._register(new ne),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeLineHeight=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeLineHeight=this._onDidChangeLineHeight.event,this._onDidChangeFont=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeFont=this._onDidChangeFont.event,this._onDidChangeModelTokens=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new qz({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new qz({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new ne({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onWillTriggerEditorOperationEvent=this._register(new ne),this._onBeginUpdate=this._register(new ne),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new ne),this.onEndUpdate=this._onEndUpdate.event,this._onBeforeExecuteEdit=this._register(new ne),this.onBeforeExecuteEdit=this._onBeforeExecuteEdit.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),this.inComposition=!1,r.willCreateCodeEditor();const _={...t};if(this._domElement=e,this._overflowWidgetsDomNode=_.overflowWidgetsDomNode,delete _.overflowWidgetsDomNode,this._id=++Kpe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?ws.SimpleEditorContext:ws.EditorContext),_,h)),this._register(this._configuration.onDidChange(S=>{this._onDidChangeConfiguration.fire(S);const E=this._configuration.options;if(S.hasChanged(165)){const x=E.get(165);this._onDidLayoutChange.fire(x)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),i.contextKeyValues)for(const[S,E]of Object.entries(i.contextKeyValues))this._contextKeyService.createKey(S,E);this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new Zpe(this,this._contextKeyService)),this._register(new Xpe(this,this._contextKeyService,g)),this._instantiationService=this._register(n.createChild(new IC([ai,this._contextKeyService]))),this._modelData=null,this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let b;Array.isArray(i.contributions)?b=i.contributions:b=kw.getEditorContributions(),this._contributions.initialize(this,b,this._instantiationService);for(const S of kw.getEditorActions()){if(this._actions.has(S.id)){mi(new Error(`Cannot have two actions with the same id ${S.id}`));continue}const E=new IY(S.id,S.label,S.alias,S.metadata,S.precondition??void 0,x=>this._instantiationService.invokeFunction(T=>Promise.resolve(S.runEditorCommand(T,this,x))),this._contextKeyService);this._actions.set(E.id,E)}const C=()=>!this._configuration.options.get(104)&&this._configuration.options.get(43).enabled;this._register(new fse(this._domElement,{onDragOver:S=>{if(!C())return;const E=this.getTargetAtClientPoint(S.clientX,S.clientY);E?.position&&this.showDropIndicatorAt(E.position)},onDrop:async S=>{if(!C()||(this.removeDropIndicator(),!S.dataTransfer))return;const E=this.getTargetAtClientPoint(S.clientX,S.clientY);E?.position&&this._onDropIntoEditor.fire({position:E.position,event:S})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){this._modelData?.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,n){return new r7(e,t,i,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return BP.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Vn.getWordAtPosition(this._modelData.model,this._configuration.options.get(148),this._configuration.options.get(147),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){try{this._beginUpdate();const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const i={oldModelUrl:this._modelData?.model.uri||null,newModelUrl:t?.uri||null};this._onWillChangeModel.fire(i);const n=this.hasTextFocus(),r=this._detachModel();this._attachModel(t),this.hasModel()?n&&this.focus():(this._editorTextFocus.setValue(!1),this._editorWidgetFocus.setValue(!1)),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(r),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,n){const r=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,n)}getTopForLineNumber(e,t=!1){return this._modelData?q_._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?q_._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,n=!1){const r=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,n)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return q_._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}getLineHeightForPosition(e){if(!this._modelData)return-1;const t=this._modelData.viewModel,i=t.coordinatesConverter,n=se.lift(e);if(i.modelPositionIsVisible(n)){const r=i.convertModelPositionToViewPosition(n);return t.viewLayout.getLineHeightForLineNumber(r.lineNumber)}return 0}setHiddenAreas(e,t,i){this._modelData?.viewModel.setHiddenAreas(e.map(n=>ie.lift(n)),t,i)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return wn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!se.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,n){if(!this._modelData)return;if(!ie.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",i,o,t,n)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new ie(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,n){if(!se.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new ie(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=Yt.isISelection(e),n=ie.isIRange(e);if(!i&&!n)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new Yt(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,n){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new ie(e,1,t,1),i,!1,n)}revealRange(e,t=0,i=!1,n=!0){this._revealRange(e,i?1:0,n,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,n){if(!ie.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(ie.lift(e),t,i,n)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let n=0,r=e.length;n<r;n++)if(!Yt.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const n=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(n)}}handleInitialized(){this._getViewModel()?.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._onWillTriggerEditorOperationEvent.fire({source:e,handlerId:t,payload:i}),this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=i;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=i;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=i;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=i;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null,r.clipboardEvent);return}case"cut":this._cut(e);return}const n=this.getAction(t);if(n){Promise.resolve(n.run(i)).then(void 0,mi);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this.inComposition=!0,this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this.inComposition=!1,this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,n,r){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,r,e)}_paste(e,t,i,n,r,o){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,n,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new ie(l.lineNumber,l.column,c.lineNumber,c.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const n=kw.getEditorCommand(t);return n?(i=i||{},i.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(n.runEditorCommand(r,this,i)).then(void 0,mi)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(104)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(104)?!1:(this._modelData.model.popStackElement(),!0)}edit(e,t){return this.executeEdits(t,e.replacements.map(i=>({range:i.range,text:i.text})),void 0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(104))return!1;let n;i?Array.isArray(i)?n=()=>i:n=i:n=()=>null;let r,o;return e instanceof BY?(o=e,r=e.metadata.source):(o=lc.unknown({name:r}),r=e),this._onBeforeExecuteEdit.fire({source:r??void 0}),this._modelData.viewModel.executeEdits(r,t,n,o),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new Qpe(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){if(!this._modelData)return null;const t=this._configuration.options;return this._modelData.model.getLineDecorations(e,this._id,rN(t),oN(t))}getDecorationsInRange(e){if(!this._modelData)return null;const t=this._configuration.options;return this._modelData.model.getDecorationsInRange(e,this._id,rN(t),oN(t))}getFontSizeAtPosition(e){return this._modelData?this._modelData.viewModel.getFontSizeAtPosition(e):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(165)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isWidgetFocused()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options.get(165),r=q_._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft(),a=this.getLineHeightForPosition(t);return{top:r,left:o,height:a}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Sr(e,this._configuration.options.get(59))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),n=new Upe(this._id,this._configuration,e,cB.create(nt(this._domElement)),CB.create(this._configuration.options),a=>na(nt(this._domElement),a),this.languageConfigurationService,this._themeService,i,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._editorWidgetFocus.setValue(a.hasFocus);break;case 3:this._onDidScrollChange.fire(a);break;case 4:this._onDidChangeViewZones.fire();break;case 5:this._onDidChangeHiddenAreas.fire();break;case 6:this._onDidAttemptReadOnlyEdit.fire();break;case 7:{if(a.reachedMaxCursorCount){const d=this.getOption(89),g=y(80,"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",d);this._notificationService.prompt(SY.Warning,g,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:y(81,"Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let d=0,g=a.selections.length;d<g;d++)l[d]=a.selections[d].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const h={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(h);break}case 8:this._onDidChangeModelDecorations.fire(a.event);break;case 9:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 10:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 11:this._onDidChangeModelContent.fire(a.event);break;case 12:this._onDidChangeModelOptions.fire(a.event);break;case 13:this._onDidChangeModelTokens.fire(a.event);break;case 14:this._onDidChangeLineHeight.fire(a.event);break;case 15:this._onDidChangeFont.fire(a.event);break}}));const[r,o]=this._createView(n);if(o){this._domElement.appendChild(r.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const h=a[l];r.addContentWidget(this._contentWidgets[h])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const h=a[l];r.addOverlayWidget(this._overlayWidgets[h])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const h=a[l];r.addGlyphMarginWidget(this._glyphMarginWidgets[h])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Ype(e,n,r,o,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new NR(e.coordinatesConverter);return i.onKeyDown=r=>this._onKeyDown.fire(r),i.onKeyUp=r=>this._onKeyUp.fire(r),i.onContextMenu=r=>this._onContextMenu.fire(r),i.onMouseMove=r=>this._onMouseMove.fire(r),i.onMouseLeave=r=>this._onMouseLeave.fire(r),i.onMouseDown=r=>this._onMouseDown.fire(r),i.onMouseUp=r=>this._onMouseUp.fire(r),i.onMouseDrag=r=>this._onMouseDrag.fire(r),i.onMouseDrop=r=>this._onMouseDrop.fire(r),i.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),i.onMouseWheel=r=>this._onMouseWheel.fire(r),[new W7(this._domElement,this.getId(),t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(this._contributionsDisposable?.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new ie(e.lineNumber,e.column,e.lineNumber,e.column),options:q_.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},q_=Z1,Z1.dropIntoEditorDecorationOptions=ks.register({description:"workbench-dnd-target",className:"dnd-target"}),Z1);rI=q_=Gpe([Nf(3,Zt),Nf(4,Es),Nf(5,Ml),Nf(6,ai),Nf(7,za),Nf(8,cu),Nf(9,Ol),Nf(10,zd),Nf(11,Zi)],rI);let Kpe=0,Ype=class{constructor(e,t,i,n,r,o){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=n,this.listenersToRemove=r,this.attachedView=o}dispose(){Cs(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}};class qz extends pe{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new ne(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new ne(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Yr extends ne{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class Zpe extends pe{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Ge.editorSimpleInput.bindTo(t),this._editorFocus=Ge.focus.bindTo(t),this._textInputFocus=Ge.textInputFocus.bindTo(t),this._editorTextFocus=Ge.editorTextFocus.bindTo(t),this._tabMovesFocus=Ge.tabMovesFocus.bindTo(t),this._editorReadonly=Ge.readOnly.bindTo(t),this._inDiffEditor=Ge.inDiffEditor.bindTo(t),this._editorColumnSelection=Ge.columnSelection.bindTo(t),this._hasMultipleSelections=Ge.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Ge.hasNonEmptySelection.bindTo(t),this._canUndo=Ge.canUndo.bindTo(t),this._canRedo=Ge.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(NN.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(e.get(164)||NN.getTabFocusMode()),this._editorReadonly.set(e.get(104)),this._inDiffEditor.set(e.get(70)),this._editorColumnSelection.set(e.get(28))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class Xpe extends pe{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=Ge.languageId.bindTo(t),this._hasCompletionItemProvider=Ge.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Ge.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Ge.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Ge.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Ge.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Ge.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Ge.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Ge.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Ge.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Ge.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Ge.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Ge.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Ge.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Ge.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Ge.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Ge.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Ge.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Ge.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=Ge.isInEmbeddedEditor.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(i.completionProvider.onDidChange(n)),this._register(i.codeActionProvider.onDidChange(n)),this._register(i.codeLensProvider.onDidChange(n)),this._register(i.definitionProvider.onDidChange(n)),this._register(i.declarationProvider.onDidChange(n)),this._register(i.implementationProvider.onDidChange(n)),this._register(i.typeDefinitionProvider.onDidChange(n)),this._register(i.hoverProvider.onDidChange(n)),this._register(i.documentHighlightProvider.onDidChange(n)),this._register(i.documentSymbolProvider.onDidChange(n)),this._register(i.referenceProvider.onDidChange(n)),this._register(i.renameProvider.onDidChange(n)),this._register(i.documentFormattingEditProvider.onDidChange(n)),this._register(i.documentRangeFormattingEditProvider.onDidChange(n)),this._register(i.signatureHelpProvider.onDidChange(n)),this._register(i.inlayHintsProvider.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===mt.walkThroughSnippet||e.uri.scheme===mt.vscodeChatCodeBlock)})}}class Qpe{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(n=>{this._isChangingDecorations||e.call(t,n)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const n=e.getDecorationRange(i);n&&t.push(n)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const Jpe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),e_e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function Dv(s){return Jpe+encodeURIComponent(s.toString())+e_e}const t_e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),i_e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function $z(s){return t_e+encodeURIComponent(s.toString())+i_e}Lg((s,e)=>{const t=s.getColor(qP);t&&(e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${Dv(t)}") repeat-x bottom left; }`),e.addRule(`:root { --monaco-editor-error-decoration: url("data:image/svg+xml,${Dv(t)}"); }`));const i=s.getColor(cp);i&&(e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${Dv(i)}") repeat-x bottom left; }`),e.addRule(`:root { --monaco-editor-warning-decoration: url("data:image/svg+xml,${Dv(i)}"); }`));const n=s.getColor(p0);n&&(e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${Dv(n)}") repeat-x bottom left; }`),e.addRule(`:root { --monaco-editor-info-decoration: url("data:image/svg+xml,${Dv(n)}"); }`));const r=s.getColor(wle);r&&(e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${$z(r)}") no-repeat bottom left; }`),e.addRule(`:root { --monaco-editor-hint-decoration: url("data:image/svg+xml,${$z(r)}"); }`));const o=s.getColor(Vhe);o&&(e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`),e.addRule(`:root { --monaco-editor-unnecessary-decoration-opacity: ${o.rgba.a}; }`))});var n_e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},s_e=function(s,e){return function(t,i){e(t,i,s)}};let a9=class extends pe{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new ne),this._onCodeEditorAdd=this._register(new ne),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new ne),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new ne),this._onDiffEditorAdd=this._register(new ne),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new ne),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new ea,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const n=e.toString();let r;this._modelProperties.has(n)?r=this._modelProperties.get(n):(r=new Map,this._modelProperties.set(n,r)),r.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const n of this._codeEditorOpenHandlers){const r=await n(e,t,i);if(r!==null)return r}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return lt(t)}};a9=n_e([s_e(0,za)],a9);var r_e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},jz=function(s,e){return function(t,i){e(t,i,s)}};let oI=class extends a9{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,n,r)=>n?this.doOpenEditor(n,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===mt.http||r===mt.https)return EG(t.resource.toString()),e}return null}const n=t.options?t.options.selection:null;if(n)if(typeof n.endLineNumber=="number"&&typeof n.endColumn=="number")e.setSelection(n),e.revealRangeInCenter(n,1);else{const r={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};oI=r_e([jz(0,ai),jz(1,za)],oI);$t(Es,oI,0);const xg=At("layoutService");var nZ=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},sZ=function(s,e){return function(t,i){e(t,i,s)}};let aI=class{get mainContainer(){return this._codeEditorService.listCodeEditors().at(0)?.getContainerDomNode()??Ri.document.body}get activeContainer(){return(this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor())?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return E3(this.mainContainer)}get activeContainerDimension(){return E3(this.activeContainer)}get containers(){return V6(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Ie.None,this.onDidLayoutActiveContainer=Ie.None,this.onDidLayoutContainer=Ie.None,this.onDidChangeActiveContainer=Ie.None,this.onDidAddContainer=Ie.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};aI=nZ([sZ(0,Es)],aI);let l9=class extends aI{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};l9=nZ([sZ(1,Es)],l9);$t(xg,aI,1);const rZ=At("dialogService");var o_e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Gz=function(s,e){return function(t,i){e(t,i,s)}};function BT(s){return s.scheme===mt.file?s.fsPath:s.path}let oZ=0;class FT{constructor(e,t,i,n,r,o,a){this.id=++oZ,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=n,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Kz{constructor(e,t){this.resourceLabel=e,this.reason=t}}class Yz{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,n]of this.elements)(n.reason===0?e:t).push(n.resourceLabel);const i=[];return e.length>0&&i.push(y(2012,"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(y(2013,"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class a_e{constructor(e,t,i,n,r,o,a){this.id=++oZ,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=n,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new Yz),this.removedResources.has(t)||this.removedResources.set(t,new Kz(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Yz),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new Kz(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class aZ{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,n=this._past.length;i<n;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new XY(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,n=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,n++){const c=this._past[a];i&&(n>=t||c.id!==e.elements[n])&&(i=!1,r=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,n++){const l=this._future[a];i&&(n>=t||l.id!==e.elements[n])&&(i=!1,o=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class o5{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const lZ=new aZ("","");lZ.locked=!0;let c9=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=e9.None,i=c1.None){if(e.type===0){const n=BT(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new FT(e,n,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const n=new Set,r=[],o=[];for(const a of e.resources){const l=BT(a),c=this.getUriComparisonKey(a);n.has(c)||(n.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new FT(e,r[0],o[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new a_e(e,r,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const n=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new aZ(n,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const n=i.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const r of i){const o=BT(r.resource),a=this.getUriComparisonKey(r.resource),l=new FT(r,o,a,0,0,0,0);n.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,n)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),n=new Map;for(const r of i){const o=BT(r.resource),a=this.getUriComparisonKey(r.resource),l=new FT(r,o,a,0,0,0,0);n.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,n)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const n=this.getUriComparisonKey(e);this._editStacks.has(n)&&this._editStacks.get(n).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new XY(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,i=n)}return[t,i]}canUndo(e){if(e instanceof c1){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){mi(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,n,r){const o=this._acquireLocks(i);let a;try{a=t()}catch(l){return o(),n.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),n.dispose(),r()),l=>(o(),n.dispose(),this._onError(l,e))):(o(),n.dispose(),r())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return pe.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?pe.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(pe.None);const i=e.actual.prepareUndoRedo();return i?KA(i)?t(i):i.then(n=>t(n)):t(pe.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||lZ);return new o5(t)}_tryToSplitAndUndo(e,t,i,n){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(n),new VT(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(n),new VT}_checkWorkspaceUndo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,y(2014,"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,y(2015,"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,y(2016,"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,y(2017,"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,y(2018,"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const n=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,n,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,n,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,n){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(h){h[h.All=0]="All",h[h.This=1]="This",h[h.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:Wn.Info,message:y(2019,"Would you like to undo '{0}' across all files?",t.label),buttons:[{label:y(2020,"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:y(2021,"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;n=!0}let r;try{r=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,i,!0);if(o)return r.dispose(),o.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,r,()=>this._continueUndoInGroup(t.groupId,n))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=y(2022,"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new o5([e]),n,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,i=n)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof c1){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const n=this._editStacks.get(e),r=n.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,i)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,i):this._resourceUndo(n,r,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:y(2023,"Would you like to undo '{0}'?",i.label),primaryButton:y(2024,"&&Yes"),cancelButton:y(2025,"No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,i=n)}return[t,i]}canRedo(e){if(e instanceof c1){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,n){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(n),new VT(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(n),new VT}_checkWorkspaceRedo(e,t,i,n){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,y(2026,"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(n&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,y(2027,"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,y(2028,"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,y(2029,"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,y(2030,"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),n=this._checkWorkspaceRedo(e,t,i,!1);return n?n.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let n;try{n=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,i,!0);if(r)return n.dispose(),r.returnValue;for(const o of i.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,n,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=y(2031,"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new o5([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[n,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,i=n)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof c1){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[n,r]=this._findClosestRedoElementInGroup(i.groupId);if(i!==n&&r)return this._redo(r)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};c9=o_e([Gz(0,rZ),Gz(1,cu)],c9);class VT{constructor(e){this.returnValue=e}}$t(wB,c9,1);function Yo(s,e,t){return Math.min(Math.max(s,e),t)}class cZ{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class l_e{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const uZ=At("environmentService");var c_e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Zz=function(s,e){return function(t,i){e(t,i,s)}};const u_e=At("ILanguageFeatureDebounceService");var lI;(function(s){const e=new WeakMap;let t=0;function i(n){let r=e.get(n);return r===void 0&&(r=++t,e.set(n,r)),r}s.of=i})(lI||(lI={}));class h_e{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class d_e{constructor(e,t,i,n,r,o){this._logService=e,this._name=t,this._registry=i,this._default=n,this._min=r,this._max=o,this._cache=new T2(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>eR(lI.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?Yo(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let n=this._cache.get(i);n||(n=new l_e(6),this._cache.set(i,n));const r=Yo(n.update(t),this._min,this._max);return hP(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r}_overall(){const e=new cZ;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return Yo(e,this._min,this._max)}}let u9=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const n=i?.min??50,r=i?.max??n**2,o=i?.key??void 0,a=`${lI.of(e)},${n}${o?","+o:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new h_e(n*1.5)):l=new d_e(this._logService,t,e,this._overallAverage()|0||n*1.5,n,r),this._data.set(a,l)),l}_overallAverage(){const e=new cZ;for(const t of this._data.values())e.update(t.default());return e.value}};u9=c_e([Zz(0,Lo),Zz(1,uZ)],u9);$t(u_e,u9,1);var f_e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},a5=function(s,e){return function(t,i){e(t,i,s)}};let h9=class{constructor(e,t,i,n){this._legend=e,this._themeService=t,this._languageService=i,this._logService=n,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new d9}getMetadata(e,t,i){const n=this._languageService.languageIdCodec.encodeLanguageId(i),r=this._hashTable.get(e,t,n);let o;if(r)o=r.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let d=0;c>0&&d<this._legend.tokenModifiers.length;d++)c&1&&l.push(this._legend.tokenModifiers[d]),c=c>>1;const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof h>"u")o=2147483647;else{if(o=0,typeof h.italic<"u"){const d=(h.italic?1:0)<<11;o|=d|1}if(typeof h.bold<"u"){const d=(h.bold?2:0)<<11;o|=d|2}if(typeof h.underline<"u"){const d=(h.underline?4:0)<<11;o|=d|4}if(typeof h.strikethrough<"u"){const d=(h.strikethrough?8:0)<<11;o|=d|8}if(h.foreground){const d=h.foreground<<15;o|=d|16}o===0&&(o=2147483647)}}else o=2147483647,a="not-in-legend";this._hashTable.add(e,t,n,o)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,n,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${n} is outside the previous data (length ${r}).`))}};h9=f_e([a5(1,za),a5(2,$s),a5(3,Lo)],h9);class g_e{constructor(e,t,i,n){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=n,this.next=null}}const jf=class jf{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=jf._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<jf._SIZES.length?2/3*this._currentLength:0),this._elements=[],jf._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const n=this._hashFunc(e,t,i);let r=this._elements[n];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===i)return r;r=r.next}return null}add(e,t,i,n){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=jf._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<jf._SIZES.length?2/3*this._currentLength:0),this._elements=[],jf._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new g_e(e,t,i,n))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};jf._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let d9=jf;const m_e=At("semanticTokensStylingService");var p_e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},l5=function(s,e){return function(t,i){e(t,i,s)}};let f9=class extends pe{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new h9(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};f9=p_e([l5(0,za),l5(1,Lo),l5(2,$s)],f9);$t(m_e,f9,1);const HT="**",Xz="/",PD="[/\\\\]",BD="[^/\\\\]",__e=/\//g;function Qz(s,e){switch(s){case 0:return"";case 1:return`${BD}*?`;default:return`(?:${PD}|${BD}+${PD}${e?`|${PD}${BD}+`:""})*?`}}function Jz(s,e){if(!s)return[];const t=[];let i=!1,n=!1,r="";for(const o of s){switch(o){case e:if(!i&&!n){t.push(r),r="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":n=!0;break;case"]":n=!1;break}r+=o}return r&&t.push(r),t}function hZ(s){if(!s)return"";let e="";const t=Jz(s,Xz);if(t.every(i=>i===HT))e=".*";else{let i=!1;t.forEach((n,r)=>{if(n===HT){if(i)return;e+=Qz(2,r===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const h of n){if(h!=="}"&&o){a+=h;continue}if(l&&(h!=="]"||!c)){let d;h==="-"?d=h:(h==="^"||h==="!")&&!c?d="^":h===Xz?d="":d=Ad(h),c+=d;continue}switch(h){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const g=`(?:${Jz(a,",").map(_=>hZ(_)).join("|")})`;e+=g,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=BD;continue;case"*":e+=Qz(1);continue;default:e+=Ad(h)}}r<t.length-1&&(t[r+1]!==HT||r+2<t.length)&&(e+=PD)}i=n===HT})}return e}const b_e=/^\*\*\/\*\.[\w\.-]+$/,v_e=/^\*\*\/([\w\.-]+)\/?$/,w_e=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,C_e=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,y_e=/^\*\*((\/[\w\.-]+)+)\/?$/,S_e=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,eU=new T2(1e4),tU=function(){return!1},xd=function(){return null};function xB(s,e){if(!s)return xd;let t;typeof s!="string"?t=s.pattern:t=s,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let n=eU.get(i);if(n)return iU(n,s);let r;return b_e.test(t)?n=L_e(t.substr(4),t):(r=v_e.exec(c5(t,e)))?n=x_e(r[1],t):(e.trimForExclusions?C_e:w_e).test(t)?n=k_e(t,e):(r=y_e.exec(c5(t,e)))?n=nU(r[1].substr(1),t,!0):(r=S_e.exec(c5(t,e)))?n=nU(r[1],t,!1):n=E_e(t),eU.set(i,n),iU(n,s)}function iU(s,e){if(typeof e=="string")return s;const t=function(i,n){return P3(i,e.base,!Fa)?s(ZA(i.substr(e.base.length),Ym),n):null};return t.allBasenames=s.allBasenames,t.allPaths=s.allPaths,t.basenames=s.basenames,t.patterns=s.patterns,t}function c5(s,e){return e.trimForExclusions&&s.endsWith("/**")?s.substr(0,s.length-2):s}function L_e(s,e){return function(t,i){return typeof t=="string"&&t.endsWith(s)?e:null}}function x_e(s,e){const t=`/${s}`,i=`\\${s}`,n=function(o,a){return typeof o!="string"?null:a?a===s?e:null:o===s||o.endsWith(t)||o.endsWith(i)?e:null},r=[s];return n.basenames=r,n.patterns=[e],n.allBasenames=r,n}function k_e(s,e){const t=fZ(s.slice(1,-1).split(",").map(a=>xB(a,e)).filter(a=>a!==xd),s),i=t.length;if(!i)return xd;if(i===1)return t[0];const n=function(a,l){for(let c=0,h=t.length;c<h;c++)if(t[c](a,l))return s;return null},r=t.find(a=>!!a.allBasenames);r&&(n.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(n.allPaths=o),n}function nU(s,e,t){const i=Ym===ts.sep,n=i?s:s.replace(__e,Ym),r=Ym+n,o=ts.sep+s;let a;return t?a=function(l,c){return typeof l=="string"&&(l===n||l.endsWith(r)||!i&&(l===s||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===n||!i&&l===s)?e:null},a.allPaths=[(t?"*/":"./")+s],a}function E_e(s){try{const e=new RegExp(`^${hZ(s)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?s:null}}catch{return xd}}function T_e(s,e,t){return!s||typeof e!="string"?!1:dZ(s)(e,void 0,t)}function dZ(s,e={}){if(!s)return tU;if(typeof s=="string"||D_e(s)){const t=xB(s,e);if(t===xd)return tU;const i=function(n,r){return!!t(n,r)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return N_e(s,e)}function D_e(s){const e=s;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function N_e(s,e){const t=fZ(Object.getOwnPropertyNames(s).map(a=>I_e(a,s[a],e)).filter(a=>a!==xd)),i=t.length;if(!i)return xd;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(h,d){let g;for(let _=0,b=t.length;_<b;_++){const C=t[_](h,d);if(typeof C=="string")return C;_3(C)&&(g||(g=[]),g.push(C))}return g?(async()=>{for(const _ of g){const b=await _;if(typeof b=="string")return b}return null})():null},l=t.find(h=>!!h.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((h,d)=>d.allPaths?h.concat(d.allPaths):h,[]);return c.length&&(a.allPaths=c),a}const n=function(a,l,c){let h,d;for(let g=0,_=t.length;g<_;g++){const b=t[g];b.requiresSiblings&&c&&(l||(l=Kj(a)),h||(h=l.substr(0,l.length-_ie(a).length)));const C=b(a,l,h,c);if(typeof C=="string")return C;_3(C)&&(d||(d=[]),d.push(C))}return d?(async()=>{for(const g of d){const _=await g;if(typeof _=="string")return _}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(n.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(n.allPaths=o),n}function I_e(s,e,t){if(e===!1)return xd;const i=xB(s,t);if(i===xd)return xd;if(typeof e=="boolean")return i;if(e){const n=e.when;if(typeof n=="string"){const r=(o,a,l,c)=>{if(!c||!i(o,a))return null;const h=n.replace("$(basename)",()=>l),d=c(h);return _3(d)?d.then(g=>g?s:null):d?s:null};return r.requiresSiblings=!0,r}}return i}function fZ(s,e){const t=s.filter(a=>!!a.basenames);if(t.length<2)return s;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let n;if(e){n=[];for(let a=0,l=i.length;a<l;a++)n.push(e)}else n=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let h;for(h=a.length;h>0;h--){const d=a.charCodeAt(h-1);if(d===47||d===92)break}l=a.substr(h)}const c=i.indexOf(l);return c!==-1?n[c]:null};r.basenames=i,r.patterns=n,r.allBasenames=i;const o=s.filter(a=>!a.basenames);return o.push(r),o}function gZ(s,e,t,i,n,r){if(Array.isArray(s)){let o=0;for(const a of s){const l=gZ(a,e,t,i,n,r);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof s=="string")return i?s==="*"?5:s===t?10:0:0;if(s){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:h}=s;if(!i&&!c)return 0;h&&n&&(e=n);let d=0;if(l)if(l===e.scheme)d=10;else if(l==="*")d=5;else return 0;if(o)if(o===t)d=10;else if(o==="*")d=Math.max(d,5);else return 0;if(h)if(h===r)d=10;else if(h==="*"&&r!==void 0)d=Math.max(d,5);else return 0;if(a){let g;if(typeof a=="string"?g=a:g={...a,base:Gj(a.base)},g===e.fsPath||T_e(g,e.fsPath))d=10;else return 0}return d}else return 0}}function mZ(s){return typeof s=="string"?!1:Array.isArray(s)?s.every(mZ):!!s.exclusive}class sU{constructor(e,t,i,n,r){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=n,this.recursive=r}equals(e){return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&this.notebookUri?.toString()===e.notebookUri?.toString()&&this.recursive===e.recursive}}class gn{get onDidChange(){return this._onDidChange.event}constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new ne}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),lt(()=>{if(i){const n=this._entries.indexOf(i);n>=0&&(this._entries.splice(n,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e,t=!1){const i=[];return this._orderedForEach(e,t,n=>i.push(n.provider)),i}orderedGroups(e){const t=[];let i,n;return this._orderedForEach(e,!1,r=>{i&&n===r._score?i.push(r.provider):(n=r._score,i=[r.provider],t.push(i))}),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const n of this._entries)n._score>0&&i(n)}_updateScores(e,t){const i=this._notebookInfoResolver?.(e.uri),n=i?new sU(e.uri,e.getLanguageId(),i.uri,i.type,t):new sU(e.uri,e.getLanguageId(),void 0,void 0,t);if(!this._lastCandidate?.equals(n)){this._lastCandidate=n;for(const r of this._entries)if(r._score=gZ(r.selector,n.uri,n.languageId,_oe(e),n.notebookUri,n.notebookType),mZ(r.selector)&&r._score>0)if(t)r._score=0;else{for(const o of this._entries)o._score=0;r._score=1e3;break}this._entries.sort(gn._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:KS(e.selector)&&!KS(t.selector)?1:!KS(e.selector)&&KS(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function KS(s){return typeof s=="string"?!1:Array.isArray(s)?s.some(KS):!!s.isBuiltin}class A_e{constructor(){this.referenceProvider=new gn(this._score.bind(this)),this.renameProvider=new gn(this._score.bind(this)),this.newSymbolNamesProvider=new gn(this._score.bind(this)),this.codeActionProvider=new gn(this._score.bind(this)),this.definitionProvider=new gn(this._score.bind(this)),this.typeDefinitionProvider=new gn(this._score.bind(this)),this.declarationProvider=new gn(this._score.bind(this)),this.implementationProvider=new gn(this._score.bind(this)),this.documentSymbolProvider=new gn(this._score.bind(this)),this.inlayHintsProvider=new gn(this._score.bind(this)),this.colorProvider=new gn(this._score.bind(this)),this.codeLensProvider=new gn(this._score.bind(this)),this.documentFormattingEditProvider=new gn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new gn(this._score.bind(this)),this.onTypeFormattingEditProvider=new gn(this._score.bind(this)),this.signatureHelpProvider=new gn(this._score.bind(this)),this.hoverProvider=new gn(this._score.bind(this)),this.documentHighlightProvider=new gn(this._score.bind(this)),this.multiDocumentHighlightProvider=new gn(this._score.bind(this)),this.selectionRangeProvider=new gn(this._score.bind(this)),this.foldingRangeProvider=new gn(this._score.bind(this)),this.linkProvider=new gn(this._score.bind(this)),this.inlineCompletionsProvider=new gn(this._score.bind(this)),this.completionProvider=new gn(this._score.bind(this)),this.linkedEditingRangeProvider=new gn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new gn(this._score.bind(this)),this.documentSemanticTokensProvider=new gn(this._score.bind(this)),this.documentDropEditProvider=new gn(this._score.bind(this)),this.documentPasteEditProvider=new gn(this._score.bind(this))}_score(e){return this._notebookTypeResolver?.(e)}}$t(Zi,A_e,1);var R_e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},rU=function(s,e){return function(t,i){e(t,i,s)}};const H2=At("hoverService");let Gx=class extends pe{get delay(){return this.isInstantlyHovering()?0:this.hoverOptions?.dynamicDelay?e=>this.hoverOptions?.dynamicDelay?.(e)??this._delay:this._delay}constructor(e,t,i={},n,r){super(),this.placement=e,this.hoverOptions=t,this.overrideOptions=i,this.configurationService=n,this.hoverService=r,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new Ze),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const n=qn(e.target)?[e.target]:e.target.targetElements;for(const o of n)this.hoverDisposables.add(Cr(o,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const r=qn(e.content)?void 0:typeof e.content=="string"?e.content.toString():e.content.value;return this.hoverService.showInstantHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:r,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return!!this.hoverOptions?.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.hoverOptions?.instantHover&&(this.lastHoverHideTime=Date.now())}};Gx=R_e([rU(3,cn),rU(4,H2)],Gx);const W2=At("contextViewService"),kg=At("contextMenuService"),WT=ot;let M_e=class extends pe{constructor(e){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.classList.toggle("fade-in",!!e),this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new XP(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class kB extends pe{static render(e,t,i){return new kB(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=Qe(e,WT("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Qe(this.actionContainer,WT("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Qe(this.action,WT("span.icon")).classList.add(...t.iconClass.split(" ")),this.actionRenderedLabel=i?`${t.label} (${i})`:t.label;const n=Qe(this.action,WT("span"));n.textContent=this.actionRenderedLabel,this._store.add(new P_e(this.actionContainer,t.run)),this._store.add(new B_e(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function O_e(s,e){return s&&e?y(7,"Inspect this in the accessible view with {0}.",e):s?y(8,"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class P_e extends pe{constructor(e,t){super(),this._register(ue(e,Re.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class B_e extends pe{constructor(e,t,i){super(),this._register(ue(e,Re.KEY_DOWN,n=>{const r=new Mi(n);i.some(o=>r.equals(o))&&(n.stopPropagation(),n.preventDefault(),t(e))}))}}const z2=At("openerService");function F_e(s){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(s.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},s=s.with({fragment:""})),{selection:e,uri:s}}function pZ(...s){return function(e,t){for(let i=0,n=s.length;i<n;i++){const r=s[i](e,t);if(r)return r}return null}}_Z.bind(void 0,!1);const cI=_Z.bind(void 0,!0);function _Z(s,e,t){if(!t||t.length<e.length)return null;let i;return s?i=iP(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function V_e(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t===-1?null:[{start:t,end:t+s.length}]}function H_e(s,e){return g9(s.toLowerCase(),e.toLowerCase(),0,0)}function g9(s,e,t,i){if(t===s.length)return[];if(i===e.length)return null;if(s[t]===e[i]){let n=null;return(n=g9(s,e,t+1,i+1))?vZ({start:i,end:i+1},n):null}return g9(s,e,t,i+1)}function EB(s){return 97<=s&&s<=122}function RR(s){return 65<=s&&s<=90}function TB(s){return 48<=s&&s<=57}function W_e(s){return s===32||s===9||s===10||s===13}const z_e=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(s=>z_e.add(s.charCodeAt(0)));function bZ(s){return EB(s)||RR(s)||TB(s)}function vZ(s,e){return e.length===0?e=[s]:s.end===e[0].start?e[0].start=s.start:e.unshift(s),e}function wZ(s,e){for(let t=e;t<s.length;t++){const i=s.charCodeAt(t);if(RR(i)||TB(i)||t>0&&!bZ(s.charCodeAt(t-1)))return t}return s.length}function m9(s,e,t,i){if(t===s.length)return[];if(i===e.length)return null;if(s[t]!==e[i].toLowerCase())return null;{let n=null,r=i+1;for(n=m9(s,e,t+1,i+1);!n&&(r=wZ(e,r))<e.length;)n=m9(s,e,t+1,r),r++;return n===null?null:vZ({start:i,end:i+1},n)}}function U_e(s){let e=0,t=0,i=0,n=0,r=0;for(let h=0;h<s.length;h++)r=s.charCodeAt(h),RR(r)&&e++,EB(r)&&t++,bZ(r)&&i++,TB(r)&&n++;const o=e/s.length,a=t/s.length,l=i/s.length,c=n/s.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function q_e(s){const{upperPercent:e,lowerPercent:t}=s;return t===0&&e>.6}function $_e(s){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:n}=s;return t>.2&&e<.8&&i>.6&&n<.2}function j_e(s){let e=0,t=0,i=0,n=0;for(let r=0;r<s.length;r++)i=s.charCodeAt(r),RR(i)&&e++,EB(i)&&t++,W_e(i)&&n++;return(e===0||t===0)&&n===0?s.length<=30:e<=5}function CZ(s,e){if(!e||(e=e.trim(),e.length===0)||!j_e(s))return null;e.length>60&&(e=e.substring(0,60));const t=U_e(e);if(!$_e(t)){if(!q_e(t))return null;e=e.toLowerCase()}let i=null,n=0;for(s=s.toLowerCase();n<e.length&&(i=m9(s,e,0,n))===null;)n=wZ(e,n+1);return i}const G_e=pZ(cI,CZ,V_e),K_e=pZ(cI,CZ,H_e),oU=new T2(1e4);function aU(s,e,t=!1){if(typeof s!="string"||typeof e!="string")return null;let i=oU.get(s);i||(i=new RegExp(Fie(s),"i"),oU.set(s,i));const n=i.exec(e);return n?[{start:n.index,end:n.index+n[0].length}]:t?K_e(s,e):G_e(s,e)}function Y_e(s,e){const t=LZ(s,s.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?Z_e(t):null}function Z_e(s){if(typeof s>"u")return[];const e=[],t=s[1];for(let i=s.length-1;i>1;i--){const n=s[i]+t,r=e[e.length-1];r&&r.end===n?r.end=n+1:e.push({start:n,end:n+1})}return e}const qm=128;function DB(){const s=[],e=[];for(let t=0;t<=qm;t++)e[t]=0;for(let t=0;t<=qm;t++)s.push(e.slice(0));return s}function yZ(s){const e=[];for(let t=0;t<=s;t++)e[t]=0;return e}const SZ=yZ(2*qm),p9=yZ(2*qm),If=DB(),P_=DB(),zT=DB();function UT(s,e){if(e<0||e>=s.length)return!1;const t=s.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!aP(t)}}function lU(s,e){if(e<0||e>=s.length)return!1;switch(s.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function FD(s,e,t){return e[s]!==t[s]}function X_e(s,e,t,i,n,r,o=!1){for(;e<t&&n<r;)s[e]===i[n]&&(o&&(SZ[e]=n),e+=1),n+=1;return e===t}var q1;(function(s){s.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}s.isDefault=e})(q1||(q1={}));const QF=class QF{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};QF.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let _9=QF;function LZ(s,e,t,i,n,r,o=_9.default){const a=s.length>qm?qm:s.length,l=i.length>qm?qm:i.length;if(t>=a||r>=l||a-t>l-r||!X_e(e,t,a,n,r,l,!0))return;Q_e(a,l,t,r,e,n);let c=1,h=1,d=t,g=r;const _=[!1];for(c=1,d=t;d<a;c++,d++){const x=SZ[d],T=p9[d],N=d+1<a?p9[d+1]:l;for(h=x-r+1,g=x;g<N;h++,g++){let A=Number.MIN_SAFE_INTEGER,P=!1;g<=T&&(A=J_e(s,e,d,t,i,n,g,l,r,If[c-1][h-1]===0,_));let O=0;A!==Number.MIN_SAFE_INTEGER&&(P=!0,O=A+P_[c-1][h-1]);const V=g>x,U=V?P_[c][h-1]+(If[c][h-1]>0?-5:0):0,Y=g>x+1&&If[c][h-1]>0,B=Y?P_[c][h-2]+(If[c][h-2]>0?-5:0):0;if(Y&&(!V||B>=U)&&(!P||B>=O))P_[c][h]=B,zT[c][h]=3,If[c][h]=0;else if(V&&(!P||U>=O))P_[c][h]=U,zT[c][h]=2,If[c][h]=0;else if(P)P_[c][h]=O,zT[c][h]=1,If[c][h]=If[c-1][h-1]+1;else throw new Error("not possible")}}if(!_[0]&&!o.firstMatchCanBeWeak)return;c--,h--;const b=[P_[c][h],r];let C=0,S=0;for(;c>=1;){let x=h;do{const T=zT[c][x];if(T===3)x=x-2;else if(T===2)x=x-1;else break}while(x>=1);C>1&&e[t+c-1]===n[r+h-1]&&!FD(x+r-1,i,n)&&C+1>If[c][x]&&(x=h),x===h?C++:C=1,S||(S=x),c--,h=x-1,b.push(h)}l-r===a&&o.boostFullMatch&&(b[0]+=2);const E=S-a;return b[0]-=E,b}function Q_e(s,e,t,i,n,r){let o=s-1,a=e-1;for(;o>=t&&a>=i;)n[o]===r[a]&&(p9[o]=a,o--),a--}function J_e(s,e,t,i,n,r,o,a,l,c,h){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let d=1,g=!1;return o===t-i?d=s[t]===n[o]?7:5:FD(o,n,r)&&(o===0||!FD(o-1,n,r))?(d=s[t]===n[o]?7:5,g=!0):UT(r,o)&&(o===0||!UT(r,o-1))?d=5:(UT(r,o-1)||lU(r,o-1))&&(d=5,g=!0),d>1&&t===i&&(h[0]=!0),g||(g=FD(o,n,r)||UT(r,o-1)||lU(r,o-1)),t===i?o>l&&(d-=g?3:5):c?d+=g?2:0:d+=g?0:1,o+1===a&&(d-=g?3:5),d}const e1e="$(",NB=new RegExp(`\\$\\(${Gt.iconNameExpression}(?:${Gt.iconModifierExpression})?\\)`,"g"),t1e=new RegExp(`(\\\\)?${NB.source}`,"g");function i1e(s){return s.replace(t1e,(e,t)=>t?e:`\\${e}`)}const n1e=new RegExp(`\\\\${NB.source}`,"g");function s1e(s){return s.replace(n1e,e=>`\\${e}`)}const r1e=new RegExp(`(\\s)?(\\\\)?${NB.source}(\\s)?`,"g");function xZ(s){return s.indexOf(e1e)===-1?s:s.replace(r1e,(e,t,i,n)=>i?e:t||n||"")}function kZ(s){return s?s.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const u5=new RegExp(`\\$\\(${Gt.iconNameCharacter}+\\)`,"g");function T1(s){u5.lastIndex=0;let e="";const t=[];let i=0;for(;;){const n=u5.lastIndex,r=u5.exec(s),o=s.substring(n,r?.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(i)}if(!r)break;i+=r[0].length}return{text:e,iconOffsets:t}}function DL(s,e,t=!1){const{text:i,iconOffsets:n}=e;if(!n||n.length===0)return aU(s,i,t);const r=ZA(i," "),o=i.length-r.length,a=aU(s,r,t);if(a)for(const l of a){const c=n[l.start+o]+o;l.start+=c,l.end+=c}return a}class EZ{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw $A("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=a1e(this.supportThemeIcons?i1e(e):e).replace(/([ \t]+)/g,(i,n)=>"&nbsp;".repeat(n.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${l1e(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Ad(t),"g");return e.replace(i,(n,r)=>e.charAt(r-1)!=="\\"?`\\${n}`:n)}}function Fw(s){return s instanceof EZ?!0:s&&typeof s=="object"?typeof s.value=="string"&&(typeof s.isTrusted=="boolean"||typeof s.isTrusted=="object"||s.isTrusted===void 0)&&(typeof s.supportThemeIcons=="boolean"||s.supportThemeIcons===void 0):!1}function o1e(s,e){return s===e?!0:!s||!e?!1:s.value===e.value&&s.isTrusted===e.isTrusted&&s.supportThemeIcons===e.supportThemeIcons&&s.supportHtml===e.supportHtml&&(s.baseUri===e.baseUri||!!s.baseUri&&!!e.baseUri&&ere(Ot.from(s.baseUri),Ot.from(e.baseUri)))}function a1e(s){return s.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function l1e(s,e){const t=s.match(/^`+/gm)?.reduce((n,r)=>n.length>r.length?n:r).length??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,s,`${"`".repeat(i)}`].join(`
`)}function qT(s){return s.replace(/"/g,"&quot;")}function h5(s){return s&&s.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function c1e(s){const e=[],t=s.split("|").map(n=>n.trim());s=t[0];const i=t[1];if(i){const n=/height=(\d+)/.exec(i),r=/width=(\d+)/.exec(i),o=n?n[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:s,dimensions:e}}class TZ{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const cU=new TZ("id#");function IB(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let W0=IB();function DZ(s){W0=s}const NZ=/[&<>"']/,u1e=new RegExp(NZ.source,"g"),IZ=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,h1e=new RegExp(IZ.source,"g"),d1e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},uU=s=>d1e[s];function cc(s,e){if(e){if(NZ.test(s))return s.replace(u1e,uU)}else if(IZ.test(s))return s.replace(h1e,uU);return s}const f1e=/(^|[^\[])\^/g;function Rn(s,e){let t=typeof s=="string"?s:s.source;e=e||"";const i={replace:(n,r)=>{let o=typeof r=="string"?r:r.source;return o=o.replace(f1e,"$1"),t=t.replace(n,o),i},getRegex:()=>new RegExp(t,e)};return i}function hU(s){try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const NL={exec:()=>null};function dU(s,e){const t=s.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=t.split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function xS(s,e,t){const i=s.length;if(i===0)return"";let n=0;for(;n<i&&s.charAt(i-n-1)===e;)n++;return s.slice(0,i-n)}function g1e(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let i=0;i<s.length;i++)if(s[i]==="\\")i++;else if(s[i]===e[0])t++;else if(s[i]===e[1]&&(t--,t<0))return i;return-1}function fU(s,e,t,i){const n=e.href,r=e.title?cc(e.title):null,o=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:t,href:n,title:r,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:n,title:r,text:cc(o)}}function m1e(s,e){const t=s.match(/^(\s+)(?:```)/);if(t===null)return e;const i=t[1];return e.split(`
`).map(n=>{const r=n.match(/^\s+/);if(r===null)return n;const[o]=r;return o.length>=i.length?n.slice(i.length):n}).join(`
`)}class uI{options;rules;lexer;constructor(e){this.options=e||W0}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:xS(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],n=m1e(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const n=xS(i,"#");(this.options.pedantic||!n||/ $/.test(n))&&(i=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:xS(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=xS(t[0],`
`).split(`
`),n="",r="";const o=[];for(;i.length>0;){let a=!1;const l=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))l.push(i[c]),a=!0;else if(!a)l.push(i[c]);else break;i=i.slice(c);const h=l.join(`
`),d=h.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}
${h}`:h,r=r?`${r}
${d}`:d;const g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=g,i.length===0)break;const _=o[o.length-1];if(_?.type==="code")break;if(_?.type==="blockquote"){const b=_,C=b.raw+`
`+i.join(`
`),S=this.blockquote(C);o[o.length-1]=S,n=n.substring(0,n.length-b.raw.length)+S.raw,r=r.substring(0,r.length-b.text.length)+S.text;break}else if(_?.type==="list"){const b=_,C=b.raw+`
`+i.join(`
`),S=this.list(C);o[o.length-1]=S,n=n.substring(0,n.length-_.raw.length)+S.raw,r=r.substring(0,r.length-b.raw.length)+S.raw,i=C.substring(o[o.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:o,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const n=i.length>1,r={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;e;){let l=!1,c="",h="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let d=t[2].split(`
`,1)[0].replace(/^\t+/,E=>" ".repeat(3*E.length)),g=e.split(`
`,1)[0],_=!d.trim(),b=0;if(this.options.pedantic?(b=2,h=d.trimStart()):_?b=t[1].length+1:(b=t[2].search(/[^ ]/),b=b>4?1:b,h=d.slice(b),b+=t[1].length),_&&/^ *$/.test(g)&&(c+=g+`
`,e=e.substring(g.length+1),l=!0),!l){const E=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,b-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),T=new RegExp(`^ {0,${Math.min(3,b-1)}}(?:\`\`\`|~~~)`),N=new RegExp(`^ {0,${Math.min(3,b-1)}}#`);for(;e;){const A=e.split(`
`,1)[0];if(g=A,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),T.test(g)||N.test(g)||E.test(g)||x.test(e))break;if(g.search(/[^ ]/)>=b||!g.trim())h+=`
`+g.slice(b);else{if(_||d.search(/[^ ]/)>=4||T.test(d)||N.test(d)||x.test(d))break;h+=`
`+g}!_&&!g.trim()&&(_=!0),c+=A+`
`,e=e.substring(A.length+1),d=g.slice(b)}}r.loose||(a?r.loose=!0:/\n *\n *$/.test(c)&&(a=!0));let C=null,S;this.options.gfm&&(C=/^\[[ xX]\] /.exec(h),C&&(S=C[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:c,task:!!C,checked:S,loose:!1,text:h,tokens:[]}),r.raw+=c}r.items[r.items.length-1].raw=r.items[r.items.length-1].raw.trimEnd(),r.items[r.items.length-1].text=r.items[r.items.length-1].text.trimEnd(),r.raw=r.raw.trimEnd();for(let l=0;l<r.items.length;l++)if(this.lexer.state.top=!1,r.items[l].tokens=this.lexer.blockTokens(r.items[l].text,[]),!r.loose){const c=r.items[l].tokens.filter(d=>d.type==="space"),h=c.length>0&&c.some(d=>/\n.*\n/.test(d.raw));r.loose=h}if(r.loose)for(let l=0;l<r.items.length;l++)r.items[l].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:n,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=dU(t[1]),n=t[2].replace(/^\||\| *$/g,"").split("|"),r=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===n.length){for(const a of n)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<i.length;a++)o.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:o.align[a]});for(const a of r)o.rows.push(dU(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:cc(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=xS(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=g1e(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);o&&(n=o[1],r=o[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(i)?n=n.slice(1):n=n.slice(1,-1)),fU(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const n=(i[2]||i[1]).replace(/\s+/g," "),r=t[n.toLowerCase()];if(!r){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return fU(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!n||n[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(n[1]||n[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const o=[...n[0]].length-1;let a,l,c=o,h=0;const d=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(n=d.exec(t))!=null;){if(a=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!a)continue;if(l=[...a].length,n[3]||n[4]){c+=l;continue}else if((n[5]||n[6])&&o%3&&!((o+l)%3)){h+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+h);const g=[...n[0]][0].length,_=e.slice(0,o+n.index+g+l);if(Math.min(o,l)%2){const C=_.slice(1,-1);return{type:"em",raw:_,text:C,tokens:this.lexer.inlineTokens(C)}}const b=_.slice(2,-2);return{type:"strong",raw:_,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const n=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return n&&r&&(i=i.substring(1,i.length-1)),i=cc(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,n;return t[2]==="@"?(i=cc(t[1]),n="mailto:"+i):(i=cc(t[1]),n=i),{type:"link",raw:t[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,n;if(t[2]==="@")i=cc(t[0]),n="mailto:"+i;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);i=cc(t[0]),t[1]==="www."?n="http://"+t[0]:n=t[0]}return{type:"link",raw:t[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=cc(t[0]),{type:"text",raw:t[0],text:i}}}}const p1e=/^(?: *(?:\n|$))+/,_1e=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,b1e=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,U2=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,v1e=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,AZ=/(?:[*+-]|\d{1,9}[.)])/,RZ=Rn(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,AZ).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),AB=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,w1e=/^[^\n]+/,RB=/(?!\s*\])(?:\\.|[^\[\]\\])+/,C1e=Rn(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",RB).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),y1e=Rn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,AZ).getRegex(),MR="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",MB=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,S1e=Rn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",MB).replace("tag",MR).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),MZ=Rn(AB).replace("hr",U2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",MR).getRegex(),L1e=Rn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",MZ).getRegex(),OB={blockquote:L1e,code:_1e,def:C1e,fences:b1e,heading:v1e,hr:U2,html:S1e,lheading:RZ,list:y1e,newline:p1e,paragraph:MZ,table:NL,text:w1e},gU=Rn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",U2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",MR).getRegex(),x1e={...OB,table:gU,paragraph:Rn(AB).replace("hr",U2).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gU).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",MR).getRegex()},k1e={...OB,html:Rn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",MB).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:NL,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Rn(AB).replace("hr",U2).replace("heading",` *#{1,6} *[^
]`).replace("lheading",RZ).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},OZ=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,E1e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,PZ=/^( {2,}|\\)\n(?!\s*$)/,T1e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,q2="\\p{P}\\p{S}",D1e=Rn(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,q2).getRegex(),N1e=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,I1e=Rn(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,q2).getRegex(),A1e=Rn("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,q2).getRegex(),R1e=Rn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,q2).getRegex(),M1e=Rn(/\\([punct])/,"gu").replace(/punct/g,q2).getRegex(),O1e=Rn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),P1e=Rn(MB).replace("(?:-->|$)","-->").getRegex(),B1e=Rn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",P1e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),hI=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,F1e=Rn(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",hI).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),BZ=Rn(/^!?\[(label)\]\[(ref)\]/).replace("label",hI).replace("ref",RB).getRegex(),FZ=Rn(/^!?\[(ref)\](?:\[\])?/).replace("ref",RB).getRegex(),V1e=Rn("reflink|nolink(?!\\()","g").replace("reflink",BZ).replace("nolink",FZ).getRegex(),PB={_backpedal:NL,anyPunctuation:M1e,autolink:O1e,blockSkip:N1e,br:PZ,code:E1e,del:NL,emStrongLDelim:I1e,emStrongRDelimAst:A1e,emStrongRDelimUnd:R1e,escape:OZ,link:F1e,nolink:FZ,punctuation:D1e,reflink:BZ,reflinkSearch:V1e,tag:B1e,text:T1e,url:NL},H1e={...PB,link:Rn(/^!?\[(label)\]\((.*?)\)/).replace("label",hI).getRegex(),reflink:Rn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",hI).getRegex()},b9={...PB,escape:Rn(OZ).replace("])","~|])").getRegex(),url:Rn(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},W1e={...b9,br:Rn(PZ).replace("{2,}","*").getRegex(),text:Rn(b9.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},$T={normal:OB,gfm:x1e,pedantic:k1e},kS={normal:PB,gfm:b9,breaks:W1e,pedantic:H1e};class wd{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||W0,this.options.tokenizer=this.options.tokenizer||new uI,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:$T.normal,inline:kS.normal};this.options.pedantic?(t.block=$T.pedantic,t.inline=kS.pedantic):this.options.gfm&&(t.block=$T.gfm,this.options.breaks?t.inline=kS.breaks:t.inline=kS.gfm),this.tokenizer.rules=t}static get rules(){return{block:$T,inline:kS}}static lex(e,t){return new wd(t).lex(e)}static lexInline(e,t){return new wd(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const i=this.inlineQueue[t];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let n,r,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(n=a.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(h=>{c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){r=t[t.length-1],i&&r?.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),i=o.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,n,r,o=e,a,l,c;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(i=h.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),n=t[t.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,o,c)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}if(r=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const d=e.slice(1);let g;this.options.extensions.startInline.forEach(_=>{g=_.call({lexer:this},d),typeof g=="number"&&g>=0&&(h=Math.min(h,g))}),h<1/0&&h>=0&&(r=e.substring(0,h+1))}if(i=this.tokenizer.inlineText(r)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,n=t[t.length-1],n&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}}class Kx{options;parser;constructor(e){this.options=e||W0}space(e){return""}code({text:e,lang:t,escaped:i}){const n=(t||"").match(/^\S*/)?.[0],r=e.replace(/\n$/,"")+`
`;return n?'<pre><code class="language-'+cc(n)+'">'+(i?r:cc(r,!0))+`</code></pre>
`:"<pre><code>"+(i?r:cc(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let n="";for(let a=0;a<e.items.length;a++){const l=e.items[a];n+=this.listitem(l)}const r=t?"ol":"ul",o=t&&i!==1?' start="'+i+'"':"";return"<"+r+o+`>
`+n+"</"+r+`>
`}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let r=0;r<e.header.length;r++)i+=this.tablecell(e.header[r]);t+=this.tablerow({text:i});let n="";for(let r=0;r<e.rows.length;r++){const o=e.rows[r];i="";for(let a=0;a<o.length;a++)i+=this.tablecell(o[a]);n+=this.tablerow({text:i})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const n=this.parser.parseInline(i),r=hU(e);if(r===null)return n;e=r;let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>",o}image({href:e,title:t,text:i}){const n=hU(e);if(n===null)return i;e=n;let r=`<img src="${e}" alt="${i}"`;return t&&(r+=` title="${t}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class BB{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Cd{options;renderer;textRenderer;constructor(e){this.options=e||W0,this.options.renderer=this.options.renderer||new Kx,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new BB}static parse(e,t){return new Cd(t).parse(e)}static parseInline(e,t){return new Cd(t).parseInline(e)}parse(e,t=!0){let i="";for(let n=0;n<e.length;n++){const r=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=r,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=l||"";continue}}const o=r;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;n+1<e.length&&e[n+1].type==="text";)a=e[++n],l+=`
`+this.renderer.text(a);t?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):i+=l;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let n=0;n<e.length;n++){const r=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=a||"";continue}}const o=r;switch(o.type){case"escape":{i+=t.text(o);break}case"html":{i+=t.html(o);break}case"link":{i+=t.link(o);break}case"image":{i+=t.image(o);break}case"strong":{i+=t.strong(o);break}case"em":{i+=t.em(o);break}case"codespan":{i+=t.codespan(o);break}case"br":{i+=t.br(o);break}case"del":{i+=t.del(o);break}case"text":{i+=t.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}}class VD{options;constructor(e){this.options=e||W0}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}class VZ{defaults=IB();options=this.setOptions;parse=this.parseMarkdown(wd.lex,Cd.parse);parseInline=this.parseMarkdown(wd.lexInline,Cd.parseInline);Parser=Cd;Renderer=Kx;TextRenderer=BB;Lexer=wd;Tokenizer=uI;Hooks=VD;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const n of e)switch(i=i.concat(t.call(this,n)),n.type){case"table":{const r=n;for(const o of r.header)i=i.concat(this.walkTokens(o.tokens,t));for(const o of r.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,t));break}case"list":{const r=n;i=i.concat(this.walkTokens(r.items,t));break}default:{const r=n;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(o=>{const a=r[o].flat(1/0);i=i.concat(this.walkTokens(a,t))}):r.tokens&&(i=i.concat(this.walkTokens(r.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const n={...i};if(n.async=this.defaults.async||n.async||!1,i.extensions&&(i.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const o=t.renderers[r.name];o?t.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[r.level];o?o.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),n.extensions=t),i.renderer){const r=this.defaults.renderer||new Kx(this.defaults);for(const o in i.renderer){if(!(o in r))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,l=i.renderer[a],c=r[a];r[a]=(...h)=>{let d=l.apply(r,h);return d===!1&&(d=c.apply(r,h)),d||""}}n.renderer=r}if(i.tokenizer){const r=this.defaults.tokenizer||new uI(this.defaults);for(const o in i.tokenizer){if(!(o in r))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=i.tokenizer[a],c=r[a];r[a]=(...h)=>{let d=l.apply(r,h);return d===!1&&(d=c.apply(r,h)),d}}n.tokenizer=r}if(i.hooks){const r=this.defaults.hooks||new VD;for(const o in i.hooks){if(!(o in r))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=i.hooks[a],c=r[a];VD.passThroughHooks.has(o)?r[a]=h=>{if(this.defaults.async)return Promise.resolve(l.call(r,h)).then(g=>c.call(r,g));const d=l.call(r,h);return c.call(r,d)}:r[a]=(...h)=>{let d=l.apply(r,h);return d===!1&&(d=c.apply(r,h)),d}}n.hooks=r}if(i.walkTokens){const r=this.defaults.walkTokens,o=i.walkTokens;n.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return wd.lex(e,t??this.defaults)}parser(e,t){return Cd.parse(e,t??this.defaults)}parseMarkdown(e,t){return(n,r)=>{const o={...r},a={...this.defaults,...o},l=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&o.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(c=>e(c,a)).then(c=>a.hooks?a.hooks.processAllTokens(c):c).then(c=>a.walkTokens?Promise.all(this.walkTokens(c,a.walkTokens)).then(()=>c):c).then(c=>t(c,a)).then(c=>a.hooks?a.hooks.postprocess(c):c).catch(l);try{a.hooks&&(n=a.hooks.preprocess(n));let c=e(n,a);a.hooks&&(c=a.hooks.processAllTokens(c)),a.walkTokens&&this.walkTokens(c,a.walkTokens);let h=t(c,a);return a.hooks&&(h=a.hooks.postprocess(h)),h}catch(c){return l(c)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const n="<p>An error occurred:</p><pre>"+cc(i.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(i);throw i}}}const C0=new VZ;function kn(s,e){return C0.parse(s,e)}kn.options=kn.setOptions=function(s){return C0.setOptions(s),kn.defaults=C0.defaults,DZ(kn.defaults),kn};kn.getDefaults=IB;kn.defaults=W0;kn.use=function(...s){return C0.use(...s),kn.defaults=C0.defaults,DZ(kn.defaults),kn};kn.walkTokens=function(s,e){return C0.walkTokens(s,e)};kn.parseInline=C0.parseInline;kn.Parser=Cd;kn.parser=Cd.parse;kn.Renderer=Kx;kn.TextRenderer=BB;kn.Lexer=wd;kn.lexer=wd.lex;kn.Tokenizer=uI;kn.Hooks=VD;kn.parse=kn;kn.options;kn.setOptions;kn.use;kn.walkTokens;kn.parseInline;const z1e=kn;Cd.parse;const Yx=wd.lex;function U1e(s){return JSON.stringify(s,q1e)}function v9(s){let e=JSON.parse(s);return e=w9(e),e}function q1e(s,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function w9(s,e=0){if(!s||e>200)return s;if(typeof s=="object"){switch(s.$mid){case 1:return Ot.revive(s);case 2:return new RegExp(s.source,s.flags);case 17:return new Date(s.source)}if(s instanceof JA||s instanceof Uint8Array)return s;if(Array.isArray(s))for(let t=0;t<s.length;++t)s[t]=w9(s[t],e+1);else for(const t in s)Object.hasOwnProperty.call(s,t)&&(s[t]=w9(s[t],e+1))}return s}/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:HZ,setPrototypeOf:mU,isFrozen:$1e,getPrototypeOf:j1e,getOwnPropertyDescriptor:G1e}=Object;let{freeze:Wa,seal:au,create:WZ}=Object,{apply:C9,construct:y9}=typeof Reflect<"u"&&Reflect;Wa||(Wa=function(e){return e});au||(au=function(e){return e});C9||(C9=function(e,t,i){return e.apply(t,i)});y9||(y9=function(e,t){return new e(...t)});const jT=Sc(Array.prototype.forEach),pU=Sc(Array.prototype.pop),ES=Sc(Array.prototype.push),HD=Sc(String.prototype.toLowerCase),d5=Sc(String.prototype.toString),_U=Sc(String.prototype.match),TS=Sc(String.prototype.replace),K1e=Sc(String.prototype.indexOf),Y1e=Sc(String.prototype.trim),Vu=Sc(Object.prototype.hasOwnProperty),Ta=Sc(RegExp.prototype.test),DS=Z1e(TypeError);function Sc(s){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return C9(s,e,i)}}function Z1e(s){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return y9(s,t)}}function Ai(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:HD;mU&&mU(s,null);let i=e.length;for(;i--;){let n=e[i];if(typeof n=="string"){const r=t(n);r!==n&&($1e(e)||(e[i]=r),n=r)}s[n]=!0}return s}function X1e(s){for(let e=0;e<s.length;e++)Vu(s,e)||(s[e]=null);return s}function $_(s){const e=WZ(null);for(const[t,i]of HZ(s))Vu(s,t)&&(Array.isArray(i)?e[t]=X1e(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=$_(i):e[t]=i);return e}function NS(s,e){for(;s!==null;){const i=G1e(s,e);if(i){if(i.get)return Sc(i.get);if(typeof i.value=="function")return Sc(i.value)}s=j1e(s)}function t(){return null}return t}const bU=Wa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),f5=Wa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),g5=Wa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Q1e=Wa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),m5=Wa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),J1e=Wa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),vU=Wa(["#text"]),wU=Wa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),p5=Wa(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),CU=Wa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),GT=Wa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),e0e=au(/\{\{[\w\W]*|[\w\W]*\}\}/gm),t0e=au(/<%[\w\W]*|[\w\W]*%>/gm),i0e=au(/\${[\w\W]*}/gm),n0e=au(/^data-[\-\w.\u00B7-\uFFFF]/),s0e=au(/^aria-[\-\w]+$/),zZ=au(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),r0e=au(/^(?:\w+script|data):/i),o0e=au(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),UZ=au(/^html$/i),a0e=au(/^[a-z][.\w]*(-[.\w]+)+$/i);var yU=Object.freeze({__proto__:null,MUSTACHE_EXPR:e0e,ERB_EXPR:t0e,TMPLIT_EXPR:i0e,DATA_ATTR:n0e,ARIA_ATTR:s0e,IS_ALLOWED_URI:zZ,IS_SCRIPT_OR_DATA:r0e,ATTR_WHITESPACE:o0e,DOCTYPE_NAME:UZ,CUSTOM_ELEMENT:a0e});const IS={element:1,text:3,progressingInstruction:7,comment:8,document:9},l0e=function(){return typeof window>"u"?null:window},c0e=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(i=t.getAttribute(n));const r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function qZ(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l0e();const e=pt=>qZ(pt);if(e.version="3.1.7",e.removed=[],!s||!s.document||s.document.nodeType!==IS.document)return e.isSupported=!1,e;let{document:t}=s;const i=t,n=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:d,DOMParser:g,trustedTypes:_}=s,b=l.prototype,C=NS(b,"cloneNode"),S=NS(b,"remove"),E=NS(b,"nextSibling"),x=NS(b,"childNodes"),T=NS(b,"parentNode");if(typeof o=="function"){const pt=t.createElement("template");pt.content&&pt.content.ownerDocument&&(t=pt.content.ownerDocument)}let N,A="";const{implementation:P,createNodeIterator:O,createDocumentFragment:V,getElementsByTagName:U}=t,{importNode:Y}=i;let B={};e.isSupported=typeof HZ=="function"&&typeof T=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:W,TMPLIT_EXPR:ee,DATA_ATTR:X,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:ce,CUSTOM_ELEMENT:he}=yU;let{IS_ALLOWED_URI:j}=yU,ae=null;const Te=Ai({},[...bU,...f5,...g5,...m5,...vU]);let Le=null;const Oe=Ai({},[...wU,...p5,...CU,...GT]);let Ne=Object.seal(WZ(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ke=null,Dt=null,Xe=!0,tt=!0,Et=!1,jt=!0,ii=!1,Ci=!0,ri=!1,Tn=!1,Pl=!1,on=!1,Bl=!1,Fl=!1,Hr=!0,is=!1;const Ua="user-content-";let To=!0,lr=!1,js={},Wr=null;const pn=Ai({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ns=null;const jn=Ai({},["audio","video","img","source","image","track"]);let Ds=null;const Vl=Ai({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),oa="http://www.w3.org/1998/Math/MathML",to="http://www.w3.org/2000/svg",hs="http://www.w3.org/1999/xhtml";let ss=hs,io=!1,cr=null;const Hl=Ai({},[oa,to,hs],d5);let Ns=null;const Wl=["application/xhtml+xml","text/html"],qa="text/html";let Bi=null,Do=null;const $a=t.createElement("form"),zl=function(me){return me instanceof RegExp||me instanceof Function},aa=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Do&&Do===me)){if((!me||typeof me!="object")&&(me={}),me=$_(me),Ns=Wl.indexOf(me.PARSER_MEDIA_TYPE)===-1?qa:me.PARSER_MEDIA_TYPE,Bi=Ns==="application/xhtml+xml"?d5:HD,ae=Vu(me,"ALLOWED_TAGS")?Ai({},me.ALLOWED_TAGS,Bi):Te,Le=Vu(me,"ALLOWED_ATTR")?Ai({},me.ALLOWED_ATTR,Bi):Oe,cr=Vu(me,"ALLOWED_NAMESPACES")?Ai({},me.ALLOWED_NAMESPACES,d5):Hl,Ds=Vu(me,"ADD_URI_SAFE_ATTR")?Ai($_(Vl),me.ADD_URI_SAFE_ATTR,Bi):Vl,ns=Vu(me,"ADD_DATA_URI_TAGS")?Ai($_(jn),me.ADD_DATA_URI_TAGS,Bi):jn,Wr=Vu(me,"FORBID_CONTENTS")?Ai({},me.FORBID_CONTENTS,Bi):pn,Ke=Vu(me,"FORBID_TAGS")?Ai({},me.FORBID_TAGS,Bi):{},Dt=Vu(me,"FORBID_ATTR")?Ai({},me.FORBID_ATTR,Bi):{},js=Vu(me,"USE_PROFILES")?me.USE_PROFILES:!1,Xe=me.ALLOW_ARIA_ATTR!==!1,tt=me.ALLOW_DATA_ATTR!==!1,Et=me.ALLOW_UNKNOWN_PROTOCOLS||!1,jt=me.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ii=me.SAFE_FOR_TEMPLATES||!1,Ci=me.SAFE_FOR_XML!==!1,ri=me.WHOLE_DOCUMENT||!1,on=me.RETURN_DOM||!1,Bl=me.RETURN_DOM_FRAGMENT||!1,Fl=me.RETURN_TRUSTED_TYPE||!1,Pl=me.FORCE_BODY||!1,Hr=me.SANITIZE_DOM!==!1,is=me.SANITIZE_NAMED_PROPS||!1,To=me.KEEP_CONTENT!==!1,lr=me.IN_PLACE||!1,j=me.ALLOWED_URI_REGEXP||zZ,ss=me.NAMESPACE||hs,Ne=me.CUSTOM_ELEMENT_HANDLING||{},me.CUSTOM_ELEMENT_HANDLING&&zl(me.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ne.tagNameCheck=me.CUSTOM_ELEMENT_HANDLING.tagNameCheck),me.CUSTOM_ELEMENT_HANDLING&&zl(me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ne.attributeNameCheck=me.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),me.CUSTOM_ELEMENT_HANDLING&&typeof me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ne.allowCustomizedBuiltInElements=me.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ii&&(tt=!1),Bl&&(on=!0),js&&(ae=Ai({},vU),Le=[],js.html===!0&&(Ai(ae,bU),Ai(Le,wU)),js.svg===!0&&(Ai(ae,f5),Ai(Le,p5),Ai(Le,GT)),js.svgFilters===!0&&(Ai(ae,g5),Ai(Le,p5),Ai(Le,GT)),js.mathMl===!0&&(Ai(ae,m5),Ai(Le,CU),Ai(Le,GT))),me.ADD_TAGS&&(ae===Te&&(ae=$_(ae)),Ai(ae,me.ADD_TAGS,Bi)),me.ADD_ATTR&&(Le===Oe&&(Le=$_(Le)),Ai(Le,me.ADD_ATTR,Bi)),me.ADD_URI_SAFE_ATTR&&Ai(Ds,me.ADD_URI_SAFE_ATTR,Bi),me.FORBID_CONTENTS&&(Wr===pn&&(Wr=$_(Wr)),Ai(Wr,me.FORBID_CONTENTS,Bi)),To&&(ae["#text"]=!0),ri&&Ai(ae,["html","head","body"]),ae.table&&(Ai(ae,["tbody"]),delete Ke.tbody),me.TRUSTED_TYPES_POLICY){if(typeof me.TRUSTED_TYPES_POLICY.createHTML!="function")throw DS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof me.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw DS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=me.TRUSTED_TYPES_POLICY,A=N.createHTML("")}else N===void 0&&(N=c0e(_,n)),N!==null&&typeof A=="string"&&(A=N.createHTML(""));Wa&&Wa(me),Do=me}},la=Ai({},["mi","mo","mn","ms","mtext"]),No=Ai({},["annotation-xml"]),_h=Ai({},["title","style","font","a","script"]),ys=Ai({},[...f5,...g5,...Q1e]),Mn=Ai({},[...m5,...J1e]),Is=function(me){let je=T(me);(!je||!je.tagName)&&(je={namespaceURI:ss,tagName:"template"});const st=HD(me.tagName),Di=HD(je.tagName);return cr[me.namespaceURI]?me.namespaceURI===to?je.namespaceURI===hs?st==="svg":je.namespaceURI===oa?st==="svg"&&(Di==="annotation-xml"||la[Di]):!!ys[st]:me.namespaceURI===oa?je.namespaceURI===hs?st==="math":je.namespaceURI===to?st==="math"&&No[Di]:!!Mn[st]:me.namespaceURI===hs?je.namespaceURI===to&&!No[Di]||je.namespaceURI===oa&&!la[Di]?!1:!Mn[st]&&(_h[st]||!ys[st]):!!(Ns==="application/xhtml+xml"&&cr[me.namespaceURI]):!1},rs=function(me){ES(e.removed,{element:me});try{T(me).removeChild(me)}catch{S(me)}},ca=function(me,je){try{ES(e.removed,{attribute:je.getAttributeNode(me),from:je})}catch{ES(e.removed,{attribute:null,from:je})}if(je.removeAttribute(me),me==="is"&&!Le[me])if(on||Bl)try{rs(je)}catch{}else try{je.setAttribute(me,"")}catch{}},kc=function(me){let je=null,st=null;if(Pl)me="<remove></remove>"+me;else{const Cn=_U(me,/^[\r\n\t ]+/);st=Cn&&Cn[0]}Ns==="application/xhtml+xml"&&ss===hs&&(me='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+me+"</body></html>");const Di=N?N.createHTML(me):me;if(ss===hs)try{je=new g().parseFromString(Di,Ns)}catch{}if(!je||!je.documentElement){je=P.createDocument(ss,"template",null);try{je.documentElement.innerHTML=io?A:Di}catch{}}const os=je.body||je.documentElement;return me&&st&&os.insertBefore(t.createTextNode(st),os.childNodes[0]||null),ss===hs?U.call(je,ri?"html":"body")[0]:ri?je.documentElement:os},ds=function(me){return O.call(me.ownerDocument||me,me,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},fu=function(me){return me instanceof d&&(typeof me.nodeName!="string"||typeof me.textContent!="string"||typeof me.removeChild!="function"||!(me.attributes instanceof h)||typeof me.removeAttribute!="function"||typeof me.setAttribute!="function"||typeof me.namespaceURI!="string"||typeof me.insertBefore!="function"||typeof me.hasChildNodes!="function")},ja=function(me){return typeof a=="function"&&me instanceof a},xr=function(me,je,st){B[me]&&jT(B[me],Di=>{Di.call(e,je,st,Do)})},ua=function(me){let je=null;if(xr("beforeSanitizeElements",me,null),fu(me))return rs(me),!0;const st=Bi(me.nodeName);if(xr("uponSanitizeElement",me,{tagName:st,allowedTags:ae}),me.hasChildNodes()&&!ja(me.firstElementChild)&&Ta(/<[/\w]/g,me.innerHTML)&&Ta(/<[/\w]/g,me.textContent)||me.nodeType===IS.progressingInstruction||Ci&&me.nodeType===IS.comment&&Ta(/<[/\w]/g,me.data))return rs(me),!0;if(!ae[st]||Ke[st]){if(!Ke[st]&&Dn(st)&&(Ne.tagNameCheck instanceof RegExp&&Ta(Ne.tagNameCheck,st)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(st)))return!1;if(To&&!Wr[st]){const Di=T(me)||me.parentNode,os=x(me)||me.childNodes;if(os&&Di){const Cn=os.length;for(let As=Cn-1;As>=0;--As){const Gs=C(os[As],!0);Gs.__removalCount=(me.__removalCount||0)+1,Di.insertBefore(Gs,E(me))}}}return rs(me),!0}return me instanceof l&&!Is(me)||(st==="noscript"||st==="noembed"||st==="noframes")&&Ta(/<\/no(script|embed|frames)/i,me.innerHTML)?(rs(me),!0):(ii&&me.nodeType===IS.text&&(je=me.textContent,jT([F,W,ee],Di=>{je=TS(je,Di," ")}),me.textContent!==je&&(ES(e.removed,{element:me.cloneNode()}),me.textContent=je)),xr("afterSanitizeElements",me,null),!1)},ha=function(me,je,st){if(Hr&&(je==="id"||je==="name")&&(st in t||st in $a))return!1;if(!(tt&&!Dt[je]&&Ta(X,je))){if(!(Xe&&Ta($,je))){if(!Le[je]||Dt[je]){if(!(Dn(me)&&(Ne.tagNameCheck instanceof RegExp&&Ta(Ne.tagNameCheck,me)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(me))&&(Ne.attributeNameCheck instanceof RegExp&&Ta(Ne.attributeNameCheck,je)||Ne.attributeNameCheck instanceof Function&&Ne.attributeNameCheck(je))||je==="is"&&Ne.allowCustomizedBuiltInElements&&(Ne.tagNameCheck instanceof RegExp&&Ta(Ne.tagNameCheck,st)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(st))))return!1}else if(!Ds[je]){if(!Ta(j,TS(st,ce,""))){if(!((je==="src"||je==="xlink:href"||je==="href")&&me!=="script"&&K1e(st,"data:")===0&&ns[me])){if(!(Et&&!Ta(te,TS(st,ce,"")))){if(st)return!1}}}}}}return!0},Dn=function(me){return me!=="annotation-xml"&&_U(me,he)},da=function(me){xr("beforeSanitizeAttributes",me,null);const{attributes:je}=me;if(!je)return;const st={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Le};let Di=je.length;for(;Di--;){const os=je[Di],{name:Cn,namespaceURI:As,value:Gs}=os,kr=Bi(Cn);let en=Cn==="value"?Gs:Y1e(Gs);if(st.attrName=kr,st.attrValue=en,st.keepAttr=!0,st.forceKeepAttr=void 0,xr("uponSanitizeAttribute",me,st),en=st.attrValue,st.forceKeepAttr||(ca(Cn,me),!st.keepAttr))continue;if(!jt&&Ta(/\/>/i,en)){ca(Cn,me);continue}ii&&jT([F,W,ee],Er=>{en=TS(en,Er," ")});const Io=Bi(me.nodeName);if(ha(Io,kr,en)){if(is&&(kr==="id"||kr==="name")&&(ca(Cn,me),en=Ua+en),Ci&&Ta(/((--!?|])>)|<\/(style|title)/i,en)){ca(Cn,me);continue}if(N&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!As)switch(_.getAttributeType(Io,kr)){case"TrustedHTML":{en=N.createHTML(en);break}case"TrustedScriptURL":{en=N.createScriptURL(en);break}}try{As?me.setAttributeNS(As,Cn,en):me.setAttribute(Cn,en),fu(me)?rs(me):pU(e.removed)}catch{}}}xr("afterSanitizeAttributes",me,null)},Gn=function pt(me){let je=null;const st=ds(me);for(xr("beforeSanitizeShadowDOM",me,null);je=st.nextNode();)xr("uponSanitizeShadowNode",je,null),!ua(je)&&(je.content instanceof r&&pt(je.content),da(je));xr("afterSanitizeShadowDOM",me,null)};return e.sanitize=function(pt){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=null,st=null,Di=null,os=null;if(io=!pt,io&&(pt="<!-->"),typeof pt!="string"&&!ja(pt))if(typeof pt.toString=="function"){if(pt=pt.toString(),typeof pt!="string")throw DS("dirty is not a string, aborting")}else throw DS("toString is not a function");if(!e.isSupported)return pt;if(Tn||aa(me),e.removed=[],typeof pt=="string"&&(lr=!1),lr){if(pt.nodeName){const Gs=Bi(pt.nodeName);if(!ae[Gs]||Ke[Gs])throw DS("root node is forbidden and cannot be sanitized in-place")}}else if(pt instanceof a)je=kc("<!---->"),st=je.ownerDocument.importNode(pt,!0),st.nodeType===IS.element&&st.nodeName==="BODY"||st.nodeName==="HTML"?je=st:je.appendChild(st);else{if(!on&&!ii&&!ri&&pt.indexOf("<")===-1)return N&&Fl?N.createHTML(pt):pt;if(je=kc(pt),!je)return on?null:Fl?A:""}je&&Pl&&rs(je.firstChild);const Cn=ds(lr?pt:je);for(;Di=Cn.nextNode();)ua(Di)||(Di.content instanceof r&&Gn(Di.content),da(Di));if(lr)return pt;if(on){if(Bl)for(os=V.call(je.ownerDocument);je.firstChild;)os.appendChild(je.firstChild);else os=je;return(Le.shadowroot||Le.shadowrootmode)&&(os=Y.call(i,os,!0)),os}let As=ri?je.outerHTML:je.innerHTML;return ri&&ae["!doctype"]&&je.ownerDocument&&je.ownerDocument.doctype&&je.ownerDocument.doctype.name&&Ta(UZ,je.ownerDocument.doctype.name)&&(As="<!DOCTYPE "+je.ownerDocument.doctype.name+`>
`+As),ii&&jT([F,W,ee],Gs=>{As=TS(As,Gs," ")}),N&&Fl?N.createHTML(As):As},e.setConfig=function(){let pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};aa(pt),Tn=!0},e.clearConfig=function(){Do=null,Tn=!1},e.isValidAttribute=function(pt,me,je){Do||aa({});const st=Bi(pt),Di=Bi(me);return ha(st,Di,je)},e.addHook=function(pt,me){typeof me=="function"&&(B[pt]=B[pt]||[],ES(B[pt],me))},e.removeHook=function(pt){if(B[pt])return pU(B[pt])},e.removeHooks=function(pt){B[pt]&&(B[pt]=[])},e.removeAllHooks=function(){B={}},e}var Rv=qZ();const $Z=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","s","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),jZ=Object.freeze(["href","target","src","alt","title","for","name","role","tabindex","x-dispatch","required","checked","placeholder","type","start","width","height","align"]),_5="vscode-relative-path";function SU(s,e){if(e.override==="*")return!0;try{const t=new URL(s,_5+"://");return!!(e.override.includes(t.protocol.replace(/:$/,""))||e.allowRelativePaths&&t.protocol===_5+":"&&!s.trim().toLowerCase().startsWith(_5))}catch{return!1}}function u0e(s,e){Rv.addHook("afterSanitizeAttributes",t=>{for(const i of["href","src"])if(t.hasAttribute(i)){const n=t.getAttribute(i);i==="href"?!n.startsWith("#")&&!SU(n,s)&&t.removeAttribute(i):SU(n,e)||t.removeAttribute(i)}})}const h0e=Object.freeze({ALLOWED_TAGS:[...$Z],ALLOWED_ATTR:[...jZ],ALLOW_UNKNOWN_PROTOCOLS:!0});function d0e(s,e){return GZ(s,e,"trusted")}function GZ(s,e,t){try{const i={...h0e};e?.allowedTags&&(e.allowedTags.override&&(i.ALLOWED_TAGS=[...e.allowedTags.override]),e.allowedTags.augment&&(i.ALLOWED_TAGS=[...i.ALLOWED_TAGS??[],...e.allowedTags.augment]));let n=[...jZ];e?.allowedAttributes&&(e.allowedAttributes.override&&(n=[...e.allowedAttributes.override]),e.allowedAttributes.augment&&(n=[...n,...e.allowedAttributes.augment])),n=n.map(a=>typeof a=="string"?a.toLowerCase():{attributeName:a.attributeName.toLowerCase(),shouldKeep:a.shouldKeep});const r=new Set(n.map(a=>typeof a=="string"?a:a.attributeName)),o=new Map;for(const a of n)typeof a=="string"?o.delete(a):o.set(a.attributeName,a);return i.ALLOWED_ATTR=Array.from(r),u0e({override:e?.allowedLinkProtocols?.override??[mt.http,mt.https],allowRelativePaths:e?.allowRelativeLinkPaths??!1},{override:e?.allowedMediaProtocols?.override??[mt.http,mt.https],allowRelativePaths:e?.allowRelativeMediaPaths??!1}),e?.replaceWithPlaintext&&Rv.addHook("uponSanitizeElement",g0e),o.size&&Rv.addHook("uponSanitizeAttribute",(a,l)=>{const c=o.get(l.attrName);if(c){const h=c.shouldKeep(a,l);typeof h=="string"?(l.keepAttr=!0,l.attrValue=h):l.keepAttr=h}else l.keepAttr=r.has(l.attrName)}),t==="dom"?Rv.sanitize(s,{...i,RETURN_DOM_FRAGMENT:!0}):Rv.sanitize(s,{...i,RETURN_TRUSTED_TYPE:!0})}finally{Rv.removeAllHooks()}}const f0e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function g0e(s,e,t){if(!e.allowedTags[e.tagName]&&e.tagName!=="body"){const i=KZ(s);s.nodeType===Node.COMMENT_NODE?s.parentElement?.insertBefore(i,s):s.parentElement?.replaceChild(i,s)}}function KZ(s){let e,t;if(s.nodeType===Node.COMMENT_NODE)e=`<!--${s.textContent}-->`;else{const o=s.tagName.toLowerCase(),a=f0e.includes(o),l=s.attributes.length?" "+Array.from(s.attributes).map(c=>`${c.name}="${c.value}"`).join(" "):"";e=`<${o}${l}>`,a||(t=`</${o}>`)}const i=document.createDocumentFragment(),n=s.ownerDocument.createTextNode(e);for(i.appendChild(n);s.firstChild;)i.appendChild(s.firstChild);const r=t?s.ownerDocument.createTextNode(t):void 0;return r&&i.appendChild(r),i}function YZ(s,e,t){const i=GZ(e,t,"dom");Pr(s,i)}const m0e=new RegExp(`(\\\\)?\\$\\((${Gt.iconNameExpression}(?:${Gt.iconModifierExpression})?)\\)`,"g");function $1(s){const e=new Array;let t,i=0,n=0;for(;(t=m0e.exec(s))!==null;){n=t.index||0,i<n&&e.push(s.substring(i,n)),i=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:dI({id:o}))}return i<s.length&&e.push(s.substring(i)),e}function dI(s){const e=ot("span");return e.classList.add(...Gt.asClassNameArray(s)),e}const b5=Object.freeze({image:({href:s,title:e,text:t})=>{let i=[],n=[];return s&&({href:s,dimensions:i}=c1e(s),n.push(`src="${qT(s)}"`)),t&&n.push(`alt="${qT(t)}"`),e&&n.push(`title="${qT(e)}"`),i.length&&(n=n.concat(i)),"<img "+n.join(" ")+">"},paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>`},link({href:s,title:e,tokens:t}){let i=this.parser.parseInline(t);return typeof s!="string"?"":(s===i&&(i=h5(i)),e=typeof e=="string"?qT(h5(e)):"",s=h5(s),s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${s}" title="${e||s}" draggable="false">${i}</a>`)}});function FB(s,e={},t){const i=new Ze;let n=!1;const r=new VZ(...e.markedExtensions??[]),{renderer:o,codeBlocks:a,syncCodeBlocks:l}=_0e(r,e,s),c=b0e(s);let h;if(e.fillInIncompleteTokens){const b={...r.defaults,...e.markedOptions,renderer:o},C=r.lexer(c,b),S=I0e(C);h=r.parser(S,b)}else h=r.parse(c,{...e?.markedOptions,renderer:o,async:!1});s.supportThemeIcons&&(h=$1(h).map(C=>typeof C=="string"?C:C.outerHTML).join(""));const d=document.createElement("div"),g=ZZ(s,e.sanitizerConfig??{});YZ(d,h,g),p0e(s,e,d);let _;if(t?(_=t,Pr(t,...d.children)):_=d,a.length>0)Promise.all(a).then(b=>{if(n)return;const C=new Map(b),S=_.querySelectorAll("div[data-code]");for(const E of S){const x=C.get(E.dataset.code??"");x&&Pr(E,x)}e.asyncRenderCallback?.()});else if(l.length>0){const b=new Map(l),C=_.querySelectorAll("div[data-code]");for(const S of C){const E=b.get(S.dataset.code??"");E&&Pr(S,E)}}if(e.asyncRenderCallback)for(const b of _.getElementsByTagName("img")){const C=i.add(ue(b,"load",()=>{C.dispose(),e.asyncRenderCallback()}))}if(e.actionHandler){const b=C=>{const S=new kl(nt(_),C);!S.leftButton&&!S.middleButton||LU(s,e,S)};i.add(ue(_,"click",b)),i.add(ue(_,"auxclick",b)),i.add(ue(_,"keydown",C=>{const S=new Mi(C);!S.equals(10)&&!S.equals(3)||LU(s,e,S)}))}for(const b of[..._.getElementsByTagName("input")])if(b.attributes.getNamedItem("type")?.value==="checkbox")b.setAttribute("disabled","");else if(e.sanitizerConfig?.replaceWithPlaintext){const C=KZ(b);b.parentElement?.replaceChild(C,b)}else b.remove();return{element:_,dispose:()=>{n=!0,i.dispose()}}}function p0e(s,e,t){for(const i of t.querySelectorAll("img, audio, video, source")){const n=i.getAttribute("src");if(n){let r=n;try{s.baseUri&&(r=S9(Ot.from(s.baseUri),r))}catch{}if(i.setAttribute("src",xU(s,r,!0)),e.sanitizerConfig?.remoteImageIsAllowed){const o=Ot.parse(r);o.scheme!==mt.file&&o.scheme!==mt.data&&!e.sanitizerConfig.remoteImageIsAllowed(o)&&i.replaceWith(ot("",void 0,i.outerHTML))}}}for(const i of t.querySelectorAll("a")){const n=i.getAttribute("href");if(i.setAttribute("href",""),!n||/^data:|javascript:/i.test(n)||/^command:/i.test(n)&&!s.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(n))i.replaceWith(...i.childNodes);else{let r=xU(s,n,!1);s.baseUri&&(r=S9(Ot.from(s.baseUri),n)),i.dataset.href=r}}}function _0e(s,e,t){const i=new s.Renderer(e.markedOptions);i.image=b5.image,i.link=b5.link,i.paragraph=b5.paragraph;const n=[],r=[];return e.codeBlockRendererSync?i.code=({text:o,lang:a,raw:l})=>{const c=cU.nextId(),h=e.codeBlockRendererSync(kU(a),o,l);return r.push([c,h]),`<div class="code" data-code="${c}">${su(o)}</div>`}:e.codeBlockRenderer&&(i.code=({text:o,lang:a})=>{const l=cU.nextId(),c=e.codeBlockRenderer(kU(a),o);return n.push(c.then(h=>[l,h])),`<div class="code" data-code="${l}">${su(o)}</div>`}),t.supportHtml||(i.html=({text:o})=>e.sanitizerConfig?.replaceWithPlaintext?su(o):(t.isTrusted?o.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?o:""),{renderer:i,codeBlocks:n,syncCodeBlocks:r}}function b0e(s){let e=s.value;return e.length>1e5&&(e=`${e.substr(0,1e5)}…`),s.supportThemeIcons&&(e=s1e(e)),e}function LU(s,e,t){const i=t.target.closest("a[data-href]");if(qn(i))try{let n=i.dataset.href;n&&(s.baseUri&&(n=S9(Ot.from(s.baseUri),n)),e.actionHandler?.(n,s))}catch(n){mi(n)}finally{t.preventDefault()}}function v0e(s,e){let t;try{t=v9(decodeURIComponent(e))}catch{}return t?(t=Nj(t,i=>{if(s.uris&&s.uris[i])return Ot.revive(s.uris[i])}),encodeURIComponent(JSON.stringify(t))):e}function xU(s,e,t){const i=s.uris&&s.uris[e];let n=Ot.revive(i);return t?e.startsWith(mt.data+":")?e:(n||(n=Ot.parse(e)),dG.uriToBrowserUri(n).toString(!0)):!n||Ot.parse(e).toString()===n.toString()?e:(n.query&&(n=n.with({query:v0e(s,n.query)})),n.toString())}function kU(s){if(!s)return"";const e=s.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:s}function S9(s,e){return/^\w[\w\d+.-]*:/.test(e)?e:s.path.endsWith("/")?pH(s,e).toString():pH(tre(s),e).toString()}function w0e(s,e,t={}){const i=ZZ(e,t);return d0e(s,i)}const C0e=Object.freeze([...$Z,"input"]),y0e=Object.freeze(["align","autoplay","alt","colspan","controls","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","target","title","type","width","start","checked","disabled","value","data-code","data-href",{attributeName:"style",shouldKeep:(s,e)=>s.tagName==="SPAN"&&e.attrName==="style"?/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(e.attrValue):!1},{attributeName:"class",shouldKeep:(s,e)=>s.tagName==="SPAN"&&e.attrName==="class"?/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(e.attrValue):!1}]);function ZZ(s,e){const t=s.isTrusted??!1,i=[mt.http,mt.https,mt.mailto,mt.file,mt.vscodeFileResource,mt.vscodeRemote,mt.vscodeRemoteResource,mt.vscodeNotebookCell];return t&&i.push(mt.command),e.allowedLinkSchemes?.augment&&i.push(...e.allowedLinkSchemes.augment),{allowedTags:{override:e.allowedTags?.override??C0e},allowedAttributes:{override:e.allowedAttributes?.override??y0e},allowedLinkProtocols:{override:i},allowRelativeLinkPaths:!!s.baseUri,allowedMediaProtocols:{override:[mt.http,mt.https,mt.data,mt.file,mt.vscodeFileResource,mt.vscodeRemote,mt.vscodeRemoteResource]},replaceWithPlaintext:e.replaceWithPlaintext}}function S0e(s,e){if(typeof s=="string")return s;let t=s.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const i=z1e(t,{async:!1,renderer:x0e.value});return w0e(i,{isTrusted:!1},{}).toString().replace(/&(#\d+|[a-zA-Z]+);/g,n=>L0e.get(n)??n).trim()}const L0e=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function XZ(){const s=new Kx;return s.code=({text:e})=>su(e),s.blockquote=({text:e})=>e+`
`,s.html=e=>"",s.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},s.hr=()=>"",s.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},s.listitem=({text:e})=>e+`
`,s.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},s.table=function({header:e,rows:t}){return e.map(i=>this.tablecell(i)).join(" ")+`
`+t.map(i=>i.map(n=>this.tablecell(n)).join(" ")).join(`
`)+`
`},s.tablerow=({text:e})=>e,s.tablecell=function({tokens:e}){return this.parser.parseInline(e)},s.strong=({text:e})=>e,s.em=({text:e})=>e,s.codespan=({text:e})=>su(e),s.br=e=>`
`,s.del=({text:e})=>e,s.image=e=>"",s.text=({text:e})=>e,s.link=({text:e})=>e,s}const x0e=new po(XZ);new po(()=>{const s=XZ();return s.code=({text:e})=>`
\`\`\`
${su(e)}
\`\`\`
`,s});function Zx(s){let e="";return s.forEach(t=>{e+=t.raw}),e}function QZ(s){if(s.tokens)for(let e=s.tokens.length-1;e>=0;e--){const t=s.tokens[e];if(t.type==="text"){const i=t.raw.split(`
`),n=i[i.length-1];if(n.includes("`"))return R0e(s);if(n.includes("**"))return V0e(s);if(n.match(/\*\w/))return M0e(s);if(n.match(/(^|\s)__\w/))return H0e(s);if(n.match(/(^|\s)_\w/))return O0e(s);if(k0e(n)||E0e(n)&&s.tokens.slice(0,e).some(r=>r.type==="text"&&r.raw.match(/\[[^\]]*$/))){const r=s.tokens.slice(e+1);return r[0]?.type==="link"&&r[1]?.type==="text"&&r[1].raw.match(/^ *"[^"]*$/)||n.match(/^[^"]* +"[^"]*$/)?B0e(s):P0e(s)}else if(n.match(/(^|\s)\[\w*[^\]]*$/))return F0e(s)}}}function k0e(s){return!!s.match(/(^|\s)\[.*\]\(\w*/)}function E0e(s){return!!s.match(/^[^\[]*\]\([^\)]*$/)}function T0e(s){const e=s.items[s.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0,i=c=>{const d=c.items.at(-1)?.tokens.at(-1);return d?.type==="heading"||d?.type==="list"&&i(d)};let n;if(t?.type==="text"&&!("inRawBlock"in e))n=QZ(t);else if(i(s)){const c=Yx(s.raw.trim()+" &nbsp;")[0];return c.type!=="list"?void 0:c}if(!n||n.type!=="paragraph")return;const r=Zx(s.items.slice(0,-1)),o=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!o)return;const a=o+Zx(e.tokens.slice(0,-1))+n.raw,l=Yx(r+a)[0];if(l.type==="list")return l}function D0e(s,e){if(s.raw.match(/-\s*$/))return Yx(e+" &nbsp;")}const N0e=3;function I0e(s){for(let e=0;e<N0e;e++){const t=A0e(s);if(t)s=t;else break}return s}function A0e(s){let e,t;for(e=0;e<s.length;e++){const n=s[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=W0e(s.slice(e));break}}const i=s.at(-1);if(!t&&i?.type==="list"){const n=T0e(i);n&&(t=[n],e=s.length-1)}if(!t&&i?.type==="paragraph"){const n=QZ(i);n&&(t=[n],e=s.length-1)}if(t){const n=[...s.slice(0,e),...t];return n.links=s.links,n}if(i?.type==="heading"){const n=D0e(i,Zx(s));if(n)return n}return null}function R0e(s){return wp(s,"`")}function M0e(s){return wp(s,"*")}function O0e(s){return wp(s,"_")}function P0e(s){return wp(s,")",!1)}function B0e(s){return wp(s,'")',!1)}function F0e(s){return wp(s,"](https://microsoft.com)",!1)}function V0e(s){return wp(s,"**")}function H0e(s){return wp(s,"__")}function wp(s,e,t=!0){const i=Zx(Array.isArray(s)?s:[s]),n=t?i.trimEnd():i;return Yx(n+e)[0]}function W0e(s){const e=Zx(s),t=e.split(`
`);let i,n=!1;for(let r=0;r<t.length;r++){const o=t[r].trim();if(typeof i>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(o.match(/^\s*\|/)){if(r!==t.length-1)return;n=!0}else return}if(typeof i=="number"&&i>0){const r=n?t.slice(0,-1).join(`
`):e,o=!!r.match(/\|\s*$/),a=r+(o?"":"|")+`
|${" --- |".repeat(i)}`;return Yx(a)}}var z0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},EU=function(s,e){return function(t,i){e(t,i,s)}},L9,X1;let x9=(X1=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i}render(e,t,i){const n=FB(e,{codeBlockRenderer:(r,o)=>this.renderCodeBlock(r,o),actionHandler:(r,o)=>this.openMarkdownLink(r,o),...t},i);return n.element.classList.add("rendered-markdown"),n}async renderCodeBlock(e,t){let i;e?i=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(i=this._options.editor.getModel()?.getLanguageId()),i||(i=ru);const n=await Lpe(this._languageService,t,i),r=document.createElement("span");if(r.innerHTML=L9._ttpTokenizer?.createHTML(n)??n,this._options.editor){const o=this._options.editor.getOption(59);Sr(r,o)}else this._options.codeBlockFontFamily&&(r.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(r.style.fontSize=this._options.codeBlockFontSize),r}async openMarkdownLink(e,t){await JZ(this._openerService,e,t.isTrusted)}},L9=X1,X1._ttpTokenizer=bp("tokenizeToString",{createHTML(e){return e}}),X1);x9=L9=z0e([EU(1,$s),EU(2,z2)],x9);async function JZ(s,e,t,i){try{return await s.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:U0e(t),skipValidation:i})}catch(n){return mi(n),!1}}function U0e(s){return s===!0?!0:s&&Array.isArray(s.enabledCommands)?s.enabledCommands:!1}var q0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},AS=function(s,e){return function(t,i){e(t,i,s)}};const Jh=ot;let k9=class extends Ud{get _targetWindow(){return nt(this._target.targetElements[0])}get _targetDocumentElement(){return nt(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,n,r,o){super(),this._keybindingService=t,this._configurationService=i,this._openerService=n,this._instantiationService=r,this._accessibilityService=o,this._messageListeners=new Ze,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._maxHeightRatioRelativeToWindow=.5,this._onDispose=this._register(new ne),this._onRequestLayout=this._register(new ne),this._linkHandler=e.linkHandler||(_=>JZ(this._openerService,_,Fw(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new $0e(e.target),this._hoverPointer=e.appearance?.showPointer?Jh("div.workbench-hover-pointer"):void 0,this._hover=this._register(new M_e(!e.appearance?.skipFadeInAnimation)),this._hover.containerDomNode.classList.add("workbench-hover"),e.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.position?.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0);const a=e.appearance?.maxHeightRatio;a!==void 0&&a>0&&a<=1&&(this._maxHeightRatioRelativeToWindow=a),this._hoverPosition=e.position?.hoverPosition===void 0?3:D0(e.position.hoverPosition)?e.position.hoverPosition:2,this.onmousedown(this._hover.containerDomNode,_=>_.stopPropagation()),this.onkeydown(this._hover.containerDomNode,_=>{_.equals(9)&&this.dispose()}),this._register(ue(this._targetWindow,"blur",()=>this.dispose()));const l=Jh("div.hover-row.markdown-hover"),c=Jh("div.hover-contents");if(typeof e.content=="string")c.textContent=e.content,c.style.whiteSpace="pre-wrap";else if(qn(e.content))c.appendChild(e.content),c.classList.add("html-hover-contents");else{const _=e.content,b=this._instantiationService.createInstance(x9,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Nl.fontFamily}),{element:C,dispose:S}=b.render(_,{actionHandler:E=>this._linkHandler(E),asyncRenderCallback:()=>{c.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});c.appendChild(C),this._register(lt(S))}if(l.appendChild(c),this._hover.contentsDomNode.appendChild(l),e.actions&&e.actions.length>0){const _=Jh("div.hover-row.status-bar"),b=Jh("div.actions");e.actions.forEach(C=>{const S=this._keybindingService.lookupKeybinding(C.commandId),E=S?S.getLabel():null;this._register(kB.render(b,{label:C.label,commandId:C.commandId,run:x=>{C.run(x),this.dispose()},iconClass:C.iconClass},E))}),_.appendChild(b),this._hover.containerDomNode.appendChild(_)}this._hoverContainer=Jh("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let h;if(e.actions&&e.actions.length>0?h=!1:e.persistence?.hideOnHover===void 0?h=typeof e.content=="string"||Fw(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):h=e.persistence.hideOnHover,e.appearance?.showHoverHint){const _=Jh("div.hover-row.status-bar"),b=Jh("div.info");b.textContent=y(74,"Hold {0} key to mouse over",Bt?"Option":"Alt"),_.appendChild(b),this._hover.containerDomNode.appendChild(_)}const d=[...this._target.targetElements];h||d.push(this._hoverContainer);const g=this._register(new TU(d));if(this._register(g.onMouseOut(()=>{this._isLocked||this.dispose()})),h){const _=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new TU(_)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=g}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=sR(this._hoverContainer,Jh("div")),n=Qe(this._hoverContainer,Jh("div"));i.tabIndex=0,n.tabIndex=0,this._register(ue(n,"focus",r=>{e.focus(),r.preventDefault()})),this._register(ue(i,"focus",r=>{t.focus(),r.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const r=i;if(typeof r.tabIndex=="number"&&r.tabIndex>=0)return r}const n=this.findLastFocusableChild(i);if(n)return n}}render(e){e.appendChild(this._hoverContainer);const i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&O_e(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel());i&&EN(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=h=>{const d=CG(h),g=h.getBoundingClientRect();return{top:g.top*d,bottom:g.bottom*d,right:g.right*d,left:g.left*d}},t=this._target.targetElements.map(h=>e(h)),{top:i,right:n,bottom:r,left:o}=t[0],a=n-o,l=r-i,c={top:i,right:n,bottom:r,left:o,width:a,height:l,center:{x:o+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight*this._maxHeightRatioRelativeToWindow;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const n=this._x+i;(n<e.left||n>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._target.dispose?.(),this._hoverContainer.remove(),this._messageListeners.dispose(),super.dispose()),this._isDisposed=!0}};k9=q0e([AS(1,ar),AS(2,cn),AS(3,z2),AS(4,Zt),AS(5,Ol)],k9);class TU extends Ud{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e,t=200){super(),this._elements=e,this._eventDebounceDelay=t,this._isMouseIn=!0,this._mouseTimer=this._register(new qs),this._onMouseOut=this._register(new ne);for(const i of this._elements)this.onmouseover(i,()=>this._onTargetMouseOver()),this.onmouseleave(i,()=>this._onTargetMouseLeave())}_onTargetMouseOver(){this._isMouseIn=!0,this._mouseTimer.clear()}_onTargetMouseLeave(){this._isMouseIn=!1,this._mouseTimer.value=new vg(()=>this._fireIfMouseOutside(),this._eventDebounceDelay)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class $0e{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var Ir;(function(s){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}s.intersect=e;function t(r){return r.end-r.start<=0}s.isEmpty=t;function i(r,o){return!t(e(r,o))}s.intersects=i;function n(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}s.relativeComplement=n})(Ir||(Ir={}));function j0e(s){const e=s;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var $m;(function(s){s[s.AVOID=0]="AVOID",s[s.ALIGN=1]="ALIGN"})($m||($m={}));function iw(s,e,t){const i=t.mode===$m.ALIGN?t.offset:t.offset+t.size,n=t.mode===$m.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=s-i?i:e<=n?n-e:Math.max(s-e,0):e<=n?n-e:e<=s-i?i:0}const vw=class vw extends pe{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=pe.None,this.toDisposeOnSetContainer=pe.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ot(".context-view"),tH(this.view),this.setContainer(e,t),this._register(lt(()=>this.setContainer(null,1)))}setContainer(e,t){this.useFixedPosition=t!==1;const i=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&i===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=ot(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=G0e,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ot("slot"))}else this.container.appendChild(this.view);const n=new Ze;vw.BUBBLE_UP_EVENTS.forEach(r=>{n.add(Cr(this.container,r,o=>{this.onDOMEvent(o,!1)}))}),vw.BUBBLE_DOWN_EVENTS.forEach(r=>{n.add(Cr(this.container,r,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=n}}show(e){this.isVisible()&&this.hide(),oh(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",kG(this.view),this.toDisposeOnClean=e.render(this.view)||pe.None,this.delegate=e,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Nd&&S2.pointerEvents)){this.hide();return}this.delegate?.layout?.(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(qn(e)){const b=pc(e),C=CG(e);t={top:b.top*C,left:b.left*C,width:b.width*C,height:b.height*C}}else j0e(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=CP(this.view),n=T3(this.view),r=this.delegate.anchorPosition??0,o=this.delegate.anchorAlignment??0,a=this.delegate.anchorAxisAlignment??0;let l,c;const h=wi();if(a===0){const b={offset:t.top-h.pageYOffset,size:t.height,position:r===0?0:1},C={offset:t.left,size:t.width,position:o===0?0:1,mode:$m.ALIGN};l=iw(h.innerHeight,n,b)+h.pageYOffset,Ir.intersects({start:l,end:l+n},{start:b.offset,end:b.offset+b.size})&&(C.mode=$m.AVOID),c=iw(h.innerWidth,i,C)}else{const b={offset:t.left,size:t.width,position:o===0?0:1},C={offset:t.top,size:t.height,position:r===0?0:1,mode:$m.ALIGN};c=iw(h.innerWidth,i,b),Ir.intersects({start:c,end:c+i},{start:b.offset,end:b.offset+b.size})&&(C.mode=$m.AVOID),l=iw(h.innerHeight,n,C)+h.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=pc(this.container),g=this.container.scrollTop||0,_=this.container.scrollLeft||0;this.view.style.top=`${l-(this.useFixedPosition?pc(this.view).top:d.top)+g}px`,this.view.style.left=`${c-(this.useFixedPosition?pc(this.view).left:d.left)+_}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),tH(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,nt(e).document.activeElement):t&&!zs(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};vw.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],vw.BUBBLE_DOWN_EVENTS=["click"];let E9=vw;const G0e=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Nanum Gothic", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var K0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Y0e=function(s,e){return function(t,i){e(t,i,s)}};let fI=class extends pe{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new E9(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let n;t?t===this.layoutService.getContainer(nt(t))?n=1:i?n=3:n=2:n=1,this.contextView.setContainer(t??this.layoutService.activeContainer,n),this.contextView.show(e);const r={close:()=>{this.openContextView===r&&this.hideContextView()}};return this.openContextView=r,r}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};fI=K0e([Y0e(0,xg)],fI);class Z0e extends fI{getContextViewElement(){return this.contextView.getViewElement()}}function eX(s){const e=s;return typeof e=="object"&&"markdown"in e&&"markdownNotSupportedFallback"in e}class X0e{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let n;if(rr(e)||qn(e)||e===void 0)n=e;else{this._cancellationTokenSource=new SC;const r=this._cancellationTokenSource.token;let o;if(eX(e)?Qw(e.markdown)?o=e.markdown(r).then(a=>a??e.markdownNotSupportedFallback):o=e.markdown??e.markdownNotSupportedFallback:o=e.element(r),o instanceof Promise?(this._hoverWidget||this.show(y(75,"Loading..."),t,i),n=await o):n=o,this.isDisposed||r.isCancellationRequested)return}this.show(n,t,i)}show(e,t,i){const n=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,actions:i?.actions,linkHandler:i?.linkHandler,trapFocus:i?.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!n,showHoverHint:i?.appearance?.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}n?.dispose()}hasContent(e){return e?Fw(e)?!!e.value:!0:!1}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}var Q0e=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Nv=function(s,e){return function(t,i){e(t,i,s)}};let T9=class extends pe{constructor(e,t,i,n,r,o){super(),this._instantiationService=e,this._configurationService=t,this._keybindingService=n,this._layoutService=r,this._accessibilityService=o,this._currentDelayedHoverWasShown=!1,this._delayedHovers=new Map,this._managedHovers=new Map,this._register(i.onDidShowContextMenu(()=>this.hideHover())),this._contextViewHandler=this._register(new fI(this._layoutService)),this._register(_p.registerCommandAndKeybindingRule({id:"workbench.action.showHover",weight:199,when:Ge.editorTextFocus.negate(),primary:qj(2089,2087),handler:()=>{this._showAndFocusHoverForActiveElement()}}))}showInstantHover(e,t,i,n){const r=this._createHover(e,i);if(r)return this._showHover(r,e,t),r}showDelayedHover(e,t){if(e.id===void 0&&(e.id=DU(e.content)),!this._currentDelayedHover||this._currentDelayedHoverWasShown){if(this._currentHover?.isLocked)return;if(Cm(this._currentHoverOptions)===Cm(e))return this._currentHover;if(this._currentHover&&!this._currentHover.isDisposed&&this._currentDelayedHoverGroupId!==void 0&&this._currentDelayedHoverGroupId===t?.groupId)return this.showInstantHover({...e,appearance:{...e.appearance,skipFadeInAnimation:!0}})}else if(this._currentDelayedHover&&Cm(this._currentHoverOptions)===Cm(e))return this._currentDelayedHover;const i=this._createHover(e,void 0);if(!i){this._currentDelayedHover=void 0,this._currentDelayedHoverWasShown=!1,this._currentDelayedHoverGroupId=void 0;return}return this._currentDelayedHover=i,this._currentDelayedHoverWasShown=!1,this._currentDelayedHoverGroupId=t?.groupId,tC(this._configurationService.getValue("workbench.hover.delay")).then(()=>{i&&!i.isDisposed&&(this._currentDelayedHoverWasShown=!0,this._showHover(i,e))}),i}setupDelayedHover(e,t,i){const n=()=>({...typeof t=="function"?t():t,target:e});return this._setupDelayedHover(e,n,i)}setupDelayedHoverAtMouse(e,t,i){const n=r=>({...typeof t=="function"?t():t,target:{targetElements:[e],x:r!==void 0?r.x+10:void 0}});return this._setupDelayedHover(e,n,i)}_setupDelayedHover(e,t,i){const n=new Ze;return n.add(ue(e,Re.MOUSE_OVER,r=>{this.showDelayedHover(t(r),{groupId:i?.groupId})})),i?.setupKeyboardEvents&&n.add(ue(e,Re.KEY_DOWN,r=>{const o=new Mi(r);(o.equals(10)||o.equals(3))&&this.showInstantHover(t(),!0)})),this._delayedHovers.set(e,{show:r=>{this.showInstantHover(t(),r)}}),n.add(lt(()=>this._delayedHovers.delete(e))),n}_createHover(e,t){if(this._currentDelayedHover=void 0,this._currentHover?.isLocked||(e.id===void 0&&(e.id=DU(e.content)),Cm(this._currentHoverOptions)===Cm(e)))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const i=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),n=Us();t||(i&&n?n.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=n):this._lastFocusedElementBeforeOpen=void 0);const r=new Ze,o=this._instantiationService.createInstance(k9,e);if(e.persistence?.sticky&&(o.isLocked=!0),e.position?.hoverPosition&&!D0(e.position.hoverPosition)&&(e.target={targetElements:qn(e.target)?[e.target]:e.target.targetElements,x:e.position.hoverPosition.x+10}),o.onDispose(()=>{this._currentHover?.domNode&&SG(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),Cm(this._currentHoverOptions)===Cm(e)&&this.doHideHover(),r.dispose()},void 0,r),!e.container){const a=qn(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(nt(a))}if(o.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,r),e.persistence?.sticky)r.add(ue(nt(e.container).document,Re.MOUSE_DOWN,a=>{zs(a.target,o.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const l of e.target.targetElements)r.add(ue(l,Re.CLICK,()=>this.hideHover()));else r.add(ue(e.target,Re.CLICK,()=>this.hideHover()));const a=Us();if(a){const l=nt(a).document;r.add(ue(a,Re.KEY_DOWN,c=>this._keyDown(c,o,!!e.persistence?.hideOnKeyDown))),r.add(ue(l,Re.KEY_DOWN,c=>this._keyDown(c,o,!!e.persistence?.hideOnKeyDown))),r.add(ue(a,Re.KEY_UP,c=>this._keyUp(c,o))),r.add(ue(l,Re.KEY_UP,c=>this._keyUp(c,o)))}}if("IntersectionObserver"in Ri){const a=new IntersectionObserver(c=>this._intersectionChange(c,o),{threshold:0}),l="targetElements"in e.target?e.target.targetElements[0]:e.target;a.observe(l),r.add(lt(()=>a.disconnect()))}return this._currentHover=o,o}_showHover(e,t,i){this._contextViewHandler.showContextView(new ebe(e,i),t.container)}hideHover(e){!e&&this._currentHover?.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showInstantHover(this._lastHoverOptions,!0,!0)}_showAndFocusHoverForActiveElement(){let e=Us();for(;e;){const t=this._delayedHovers.get(e)??this._managedHovers.get(e);if(t){t.show(!0);return}e=e.parentElement}}_keyDown(e,t,i){if(e.key==="Alt"){t.isLocked=!0;return}const n=new Mi(e);this._keybindingService.resolveKeyboardEvent(n).getSingleModifierDispatchChords().some(o=>!!o)||this._keybindingService.softDispatch(n,n.target).kind!==0||i&&(!this._currentHoverOptions?.trapFocus||e.key!=="Tab")&&(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(e,t){e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupManagedHover(e,t,i,n){if(e.showNativeHover)return J0e(t,i);t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let r,o;const a=(_,b)=>{const C=o!==void 0;_&&(o?.dispose(),o=void 0),b&&(r?.dispose(),r=void 0),C&&(e.onDidHideHover?.(),o=void 0)},l=(_,b,C,S)=>new vg(async()=>{(!o||o.isDisposed)&&(o=new X0e(e,C||t,_>0),await o.update(typeof i=="function"?i():i,b,{...n,trapFocus:S}))},_),c=new Ze;let h=!1;c.add(ue(t,Re.MOUSE_DOWN,()=>{h=!0,a(!0,!0)},!0)),c.add(ue(t,Re.MOUSE_UP,()=>{h=!1},!0)),c.add(ue(t,Re.MOUSE_LEAVE,_=>{h=!1,a(!1,_.fromElement===t)},!0)),c.add(ue(t,Re.MOUSE_OVER,_=>{if(r)return;const b=new Ze,C={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const S=E=>{C.x=E.x+10,qn(E.target)&&IU(E.target,t)!==t&&a(!0,!0)};b.add(ue(t,Re.MOUSE_MOVE,S,!0))}r=b,!(qn(_.target)&&IU(_.target,t)!==t)&&b.add(l(typeof e.delay=="function"?e.delay(i):e.delay,!1,C))},!0));const d=()=>{if(h||r)return;const _={targetElements:[t],dispose:()=>{}},b=new Ze,C=()=>a(!0,!0);b.add(ue(t,Re.BLUR,C,!0)),b.add(l(typeof e.delay=="function"?e.delay(i):e.delay,!1,_)),r=b};ih(t)||c.add(ue(t,Re.FOCUS,d,!0));const g={show:_=>{a(!1,!0),l(0,_,void 0,_)},hide:()=>{a(!0,!0)},update:async(_,b)=>{i=_,await o?.update(i,void 0,b)},dispose:()=>{this._managedHovers.delete(t),c.dispose(),a(!0,!0)}};return this._managedHovers.set(t,g),g}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};T9=Q0e([Nv(0,Zt),Nv(1,cn),Nv(2,kg),Nv(3,ar),Nv(4,xg),Nv(5,Ol)],T9);function Cm(s){if(s!==void 0)return s?.id??s}function DU(s){if(!qn(s))return typeof s=="string"?s.toString():s.value}function NU(s){const e=typeof s=="function"?s():s;if(rr(e))return xZ(e);if(eX(e))return e.markdownNotSupportedFallback}function J0e(s,e){function t(i){i?s.setAttribute("title",i):s.removeAttribute("title")}return t(NU(e)),{update:i=>t(NU(i)),show:()=>{},hide:()=>{},dispose:()=>t(void 0)}}class ebe{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function IU(s,e){for(e=e??nt(s).document.body;!s.hasAttribute("custom-hover")&&s!==e;)s=s.parentElement;return s}$t(H2,T9,1);Lg((s,e)=>{const t=s.getColor(yle);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const tbe={ctrlCmd:!1,alt:!1};var Xx;(function(s){s[s.Blur=1]="Blur",s[s.Gesture=2]="Gesture",s[s.Other=3]="Other"})(Xx||(Xx={}));var hd;(function(s){s[s.NONE=0]="NONE",s[s.FIRST=1]="FIRST",s[s.SECOND=2]="SECOND",s[s.LAST=3]="LAST"})(hd||(hd={}));var $i;(function(s){s[s.First=1]="First",s[s.Second=2]="Second",s[s.Last=3]="Last",s[s.Next=4]="Next",s[s.Previous=5]="Previous",s[s.NextPage=6]="NextPage",s[s.PreviousPage=7]="PreviousPage",s[s.NextSeparator=8]="NextSeparator",s[s.PreviousSeparator=9]="PreviousSeparator"})($i||($i={}));var gI;(function(s){s[s.Title=1]="Title",s[s.Inline=2]="Inline"})(gI||(gI={}));const z0=At("quickInputService");var Vw;(function(s){s[s.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",s[s.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Vw||(Vw={}));var u1;(function(s){s[s.None=0]="None",s[s.Initialized=1]="Initialized",s[s.Closed=2]="Closed"})(u1||(u1={}));const xA=class xA extends pe{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new fx),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=u1.None,this.cache=new Map,this.flushDelayer=this._register(new uG(xA.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.pendingClose=void 0,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{e.changed?.forEach((t,i)=>this.acceptExternal(i,t)),e.deleted?.forEach(t=>this.acceptExternal(t,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===u1.Closed)return;let i=!1;fc(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return fc(i)?t:i}getBoolean(e,t){const i=this.get(e);return fc(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return fc(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===u1.Closed)return;if(fc(t))return this.delete(e,i);const n=Xo(t)||Array.isArray(t)?U1e(t):String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===u1.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async flush(e){if(!(this.state===u1.Closed||this.pendingClose))return this.doFlush(e)}async doFlush(e){return this.options.hint===Vw.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}async whenFlushed(){if(this.hasPending)return new Promise(e=>this.whenFlushedCallbacks.push(e))}};xA.DEFAULT_FLUSH_DELAY=100;let IL=xA;class v5{constructor(){this.onDidChangeItemsExternal=Ie.None,this.items=new Map}async updateItems(e){e.insert?.forEach((t,i)=>this.items.set(i,t)),e.delete?.forEach(t=>this.items.delete(t))}}const WD="__$__targetStorageMarker",$2=At("storageService");var AL;(function(s){s[s.NONE=0]="NONE",s[s.SHUTDOWN=1]="SHUTDOWN"})(AL||(AL={}));function ibe(s){const e=s.get(WD);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const kA=class kA extends pe{constructor(e={flushInterval:kA.DEFAULT_FLUSH_INTERVAL}){super(),this._onDidChangeValue=this._register(new fx),this._onDidChangeTarget=this._register(new fx),this._onWillSaveState=this._register(new ne),this.onWillSaveState=this._onWillSaveState.event,this.runFlushWhenIdle=this._register(new qs),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0,this.flushWhenIdleScheduler=this._register(new Or(()=>this.doFlushWhenIdle(),e.flushInterval))}onDidChangeValue(e,t,i){return Ie.filter(this._onDidChangeValue.event,n=>n.scope===e&&(t===void 0||n.key===t),i)}doFlushWhenIdle(){this.runFlushWhenIdle.value=uP(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}emitDidChangeValue(e,t){const{key:i,external:n}=t;if(i===WD){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:n})}get(e,t,i){return this.getStorage(t)?.get(e,i)}getBoolean(e,t,i){return this.getStorage(t)?.getBoolean(e,i)}getNumber(e,t,i){return this.getStorage(t)?.getNumber(e,i)}store(e,t,i,n,r=!1){if(fc(t)){this.remove(e,i,r);return}this.withPausedEmitters(()=>{this.updateKeyTarget(e,i,n),this.getStorage(i)?.set(e,t,r)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,n=!1){const r=this.getKeyTargets(t);typeof i=="number"?r[e]!==i&&(r[e]=i,this.getStorage(t)?.set(WD,JSON.stringify(r),n)):typeof r[e]=="number"&&(delete r[e],this.getStorage(t)?.set(WD,JSON.stringify(r),n))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?ibe(t):Object.create(null)}async flush(e=AL.NONE){this._onWillSaveState.fire({reason:e});const t=this.getStorage(-1),i=this.getStorage(0),n=this.getStorage(1);switch(e){case AL.NONE:await _x.settled([t?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve()]);break;case AL.SHUTDOWN:await _x.settled([t?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve()]);break}}};kA.DEFAULT_FLUSH_INTERVAL=60*1e3;let D9=kA;class nbe extends D9{constructor(){super(),this.applicationStorage=this._register(new IL(new v5,{hint:Vw.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new IL(new v5,{hint:Vw.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new IL(new v5,{hint:Vw.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}shouldFlushWhenIdle(){return!1}}var sbe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},AU=function(s,e){return function(t,i){e(t,i,s)}};const rbe=At("IInlineCompletionsService"),obe=new et("inlineCompletions.snoozed",!1,y(76,"Whether inline completions are currently snoozed"));let N9=class extends pe{get snoozeTimeLeft(){return this._snoozeTimeEnd===void 0?0:Math.max(0,this._snoozeTimeEnd-Date.now())}constructor(e,t){super(),this._contextKeyService=e,this._telemetryService=t,this._onDidChangeIsSnoozing=this._register(new ne),this.onDidChangeIsSnoozing=this._onDidChangeIsSnoozing.event,this._snoozeTimeEnd=void 0,this._recentCompletionIds=[],this._timer=this._register(new iR);const i=obe.bindTo(this._contextKeyService);this._register(this.onDidChangeIsSnoozing(()=>i.set(this.isSnoozing())))}setSnoozeDuration(e){if(e<0)throw new at(`Invalid snooze duration: ${e}. Duration must be non-negative.`);if(e===0){this.cancelSnooze();return}const t=this.isSnoozing(),i=this.snoozeTimeLeft;this._snoozeTimeEnd=Date.now()+e,t||this._onDidChangeIsSnoozing.fire(!0),this._timer.cancelAndSet(()=>{if(!this.isSnoozing())this._onDidChangeIsSnoozing.fire(!1);else throw new at("Snooze timer did not fire as expected")},this.snoozeTimeLeft+1),this._reportSnooze(e-i,e)}isSnoozing(){return this.snoozeTimeLeft>0}cancelSnooze(){this.isSnoozing()&&(this._reportSnooze(-this.snoozeTimeLeft,0),this._snoozeTimeEnd=void 0,this._timer.cancel(),this._onDidChangeIsSnoozing.fire(!1))}reportNewCompletion(e){this._lastCompletionId=e,this._recentCompletionIds.unshift(e),this._recentCompletionIds.length>5&&this._recentCompletionIds.pop()}_reportSnooze(e,t){const i=Math.round(e/1e3),n=Math.round(t/1e3);this._telemetryService.publicLog2("inlineCompletions.snooze",{deltaSeconds:i,totalSeconds:n,lastCompletionId:this._lastCompletionId,recentCompletionIds:this._recentCompletionIds})}};N9=sbe([AU(0,ai),AU(1,Sg)],N9);$t(rbe,N9,1);const abe=At("IWorkspaceEditService");class VB{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(j1.is(t))return j1.lift(t);if(Hw.is(t))return Hw.lift(t);throw new Error("Unsupported edit")})}}class j1 extends VB{static is(e){return e instanceof j1?!0:Xo(e)&&Ot.isUri(e.resource)&&Xo(e.textEdit)}static lift(e){return e instanceof j1?e:new j1(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,n){super(n),this.resource=e,this.textEdit=t,this.versionId=i}}class Hw extends VB{static is(e){return e instanceof Hw?!0:Xo(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof Hw?e:new Hw(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},n){super(n),this.oldResource=e,this.newResource=t,this.options=i}}const gr={enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},lbe=Object.freeze({id:"editor",order:5,type:"object",title:y(144,"Editor"),scope:6}),mI={...lbe,properties:{"editor.tabSize":{type:"number",default:Ar.tabSize,minimum:1,maximum:100,markdownDescription:y(145,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:y(146,'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Ar.insertSpaces,markdownDescription:y(147,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Ar.detectIndentation,markdownDescription:y(148,"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Ar.trimAutoWhitespace,description:y(149,"Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Ar.largeFileOptimizations,description:y(150,"Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[y(151,"Turn off Word Based Suggestions."),y(152,"Only suggest words from the active document."),y(153,"Suggest words from all open documents of the same language."),y(154,"Suggest words from all open documents.")],description:y(155,"Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[y(156,"Semantic highlighting enabled for all color themes."),y(157,"Semantic highlighting disabled for all color themes."),y(158,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:y(159,"Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:y(160,"Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:y(161,"Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:y(162,"Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:y(163,"Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:y(164,"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:y(165,"Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `#editor.experimental.preferTreeSitter#` for specific languages will take precedence."),tags:["experimental"],experiment:{mode:"auto"}},"editor.experimental.preferTreeSitter.css":{type:"boolean",default:!1,markdownDescription:y(166,"Controls whether tree sitter parsing should be turned on for css. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for css."),tags:["experimental"],experiment:{mode:"auto"}},"editor.experimental.preferTreeSitter.typescript":{type:"boolean",default:!1,markdownDescription:y(167,"Controls whether tree sitter parsing should be turned on for typescript. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for typescript."),tags:["experimental"],experiment:{mode:"auto"}},"editor.experimental.preferTreeSitter.ini":{type:"boolean",default:!1,markdownDescription:y(168,"Controls whether tree sitter parsing should be turned on for ini. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for ini."),tags:["experimental"],experiment:{mode:"auto"}},"editor.experimental.preferTreeSitter.regex":{type:"boolean",default:!1,markdownDescription:y(169,"Controls whether tree sitter parsing should be turned on for regex. This will take precedence over `#editor.experimental.treeSitterTelemetry#` for regex."),tags:["experimental"],experiment:{mode:"auto"}},"editor.language.brackets":{type:["array","null"],default:null,description:y(170,"Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:y(171,"The opening bracket character or string sequence.")},{type:"string",description:y(172,"The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:y(173,"Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:y(174,"The opening bracket character or string sequence.")},{type:"string",description:y(175,"The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:gr.maxComputationTime,description:y(176,"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:gr.maxFileSize,description:y(177,"Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:gr.renderSideBySide,description:y(178,"Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:gr.renderSideBySideInlineBreakpoint,description:y(179,"If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:gr.useInlineViewWhenSpaceIsLimited,description:y(180,"If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:gr.renderMarginRevertIcon,description:y(181,"When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:gr.renderGutterMenu,description:y(182,"When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:gr.ignoreTrimWhitespace,description:y(183,"When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:gr.renderIndicators,description:y(184,"Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:gr.diffCodeLens,description:y(185,"Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:gr.diffWordWrap,markdownEnumDescriptions:[y(186,"Lines will never wrap."),y(187,"Lines will wrap at the viewport width."),y(188,"Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:gr.diffAlgorithm,markdownEnumDescriptions:[y(189,"Uses the legacy diffing algorithm."),y(190,"Uses the advanced diffing algorithm.")]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:gr.hideUnchangedRegions.enabled,markdownDescription:y(191,"Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:gr.hideUnchangedRegions.revealLineCount,markdownDescription:y(192,"Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:gr.hideUnchangedRegions.minimumLineCount,markdownDescription:y(193,"Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:gr.hideUnchangedRegions.contextLineCount,markdownDescription:y(194,"Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:gr.experimental.showMoves,markdownDescription:y(195,"Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:gr.experimental.showEmptyDecorations,description:y(196,"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:gr.experimental.useTrueInlineView,description:y(197,"If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function cbe(s){return typeof s.type<"u"||typeof s.anyOf<"u"}for(const s of Wv){const e=s.schema;if(typeof e<"u")if(cbe(e))mI.properties[`editor.${s.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(mI.properties[t]=e[t])}let KT=null;function tX(){return KT===null&&(KT=Object.create(null),Object.keys(mI.properties).forEach(s=>{KT[s]=!0})),KT}function ube(s){return tX()[`editor.${s}`]||!1}function hbe(s){return tX()[`diffEditor.${s}`]||!1}const dbe=or.as(P0.Configuration);dbe.registerConfiguration(mI);class fbe{static insert(e,t){return{range:new ie(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function YT(s){return Object.isFrozen(s)?s:Hee(s)}class sr{static createEmptyModel(e){return new sr({},[],[],void 0,e)}constructor(e,t,i,n,r){this._contents=e,this._keys=t,this._overrides=i,this.raw=n,this.logService=r,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw){const e=(Array.isArray(this.raw)?this.raw:[this.raw]).map(t=>{if(t instanceof sr)return t;const i=new gbe("",this.logService);return i.parseRaw(t),i.configurationModel});this._rawConfiguration=e.reduce((t,i)=>i===t?i:t.merge(i),e[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?yH(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return YT(i.rawConfiguration.getValue(e))},get override(){return t?YT(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return YT(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const n=[];for(const{contents:r,identifiers:o,keys:a}of i.rawConfiguration.overrides){const l=new sr(r,a,[],void 0,i.logService).getValue(e);l!==void 0&&n.push({identifiers:o,value:l})}return n.length?YT(n):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?yH(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Gf(this.contents),i=Gf(this.overrides),n=[...this.keys],r=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of e)if(r.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.mergeContents(t,o.contents);for(const a of o.overrides){const[l]=i.filter(c=>vs(c.identifiers,a.identifiers));l?(this.mergeContents(l.contents,a.contents),l.keys.push(...a.keys),l.keys=a0(l.keys)):i.push(Gf(a))}for(const a of o.keys)n.indexOf(a)===-1&&n.push(a)}return new sr(t,n,i,!r.length||r.every(o=>o instanceof sr)?void 0:r,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const n of a0([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[n];const o=t[n];o&&(typeof r=="object"&&typeof o=="object"?(r=Gf(r),this.mergeContents(r,o)):r=o),i[n]=r}return new sr(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Xo(e[i])&&Xo(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Gf(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const n=r=>{r&&(i?this.mergeContents(i,r):i=Gf(r))};for(const r of this.overrides)r.identifiers.length===1&&r.identifiers[0]===e?t=r.contents:r.identifiers.includes(e)&&n(r.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),Wre(this.contents,e),ap.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>vs(i.identifiers,_N(e))),1))}updateValue(e,t,i){if(GG(this.contents,e,t,n=>this.logService.error(n)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),ap.test(e)){const n=_N(e),r={identifiers:n,keys:Object.keys(this.contents[e]),contents:H3(this.contents[e],a=>this.logService.error(a))},o=this.overrides.findIndex(a=>vs(a.identifiers,n));o!==-1?this.overrides[o]=r:this.overrides.push(r)}}}class gbe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||sr.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:n,overrides:r,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new sr(i,n,r,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const i=or.as(P0.Configuration),n=i.getConfigurationProperties(),r=i.getExcludedConfigurationProperties(),o=this.filter(e,n,r,!0,t);e=o.raw;const a=H3(e,h=>this.logService.error(`Conflict in settings file ${this._name}: ${h}`)),l=Object.keys(e),c=this.toOverrides(e,h=>this.logService.error(`Conflict in settings file ${this._name}: ${h}`));return{contents:a,keys:l,overrides:c,restricted:o.restricted,hasExcludedProperties:o.hasExcludedProperties}}filter(e,t,i,n,r){let o=!1;if(!r?.scopes&&!r?.skipRestricted&&!r?.skipUnregistered&&!r?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:o};const a={},l=[];for(const c in e)if(ap.test(c)&&n){const h=this.filter(e[c],t,i,!1,r);a[c]=h.raw,o=o||h.hasExcludedProperties,l.push(...h.restricted)}else{const h=t[c];h?.restricted&&l.push(c),this.shouldInclude(c,h,i,r)?a[c]=e[c]:o=!0}return{raw:a,restricted:l,hasExcludedProperties:o}}shouldInclude(e,t,i,n){if(n.exclude?.includes(e))return!1;if(n.include?.includes(e))return!0;if(n.skipRestricted&&t?.restricted||n.skipUnregistered&&!t)return!1;const r=t??i[e],o=r?typeof r.scope<"u"?r.scope:4:void 0;return o===void 0||n.scopes===void 0?!0:n.scopes.includes(o)}toOverrides(e,t){const i=[];for(const n of Object.keys(e))if(ap.test(n)){const r={};for(const o in e[n])r[o]=e[n][o];i.push({identifiers:_N(n),keys:Object.keys(r),contents:H3(r,t)})}return i}}class mbe{constructor(e,t,i,n,r,o,a,l,c,h,d,g,_){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=r,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=h,this.workspaceConfiguration=d,this.folderConfigurationModel=g,this.memoryConfigurationModel=_}toInspectValue(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class OR{constructor(e,t,i,n,r,o,a,l,c,h){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=r,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=h,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Br,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=sr.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,t===void 0?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidatedConfigurationModel(e,t,i),r=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of n.overrides)for(const c of l.identifiers)n.getOverrideValue(e,c)!==void 0&&a.add(c);return new mbe(e,t,n.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,r||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){if(!this._userConfiguration)if(this._remoteUserConfiguration.isEmpty())this._userConfiguration=this._localUserConfiguration;else{const e=this._localUserConfiguration.merge(this._remoteUserConfiguration);this._userConfiguration=new sr(e.contents,e.keys,e.overrides,void 0,this.logService)}return this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);if(t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0){n=n.merge();for(const r of this._policyConfiguration.keys)n.setValue(r,this._policyConfiguration.getValue(r))}return n}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const r=this._memoryConfigurationByResource.get(e);r&&(i=i.merge(r))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:n,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:r}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),n=this.parseConfigurationModel(e.policy,t),r=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.userLocal,t),a=this.parseConfigurationModel(e.userRemote,t),l=this.parseConfigurationModel(e.workspace,t),c=e.folders.reduce((h,d)=>(h.set(Ot.revive(d[0]),this.parseConfigurationModel(d[1],t)),h),new Br);return new OR(i,n,r,o,a,l,c,sr.createEmptyModel(t),new Br,t)}static parseConfigurationModel(e,t){return new sr(e.contents,e.keys,e.overrides,e.raw,t)}}class pbe{constructor(e,t,i,n,r){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this.logService=r,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=OR.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){const i=this._marker+e,n=this._affectsConfigStr.indexOf(i);if(n<0)return!1;const r=n+i.length;if(r>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(r);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const a=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.previous?.workspace):void 0,l=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Oa(a,l)}return!0}}const pI={kind:0},_be={kind:1};function bbe(s,e,t){return{kind:2,commandId:s,commandArgs:e,isBubble:t}}class RL{constructor(e,t,i){this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const n of e){const r=n.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=RL.handleRemovals([].concat(e).concat(t));for(let n=0,r=this._keybindings.length;n<r;n++){const o=this._keybindings[n];if(o.chords.length===0)continue;const a=o.when?.substituteConstants();a&&a.type===0||this._addKeyPress(o.chords[0],o)}}static _isTargetedForRemoval(e,t,i){if(t){for(let n=0;n<t.length;n++)if(t[n]!==e.chords[n])return!1}return!(i&&i.type!==1&&(!e.when||!Vse(i,e.when)))}static handleRemovals(e){const t=new Map;for(let n=0,r=e.length;n<r;n++){const o=e[n];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const i=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];if(!o.command||o.command.length===0){i.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){i.push(o);continue}let l=!1;for(const c of a){const h=c.when;if(this._isTargetedForRemoval(o,c.chords,h)){l=!0;break}}if(!l){i.push(o);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let n=i.length-1;n>=0;n--){const r=i[n];if(r.command===t.command)continue;let o=!0;for(let a=1;a<r.chords.length&&a<t.chords.length;a++)if(r.chords[a]!==t.chords[a]){o=!1;break}o&&RL.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,n=t.length;i<n;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:O3(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t,i=!1){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1&&!i)return n[0];for(let r=n.length-1;r>=0;r--){const o=n[r];if(t.contextMatchesRules(o.when))return o}return i?null:n[n.length-1]}resolve(e,t,i){const n=[...t,i];this._log(`| Resolving ${n}`);const r=this._map.get(n[0]);if(r===void 0)return this._log("\\ No keybinding entries."),pI;let o=null;if(n.length<2)o=r;else{o=[];for(let l=0,c=r.length;l<c;l++){const h=r[l];if(n.length>h.chords.length)continue;let d=!0;for(let g=1;g<n.length;g++)if(h.chords[g]!==n[g]){d=!1;break}d&&o.push(h)}}const a=this._findCommand(e,o);return a?n.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-n.length} more chord(s), when: ${RU(a.when)}, source: ${MU(a)}.`),_be):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${RU(a.when)}, source: ${MU(a)}.`),bbe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),pI)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const n=t[i];if(RL._contextMatchesRules(e,n.when))return n}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function RU(s){return s?`${s.serialize()}`:"no when condition"}function MU(s){return s.extensionId?s.isBuiltinExtension?`built-in extension ${s.extensionId}`:`user extension ${s.extensionId}`:s.isDefault?"built-in":"user"}const vbe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class wbe extends pe{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Ie.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,n,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=n,this._logService=r,this._onDidUpdateKeybindings=this._register(new ne),this._currentChords=[],this._currentChordChecker=new cP,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=nw.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new vg,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t,i=!1){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService,i);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),pI;const[n]=i.getDispatchChords();if(n===null)return this._log("\\ Keyboard event cannot be dispatched"),pI;const r=this._contextKeyService.getContext(t),o=this._currentChords.map((({keypress:a})=>a));return this._getResolver().resolve(r,o,n)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw nN("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(y(1684,"({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:n})=>n).join(", ");this._currentChordStatusMessage=this._notificationService.status(y(1685,"({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),Ld.enabled&&Ld.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.close(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Ld.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[n]=i.getSingleModifierDispatchChords();if(n)return this._ignoreSingleModifiers.has(n)?(this._log(`+ Ignoring single modifier ${n} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=nw.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=nw.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${n}.`),this._currentSingleModifier=n,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):n===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${n} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${n}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=i.getChords();return this._ignoreSingleModifiers=new nw(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let n=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,o=null;if(i){const[h]=e.getSingleModifierDispatchChords();r=h,o=h?[h]:[]}else[r]=e.getDispatchChords(),o=this._currentChords.map(({keypress:h})=>h);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),n;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const h=this._currentChords.map(({label:d})=>d).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${h}, ${l}".`),this._notificationService.status(y(1686,"The key combination ({0}, {1}) is not a command.",h,l),{hideAfter:10*1e3}),this._leaveChordMode(),n=!0}return n}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),n=!0,this._expectAnotherChord(r,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),n;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const h=this._currentChords.map(({label:d})=>d).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${h}, ${l}".`),this._notificationService.status(y(1687,"The key combination ({0}, {1}) is not a command.",h,l),{hideAfter:10*1e3}),this._leaveChordMode(),n=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(n=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,h=>this._notificationService.warn(h))}finally{this._currentlyDispatchingCommandId=null}vbe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return n}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const EA=class EA{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};EA.EMPTY=new EA(null);let nw=EA;class OU{constructor(e,t,i,n,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?I9(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=I9(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=n,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function I9(s){const e=[];for(let t=0,i=s.length;t<i;t++){const n=s[t];if(!n)return[];e.push(n)}return e}class PR{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=i(a);if(l===null)return null;n[r]=Lbe(a,l,this.modifierLabels[e])}return n.join(" ")}}const HB=new PR({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:y(35,"Ctrl"),shiftKey:y(36,"Shift"),altKey:y(37,"Alt"),metaKey:y(38,"Windows"),separator:"+"},{ctrlKey:y(39,"Ctrl"),shiftKey:y(40,"Shift"),altKey:y(41,"Alt"),metaKey:y(42,"Super"),separator:"+"}),Cbe=new PR({ctrlKey:y(43,"Control"),shiftKey:y(44,"Shift"),altKey:y(45,"Option"),metaKey:y(46,"Command"),separator:"+"},{ctrlKey:y(47,"Control"),shiftKey:y(48,"Shift"),altKey:y(49,"Alt"),metaKey:y(50,"Windows"),separator:"+"},{ctrlKey:y(51,"Control"),shiftKey:y(52,"Shift"),altKey:y(53,"Alt"),metaKey:y(54,"Super"),separator:"+"}),ybe=new PR({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),Sbe=new PR({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function Lbe(s,e,t){if(e===null)return"";const i=[];return s.ctrlKey&&i.push(t.ctrlKey),s.shiftKey&&i.push(t.shiftKey),s.altKey&&i.push(t.altKey),s.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class xbe extends Yie{constructor(e,t){if(super(),t.length===0)throw $A("chords");this._os=e,this._chords=t}getLabel(){return HB.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return Cbe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:ybe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return Sbe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new Kie(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class Qx extends xbe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Xf.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Xf.toString(e.keyCode)}_getElectronAccelerator(e){return Xf.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Xf.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return Qx.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Xf.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=J6[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof h0)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new h0(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=I9(e.chords.map(n=>this._toKeyCodeChord(n)));return i.length>0?[new Qx(i,t)]:[]}}const kbe=At("labelService"),Ebe=At("progressService"),WB=At("editorProgressService");class Tbe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class Dbe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?tP(e,this._value,0,e.length,this._from,this._to):C2(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Nbe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?tP(e,this._value,0,e.length,this._from,this._to):C2(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Ibe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Nbe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return OV(e,this._value.scheme);if(this._states[this._stateIdx]===2)return OV(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return f3(e,this._value.query);if(this._states[this._stateIdx]===5)return f3(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}const QL=class QL{static wrap(e){return e===void 0?QL.Val:e}static unwrap(e){return e===QL.Val?void 0:e}};QL.Val=Symbol("undefined_placeholder");let Hf=QL;class ZT{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class ML{static forUris(e=()=>!1,t=()=>!1){return new ML(new Ibe(e,t))}static forStrings(){return new ML(new Tbe)}static forConfigKeys(){return new ML(new Dbe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let n;this._root||(this._root=new ZT,this._root.segment=i.value());const r=[];for(n=this._root;;){const a=i.cmp(n.segment);if(a>0)n.left||(n.left=new ZT,n.left.segment=i.value()),r.push([-1,n]),n=n.left;else if(a<0)n.right||(n.right=new ZT,n.right.segment=i.value()),r.push([1,n]),n=n.right;else if(i.hasNext())i.next(),n.mid||(n.mid=new ZT,n.mid.segment=i.value()),r.push([0,n]),n=n.mid;else break}const o=Hf.unwrap(n.value);n.value=Hf.wrap(t),n.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const h=r[a][0],d=r[a+1][0];if(h===1&&d===1)r[a][1]=l.rotateLeft();else if(h===-1&&d===-1)r[a][1]=l.rotateRight();else if(h===1&&d===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(h===-1&&d===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){return Hf.unwrap(this._getNode(e)?.value)}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),n=[];let r=this._root;for(;r;){const o=i.cmp(r.segment);if(o>0)n.push([-1,r]),r=r.left;else if(o<0)n.push([1,r]),r=r.right;else if(i.hasNext())i.next(),n.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const o=[[1,r]],a=this._min(r.right,o);if(a.key){r.key=a.key,r.value=a.value,r.segment=a.segment;const l=a.right;if(o.length>1){const[h,d]=o[o.length-1];switch(h){case-1:d.left=l;break;case 0:sN(!1);case 1:sN(!1)}}else r.right=l;const c=this._balanceByStack(o);if(n.length>0){const[h,d]=n[n.length-1];switch(h){case-1:d.left=c;break;case 0:d.mid=c;break;case 1:d.right=c;break}}else this._root=c}}else{const o=r.left??r.right;if(n.length>0){const[a,l]=n[n.length-1];switch(a){case-1:l.left=o;break;case 0:l.mid=o;break;case 1:l.right=o;break}}else this._root=o}this._root=this._balanceByStack(n)??this._root}}_min(e,t){for(;e.left;)t.push([-1,e]),e=e.left;return e}_balanceByStack(e){for(let t=e.length-1;t>=0;t--){const i=e[t][1];i.updateHeight();const n=i.balanceFactor();if(n>1?(i.right.balanceFactor()>=0||(i.right=i.right.rotateRight()),e[t][1]=i.rotateLeft()):n<-1&&(i.left.balanceFactor()<=0||(i.left=i.left.rotateLeft()),e[t][1]=i.rotateRight()),t>0)switch(e[t-1][0]){case-1:e[t-1][1].left=e[t][1];break;case 1:e[t-1][1].right=e[t][1];break;case 0:e[t-1][1].mid=e[t][1];break}else return e[0][1]}}findSubstr(e){const t=this._iter.reset(e);let i=this._root,n;for(;i;){const r=t.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else if(t.hasNext())t.next(),n=Hf.unwrap(i.value)||n,i=i.mid;else break}return i&&Hf.unwrap(i.value)||n}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let n=this._root;for(;n;){const r=i.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(i.hasNext())i.next(),n=n.mid;else return n.mid?this._entries(n.mid):t?Hf.unwrap(n.value):void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value!==void 0&&t.push([e.key,Hf.unwrap(e.value)]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const Abe=At("contextService");class Rbe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const Mbe="code-workspace";y(2032,"Code Workspace");const Obe="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var PU;(function(s){s.inspectTokensAction=y(782,"Developer: Inspect Tokens")})(PU||(PU={}));var BU;(function(s){s.gotoLineActionLabel=y(783,"Go to Line/Column...")})(BU||(BU={}));var FU;(function(s){s.helpQuickAccessActionLabel=y(784,"Show all Quick Access Providers")})(FU||(FU={}));var VU;(function(s){s.quickCommandActionLabel=y(785,"Command Palette"),s.quickCommandHelp=y(786,"Show And Run Commands")})(VU||(VU={}));var HU;(function(s){s.quickOutlineActionLabel=y(787,"Go to Symbol..."),s.quickOutlineByCategoryActionLabel=y(788,"Go to Symbol by Category...")})(HU||(HU={}));var A9;(function(s){s.editorViewAccessibleLabel=y(789,"Editor content")})(A9||(A9={}));var WU;(function(s){s.toggleHighContrast=y(790,"Toggle High Contrast Theme")})(WU||(WU={}));var R9;(function(s){s.bulkEditServiceSummary=y(791,"Made {0} edits in {1} files")})(R9||(R9={}));const Pbe=At("workspaceTrustManagementService");let pC=[],zB=[],iX=[];function XT(s,e=!1){Bbe(s,!1,e)}function Bbe(s,e,t){const i=Fbe(s,e);pC.push(i),i.userConfigured?iX.push(i):zB.push(i),t&&!i.userConfigured&&pC.forEach(n=>{n.mime===i.mime||n.userConfigured||(i.extension&&n.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&n.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&n.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&n.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function Fbe(s,e){return{id:s.id,mime:s.mime,filename:s.filename,extension:s.extension,filepattern:s.filepattern,firstline:s.firstline,userConfigured:e,filenameLowercase:s.filename?s.filename.toLowerCase():void 0,extensionLowercase:s.extension?s.extension.toLowerCase():void 0,filepatternLowercase:s.filepattern?dZ(s.filepattern.toLowerCase()):void 0,filepatternOnPath:s.filepattern?s.filepattern.indexOf(ts.sep)>=0:!1}}function Vbe(){pC=pC.filter(s=>s.userConfigured),zB=[]}function Hbe(s,e){return Wbe(s,e).map(t=>t.id)}function Wbe(s,e){let t;if(s)switch(s.scheme){case mt.file:t=s.fsPath;break;case mt.data:{t=mN.parseMetaData(s).get(mN.META_DATA_LABEL);break}case mt.vscodeNotebookCell:t=void 0;break;default:t=s.path}if(!t)return[{id:"unknown",mime:eg.unknown}];t=t.toLowerCase();const i=Kj(t),n=zU(t,i,iX);if(n)return[n,{id:ru,mime:eg.text}];const r=zU(t,i,zB);if(r)return[r,{id:ru,mime:eg.text}];if(e){const o=zbe(e);if(o)return[o,{id:ru,mime:eg.text}]}return[{id:"unknown",mime:eg.unknown}]}function zU(s,e,t){let i,n,r;for(let o=t.length-1;o>=0;o--){const a=t[o];if(e===a.filenameLowercase){i=a;break}if(a.filepattern&&(!n||a.filepattern.length>n.filepattern.length)){const l=a.filepatternOnPath?s:e;a.filepatternLowercase?.(l)&&(n=a)}a.extension&&(!r||a.extension.length>r.extension.length)&&e.endsWith(a.extensionLowercase)&&(r=a)}if(i)return i;if(n)return n;if(r)return r}function zbe(s){if(lP(s)&&(s=s.substr(1)),s.length>0)for(let e=pC.length-1;e>=0;e--){const t=pC[e];if(!t.firstline)continue;const i=s.match(t.firstline);if(i&&i.length>0)return t}}const QT=Object.prototype.hasOwnProperty,UU="vs.editor.nullLanguage";class Ube{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(UU,0),this._register(ru,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||UU}}const JL=class JL extends pe{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event,JL.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new Ube,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(sC.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){JL.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Vbe();const e=[].concat(sC.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(n=>{this._lowercaseNameMap[n.toLowerCase()]=i.identifier}),i.mimetypes.forEach(n=>{this._mimeTypesMap[n]=i.identifier})}),or.as(P0.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;QT.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let n=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),n=t.mimetypes[0]),n||(n=`text/x-${i}`,e.mimetypes.push(n)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)XT({id:i,mime:n,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)XT({id:i,mime:n,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)XT({id:i,mime:n,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);iG(l)||XT({id:i,mime:n,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);const o=r!==null&&r.length>0;if(!(o&&r[0]===null)){const a=(o?r[0]:null)||i;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?QT.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return QT.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&QT.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:Hbe(e,t)}};JL.instanceCount=0;let M9=JL;const ex=class ex extends pe{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new ne),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new ne),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new ne({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,ex.instanceCount++,this._registry=this._register(new M9(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){ex.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){return this._registry.guessLanguageIdByFilepathOrFirstLine(e,t).at(0)??null}createById(e){return new qU(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new qU(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=ru),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),es.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};ex.instanceCount=0;let O9=ex;class qU{constructor(e,t){this._value=mn(this,e,()=>t()),this.onDidChange=Ie.fromObservable(this._value)}get languageId(){return this._value.get()}}function pg(s,e){if(s!==void 0){const t=s.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=pg(i[1].trim(),e)),`var(${i[0]}, ${e})`}return s}return e}function $U(s){const e=s.replaceAll(/[^_\-a-z0-9]/gi,"");return e!==s&&console.warn(`CSS ident value ${s} modified to ${e} to be safe for CSS`),e}function ym(s){return`'${s.replaceAll(/'/g,"\\000027")}'`}function Od(s){return s?Da`url('${CSS.escape(dG.uriToBrowserUri(s).toString(!0))}')`:"url('')"}function JT(s,e=!1){const t=CSS.escape(s);return!e&&t!==s&&console.warn(`CSS class name ${s} modified to ${t} to be safe for CSS`),t}function Da(s,...e){return s.reduce((t,i,n)=>{const r=e[n]||"";return t+i+r},"")}class w5{constructor(){this._parts=[]}push(...e){this._parts.push(...e)}join(e=`
`){return this._parts.join(e)}}const nX={TEXT:eg.text},qbe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let BR=qbe;const $be=new po(()=>BR("mouse",!1)),jbe=new po(()=>BR("element",!1));function Gbe(s){BR=s}function uu(s){return s==="element"?jbe.value:$be.value}function UB(){return BR("element",!0)}let sX={showInstantHover:()=>{},showDelayedHover:()=>{},setupDelayedHover:()=>pe.None,setupDelayedHoverAtMouse:()=>pe.None,hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>({dispose:()=>{},show:()=>{},hide:()=>{},update:()=>{}}),showManagedHover:()=>{}};function Kbe(s){sX=s}function fh(){return sX}class Ybe{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(n=>n.splice(e,t,i))}}class B_ extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function jU(s,e){const t=[];for(const i of e){if(s.start>=i.range.end)continue;if(s.end<i.range.start)break;const n=Ir.intersect(s,i.range);Ir.isEmpty(n)||t.push({range:n,size:i.size})}return t}function P9({start:s,end:e},t){return{start:s+t,end:e+t}}function Zbe(s){const e=[];let t=null;for(const i of s){const n=i.range.start,r=i.range.end,o=i.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:n,end:r},size:o},e.push(t)}return e}function Xbe(...s){return Zbe(s.reduce((e,t)=>e.concat(t),[]))}class Qbe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const n=i.length-t,r=jU({start:0,end:e},this.groups),o=jU({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:P9(l.range,n),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=Xbe(r,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const n of this.groups){const r=n.range.end-n.range.start,o=i+r*n.size;if(e<o)return t+Math.floor((e-i)/n.size);t+=r,i=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const n of this.groups){const r=n.range.end-n.range.start,o=i+r;if(e<o)return this._paddingTop+t+(e-i)*n.size;t+=r*n.size,i=o}return-1}}class Jbe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const n=ot(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}function eve(s,e,t,i=[]){if(!s.dataTransfer)return;const n=ot(".monaco-drag-image");n.textContent=t,n.classList.add(...i),(a=>{for(;a&&!a.classList.contains("monaco-workbench");)a=a.parentElement;return a||e.ownerDocument.body})(e).appendChild(n),s.dataTransfer.setDragImage(n,-10,-10),setTimeout(()=>n.remove(),0)}var Eg=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};const F_={CurrentDragAndDropData:void 0},ed={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(s){return[s]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class j2{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class tve{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class ive{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function nve(s,e){return Array.isArray(s)&&Array.isArray(e)?vs(s,e):s===e}class sve{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,n)=>n,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const TA=class TA{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:xM(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,n=ed){if(this.virtualDelegate=t,this.domId=`list_id_${++TA.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new L2(50),this.splicing=!1,this.dragOverAnimationStopDisposable=pe.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=pe.None,this.onDragLeaveTimeout=pe.None,this.currentSelectionDisposable=pe.None,this.disposables=new Ze,this._onDidChangeContentHeight=new ne,this._onDidChangeContentWidth=new ne,this.onDidChangeContentHeight=Ie.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(n.paddingTop??0);for(const o of i)this.renderers.set(o.templateId,o);if(this.cache=this.disposables.add(new Jbe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof n.mouseSupport=="boolean"?n.mouseSupport:!0),this._horizontalScrolling=n.horizontalScrolling??ed.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof n.paddingBottom>"u"?0:n.paddingBottom,this.accessibilityProvider=new sve(n.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(n.transformOptimization??ed.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Co.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new DC({forceIntegerValues:!0,smoothScrollDuration:n.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:o=>na(nt(this.domNode),o)})),this.scrollableElement=this.disposables.add(new TR(this.rowsContainer,{alwaysConsumeMouseWheel:n.alwaysConsumeMouseWheel??ed.alwaysConsumeMouseWheel,horizontal:1,vertical:n.verticalScrollMode??ed.verticalScrollMode,useShadows:n.useShadows??ed.useShadows,mouseWheelScrollSensitivity:n.mouseWheelScrollSensitivity,fastScrollSensitivity:n.fastScrollSensitivity,scrollByPage:n.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ue(this.rowsContainer,ji.Change,o=>this.onTouchChange(o))),this.disposables.add(ue(this.scrollableElement.getDomNode(),"scroll",o=>{const a=o.target,l=a.scrollTop;a.scrollTop=0,n.scrollToActiveElement&&this.setScrollTop(this.scrollTop+l)})),this.disposables.add(ue(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(ue(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(ue(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(ue(this.domNode,"dragend",o=>this.onDragEnd(o))),n.userSelection){if(n.dnd)throw new Error("DND and user selection cannot be used simultaneously");this.disposables.add(ue(this.domNode,"mousedown",o=>this.onPotentialSelectionStart(o)))}this.setRowLineHeight=n.setRowLineHeight??ed.setRowLineHeight,this.setRowHeight=n.setRowHeight??ed.setRowHeight,this.supportDynamicHeights=n.supportDynamicHeights??ed.supportDynamicHeights,this.dnd=n.dnd??this.disposables.add(ed.dnd),this.layout(n.initialSize?.height,n.initialSize?.width),n.scrollToActiveElement&&this._setupFocusObserver(e)}_setupFocusObserver(e){this.disposables.add(ue(e,"focus",()=>{const t=Us();this.activeElement!==t&&t!==null&&(this.activeElement=t,this._scrollToActiveElement(this.activeElement,e))},!0))}_scrollToActiveElement(e,t){const i=t.getBoundingClientRect(),r=e.getBoundingClientRect().top-i.top;r<0&&this.setScrollTop(this.scrollTop+r)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),n=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+n),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new Qbe(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=Ir.intersect(n,r),a=new Map;for(let A=o.end-1;A>=o.start;A--){const P=this.items[A];if(P.dragStartDisposable.dispose(),P.checkedDisposable.dispose(),P.row){let O=a.get(P.templateId);O||(O=[],a.set(P.templateId,O));const V=this.renderers.get(P.templateId);V&&V.disposeElement&&V.disposeElement(P.element,A,P.row.templateData,{height:P.size}),O.unshift(P.row)}P.row=null,P.stale=!0}const l={start:e+t,end:this.items.length},c=Ir.intersect(l,n),h=Ir.relativeComplement(l,n),d=i.map(A=>({id:String(this.itemId++),element:A,templateId:this.virtualDelegate.getTemplateId(A),size:this.virtualDelegate.getHeight(A),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(A),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:pe.None,checkedDisposable:pe.None,stale:!1}));let g;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,d),g=this.items,this.items=d):(this.rangeMap.splice(e,t,d),g=eN(this.items,e,t,d));const _=i.length-t,b=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),C=P9(c,_),S=Ir.intersect(b,C);for(let A=S.start;A<S.end;A++)this.updateItemInDOM(this.items[A],A);const E=Ir.relativeComplement(C,b);for(const A of E)for(let P=A.start;P<A.end;P++)this.removeItemFromDOM(P);const x=h.map(A=>P9(A,_)),N=[{start:e,end:e+i.length},...x].map(A=>Ir.intersect(b,A)).reverse();for(const A of N)for(let P=A.end-1;P>=A.start;P--){const O=this.items[P],U=a.get(O.templateId)?.pop();this.insertItemInDOM(P,U)}for(const A of a.values())for(const P of A)this.cache.release(P);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),g.map(A=>A.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=na(nt(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getVisibleRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:nse(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:xM(this.domNode)})}render(e,t,i,n,r,o=!1,a=!1){const l=this.getRenderRange(t,i),c=Ir.relativeComplement(l,e).reverse(),h=Ir.relativeComplement(e,l);if(o){const d=Ir.intersect(e,l);for(let g=d.start;g<d.end;g++)this.updateItemInDOM(this.items[g],g)}this.cache.transact(()=>{for(const d of h)for(let g=d.start;g<d.end;g++)this.removeItemFromDOM(g,a);for(const d of c)for(let g=d.end-1;g>=d.start;g--)this.insertItemInDOM(g)}),n!==void 0&&(this.rowsContainer.style.left=`-${n}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const l=this.cache.alloc(i.templateId);i.row=l.row,i.stale||=l.isReusingConnectedDomNode}const n=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",n);const r=this.accessibilityProvider.isChecked(i.element);if(typeof r=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const l=c=>i.row.domNode.setAttribute("aria-checked",String(!!c));l(r.value),i.checkedDisposable=r.onDidChange(()=>l(r.value))}if(i.stale||!i.row.domNode.parentElement){const l=this.items.at(e+1)?.row?.domNode??null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(i.row.domNode,l),i.stale=!1}this.updateItemInDOM(i,e);const o=this.renderers.get(i.templateId);if(!o)throw new Error(`No renderer found for template id ${i.templateId}`);o?.renderElement(i.element,e,i.row.templateData,{height:i.size});const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=ue(i.row.domNode,"dragstart",l=>this.onDragStart(i.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=xM(e.row.domNode);const t=nt(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e,t){const i=this.items[e];if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){const n=this.renderers.get(i.templateId);n&&n.disposeElement&&n.disposeElement(i.element,e,i.row.templateData,{height:i.size,onScroll:t}),this.cache.release(i.row),i.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Ie.map(this.disposables.add(new gi(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Ie.map(this.disposables.add(new gi(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Ie.filter(Ie.map(this.disposables.add(new gi(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Ie.map(this.disposables.add(new gi(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Ie.map(this.disposables.add(new gi(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Ie.map(this.disposables.add(new gi(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Ie.any(Ie.map(this.disposables.add(new gi(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Ie.map(this.disposables.add(new gi(this.domNode,ji.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Ie.map(this.disposables.add(new gi(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Ie.map(this.disposables.add(new gi(this.rowsContainer,ji.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element;return{browserEvent:e,index:t,element:n}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],n=i&&i.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:n,sector:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth,void 0,!0),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){if(!i.dataTransfer)return;const n=this.dnd.getDragElements(e);i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(nX.TEXT,t);let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(n,i)),typeof r>"u"&&(r=String(n.length)),eve(i,this.domNode,r,[this.domId]),this.domNode.classList.add("dragging"),this.currentDragData=new j2(n),F_.CurrentDragAndDropData=new tve(n),this.dnd.onDragStart?.(this.currentDragData,i)}onPotentialSelectionStart(e){this.currentSelectionDisposable.dispose();const t=Gne(this.domNode),i=this.currentSelectionDisposable=new Ze,n=i.add(new Ze);n.add(ue(this.domNode,"selectstart",()=>{n.add(ue(t,"mousemove",r=>{t.getSelection()?.isCollapsed===!1&&this.setupDragAndDropScrollTopAnimation(r)})),i.add(lt(()=>{const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.currentSelectionBounds=void 0,this.render(r,this.lastRenderTop,this.lastRenderHeight,void 0,void 0)})),i.add(ue(t,"selectionchange",()=>{const r=t.getSelection();if(!r||r.isCollapsed){n.isDisposed&&i.dispose();return}let o=this.getIndexOfListElement(r.anchorNode),a=this.getIndexOfListElement(r.focusNode);o!==void 0&&a!==void 0&&(a<o&&([o,a]=[a,o]),this.currentSelectionBounds={start:o,end:a})}))})),n.add(ue(t,"mouseup",()=>{n.dispose(),this.teardownDragAndDropScrollTopAnimation(),t.getSelection()?.isCollapsed!==!1&&i.dispose()}))}getIndexOfListElement(e){if(!(!e||!this.domNode.contains(e)))for(;e&&e!==this.domNode;){if(e.dataset?.index)return Number(e.dataset.index);e=e.parentElement}}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),F_.CurrentDragAndDropData&&F_.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(F_.CurrentDragAndDropData)this.currentDragData=F_.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new ive}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===0?"copy":"move";let i;typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=a0(i).filter(r=>r>=-1&&r<this.length).sort((r,o)=>r-o),i=i[0]===-1?[-1]:i;let n=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(nve(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===n)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=n,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add(n),this.rowsContainer.classList.add(n),this.currentDragFeedbackDisposable=lt(()=>{this.domNode.classList.remove(n),this.rowsContainer.classList.remove(n)});else{if(i.length>1&&n!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");n==="drop-target-after"&&i[0]<this.length-1&&(i[0]+=1,n="drop-target-before");for(const r of i){const o=this.items[r];o.dropTarget=!0,o.row?.domNode.classList.add(n)}this.currentDragFeedbackDisposable=lt(()=>{for(const r of i){const o=this.items[r];o.dropTarget=!1,o.row?.domNode.classList.remove(n)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=v3(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,F_.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,F_.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=pe.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=ise(this.domNode).top;this.dragOverAnimationDisposable=dse(nt(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=v3(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,n=Math.floor(i/.25);return Yo(n,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;(qn(i)||LG(i))&&i!==this.rowsContainer&&t.contains(i);){const n=i.getAttribute("data-index");if(n){const r=Number(n);if(!isNaN(r))return r}i=i.parentElement}}getVisibleRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}getRenderRange(e,t){const i=this.getVisibleRange(e,t);if(this.currentSelectionBounds){const n=this.rangeMap.count;i.start=Math.min(i.start,this.currentSelectionBounds.start,n),i.end=Math.min(Math.max(i.end,this.currentSelectionBounds.end+1),n)}return i}_rerender(e,t,i){const n=this.getRenderRange(e,t);let r,o;e===this.elementTop(n.start)?(r=n.start,o=0):n.end-n.start>1&&(r=n.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let h=l.start;h<l.end;h++){const d=this.probeDynamicHeight(h);d!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=d,c=c||d!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const h=Ir.relativeComplement(n,l);for(const g of h)for(let _=g.start;_<g.end;_++)this.items[_].row&&this.removeItemFromDOM(_);const d=Ir.relativeComplement(l,n).reverse();for(const g of d)for(let _=g.end-1;_>=g.start;_--)this.insertItemInDOM(_);for(let g=l.start;g<l.end;g++)this.items[g].row&&this.updateItemInDOM(this.items[g],g);if(typeof r=="number"){const g=this.scrollable.getFutureScrollPosition().scrollTop-e,_=this.elementTop(r)-o+g;this.setScrollTop(_,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!zs(t.row.domNode,nt(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:n}=this.cache.alloc(t.templateId);n.domNode.style.height="",this.rowsContainer.appendChild(n.domNode);const r=this.renderers.get(t.templateId);if(!r)throw new at("Missing renderer for templateId: "+t.templateId);return r.renderElement(t.element,e,n.templateData),t.size=n.domNode.offsetHeight,r.disposeElement?.(t.element,e,n.templateData),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,n.domNode.remove(),this.cache.release(n),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(const e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};TA.InstanceCount=0;let lu=TA;Eg([En],lu.prototype,"onMouseClick",null);Eg([En],lu.prototype,"onMouseDblClick",null);Eg([En],lu.prototype,"onMouseMiddleClick",null);Eg([En],lu.prototype,"onMouseDown",null);Eg([En],lu.prototype,"onMouseOver",null);Eg([En],lu.prototype,"onMouseOut",null);Eg([En],lu.prototype,"onContextMenu",null);Eg([En],lu.prototype,"onTouchStart",null);Eg([En],lu.prototype,"onTap",null);var Cp=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class rve{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const n=this.renderedElements.findIndex(r=>r.templateData===i);if(n>=0){const r=this.renderedElements[n];this.trait.unrender(i),r.index=t}else{const r={index:t,templateData:i};this.renderedElements.push(r)}this.trait.renderIndex(t,i)}splice(e,t,i){const n=[];for(const r of this.renderedElements)r.index<e?n.push(r):r.index>=e+t&&n.push({index:r.index+i-t,templateData:r.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let _I=class{get onChange(){return this._onChange.event}get name(){return this._trait}get renderer(){return new rve(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new ne}splice(e,t,i){const n=i.length-t,r=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)o.push(this.sortedIndexes[a++]+n);this.renderer.splice(e,t,i.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(KU),t)}_set(e,t,i){const n=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=B9(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:i}),n}get(){return this.indexes}contains(e){return Eee(this.sortedIndexes,e,KU)>=0}dispose(){Cs(this._onChange)}};Cp([En],_I.prototype,"renderer",null);class ove extends _I{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class C5{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const n=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(n.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const r=new Set(n),o=i.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function G2(s,e){return s.classList.contains(e)?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:G2(s.parentElement,e)}function YS(s){return G2(s,"monaco-editor")}function ave(s){return G2(s,"monaco-custom-toggle")}function lve(s){return G2(s,"action-item")}function OL(s){return G2(s,"monaco-tree-sticky-row")}function Jx(s){return s.classList.contains("monaco-tree-sticky-container")}function rX(s){return s.tagName==="A"&&s.classList.contains("monaco-button")||s.tagName==="DIV"&&s.classList.contains("monaco-button-dropdown")?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:rX(s.parentElement)}class oX{get onKeyDown(){return Ie.chain(this.disposables.add(new gi(this.view.domNode,"keydown")).event,e=>e.filter(t=>!ih(t.target)).map(t=>new Mi(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new Ze,this.multipleSelectionDisposables=new Ze,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(n=>{switch(n.keyCode){case 3:return this.onEnter(n);case 16:return this.onUpArrow(n);case 18:return this.onDownArrow(n);case 11:return this.onPageUpArrow(n);case 12:return this.onPageDownArrow(n);case 9:return this.onEscape(n);case 31:this.multipleSelectionSupport&&(Bt?n.metaKey:n.ctrlKey)&&this.onCtrlA(n)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Ko(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Cp([En],oX.prototype,"onKeyDown",null);var _d;(function(s){s[s.Automatic=0]="Automatic",s[s.Trigger=1]="Trigger"})(_d||(_d={}));var sw;(function(s){s[s.Idle=0]="Idle",s[s.Typing=1]="Typing"})(sw||(sw={}));const cve=new class{mightProducePrintableCharacter(s){return s.ctrlKey||s.metaKey||s.altKey?!1:s.keyCode>=31&&s.keyCode<=56||s.keyCode>=21&&s.keyCode<=30||s.keyCode>=98&&s.keyCode<=107||s.keyCode>=85&&s.keyCode<=95}};class uve{constructor(e,t,i,n,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=n,this.delegate=r,this.enabled=!1,this.state=sw.Idle,this.mode=_d.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Ze,this.disposables=new Ze,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??_d.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Ie.chain(this.enabledDisposables.add(new gi(this.view.domNode,"keydown")).event,r=>r.filter(o=>!ih(o.target)).filter(()=>this.mode===_d.Automatic||this.triggered).map(o=>new Mi(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>ni.stop(o,!0)).map(o=>o.browserEvent.key)),i=Ie.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Ie.reduce(Ie.any(t,i),(r,o)=>o===null?null:(r||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?Rx(t):t&&Rx(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=sw.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,n=this.state===sw.Idle?1:0;this.state=sw.Typing;for(let r=0;r<this.list.length;r++){const o=(i+r+n)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(cI(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}const c=Y_e(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||cI(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class hve{constructor(e,t){this.list=e,this.view=t,this.disposables=new Ze;const i=Ie.chain(this.disposables.add(new gi(t.domNode,"keydown")).event,r=>r.filter(o=>!ih(o.target)).map(o=>new Mi(o)));Ie.chain(i,r=>r.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const n=i.querySelector("[tabIndex]");if(!n||!qn(n)||n.tabIndex===-1)return;const r=nt(n).getComputedStyle(n);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables.dispose()}}function aX(s){return Bt?s.browserEvent.metaKey:s.browserEvent.ctrlKey}function lX(s){return s.browserEvent.shiftKey}function dve(s){return SP(s)&&s.button===2}const GU={isSelectionSingleChangeEvent:aX,isSelectionRangeChangeEvent:lX};class cX{get onPointer(){return this._onPointer.event}constructor(e){this.list=e,this.disposables=new Ze,this._onPointer=this.disposables.add(new ne),e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||GU),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Co.addTarget(e.getHTMLElement()))),Ie.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||GU))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){YS(e.browserEvent.target)||Us()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(ih(e.browserEvent.target)||YS(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||ih(e.browserEvent.target)||YS(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),dve(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(ih(e.browserEvent.target)||YS(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof i>"u"&&(i=this.list.getFocus()[0]??t,this.list.setAnchor(i));const n=Math.min(i,t),r=Math.max(i,t),o=Ko(n,r+1),a=this.list.getSelection(),l=pve(B9(a,[i]),i);if(l.length===0)return;const c=B9(o,_ve(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const n=this.list.getSelection(),r=n.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),n.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class fve{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image${t},
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image${t},
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const n=pg(e.listFocusAndSelectionOutline,pg(e.listSelectionOutline,e.listFocusOutline??""));n&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${n}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`
				.monaco-drag-image${t},
				.monaco-list${t}:focus .monaco-list-row.focused,
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const r=pg(e.listSelectionOutline,e.listInactiveFocusOutline??"");r&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&i.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const gve={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:xe.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:xe.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:xe.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},mve={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function pve(s,e){const t=s.indexOf(e);if(t===-1)return[];const i=[];let n=t-1;for(;n>=0&&s[n]===e-(t-n);)i.push(s[n--]);for(i.reverse(),n=t;n<s.length&&s[n]===e+(n-t);)i.push(s[n++]);return i}function B9(s,e){const t=[];let i=0,n=0;for(;i<s.length||n<e.length;)if(i>=s.length)t.push(e[n++]);else if(n>=e.length)t.push(s[i++]);else if(s[i]===e[n]){t.push(s[i]),i++,n++;continue}else s[i]<e[n]?t.push(s[i++]):t.push(e[n++]);return t}function _ve(s,e){const t=[];let i=0,n=0;for(;i<s.length||n<e.length;)if(i>=s.length)t.push(e[n++]);else if(n>=e.length)t.push(s[i++]);else if(s[i]===e[n]){i++,n++;continue}else s[i]<e[n]?t.push(s[i++]):n++;return t}const KU=(s,e)=>s-e;class bve{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,n){let r=0;for(const o of this.renderers)o.renderElement(e,t,i[r++],n)}disposeElement(e,t,i,n){let r=0;for(const o of this.renderers)o.disposeElement?.(e,t,i[r],n),r+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class vve{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new Ze}}renderElement(e,t,i){const n=this.accessibilityProvider.getAriaLabel(e),r=n&&typeof n!="string"?n:Cx(n);i.disposables.add(qt(a=>{this.setAriaLabel(a.readObservable(r),i.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.container.setAttribute("aria-level",`${o}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class wve{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,i,n,r){return this.dnd.onDragOver(e,t,i,n,r)}onDragLeave(e,t,i,n){this.dnd.onDragLeave?.(e,t,i,n)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,i,n,r){this.dnd.drop(e,t,i,n,r)}dispose(){this.dnd.dispose()}}class gh{get onDidChangeFocus(){return Ie.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Ie.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Ie.chain(this.disposables.add(new gi(this.view.domNode,"keydown")).event,r=>r.map(o=>new Mi(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>ni.stop(o,!0)).filter(()=>!1)),i=Ie.chain(this.disposables.add(new gi(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(o=>new Mi(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>ni.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,h=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:h,browserEvent:o}})),n=Ie.chain(this.view.onContextMenu,r=>r.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new kl(nt(this.view.domNode),l),browserEvent:l})));return Ie.any(t,i,n)}get onKeyDown(){return this.disposables.add(new gi(this.view.domNode,"keydown")).event}get onDidFocus(){return Ie.signal(this.disposables.add(new gi(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Ie.signal(this.disposables.add(new gi(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,n,r=mve){this.user=e,this._options=r,this.focus=new _I("focused"),this.anchor=new _I("anchor"),this.eventBufferer=new w2,this._ariaLabel="",this.disposables=new Ze,this._onDidDispose=new ne,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new ove(o!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new vve(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),n=n.map(c=>new bve(c.templateId,[...a,c]));const l={...r,dnd:r.dnd&&new wve(this,r.dnd)};if(this.view=this.createListView(t,i,n,l),this.view.domNode.setAttribute("role",o),r.styleController)this.styleController=r.styleController(this.view.domId);else{const c=ah(this.view.domNode);this.styleController=new fve(c,this.view.domId)}if(this.spliceable=new Ybe([new C5(this.focus,this.view,r.identityProvider),new C5(this.selection,this.view,r.identityProvider),new C5(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new hve(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new oX(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const c=r.keyboardNavigationDelegate||cve;this.typeNavigationController=new uve(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),c),this.disposables.add(this.typeNavigationController)}if(this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider){const c=this.accessibilityProvider.getWidgetAriaLabel(),h=c&&typeof c!="string"?c:Cx(c);this.disposables.add(qt(d=>{this.ariaLabel=d.readObservable(h)}))}this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,n){return new lu(e,t,i,n)}createMouseController(e){return new cX(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new B_(this.user,`Invalid start index: ${e}`);if(t<0)throw new B_(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new B_(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new B_(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new B_(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,n){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,n);o>-1&&this.setFocus([o],i)}focusPrevious(e=1,t=!1,i,n){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,n);o>-1&&this.setFocus([o],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const n=this.getFocus()[0];if(n!==i&&(n===void 0||i>n)){const r=this.findPreviousIndex(i,!1,t);r>-1&&n!==r?this.setFocus([r],e):this.setFocus([i],e)}else{const r=this.view.getScrollTop();let o=r+this.view.renderHeight;i>n&&(o-=this.view.elementHeight(i)),this.view.setScrollTop(o),this.view.getScrollTop()!==r&&(this.setFocus([]),await tC(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let n;const r=i(),o=this.view.getScrollTop()+r;o===0?n=this.view.indexAt(o):n=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==n&&(a===void 0||a>=n)){const l=this.findNextIndex(n,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([n],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-r),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await tC(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const n=this.findNextIndex(e,!1,i);n>-1&&this.setFocus([n],t)}findNextIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new B_(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(D0(t)){const a=o-this.view.renderHeight+i;this.view.setScrollTop(a*Yo(t,0,1)+r-i)}else{const a=r+o,l=n+this.view.renderHeight;r<n+i&&a>=l||(r<n+i||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(r-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new B_(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),n=this.view.elementTop(e),r=this.view.elementHeight(e);if(n<i+t||n+r>i+this.view.renderHeight)return null;const o=r-this.view.renderHeight+t;return Math.abs((i+t-n)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Cp([En],gh.prototype,"onDidChangeFocus",null);Cp([En],gh.prototype,"onDidChangeSelection",null);Cp([En],gh.prototype,"onContextMenu",null);Cp([En],gh.prototype,"onKeyDown",null);Cp([En],gh.prototype,"onDidFocus",null);Cp([En],gh.prototype,"onDidBlur",null);const D1=ot,uX="selectOption.entry.template";class Cve{get templateId(){return uX}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=Qe(e,D1(".option-text")),t.detail=Qe(e,D1(".option-detail")),t.decoratorRight=Qe(e,D1(".option-decorator-right")),t}renderElement(e,t,i){const n=i,r=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;n.text.textContent=r,n.detail.textContent=o||"",n.decoratorRight.textContent=a||"",l?n.root.classList.add("option-disabled"):n.root.classList.remove("option-disabled")}disposeTemplate(e){}}const cd=class cd extends pe{constructor(e,t,i,n,r){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=n,this.selectBoxOptions=r||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=cd.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new ne,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(fh().setupManagedHover(uu("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return uX}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ot(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Qe(this.selectDropDownContainer,D1(".select-box-details-pane"));const t=Qe(this.selectDropDownContainer,D1(".select-box-dropdown-container-width-control")),i=Qe(t,D1(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Qe(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=ah(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(ue(this.selectDropDownContainer,Re.DRAG_START,n=>{ni.stop(n,!0)}))}registerListeners(){this._register(Cr(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(ue(this.selectElement,Re.CLICK,t=>{ni.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ue(this.selectElement,Re.MOUSE_DOWN,t=>{ni.stop(t)}));let e;this._register(ue(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(ue(this.selectElement,"touchend",t=>{ni.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ue(this.selectElement,Re.KEY_DOWN,t=>{const i=new Mi(t);let n=!1;Bt?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(n=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(n=!0),n&&(this.showSelectDropDown(),ni.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){vs(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,n)=>{this.selectElement.add(this.createOption(i.text,n,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=pg(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}showSelectDropDown(){this.selectionDetailsPane.textContent="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=nt(this.selectElement),i=pc(this.selectElement),n=nt(this.selectElement).getComputedStyle(this.selectElement),r=parseFloat(n.getPropertyValue("--dropdown-padding-top"))+parseFloat(n.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-cd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),h=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=h,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let d=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const g=this._hasDetails?this._cachedMaxDetailsHeight:0,_=d+r+g,b=Math.floor((o-r-g)/this.getHeight()),C=Math.floor((a-r-g)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<cd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||b<1&&C<1?!1:(b<cd.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&C>b&&this.options.length>b?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<cd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&b<1||this._dropDownPosition===1&&C<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&b+C<1)return this.hideSelectDropDown(!0),!1;_>o&&(d=b*this.getHeight())}else _>a&&(d=C*this.getHeight());return this.selectList.layout(d),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=d+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=d+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=h,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,n=0;this.options.forEach((r,o)=>{const a=r.detail?r.detail.length:0,l=r.decoratorRight?r.decoratorRight.length:0,c=r.text.length+a+l;c>n&&(i=o,n=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=CP(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Qe(e,D1(".select-box-dropdown-list-container")),this.listRenderer=new Cve,this.selectList=this._register(new gh("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:n=>{let r=n.text;return n.detail&&(r+=`. ${n.detail}`),n.decoratorRight&&(r+=`. ${n.decoratorRight}`),n.description&&(r+=`. ${n.description}`),r},getWidgetAriaLabel:()=>y(16,"Select Box"),getRole:()=>Bt?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new gi(this.selectDropDownListContainer,"keydown")),i=Ie.chain(t.event,n=>n.filter(()=>this.selectList.length>0).map(r=>new Mi(r)));this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===3))(this.onEnter,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===2))(this.onEnter,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===9))(this.onEscape,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===16))(this.onUpArrow,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===18))(this.onDownArrow,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===12))(this.onPageDown,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===11))(this.onPageUp,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===14))(this.onHome,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode===13))(this.onEnd,this)),this._register(Ie.chain(i,n=>n.filter(r=>r.keyCode>=21&&r.keyCode<=56||r.keyCode>=85&&r.keyCode<=113))(this.onCharacter,this)),this._register(ue(this.selectList.getHTMLElement(),Re.POINTER_UP,n=>this.onPointerUp(n))),this._register(this.selectList.onMouseOver(n=>typeof n.index<"u"&&this.selectList.setFocus([n.index]))),this._register(this.selectList.onDidChangeFocus(n=>this.onListFocus(n))),this._register(ue(this.selectDropDownContainer,Re.FOCUS_OUT,n=>{!this._isVisible||zs(n.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;ni.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const n=Number(i.getAttribute("data-index")),r=i.classList.contains("option-disabled");n>=0&&n<this.options.length&&!r&&(this.selected=n,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=r=>{for(let o=0;o<r.childNodes.length;o++){const a=r.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():i(a)}},n=FB({value:e,supportThemeIcons:!0},{actionHandler:t});return n.element.classList.add("select-box-description-markdown"),i(n.element),n.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.textContent="";const t=this.options[e],i=t?.description??"",n=t?.descriptionIsMarkdown??!1;if(i){if(n){const r=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,r))}else this.selectionDetailsPane.textContent=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){ni.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){ni.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){ni.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(ni.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){ni.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){ni.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){ni.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){ni.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Xf.toString(e.keyCode);let i=-1;for(let n=0;n<this.options.length-1;n++)if(i=(n+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),ni.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};cd.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,cd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,cd.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let F9=cd;class yve extends pe{constructor(e,t,i,n){super(),this.selected=0,this.selectBoxOptions=n||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new ne),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Co.addTarget(this.selectElement)),[ji.Tap].forEach(e=>{this._register(ue(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Cr(this.selectElement,"click",e=>{ni.stop(e,!0)})),this._register(Cr(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Cr(this.selectElement,"keydown",e=>{let t=!1;Bt?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!vs(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,n)=>{this.selectElement.add(this.createOption(i.text,n,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const n=document.createElement("option");return n.value=e,n.text=e,n.disabled=!!i,n}}class Sve extends Ud{constructor(e,t,i,n,r){super(),Bt&&!r?.useCustomDrawn?this.selectBoxDelegate=new yve(e,t,n,r):this.selectBoxDelegate=new F9(e,t,i,n,r),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class Gu extends pe{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof Zm&&this._register(t.onDidChange(n=>{this.element&&this.handleActionChangeEvent(n)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new g0)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Co.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Va&&this._register(ue(e,Re.DRAG_START,n=>n.dataTransfer?.setData(nX.TEXT,this._action.label)))),this._register(ue(t,ji.Tap,n=>this.onClick(n,!0))),this._register(ue(t,Re.MOUSE_DOWN,n=>{i||ni.stop(n,!0),this._action.enabled&&n.button===0&&t.classList.add("active")})),Bt&&this._register(ue(t,Re.CONTEXT_MENU,n=>{n.button===0&&n.ctrlKey===!0&&this.onClick(n)})),this._register(ue(t,Re.CLICK,n=>{ni.stop(n,!0),this.options&&this.options.isMenu||this.onClick(n)})),this._register(ue(t,Re.DBLCLICK,n=>{ni.stop(n,!0)})),[Re.MOUSE_UP,Re.MOUSE_OUT].forEach(n=>{this._register(ue(t,n,r=>{ni.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){ni.stop(e,!0);const i=fc(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}getHoverContents(){return this.getTooltip()}updateTooltip(){if(!this.element)return;const e=this.getHoverContents()??"";if(this.updateAriaLabel(),!this.customHover&&e!==""){const t=this.options.hoverDelegate??uu("element");this.customHover=this._store.add(fh().setupManagedHover(t,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class qB extends Gu{constructor(e,t,i){i={...i,icon:i.icon!==void 0?i.icon:!1,label:i.label!==void 0?i.label:!0},super(e,t,i),this.options=i,this.cssClass=""}render(e){super.render(e),Km(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding&&!this.options.keybindingNotRenderedWithLabel){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Mr.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label,this.options.keybinding&&(e=y(0,"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class Lve extends Gu{constructor(e,t,i,n,r,o,a){super(e,t),this.selectBox=new Sve(i,n,r,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}}class xve extends g0{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new ne),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Qe(e,ot(".monaco-dropdown")),this._label=Qe(this._element,ot(".dropdown-label"));let i=t.labelRenderer;i||(i=r=>(r.textContent=t.label||"",null));for(const r of[Re.CLICK,Re.MOUSE_DOWN,ji.Tap])this._register(ue(this.element,r,o=>ni.stop(o,!0)));for(const r of[Re.MOUSE_DOWN,ji.Tap])this._register(ue(this._label,r,o=>{SP(o)&&o.button!==0||(this.visible?this.hide():this.show())}));this._register(ue(this._label,Re.KEY_DOWN,r=>{const o=new Mi(r);(o.equals(3)||o.equals(10))&&(ni.stop(r,!0),this.visible?this.hide():this.show())}));const n=i(this._label);n&&this._register(n),this._register(Co.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class kve extends xve{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class bI extends Gu{get onDidChangeVisibility(){return this._onDidChangeVisibility.event}constructor(e,t,i,n=Object.create(null)){super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new ne),this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>(this.element=Qe(r,ot("a.action-label")),this.renderLabel(this.element)),i=Array.isArray(this.menuActionsOrProvider),n={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new kve(e,n)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{this.element?.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return r.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}renderLabel(e){let t=[];return typeof this.options.classNames=="string"?t=this.options.classNames.split(/\s+/g).filter(i=>!!i):this.options.classNames&&(t=this.options.classNames),t.find(i=>i==="icon")||t.push("codicon"),e.classList.add(...t),this._action.label&&this._register(fh().setupManagedHover(this.options.hoverDelegate??uu("mouse"),e,this._action.label)),null}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){const e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}}function Eve(s){return s?s.condition!==void 0:!1}function Tve(s,e){const t={...e};for(const i in s){const n=s[i];t[i]=n!==void 0?Fe(n):void 0}return t}const Dve={keybindingLabelBackground:Fe(gce),keybindingLabelForeground:Fe(mce),keybindingLabelBorder:Fe(pce),keybindingLabelBottomBorder:Fe(_ce),keybindingLabelShadow:Fe(M2)},Nve={buttonForeground:Fe(AK),buttonSeparator:Fe(ece),buttonBackground:Fe(US),buttonHoverBackground:Fe(tce),buttonSecondaryForeground:Fe(nce),buttonSecondaryBackground:Fe(f7),buttonSecondaryHoverBackground:Fe(sce),buttonBorder:Fe(ice)},Ive={progressBarBackground:Fe(ble)},hX={inputActiveOptionBorder:Fe(DK),inputActiveOptionForeground:Fe(IK),inputActiveOptionBackground:Fe(NK)};Fe(qS),Fe(rce),Fe(oce),Fe(ace),Fe(lce),Fe(cce),Fe(uce);const $B={checkboxBackground:Fe(KP),checkboxBorder:Fe(hce),checkboxForeground:Fe(YP),checkboxDisabledBackground:Fe(dce),checkboxDisabledForeground:Fe(fce)};Fe(iu),Fe(LR),Fe(M2),Fe(EK),Fe(Ile),Fe(Ale),Fe(Rle),Fe(ple);const dX={inputBackground:Fe(Hle),inputForeground:Fe(Wle),inputBorder:Fe(zle),inputValidationInfoBorder:Fe(jle),inputValidationInfoBackground:Fe(qle),inputValidationInfoForeground:Fe($le),inputValidationWarningBorder:Fe(Yle),inputValidationWarningBackground:Fe(Gle),inputValidationWarningForeground:Fe(Kle),inputValidationErrorBorder:Fe(Qle),inputValidationErrorBackground:Fe(Zle),inputValidationErrorForeground:Fe(Xle)},Ave={listFilterWidgetBackground:Fe(Dce),listFilterWidgetOutline:Fe(Nce),listFilterWidgetNoMatchesOutline:Fe(Ice),listFilterWidgetShadow:Fe(Ace),inputBoxStyles:dX,toggleStyles:hX},Rve={badgeBackground:Fe(DD),badgeForeground:Fe(_le),badgeBorder:Fe(ti)};Fe(Dle),Fe(Tle),Fe(_W),Fe(_W),Fe(Nle);const K2={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Fe(bce),listFocusForeground:Fe(vce),listFocusOutline:Fe(wce),listActiveSelectionBackground:Fe(_0),listActiveSelectionForeground:Fe(Ox),listActiveSelectionIconForeground:Fe(RK),listFocusAndSelectionOutline:Fe(Cce),listFocusAndSelectionBackground:Fe(_0),listFocusAndSelectionForeground:Fe(Ox),listInactiveSelectionBackground:Fe(yce),listInactiveSelectionIconForeground:Fe(Lce),listInactiveSelectionForeground:Fe(Sce),listInactiveFocusBackground:Fe(xce),listInactiveFocusOutline:Fe(kce),listHoverBackground:Fe(MK),listHoverForeground:Fe(OK),listDropOverBackground:Fe(Ece),listDropBetweenBackground:Fe(Tce),listSelectionOutline:Fe($n),listHoverOutline:Fe($n),treeIndentGuidesStroke:Fe(PK),treeInactiveIndentGuidesStroke:Fe(Rce),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:Fe(UP),tableColumnsBorder:Fe(Mce),tableOddRowsBackgroundColor:Fe(Oce)};function Y2(s){return Tve(s,K2)}const Mve={selectBackground:Fe(xR),selectListBackground:Fe(Jle),selectForeground:Fe(jP),decoratorRightForeground:Fe(BK),selectBorder:Fe(GP),focusBorder:Fe(Rd),listFocusBackground:Fe(m7),listInactiveSelectionIconForeground:Fe(FK),listFocusForeground:Fe(g7),listFocusOutline:ule($n,xe.transparent.toString()),listHoverBackground:Fe(MK),listHoverForeground:Fe(OK),listHoverOutline:Fe($n),selectListBorder:Fe(yK),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Ove={shadowColor:Fe(M2),borderColor:Fe(Pce),foregroundColor:Fe(Bce),backgroundColor:Fe(Fce),selectionForegroundColor:Fe(Vce),selectionBackgroundColor:Fe(Hce),selectionBorderColor:Fe(Wce),separatorColor:Fe(zce),scrollbarShadow:Fe(UP),scrollbarSliderBackground:Fe(vK),scrollbarSliderHoverBackground:Fe(wK),scrollbarSliderActiveBackground:Fe(CK)};function Pve(s,e){if(yg)return!1;const t=Bve(s,e),i=s.getValue("window");return i?.menuStyle==="native"?!(!Bt&&!t):i?.menuStyle==="custom"?!1:t}function Bve(s,e){return e||(e=fX(s)),e==="native"}function fX(s){if(yg)return"custom";const e=s.getValue("window");if(e){if(Bt&&e.nativeTabs===!0||Bt&&e.nativeFullScreen===!1)return"native";const n=e.titleBarStyle;if(n==="native"||n==="custom")return n}return"custom"}function Fve(s){if(yg||Bt||fX(s)==="native")return"native";const t=s.getValue("window")?.controlsStyle;return t==="custom"||t==="hidden"?t:"native"}var FR=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},go=function(s,e){return function(t,i){e(t,i,s)}};function Vve(s,e){const t=[];return Hve(s,t),t}function Hve(s,e,t){const i=Fm.getInstance(),n=i.keyStatus.altKey||(ia||Fa)&&i.keyStatus.shiftKey;gX(s,e,n,r=>r==="navigation")}function Wve(s,e,t,i){const n={primary:[],secondary:[]};return zve(s,n,e,t,i),n}function zve(s,e,t,i,n){gX(s,e,!1,typeof t=="string"?o=>o===t:t,i,n)}function gX(s,e,t,i=o=>o==="navigation",n=()=>!1,r=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,h]of s){let d;i(c)?(d=o,d.length>0&&r&&d.push(new Mr)):(d=a,d.length>0&&d.push(new Mr));for(let g of h){t&&(g=g instanceof dg&&g.alt?g.alt:g);const _=d.push(g);g instanceof oR&&l.add({group:c,action:g,index:_-1})}}for(const{group:c,action:h,index:d}of l){const g=i(c)?o:a,_=h.actions;n(h,c,g.length)&&g.splice(d,1,..._)}}let e2=class extends qB{constructor(e,t,i,n,r,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate,keybindingNotRenderedWithLabel:t?.keybindingNotRenderedWithLabel}),this._options=t,this._keybindingService=i,this._notificationService=n,this._contextKeyService=r,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new qs),this._altKey=Fm.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{const n=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);n!==this._wantsAltCommand&&(this._wantsAltCommand=n,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(ue(e,"mouseleave",n=>{t=!1,i()})),this._register(ue(e,"mouseenter",n=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let n=t?y(1629,"{0} ({1})",i,t):i;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?y(1630,"{0} ({1})",r,a):r;n=y(1631,`{0}
[{1}] {2}`,n,HB.modifierLabels[tu].altKey,l)}return n}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const n=this._commandAction.checked&&Eve(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(n)if(Gt.isThemeIcon(n)){const r=Gt.asClassNameArray(n);i.classList.add(...r),this._itemClassDispose.value=lt(()=>{i.classList.remove(...r)})}else i.style.backgroundImage=B2(this._themeService.getColorTheme().type)?Od(n.dark):Od(n.light),i.classList.add("icon"),this._itemClassDispose.value=yd(lt(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};e2=FR([go(2,ar),go(3,cu),go(4,ai),go(5,za),go(6,kg),go(7,Ol)],e2);let V9=class extends bI{constructor(e,t,i,n,r){const o={...t,menuAsChild:t?.menuAsChild??!1,classNames:t?.classNames??(Gt.isThemeIcon(e.item.icon)?Gt.asClassName(e.item.icon):void 0),keybindingProvider:t?.keybindingProvider??(a=>i.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},n,o),this._keybindingService=i,this._contextMenuService=n,this._themeService=r}render(e){super.render(e),Km(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!Gt.isThemeIcon(i)){this.element.classList.add("icon");const n=()=>{this.element&&(this.element.style.backgroundImage=B2(this._themeService.getColorTheme().type)?Od(i.dark):Od(i.light))};n(),this._register(this._themeService.onDidColorThemeChange(()=>{n()}))}}};V9=FR([go(2,ar),go(3,kg),go(4,za)],V9);let H9=class extends Gu{constructor(e,t,i,n,r,o,a,l){super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._defaultActionDisposables=this._register(new Ze),this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const h=t?.persistLastActionId?l.get(this._storageKey,1):void 0;h&&(c=e.actions.find(g=>h===g.id)),c||(c=e.actions[0]),this._defaultAction=this._defaultActionDisposables.add(this._instaService.createInstance(e2,c,{keybinding:this._getDefaultActionKeybindingLabel(c)}));const d={keybindingProvider:g=>this._keybindingService.lookupKeybinding(g.id),...t,menuAsChild:t?.menuAsChild??!0,classNames:t?.classNames??["codicon","codicon-chevron-down"],actionRunner:t?.actionRunner??this._register(new g0)};this._dropdown=this._register(new bI(e,e.actions,this._contextMenuService,d)),this._register(this._dropdown.actionRunner.onDidRun(g=>{g.action instanceof dg&&this.update(g.action)}))}update(e){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultActionDisposables.clear(),this._defaultAction=this._defaultActionDisposables.add(this._instaService.createInstance(e2,e,{keybinding:this._getDefaultActionKeybindingLabel(e)})),this._defaultAction.actionRunner=this._defaultActionDisposables.add(new class extends g0{async runAction(t,i){await t.run(void 0)}}),this._container&&this._defaultAction.render(sR(this._container,ot(".action-container")))}_getDefaultActionKeybindingLabel(e){let t;if(this._options?.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(t=`(${i.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ot(".action-container");this._defaultAction.render(Qe(this._container,t)),this._register(ue(t,Re.KEY_DOWN,n=>{const r=new Mi(n);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const i=ot(".dropdown-action-container");this._dropdown.render(Qe(this._container,i)),this._register(ue(i,Re.KEY_DOWN,n=>{const r=new Mi(n);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}};H9=FR([go(2,ar),go(3,cu),go(4,kg),go(5,O0),go(6,Zt),go(7,$2)],H9);let W9=class extends Lve{constructor(e,t,i){super(null,e,e.actions.map(n=>({text:n.id===Mr.ID?"─────────":n.label,isDisabled:!n.enabled})),0,t,Mve,{ariaLabel:e.tooltip,optionsAsChildren:!0,useCustomDrawn:!Pve(i)}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=Fe(GP)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};W9=FR([go(1,W2),go(2,cn)],W9);function mX(s,e,t){return e instanceof dg?s.createInstance(e2,e,t):e instanceof xw?e.item.isSelection?s.createInstance(W9,e):e.item.rememberDefaultAction?s.createInstance(H9,e,{...t,persistLastActionId:!0}):s.createInstance(V9,e,t):void 0}class kd extends pe{get onDidBlur(){return this._onDidBlur.event}get onDidCancel(){return this._onDidCancel.event}get onDidRun(){return this._onDidRun.event}get onWillRun(){return this._onWillRun.event}constructor(e,t={}){super(),this._actionRunnerDisposables=this._register(new Ze),this.viewItemDisposables=this._register(new Z6),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new ne),this._onDidCancel=this._register(new ne({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.cancelHasListener=!1,this._onDidRun=this._register(new ne),this._onWillRun=this._register(new ne),this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(UB()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new g0,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(r=>this._onDidRun.fire(r))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(r=>this._onWillRun.fire(r))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,n;switch(this._orientation){case 0:i=[15],n=[17];break;case 1:i=[16],n=[18],this.domNode.className+=" vertical";break}this._register(ue(this.domNode,Re.KEY_DOWN,r=>{const o=new Mi(r);let a=!0;const l=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(o.equals(i[0])||o.equals(i[1]))?a=this.focusPrevious():n&&(o.equals(n[0])||o.equals(n[1]))?a=this.focusNext():o.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():o.equals(14)?a=this.focusFirst():o.equals(13)?a=this.focusLast():o.equals(2)&&l instanceof Gu&&l.trapsArrowNavigation?a=this.focusNext(void 0,!0):this.isTriggerKeyEvent(o)?this._triggerKeys.keyDown?this.doTrigger(o):this.triggerKeyDown=!0:a=!1,a&&(o.preventDefault(),o.stopPropagation())})),this._register(ue(this.domNode,Re.KEY_UP,r=>{const o=new Mi(r);this.isTriggerKeyEvent(o)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(o)),o.preventDefault(),o.stopPropagation()):(o.equals(2)||o.equals(1026)||o.equals(16)||o.equals(18)||o.equals(15)||o.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(iC(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Us()===this.domNode||!zs(Us(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof Gu&&i.isEnabled());t instanceof Gu&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Gu&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(zs(Us(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){if(typeof e=="number")return this.viewItems[e]?.action;if(qn(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let n=D0(t.index)?t.index:null;if(i.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r,l)),a||(a=new qB(this.context,r,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,ue(o,Re.CONTEXT_MENU,c=>{ni.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),n===null||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[n]),this.viewItems.splice(n,0,a),n++)}),this.focusable){let r=!1;for(const o of this.viewItems){if(!(o instanceof Gu))continue;let a;r||o.action.id===Mr.ID||!o.isEnabled()&&this.options.focusOnlyEnabledItems?a=!1:a=!0,a?(o.setFocusable(!0),r=!0):o.setFocusable(!1)}}typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=Cs(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),oh(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const n=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=n===-1?void 0:n,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Mr.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Mr.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const n=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(n){let r=!0;Qw(n.focus)||(r=!1),this.options.focusOnlyEnabledItems&&Qw(n.isEnabled)&&!n.isEnabled()&&(r=!1),n.action.id===Mr.ID&&(r=!1),r?(i||this.previouslyFocusedItem!==this.focusedItem)&&(n.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),r&&n.showHover?.()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Gu){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Cs(this.viewItems),this.getContainer().remove(),super.dispose()}}const z9=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,y5=/(&amp;)?(&amp;)([^\s&])/g;var vI;(function(s){s[s.Right=0]="Right",s[s.Left=1]="Left"})(vI||(vI={}));var U9;(function(s){s[s.Above=0]="Above",s[s.Below=1]="Below"})(U9||(U9={}));class Ww extends kd{constructor(e,t,i,n){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Bt||Fa?[10]:[]],keyDown:!0}}),this.menuStyles=n,this.menuElement=r,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,n),this._register(Co.addTarget(r)),this._register(ue(r,Re.KEY_DOWN,c=>{new Mi(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(ue(r,Re.KEY_DOWN,c=>{const h=c.key.toLocaleLowerCase();if(this.mnemonics.has(h)){ni.stop(c,!0);const d=this.mnemonics.get(h);if(d.length===1&&(d[0]instanceof YU&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(c)),d.length>1){const g=d.shift();g&&g.container&&(this.focusItemByElement(g.container),d.push(g)),this.mnemonics.set(h,d)}}})),Fa&&this._register(ue(r,Re.KEY_DOWN,c=>{const h=new Mi(c);h.equals(14)||h.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),ni.stop(c,!0)):(h.equals(13)||h.equals(12))&&(this.focusedItem=0,this.focusPrevious(),ni.stop(c,!0))})),this._register(ue(this.domNode,Re.MOUSE_OUT,c=>{const h=c.relatedTarget;zs(h,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(ue(this.actionsList,Re.MOUSE_OVER,c=>{let h=c.target;if(!(!h||!zs(h,this.actionsList)||h===this.actionsList)){for(;h.parentElement!==this.actionsList&&h.parentElement!==null;)h=h.parentElement;if(h.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(h),d!==this.focusedItem&&this.updateFocus()}}})),this._register(Co.addTarget(this.actionsList)),this._register(ue(this.actionsList,ji.Tap,c=>{let h=c.initialTarget;if(!(!h||!zs(h,this.actionsList)||h===this.actionsList)){for(;h.parentElement!==this.actionsList&&h.parentElement!==null;)h=h.parentElement;if(h.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(h),d!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new XP(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,n),this._register(ue(r,ji.Change,c=>{ni.stop(c,!0);const h=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:h-c.translationY})})),this._register(ue(a,Re.MOUSE_UP,c=>{c.preventDefault()}));const l=nt(e);r.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,h)=>i.submenuIds?.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Mr&&(h===t.length-1||h===0||t[h-1]instanceof Mr))),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof ZU)).forEach((c,h,d)=>{c.updatePositionInSet(h+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(D3(e)?this.styleSheet=ah(e):(Ww.globalStyleSheet||(Ww.globalStyleSheet=ah()),this.styleSheet=Ww.globalStyleSheet)),this.styleSheet.textContent=qve(t,D3(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",n=t.backgroundColor??"",r=t.borderColor?`1px solid ${t.borderColor}`:"",o="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=r,e.style.borderRadius=o,e.style.color=i,e.style.backgroundColor=n,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Mr)return new ZU(t.context,e,{icon:!0},this.menuStyles);if(e instanceof oR){const n=new YU(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const r=n.getMnemonic();if(r&&n.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(n),this.mnemonics.set(r,o)}}return n}else{const n=t.getKeyBinding?.(e)?.getLabel(),r={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext,keybinding:n},o=new pX(t.context,e,r,this.menuStyles);if(t.enableMnemonics){const a=o.getMnemonic();if(a&&o.isEnabled()){let l=[];this.mnemonics.has(a)&&(l=this.mnemonics.get(a)),l.push(o),this.mnemonics.set(a,l)}}return o}}}class pX extends Gu{constructor(e,t,i,n){if(i={...i,isMenu:!0,icon:i.icon!==void 0?i.icon:!1,label:i.label!==void 0?i.label:!0},super(t,t,i),this.menuStyle=n,this.options=i,this.cssClass="",this.options.label&&i.enableMnemonics){const r=this.action.label;if(r){const o=z9.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Or(()=>{this.element&&(this._register(ue(this.element,Re.MOUSE_UP,r=>{if(ni.stop(r,!0),Va){if(new kl(nt(this.element),r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(ue(this.element,Re.CONTEXT_MENU,r=>{ni.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Qe(this.element,ot("a.action-menu-item")),this._action.id===Mr.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Qe(this.item,ot("span.menu-item-check"+Gt.asCSSSelector(Ue.menuSelection))),this.check.setAttribute("role","none"),this.label=Qe(this.item,ot("span.action-label")),this.options.label&&this.options.keybinding&&(Qe(this.item,ot("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){oh(this.label);let e=xZ(this.action.label);if(e){const t=Uve(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const i=z9.exec(e);if(i){e=su(e),y5.lastIndex=0;let n=y5.exec(e);for(;n&&n[1];)n=y5.exec(e);const r=o=>o.replace(/&amp;&amp;/g,"&amp;");n?this.label.append(ZA(r(e.substr(0,n.index))," "),ot("u",{"aria-hidden":"true"},n[3]),Bie(r(e.substr(n.index+n[0].length))," ")):this.label.textContent=r(e).trim(),this.item?.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.textContent=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=n,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=t??"")}}class YU extends pX{constructor(e,t,i,n,r){super(e,e,n,r),this.submenuActions=t,this.parentData=i,this.submenuOptions=n,this.mysubmenu=null,this.submenuDisposables=this._register(new Ze),this.mouseOver=!1,this.expandDirection=n&&n.expandDirection!==void 0?n.expandDirection:{horizontal:vI.Right,vertical:U9.Below},this.showScheduler=new Or(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Or(()=>{this.element&&!zs(Us(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Qe(this.item,ot("span.submenu-indicator"+Gt.asCSSSelector(Ue.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(ue(this.element,Re.KEY_UP,t=>{const i=new Mi(t);(i.equals(17)||i.equals(3))&&(ni.stop(t,!0),this.createSubmenu(!0))})),this._register(ue(this.element,Re.KEY_DOWN,t=>{const i=new Mi(t);Us()===this.item&&(i.equals(17)||i.equals(3))&&ni.stop(t,!0)})),this._register(ue(this.element,Re.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(ue(this.element,Re.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(ue(this.element,Re.FOCUS_OUT,t=>{this.element&&!zs(Us(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){ni.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,n){const r={top:0,left:0};return r.left=iw(e.width,t.width,{position:n.horizontal===vI.Right?0:1,offset:i.left,size:i.width}),r.left>=i.left&&r.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(r.left=i.left+10),i.top+=10,i.height=0),r.top=iw(e.height,t.height,{position:0,offset:i.top,size:0}),r.top+t.height===i.top&&r.top+i.height+t.height<=e.height&&(r.top+=i.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Qe(this.element,ot("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=nt(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.submenuContainer.style.zIndex="1",this.parentData.submenu=new Ww(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new R3],this.submenuOptions,this.menuStyle);const n=this.element.getBoundingClientRect(),r={top:n.top-i,left:n.left,height:n.height+2*i,width:n.width},o=this.submenuContainer.getBoundingClientRect(),a=nt(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new Qf(a.innerWidth,a.innerHeight),Qf.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(ue(this.submenuContainer,Re.KEY_UP,h=>{new Mi(h).equals(15)&&(ni.stop(h,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(ue(this.submenuContainer,Re.KEY_DOWN,h=>{new Mi(h).equals(15)&&ni.stop(h,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){this.item&&this.item?.setAttribute("aria-expanded",e)}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class ZU extends qB{constructor(e,t,i,n){super(e,t,i),this.menuStyles=n}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function Uve(s){const e=z9,t=e.exec(s);if(!t)return s;const i=!t[1];return s.replace(e,i?"$2$3":"").trim()}function XU(s){const e=Qj()[s.id];return`.codicon-${s.id}:before { content: '\\${e.toString(16)}'; }`}function qve(s,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${XU(Ue.menuSelection)}
${XU(Ue.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
	opacity: 0.7;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
			/* Fix for https://github.com/microsoft/vscode/issues/103170 */
			.monaco-menu .action-item .monaco-submenu {
				z-index: 1;
			}
		`;const i=s.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const n=s.scrollbarSliderBackground;n&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${n};
				}
			`);const r=s.scrollbarSliderHoverBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${r};
				}
			`);const o=s.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class $ve{constructor(e,t,i,n){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=n,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=Us();let i;const n=qn(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,layer:e.layer,render:r=>{this.lastContainer=r;const o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(ot(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",this.blockDisposable?.dispose(),this.blockDisposable=ue(this.block,Re.MOUSE_DOWN,h=>h.stopPropagation()));const a=new Ze,l=e.actionRunner||a.add(new g0);l.onWillRun(h=>this.onActionRun(h,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),i=new Ww(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:h=>this.keybindingService.lookupKeybinding(h.id)},Ove),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=nt(r);return a.add(ue(c,Re.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(ue(c,Re.MOUSE_DOWN,h=>{if(h.defaultPrevented)return;const d=new kl(c,h);let g=d.target;if(!d.rightButton){for(;g;){if(g===r)return;g=g.parentElement}this.contextViewService.hideContextView(!0)}})),yd(a,i)},focus:()=>{i?.focus(!!e.autoSelectFirstItem)},onHide:r=>{e.onHide?.(!!r),this.block&&(this.block.remove(),this.block=null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&(Us()===this.lastContainer||zs(Us(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},n,!!n)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!v2(e.error)&&this.notificationService.error(e.error)}}var jve=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Iv=function(s,e){return function(t,i){e(t,i,s)}};let q9=class extends pe{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new $ve(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,n,r,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=n,this.menuService=r,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new ne),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new ne),this.onDidHideContextMenu=this._onDidHideContextMenu.event}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=$9.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{e.onHide?.(t),this._onDidHideContextMenu.fire()}}),Fm.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};q9=jve([Iv(0,Sg),Iv(1,cu),Iv(2,W2),Iv(3,ar),Iv(4,O0),Iv(5,ai)],q9);var $9;(function(s){function e(i){return i&&i.menuId instanceof ws}function t(i,n,r){if(!e(i))return i;const{menuId:o,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{let c=[];if(o){const h=n.getMenuActions(o,l??r,a);c=Vve(h)}return i.getActions?Mr.join(i.getActions(),c):c}}}s.transform=t})($9||($9={}));var wI;(function(s){s[s.API=0]="API",s[s.USER=1]="USER"})(wI||(wI={}));var jB=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},CI=function(s,e){return function(t,i){e(t,i,s)}};let j9=class{constructor(e){this._commandService=e}async open(e,t){if(!hP(e,mt.command))return!1;if(!t?.allowCommands||(typeof e=="string"&&(e=Ot.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=v9(decodeURIComponent(e.query))}catch{try{i=v9(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};j9=jB([CI(0,Ml)],j9);let G9=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Ot.parse(e));const{selection:i,uri:n}=F_e(e);return e=n,e.scheme===mt.file&&(e=nre(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t?.fromUserGesture?wI.USER:wI.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};G9=jB([CI(0,Es)],G9);let K9=class{constructor(e,t){this._openers=new ea,this._validators=new ea,this._resolvers=new ea,this._resolvedUriTargets=new Br(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new ea,this._defaultExternalOpener={openExternal:async i=>(HV(i,mt.http,mt.https)?EG(i):Ri.location.href=i,!0)},this._openers.push({open:async(i,n)=>n?.openExternal||HV(i,mt.mailto,mt.http,mt.https,mt.vsls)?(await this._doOpenExternal(i,n),!0):!1}),this._openers.push(new j9(t)),this._openers.push(new G9(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){if(!t?.skipValidation){const i=typeof e=="string"?Ot.parse(e):e,n=this._resolvedUriTargets.get(i)??e;for(const r of this._validators)if(!await r.shouldOpen(n,t))return!1}for(const i of this._openers)if(await i.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const n=await i.resolveExternalUri(e,t);if(n)return this._resolvedUriTargets.has(n.resolved)||this._resolvedUriTargets.set(n.resolved,e),n}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?Ot.parse(e):e;let n;try{n=(await this.resolveExternalUri(i,t)).resolved}catch{n=i}let r;if(typeof e=="string"&&i.toString()===n.toString()?r=e:r=encodeURI(n.toString(!0)),t?.allowContributedOpeners){const o=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(r,{sourceUri:i,preferredOpenerId:o},Al.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:i},Al.None)}dispose(){this._validators.clear()}};K9=jB([CI(0,Es),CI(1,Ml)],K9);const Z2=At("editorWorkerService");var yl;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(yl||(yl={}));(function(s){function e(l,c){return c-l}s.compare=e;const t=Object.create(null);t[s.Error]=y(1715,"Error"),t[s.Warning]=y(1716,"Warning"),t[s.Info]=y(1717,"Info");function i(l){return t[l]||""}s.toString=i;const n=Object.create(null);n[s.Error]=y(1718,"Errors"),n[s.Warning]=y(1719,"Warnings"),n[s.Info]=y(1720,"Infos");function r(l){return n[l]||""}s.toStringPlural=r;function o(l){switch(l){case Wn.Error:return s.Error;case Wn.Warning:return s.Warning;case Wn.Info:return s.Info;case Wn.Ignore:return s.Hint}}s.fromSeverity=o;function a(l){switch(l){case s.Error:return Wn.Error;case s.Warning:return Wn.Warning;case s.Info:return Wn.Info;case s.Hint:return Wn.Ignore}}s.toSeverity=a})(yl||(yl={}));var QU;(function(s){function t(n){return i(n,!0)}s.makeKey=t;function i(n,r){const o=[""];return n.source?o.push(n.source.replace("¦","\\¦")):o.push(""),n.code?typeof n.code=="string"?o.push(n.code.replace("¦","\\¦")):o.push(n.code.value.replace("¦","\\¦")):o.push(""),n.severity!==void 0&&n.severity!==null?o.push(yl.toString(n.severity)):o.push(""),n.message&&r?o.push(n.message.replace("¦","\\¦")):o.push(""),n.startLineNumber!==void 0&&n.startLineNumber!==null?o.push(n.startLineNumber.toString()):o.push(""),n.startColumn!==void 0&&n.startColumn!==null?o.push(n.startColumn.toString()):o.push(""),n.endLineNumber!==void 0&&n.endLineNumber!==null?o.push(n.endLineNumber.toString()):o.push(""),n.endColumn!==void 0&&n.endColumn!==null?o.push(n.endColumn.toString()):o.push(""),o.push(""),o.join("¦")}s.makeKeyOptionalMessage=i})(QU||(QU={}));const U0=At("markerService");var Gve=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},JU=function(s,e){return function(t,i){e(t,i,s)}};let Y9=class extends pe{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new ne),this._suppressedRanges=new Br,this._markerDecorations=new Br,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new Kve(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===mt.inMemory||e.uri.scheme===mt.internal||e.uri.scheme===mt.vscode)&&this._markerService?.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri]))}_updateDecorations(e){let t=this._markerService.read({resource:e.model.uri,take:500});const i=this._suppressedRanges.get(e.model.uri);i&&(t=t.filter(n=>!si.some(i,r=>ie.areIntersectingOrTouching(r,n)))),e.update(t)&&this._onDidChangeMarker.fire(e.model)}};Y9=Gve([JU(0,So),JU(1,U0)],Y9);class Kve extends pe{constructor(e){super(),this.model=e,this._map=new Zse,this._register(lt(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=Ime(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const n=i.map(a=>this._map.get(a)),r=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(n,r);for(const a of i)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=ie.lift(t);if(t.severity===yl.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const n=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(n===1||i.endColumn>=n)return i;const r=e.getWordAtPosition(i.getStartPosition());r&&(i=new ie(i.startLineNumber,r.startColumn,i.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const n=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);n<i.endColumn&&(i=new ie(i.startLineNumber,n,i.endLineNumber,i.endColumn),t.startColumn=n)}return i}_createDecorationOption(e){let t,i,n,r,o;switch(e.severity){case yl.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",n=0;break;case yl.Info:t="squiggly-info",i=xv(Uhe),n=10,o={color:xv(Ole),position:1};break;case yl.Warning:t="squiggly-warning",i=xv(zhe),n=20,o={color:xv(Ple),position:1};break;case yl.Error:default:t="squiggly-error",i=xv(Whe),n=30,o={color:xv(Ble),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:wN.Right},minimap:o,zIndex:n,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}var Yve=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},eD=function(s,e){return function(t,i){e(t,i,s)}},Mv;function V_(s){return s.toString()}class Zve{constructor(e,t,i){this.model=e,this._modelEventListeners=new Ze,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(n=>i(e,n)))}dispose(){this._modelEventListeners.dispose()}}const Xve=Fa||Bt?1:2;class Qve{constructor(e,t,i,n,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=n,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}var Q1;let Z9=(Q1=class extends pe{constructor(e,t,i,n){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=n,this._onModelAdded=this._register(new ne),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new ne),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new ne),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){let i=Ar.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const g=parseInt(e.editor.tabSize,10);isNaN(g)||(i=g),i<1&&(i=1)}let n="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const g=parseInt(e.editor.indentSize,10);isNaN(g)||(n=Math.max(g,1))}let r=Ar.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let o=Xve;const a=e.eol;a===`\r
`?o=2:a===`
`&&(o=1);let l=Ar.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Ar.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let h=Ar.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let d=Ar.bracketPairColorizationOptions;return e.editor?.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(d={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:n,insertSpaces:r,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:h,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:tu===3||tu===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const n=typeof e=="string"?e:e.languageId;let r=this._modelCreationOptionsByLanguageAndResource[n+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:n,resource:t}),a=this._getEOL(t,n);r=Mv._readModelOptions({editor:o,eol:a},i),this._modelCreationOptionsByLanguageAndResource[n+t]=r}return r}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let n=0,r=i.length;n<r;n++){const o=i[n],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const h=t[l+c],d=this.getCreationOptions(l,c,a.model.isForSimpleWidget);Mv._setModelOptionsForModel(a.model,d,h)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&Oa(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(V_(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(V_(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(V_(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,n)=>i.time-n.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,n){const r=this.getCreationOptions(t,i,n),o=this._instantiationService.createInstance(t9,e,t,r,i);if(i&&this._disposedModels.has(V_(i))){const c=this._removeDisposedModel(i),h=this._undoRedoService.getElements(i),d=this._getSHA1Computer(),g=d.canComputeSHA1(o)?d.computeSHA1(o)===c.sha1:!1;if(g||c.sharesUndoRedoStack){for(const _ of h.past)Zf(_)&&_.matchesResource(i)&&_.setModel(o);for(const _ of h.future)Zf(_)&&_.matchesResource(i)&&_.setModel(o);this._undoRedoService.setElementsValidFlag(i,!0,_=>Zf(_)&&_.matchesResource(i)),g&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=V_(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new Zve(o,c=>this._onWillDispose(c),(c,h)=>this._onDidChangeLanguage(c,h));return this._models[a]=l,l}createModel(e,t,i,n=!1){let r;return t?r=this._createModelData(e,t,i,n):r=this._createModelData(e,ru,i,n),this._onModelAdded.fire(r.model),r.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,n=t.length;i<n;i++){const r=t[i];e.push(this._models[r].model)}return e}getModel(e){const t=V_(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===mt.file||e.scheme===mt.vscodeRemote||e.scheme===mt.vscodeUserData||e.scheme===mt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=V_(e.uri),i=this._models[t],n=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(n||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const h of c.past)Zf(h)&&h.matchesResource(e.uri)&&(r=!0,o+=h.heapSize(e.uri),h.setModel(e.uri));for(const h of c.future)Zf(h)&&h.matchesResource(e.uri)&&(r=!0,o+=h.heapSize(e.uri),h.setModel(e.uri))}}const a=Mv.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(r)if(!n&&(o>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>Zf(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new Qve(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),n,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!n){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,n=e.getLanguageId(),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(n,e.uri,e.isForSimpleWidget);Mv._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new X9}},Mv=Q1,Q1.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,Q1);Z9=Mv=Yve([eD(0,cn),eD(1,aK),eD(2,wB),eD(3,Zt)],Z9);const DA=class DA{canComputeSHA1(e){return e.getValueLength()<=DA.MAX_MODEL_SIZE}computeSHA1(e){const t=new y3,i=e.createSnapshot();let n;for(;n=i.read();)t.update(n);return t.digest()}};DA.MAX_MODEL_SIZE=10*1024*1024;let X9=DA;var Q9;(function(s){s[s.PRESERVE=0]="PRESERVE",s[s.LAST=1]="LAST"})(Q9||(Q9={}));const _X={Quickaccess:"workbench.contributions.quickaccess"};class Jve{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),lt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return V6([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}or.add(_X.Quickaccess,new Jve);var ewe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},eq=function(s,e){return function(t,i){e(t,i,s)}};let J9=class extends pe{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=or.as(_X.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0,this._register(lt(()=>{for(const i of this.mapProviderToDescriptor.values())KA(i)&&i.dispose();this.visibleQuickAccess?.picker.dispose()}))}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){const[n,r]=this.getOrInstantiateProvider(e,i?.enabledProviderPrefixes),o=this.visibleQuickAccess,a=o?.descriptor;if(o&&r&&a===r){e!==r.prefix&&!i?.preserveValue&&(o.picker.value=e),this.adjustValueSelection(o.picker,r,i);return}if(r&&!i?.preserveValue){let b;if(o&&a&&a!==r){const C=o.value.substr(a.prefix.length);C&&(b=`${r.prefix}${C}`)}if(!b){const C=n?.defaultFilterValue;C===Q9.LAST?b=this.lastAcceptedPickerValues.get(r):typeof C=="string"&&(b=`${r.prefix}${C}`)}typeof b=="string"&&(e=b)}const l=o?.picker?.valueSelection,c=o?.picker?.value,h=new Ze,d=h.add(this.quickInputService.createQuickPick({useSeparators:!0}));d.value=e,this.adjustValueSelection(d,r,i),d.placeholder=i?.placeholder??r?.placeholder,d.quickNavigate=i?.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!o,(typeof i?.itemActivation=="number"||i?.quickNavigateConfiguration)&&(d.itemActivation=i?.itemActivation??hd.SECOND),d.contextKey=r?.contextKey,d.filterValue=b=>b.substring(r?r.prefix.length:0);let g;t&&(g=new QA,h.add(Ie.once(d.onWillAccept)(b=>{b.veto(),d.hide()}))),h.add(this.registerPickerListeners(d,n,r,e,i));const _=h.add(new SC);if(n&&h.add(n.provide(d,_.token,i?.providerOptions)),Ie.once(d.onDidHide)(()=>{d.selectedItems.length===0&&_.cancel(),h.dispose(),g?.complete(d.selectedItems.slice(0))}),d.show(),l&&c===e&&(d.valueSelection=l),t)return g?.p}adjustValueSelection(e,t,i){let n;i?.preserveValue?n=[e.value.length,e.value.length]:n=[t?.prefix.length??0,e.value.length],e.valueSelection=n}registerPickerListeners(e,t,i,n,r){const o=new Ze,a=this.visibleQuickAccess={picker:e,descriptor:i,value:n};return o.add(lt(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,r?.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:r?.enabledProviderPrefixes,preserveValue:!0,providerOptions:r?.providerOptions}):a.value=l})),i&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),o}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!t?.includes(i.prefix))return[void 0,void 0];let n=this.mapProviderToDescriptor.get(i);return n||(n=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,n)),[n,i]}};J9=ewe([eq(0,z0),eq(1,Zt)],J9);const bX={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};class AC extends Ud{get onChange(){return this._onChange.event}get onKeyDown(){return this._onKeyDown.event}constructor(e){super(),this._onChange=this._register(new ne),this._onKeyDown=this._register(new ne),this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Gt.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(fh().setupManagedHover(e.hoverDelegate??uu("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(this.enabled){if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)}})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...Gt.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...Gt.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1)),this.domNode.classList.remove("disabled")}disable(){this.domNode.setAttribute("aria-disabled",String(!0)),this.domNode.classList.add("disabled")}setTitle(e){this._hover.update(e),this.domNode.setAttribute("aria-label",e)}}const JF=class JF extends Ud{constructor(e,t,i){super(),this.checkbox=e,this.domNode=t,this.styles=i,this._onChange=this._register(new ne),this.onChange=this._onChange.event,this.applyStyles()}get enabled(){return this.checkbox.enabled}enable(){this.checkbox.enable(),this.applyStyles(!0)}disable(){this.checkbox.disable(),this.applyStyles(!1)}setTitle(e){this.checkbox.setTitle(e)}applyStyles(e=this.enabled){this.domNode.style.color=(e?this.styles.checkboxForeground:this.styles.checkboxDisabledForeground)||"",this.domNode.style.backgroundColor=(e?this.styles.checkboxBackground:this.styles.checkboxDisabledBackground)||"",this.domNode.style.borderColor=(e?this.styles.checkboxBorder:this.styles.checkboxDisabledBackground)||"";const t=this.styles.size||18;this.domNode.style.width=this.domNode.style.height=this.domNode.style.fontSize=`${t}px`,this.domNode.style.fontSize=`${t-2}px`}};JF.CLASS_NAME="monaco-checkbox";let t2=JF;class vX extends t2{constructor(e,t,i){const n=new AC({title:e,isChecked:t,icon:Ue.check,actionClassName:t2.CLASS_NAME,hoverDelegate:i.hoverDelegate,...bX});super(n,n.domNode,i),this._register(n),this._register(this.checkbox.onChange(r=>{this.applyStyles(),this._onChange.fire(r)}))}get checked(){return this.checkbox.checked}set checked(e){this.checkbox.checked=e,this.applyStyles()}applyStyles(e){this.checkbox.checked?this.checkbox.setIcon(Ue.check):this.checkbox.setIcon(void 0),super.applyStyles(e)}}class wX extends t2{constructor(e,t,i){let n;switch(t){case!0:n=Ue.check;break;case"partial":n=Ue.dash;break;case!1:n=void 0;break}const r=new AC({title:e,isChecked:t===!0,icon:n,actionClassName:vX.CLASS_NAME,hoverDelegate:i.hoverDelegate,...bX});super(r,r.domNode,i),this._state=t,this._register(r),this._register(this.checkbox.onChange(o=>{this._state=this.checkbox.checked,this.applyStyles(),this._onChange.fire(o)}))}get checked(){return this._state}set checked(e){this._state!==e&&(this._state=e,this.checkbox.checked=e===!0,this.applyStyles())}applyStyles(e){switch(this._state){case!0:this.checkbox.setIcon(Ue.check);break;case"partial":this.checkbox.setIcon(Ue.dash);break;case!1:this.checkbox.setIcon(void 0);break}super.applyStyles(e)}}var twe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class CX{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}twe([En],CX.prototype,"toString",null);const iwe=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function nwe(s){const e=[];let t=0,i;for(;i=iwe.exec(s);){i.index-t>0&&e.push(s.substring(t,i.index));const[,n,r,,o]=i;o?e.push({label:n,href:r,title:o}):e.push({label:n,href:r}),t=i.index+i[0].length}return t<s.length&&e.push(s.substring(t)),new CX(e)}const S5={},swe=new TZ("quick-input-button-icon-");function rwe(s){if(!s)return;let e;const t=s.dark.toString();return S5[t]?e=S5[t]:(e=swe.nextId(),o7(`.${e}, .hc-light .${e}`,`background-image: ${Od(s.light||s.dark)}`),o7(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Od(s.dark)}`),S5[t]=e),e}function zw(s,e,t){let i=s.iconClass||rwe(s.iconPath);return s.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:s.tooltip||"",class:i,enabled:!0,run:t}}function owe(s,e,t){Pr(e);const i=nwe(s);let n=0;for(const r of i.nodes)if(typeof r=="string")e.append(...$1(r));else{let o=r.title;!o&&r.href.startsWith("command:")?o=y(1754,"Click to execute command '{0}'",r.href.substring(8)):o||(o=r.href);const a=ot("a",{href:r.href,title:o,tabIndex:n++},r.label);a.style.textDecoration="underline";const l=_=>{ose(_)&&ni.stop(_,!0),t.callback(r.href)},c=t.disposables.add(new gi(a,Re.CLICK)).event,h=t.disposables.add(new gi(a,Re.KEY_DOWN)).event,d=Ie.chain(h,_=>_.filter(b=>{const C=new Mi(b);return C.equals(10)||C.equals(3)}));t.disposables.add(Co.addTarget(a));const g=t.disposables.add(new gi(a,ji.Tap)).event;Ie.any(c,g,d)(l,null,t.disposables),e.appendChild(a)}}var awe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},tq=function(s,e){return function(t,i){e(t,i,s)}};const yX="inQuickInput",lwe=new et(yX,!1,y(1731,"Whether keyboard focus is inside the quick input control")),VR=Kt.has(yX),cwe="quickInputAlignment",uwe=new et(cwe,"top",y(1732,"The alignment of the quick input")),i2="quickInputType",hwe=new et(i2,void 0,y(1733,"The type of the currently visible quick input")),SX="cursorAtEndOfQuickInputBox",dwe=new et(SX,!1,y(1734,"Whether the cursor in the quick input is at the end of the input box")),fwe=Kt.has(SX),e8={iconClass:Gt.asClassName(Ue.quickInputBack),tooltip:y(1735,"Back")},NA=class NA extends pe{constructor(e){super(),this.ui=e,this._visible=xt("visible",!1),this._widgetUpdated=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=NA.noPromptMessage,this._severity=Wn.Ignore,this.onDidTriggerButtonEmitter=this._register(new ne),this.onDidHideEmitter=this._register(new ne),this.onWillHideEmitter=this._register(new ne),this.onDisposeEmitter=this._register(new ne),this.visibleDisposables=this._register(new Ze),this.onDidHide=this.onDidHideEmitter.event}get visible(){return this._visible.get()}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Nd;this._ignoreFocusOut=e&&!Nd,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===e8),this._rightButtons=e.filter(t=>t!==e8&&t.location!==gI.Inline),this._inlineButtons=e.filter(t=>t.location===gI.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this._visible.set(!0,void 0),this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=Xx.Other){this._visible.set(!1,void 0),this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=Xx.Other){this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Pr(this.ui.widget,this._widget):Pr(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new vg,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const n=this._leftButtons.map((a,l)=>zw(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.leftActionBar.push(n,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this._rightButtons.map((a,l)=>zw(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.rightActionBar.push(r,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const o=this._inlineButtons.map((a,l)=>zw(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.inlineActionBar.push(o,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const n=this.toggles?.filter(r=>r instanceof AC)??[];this.ui.inputBox.toggles=n}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,Pr(this.ui.message),owe(i,this.ui.message,{callback:n=>{this.ui.linkOpenerDelegate(n)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?y(1737,"{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Wn.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};NA.noPromptMessage=y(1736,"Press 'Enter' to confirm your input or 'Escape' to cancel");let n2=NA;const IA=class IA extends n2{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new ne),this.onWillAcceptEmitter=this._register(new ne),this.onDidAcceptEmitter=this._register(new ne),this.onDidCustomEmitter=this._register(new ne),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=hd.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new ne),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new ne),this.onDidTriggerItemButtonEmitter=this._register(new ne),this.onDidTriggerSeparatorButtonEmitter=this._register(new ne),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new w2,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?tbe:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get okLabel(){return this._okLabel??y(1739,"OK")}set okLabel(e){this._okLabel=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus($i.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&vs(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany&&!e.some(i=>i.pickable===!1)){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&vs(e,this._selectedItems,(i,n)=>i===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(SP(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&vs(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return ue(this.ui.container,Re.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Mi(e),i=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let n=this.ariaLabel;!n&&i.inputBox&&(n=this.placeholder,this.title&&(n=n?`${n} - ${this.title}`:this.title),n||(n=IA.DEFAULT_ARIA_LABEL)),this.ui.list.ariaLabel!==n&&(this.ui.list.ariaLabel=n??null),this.ui.inputBox.ariaLabel!==n&&(this.ui.inputBox.ariaLabel=n??"input"),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case hd.NONE:this._itemActivation=hd.FIRST;break;case hd.SECOND:this.ui.list.focus($i.Second),this._itemActivation=hd.FIRST;break;case hd.LAST:this.ui.list.focus($i.Last),this._itemActivation=hd.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.ok.label=this.okLabel||"",this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus($i.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(e??!1))}};IA.DEFAULT_ARIA_LABEL=y(1738,"Type to narrow down results.");let PL=IA,gwe=class extends n2{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new ne),this.onDidAcceptEmitter=this._register(new ne),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}get prompt(){return this._prompt}set prompt(e){this._prompt=e,this.noValidationMessage=e?y(1740,"{0} (Press 'Enter' to confirm or 'Escape' to cancel)",e):n2.noPromptMessage,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}accept(){this.onDidAcceptEmitter.fire()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password);let t=this.ariaLabel;!t&&e.inputBox&&(t=this.placeholder?this.title?`${this.placeholder} - ${this.title}`:this.placeholder:this.title?this.title:"input"),this.ui.inputBox.ariaLabel!==t&&(this.ui.inputBox.ariaLabel=t||"input")}},t8=class extends Gx{constructor(e,t){super("mouse",void 0,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){const t=(qn(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};t8=awe([tq(0,cn),tq(1,H2)],t8);xe.white.toString(),xe.white.toString();const mwe=Object.freeze({allowedTags:{override:["b","i","u","code","span"]},allowedAttributes:{override:["class"]}});class i8 extends pe{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new ne),this._onDidEscape=this._register(new ne),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,n=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=n||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this.enabled=!t.disabled,this._register(Co.addTarget(this._element)),[Re.CLICK,ji.Tap].forEach(r=>{this._register(ue(this._element,r,o=>{if(!this.enabled){ni.stop(o);return}this._onDidClick.fire(o)}))}),this._register(ue(this._element,Re.KEY_DOWN,r=>{const o=new Mi(r);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(r),a=!0):o.equals(9)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&ni.stop(o,!0)})),this._register(ue(this._element,Re.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(ue(this._element,Re.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(iC(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of $1(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const n=document.createElement("span");n.textContent=i,t.push(n)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||Fw(this._label)&&Fw(e)&&o1e(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(Fw(e)){const n=FB(e,void 0,document.createElement("span"));n.dispose();const r=n.element.querySelector("p")?.innerHTML;r?YZ(t,r,mwe):Pr(t)}else this.options.supportIcons?Pr(t,...this.getContentElements(e)):t.textContent=e;let i="";typeof this.options.title=="string"?i=this.options.title:this.options.title&&(i=S0e(e)),this.setTitle(i),this._setAriaLabel(),this._label=e}get label(){return this._label}_setAriaLabel(){typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):typeof this.options.title=="string"&&this._element.setAttribute("aria-label",this.options.title)}set icon(e){this._setAriaLabel();const t=Array.from(this._element.classList).filter(i=>i.startsWith("codicon-"));this._element.classList.remove(...t),this._element.classList.add(...Gt.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(fh().setupManagedHover(this.options.hoverDelegate??uu("element"),this._element,e)):this._hover&&this._hover.update(e)}}class iq extends pe{constructor(e,t,i){super(),this.options=t,this.styles=i,this.count=0,this.hover=this._register(new qs),this.element=Qe(e,ot(".monaco-count-badge")),this._register(lt(()=>e.removeChild(this.element))),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0),this.updateHover()}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.updateHover(),this.render()}updateHover(){this.titleFormat!==""&&!this.hover.value?this.hover.value=fh().setupDelayedHoverAtMouse(this.element,()=>({content:d3(this.titleFormat,this.count),appearance:{compact:!0}})):this.titleFormat===""&&this.hover.value&&(this.hover.value=void 0)}render(){this.element.textContent=d3(this.countFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const nq="done",sq="active",L5="infinite",x5="infinite-long-running",rq="discrete",AA=class AA extends pe{constructor(e,t){super(),this.progressSignal=this._register(new qs),this.workedVal=0,this.showDelayedScheduler=this._register(new Or(()=>kG(this.element),0)),this.longRunningScheduler=this._register(new Or(()=>this.infiniteLongRunning(),AA.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(sq,L5,x5,rq),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(nq),this.element.classList.contains(L5)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(rq,nq,x5),this.element.classList.add(sq,L5),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(x5)}getContainer(){return this.element}};AA.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let n8=AA;const pwe=y(2,"Match Case"),_we=y(3,"Match Whole Word"),bwe=y(4,"Use Regular Expression");class vwe extends AC{constructor(e){super({icon:Ue.caseSensitive,title:pwe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??uu("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class wwe extends AC{constructor(e){super({icon:Ue.wholeWord,title:_we+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??uu("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Cwe extends AC{constructor(e){super({icon:Ue.regex,title:bwe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??uu("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}function ywe(s,e,t){const i=t??document.createElement("div");return i.textContent=s,i}function Swe(s,e,t){const i=t??document.createElement("div");return i.textContent="",LX(i,xwe(s),e?.actionHandler,e?.renderCodeSegments),i}class Lwe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function LX(s,e,t,i){let n;if(e.type===2)n=document.createTextNode(e.content||"");else if(e.type===3)n=document.createElement("b");else if(e.type===4)n=document.createElement("i");else if(e.type===7&&i)n=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");t.disposables.add(Cr(r,"click",o=>{t.callback(String(e.index),o)})),n=r}else e.type===8?n=document.createElement("br"):e.type===1&&(n=s);n&&s!==n&&s.appendChild(n),n&&Array.isArray(e.children)&&e.children.forEach(r=>{LX(n,r,t,i)})}function xwe(s,e){const t={type:1,children:[]};let i=0,n=t;const r=[],o=new Lwe(s);for(;!o.eos();){let a=o.next();const l=a==="\\"&&s8(o.peek())!==0;if(l&&(a=o.next()),!l&&kwe(a)&&a===o.peek()){o.advance(),n.type===2&&(n=r.pop());const c=s8(a);if(n.type===c||n.type===5&&c===6)n=r.pop();else{const h={type:c,children:[]};c===5&&(h.index=i,i++),n.children.push(h),r.push(n),n=h}}else if(a===`
`)n.type===2&&(n=r.pop()),n.children.push({type:8});else if(n.type!==2){const c={type:2,content:a};n.children.push(c),r.push(n),n=c}else n.content+=a}return n.type===2&&(n=r.pop()),t}function kwe(s,e){return s8(s)!==0}function s8(s,e){switch(s){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return 0;default:return 0}}class Ewe{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class Twe{constructor(e=new Set,t=10){this._history=e,this._limit=t,this._onChange(),this._history.onDidChange&&(this._disposable=this._history.onDidChange(()=>this._onChange()))}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new Ewe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;if(e.length>this._limit){const t=e.slice(e.length-this._limit);this._history.replace?this._history.replace(t):this._history=new Set(t)}}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}dispose(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0)}}const Av=ot;class Dwe extends Ud{get onDidChange(){return this._onDidChange.event}get onDidHeightChange(){return this._onDidHeightChange.event}constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this.hover=this._register(new qs),this._onDidChange=this._register(new ne),this._onDidHeightChange=this._register(new ne),this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Qe(e,Av(".monaco-inputbox.idle"));const n=this.options.flexibleHeight?"textarea":"input",r=Qe(this.element,Av(".ibwrapper"));if(this.input=Qe(r,Av(n+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Qe(r,Av("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new vue(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Qe(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const o=this._register(new gi(e.ownerDocument,"selectionchange")),a=Ie.filter(o.event,()=>e.ownerDocument.getSelection()?.anchorNode===r);this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new kd(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover.value||(this.hover.value=this._register(fh().setupDelayedHoverAtMouse(this.input,()=>({content:this.tooltip,appearance:{compact:!0}}))))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:T3(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return yP(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&Oa(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${pg(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=CP(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:n=>{if(!this.message)return null;e=Qe(n,Av(".monaco-inputbox-container")),t();const r=Av("span.monaco-inputbox-message");this.message.formatContent?Swe(this.message.content,void 0,r):ywe(this.message.content,void 0,r),r.classList.add(this.classForType(this.message.type));const o=this.stylesForType(this.message.type);return r.style.backgroundColor=o.background??"",r.style.color=o.foreground??"",r.style.border=o.border?`1px solid ${o.border}`:"",Qe(e,r),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=y(9,"Error: {0}",this.message.content):this.message.type===2?i=y(10,"Warning: {0}",this.message.content):i=y(11,"Info: {0}",this.message.content),Rx(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText=" ",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",n=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${pg(n,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=T3(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,n=t.selectionEnd,r=t.value;i!==null&&n!==null&&(this.value=r.substr(0,i)+e+r.substr(n),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}class Nwe extends Dwe{constructor(e,t,i){const n=y(12," or {0} for history","⇅"),r=y(13," ({0} for history)","⇅");super(e,t,i),this._onDidFocus=this._register(new ne),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new ne),this.onDidBlur=this._onDidBlur.event,this.history=this._register(new Twe(i.history,100));const o=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(n)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?n:r,l=this.placeholder+a;i.showPlaceholderOnFocus&&!yP(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(r)||a(n)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",EN(this.value?this.value:y(14,"Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,EN(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const Iwe=y(1,"input");class Awe extends Ud{get onDidOptionChange(){return this._onDidOptionChange.event}get onKeyDown(){return this._onKeyDown.event}get onMouseDown(){return this._onMouseDown.event}get onCaseSensitiveKeyDown(){return this._onCaseSensitiveKeyDown.event}get onRegexKeyDown(){return this._onRegexKeyDown.event}constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new qs),this.additionalToggles=[],this._onDidOptionChange=this._register(new ne),this._onKeyDown=this._register(new ne),this._onMouseDown=this._register(new ne),this._onInput=this._register(new ne),this._onKeyUp=this._register(new ne),this._onCaseSensitiveKeyDown=this._register(new ne),this._onRegexKeyDown=this._register(new ne),this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Iwe,this.showCommonFindToggles=!!i.showCommonFindToggles;const n=i.appendCaseSensitiveLabel||"",r=i.appendWholeWordsLabel||"",o=i.appendRegexLabel||"",a=!!i.flexibleHeight,l=!!i.flexibleWidth,c=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Nwe(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:i.inputBoxStyles,history:i.history}));const h=this._register(UB());if(this.showCommonFindToggles){this.regex=this._register(new Cwe({appendTitle:o,isChecked:!1,hoverDelegate:h,...i.toggleStyles})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new wwe({appendTitle:r,isChecked:!1,hoverDelegate:h,...i.toggleStyles})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new vwe({appendTitle:n,isChecked:!1,hoverDelegate:h,...i.toggleStyles})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)}));const d=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const _=d.indexOf(this.domNode.ownerDocument.activeElement);if(_>=0){let b=-1;g.equals(17)?b=(_+1)%d.length:g.equals(15)&&(_===0?b=d.length-1:b=_-1),g.equals(9)?(d[_].blur(),this.inputBox.focus()):b>=0&&d[b].focus(),ni.stop(g,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(ue(this.inputBox.inputElement,"compositionstart",d=>{this.imeSessionInProgress=!0})),this._register(ue(this.inputBox.inputElement,"compositionend",d=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,d=>this._onKeyDown.fire(d)),this.onkeyup(this.inputBox.inputElement,d=>this._onKeyUp.fire(d)),this.oninput(this.inputBox.inputElement,d=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,d=>this._onMouseDown.fire(d))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Ze;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((t,i)=>t+i.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const Rwe=ot;class Mwe extends pe{constructor(e,t,i){super(),this.parent=e,this.onDidChange=r=>this.findInput.onDidChange(r),this.container=Qe(this.parent,Rwe(".quick-input-box")),this.findInput=this._register(new Awe(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const n=this.findInput.inputBox.inputElement;n.role="textbox",n.ariaHasPopup="menu",n.ariaAutoComplete="list"}get onKeyDown(){return this.findInput.onKeyDown}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}get ariaLabel(){return this.findInput.inputBox.inputElement.getAttribute("aria-label")||""}set ariaLabel(e){this.findInput.inputBox.inputElement.setAttribute("aria-label",e)}hasFocus(){return this.findInput.inputBox.hasFocus()}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.findInput.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Wn.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===Wn.Info?1:e===Wn.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===Wn.Info?1:e===Wn.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class G1 extends pe{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=t?.supportIcons??!1,this.domNode=Qe(e,ot("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",n){e||(e=""),n&&(e=G1.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&Oa(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const i of this.highlights){if(i.end===i.start)continue;if(t<i.start){const o=this.text.substring(t,i.start);this.supportIcons?e.push(...$1(o)):e.push(o),t=i.start}const n=this.text.substring(t,i.end),r=ot("span.highlight",void 0,...this.supportIcons?$1(n):[n]);i.extraClasses&&r.classList.add(...i.extraClasses),e.push(r),t=i.end}if(t<this.text.length){const i=this.text.substring(t);this.supportIcons?e.push(...$1(i)):e.push(i)}if(Pr(this.domNode,...e),!this.customHover&&this.title!==""){const i=this.options?.hoverDelegate??uu("mouse");this.customHover=this._register(fh().setupManagedHover(i,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,n=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{n=r===`\r
`?-1:0,o+=i;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=n),a.end>=o&&(a.end+=n));return i+=n,"⏎"})}}class RS{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||Oa(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class r8 extends pe{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new RS(Qe(e,ot(".monaco-icon-label")))),this.labelContainer=Qe(this.domNode.element,ot(".monaco-icon-label-container")),this.nameContainer=Qe(this.labelContainer,ot("span.monaco-icon-name-container")),t?.supportHighlights||t?.supportIcons?this.nameNode=this._register(new Bwe(this.nameContainer,!!t.supportIcons)):this.nameNode=new Owe(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??uu("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const n=["monaco-icon-label"],r=["monaco-icon-label-container"];let o="";i&&(i.extraClasses&&n.push(...i.extraClasses),i.italic&&n.push("italic"),i.strikethrough&&n.push("strikethrough"),i.disabledCommand&&r.push("disabled"),i.title&&(typeof i.title=="string"?o+=i.title:o+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i?.iconPath){let l;!a||!qn(a)?(l=ot(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=Od(i?.iconPath),l.style.backgroundRepeat="no-repeat",l.style.backgroundPosition="center",l.style.backgroundSize="contain"}else a&&a.remove();if(this.domNode.classNames=n,this.domNode.element.setAttribute("aria-label",o),this.labelContainer.classList.value="",this.labelContainer.classList.add(...r),this.setupHover(i?.descriptionTitle?this.labelContainer:this.element,i?.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof G1?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i?.labelEscapeNewLines),this.setupHover(l.element,i?.descriptionTitle)):(l.textContent=t&&i?.labelEscapeNewLines?G1.escapeNewLines(t,[]):t||"",this.setupHover(l.element,i?.descriptionTitle||""),l.empty=!t)}if(i?.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=i?.suffix??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}let n=e;if(this.creationOptions?.hoverTargetOverride){if(!zs(e,this.creationOptions.hoverTargetOverride))throw new Error("hoverTargetOverrride must be an ancestor of the htmlElement");n=this.creationOptions.hoverTargetOverride}const r=fh().setupManagedHover(this.hoverDelegate,n,t);r&&this.customHovers.set(e,r)}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new RS(use(this.nameContainer,ot("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new RS(Qe(e.element,ot("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const e=this._register(new RS(Qe(this.labelContainer,ot("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new G1(Qe(e.element,ot("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new RS(Qe(e.element,ot("span.label-description"))))}return this.descriptionNode}}class Owe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Oa(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.textContent="",this.container.classList.remove("multiple"),this.singleLabel=Qe(this.container,ot("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.textContent="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const n=e[i],r=t?.domId&&`${t?.domId}_${i}`;Qe(this.container,ot("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},n)),i<e.length-1&&Qe(this.container,ot("span.label-separator",void 0,t?.separator||"/"))}}}}function Pwe(s,e,t){if(!t)return;let i=0;return s.map(n=>{const r={start:i,end:i+n.length},o=t.map(a=>Ir.intersect(r,a)).filter(a=>!Ir.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=r.end+e.length,o})}class Bwe extends pe{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Oa(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.textContent="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new G1(Qe(this.container,ot("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.textContent="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=t?.separator||"/",n=Pwe(e,i,t?.matches);for(let r=0;r<e.length;r++){const o=e[r],a=n?n[r]:void 0,l=t?.domId&&`${t?.domId}_${r}`,c=ot("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new G1(Qe(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t?.labelEscapeNewLines),r<e.length-1&&Qe(c,ot("span.label-separator",void 0,i))}}}}const tD=ot;class GB extends pe{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const n=this.options.keybindingLabelForeground;this.domNode=Qe(e,tD(".monaco-keybinding")),n&&(this.domNode.style.color=n),this.hover=this._register(fh().setupManagedHover(uu("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}set(e,t){this.didEverRender&&this.keybinding===e&&GB.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)Qe(this.domNode,tD("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){oh(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const n=HB.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,n.ctrlKey,!!i?.ctrlKey,n.separator),t.shiftKey&&this.renderKey(e,n.shiftKey,!!i?.shiftKey,n.separator),t.altKey&&this.renderKey(e,n.altKey,!!i?.altKey,n.separator),t.metaKey&&this.renderKey(e,n.metaKey,!!i?.metaKey,n.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!i?.keyCode,"")}renderKey(e,t,i,n){Qe(e,this.createKeyElement(t,i?".highlight":"")),n&&Qe(e,tD("span.monaco-keybinding-key-separator",void 0,n))}renderUnbound(e){Qe(e,this.createKeyElement(y(15,"Unbound")))}createKeyElement(e,t=""){const i=tD("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Oa(e.firstPart,t.firstPart)&&Oa(e.chordPart,t.chordPart)}}var _l;(function(s){s[s.Expanded=0]="Expanded",s[s.Collapsed=1]="Collapsed",s[s.PreserveOrExpanded=2]="PreserveOrExpanded",s[s.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(_l||(_l={}));var N1;(function(s){s[s.Unknown=0]="Unknown",s[s.Twistie=1]="Twistie",s[s.Element=2]="Element",s[s.Filter=3]="Filter"})(N1||(N1={}));class Sl extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class KB{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function X2(s){return!!s&&s.visibility!==void 0}function y0(s){switch(s){case!0:return 1;case!1:return 0;default:return s}}function k5(s){return typeof s.collapsible=="boolean"}class Fwe{constructor(e,t,i={}){this.user=e,this.rootRef=[],this.eventBufferer=new w2,this._onDidSpliceModel=new ne,this.onDidSpliceModel=this._onDidSpliceModel.event,this._onDidSpliceRenderedNodes=new ne,this.onDidSpliceRenderedNodes=this._onDidSpliceRenderedNodes.event,this._onDidChangeCollapseState=new ne,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new ne,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this.refilterDelayer=new L2(cG),this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.allowNonCollapsibleParents=i.allowNonCollapsibleParents??!1,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=si.empty(),n={}){if(e.length===0)throw new Sl(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,n=si.empty(),r,o=r.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,n,r);const l=[...n],c=t[t.length-1],h=new tg({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map(C=>e.getId(C.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,r);const d=t.slice(0,-1),g=(C,S,E)=>{if(o>0)for(let x=0;x<E;x++)C--,S--,this.spliceSmart(e,[...d,C,0],Number.MAX_SAFE_INTEGER,l[S].children,r,o-1)};let _=Math.min(a.children.length,c+i),b=l.length;for(const C of h.changes.sort((S,E)=>E.originalStart-S.originalStart))g(_,b,_-(C.originalStart+C.originalLength)),_=C.originalStart,b=C.modifiedStart-c,this.spliceSimple([...d,_],C.originalLength,si.slice(l,b,b+C.modifiedLength),r);g(_,b,_)}spliceSimple(e,t,i=si.empty(),{onDidCreateNode:n,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:h}=this.getParentNodeWithListIndex(e),d=[],g=si.map(i,A=>this.createTreeNode(A,a,a.visible?1:0,c,d,n)),_=e[e.length-1];let b=0;for(let A=_;A>=0&&A<a.children.length;A--){const P=a.children[A];if(P.visible){b=P.visibleChildIndex;break}}const C=[];let S=0,E=0;for(const A of g)C.push(A),E+=A.renderNodeCount,A.visible&&(A.visibleChildIndex=b+S++);const x=eN(a.children,_,t,C);o?a.lastDiffIds?eN(a.lastDiffIds,_,t,C.map(A=>o.getId(A.element).toString())):a.lastDiffIds=a.children.map(A=>o.getId(A.element).toString()):a.lastDiffIds=void 0;let T=0;for(const A of x)A.visible&&T++;if(T!==0)for(let A=_+C.length;A<a.children.length;A++){const P=a.children[A];P.visible&&(P.visibleChildIndex-=T)}if(a.visibleChildrenCount+=S-T,x.length>0&&r){const A=P=>{r(P),P.children.forEach(A)};x.forEach(A)}if(c&&h){const A=x.reduce((P,O)=>P+(O.visible?O.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,E-A),this._onDidSpliceRenderedNodes.fire({start:l,deleteCount:A,elements:d})}this._onDidSpliceModel.fire({insertedNodes:C,deletedNodes:x});let N=a;for(;N;){if(N.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}N=N.parent}}rerender(e){if(e.length===0)throw new Sl(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this._onDidSpliceRenderedNodes.fire({start:i,deleteCount:1,elements:[t]})}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,n))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsed);const r={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,n,r,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!k5(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,i,n){const r=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this._onDidSpliceRenderedNodes.fire({start:t+1,deleteCount:l,elements:a.slice(1)}),r}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(k5(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!k5(t)&&t.recursive)for(const r of e.children)n=this._setNodeCollapseState(r,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this._onDidSpliceRenderedNodes.fire({start:0,deleteCount:e,elements:t}),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,n&&r.push(a);const c=e.children||si.empty(),h=n&&l!==0&&!a.collapsed;let d=0,g=1;for(const _ of c){const b=this.createTreeNode(_,a,l,h,r,o);a.children.push(b),g+=b.renderNodeCount,b.visible&&(b.visibleChildIndex=d++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=d,a.visible=l===2?d>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=g):(a.renderNodeCount=0,n&&r.pop()),o?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,i,n&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):X2(i)?(e.filterData=i.data,y0(i.visibility)):(e.filterData=void 0,y0(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...n]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new Sl(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Sl(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:i,revealed:n,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Sl(this.user,"Invalid tree location");for(let l=0;l<o;l++)i+=t.children[l].renderNodeCount;return n=n&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:n,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],i+1,n,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:xee(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class Vwe extends j2{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function E5(s){return s instanceof j2?new Vwe(s):s}class Hwe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=pe.None,this.disposables=new Ze}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(E5(e),t)}onDragOver(e,t,i,n,r,o=!0){const a=this.dnd.onDragOver(E5(e),t&&t.element,i,n,r),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=v3(()=>{const _=this.modelProvider(),b=_.getNodeLocation(t);_.isCollapsed(b)&&_.setCollapsed(b,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const _=typeof a=="boolean"?a:a.accept,b=typeof a=="boolean"?void 0:a.effect;return{accept:_,effect:b,feedback:[i]}}return a}if(a.bubble===1){const _=this.modelProvider(),b=_.getNodeLocation(t),C=_.getParentNodeLocation(b),S=_.getNode(C),E=C&&_.getListIndex(C);return this.onDragOver(e,S,E,n,r,!1)}const c=this.modelProvider(),h=c.getNodeLocation(t),d=c.getListIndex(h),g=c.getListRenderCount(h);return{...a,feedback:Ko(d,d+g)}}drop(e,t,i,n,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(E5(e),t&&t.element,i,n,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function Wwe(s,e,t){return t&&{...t,identityProvider:t.identityProvider&&{getId(i){return t.identityProvider.getId(i.element)}},dnd:t.dnd&&e.add(new Hwe(s,t.dnd)),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent(i){return t.multipleSelectionController.isSelectionSingleChangeEvent({...i,element:i.element})},isSelectionRangeChangeEvent(i){return t.multipleSelectionController.isSelectionRangeChangeEvent({...i,element:i.element})}},accessibilityProvider:t.accessibilityProvider&&{...t.accessibilityProvider,getSetSize(i){const n=s(),r=n.getNodeLocation(i),o=n.getParentNodeLocation(r);return n.getNode(o).visibleChildrenCount},getPosInSet(i){return i.visibleChildIndex+1},isChecked:t.accessibilityProvider&&t.accessibilityProvider.isChecked?i=>t.accessibilityProvider.isChecked(i.element):void 0,getRole:t.accessibilityProvider&&t.accessibilityProvider.getRole?i=>t.accessibilityProvider.getRole(i.element):()=>"treeitem",getAriaLabel(i){return t.accessibilityProvider.getAriaLabel(i.element)},getWidgetAriaLabel(){return t.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:t.accessibilityProvider&&t.accessibilityProvider.getWidgetRole?()=>t.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:t.accessibilityProvider&&t.accessibilityProvider.getAriaLevel?i=>t.accessibilityProvider.getAriaLevel(i.element):i=>i.depth,getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&(i=>t.accessibilityProvider.getActiveDescendantId(i.element))},keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(i){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i.element)}}}}class YB{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}}var S0;(function(s){s.None="none",s.OnHover="onHover",s.Always="always"})(S0||(S0={}));class zwe{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new Ze,this.onDidChange=Ie.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}const ww=class ww{constructor(e,t,i,n,r,o={}){this.renderer=e,this.model=t,this.activeNodes=n,this.renderedIndentGuides=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=ww.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=pe.None,this.disposables=new Ze,this.templateId=e.templateId,this.updateOptions(o),Ie.map(i,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=Yo(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,n]of this.renderedNodes)n.indentSize=ww.DefaultIndent+(i.depth-1)*this.indent,this.renderTreeElement(i,n)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==S0.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,n]of this.renderedNodes)this._renderIndentGuides(i,n);if(this.indentGuidesDisposable.dispose(),t){const i=new Ze;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Qe(e,ot(".monaco-tl-row")),i=Qe(t,ot(".monaco-tl-indent")),n=Qe(t,ot(".monaco-tl-twistie")),r=Qe(t,ot(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:i,twistie:n,indentGuidesDisposable:pe.None,indentSize:0,templateData:o}}renderElement(e,t,i,n){i.indentSize=ww.DefaultIndent+(e.depth-1)*this.indent,this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,{...n,indent:i.indentSize})}disposeElement(e,t,i,n){i.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,i.templateData,{...n,indent:i.indentSize}),typeof n?.height=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){t.twistie.style.paddingLeft=`${t.indentSize}px`,t.indent.style.width=`${t.indentSize+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Gt.asClassNameArray(Ue.treeItemExpanded));let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...Gt.asClassNameArray(Ue.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(oh(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new Ze;for(;;){const n=this.model.getNodeLocation(e),r=this.model.getParentNodeLocation(n);if(!r)break;const o=this.model.getNode(r),a=ot(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(o)&&a.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(o,a),i.add(lt(()=>this.renderedIndentGuides.delete(o,a))),e=o}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set;e.forEach(i=>{const n=this.model.getNodeLocation(i);try{const r=this.model.getParentNodeLocation(n);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):r&&t.add(this.model.getNode(r))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,n=>n.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,n=>n.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Cs(this.disposables)}};ww.DefaultIndent=8;let o8=ww;function Uwe(s,e){const t=e.toLowerCase().indexOf(s);let i;if(t>-1){i=[Number.MAX_SAFE_INTEGER,0];for(let n=s.length;n>0;n--)i.push(t+n-1)}return i}class xX{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set findMatchType(e){this._findMatchType=e}get findMatchType(){return this._findMatchType}set findMode(e){this._findMode=e}get findMode(){return this._findMode}constructor(e,t,i){this._keyboardNavigationLabelProvider=e,this._filter=t,this._defaultFindVisibility=i,this._totalCount=0,this._matchCount=0,this._findMatchType=Qu.Fuzzy,this._findMode=Ll.Highlight,this._pattern="",this._lowercasePattern="",this.disposables=new Ze}filter(e,t){let i=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?i=o?1:0:X2(o)?i=y0(o.visibility):i=o,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:q1.Default,visibility:i};const n=this._keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(n)?n:[n];for(const o of r){const a=o&&o.toString();if(typeof a>"u")return{data:q1.Default,visibility:i};let l;if(this._findMatchType===Qu.Contiguous?l=Uwe(this._lowercasePattern,a.toLowerCase()):l=LZ(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0}),l)return this._matchCount++,r.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this._findMode===Ll.Filter?typeof this._defaultFindVisibility=="number"?this._defaultFindVisibility:this._defaultFindVisibility?this._defaultFindVisibility(e):2:{data:q1.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Cs(this.disposables)}}class qwe{constructor(e){this.stateMap=new Map(e.map(t=>[t.id,{...t}]))}get(e){const t=this.stateMap.get(e);if(t===void 0)throw new Error(`No state found for toggle id ${e}`);return t.isChecked}set(e,t){const i=this.stateMap.get(e);if(i===void 0)throw new Error(`No state found for toggle id ${e}`);return i.isChecked===t?!1:(i.isChecked=t,!0)}}var Ll;(function(s){s[s.Highlight=0]="Highlight",s[s.Filter=1]="Filter"})(Ll||(Ll={}));var Qu;(function(s){s[s.Fuzzy=0]="Fuzzy",s[s.Contiguous=1]="Contiguous"})(Qu||(Qu={}));var Tm;(function(s){s.Mode="mode",s.MatchType="matchType"})(Tm||(Tm={}));class $we{get pattern(){return this._pattern}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.widget?.setPlaceHolder(e)}constructor(e,t,i,n={}){this.tree=e,this.filter=t,this.contextViewProvider=i,this.options=n,this._pattern="",this._onDidChangePattern=new ne,this._onDidChangeOpenState=new ne,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Ze,this.disposables=new Ze,this.toggles=new qwe(n.toggles??[]),this._placeholder=n.placeholder??y(20,"Type to search")}isOpened(){return!!this.widget}updateToggleState(e,t){this.toggles.set(e,t),this.widget?.setToggleState(e,t)}renderMessage(e,t){e?this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:2,content:t??y(21,"No results found.")}):this.widget?.showMessage({type:2}):this.widget?.clearMessage()}alertResults(e){Rx(e?y(23,"{0} results",e):y(22,"No results"))}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class kX extends $we{get mode(){return this.toggles.get(Tm.Mode)?Ll.Filter:Ll.Highlight}set mode(e){if(e===this.mode)return;const t=e===Ll.Filter;this.updateToggleState(Tm.Mode,t),this.placeholder=t?y(24,"Type to filter"):y(25,"Type to search"),this.filter.findMode=e,this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e)}get matchType(){return this.toggles.get(Tm.MatchType)?Qu.Fuzzy:Qu.Contiguous}set matchType(e){e!==this.matchType&&(this.updateToggleState(Tm.MatchType,e===Qu.Fuzzy),this.filter.findMatchType=e,this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,n={}){const r=n.defaultFindMode??Ll.Highlight,o=n.defaultFindMatchType??Qu.Fuzzy,a=[{id:Tm.Mode,icon:Ue.listFilter,title:y(26,"Filter"),isChecked:r===Ll.Filter},{id:Tm.MatchType,icon:Ue.searchFuzzy,title:y(27,"Fuzzy Match"),isChecked:o===Qu.Fuzzy}];t.findMatchType=o,t.findMode=r,super(e,t,i,{...n,toggles:a}),this.filter=t,this._onDidChangeMode=new ne,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new ne,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this.disposables.add(this.tree.onDidChangeModel(()=>{this.isOpened()&&(this.pattern.length!==0&&this.tree.refilter(),this.render())})),this.disposables.add(this.tree.onWillRefilter(()=>this.filter.reset()))}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}shouldAllowFocus(e){return!this.isOpened()||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!q1.isDefault(e.filterData)}render(){const t=this.filter.matchCount===0&&this.filter.totalCount>0&&this.pattern.length>0;this.renderMessage(t),this.pattern.length&&this.alertResults(this.filter.matchCount)}}function jwe(s,e){return s.position===e.position&&EX(s,e)}function EX(s,e){return s.node.element===e.node.element&&s.startIndex===e.startIndex&&s.height===e.height&&s.endIndex===e.endIndex}class Gwe{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return vs(this.stickyNodes,e.stickyNodes,jwe)}contains(e){return this.stickyNodes.some(t=>t.node.element===e.element)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!vs(this.stickyNodes,e.stickyNodes,EX)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class Kwe{constrainStickyScrollNodes(e,t,i){for(let n=0;n<e.length;n++){const r=e[n];if(r.position+r.height>i||n>=t)return e.slice(0,n)}return e}}class oq extends pe{constructor(e,t,i,n,r,o={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=r,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(o);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new Kwe,this.paddingTop=o.paddingTop??0,this._widget=this._register(new Ywe(i.getScrollableElement(),i,e,n,r,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this._register(t.onDidSpliceRenderedNodes(l=>{const c=this._widget.state;if(!c)return;if(l.deleteCount>0&&c.stickyNodes.some(g=>!this.model.has(this.model.getNodeLocation(g.node)))){this.update();return}c.stickyNodes.some(g=>{const _=this.model.getListIndex(this.model.getNodeLocation(g.node));return _>=l.start&&_<l.start+l.deleteCount&&c.contains(g.node)})&&this._widget.rerender()})),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(this.paddingTop);if(!e||this.tree.scrollTop<=this.paddingTop){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,n=0,r=this.getNextStickyNode(i,void 0,n);for(;r&&(t.push(r),n+=r.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(r),!i)));)r=this.getNextStickyNode(i,r.node,n);const o=this.constrainStickyNodes(t);return o.length?new Gwe(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const n=this.getAncestorUnderPrevious(e,t);if(n&&!(n===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(n,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),n=this.view.getElementTop(i),r=t;return this.view.scrollTop===n-r}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:n,endIndex:r}=this.getNodeRange(e),o=this.calculateStickyNodePosition(r,t,i);return{node:e,position:o,height:i,startIndex:n,endIndex:r}}getAncestorUnderPrevious(e,t=void 0){let i=e,n=this.getParentNode(i);for(;n;){if(n===t)return i;i=n,n=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let n=this.view.getRelativeTop(e);if(n===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),h=this.view.getRelativeTop(e+1);n=h?h-c/this.view.renderHeight:null}if(n===null)return t;const r=this.view.element(e),o=this.treeDelegate.getHeight(r),l=n*this.view.renderHeight+o;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const n=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!n.length)return[];const r=n[n.length-1];if(n.length>this.stickyScrollMaxItemCount||r.position+r.height>t)throw new Error("stickyScrollDelegate violates constraints");return n}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const n=this.model.getListRenderCount(t),r=i+n-1;return{startIndex:i,endIndex:r}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let n=0;for(let r=0;r<t.length&&r<this.stickyScrollMaxItemCount;r++)n+=this.treeDelegate.getHeight(t[r]);return n}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(e.paddingTop!==void 0&&(this.paddingTop=e.paddingTop),e.stickyScrollMaxItemCount!==void 0){const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class Ywe{get state(){return this._previousState}constructor(e,t,i,n,r,o){this.view=t,this.tree=i,this.treeRenderers=n,this.treeDelegate=r,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new Ze,this._rootDomNode=ot(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=ot(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new Zwe(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const n=e.stickyNodes[e.count-1];this._previousState&&e.animationStateChanged(this._previousState)?this._previousElements[this._previousState.count-1].style.top=`${n.position}px`:this.renderState(e),this._previousState=e,this._rootDomNode.style.height=`${n.position+n.height}px`}renderState(e){this._previousStateDisposables.clear();const t=Array(e.count);for(let i=e.count-1;i>=0;i--){const n=e.stickyNodes[i],{element:r,disposable:o}=this.createElement(n,i,e.count);t[i]=r,this._rootDomNode.appendChild(r),this._previousStateDisposables.add(o)}this.stickyScrollFocus.updateElements(t,e),this._previousElements=t}rerender(){this._previousState&&this.renderState(this._previousState)}createElement(e,t,i){const n=e.startIndex,r=document.createElement("div");r.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(r.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(r.style.lineHeight=`${e.height}px`),r.classList.add("monaco-tree-sticky-row"),r.classList.add("monaco-list-row"),r.setAttribute("data-index",`${n}`),r.setAttribute("data-parity",n%2===0?"even":"odd"),r.setAttribute("id",this.view.getElementID(n));const o=this.setAccessibilityAttributes(r,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(g=>g.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const h=l.renderTemplate(r);l.renderElement(c,e.startIndex,h,{height:e.height});const d=lt(()=>{o.dispose(),l.disposeElement(c,e.startIndex,h,{height:e.height}),l.disposeTemplate(h),r.remove()});return{element:r,disposable:d}}setAccessibilityAttributes(e,t,i,n){if(!this.accessibilityProvider)return pe.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,n))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const r=this.accessibilityProvider.getAriaLabel(t),o=r&&typeof r!="string"?r:Cx(r),a=qt(c=>{const h=c.readObservable(o);h?e.setAttribute("aria-label",h):e.removeAttribute("aria-label")});typeof r=="string"||r&&e.setAttribute("aria-label",r.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class Zwe extends pe{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new ne,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new ne,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(ue(this.container,"focus",()=>this.onFocus())),this._register(ue(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!Jx(t)&&!OL(t)){this.focusedLast()&&this.view.domFocus();return}if(!Kf(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>a.node.element===e.element?.element);if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const n=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:n,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!Jx(t)&&!OL(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const n=Yo(i,0,t.count-1);this.setFocus(n)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],n=t.count>1?t.stickyNodes[t.count-2]:void 0,r=this.view.getElementTop(e),o=n?n.position+n.height+i.height:i.height;this.view.scrollTop=r-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function iD(s){let e=N1.Unknown;return kM(s.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=N1.Twistie:kM(s.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=N1.Element:kM(s.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=N1.Filter),{browserEvent:s.browserEvent,element:s.element?s.element.element:null,target:e}}function Xwe(s){const e=Jx(s.browserEvent.target);return{element:s.element?s.element.element:null,browserEvent:s.browserEvent,anchor:s.anchor,isStickyScroll:e}}function zD(s,e){e(s),s.children.forEach(t=>zD(t,e))}class T5{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new ne,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&vs(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const n=this;this._onDidChange.fire({get elements(){return n.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=h=>l.delete(h);t.forEach(h=>zD(h,c)),this.set([...l.values()]);return}const i=new Set,n=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>zD(l,n));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>zD(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const d=r.get(c);d&&d.visible&&a.push(d)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class Qwe extends cX{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(rX(e.browserEvent.target)||ih(e.browserEvent.target)||YS(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,n=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,r=OL(e.browserEvent.target);let o=!1;if(r?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,r)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!n&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!r||n)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),n){e.browserEvent.isHandledByList=!0;return}}r||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(ave(e.browserEvent.target)||lve(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const n=this.list.indexOf(t),r=this.list.getElementTop(n),o=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=r-o,this.list.domFocus(),this.list.setFocus([n]),this.list.setSelection([n])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!Jx(t)&&!OL(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!Jx(t)&&!OL(t)){super.onContextMenu(e);return}}}class Jwe extends gh{constructor(e,t,i,n,r,o,a,l){super(e,t,i,n,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new Qwe(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const n=[],r=[];let o;i.forEach((a,l)=>{this.focusTrait.has(a)&&n.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),n.length>0&&super.setFocus(a0([...super.getFocus(),...n])),r.length>0&&super.setSelection(a0([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(n=>this.element(n)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(n=>this.element(n)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class TX{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Ie.filter(Ie.map(this.view.onMouseDblClick,iD),e=>e.target!==N1.Filter)}get onMouseOver(){return Ie.map(this.view.onMouseOver,iD)}get onMouseOut(){return Ie.map(this.view.onMouseOut,iD)}get onContextMenu(){return Ie.any(Ie.filter(Ie.map(this.view.onContextMenu,Xwe),e=>!e.isStickyScroll),this.stickyScrollController?.onContextMenu??Ie.None)}get onPointer(){return Ie.map(this.view.onPointer,iD)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Ie.any(this.onDidChangeModelRelay.event,this.onDidSwapModel.event)}get onDidChangeCollapseState(){return this.onDidChangeCollapseStateRelay.event}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,n,r={}){this._user=e,this._options=r,this.eventBufferer=new w2,this.onDidChangeFindOpenState=Ie.None,this.onDidChangeStickyScrollFocused=Ie.None,this.disposables=new Ze,this.onDidSwapModel=this.disposables.add(new ne),this.onDidChangeModelRelay=this.disposables.add(new fS),this.onDidSpliceModelRelay=this.disposables.add(new fS),this.onDidChangeCollapseStateRelay=this.disposables.add(new fS),this.onDidChangeRenderNodeCountRelay=this.disposables.add(new fS),this.onDidChangeActiveNodesRelay=this.disposables.add(new fS),this._onWillRefilter=new ne,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new ne,this.modelDisposables=new Ze,r.keyboardNavigationLabelProvider&&(r.findWidgetEnabled??!0)&&(this.findFilter=new xX(r.keyboardNavigationLabelProvider,r.filter,r.defaultFindVisibility),r={...r,filter:this.findFilter},this.disposables.add(this.findFilter)),this.model=this.createModel(e,r),this.treeDelegate=new YB(i);const o=this.disposables.add(new zwe(this.onDidChangeActiveNodesRelay.event)),a=new RG;this.renderers=n.map(l=>new o8(l,this.model,this.onDidChangeCollapseStateRelay.event,o,a,r));for(const l of this.renderers)this.disposables.add(l);if(this.focus=new T5(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new T5(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new T5(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new Jwe(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...Wwe(()=>this.model,this.disposables,r),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.setupModel(this.model),r.keyboardSupport!==!1){const l=Ie.chain(this.view.onKeyDown,c=>c.filter(h=>!ih(h.target)).map(h=>new Mi(h)));Ie.chain(l,c=>c.filter(h=>h.keyCode===15))(this.onLeftArrow,this,this.disposables),Ie.chain(l,c=>c.filter(h=>h.keyCode===17))(this.onRightArrow,this,this.disposables),Ie.chain(l,c=>c.filter(h=>h.keyCode===10))(this.onSpace,this,this.disposables)}if((r.findWidgetEnabled??!0)&&r.keyboardNavigationLabelProvider&&r.contextViewProvider){const l={styles:r.findWidgetStyles,defaultFindMode:r.defaultFindMode,defaultFindMatchType:r.defaultFindMatchType,showNotFoundMessage:r.showNotFoundMessage};this.findController=this.disposables.add(new kX(this,this.findFilter,r.contextViewProvider,l)),this.focusNavigationFilter=c=>this.findController.shouldAllowFocus(c),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Ie.None,this.onDidChangeFindMatchType=Ie.None;r.enableStickyScroll&&(this.stickyScrollController=new oq(this,this.model,this.view,this.renderers,this.treeDelegate,r),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=ah(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===S0.Always)}updateOptions(e={}){this._options={...this._options,...e};for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===S0.Always)}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new oq(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Ie.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { opacity: 1; border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { opacity: 1; border-color: ${e.treeIndentGuidesStroke}; }`));const n=e.treeStickyScrollBackground??e.listBackground;n&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${n}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${n}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const r=pg(e.listFocusAndSelectionOutline,pg(e.listSelectionOutline,e.listFocusOutline??""));r&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(r=>this.model.getNode(r));this.selection.set(i,t);const n=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(n,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(r=>this.model.getNode(r));this.focus.set(i,t);const n=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(n,t,!0)})}focusNext(e=1,t=!1,i,n=Kf(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,n)}focusPrevious(e=1,t=!1,i,n=Kf(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,n)}focusNextPage(e,t=Kf(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Kf(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>this.stickyScrollController?.height??0)}focusLast(e,t=Kf(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Kf(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const n=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,n)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!0)){const o=this.model.getParentNodeLocation(n);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i);if(!this.model.setCollapsed(n,!1)){if(!i.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],n=this.model.getNodeLocation(i),r=e.browserEvent.altKey;this.model.setCollapsed(n,void 0,r)}setupModel(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidSpliceRenderedNodes(({start:r,deleteCount:o,elements:a})=>this.view.splice(r,o,a)));const t=Ie.forEach(e.onDidSpliceModel,r=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(r),this.selection.onDidModelSplice(r)})},this.modelDisposables);t(()=>null,null,this.modelDisposables);const i=this.modelDisposables.add(new ne),n=this.modelDisposables.add(new L2(0));this.modelDisposables.add(Ie.any(t,this.focus.onDidChange,this.selection.onDidChange)(()=>{n.trigger(()=>{const r=new Set;for(const o of this.focus.getNodes())r.add(o);for(const o of this.selection.getNodes())r.add(o);i.fire([...r.values()])})})),this.onDidChangeActiveNodesRelay.input=i.event,this.onDidChangeModelRelay.input=Ie.signal(e.onDidSpliceModel),this.onDidChangeCollapseStateRelay.input=e.onDidChangeCollapseState,this.onDidChangeRenderNodeCountRelay.input=e.onDidChangeRenderNodeCount,this.onDidSpliceModelRelay.input=e.onDidSpliceModel}dispose(){Cs(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose(),this.modelDisposables.dispose()}}const aq=new po(()=>{const s=A2.Collator(void 0,{numeric:!0,sensitivity:"base"}).value;return{collator:s,collatorIsNumeric:s.resolvedOptions().numeric}});new po(()=>({collator:A2.Collator(void 0,{numeric:!0}).value}));new po(()=>({collator:A2.Collator(void 0,{numeric:!0,sensitivity:"accent"}).value}));function eCe(s,e,t=!1){const i=s||"",n=e||"",r=aq.value.collator.compare(i,n);return aq.value.collatorIsNumeric&&r===0&&i!==n?i<n?-1:1:r}function tCe(s,e,t){const i=s.toLowerCase(),n=e.toLowerCase(),r=iCe(s,e,t);if(r)return r;const o=i.endsWith(t),a=n.endsWith(t);if(o!==a)return o?-1:1;const l=eCe(i,n);return l!==0?l:i.localeCompare(n)}function iCe(s,e,t){const i=s.toLowerCase(),n=e.toLowerCase(),r=i.startsWith(t),o=n.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(i.length<n.length)return-1;if(i.length>n.length)return 1}return 0}class nCe{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:pe.None}}renderElement(e,t,i,n){if(i.disposable?.dispose(),!i.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,n);const o=new SC,a=r.resolve(e,o.token);i.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(l=>this.renderer.renderElement(l,e,i.data,n))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class sCe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function rCe(s,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new sCe(s,e.accessibilityProvider)}}class oCe{constructor(e,t,i,n,r={}){const o=()=>this.model,a=n.map(l=>new nCe(l,o));this.list=new gh(e,t,i,a,rCe(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Ie.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return Ie.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return Ie.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(n=>this._model.get(n)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Ko(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var RC=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};const aCe=!1;var lq;(function(s){s.North="north",s.South="south",s.East="east",s.West="west"})(lq||(lq={}));let lCe=4;const cCe=new ne;let uCe=300;const hCe=new ne;class ZB{constructor(e){this.el=e,this.disposables=new Ze}get onPointerMove(){return this.disposables.add(new gi(nt(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new gi(nt(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}RC([En],ZB.prototype,"onPointerMove",null);RC([En],ZB.prototype,"onPointerUp",null);class XB{get onPointerMove(){return this.disposables.add(new gi(this.el,ji.Change)).event}get onPointerUp(){return this.disposables.add(new gi(this.el,ji.End)).event}constructor(e){this.el=e,this.disposables=new Ze}dispose(){this.disposables.dispose()}}RC([En],XB.prototype,"onPointerMove",null);RC([En],XB.prototype,"onPointerUp",null);class yI{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}RC([En],yI.prototype,"onPointerMove",null);RC([En],yI.prototype,"onPointerUp",null);const cq="pointer-events-disabled";class ac extends pe{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}get onDidStart(){return this._onDidStart.event}get onDidChange(){return this._onDidChange.event}get onDidReset(){return this._onDidReset.event}get onDidEnd(){return this._onDidEnd.event}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=Qe(this.el,ot(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(lt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(ue(this._orthogonalStartDragHandle,"mouseenter",()=>ac.onMouseEnter(e))),this.orthogonalStartDragHandleDisposables.add(ue(this._orthogonalStartDragHandle,"mouseleave",()=>ac.onMouseLeave(e))))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=Qe(this.el,ot(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(lt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(ue(this._orthogonalEndDragHandle,"mouseenter",()=>ac.onMouseEnter(e))),this.orthogonalEndDragHandleDisposables.add(ue(this._orthogonalEndDragHandle,"mouseleave",()=>ac.onMouseLeave(e))))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=uCe,this.hoverDelayer=this._register(new L2(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new ne),this._onDidStart=this._register(new ne),this._onDidChange=this._register(new ne),this._onDidReset=this._register(new ne),this._onDidEnd=this._register(new ne),this.orthogonalStartSashDisposables=this._register(new Ze),this.orthogonalStartDragHandleDisposables=this._register(new Ze),this.orthogonalEndSashDisposables=this._register(new Ze),this.orthogonalEndDragHandleDisposables=this._register(new Ze),this.linkedSash=void 0,this.el=Qe(e,ot(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),Bt&&this.el.classList.add("mac"),this._register(ue(this.el,"mousedown",r=>this.onPointerStart(r,new ZB(e)))),this._register(ue(this.el,"dblclick",r=>this.onPointerDoublePress(r))),this._register(ue(this.el,"mouseenter",()=>ac.onMouseEnter(this))),this._register(ue(this.el,"mouseleave",()=>ac.onMouseLeave(this))),this._register(Co.addTarget(this.el)),this._register(ue(this.el,ji.Start,r=>this.onPointerStart(r,new XB(this.el))));let n;this._register(ue(this.el,ji.Tap,r=>{if(n){clearTimeout(n),n=void 0,this.onPointerDoublePress(r);return}clearTimeout(n),n=setTimeout(()=>n=void 0,250)})),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=lCe,this._register(cCe.event(r=>{this.size=r,this.layout()}))),this._register(hCe.event(r=>this.hoverDelay=r)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",aCe),this.layout()}onPointerStart(e,t){ni.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const b=this.getOrthogonalSash(e);b&&(i=!0,e.__orthogonalSashEvent=!0,b.onPointerStart(e,new yI(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new yI(t))),!this.state)return;const n=this.el.ownerDocument.getElementsByTagName("iframe");for(const b of n)b.classList.add(cq);const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=ah(this.el),h=()=>{let b="";i?b="all-scroll":this.orientation===1?this.state===1?b="s-resize":this.state===2?b="n-resize":b=Bt?"row-resize":"ns-resize":this.state===1?b="e-resize":this.state===2?b="w-resize":b=Bt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${b} !important; }`},d=new Ze;h(),i||this.onDidEnablementChange.event(h,null,d);const g=b=>{ni.stop(b,!1);const C={startX:r,currentX:b.pageX,startY:o,currentY:b.pageY,altKey:a};this._onDidChange.fire(C)},_=b=>{ni.stop(b,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),d.dispose();for(const C of n)C.classList.remove(cq)};t.onPointerMove(g,null,d),t.onPointerUp(_,null,d),d.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&ac.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&ac.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){ac.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!qn(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const dCe={separatorBorder:xe.transparent};class DX{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){if(e!==this.visible){e?(this.size=Yo(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(i){console.error("Splitview: Failed to set visible view"),console.error(i)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,n){this.container=e,this.view=t,this.disposable=n,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class fCe extends DX{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class gCe extends DX{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Wf;(function(s){s[s.Idle=0]="Idle",s[s.Busy=1]="Busy"})(Wf||(Wf={}));var uq;(function(s){s.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}s.Split=e;function t(n){return{type:"auto",index:n}}s.Auto=t;function i(n){return{type:"invisible",cachedVisibleSize:n}}s.Invisible=i})(uq||(uq={}));class mCe extends pe{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Wf.Idle,this._onDidSashChange=this._register(new ne),this._onDidSashReset=this._register(new ne),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Qe(this.el,ot(".sash-container")),this.viewContainer=ot(".split-view-container"),this.scrollable=this._register(new DC({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:n=>na(nt(this.el),n)})),this.scrollableElement=this._register(new TR(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new gi(this.viewContainer,"scroll")).event;this._register(i(n=>{const r=this.scrollableElement.getScrollPosition(),o=Math.abs(this.viewContainer.scrollLeft-r.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-r.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(o!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:o,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(n=>{n.scrollTopChanged&&(this.viewContainer.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this.viewContainer.scrollLeft=n.scrollLeft)})),Qe(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||dCe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((n,r)=>{const o=mc(n.visible)||n.visible?n.size:{type:"invisible",cachedVisibleSize:n.size},a=n.view;this.doAddView(a,o,r,!0)}),this._contentSize=this.viewItems.reduce((n,r)=>n+r.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,n){this.doAddView(e,t,i,n)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let n=0;for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"?n+=a:e-=o.size}for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"&&n>0&&(o.size=Yo(Math.round(a*e/n),o.minimumSize,o.maximumSize))}}else{const n=Ko(this.viewItems.length),r=n.filter(a=>this.viewItems[a].priority===1),o=n.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const n=this.sashItems.findIndex(a=>a.sash===e),r=yd(ue(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),ue(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(b=>b.size);let h=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(n===this.sashItems.length-1){const C=this.viewItems[n];h=(C.minimumSize-C.size)/2,d=(C.maximumSize-C.size)/2}else{const C=this.viewItems[n+1];h=(C.size-C.maximumSize)/2,d=(C.size-C.minimumSize)/2}let g,_;if(!l){const b=Ko(n,-1),C=Ko(n+1,this.viewItems.length),S=b.reduce((V,U)=>V+(this.viewItems[U].minimumSize-c[U]),0),E=b.reduce((V,U)=>V+(this.viewItems[U].viewMaximumSize-c[U]),0),x=C.length===0?Number.POSITIVE_INFINITY:C.reduce((V,U)=>V+(c[U]-this.viewItems[U].minimumSize),0),T=C.length===0?Number.NEGATIVE_INFINITY:C.reduce((V,U)=>V+(c[U]-this.viewItems[U].viewMaximumSize),0),N=Math.max(S,T),A=Math.min(x,E),P=this.findFirstSnapIndex(b),O=this.findFirstSnapIndex(C);if(typeof P=="number"){const V=this.viewItems[P],U=Math.floor(V.viewMinimumSize/2);g={index:P,limitDelta:V.visible?N-U:N+U,size:V.size}}if(typeof O=="number"){const V=this.viewItems[O],U=Math.floor(V.viewMinimumSize/2);_={index:O,limitDelta:V.visible?A+U:A-U,size:V.size}}}this.sashDragState={start:a,current:a,index:n,sizes:c,minDelta:h,maxDelta:d,alt:l,snapBefore:g,snapAfter:_,disposable:r}};o(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:n,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const h=e-i,d=this.resize(t,h,n,void 0,void 0,o,a,l,c);if(r){const g=t===this.sashItems.length-1,_=this.viewItems.map(T=>T.size),b=g?t:t+1,C=this.viewItems[b],S=C.size-C.maximumSize,E=C.size-C.minimumSize,x=g?t-1:t+1;this.resize(x,-d,_,void 0,void 0,S,E)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Yo(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==Wf.Idle)throw new Error("Cant modify splitview");this.state=Wf.Busy;try{const i=Ko(this.viewItems.length).filter(a=>a!==e),n=[...i.filter(a=>this.viewItems[a].priority===1),e],r=i.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=Yo(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(n,r)}finally{this.state=Wf.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=Yo(i,a.minimumSize,a.maximumSize);const n=Ko(this.viewItems.length),r=n.filter(a=>this.viewItems[a].priority===1),o=n.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,n){if(this.state!==Wf.Idle)throw new Error("Cant modify splitview");this.state=Wf.Busy;try{const r=ot(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(i));const o=e.onDidChange(g=>this.onViewChange(h,g)),a=lt(()=>r.remove()),l=yd(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const h=this.orientation===0?new fCe(r,e,c,l):new gCe(r,e,c,l);if(this.viewItems.splice(i,0,h),this.viewItems.length>1){const g={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},_=this.orientation===0?new ac(this.sashContainer,{getHorizontalSashTop:V=>this.getSashPosition(V),getHorizontalSashWidth:this.getSashOrthogonalSize},{...g,orientation:1}):new ac(this.sashContainer,{getVerticalSashLeft:V=>this.getSashPosition(V),getVerticalSashHeight:this.getSashOrthogonalSize},{...g,orientation:0}),b=this.orientation===0?V=>({sash:_,start:V.startY,current:V.currentY,alt:V.altKey}):V=>({sash:_,start:V.startX,current:V.currentX,alt:V.altKey}),S=Ie.map(_.onDidStart,b)(this.onSashStart,this),x=Ie.map(_.onDidChange,b)(this.onSashChange,this),N=Ie.map(_.onDidEnd,()=>this.sashItems.findIndex(V=>V.sash===_))(this.onSashEnd,this),A=_.onDidReset(()=>{const V=this.sashItems.findIndex(W=>W.sash===_),U=Ko(V,-1),Y=Ko(V+1,this.viewItems.length),B=this.findFirstSnapIndex(U),F=this.findFirstSnapIndex(Y);typeof B=="number"&&!this.viewItems[B].visible||typeof F=="number"&&!this.viewItems[F].visible||this._onDidSashReset.fire(V)}),P=yd(S,x,N,A,_),O={sash:_,disposable:P};this.sashItems.splice(i-1,0,O)}r.appendChild(e.element);let d;typeof t!="number"&&t.type==="split"&&(d=[t.index]),n||this.relayout([i],d),!n&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=Wf.Idle}}relayout(e,t){const i=this.viewItems.reduce((n,r)=>n+r.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(h=>h.size),n,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const h=Ko(e,-1),d=Ko(e+1,this.viewItems.length);if(r)for(const O of r)fM(h,O),fM(d,O);if(n)for(const O of n)uT(h,O),uT(d,O);const g=h.map(O=>this.viewItems[O]),_=h.map(O=>i[O]),b=d.map(O=>this.viewItems[O]),C=d.map(O=>i[O]),S=h.reduce((O,V)=>O+(this.viewItems[V].minimumSize-i[V]),0),E=h.reduce((O,V)=>O+(this.viewItems[V].maximumSize-i[V]),0),x=d.length===0?Number.POSITIVE_INFINITY:d.reduce((O,V)=>O+(i[V]-this.viewItems[V].minimumSize),0),T=d.length===0?Number.NEGATIVE_INFINITY:d.reduce((O,V)=>O+(i[V]-this.viewItems[V].maximumSize),0),N=Math.max(S,T,o),A=Math.min(x,E,a);let P=!1;if(l){const O=this.viewItems[l.index],V=t>=l.limitDelta;P=V!==O.visible,O.setVisible(V,l.size)}if(!P&&c){const O=this.viewItems[c.index],V=t<c.limitDelta;P=V!==O.visible,O.setVisible(V,c.size)}if(P)return this.resize(e,t,i,n,r,o,a);t=Yo(t,N,A);for(let O=0,V=t;O<g.length;O++){const U=g[O],Y=Yo(_[O]+V,U.minimumSize,U.maximumSize),B=Y-_[O];V-=B,U.size=Y}for(let O=0,V=t;O<b.length;O++){const U=b[O],Y=Yo(C[O]-V,U.minimumSize,U.maximumSize),B=Y-C[O];V+=B,U.size=Y}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const n=Ko(this.viewItems.length-1,-1),r=n.filter(a=>this.viewItems[a].priority===1),o=n.filter(a=>this.viewItems[a].priority===2);for(const a of o)fM(n,a);for(const a of r)uT(n,a);typeof e=="number"&&uT(n,e);for(let a=0;i!==0&&a<n.length;a++){const l=this.viewItems[n[a]],c=Yo(l.size+i,l.minimumSize,l.maximumSize),h=c-l.size;i-=h,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),n=[...this.viewItems].reverse();e=!1;const r=n.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=n.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],h=this.viewItems[l];a+=h.size;const d=!(t[l]&&o[l+1]),g=!(i[l]&&r[l+1]);if(d&&g){const _=Ko(l,-1),b=Ko(l+1,this.viewItems.length),C=this.findFirstSnapIndex(_),S=this.findFirstSnapIndex(b),E=typeof C=="number"&&!this.viewItems[C].visible,x=typeof S=="number"&&!this.viewItems[S].visible;E&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:x&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else d&&!g?c.state=1:!d&&g?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),Cs(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}}const RA=class RA{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=RA.TemplateId,this.renderedTemplates=new Set;const n=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=n.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=Qe(e,ot(".monaco-table-tr")),i=[],n=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=Qe(t,ot(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,i.push(l),n.push(a.renderTemplate(l))}const r={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(r),r}renderElement(e,t,i,n){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,i.cellTemplateData[r],n)}}disposeElement(e,t,i,n){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,i.cellTemplateData[r],n)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);oh(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};RA.TemplateId="row";let SI=RA;function pCe(s){return{getHeight(e){return s.getHeight(e)},getTemplateId(){return SI.TemplateId}}}class _Ce extends pe{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??Ie.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new ne,this.onDidLayout=this._onDidLayout.event,this.element=ot(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(fh().setupManagedHover(uu("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}var J1;let bCe=(J1=class{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,n,r,o){this.virtualDelegate=i,this.columns=n,this.domId=`table_id_${++J1.InstanceCount}`,this.disposables=new Ze,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Qe(t,ot(`.monaco-table.${this.domId}`));const a=n.map((h,d)=>this.disposables.add(new _Ce(h,d))),l={size:a.reduce((h,d)=>h+d.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=this.disposables.add(new mCe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new SI(n,r,h=>this.splitview.getViewSize(h));this.list=this.disposables.add(new gh(e,this.domNode,pCe(i),[c],o)),Ie.any(...a.map(h=>h.onDidLayout))(([h,d])=>c.layoutColumn(h,d),null,this.disposables),this.splitview.onDidSashReset(h=>{const d=n.reduce((_,b)=>_+b.weight,0),g=n[h].weight/d*this.cachedWidth;this.splitview.resizeView(h,g)},null,this.disposables),this.styleElement=ah(this.domNode),this.style(gve)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}},J1.InstanceCount=0,J1);class QB{constructor(e,t={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new Fwe(e,null,t),this.onDidSpliceModel=this.model.onDidSpliceModel,this.onDidSpliceRenderedNodes=this.model.onDidSpliceRenderedNodes,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,t.sorter&&(this.sorter={compare(i,n){return t.sorter.compare(i.element,n.element)}}),this.identityProvider=t.identityProvider}setChildren(e,t=si.empty(),i={}){const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=si.empty(),i){const n=new Set,r=new Set,o=l=>{if(l.element===null)return;const c=l;if(n.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();r.add(h),this.nodesByIdentity.set(h,c)}i.onDidCreateNode?.(c)},a=l=>{if(l.element===null)return;const c=l;if(n.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();r.has(h)||this.nodesByIdentity.delete(h)}i.onDidDeleteNode?.(c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=si.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),si.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(o)}if(!i){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===_l.Collapsed||t.collapsed===_l.PreserveOrCollapsed?o=!0:t.collapsed===_l.Expanded||t.collapsed===_l.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const n=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let r;return typeof t.collapsed>"u"||t.collapsed===_l.PreserveOrCollapsed||t.collapsed===_l.PreserveOrExpanded?r=i.collapsed:t.collapsed===_l.Collapsed?r=!0:t.collapsed===_l.Expanded?r=!1:r=!!t.collapsed,{...t,collapsible:n,collapsed:r,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Sl(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Sl(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Sl(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Sl(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function UD(s){const e=[s.element],t=s.incompressible||!1;return{element:{elements:e,incompressible:t},children:si.map(si.from(s.children),UD),collapsible:s.collapsible,collapsed:s.collapsed}}function qD(s){const e=[s.element],t=s.incompressible||!1;let i,n;for(;[n,i]=si.consume(si.from(s.children),2),!(n.length!==1||n[0].incompressible);)s=n[0],e.push(s.element);return{element:{elements:e,incompressible:t},children:si.map(si.concat(n,i),qD),collapsible:s.collapsible,collapsed:s.collapsed}}function a8(s,e=0){let t;return e<s.element.elements.length-1?t=[a8(s,e+1)]:t=si.map(si.from(s.children),i=>a8(i,0)),e===0&&s.element.incompressible?{element:s.element.elements[e],children:t,incompressible:!0,collapsible:s.collapsible,collapsed:s.collapsed}:{element:s.element.elements[e],children:t,collapsible:s.collapsible,collapsed:s.collapsed}}function hq(s){return a8(s,0)}function NX(s,e,t){return s.element===e?{...s,children:t}:{...s,children:si.map(si.from(s.children),i=>NX(i,e,t))}}const vCe=s=>({getId(e){return e.elements.map(t=>s.getId(t).toString()).join("\0")}});class wCe{get onDidSpliceRenderedNodes(){return this.model.onDidSpliceRenderedNodes}get onDidSpliceModel(){return this.model.onDidSpliceModel}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new QB(e,t),this.enabled=typeof t.compressionEnabled>"u"?!0:t.compressionEnabled,this.identityProvider=t.identityProvider}setChildren(e,t=si.empty(),i){const n=i.diffIdentityProvider&&vCe(i.diffIdentityProvider);if(e===null){const b=si.map(t,this.enabled?qD:UD);this._setChildren(null,b,{diffIdentityProvider:n,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Sl(this.user,"Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=hq(o),h=NX(c,e,t),d=(this.enabled?qD:UD)(h),g=i.diffIdentityProvider?((b,C)=>i.diffIdentityProvider.getId(b)===i.diffIdentityProvider.getId(C)):void 0;if(vs(d.element.elements,o.element.elements,g)){this._setChildren(r,d.children||si.empty(),{diffIdentityProvider:n,diffDepth:1});return}const _=l.children.map(b=>b===o?d:b);this._setChildren(l.element,_,{diffIdentityProvider:n,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,n=si.map(i,hq),r=si.map(n,e?qD:UD);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const n=new Set,r=a=>{for(const l of a.element.elements)n.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)n.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:r,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getCompressedNode(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Sl(this.user,`Tree element not found: ${e}`);return t}}const CCe=s=>s[s.length-1];class JB{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new JB(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function yCe(s,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(s(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){const n=t.elements;for(let r=0;r<n.length-1;r++){const o=e.filter.filter(n[r],i);i=y0(X2(o)?o.visibility:o)}return e.filter.filter(n[n.length-1],i)}}}}class SCe{get onDidSpliceModel(){return Ie.map(this.model.onDidSpliceModel,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidSpliceRenderedNodes(){return Ie.map(this.model.onDidSpliceRenderedNodes,({start:e,deleteCount:t,elements:i})=>({start:e,deleteCount:t,elements:i.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Ie.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Ie.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t={}){this.rootRef=null,this.elementMapper=t.elementMapper||CCe;const i=n=>this.elementMapper(n.elements);this.nodeMapper=new KB(n=>new JB(i,n)),this.model=new wCe(e,yCe(i,t))}setChildren(e,t=si.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var LCe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};class eF extends TX{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,n,r={}){super(e,t,i,n,r),this.user=e}setChildren(e,t=si.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t){return new QB(e,t)}}class IX{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){let r=this.stickyScrollDelegate.getCompressedNode(e);r||(r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),r.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,i.data,n))}disposeElement(e,t,i,n){i.compressedTreeNode?this.renderer.disposeCompressedElements?.(i.compressedTreeNode,t,i.data,n):this.renderer.disposeElement?.(e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?.(e,t)??!1}}LCe([En],IX.prototype,"compressedTreeNodeProvider",null);class xCe{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let n=0;n<e.length;n++){const r=e[n],o=r.position+r.height;if(n+1<e.length&&o+e[n+1].height>i||n>=t-1&&t<e.length){const l=e.slice(0,n),c=e.slice(n),h=this.compressStickyNodes(c);return[...l,h]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const h=e[c],d=t.getCompressedTreeNode(h.node.element);if(d.element){if(c!==0&&d.element.incompressible)break;i.push(...d.element.elements)}}if(i.length<2)return e[0];const n=e[e.length-1],r={elements:i,incompressible:!1},o={...n.node,children:[],element:r},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:n.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function kCe(s,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=s().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class AX extends eF{constructor(e,t,i,n,r={}){const o=()=>this,a=new xCe(()=>this.model),l=n.map(c=>new IX(o,a,c));super(e,t,i,l,{...kCe(o,r),stickyScrollDelegate:a})}setChildren(e,t=si.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t){return new SCe(e,t)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function D5(s){return{...s,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function l8(s,e){return e.parent?e.parent===s?!0:l8(s,e.parent):!1}function ECe(s,e){return s===e||l8(s,e)||l8(e,s)}class tF{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new tF(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class TCe{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...Gt.asClassNameArray(Ue.treeItemLoading)),!0):(t.classList.remove(...Gt.asClassNameArray(Ue.treeItemLoading)),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function dq(s){return{browserEvent:s.browserEvent,elements:s.elements.map(e=>e.element)}}function fq(s){return{browserEvent:s.browserEvent,element:s.element&&s.element.element,target:s.target}}class DCe extends j2{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function N5(s){return s instanceof j2?new DCe(s):s}class NCe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(N5(e),t)}onDragOver(e,t,i,n,r,o=!0){return this.dnd.onDragOver(N5(e),t&&t.element,i,n,r)}drop(e,t,i,n,r){this.dnd.drop(N5(e),t&&t.element,i,n,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}}class ICe extends xX{constructor(e,t,i){super(t,i),this.findProvider=e,this.isFindSessionActive=!1}filter(e,t){const i=super.filter(e,t);if(!this.isFindSessionActive||this.findMode===Ll.Highlight||!this.findProvider.isVisible)return i;const n=X2(i)?i.visibility:i;return y0(n)===0?0:this.findProvider.isVisible(e)?i:0}}class ACe extends kX{constructor(e,t,i,n,r){super(e,i,n,r),this.findProvider=t,this.filter=i,this.activeSession=!1,this.asyncWorkInProgress=!1,this.disposables.add(lt(async()=>{this.activeSession&&await this.findProvider.endSession?.()}))}render(){if(this.asyncWorkInProgress||!this.activeFindMetadata)return;const e=this.activeFindMetadata.matchCount===0&&this.pattern.length>0;this.renderMessage(e),this.pattern.length&&this.alertResults(this.activeFindMetadata.matchCount)}shouldAllowFocus(e){return this.shouldFocusWhenNavigating(e)}shouldFocusWhenNavigating(e){if(!this.activeSession||!this.activeFindMetadata)return!0;const t=e.element?.element;return t&&this.activeFindMetadata.isMatch(t)?!0:!q1.isDefault(e.filterData)}}function RX(s){return s&&{...s,collapseByDefault:!0,identityProvider:s.identityProvider&&{getId(e){return s.identityProvider.getId(e.element)}},dnd:s.dnd&&new NCe(s.dnd),multipleSelectionController:s.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return s.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return s.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:s.accessibilityProvider&&{...s.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:s.accessibilityProvider.getRole?e=>s.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:s.accessibilityProvider.isChecked?e=>!!s.accessibilityProvider?.isChecked(e.element):void 0,getAriaLabel(e){return s.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return s.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:s.accessibilityProvider.getWidgetRole?()=>s.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:s.accessibilityProvider.getAriaLevel&&(e=>s.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:s.accessibilityProvider.getActiveDescendantId&&(e=>s.accessibilityProvider.getActiveDescendantId(e.element))},filter:s.filter&&{filter(e,t){return s.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:s.keyboardNavigationLabelProvider&&{...s.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return s.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof s.expandOnlyOnTwistieClick>"u"?void 0:typeof s.expandOnlyOnTwistieClick!="function"?s.expandOnlyOnTwistieClick:(e=>s.expandOnlyOnTwistieClick(e.element)),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof s.defaultFindVisibility=="number"?s.defaultFindVisibility:typeof s.defaultFindVisibility>"u"?2:s.defaultFindVisibility(e.element)}}function c8(s,e){e(s),s.children.forEach(t=>c8(t,e))}class MX{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Ie.map(this.tree.onDidChangeFocus,dq)}get onDidChangeSelection(){return Ie.map(this.tree.onDidChangeSelection,dq)}get onMouseDblClick(){return Ie.map(this.tree.onMouseDblClick,fq)}get onPointer(){return Ie.map(this.tree.onPointer,fq)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,n,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new ne,this._onDidChangeNodeSlowState=new ne,this.nodeMapper=new KB(c=>new tF(c)),this.disposables=new Ze,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=c=>o.collapseByDefault?o.collapseByDefault(c)?_l.PreserveOrCollapsed:_l.PreserveOrExpanded:void 0;let a=!1,l;if(o.findProvider&&(o.findWidgetEnabled??!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider&&(a=!0,l=new ICe(o.findProvider,o.keyboardNavigationLabelProvider,o.filter)),this.tree=this.createTree(e,t,i,n,{...o,findWidgetEnabled:!a,filter:l??o.filter}),this.root=D5({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables),a){const c={styles:o.findWidgetStyles,showNotFoundMessage:o.showNotFoundMessage,defaultFindMatchType:o.defaultFindMatchType,defaultFindMode:o.defaultFindMode};this.findController=this.disposables.add(new ACe(this.tree,o.findProvider,l,this.tree.options.contextViewProvider,c)),this.focusNavigationFilter=h=>this.findController.shouldFocusWhenNavigating(h),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindOpenState=this.tree.onDidChangeFindOpenState,this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType}createTree(e,t,i,n,r){const o=new YB(i),a=n.map(c=>new TCe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=RX(r)||{};return new eF(e,t,o,a,l)}updateOptions(e={}){this.findController&&(e.defaultFindMode!==void 0&&(this.findController.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.findController.matchType=e.defaultFindMatchType)),this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.cancelAllRefreshPromises(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}cancelAllRefreshPromises(e=!1){this.refreshPromises.forEach(t=>t.cancel()),this.refreshPromises.clear(),e&&(this.subTreeRefreshPromises.forEach(t=>t.cancel()),this.subTreeRefreshPromises.clear())}async _updateChildren(e=this.root.element,t=!0,i=!1,n,r){if(typeof this.root.element>"u")throw new Sl(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Ie.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,n,r),i)try{this.tree.rerender(o)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Sl(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Ie.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await i.refreshPromise,await Ie.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const n=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await i.refreshPromise,await Ie.toPromise(this._onDidRender.event)),n}setSelection(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(n=>this.getDataNode(n));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t){const i=this.identityProvider?.getId(e).toString();throw new Sl(this.user,`Data tree node not found${i?`: ${i}`:""}`)}return t}async refreshAndRenderNode(e,t,i,n){this.disposables.isDisposed||(await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,n))}async refreshNode(e,t,i){let n;if(this.subTreeRefreshPromises.forEach((r,o)=>{!n&&ECe(o,e)&&(n=r.then(()=>this.refreshNode(e,t,i)))}),n)return n;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){const n=b3(async()=>{const r=await this.doRefreshNode(e,t,i);e.stale=!1,await _x.settled(r.map(o=>this.doRefreshSubTree(o,t,i)))});return e.refreshPromise=n,this.subTreeRefreshPromises.set(e,n),n.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}),n}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let n;if(!e.hasChildren)n=Promise.resolve(si.empty());else{const r=this.doGetChildren(e);if(sO(r))n=Promise.resolve(r);else{const o=tC(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),n=r.finally(()=>o.cancel())}}try{const r=await n;return this.setChildren(e,r,t,i)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),v2(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return sO(i)?this.processChildren(i):(t=b3(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(mi))}setChildren(e,t,i,n){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const h of e.children)o.set(h.element,h),this.identityProvider&&a.set(h.id,{node:h,collapsed:this.tree.hasElement(h)&&this.tree.isCollapsed(h)});const l=[],c=r.map(h=>{const d=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const C=D5({element:h,parent:e,hasChildren:d,defaultCollapseState:this.getDefaultCollapseState(h)});return d&&C.defaultCollapseState===_l.PreserveOrExpanded&&l.push(C),C}const g=this.identityProvider.getId(h).toString(),_=a.get(g);if(_){const C=_.node;return o.delete(C.element),this.nodes.delete(C.element),this.nodes.set(h,C),C.element=h,C.hasChildren=d,i?_.collapsed?(C.children.forEach(S=>c8(S,E=>this.nodes.delete(E.element))),C.children.splice(0,C.children.length),C.stale=!0):l.push(C):d&&!_.collapsed&&l.push(C),C}const b=D5({element:h,parent:e,id:g,hasChildren:d,defaultCollapseState:this.getDefaultCollapseState(h)});return n&&n.viewState.focus&&n.viewState.focus.indexOf(g)>-1&&n.focus.push(b),n&&n.viewState.selection&&n.viewState.selection.indexOf(g)>-1&&n.selection.push(b),(n&&n.viewState.expanded&&n.viewState.expanded.indexOf(g)>-1||d&&b.defaultCollapseState===_l.PreserveOrExpanded)&&l.push(b),b});for(const h of o.values())c8(h,d=>this.nodes.delete(d.element));for(const h of c)this.nodes.set(h.element,h);return eN(e.children,0,e.children.length,c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const n=e.children.map(o=>this.asTreeElement(o,t)),r=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(o){return i.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,n,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?si.map(e.children,n=>this.asTreeElement(n,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class iF{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new iF(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class RCe{constructor(e,t,i,n){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,n)}renderCompressedElements(e,t,i,n){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}renderTwistie(e,t){return e.slow?(t.classList.add(...Gt.asClassNameArray(Ue.treeItemLoading)),!0):(t.classList.remove(...Gt.asClassNameArray(Ue.treeItemLoading)),!1)}disposeElement(e,t,i,n){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,i.templateData,n)}disposeCompressedElements(e,t,i,n){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,i.templateData,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Cs(this.disposables)}}function MCe(s){const e=s&&RX(s);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return s.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class OCe extends MX{constructor(e,t,i,n,r,o,a={}){super(e,t,i,r,o,a),this.compressionDelegate=n,this.compressibleNodeMapper=new KB(l=>new iF(l)),this.filter=a.filter}createTree(e,t,i,n,r){const o=new YB(i),a=n.map(c=>new RCe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=MCe(r)||{};return new AX(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const n=_=>this.identityProvider.getId(_).toString(),r=_=>{const b=new Set;for(const C of _){const S=this.tree.getCompressedTreeNode(C===this.root?null:C);if(S.element)for(const E of S.element.elements)b.add(n(E.element))}return b},o=r(this.tree.getSelection()),a=r(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const h=this.getFocus();let d=!1;const g=_=>{const b=_.element;if(b)for(let C=0;C<b.elements.length;C++){const S=n(b.elements[C].element),E=b.elements[b.elements.length-1].element;o.has(S)&&l.indexOf(E)===-1&&(l.push(E),c=!0),a.has(S)&&h.indexOf(E)===-1&&(h.push(E),d=!0)}_.children.forEach(g)};g(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),d&&this.setFocus(h)}processChildren(e){return this.filter&&(e=si.filter(e,t=>{const i=this.filter.filter(t,1),n=PCe(i);if(n===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return n===1})),super.processChildren(e)}}function PCe(s){return typeof s=="boolean"?s?1:0:X2(s)?y0(s.visibility):y0(s)}class BCe extends TX{constructor(e,t,i,n,r,o={}){super(e,t,i,n,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t){return new QB(e,t)}}new et("isMac",Bt,y(1669,"Whether the operating system is macOS"));new et("isLinux",Fa,y(1670,"Whether the operating system is Linux"));new et("isWindows",ia,y(1671,"Whether the operating system is Windows"));new et("isWeb",yg,y(1672,"Whether the platform is a web browser"));new et("isMacNative",Bt&&!yg,y(1673,"Whether the operating system is macOS on a non-browser platform"));new et("isIOS",Nd,y(1674,"Whether the operating system is iOS"));new et("isMobile",Mj,y(1675,"Whether the platform is a mobile web browser"));new et("isDevelopment",!1,!0);new et("productQualityType","",y(1676,"Quality type of VS Code"));const OX="inputFocus",PX=new et(OX,!1,y(1677,"Whether keyboard focus is inside an input box"));var Tg=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Yi=function(s,e){return function(t,i){e(t,i,s)}};const qd=At("listService");class FCe{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Ze,this.lists=[],this._lastFocusedWidget=void 0}setLastFocusedList(e){e!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this.lists.some(n=>n.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),yP(e.getHTMLElement())&&this.setLastFocusedList(e),yd(e.onDidFocus(()=>this.setLastFocusedList(e)),lt(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(n=>n!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const s2=new et("listScrollAtBoundary","none");Kt.or(s2.isEqualTo("top"),s2.isEqualTo("both"));Kt.or(s2.isEqualTo("bottom"),s2.isEqualTo("both"));const BX=new et("listFocus",!0),FX=new et("treestickyScrollFocused",!1),HR=new et("listSupportsMultiselect",!0);Kt.and(BX,Kt.not(OX),FX.negate());const nF=new et("listHasSelectionOrFocus",!1),sF=new et("listDoubleSelection",!1),rF=new et("listMultiSelection",!1),WR=new et("listSelectionNavigation",!1),VCe=new et("listSupportsFind",!0),HCe=new et("treeElementCanCollapse",!1),WCe=new et("treeElementHasParent",!1),zCe=new et("treeElementCanExpand",!1),UCe=new et("treeElementHasChild",!1),qCe=new et("treeFindOpen",!1),VX="listTypeNavigationMode",HX="listAutomaticKeyboardNavigation";function zR(s,e){const t=s.createScoped(e.getHTMLElement());return BX.bindTo(t),t}function UR(s,e){const t=s2.bindTo(s),i=()=>{const n=e.scrollTop===0,r=e.scrollHeight-e.renderHeight-e.scrollTop<1;n&&r?t.set("both"):n?t.set("top"):r?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const q0="workbench.list.multiSelectModifier",$D="workbench.list.openMode",yc="workbench.list.horizontalScrolling",oF="workbench.list.defaultFindMode",aF="workbench.list.typeNavigationMode",LI="workbench.list.keyboardNavigation",uh="workbench.list.scrollByPage",lF="workbench.list.defaultFindMatchType",r2="workbench.tree.indent",xI="workbench.tree.renderIndentGuides",hh="workbench.list.smoothScrolling",Pd="workbench.list.mouseWheelScrollSensitivity",Bd="workbench.list.fastScrollSensitivity",kI="workbench.tree.expandMode",EI="workbench.tree.enableStickyScroll",TI="workbench.tree.stickyScrollMaxItemCount";function Fd(s){return s.getValue(q0)==="alt"}class $Ce extends pe{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Fd(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(q0)&&(this.useAltAsMultipleSelectionModifier=Fd(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:aX(e)}isSelectionRangeChangeEvent(e){return lX(e)}}function qR(s,e){const t=s.get(cn),i=s.get(ar),n=new Ze;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return i.mightProducePrintableCharacter(o)}},smoothScrolling:!!t.getValue(hh),mouseWheelScrollSensitivity:t.getValue(Pd),fastScrollSensitivity:t.getValue(Bd),multipleSelectionController:e.multipleSelectionController??n.add(new $Ce(t)),keyboardNavigationEventFilter:KCe(i),scrollByPage:!!t.getValue(uh)},n]}let gq=class extends gh{constructor(e,t,i,n,r,o,a,l,c){const h=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(yc),[d,g]=c.invokeFunction(qR,r);super(e,t,i,n,{keyboardSupport:!1,...d,horizontalScrolling:h}),this.disposables.add(g),this.contextKeyService=zR(o,this),this.disposables.add(UR(this.contextKeyService,this)),this.listSupportsMultiSelect=HR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),WR.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=nF.bindTo(this.contextKeyService),this.listDoubleSelection=sF.bindTo(this.contextKeyService),this.listMultiSelection=rF.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Fd(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),C=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||C.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),C=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||C.length>0)})),this.disposables.add(l.onDidChangeConfiguration(b=>{b.affectsConfiguration(q0)&&(this._useAltAsMultipleSelectionModifier=Fd(l));let C={};if(b.affectsConfiguration(yc)&&this.horizontalScrolling===void 0){const S=!!l.getValue(yc);C={...C,horizontalScrolling:S}}if(b.affectsConfiguration(uh)){const S=!!l.getValue(uh);C={...C,scrollByPage:S}}if(b.affectsConfiguration(hh)){const S=!!l.getValue(hh);C={...C,smoothScrolling:S}}if(b.affectsConfiguration(Pd)){const S=l.getValue(Pd);C={...C,mouseWheelScrollSensitivity:S}}if(b.affectsConfiguration(Bd)){const S=l.getValue(Bd);C={...C,fastScrollSensitivity:S}}Object.keys(C).length>0&&this.updateOptions(C)})),this.navigator=new WX(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Y2(e):K2)}};gq=Tg([Yi(5,ai),Yi(6,qd),Yi(7,cn),Yi(8,Zt)],gq);let mq=class extends oCe{constructor(e,t,i,n,r,o,a,l,c){const h=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(yc),[d,g]=c.invokeFunction(qR,r);super(e,t,i,n,{keyboardSupport:!1,...d,horizontalScrolling:h}),this.disposables=new Ze,this.disposables.add(g),this.contextKeyService=zR(o,this),this.disposables.add(UR(this.contextKeyService,this.widget)),this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=HR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),WR.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=Fd(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(b=>{b.affectsConfiguration(q0)&&(this._useAltAsMultipleSelectionModifier=Fd(l));let C={};if(b.affectsConfiguration(yc)&&this.horizontalScrolling===void 0){const S=!!l.getValue(yc);C={...C,horizontalScrolling:S}}if(b.affectsConfiguration(uh)){const S=!!l.getValue(uh);C={...C,scrollByPage:S}}if(b.affectsConfiguration(hh)){const S=!!l.getValue(hh);C={...C,smoothScrolling:S}}if(b.affectsConfiguration(Pd)){const S=l.getValue(Pd);C={...C,mouseWheelScrollSensitivity:S}}if(b.affectsConfiguration(Bd)){const S=l.getValue(Bd);C={...C,fastScrollSensitivity:S}}Object.keys(C).length>0&&this.updateOptions(C)})),this.navigator=new WX(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Y2(e):K2)}dispose(){this.disposables.dispose(),super.dispose()}};mq=Tg([Yi(5,ai),Yi(6,qd),Yi(7,cn),Yi(8,Zt)],mq);let pq=class extends bCe{constructor(e,t,i,n,r,o,a,l,c,h){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(yc),[g,_]=h.invokeFunction(qR,o);super(e,t,i,n,r,{keyboardSupport:!1,...g,horizontalScrolling:d}),this.disposables.add(_),this.contextKeyService=zR(a,this),this.disposables.add(UR(this.contextKeyService,this)),this.listSupportsMultiSelect=HR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),WR.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=nF.bindTo(this.contextKeyService),this.listDoubleSelection=sF.bindTo(this.contextKeyService),this.listMultiSelection=rF.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Fd(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const C=this.getSelection(),S=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(C.length>0||S.length>0),this.listMultiSelection.set(C.length>1),this.listDoubleSelection.set(C.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const C=this.getSelection(),S=this.getFocus();this.listHasSelectionOrFocus.set(C.length>0||S.length>0)})),this.disposables.add(c.onDidChangeConfiguration(C=>{C.affectsConfiguration(q0)&&(this._useAltAsMultipleSelectionModifier=Fd(c));let S={};if(C.affectsConfiguration(yc)&&this.horizontalScrolling===void 0){const E=!!c.getValue(yc);S={...S,horizontalScrolling:E}}if(C.affectsConfiguration(uh)){const E=!!c.getValue(uh);S={...S,scrollByPage:E}}if(C.affectsConfiguration(hh)){const E=!!c.getValue(hh);S={...S,smoothScrolling:E}}if(C.affectsConfiguration(Pd)){const E=c.getValue(Pd);S={...S,mouseWheelScrollSensitivity:E}}if(C.affectsConfiguration(Bd)){const E=c.getValue(Bd);S={...S,fastScrollSensitivity:E}}Object.keys(S).length>0&&this.updateOptions(S)})),this.navigator=new jCe(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Y2(e):K2)}dispose(){this.disposables.dispose(),super.dispose()}};pq=Tg([Yi(6,ai),Yi(7,qd),Yi(8,cn),Yi(9,Zt)],pq);class cF extends pe{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new ne),this.onDidOpen=this._onDidOpen.event,this._register(Ie.filter(this.widget.onDidChangeSelection,i=>Kf(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue($D)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration($D)&&(this.openOnSingleClick=t?.configurationService.getValue($D)!=="doubleClick")}))):this.openOnSingleClick=t?.openOnSingleClick??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,n=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,n,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const n=t.button===1,r=!0,o=n,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,i,n,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:n,element:e,browserEvent:r})}}class WX extends cF{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class jCe extends cF{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class GCe extends cF{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function KCe(s){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=s.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let DI=class extends eF{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,r,o,a,l,c){const{options:h,getTypeNavigationMode:d,disposable:g}=o.invokeFunction(Q2,r);super(e,t,i,n,h),this.disposables.add(g),this.internals=new L0(this,r,d,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};DI=Tg([Yi(5,Zt),Yi(6,ai),Yi(7,qd),Yi(8,cn)],DI);let _q=class extends AX{constructor(e,t,i,n,r,o,a,l,c){const{options:h,getTypeNavigationMode:d,disposable:g}=o.invokeFunction(Q2,r);super(e,t,i,n,h),this.disposables.add(g),this.internals=new L0(this,r,d,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};_q=Tg([Yi(5,Zt),Yi(6,ai),Yi(7,qd),Yi(8,cn)],_q);let bq=class extends BCe{constructor(e,t,i,n,r,o,a,l,c,h){const{options:d,getTypeNavigationMode:g,disposable:_}=a.invokeFunction(Q2,o);super(e,t,i,n,r,d),this.disposables.add(_),this.internals=new L0(this,o,g,o.overrideStyles,l,c,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};bq=Tg([Yi(6,Zt),Yi(7,ai),Yi(8,qd),Yi(9,cn)],bq);let vq=class extends MX{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,n,r,o,a,l,c,h){const{options:d,getTypeNavigationMode:g,disposable:_}=a.invokeFunction(Q2,o);super(e,t,i,n,r,d),this.disposables.add(_),this.internals=new L0(this,o,g,o.overrideStyles,l,c,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};vq=Tg([Yi(6,Zt),Yi(7,ai),Yi(8,qd),Yi(9,cn)],vq);let wq=class extends OCe{constructor(e,t,i,n,r,o,a,l,c,h,d){const{options:g,getTypeNavigationMode:_,disposable:b}=l.invokeFunction(Q2,a);super(e,t,i,n,r,o,g),this.disposables.add(b),this.internals=new L0(this,a,_,a.overrideStyles,c,h,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};wq=Tg([Yi(7,Zt),Yi(8,ai),Yi(9,qd),Yi(10,cn)],wq);function zX(s){const e=s.getValue(oF);if(e==="highlight")return Ll.Highlight;if(e==="filter")return Ll.Filter;const t=s.getValue(LI);if(t==="simple"||t==="highlight")return Ll.Highlight;if(t==="filter")return Ll.Filter}function UX(s){const e=s.getValue(lF);if(e==="fuzzy")return Qu.Fuzzy;if(e==="contiguous")return Qu.Contiguous}function Q2(s,e){const t=s.get(cn),i=s.get(W2),n=s.get(ai),r=s.get(Zt),o=()=>{const g=n.getContextKeyValue(VX);if(g==="automatic")return _d.Automatic;if(g==="trigger"||n.getContextKeyValue(HX)===!1)return _d.Trigger;const b=t.getValue(aF);if(b==="automatic")return _d.Automatic;if(b==="trigger")return _d.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(yc),[l,c]=r.invokeFunction(qR,e),h=e.paddingBottom,d=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(xI);return{getTypeNavigationMode:o,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(r2)=="number"?t.getValue(r2):void 0,renderIndentGuides:d,smoothScrolling:!!t.getValue(hh),defaultFindMode:zX(t),defaultFindMatchType:UX(t),horizontalScrolling:a,scrollByPage:!!t.getValue(uh),paddingBottom:h,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(kI)==="doubleClick",contextViewProvider:i,findWidgetStyles:Ave,enableStickyScroll:!!t.getValue(EI),stickyScrollMaxItemCount:Number(t.getValue(TI))}}}let L0=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,n,r,o,a){this.tree=e,this.disposables=[],this.contextKeyService=zR(r,e),this.disposables.push(UR(this.contextKeyService,e)),this.listSupportsMultiSelect=HR.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),WR.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=VCe.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=nF.bindTo(this.contextKeyService),this.hasDoubleSelection=sF.bindTo(this.contextKeyService),this.hasMultiSelection=rF.bindTo(this.contextKeyService),this.treeElementCanCollapse=HCe.bindTo(this.contextKeyService),this.treeElementHasParent=WCe.bindTo(this.contextKeyService),this.treeElementCanExpand=zCe.bindTo(this.contextKeyService),this.treeElementHasChild=UCe.bindTo(this.contextKeyService),this.treeFindOpen=qCe.bindTo(this.contextKeyService),this.treeStickyScrollFocused=FX.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Fd(a),this.updateStyleOverrides(n);const c=()=>{const d=e.getFocus()[0];if(!d)return;const g=e.getNode(d);this.treeElementCanCollapse.set(g.collapsible&&!g.collapsed),this.treeElementHasParent.set(!!e.getParentElement(d)),this.treeElementCanExpand.set(g.collapsible&&g.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(d))},h=new Set;h.add(VX),h.add(HX),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const d=e.getSelection(),g=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(d.length>0||g.length>0),this.hasMultiSelection.set(d.length>1),this.hasDoubleSelection.set(d.length===2)})}),e.onDidChangeFocus(()=>{const d=e.getSelection(),g=e.getFocus();this.hasSelectionOrFocus.set(d.length>0||g.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(d=>this.treeFindOpen.set(d)),e.onDidChangeStickyScrollFocused(d=>this.treeStickyScrollFocused.set(d)),a.onDidChangeConfiguration(d=>{let g={};if(d.affectsConfiguration(q0)&&(this._useAltAsMultipleSelectionModifier=Fd(a)),d.affectsConfiguration(r2)){const _=a.getValue(r2);g={...g,indent:_}}if(d.affectsConfiguration(xI)&&t.renderIndentGuides===void 0){const _=a.getValue(xI);g={...g,renderIndentGuides:_}}if(d.affectsConfiguration(hh)){const _=!!a.getValue(hh);g={...g,smoothScrolling:_}}if(d.affectsConfiguration(oF)||d.affectsConfiguration(LI)){const _=zX(a);g={...g,defaultFindMode:_}}if(d.affectsConfiguration(aF)||d.affectsConfiguration(LI)){const _=i();g={...g,typeNavigationMode:_}}if(d.affectsConfiguration(lF)){const _=UX(a);g={...g,defaultFindMatchType:_}}if(d.affectsConfiguration(yc)&&t.horizontalScrolling===void 0){const _=!!a.getValue(yc);g={...g,horizontalScrolling:_}}if(d.affectsConfiguration(uh)){const _=!!a.getValue(uh);g={...g,scrollByPage:_}}if(d.affectsConfiguration(kI)&&t.expandOnlyOnTwistieClick===void 0&&(g={...g,expandOnlyOnTwistieClick:a.getValue(kI)==="doubleClick"}),d.affectsConfiguration(EI)){const _=a.getValue(EI);g={...g,enableStickyScroll:_}}if(d.affectsConfiguration(TI)){const _=Math.max(1,a.getValue(TI));g={...g,stickyScrollMaxItemCount:_}}if(d.affectsConfiguration(Pd)){const _=a.getValue(Pd);g={...g,mouseWheelScrollSensitivity:_}}if(d.affectsConfiguration(Bd)){const _=a.getValue(Bd);g={...g,fastScrollSensitivity:_}}Object.keys(g).length>0&&e.updateOptions(g)}),this.contextKeyService.onDidChangeContext(d=>{d.affectsSome(h)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new GCe(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Y2(e):K2)}dispose(){this.disposables=Cs(this.disposables)}};L0=Tg([Yi(4,ai),Yi(5,qd),Yi(6,cn)],L0);const YCe=or.as(P0.Configuration);YCe.registerConfiguration({id:"workbench",order:7,title:y(1688,"Workbench"),type:"object",properties:{[q0]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[y(1689,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),y(1690,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:y(1691,"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[$D]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:y(1692,"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[yc]:{type:"boolean",default:!1,description:y(1693,"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[uh]:{type:"boolean",default:!1,description:y(1694,"Controls whether clicks in the scrollbar scroll page by page.")},[r2]:{type:"number",default:8,minimum:4,maximum:40,description:y(1695,"Controls tree indentation in pixels.")},[xI]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:y(1696,"Controls whether the tree should render indent guides.")},[hh]:{type:"boolean",default:!1,description:y(1697,"Controls whether lists and trees have smooth scrolling.")},[Pd]:{type:"number",default:1,markdownDescription:y(1698,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Bd]:{type:"number",default:5,markdownDescription:y(1699,"Scrolling speed multiplier when pressing `Alt`.")},[oF]:{type:"string",enum:["highlight","filter"],enumDescriptions:[y(1700,"Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),y(1701,"Filter elements when searching.")],default:"highlight",description:y(1702,"Controls the default find mode for lists and trees in the workbench.")},[LI]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[y(1703,"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),y(1704,"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),y(1705,"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:y(1706,"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:y(1707,"Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[lF]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[y(1708,"Use fuzzy matching when searching."),y(1709,"Use contiguous matching when searching.")],default:"fuzzy",description:y(1710,"Controls the type of matching used when searching lists and trees in the workbench.")},[kI]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:y(1711,"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[EI]:{type:"boolean",default:!0,description:y(1712,"Controls whether sticky scrolling is enabled in trees.")},[TI]:{type:"number",minimum:1,default:7,markdownDescription:y(1713,"Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[aF]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:y(1714,"Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});var $R=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},u8=function(s,e){return function(t,i){e(t,i,s)}},h8;const nd=ot;class qX{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new po(()=>{const n=i.label??"",r=T1(n).text.trim(),o=i.ariaLabel||[n,this.saneDescription,this.saneDetail].map(a=>kZ(a)).filter(a=>!!a).join(", ");return{saneLabel:n,saneSortLabel:r,saneAriaLabel:o}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class pr extends qX{constructor(e,t,i,n,r,o,a){super(e,i,o),this.childIndex=t,this.fireButtonTriggered=n,this._onChecked=r,this.item=o,this._separator=a,this._checked=!1,this.onChecked=i?Ie.map(Ie.filter(this._onChecked.event,l=>l.element===this),l=>l.checked):Ie.None,this._saneDetail=o.detail,this._labelHighlights=o.highlights?.label,this._descriptionHighlights=o.highlights?.description,this._detailHighlights=o.highlights?.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var dd;(function(s){s[s.NONE=0]="NONE",s[s.MOUSE_HOVER=1]="MOUSE_HOVER",s[s.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(dd||(dd={}));class j_ extends qX{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=dd.NONE}}class ZCe{getHeight(e){return e instanceof j_?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof pr?NI.ID:II.ID}}class XCe{getWidgetAriaLabel(){return y(1753,"Quick Input")}getAriaLabel(e){return e.separator?.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof pr)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class $X{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new Ze,t.toDisposeTemplate=new Ze,t.entry=Qe(e,nd(".quick-input-list-entry"));const i=Qe(t.entry,nd("label.quick-input-list-label"));t.outerLabel=i,t.checkbox=t.toDisposeTemplate.add(new qs),t.toDisposeTemplate.add(Cr(i,Re.CLICK,c=>{if(t.checkbox.value&&!c.defaultPrevented&&t.checkbox.value.enabled){const h=!t.checkbox.value.checked;t.checkbox.value.checked=h,t.element.checked=h}}));const n=Qe(i,nd(".quick-input-list-rows")),r=Qe(n,nd(".quick-input-list-row")),o=Qe(n,nd(".quick-input-list-row"));t.label=new r8(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=sR(t.label.element,nd(".quick-input-list-icon"));const a=Qe(r,nd(".quick-input-list-entry-keybinding"));t.keybinding=new GB(a,tu),t.toDisposeTemplate.add(t.keybinding);const l=Qe(o,nd(".quick-input-list-label-meta"));return t.detail=new r8(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=Qe(t.entry,nd(".quick-input-list-separator")),t.actionBar=new kd(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}var e0;let NI=(e0=class extends $X{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return h8.ID}ensureCheckbox(e,t){if(!e.hasCheckbox){t.checkbox.value?.domNode.remove(),t.checkbox.clear();return}let i=t.checkbox.value;i?i.setTitle(e.saneLabel):(i=new vX(e.saneLabel,e.checked,{...$B,size:15}),t.checkbox.value=i,t.outerLabel.prepend(i.domNode)),e.checkboxDisabled?i.disable():i.enable(),i.checked=e.checked,t.toDisposeElement.add(e.onChecked(n=>i.checked=n)),t.toDisposeElement.add(i.onChange(()=>e.checked=i.checked))}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0;const r=n.item;n.element.classList.toggle("not-pickable",n.item.pickable===!1),this.ensureCheckbox(n,i);const{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=n;if(r.iconPath){const g=B2(this.themeService.getColorTheme().type)?r.iconPath.dark:r.iconPath.light??r.iconPath.dark,_=Ot.revive(g);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=Od(_)}else i.icon.style.backgroundImage="",i.icon.className=r.iconClass?`quick-input-list-icon ${r.iconClass}`:"";let c;!n.saneTooltip&&n.saneDescription&&(c={markdown:{value:su(n.saneDescription),supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const h={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(h.extraClasses=r.iconClasses,h.italic=r.italic,h.strikethrough=r.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,h),i.keybinding.set(r.keybinding),n.saneDetail){let g;n.saneTooltip||(g={markdown:{value:su(n.saneDetail),supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(n.saneDetail,void 0,{matches:l,title:g,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";n.separator?.label?(i.separator.textContent=n.separator.label,i.separator.style.display="",this.addItemWithSeparator(n)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!n.separator&&n.childIndex!==0);const d=r.buttons;d&&d.length?(i.actionBar.push(d.map((g,_)=>zw(g,`id-${_}`,()=>n.fireButtonTriggered({button:g,item:n.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},h8=e0,e0.ID="quickpickitem",e0);NI=h8=$R([u8(1,za)],NI);const MA=class MA extends $X{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return MA.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderElement(e,t,i){const n=e.element;i.element=n,n.element=i.entry??void 0,n.element.classList.toggle("focus-inside",!!n.focusInsideSeparator);const r=n.separator,{labelHighlights:o,descriptionHighlights:a}=n;i.icon.style.backgroundImage="",i.icon.className="";let l;!n.saneTooltip&&n.saneDescription&&(l={markdown:{value:su(n.saneDescription),supportThemeIcons:!0},markdownNotSupportedFallback:n.saneDescription});const c={matches:o||[],descriptionTitle:l,descriptionMatches:a||[],labelEscapeNewLines:!0};i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(n.saneLabel,n.saneDescription,c),i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const h=r.buttons;h&&h.length?(i.actionBar.push(h.map((d,g)=>zw(d,`id-${g}`,()=>n.fireSeparatorButtonTriggered({button:d,separator:n.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(n)}disposeElement(e,t,i){this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||e.element.element?.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};MA.ID="quickpickseparator";let II=MA,o2=class extends pe{constructor(e,t,i,n,r,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=o,this._onKeyDown=new ne,this._onLeave=new ne,this.onLeave=this._onLeave.event,this._visibleCountObservable=xt("VisibleCount",0),this.onChangedVisibleCount=Ie.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=xt("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=Ie.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=xt("CheckedCount",0),this.onChangedCheckedCount=Ie.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=lL({equalsFn:vs},new Array),this.onChangedCheckedElements=Ie.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new ne,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new ne,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new ne,this._elementCheckedEventBufferer=new w2,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new Ze),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=Qe(this.parent,nd(".quick-input-list")),this._separatorRenderer=new II(t),this._itemRenderer=r.createInstance(NI,t),this._tree=this._register(r.createInstance(DI,"QuickInput",this._container,new ZCe,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof j_?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return JCe(a,l,c)}},accessibilityProvider:new XCe,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:S0.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=n,this._registerListeners()}get onDidChangeFocus(){return Ie.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof pr).map(t=>t.item),this._store)}get onDidChangeSelection(){return Ie.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof pr).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new Mi(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(ue(this._container,Re.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(ue(this._container,Re.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new uG(typeof this.hoverDelegate.delay=="function"?this.hoverDelegate.delay():this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{if(eH(t.browserEvent.target)){e.cancel();return}if(!(!eH(t.browserEvent.relatedTarget)&&zs(t.browserEvent.relatedTarget,t.element?.element)))try{await e.trigger(async()=>{t.element instanceof pr&&this.showHover(t.element)})}catch(i){if(!v2(i))throw i}})),this._register(this._tree.onMouseOut(t=>{zs(t.browserEvent.relatedTarget,t.element?.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const n=i===t;!!(i.focusInsideSeparator&dd.ACTIVE_ITEM)!==n&&(n?i.focusInsideSeparator|=dd.ACTIVE_ITEM:i.focusInsideSeparator&=~dd.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&dd.MOUSE_HOVER)||(i.focusInsideSeparator|=dd.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&dd.MOUSE_HOVER)&&(i.focusInsideSeparator&=~dd.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof pr);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof j_&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&t.item.pickable!==!1&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((i,n,r)=>{let o;if(n.type==="separator"){if(!n.buttons)return i;t=new j_(r,a=>this._onSeparatorButtonTriggered.fire(a),n),o=t}else{const a=r>0?e[r-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(l=a);const c=new pr(r,t?.children?t.children.length:r,this._hasCheckboxes&&n.pickable!==!1,h=>this._onButtonTriggered.fire(h),this._elementChecked,n,l);if(this._itemElements.push(c),t)return t.children.push(c),i;o=c}return i.push(o),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const i=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),n=i?.parentNode;if(i&&n){const r=i.nextSibling;i.remove(),n.insertBefore(i,r)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(n=>n.item===i)).filter(i=>!!i).filter(i=>!i.hidden);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(n=>n.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)})}focus(e){if(this._itemElements.length)switch(e===$i.Second&&this._itemElements.length<2&&(e=$i.First),e){case $i.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,t=>t.element instanceof pr);break;case $i.Second:{this._tree.scrollTop=0;let t=!1;this._tree.focusFirst(void 0,i=>i.element instanceof pr?t?!0:(t=!t,!1):!1);break}case $i.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,t=>t.element instanceof pr);break;case $i.Next:{const t=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,n=>n.element instanceof pr?(this._tree.reveal(n.element),!0):!1);const i=this._tree.getFocus();t.length&&t[0]===i[0]&&this._onLeave.fire();break}case $i.Previous:{const t=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,n=>{if(!(n.element instanceof pr))return!1;const r=this._tree.getParentElement(n.element);return r===null||r.children[0]!==n.element?this._tree.reveal(n.element):this._tree.reveal(r),!0});const i=this._tree.getFocus();t.length&&t[0]===i[0]&&this._onLeave.fire();break}case $i.NextPage:this._tree.focusNextPage(void 0,t=>t.element instanceof pr?(this._tree.reveal(t.element),!0):!1);break;case $i.PreviousPage:this._tree.focusPreviousPage(void 0,t=>{if(!(t.element instanceof pr))return!1;const i=this._tree.getParentElement(t.element);return i===null||i.children[0]!==t.element?this._tree.reveal(t.element):this._tree.reveal(i),!0});break;case $i.NextSeparator:{let t=!1;const i=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,r=>{if(t)return!0;if(r.element instanceof j_)t=!0,this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element.children[0]):this._tree.reveal(r.element,0);else if(r.element instanceof pr){if(r.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),!0;if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1});const n=this._tree.getFocus()[0];i===n&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,r=>r.element instanceof pr));break}case $i.PreviousSeparator:{let t,i=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,n=>{if(n.element instanceof j_)i?t||(this._separatorRenderer.isSeparatorVisible(n.element)?this._tree.reveal(n.element):this._tree.reveal(n.element,0),t=n.element.children[0]):i=!0;else if(n.element instanceof pr&&!t){if(n.element.separator)this._itemRenderer.isItemWithSeparatorVisible(n.element)?this._tree.reveal(n.element):this._tree.reveal(n.element,0),t=n.element;else if(n.element===this._elementTree[0])return this._tree.reveal(n.element,0),!0}return!1}),t&&this._tree.setFocus([t]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const n=i.index&&this._inputElements[i.index-1];i.item&&(i.separator=n&&n.type==="separator"&&!n.buttons?n:void 0)});else{let i;this._itemElements.forEach(n=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?DL(e,T1(n.saneLabel))??void 0:void 0:r=this.matchOnLabel?QCe(t,T1(n.saneLabel))??void 0:void 0;const o=this.matchOnDescription?DL(e,T1(n.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?DL(e,T1(n.saneDetail||""))??void 0:void 0;if(r||o||a?(n.labelHighlights=r,n.descriptionHighlights=o,n.detailHighlights=a,n.hidden=!1):(n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=n.item?!n.item.alwaysShow:!0),n.item?n.separator=void 0:n.separator&&(n.hidden=!0),!this.sortByLabel){const l=n.index&&this._inputElements[n.index-1]||void 0;l?.type==="separator"&&!l.buttons&&(i=l),i&&!n.hidden&&(n.separator=i,i=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(i=>i instanceof pr),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!e?.saneTooltip||!(e instanceof pr))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new Ze;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof pr&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof j_?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(n=>({element:n,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,n=e.length;i<n;i++){const r=e[i];if(!r.hidden&&r.item.pickable!==!1)if(r.checked)t=!0;else return!1}return t}_updateCheckedObservables(){Un(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(i=>i.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:t=>{this.linkOpenerDelegate(t)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};$R([En],o2.prototype,"onDidChangeFocus",null);$R([En],o2.prototype,"onDidChangeSelection",null);o2=$R([u8(4,Zt),u8(5,Ol)],o2);function QCe(s,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return Cq(s,t);const n=ZA(t," "),r=t.length-n.length,o=Cq(s,n);if(o)for(const a of o){const l=i[a.start+r]+r;a.start+=l,a.end+=l}return o}function Cq(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t!==-1?[{start:t,end:t+s.length}]:null}function JCe(s,e,t){const i=s.labelHighlights||[],n=e.labelHighlights||[];return i.length&&!n.length?-1:!i.length&&n.length?1:i.length===0&&n.length===0?0:tCe(s.saneSortLabel,e.saneSortLabel,t)}function eye(s,e={}){_p.registerCommandAndKeybindingRule({weight:200,when:VR,metadata:{description:y(1741,"Used while in the context of any kind of quick input. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")},...s,secondary:uF(s.primary,s.secondary??[],e)})}function Zo(s,e={}){_p.registerCommandAndKeybindingRule({weight:200,when:Kt.and(Kt.or(Kt.equals(i2,"quickPick"),Kt.equals(i2,"quickTree")),VR),metadata:{description:y(1742,"Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")},...s,secondary:uF(s.primary,s.secondary??[],e)})}const a2=Bt?256:2048;function uF(s,e,t={}){return t.withAltMod&&e.push(512+s),t.withCtrlMod&&(e.push(a2+s),t.withAltMod&&e.push(512+a2+s)),t.withCmdMod&&Bt&&(e.push(2048+s),t.withCtrlMod&&e.push(2304+s),t.withAltMod&&(e.push(2560+s),t.withCtrlMod&&e.push(2816+s))),e}function bl(s,e){return t=>{const i=t.get(z0).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(s)}}Zo({id:"quickInput.pageNext",primary:12,handler:bl($i.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Zo({id:"quickInput.pagePrevious",primary:11,handler:bl($i.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Zo({id:"quickInput.first",primary:a2+14,handler:bl($i.First)},{withAltMod:!0,withCmdMod:!0});Zo({id:"quickInput.last",primary:a2+13,handler:bl($i.Last)},{withAltMod:!0,withCmdMod:!0});Zo({id:"quickInput.next",primary:18,handler:bl($i.Next)},{withCtrlMod:!0});Zo({id:"quickInput.previous",primary:16,handler:bl($i.Previous)},{withCtrlMod:!0});const yq=y(1743,"If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),Sq=y(1744,"If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");Bt?(Zo({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:bl($i.NextSeparator,$i.Next),metadata:{description:yq}}),Zo({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:bl($i.NextSeparator)},{withCtrlMod:!0}),Zo({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:bl($i.PreviousSeparator,$i.Previous),metadata:{description:Sq}}),Zo({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:bl($i.PreviousSeparator)},{withCtrlMod:!0})):(Zo({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:bl($i.NextSeparator,$i.Next),metadata:{description:yq}}),Zo({id:"quickInput.nextSeparator",primary:2578,handler:bl($i.NextSeparator)}),Zo({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:bl($i.PreviousSeparator,$i.Previous),metadata:{description:Sq}}),Zo({id:"quickInput.previousSeparator",primary:2576,handler:bl($i.PreviousSeparator)}));_p.registerCommandAndKeybindingRule({id:"quickInput.accept",primary:3,weight:200,when:Kt.and(Kt.notEquals(i2,"quickWidget"),VR),metadata:{description:y(1745,"Used while in the context of some quick input. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")},handler:s=>{s.get(z0).currentQuickInput?.accept()},secondary:uF(3,[],{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0})});Zo({id:"quickInput.acceptInBackground",when:Kt.and(VR,Kt.equals(i2,"quickPick"),Kt.or(PX.negate(),fwe)),primary:17,weight:250,handler:s=>{s.get(z0).currentQuickInput?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});eye({id:"quickInput.hide",primary:9,handler:s=>{s.get(z0).currentQuickInput?.hide()}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Zo({id:"quickInput.toggleHover",primary:a2|10,handler:s=>{s.get(z0).toggleHover()}});var tye=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},iye=function(s,e){return function(t,i){e(t,i,s)}},d8;const MS=ot;var t0;let AI=(t0=class extends pe{constructor(e,t,i,n){super(),this._hoverDelegate=e,this._buttonTriggeredEmitter=t,this.onCheckedEvent=i,this._themeService=n,this.templateId=d8.ID}renderTemplate(e){const t=new Ze,i=Qe(e,MS(".quick-input-tree-entry")),n=t.add(new wX("",!1,{...$B,size:15}));i.appendChild(n.domNode);const r=Qe(i,MS("label.quick-input-tree-label")),o=Qe(r,MS(".quick-input-tree-rows")),a=Qe(o,MS(".quick-input-tree-row")),l=sR(a,MS(".quick-input-tree-icon")),c=t.add(new r8(a,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this._hoverDelegate})),h=t.add(new kd(i,this._hoverDelegate?{hoverDelegate:this._hoverDelegate}:void 0));return h.domNode.classList.add("quick-input-tree-entry-action-bar"),{toDisposeTemplate:t,entry:i,checkbox:n,icon:l,label:c,actionBar:h,toDisposeElement:new Ze}}renderElement(e,t,i,n){const r=i.toDisposeElement,o=e.element;if(o.pickable===!1?i.checkbox.domNode.style.display="none":(i.checkbox.domNode.style.display="",i.checkbox.checked=o.checked??!1,r.add(Ie.filter(this.onCheckedEvent,d=>d.item===o)(d=>i.checkbox.checked=d.checked)),o.disabled&&i.checkbox.disable()),o.iconPath){const d=B2(this._themeService.getColorTheme().type)?o.iconPath.dark:o.iconPath.light??o.iconPath.dark,g=Ot.revive(d);i.icon.className="quick-input-tree-icon",i.icon.style.backgroundImage=Od(g)}else i.icon.style.backgroundImage="",i.icon.className=o.iconClass?`quick-input-tree-icon ${o.iconClass}`:"";const{labelHighlights:a,descriptionHighlights:l}=e.filterData||{};let c;o.description&&(c={markdown:{value:su(o.description),supportThemeIcons:!0},markdownNotSupportedFallback:o.description}),i.label.setLabel(o.label,o.description,{matches:a,descriptionMatches:l,extraClasses:o.iconClasses,italic:o.italic,strikethrough:o.strikethrough,labelEscapeNewLines:!0,descriptionTitle:c});const h=o.buttons;h&&h.length?(i.actionBar.push(h.map((d,g)=>zw(d,`tree-${g}`,()=>this._buttonTriggeredEmitter.fire({item:o,button:d}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i,n){i.toDisposeElement.clear(),i.actionBar.clear()}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}},d8=t0,t0.ID="quickInputTreeElement",t0);AI=d8=tye([iye(3,za)],AI);class nye{getHeight(e){return 22}getTemplateId(e){return AI.ID}}function sye(s){let e=!1,t=!1,i=!1;for(const r of s){switch(r.element?.checked){case"partial":i=!0;break;case!0:e=!0;break;default:t=!0;break}if(e&&t&&i)break}return t?i||e?"partial":!1:i?"partial":e}class rye{constructor(e){this.onCheckedEvent=e}getWidgetAriaLabel(){return y(1755,"Quick Tree")}getAriaLabel(e){return e.ariaLabel||[e.label,e.description].map(t=>kZ(t)).filter(t=>!!t).join(", ")}getWidgetRole(){return"tree"}getRole(e){return"checkbox"}isChecked(e){return{get value(){return e.checked===!0},onDidChange:t=>Ie.filter(this.onCheckedEvent,i=>i.item===e)(i=>t())}}}class oye{constructor(){this.filterValue="",this.matchOnLabel=!0,this.matchOnDescription=!1}filter(e,t){if(!this.filterValue||!(this.matchOnLabel||this.matchOnDescription))return e.children?{visibility:2,data:{}}:{visibility:1,data:{}};const i=this.matchOnLabel?DL(this.filterValue,T1(e.label))??void 0:void 0,n=this.matchOnDescription?DL(this.filterValue,T1(e.description||""))??void 0:void 0;return{visibility:t===1||i||n?1:e.children?2:0,data:{labelHighlights:i,descriptionHighlights:n}}}}var aye=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},lye=function(s,e){return function(t,i){e(t,i,s)}};const cye=ot;let f8=class extends pe{constructor(e,t,i){super(),this.instantiationService=i,this._onDidTriggerButton=this._register(new ne),this._onDidChangeCheckboxState=this._register(new ne),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidCheckedLeafItemsChange=this._register(new ne),this._onLeave=new ne,this.onLeave=this._onLeave.event,this._onDidAccept=this._register(new ne),this.onDidAccept=this._onDidAccept.event,this._container=Qe(e,cye(".quick-input-tree")),this._renderer=this._register(this.instantiationService.createInstance(AI,t,this._onDidTriggerButton,this.onDidChangeCheckboxState)),this._filter=this.instantiationService.createInstance(oye),this._tree=this._register(this.instantiationService.createInstance(DI,"QuickInputTree",this._container,new nye,[this._renderer],{accessibilityProvider:new rye(this.onDidChangeCheckboxState),horizontalScrolling:!1,multipleSelectionSupport:!1,findWidgetEnabled:!1,alwaysConsumeMouseWheel:!0,hideTwistiesOfChildlessElements:!0,renderIndentGuides:S0.None,expandOnDoubleClick:!0,expandOnlyOnTwistieClick:!0,disableExpandOnSpacebar:!0,sorter:{compare:(n,r)=>{if(n.label<r.label)return-1;if(n.label>r.label)return 1;if(n.description&&r.description){if(n.description<r.description)return-1;if(n.description>r.description)return 1}else{if(n.description)return-1;if(r.description)return 1}return 0}},filter:this._filter})),this.registerOnOpenListener()}get tree(){return this._tree}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}registerOnOpenListener(){this._register(this._tree.onDidOpen(e=>{const t=e.element;if(!t||t.disabled)return;if(t.pickable===!1){this._tree.setFocus([t]),this._onDidAccept.fire();return}const i=t.checked!==!0;if((t.checked??!1)===i)return;t.checked=i,this._tree.rerender(t);const n=new Set,r=[...this._tree.getNode(t).children];for(;r.length;){const a=r.shift();a?.element&&!n.has(a.element)&&(n.add(a.element),(a.element.checked??!1)!==t.checked&&(a.element.checked=t.checked,this._tree.rerender(a.element)),r.push(...a.children))}let o=this._tree.getParentElement(t);for(;o;){const a=[...this._tree.getNode(o).children],l=sye(a);(o.checked??!1)!==l&&(o.checked=l,this._tree.rerender(o)),o=this._tree.getParentElement(o)}this._onDidChangeCheckboxState.fire({item:t,checked:t.checked??!1}),this._onDidCheckedLeafItemsChange.fire(this.getCheckedLeafItems())}))}getCheckedLeafItems(){const e=new Set,t=[...this._tree.getNode().children],i=new Array;for(;t.length;){const n=t.shift();!n?.element||e.has(n.element)||n.element.checked&&(e.add(n.element),t.push(...n.children),n.element.children||i.push(n.element))}return i}};f8=aye([lye(2,Zt)],f8);var jX=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},I1=function(s,e){return function(t,i){e(t,i,s)}},g8;const dl=ot,I5="workbench.quickInput.viewState";var i0;let m8=(i0=class extends pe{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,n,r){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.storageService=r,this.enabled=!0,this.onDidAcceptEmitter=this._register(new ne),this.onDidCustomEmitter=this._register(new ne),this.onDidTriggerButtonEmitter=this._register(new ne),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new ne),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new ne),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=lwe.bindTo(n),this.quickInputTypeContext=hwe.bindTo(n),this.endOfQuickInputBoxContext=dwe.bindTo(n),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Ie.runAndSubscribe(k2,({window:o,disposables:a})=>this.registerKeyModsListeners(o,a),{window:Ri,disposables:this._store})),this._register(Yne(o=>{this.ui&&nt(this.ui.container)===o&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))})),this.viewState=this.loadViewState()}registerKeyModsListeners(e,t){const i=n=>{this.keyMods.ctrlCmd=n.ctrlKey||n.metaKey,this.keyMods.alt=n.altKey};for(const n of[Re.KEY_DOWN,Re.KEY_UP,Re.MOUSE_DOWN])t.add(ue(e,n,i,!0))}getUI(e){if(this.ui)return e&&nt(this._container)!==nt(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=Qe(this._container,dl(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=ah(t),n=Qe(t,dl(".quick-input-titlebar")),r=this._register(new kd(n,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-left-action-bar");const o=Qe(n,dl(".quick-input-title")),a=this._register(new kd(n,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=Qe(t,dl(".quick-input-header")),c=this._register(new wX(y(1746,"Toggle all checkboxes"),!1,{...$B,size:15}));Qe(l,c.domNode),this._register(c.onChange(()=>{const X=c.checked;F.setAllVisibleChecked(X===!0)})),this._register(ue(c.domNode,Re.CLICK,X=>{(X.x||X.y)&&_.setFocus()}));const h=Qe(l,dl(".quick-input-description")),d=Qe(l,dl(".quick-input-and-message")),g=Qe(d,dl(".quick-input-filter")),_=this._register(new Mwe(g,this.styles.inputBox,this.styles.toggle));_.setAttribute("aria-describedby",`${this.idPrefix}message`);const b=Qe(g,dl(".quick-input-visible-count"));b.setAttribute("aria-live","polite"),b.setAttribute("aria-atomic","true");const C=this._register(new iq(b,{countFormat:y(1747,"{0} Results")},this.styles.countBadge)),S=Qe(g,dl(".quick-input-count"));S.setAttribute("aria-live","polite");const E=this._register(new iq(S,{countFormat:y(1748,"{0} Selected")},this.styles.countBadge)),x=this._register(new kd(l,{hoverDelegate:this.options.hoverDelegate}));x.domNode.classList.add("quick-input-inline-action-bar");const T=Qe(l,dl(".quick-input-action")),N=this._register(new i8(T,this.styles.button));N.label=y(1749,"OK"),this._register(N.onDidClick(X=>{this.onDidAcceptEmitter.fire()}));const A=Qe(l,dl(".quick-input-action")),P=this._register(new i8(A,{...this.styles.button,supportIcons:!0}));P.label=y(1750,"Custom"),this._register(P.onDidClick(X=>{this.onDidCustomEmitter.fire()}));const O=Qe(d,dl(`#${this.idPrefix}message.quick-input-message`)),V=this._register(new n8(t,this.styles.progressBar));V.getContainer().classList.add("quick-input-progress");const U=Qe(t,dl(".quick-input-html-widget"));U.tabIndex=-1;const Y=Qe(t,dl(".quick-input-description")),B=this.idPrefix+"list",F=this._register(this.instantiationService.createInstance(o2,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,B));_.setAttribute("aria-controls",B),this._register(F.onDidChangeFocus(()=>{_.hasFocus()&&_.setAttribute("aria-activedescendant",F.getActiveDescendant()??"")})),this._register(F.onChangedAllVisibleChecked(X=>{c.checked=X})),this._register(F.onChangedVisibleCount(X=>{C.setCount(X)})),this._register(F.onChangedCheckedCount(X=>{E.setCount(X)})),this._register(F.onLeave(()=>{setTimeout(()=>{this.controller&&(_.setFocus(),this.controller instanceof PL&&this.controller.canSelectMany&&F.clearFocus())},0)}));const W=this._register(this.instantiationService.createInstance(f8,t,this.options.hoverDelegate));this._register(W.tree.onDidChangeFocus(()=>{_.hasFocus()&&_.setAttribute("aria-activedescendant",W.getActiveDescendant()??"")})),this._register(W.onLeave(()=>{setTimeout(()=>{this.controller&&(_.setFocus(),W.tree.setFocus([]))},0)})),this._register(W.onDidAccept(()=>{this.onDidAcceptEmitter.fire()})),this._register(W.tree.onDidChangeContentHeight(()=>this.updateLayout()));const ee=iC(t);return this._register(ee),this._register(ue(t,Re.FOCUS,X=>{const $=this.getUI();if(zs(X.relatedTarget,$.inputContainer)){const te=$.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==te&&this.endOfQuickInputBoxContext.set(te)}zs(X.relatedTarget,$.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=qn(X.relatedTarget)?X.relatedTarget:void 0)},!0)),this._register(ee.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Xx.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(_.onKeyDown(X=>{const $=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==$&&this.endOfQuickInputBoxContext.set($),_.removeAttribute("aria-activedescendant")})),this._register(ue(t,Re.FOCUS,X=>{_.setFocus()})),this.dndController=this._register(this.instantiationService.createInstance(p8,this._container,t,[{node:n,includeChildren:!0},{node:l,includeChildren:!1}],this.viewState)),this._register(qt(X=>{const $=this.dndController?.dndViewState.read(X);$&&($.top!==void 0&&$.left!==void 0?this.viewState={...this.viewState,top:$.top,left:$.left}:this.viewState=void 0,this.updateLayout(),$.done&&this.saveViewState(this.viewState))})),this.ui={container:t,styleSheet:i,leftActionBar:r,titleBar:n,title:o,description1:Y,description2:h,widget:U,rightActionBar:a,inlineActionBar:x,checkAll:c,inputContainer:d,filterContainer:g,inputBox:_,visibleCountContainer:b,visibleCount:C,countContainer:S,count:E,okContainer:T,ok:N,message:O,customButtonContainer:A,customButton:P,list:F,tree:W,progressBar:V,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:X=>this.show(X),hide:()=>this.hide(),setVisibilities:X=>this.setVisibilities(X),setEnabled:X=>this.setEnabled(X),setContextKey:X=>this.options.setContextKey(X),linkOpenerDelegate:X=>this.options.linkOpenerDelegate(X)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,Qe(this._container,this.ui.container),this.dndController?.reparentUI(this._container))}pick(e,t={},i=Al.None){return new Promise((n,r)=>{let o=h=>{o=n,t.onKeyMods?.(a.keyMods),n(h)};if(i.isCancellationRequested){o(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(o(h),a.hide())}}),a.onDidChangeActive(h=>{const d=h[0];d&&t.onDidFocus&&t.onDidFocus(d)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const d=h[0];d&&(o(d),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...h,removeItem:()=>{const d=a.items.indexOf(h.item);if(d!==-1){const g=a.items.slice(),_=g.splice(d,1),b=a.activeItems.filter(S=>S!==_[0]),C=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=g,b&&(a.activeItems=b),a.keepScrollPosition=C}}})),a.onDidTriggerSeparatorButton(h=>t.onDidTriggerSeparatorButton?.(h)),a.onDidChangeValue(h=>{l&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Cs(c),o(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,t.sortByLabel!==void 0&&(a.sortByLabel=t.sortByLabel),a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,d])=>{l=d,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(g=>g.type!=="separator"&&g.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,h=>{r(h),a.hide()})})}setValidationOnInput(e,t){t&&rr(t)?(e.severity=Wn.Error,e.validationMessage=t):t&&!rr(t)?(e.severity=t.severity,e.validationMessage=t.content):(e.severity=Wn.Ignore,e.validationMessage=void 0)}input(e={},t=Al.None){return new Promise(i=>{if(t.isCancellationRequested){i(void 0);return}const n=this.createInputBox(),r=e.validateInput||(()=>Promise.resolve(void 0)),o=Ie.debounce(n.onDidChangeValue,(h,d)=>d,100);let a=e.value||"",l=Promise.resolve(r(a));const c=[n,o(h=>{h!==a&&(l=Promise.resolve(r(h)),a=h),l.then(d=>{h===a&&this.setValidationOnInput(n,d)})}),n.onDidAccept(()=>{const h=n.value;h!==a&&(l=Promise.resolve(r(h)),a=h),l.then(d=>{!d||!rr(d)&&d.severity!==Wn.Error?(i(h),n.hide()):h===a&&this.setValidationOnInput(n,d)})}),t.onCancellationRequested(()=>{n.hide()}),n.onDidHide(()=>{Cs(c),i(void 0)})];n.title=e.title,n.value=e.value||"",n.valueSelection=e.valueSelection,n.prompt=e.prompt,n.placeholder=e.placeHolder,n.password=!!e.password,n.ignoreFocusOut=!!e.ignoreFocusLost,n.show()})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new PL(t)}createInputBox(){const e=this.getUI(!0);return new gwe(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Pr(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Wn.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Pr(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const n=this.options.backKeybindingLabel();e8.tooltip=n?y(1751,"Back ({0})",n):y(1752,"Back"),t.container.style.display="",this.updateLayout(),this.dndController?.layoutContainer(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.domNode.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.tree.displayed=!!e.tree,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;const t=this.getUI();for(const i of t.leftActionBar.viewItems)i.action.enabled=e;for(const i of t.rightActionBar.viewItems)i.action.enabled=e;e?t.checkAll.enable():t.checkAll.disable(),t.inputBox.enabled=e,t.ok.enabled=e,t.list.enabled=e}}hide(e){const t=this.controller;if(!t)return;t.willHide(e);const i=this.ui?.container,n=i&&!SG(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!n){let r=this.previousFocusElement;for(;r&&!r.offsetParent;)r=r.parentElement??void 0;r?.offsetParent?(r.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}toggleHover(){this.isVisible()&&this.controller instanceof PL&&this.getUI().list.toggleHover()}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,g8.MAX_WIDTH);e.width=t+"px",e.top=`${this.viewState?.top?Math.round(this.dimension.height*this.viewState.top):this.titleBarOffset}px`,e.left=`${Math.round(this.dimension.width*(this.viewState?.left??.5)-t/2)}px`,this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4),this.ui.tree.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:n,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=n?`1px solid ${n}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.list.style(this.styles.list),this.ui.tree.tree.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}loadViewState(){try{const e=JSON.parse(this.storageService.get(I5,-1,"{}"));if(e.top!==void 0||e.left!==void 0)return e}catch{}}saveViewState(e){this.layoutService.activeContainer===this.layoutService.mainContainer&&(e!==void 0?this.storageService.store(I5,JSON.stringify(e),-1,1):this.storageService.remove(I5,-1))}},g8=i0,i0.MAX_WIDTH=600,i0);m8=g8=jX([I1(1,xg),I1(2,Zt),I1(3,ai),I1(4,$2)],m8);let p8=class extends pe{constructor(e,t,i,n,r,o,a){super(),this._container=e,this._quickInputContainer=t,this._quickInputDragAreas=i,this._layoutService=r,this.configurationService=a,this.dndViewState=xt(this,void 0),this._snapThreshold=20,this._snapLineHorizontalRatio=.25,this._quickInputAlignmentContext=uwe.bindTo(o);const l=Fve(this.configurationService)==="custom";this._controlsOnLeft=l&&pM===1,this._controlsOnRight=l&&(pM===3||pM===2),this._registerLayoutListener(),this.registerMouseListeners(),this.dndViewState.set({...n,done:!0},void 0)}reparentUI(e){this._container=e}layoutContainer(e=this._layoutService.activeContainerDimension){const t=this.dndViewState.get(),i=this._quickInputContainer.getBoundingClientRect();if(t?.top&&t?.left){const n=Math.round(t.left*100)/100,r=e.width,o=i.width,a=n*r-o/2;this._layout(t.top*e.height,a)}}_registerLayoutListener(){this._register(Ie.filter(this._layoutService.onDidLayoutContainer,e=>e.container===this._container)(e=>this.layoutContainer(e.dimension)))}registerMouseListeners(){const e=this._quickInputContainer;this._register(JV(e,t=>{const i=new kl(nt(e),t);i.detail===2&&this._quickInputDragAreas.some(({node:n,includeChildren:r})=>r?zs(i.target,n):i.target===n)&&this.dndViewState.set({top:void 0,left:void 0,done:!0},void 0)})),this._register(ese(e,t=>{const i=nt(this._layoutService.activeContainer),n=new kl(i,t);if(!this._quickInputDragAreas.some(({node:d,includeChildren:g})=>g?zs(n.target,d):n.target===d))return;const r=this._quickInputContainer.getBoundingClientRect(),o=n.browserEvent.clientX-r.left,a=n.browserEvent.clientY-r.top;let l=!1;const c=tse(i,d=>{new kl(i,d).preventDefault(),l||(l=!0),this._layout(d.clientY-a,d.clientX-o)}),h=JV(i,d=>{if(l){const g=this.dndViewState.get();this.dndViewState.set({top:g?.top,left:g?.left,done:!0},void 0)}c.dispose(),h.dispose()})}))}_layout(e,t){const i=this._getTopSnapValue(),n=this._getCenterYSnapValue(),r=this._getCenterXSnapValue();e=Math.max(0,Math.min(e,this._container.clientHeight-this._quickInputContainer.clientHeight)),e<this._layoutService.activeContainerOffset.top&&(this._controlsOnLeft?t=Math.max(t,80/m3(wi())):this._controlsOnRight&&(t=Math.min(t,this._container.clientWidth-this._quickInputContainer.clientWidth-140/m3(wi()))));const o=Math.abs(e-i)<this._snapThreshold;e=o?i:e;const a=Math.abs(e-n)<this._snapThreshold;e=a?n:e;const l=e/this._container.clientHeight;t=Math.max(0,Math.min(t,this._container.clientWidth-this._quickInputContainer.clientWidth));const c=Math.abs(t-r)<this._snapThreshold;t=c?r:t;const h=this._container.clientWidth,d=this._quickInputContainer.clientWidth,_=(t+d/2)/h;if(this.dndViewState.set({top:l,left:_,done:!1},void 0),c){if(o){this._quickInputAlignmentContext.set("top");return}else if(a){this._quickInputAlignmentContext.set("center");return}}this._quickInputAlignmentContext.set(void 0)}_getTopSnapValue(){return this._layoutService.activeContainerOffset.quickPickTop}_getCenterYSnapValue(){return Math.round(this._container.clientHeight*this._snapLineHorizontalRatio)}_getCenterXSnapValue(){return Math.round(this._container.clientWidth/2)-Math.round(this._quickInputContainer.clientWidth/2)}};p8=jX([I1(4,xg),I1(5,ai),I1(6,cn)],p8);var uye=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},OS=function(s,e){return function(t,i){e(t,i,s)}};let _8=class extends bhe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(J9))),this._quickAccess}constructor(e,t,i,n,r){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=n,this.configurationService=r,this._onShow=this._register(new ne),this._onHide=this._register(new ne),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:r=>this.setContextKey(r),linkOpenerDelegate:r=>{this.instantiationService.invokeFunction(o=>{o.get(z2).open(r,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(t8))},n=this._register(this.instantiationService.createInstance(m8,{...i,...t}));return n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(r=>{nt(e.activeContainer)===nt(n.container)&&n.layout(r,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{n.isVisible()||n.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(n.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(n.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),n}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new et(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=Al.None){return this.controller.pick(e,t,i)}input(e={},t=Al.None){return this.controller.input(e,t)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}toggleHover(){this.hasController&&this.controller.toggleHover()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Fe(FM),quickInputForeground:Fe(Uce),quickInputTitleBackground:Fe(qce),widgetBorder:Fe(EK),widgetShadow:Fe(M2)},inputBox:dX,toggle:hX,countBadge:Rve,button:Nve,progressBar:Ive,keybindingLabel:Dve,list:Y2({listBackground:FM,listFocusBackground:m7,listFocusForeground:g7,listInactiveFocusForeground:g7,listInactiveSelectionIconForeground:FK,listInactiveFocusBackground:m7,listFocusOutline:$n,listInactiveFocusOutline:$n,treeStickyScrollBackground:FM}),pickerGroup:{pickerGroupBorder:Fe($ce),pickerGroupForeground:Fe(BK)}}}};_8=uye([OS(0,Zt),OS(1,ai),OS(2,za),OS(3,xg),OS(4,cn)],_8);var GX=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},h1=function(s,e){return function(t,i){e(t,i,s)}};let b8=class extends _8{constructor(e,t,i,n,r,o){super(t,i,n,new l9(e.getContainerDomNode(),r),o),this.host=void 0;const a=l2.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Ie.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Ie.None},get onDidAddContainer(){return Ie.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};b8=GX([h1(1,Zt),h1(2,ai),h1(3,za),h1(4,Es),h1(5,cn)],b8);let v8=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(b8,e);this.mapEditorToService.set(e,t),dx(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,i=Al.None){return this.activeService.pick(e,t,i)}input(e,t){return this.activeService.input(e,t)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}toggleHover(){return this.activeService.toggleHover()}};v8=GX([h1(0,Zt),h1(1,Es)],v8);const OA=class OA{static get(e){return e.getContribution(OA.ID)}constructor(e){this.editor=e,this.widget=new w8(this.editor)}dispose(){this.widget.dispose()}};OA.ID="editor.controller.quickInput";let l2=OA;const PA=class PA{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return PA.ID}getDomNode(){return this.domNode}getPosition(){return{preference:{top:0,left:0}}}dispose(){this.codeEditor.removeOverlayWidget(this)}};PA.ID="editor.contrib.quickInputWidget";let w8=PA;FG(l2.ID,l2,4);class hye{constructor(e,t,i,n,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=n,this.background=r}}function dye(s){if(!s||!Array.isArray(s))return[];const e=[];let t=0;for(let i=0,n=s.length;i<n;i++){const r=s[i];let o=-1;if(typeof r.fontStyle=="string"){o=0;const c=r.fontStyle.split(" ");for(let h=0,d=c.length;h<d;h++)switch(c[h]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new hye(r.token||"",i,o,a,l)}return e}function fye(s,e){s.sort((h,d)=>{const g=bye(h.token,d.token);return g!==0?g:h.index-d.index});let t=0,i="000000",n="ffffff";for(;s.length>=1&&s[0].token==="";){const h=s.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(i=h.foreground),h.background!==null&&(n=h.background)}const r=new mye;for(const h of e)r.getId(h);const o=r.getId(i),a=r.getId(n),l=new hF(t,o,a),c=new dF(l);for(let h=0,d=s.length;h<d;h++){const g=s[h];c.insert(g.token,g.fontStyle,r.getId(g.foreground),r.getId(g.background))}return new KX(r,c)}const gye=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class mye{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(gye);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=xe.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class KX{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(dye(e),t)}static createFromParsedTokenTheme(e,t){return fye(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const n=this._match(t),r=_ye(t);i=(n.metadata|r<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const pye=/\b(comment|string|regex|regexp)\b/;function _ye(s){const e=s.match(pye);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function bye(s,e){return s<e?-1:s>e?1:0}class hF{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new hF(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class dF{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,n;t===-1?(i=e,n=""):(i=e.substring(0,t),n=e.substring(t+1));const r=this._children.get(i);return typeof r<"u"?r.match(n):this._mainRule}insert(e,t,i,n){if(e===""){this._mainRule.acceptOverwrite(t,i,n);return}const r=e.indexOf(".");let o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new dF(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,i,n)}}function vye(s){const e=[];for(let t=1,i=s.length;t<i;t++){const n=s[t];e[t]=`.mtk${t} { color: ${n}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const wye={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[ou]:"#FFFFFE",[R2]:"#000000",[SK]:"#E5EBF1",[F2]:"#D3D3D3",[V2]:"#939393",[LK]:"#ADD6FF4D"}},Cye={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[ou]:"#1E1E1E",[R2]:"#D4D4D4",[SK]:"#3A3D41",[F2]:"#404040",[V2]:"#707070",[LK]:"#ADD6FF26"}},yye={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[ou]:"#000000",[R2]:"#FFFFFF",[F2]:"#FFFFFF",[V2]:"#FFFFFF"}},Sye={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[ou]:"#FFFFFF",[R2]:"#292929",[F2]:"#292929",[V2]:"#292929"}},Lye={IconContribution:"base.contributions.icons"};var Lq;(function(s){function e(t,i){let n=t.defaults;for(;Gt.isThemeIcon(n);){const r=$0.getIcon(n.id);if(!r)return;n=r.defaults}return n}s.getDefinition=e})(Lq||(Lq={}));var xq;(function(s){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(n=>({format:n.format,location:n.location.toString()}))}}s.toJSONObject=e;function t(i){const n=r=>rr(r)?r:void 0;if(i&&Array.isArray(i.src)&&i.src.every(r=>rr(r.format)&&rr(r.location)))return{weight:n(i.weight),style:n(i.style),src:i.src.map(r=>({format:r.format,location:Ot.parse(r.location)}))}}s.fromJSONObject=t})(xq||(xq={}));const xye=/^([\w_-]+)$/,kye=y(2006,"The font ID must only contain letters, numbers, underscores and dashes.");class Eye extends pe{constructor(){super(),this._onDidChange=this._register(new ne),this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:y(2007,"The id of the font to use. If not set, the font that is defined first is used."),pattern:xye.source,patternErrorMessage:kye},fontCharacter:{type:"string",description:y(2008,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Gt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const r=this.iconsById[e];if(r){if(i&&!r.description){r.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return r}const o={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return n&&(a.deprecationMessage=n),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;Gt.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of n.filter(o=>!!o.description).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|${Gt.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const r of n.filter(o=>!Gt.isThemeIcon(o.defaults)).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|`);return i.join(`
`)}}const $0=new Eye;or.add(Lye.IconContribution,$0);function yp(s,e,t,i){return $0.registerIcon(s,e,t,i)}function YX(){return $0}function Tye(){const s=Qj();for(const e in s){const t="\\"+s[e].toString(16);$0.registerIcon(e,{fontCharacter:t})}}Tye();const ZX="vscode://schemas/icons",XX=or.as(bR.JSONContribution);XX.registerSchema(ZX,$0.getIconSchema());const kq=new Or(()=>XX.notifySchemaChanged(ZX),200);$0.onDidChange(()=>{kq.isScheduled()||kq.schedule()});yp("widget-close",Ue.close,y(2009,"Icon for the close action in widgets."));yp("goto-previous-location",Ue.arrowUp,y(2010,"Icon for goto previous editor location."));yp("goto-next-location",Ue.arrowDown,y(2011,"Icon for goto next editor location."));Gt.modify(Ue.sync,"spin");Gt.modify(Ue.loading,"spin");function Dye(s){const e=new Ze,t=e.add(new ne),i=YX();return e.add(i.onDidChange(()=>t.fire())),s&&e.add(s.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const n=s?s.getProductIconTheme():new QX,r={},o=new w5,a=new w5;for(const l of i.getIcons()){const c=n.getIcon(l);if(!c)continue;const h=c.font,d=Da`--vscode-icon-${JT(l.id)}-font-family`,g=Da`--vscode-icon-${JT(l.id)}-content`;h?(r[h.id]=h.definition,a.push(Da`${d}: ${ym(h.id)};`,Da`${g}: ${ym(c.fontCharacter)};`),o.push(Da`.codicon-${JT(l.id)}:before { content: ${ym(c.fontCharacter)}; font-family: ${ym(h.id)}; }`)):(a.push(Da`${g}: ${ym(c.fontCharacter)}; ${d}: 'codicon';`),o.push(Da`.codicon-${JT(l.id)}:before { content: ${ym(c.fontCharacter)}; }`))}for(const l in r){const c=r[l],h=c.weight?Da`font-weight: ${$U(c.weight)};`:Da``,d=c.style?Da`font-style: ${$U(c.style)};`:Da``,g=new w5;for(const _ of c.src)g.push(Da`${Od(_.location)} format(${ym(_.format)})`);o.push(Da`@font-face { src: ${g.join(", ")}; font-family: ${ym(l)};${h}${d} font-display: block; }`)}return o.push(Da`:root { ${a.join(" ")} }`),o.join(`
`)}}}class QX{getIcon(e){const t=YX();let i=e.defaults;for(;Gt.isThemeIcon(i);){const n=t.getIcon(i.id);if(!n)return;i=n.defaults}return i}}const Pm="vs",BL="vs-dark",Uw="hc-black",qw="hc-light",JX=or.as(pK.ColorContribution),Nye=or.as(sY.ThemingContribution);class eQ{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(jD(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,xe.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=C8(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,xe.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=JX.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Pm:return bc.LIGHT;case Uw:return bc.HIGH_CONTRAST_DARK;case qw:return bc.HIGH_CONTRAST_LIGHT;default:return bc.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const r=C8(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],n=this.themeData.colors["editor.background"];if(i||n){const r={token:""};i&&(r.foreground=i),n&&(r.background=n),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=KX.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Cl.getForeground(r),a=Cl.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}get tokenColorMap(){return[]}}function jD(s){return s===Pm||s===BL||s===Uw||s===qw}function C8(s){switch(s){case Pm:return wye;case BL:return Cye;case Uw:return yye;case qw:return Sye}}function nD(s){const e=C8(s);return new eQ(s,e)}class Iye extends pe{constructor(){super(),this._onColorThemeChange=this._register(new ne),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new ne),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new QX,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Pm,nD(Pm)),this._knownThemes.set(BL,nD(BL)),this._knownThemes.set(Uw,nD(Uw)),this._knownThemes.set(qw,nD(qw));const e=this._register(Dye(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Pm),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),aG(Ri,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return D3(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=ah(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),pe.None}_registerShadowDomContainer(e){const t=ah(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!jD(t.base)&&!jD(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new eQ(e,t)),jD(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Pm),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Ri.matchMedia("(forced-colors: active)").matches;if(e!==Nw(this._theme.type)){let t;B2(this._theme.type)?t=e?Uw:BL:t=e?qw:Pm,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};Nye.getThemingParticipants().forEach(o=>o(this._theme,i,this._environment));const n=[];for(const o of JX.getColors()){const a=this._theme.getColor(o.id,!0);a&&n.push(`${zP(o.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${n.join(`
`)} }`);const r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(vye(r)),i.addRule(".monaco-editor, .monaco-diff-editor, .monaco-component { forced-color-adjust: none; }"),this._themeCSS=e.join(`
`),this._updateCSS(),es.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const hu=At("themeService");var Aye=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},A5=function(s,e){return function(t,i){e(t,i,s)}};let y8=class extends pe{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new ne,this._onDidChangeReducedMotion=new ne,this._onDidChangeLinkUnderline=new ne,this._accessibilityModeEnabledContext=Jae.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),n(),this._register(this.onDidChangeScreenReaderOptimized(()=>n()));const r=Ri.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=r.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(r),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(ue(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};y8=Aye([A5(0,ai),A5(1,xg),A5(2,cn)],y8);var jR=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Ed=function(s,e){return function(t,i){e(t,i,s)}},Ov,ZS;let S8=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new L8(i)}createMenu(e,t,i){return new RI(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const n=new RI(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),r=n.getActions(i);return n.dispose(),r}resetHiddenStates(e){this._hiddenStates.reset(e)}};S8=jR([Ed(0,Ml),Ed(1,ar),Ed(2,$2)],S8);var n0;let L8=(n0=class{constructor(e){this._storageService=e,this._disposables=new Ze,this._onDidChange=new ne,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(Ov._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,Ov._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(Ov._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){const i=this._isHiddenByDefault(e,t),n=this._data[e.id]?.includes(t)??!1;return i?!n:n}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const r=this._data[e.id];if(i)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){const o=r.indexOf(t);o>=0&&kee(r,o),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Ov._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},Ov=n0,n0._key="menu.hiddenCommands",n0);L8=Ov=jR([Ed(0,$2)],L8);class FL{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(nC.getMenuItems(this._id));let t;for(const i of e){const n=i.group||"";(!t||t[0]!==n)&&(t=[n,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(FL._fillInKbExprKeys(e.when,this._structureContextKeys),hL(e)){if(e.command.precondition&&FL._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;FL._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(nC.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let x8=ZS=class extends FL{constructor(e,t,i,n,r,o){super(e,i),this._hiddenStates=t,this._commandService=n,this._keybindingService=r,this._contextKeyService=o,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[n,r]=i;let o;for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=hL(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=Rye(this._id,l?a.command:a,this._hiddenStates);if(l){const h=tQ(this._commandService,this._keybindingService,a.command.id,a.when);(o??=[]).push(new dg(a.command,a.alt,e,c,h,this._contextKeyService,this._commandService))}else{const h=new ZS(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),d=Mr.join(...h.map(g=>g[1]));d.length>0&&(o??=[]).push(new xw(a,c,d))}}o&&o.length>0&&t.push([n,o])}return t}_sort(e){return e.sort(ZS._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,n=t.group;if(i!==n){if(i){if(!n)return-1}else return 1;if(i==="navigation")return-1;if(n==="navigation")return 1;const a=i.localeCompare(n);if(a!==0)return a}const r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:ZS._compareTitles(hL(e)?e.command.title:e.title,hL(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,n=typeof t=="string"?t:t.original;return i.localeCompare(n)}};x8=ZS=jR([Ed(3,Ml),Ed(4,ar),Ed(5,ai)],x8);let RI=class{constructor(e,t,i,n,r,o){this._disposables=new Ze,this._menuInfo=new x8(e,t,i.emitEventsForSubmenuChanges,n,r,o);const a=new Or(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(nC.onDidChangeMenu(d=>{for(const g of this._menuInfo.allMenuIds)if(d.has(g)){a.schedule();break}}));const l=this._disposables.add(new Ze),c=d=>{let g=!1,_=!1,b=!1;for(const C of d)if(g=g||C.isStructuralChange,_=_||C.isEnablementChange,b=b||C.isToggleChange,g&&_&&b)break;return{menu:this,isStructuralChange:g,isEnablementChange:_,isToggleChange:b}},h=()=>{l.add(o.onDidChangeContext(d=>{const g=d.affectsSome(this._menuInfo.structureContextKeys),_=d.affectsSome(this._menuInfo.preconditionContextKeys),b=d.affectsSome(this._menuInfo.toggledContextKeys);(g||_||b)&&this._onDidChange.fire({menu:this,isStructuralChange:g,isEnablementChange:_,isToggleChange:b})})),l.add(t.onDidChange(d=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Wj({onWillAddFirstListener:h,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};RI=jR([Ed(3,Ml),Ed(4,ar),Ed(5,ai)],RI);function Rye(s,e,t){const i=qse(e)?e.submenu.id:e.id,n=typeof e.title=="string"?e.title:e.title.value,r=B1({id:`hide/${s.id}/${i}`,label:y(1636,"Hide '{0}'",n),run(){t.updateHidden(s,i,!0)}}),o=B1({id:`toggle/${s.id}/${i}`,label:n,get checked(){return!t.isHidden(s,i)},run(){t.updateHidden(s,i,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function tQ(s,e,t,i=void 0,n=!0){return B1({id:`configureKeybinding/${t}`,label:y(1637,"Configure Keybinding"),enabled:n,run(){const o=!!!e.lookupKeybinding(t)&&i?i.serialize():void 0;s.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(o?` +when:${o}`:""))}})}var Mye=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Eq=function(s,e){return function(t,i){e(t,i,s)}},k8;const Tq="application/vnd.code.resources";var s0;let E8=(s0=class extends pe{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(u0||lG)&&this.installWebKitWriteTextWorkaround(),this._register(Ie.runAndSubscribe(k2,({window:i,disposables:n})=>{n.add(ue(i.document,"copy",()=>this.clearResourcesState()))},{window:Ri,disposables:this._store}))}triggerPaste(){this.logService.trace("BrowserClipboardService#triggerPaste")}installWebKitWriteTextWorkaround(){const e=()=>{const t=new QA;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,wi().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(Ie.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(ue(t,"click",e)),i.add(ue(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.logService.trace("BrowserClipboardService#writeText called with type:",t," text.length:",e.length),this.clearResourcesState(),t){this.mapTextToType.set(t,e),this.logService.trace("BrowserClipboardService#writeText");return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return this.logService.trace("before navigator.clipboard.writeText"),await wi().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){this.logService.trace("BrowserClipboardService#fallbackWriteText");const t=nR(),i=t.activeElement,n=t.body.appendChild(ot("textarea",{"aria-hidden":!0}));n.style.height="1px",n.style.width="1px",n.style.position="absolute",n.value=e,n.focus(),n.select(),t.execCommand("copy"),qn(i)&&i.focus(),n.remove()}async readText(e){if(this.logService.trace("BrowserClipboardService#readText called with type:",e),e){const t=this.mapTextToType.get(e)||"";return this.logService.trace("BrowserClipboardService#readText text.length:",t.length),t}try{const t=await wi().navigator.clipboard.readText();return this.logService.trace("BrowserClipboardService#readText text.length:",t.length),t}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await wi().navigator.clipboard.read();for(const i of t)if(i.types.includes(`web ${Tq}`)){const n=await i.getType(`web ${Tq}`);return JSON.parse(await n.text()).map(o=>Ot.from(o))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return dP(e.substring(0,k8.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},k8=s0,s0.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,s0);E8=k8=Mye([Eq(0,xg),Eq(1,Lo)],E8);const fF=At("clipboardService");var Oye=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Pye=function(s,e){return function(t,i){e(t,i,s)}};const VL="data-keybinding-context";class gF{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}const BA=class BA extends gF{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};BA.INSTANCE=new BA;let _C=BA;const tx=class tx extends gF{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=ML.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(n=>{if(n.source===7){const r=Array.from(this._values,([o])=>o);this._values.clear(),i.fire(new Nq(r))}else{const r=[];for(const o of n.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...si.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}i.fire(new Nq(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(tx._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(tx._keyPrefix.length),i=this._configurationService.getValue(t);let n;switch(typeof i){case"number":case"boolean":case"string":n=i;break;default:Array.isArray(i)?n=JSON.stringify(i):n=i}return this._values.set(e,n),n}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};tx._keyPrefix="config.";let T8=tx;class Bye{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class Dq{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class Nq{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class Fye{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function Vye(s,e){return s.allKeysContainedIn(new Set(Object.keys(e)))}class iQ extends pe{get onDidChangeContext(){return this._onDidChangeContext.event}constructor(e){super(),this._onDidChangeContext=this._register(new fx({merge:t=>new Fye(t)})),this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Bye(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Hye(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new Dq(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new Dq(e))}getContext(e){return this._isDisposed?_C.INSTANCE:this.getContextValuesContainer(Wye(e))}dispose(){super.dispose(),this._isDisposed=!0}}let D8=class extends iQ{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0,this.inputFocusedContext=PX.bindTo(this);const t=this._register(new T8(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t),this._register(Ie.runAndSubscribe(k2,({window:i,disposables:n})=>{const r=n.add(new qs);n.add(ue(i,Re.FOCUS_IN,()=>{r.value=new Ze,this.updateInputContextKeys(i.document,r.value)},!0))},{window:Ri,disposables:this._store}))}updateInputContextKeys(e,t){function i(){return!!e.activeElement&&ih(e.activeElement)}const n=i();if(this.inputFocusedContext.set(n),n){const r=t.add(iC(e.activeElement));Ie.once(r.onDidBlur)(()=>{wi().document===e&&this.inputFocusedContext.set(i()),r.dispose()},void 0,t)}}getContextValuesContainer(e){return this._isDisposed?_C.INSTANCE:this._contexts.get(e)||_C.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new gF(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};D8=Oye([Pye(0,cn)],D8);class Hye extends iQ{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new qs),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(VL)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(VL,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;Vye(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(VL),super.dispose())}getContextValuesContainer(e){return this._isDisposed?_C.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function Wye(s){for(;s;){if(s.hasAttribute(VL)){const e=s.getAttribute(VL);return e?parseInt(e,10):NaN}s=s.parentElement}return 0}function zye(s,e,t){s.get(ai).createKey(String(e),Uye(t))}function Uye(s){return Nj(s,e=>{if(typeof e=="object"&&e.$mid===1)return Ot.revive(e).toString();if(e instanceof Ot)return e.toString()})}ra.registerCommand("_setContext",zye);ra.registerCommand({id:"getContextKeyInfo",handler(){return[...et.all()].sort((s,e)=>s.key.localeCompare(e.key))},metadata:{description:y(1659,"A command that returns information about context keys"),args:[]}});ra.registerCommand("_generateContextKeyInfo",function(){const s=[],e=new Set;for(const t of et.all())e.has(t.key)||(e.add(t.key),s.push(t));s.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(s,void 0,2))});let qye=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class Iq{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new qye(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const r=this._findCycle(n,t);if(r)return r;t.delete(i)}}}const $ye=!1;class Aq extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class MI{constructor(e=new IC,t=!1,i,n=$ye){this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Zt,this),this._globalGraph=n?i?._globalGraph??new Iq(r=>r):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,Cs(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)KA(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,n=new class extends MI{dispose(){i._children.delete(n),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(n),t?.add(n),n}invokeFunction(e,...t){this._throwIfDisposed();const i=HL.traceInvocation(this._enableTracing,e);let n=!1;try{return e({get:o=>{if(n)throw nN("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a},getIfExists:o=>{if(n)throw nN("service accessor is only valid during the invocation of its target method");return this._getOrCreateServiceInstance(o,i)}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,n;return e instanceof fd?(i=HL.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=HL.traceCreation(this._enableTracing,e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){const n=eh.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of n){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),r.push(l)}const o=n.length>0?n[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(r))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof fd)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof fd?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){const n=new Iq(l=>l.id.toString());let r=0;const o=[{id:e,desc:t,_trace:i}],a=new Set;for(;o.length;){const l=o.pop();if(!a.has(String(l.id))){if(a.add(String(l.id)),n.lookupOrInsertNode(l),r++>1e3)throw new Aq(n);for(const c of eh.getServiceDependencies(l.desc.ctor)){const h=this._getServiceInstanceOrDescriptor(c.id);if(h||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(c.id)),h instanceof fd){const d={id:c.id,desc:h,_trace:l._trace.branch(c.id,!0)};n.insertEdge(l,d),o.push(d)}}}}for(;;){const l=n.roots();if(l.length===0){if(!n.isEmpty())throw new Aq(n);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof fd){const d=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setCreatedServiceInstance(c.id,d)}n.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,r){if(this._services.get(e)instanceof fd)return this._createServiceInstance(e,t,i,n,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],n,r,o){if(n){const a=new MI(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new lne(()=>{const h=a._createInstance(t,i,r);for(const[d,g]of l){const _=h[d];if(typeof _=="function")for(const b of g)b.disposable=_.apply(h,b.listener)}return l.clear(),o.add(h),h});return new Proxy(Object.create(null),{get(h,d){if(!c.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let b=l.get(d);return b||(b=new ea,l.set(d,b)),(S,E,x)=>{if(c.isInitialized)return c.value[d](S,E,x);{const T={listener:[S,E,x],disposable:void 0},N=b.push(T);return lt(()=>{N(),T.disposable?.dispose()})}}}if(d in h)return h[d];const g=c.value;let _=g[d];return typeof _!="function"||(_=_.bind(g),h[d]=_),_},set(h,d,g){return c.value[d]=g,!0},getPrototypeOf(h){return t.prototype}})}else{const a=this._createInstance(t,i,r);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const ml=class ml{static traceInvocation(e,t){return e?new ml(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):ml._None}static traceCreation(e,t){return e?new ml(1,t.name):ml._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new ml(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;ml._totals+=e;let t=!1;function i(r,o){const a=[],l=new Array(r+1).join("	");for(const[c,h,d]of o._dep)if(h&&d){t=!0,a.push(`${l}CREATES -> ${c}`);const g=i(r+1,d);g&&a.push(g)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const n=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${ml._totals.toFixed(2)}ms)`];(e>2||t)&&ml.all.add(n.join(`
`))}};ml.all=new Set,ml._None=new class extends ml{constructor(){super(0,null)}stop(){}branch(){return this}},ml._totals=0;let HL=ml;const jye=new Set([mt.inMemory,mt.vscodeSourceControl,mt.walkThrough,mt.walkThroughSnippet,mt.vscodeChatCodeBlock,mt.vscodeTerminal]);class Gye{constructor(){this._byResource=new Br,this._byOwner=new Map}set(e,t,i){let n=this._byResource.get(e);n||(n=new Map,this._byResource.set(e,n)),n.set(t,i);let r=this._byOwner.get(t);r||(r=new Br,this._byOwner.set(t,r)),r.set(e,i)}get(e,t){return this._byResource.get(e)?.get(t)}delete(e,t){let i=!1,n=!1;const r=this._byResource.get(e);r&&(i=r.delete(t));const o=this._byOwner.get(t);if(o&&(n=o.delete(e)),i!==n)throw new Error("illegal state");return i&&n}values(e){return typeof e=="string"?this._byOwner.get(e)?.values()??si.empty():Ot.isUri(e)?this._byResource.get(e)?.values()??si.empty():si.map(si.concat(...this._byOwner.values()),t=>t[1])}}class Kye{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Br,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(jye.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===yl.Error?t.errors+=1:i===yl.Warning?t.warnings+=1:i===yl.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class d1{constructor(){this._onMarkerChanged=new Wj({delay:0,merge:d1._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new Gye,this._stats=new Kye(this),this._filteredResources=new Br}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(Dee(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const n=[];for(const r of i){const o=d1._toMarker(e,t,r);o&&n.push(o)}this._data.set(t,e,n),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:n,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:d,relatedInformation:g,tags:_,origin:b}=i;if(o)return l=l>0?l:1,c=c>0?c:1,h=h>=l?h:l,d=d>0?d:c,{resource:t,owner:e,code:n,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:d,relatedInformation:g,tags:_,origin:b}}changeAll(e,t){const i=[],n=this._data.values(e);if(n)for(const r of n){const o=si.first(r);o&&(i.push(o.resource),this._data.delete(o.resource,e))}if(UA(t)){const r=new Br;for(const{resource:o,marker:a}of t){const l=d1._toMarker(e,o,a);if(!l)continue;const c=r.get(o);c?c.push(l):(r.set(o,[l]),i.push(o))}for(const[o,a]of r)this._data.set(o,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}_createFilteredMarker(e,t){const i=t.length===1?y(1721,'Problems are paused because: "{0}"',t[0]):y(1722,'Problems are paused because: "{0}" and {1} more',t[0],t.length-1);return{owner:"markersFilter",resource:e,severity:yl.Info,message:i,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}}read(e=Object.create(null)){let{owner:t,resource:i,severities:n,take:r}=e;if((!r||r<0)&&(r=-1),t&&i){const o=e.ignoreResourceFilters?void 0:this._filteredResources.get(i);if(o?.length)return[this._createFilteredMarker(i,o)];const a=this._data.get(i,t);if(!a)return[];const l=[];for(const c of a){if(r>0&&l.length===r)break;const h=e.ignoreResourceFilters?void 0:this._filteredResources.get(i);h?.length?l.push(this._createFilteredMarker(i,h)):d1._accept(c,n)&&l.push(c)}return l}else{const o=!t&&!i?this._data.values():this._data.values(i??t),a=[],l=new Gse;for(const c of o)for(const h of c){if(l.has(h.resource))continue;if(r>0&&a.length===r)break;const d=e.ignoreResourceFilters?void 0:this._filteredResources.get(h.resource);d?.length?(a.push(this._createFilteredMarker(h.resource,d)),l.add(h.resource)):d1._accept(h,n)&&a.push(h)}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new Br;for(const i of e)for(const n of i)t.set(n,!0);return Array.from(t.keys())}}class Yye extends pe{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=sr.createEmptyModel(e)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=sr.createEmptyModel(this.logService);const e=or.as(P0.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const n of e){const r=i[n],o=t[n];r!==void 0?this._configurationModel.setValue(n,r):o?this._configurationModel.setValue(n,Gf(o.default)):this._configurationModel.removeValue(n)}}}const GR=At("accessibilitySignalService"),_t=class _t{static register(e){return new _t(e.fileName)}constructor(e){this.fileName=e}};_t.error=_t.register({fileName:"error.mp3"}),_t.warning=_t.register({fileName:"warning.mp3"}),_t.success=_t.register({fileName:"success.mp3"}),_t.foldedArea=_t.register({fileName:"foldedAreas.mp3"}),_t.break=_t.register({fileName:"break.mp3"}),_t.quickFixes=_t.register({fileName:"quickFixes.mp3"}),_t.taskCompleted=_t.register({fileName:"taskCompleted.mp3"}),_t.taskFailed=_t.register({fileName:"taskFailed.mp3"}),_t.terminalBell=_t.register({fileName:"terminalBell.mp3"}),_t.diffLineInserted=_t.register({fileName:"diffLineInserted.mp3"}),_t.diffLineDeleted=_t.register({fileName:"diffLineDeleted.mp3"}),_t.diffLineModified=_t.register({fileName:"diffLineModified.mp3"}),_t.requestSent=_t.register({fileName:"requestSent.mp3"}),_t.responseReceived1=_t.register({fileName:"responseReceived1.mp3"}),_t.responseReceived2=_t.register({fileName:"responseReceived2.mp3"}),_t.responseReceived3=_t.register({fileName:"responseReceived3.mp3"}),_t.responseReceived4=_t.register({fileName:"responseReceived4.mp3"}),_t.clear=_t.register({fileName:"clear.mp3"}),_t.save=_t.register({fileName:"save.mp3"}),_t.format=_t.register({fileName:"format.mp3"}),_t.voiceRecordingStarted=_t.register({fileName:"voiceRecordingStarted.mp3"}),_t.voiceRecordingStopped=_t.register({fileName:"voiceRecordingStopped.mp3"}),_t.progress=_t.register({fileName:"progress.mp3"}),_t.chatEditModifiedFile=_t.register({fileName:"chatEditModifiedFile.mp3"}),_t.editsKept=_t.register({fileName:"editsKept.mp3"}),_t.editsUndone=_t.register({fileName:"editsUndone.mp3"}),_t.nextEditSuggestion=_t.register({fileName:"nextEditSuggestion.mp3"}),_t.terminalCommandSucceeded=_t.register({fileName:"terminalCommandSucceeded.mp3"}),_t.chatUserActionRequired=_t.register({fileName:"chatUserActionRequired.mp3"}),_t.codeActionTriggered=_t.register({fileName:"codeActionTriggered.mp3"}),_t.codeActionApplied=_t.register({fileName:"codeActionApplied.mp3"});let vi=_t;class Zye{constructor(e){this.randomOneOf=e}}const ht=class ht{constructor(e,t,i,n,r,o,a=!1){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=n,this.legacyAnnouncementSettingsKey=r,this.announcementMessage=o,this.managesOwnEnablement=a}static register(e){const t=new Zye("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new ht(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage,e.managesOwnEnablement);return ht._signals.add(i),i}};ht._signals=new Set,ht.errorAtPosition=ht.register({name:y(1561,"Error at Position"),sound:vi.error,announcementMessage:y(1562,"Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),ht.warningAtPosition=ht.register({name:y(1563,"Warning at Position"),sound:vi.warning,announcementMessage:y(1564,"Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),ht.errorOnLine=ht.register({name:y(1565,"Error on Line"),sound:vi.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:y(1566,"Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),ht.warningOnLine=ht.register({name:y(1567,"Warning on Line"),sound:vi.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:y(1568,"Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),ht.foldedArea=ht.register({name:y(1569,"Folded Area on Line"),sound:vi.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:y(1570,"Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),ht.break=ht.register({name:y(1571,"Breakpoint on Line"),sound:vi.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:y(1572,"Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),ht.inlineSuggestion=ht.register({name:y(1573,"Inline Suggestion on Line"),sound:vi.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),ht.nextEditSuggestion=ht.register({name:y(1574,"Next Edit Suggestion on Line"),sound:vi.nextEditSuggestion,legacySoundSettingsKey:"audioCues.nextEditSuggestion",settingsKey:"accessibility.signals.nextEditSuggestion",announcementMessage:y(1575,"Next Edit Suggestion")}),ht.terminalQuickFix=ht.register({name:y(1576,"Terminal Quick Fix"),sound:vi.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:y(1577,"Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),ht.onDebugBreak=ht.register({name:y(1578,"Debugger Stopped on Breakpoint"),sound:vi.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:y(1579,"Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),ht.noInlayHints=ht.register({name:y(1580,"No Inlay Hints on Line"),sound:vi.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:y(1581,"No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),ht.taskCompleted=ht.register({name:y(1582,"Task Completed"),sound:vi.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:y(1583,"Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),ht.taskFailed=ht.register({name:y(1584,"Task Failed"),sound:vi.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:y(1585,"Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),ht.terminalCommandFailed=ht.register({name:y(1586,"Terminal Command Failed"),sound:vi.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:y(1587,"Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),ht.terminalCommandSucceeded=ht.register({name:y(1588,"Terminal Command Succeeded"),sound:vi.terminalCommandSucceeded,announcementMessage:y(1589,"Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),ht.terminalBell=ht.register({name:y(1590,"Terminal Bell"),sound:vi.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:y(1591,"Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),ht.notebookCellCompleted=ht.register({name:y(1592,"Notebook Cell Completed"),sound:vi.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:y(1593,"Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),ht.notebookCellFailed=ht.register({name:y(1594,"Notebook Cell Failed"),sound:vi.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:y(1595,"Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),ht.diffLineInserted=ht.register({name:y(1596,"Diff Line Inserted"),sound:vi.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),ht.diffLineDeleted=ht.register({name:y(1597,"Diff Line Deleted"),sound:vi.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),ht.diffLineModified=ht.register({name:y(1598,"Diff Line Modified"),sound:vi.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),ht.chatEditModifiedFile=ht.register({name:y(1599,"Chat Edit Modified File"),sound:vi.chatEditModifiedFile,announcementMessage:y(1600,"File Modified from Chat Edits"),settingsKey:"accessibility.signals.chatEditModifiedFile"}),ht.chatRequestSent=ht.register({name:y(1601,"Chat Request Sent"),sound:vi.requestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:y(1602,"Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),ht.chatResponseReceived=ht.register({name:y(1603,"Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[vi.responseReceived1,vi.responseReceived2,vi.responseReceived3,vi.responseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),ht.codeActionTriggered=ht.register({name:y(1604,"Code Action Request Triggered"),sound:vi.codeActionTriggered,legacySoundSettingsKey:"audioCues.codeActionRequestTriggered",legacyAnnouncementSettingsKey:"accessibility.alert.codeActionRequestTriggered",announcementMessage:y(1605,"Code Action Request Triggered"),settingsKey:"accessibility.signals.codeActionTriggered"}),ht.codeActionApplied=ht.register({name:y(1606,"Code Action Applied"),legacySoundSettingsKey:"audioCues.codeActionApplied",sound:vi.codeActionApplied,settingsKey:"accessibility.signals.codeActionApplied"}),ht.progress=ht.register({name:y(1607,"Progress"),sound:vi.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:y(1608,"Progress"),settingsKey:"accessibility.signals.progress"}),ht.clear=ht.register({name:y(1609,"Clear"),sound:vi.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:y(1610,"Clear"),settingsKey:"accessibility.signals.clear"}),ht.save=ht.register({name:y(1611,"Save"),sound:vi.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:y(1612,"Save"),settingsKey:"accessibility.signals.save"}),ht.format=ht.register({name:y(1613,"Format"),sound:vi.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:y(1614,"Format"),settingsKey:"accessibility.signals.format"}),ht.voiceRecordingStarted=ht.register({name:y(1615,"Voice Recording Started"),sound:vi.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),ht.voiceRecordingStopped=ht.register({name:y(1616,"Voice Recording Stopped"),sound:vi.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"}),ht.editsKept=ht.register({name:y(1617,"Edits Kept"),sound:vi.editsKept,announcementMessage:y(1618,"Edits Kept"),settingsKey:"accessibility.signals.editsKept"}),ht.editsUndone=ht.register({name:y(1619,"Undo Edits"),sound:vi.editsUndone,announcementMessage:y(1620,"Edits Undone"),settingsKey:"accessibility.signals.editsUndone"}),ht.chatUserActionRequired=ht.register({name:y(1621,"Chat User Action Required"),sound:vi.chatUserActionRequired,announcementMessage:y(1622,"Chat User Action Required"),settingsKey:"accessibility.signals.chatUserActionRequired",managesOwnEnablement:!0});let md=ht;class Xye extends pe{constructor(e,t=[]){super(),this.logger=new are([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const Qye=[];function Jye(){return Qye.slice(0)}class eSe{getParserClass(){throw new Error("getParserClass is not implemented in StandaloneTreeSitterLibraryService")}supportsLanguage(e,t){return!1}getLanguage(e,t){}getInjectionQueries(e,t){return null}getHighlightingQueries(e,t){return null}}const tSe=At("dataChannelService");class iSe{getDataChannel(e){return{sendData:()=>{}}}}var $d=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},zn=function(s,e){return function(t,i){e(t,i,s)}};class nSe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new ne}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let N8=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new Kte(new nSe(t))):Promise.reject(new Error("Model not found"))}};N8=$d([zn(0,So)],N8);const FA=class FA{show(){return FA.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};FA.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let I8=FA;class sSe{withProgress(e,t,i){return t({report:()=>{}})}}class rSe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class oSe{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),Ri.confirm(i)}async prompt(e){let t;if(this.doConfirm(e.message,e.detail)){const n=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&n.push(e.cancelButton),t=await n[0]?.run({checkboxChecked:!1})}return{result:t}}async error(e,t){await this.prompt({type:Wn.Error,message:e,detail:t})}}const ix=class ix{info(e){return this.notify({severity:Wn.Info,message:e})}warn(e){return this.notify({severity:Wn.Warning,message:e})}error(e){return this.notify({severity:Wn.Error,message:e})}notify(e){switch(e.severity){case Wn.Error:console.error(e.message);break;case Wn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return ix.NO_OP}prompt(e,t,i,n){return ix.NO_OP}status(e,t){return{close:()=>{}}}};ix.NO_OP=new sfe;let A8=ix,R8=class{constructor(e){this._onWillExecuteCommand=new ne,this._onDidExecuteCommand=new ne,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=ra.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const n=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(n)}catch(n){return Promise.reject(n)}}};R8=$d([zn(0,Zt)],R8);let bC=class extends wbe{constructor(e,t,i,n,r,o){super(e,t,i,n,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=_=>{const b=new Ze;b.add(ue(_,Re.KEY_DOWN,C=>{const S=new Mi(C);this._dispatch(S,S.target)&&(S.preventDefault(),S.stopPropagation())})),b.add(ue(_,Re.KEY_UP,C=>{const S=new Mi(C);this._singleModifierDispatch(S,S.target)&&S.preventDefault()})),this._domNodeListeners.push(new aSe(_,b))},l=_=>{for(let b=0;b<this._domNodeListeners.length;b++){const C=this._domNodeListeners[b];C.domNode===_&&(this._domNodeListeners.splice(b,1),C.dispose())}},c=_=>{_.getOption(70)||a(_.getContainerDomNode())},h=_=>{_.getOption(70)||l(_.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(h)),o.listCodeEditors().forEach(c);const d=_=>{a(_.getContainerDomNode())},g=_=>{l(_.getContainerDomNode())};this._register(o.onDiffEditorAdd(d)),this._register(o.onDiffEditorRemove(g)),o.listDiffEditors().forEach(d)}addDynamicKeybinding(e,t,i,n){return yd(ra.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:n}]))}addDynamicKeybindings(e){const t=e.map(i=>({keybinding:p3(i.keybinding,tu),command:i.command??null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),lt(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(_p.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new RL(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return Ri.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let n=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)i[n++]=new OU(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=Qx.resolveKeybinding(a,tu);for(const c of l)i[n++]=new OU(c,r.command,r.commandArgs,o,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new h0(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Qx([t],tu)}};bC=$d([zn(0,ai),zn(1,Ml),zn(2,Sg),zn(3,cu),zn(4,Lo),zn(5,Es)],bC);class aSe extends pe{constructor(e,t){super(),this.domNode=e,this._register(t)}}function Rq(s){return s&&typeof s=="object"&&(!s.overrideIdentifier||typeof s.overrideIdentifier=="string")&&(!s.resource||s.resource instanceof Ot)}let OI=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new ne,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new Yye(e);this._configuration=new OR(t.reload(),sr.createEmptyModel(e),sr.createEmptyModel(e),sr.createEmptyModel(e),sr.createEmptyModel(e),sr.createEmptyModel(e),new Br,sr.createEmptyModel(e),new Br,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,n=Rq(e)?e:Rq(t)?t:{};return this._configuration.getValue(i,n,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const n of e){const[r,o]=n;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),i.push(r))}if(i.length>0){const n=new pbe({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);n.source=8,this._onDidChangeConfiguration.fire(n)}return Promise.resolve()}updateValue(e,t,i,n){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};OI=$d([zn(0,Lo)],OI);let M8=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new ne,this.configurationService.onDidChangeConfiguration(n=>{this._onDidChangeConfiguration.fire({affectedKeys:n.affectedKeys,affectsConfiguration:(r,o)=>n.affectsConfiguration(o)})})}getValue(e,t,i){const n=se.isIPosition(t)?t:null,r=n?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,n):void 0;return typeof r>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(r,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};M8=$d([zn(0,cn),zn(1,So),zn(2,$s)],M8);let O8=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:Fa||Bt?`
`:`\r
`}};O8=$d([zn(0,cn)],O8);class lSe{publicLog2(){}}const nx=class nx{constructor(){const e=Ot.from({scheme:nx.SCHEME,authority:"model",path:"/"});this.workspace={id:Obe,folders:[new Rbe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===nx.SCHEME?this.workspace.folders[0]:null}};nx.SCHEME="inmemory";let P8=nx;function PI(s,e,t){if(!e||!(s instanceof OI))return;const i=[];Object.keys(e).forEach(n=>{ube(n)&&i.push([`editor.${n}`,e[n]]),t&&hbe(n)&&i.push([`diffEditor.${n}`,e[n]])}),i.length>0&&s.updateValues(i)}let B8=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:VB.convert(e),n=new Map;for(const a of i){if(!(a instanceof j1))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=n.get(l);c||(c=[],n.set(l,c)),c.push(fbe.replaceMove(ie.lift(a.textEdit.range),a.textEdit.text))}let r=0,o=0;for(const[a,l]of n)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,r+=l.length;return{ariaSummary:d3(R9.bulkEditServiceSummary,r,o),isApplied:r>0}}};B8=$d([zn(0,So)],B8);class cSe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return TP(e)}}let F8=class extends Z0e{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const n=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();n&&(t=n.getContainerDomNode())}return super.showContextView(e,t,i)}};F8=$d([zn(0,xg),zn(1,Es)],F8);class uSe{constructor(){this._neverEmitter=new ne,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class hSe extends O9{constructor(){super()}}class dSe extends Xye{constructor(){super(new ore)}}let V8=class extends q9{constructor(e,t,i,n,r,o){super(e,t,i,n,r,o),this.configure({blockMouse:!1})}};V8=$d([zn(0,Sg),zn(1,cu),zn(2,W2),zn(3,ar),zn(4,O0),zn(5,ai)],V8);const fSe={esmModuleLocation:void 0,label:"editorWorkerService"};let H8=class extends Z3{constructor(e,t,i,n,r){super(fSe,e,t,i,n,r)}};H8=$d([zn(0,So),zn(1,OP),zn(2,Lo),zn(3,zd),zn(4,Zi)],H8);class gSe{async playSignal(e,t){}}$t(Lo,dSe,0);$t(cn,OI,0);$t(OP,M8,0);$t(aK,O8,0);$t(Abe,P8,0);$t(kbe,cSe,0);$t(Sg,lSe,0);$t(rZ,oSe,0);$t(uZ,rSe,0);$t(cu,A8,0);$t(U0,d1,0);$t($s,hSe,0);$t(hu,Iye,0);$t(So,Z9,0);$t(fK,Y9,0);$t(ai,D8,0);$t(Ebe,sSe,0);$t(WB,I8,0);$t($2,nbe,0);$t(Z2,H8,0);$t(abe,B8,0);$t(Pbe,uSe,0);$t(rR,N8,0);$t(Ol,y8,0);$t(qd,FCe,0);$t(Ml,R8,0);$t(ar,bC,0);$t(z0,v8,0);$t(W2,F8,0);$t(z2,K9,0);$t(fF,E8,0);$t(kg,V8,0);$t(O0,S8,0);$t(GR,gSe,0);$t(bB,eSe,0);$t(sre,ure,0);$t(tSe,iSe,0);var rt;(function(s){const e=new IC;for(const[l,c]of SH())e.set(l,c);const t=new MI(e,!0);e.set(Zt,t);function i(l){n||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof fd?t.invokeFunction(h=>h.get(l)):c}s.get=i;let n=!1;const r=new ne;function o(l){if(n)return t;n=!0;for(const[h,d]of SH())e.get(h)||e.set(h,d);for(const h in l)if(l.hasOwnProperty(h)){const d=At(h);e.get(d)instanceof fd&&e.set(d,l[h])}const c=Jye();for(const h of c)try{t.createInstance(h)}catch(d){mi(d)}return r.fire(),t}s.initialize=o;function a(l){if(n)return l();const c=new Ze,h=c.add(r.event(()=>{h.dispose(),c.add(l())}));return c}s.withServices=a})(rt||(rt={}));function Pf(s,e){return s}function Af(s,e,t,i=Fr.ofCaller()){const n=s.bindTo(e),r=new Ze;return Sd({debugName:()=>`Set Context Key "${s.key}"`},o=>{const a=t(o);return n.set(a),a},i).recomputeInitiallyAndOnChange(r),r}class BI{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new BI(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const n=e.getVisibleRanges();if(n.length>0){t=n[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-r}return new BI(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,n,r){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=n,this._cursorPosition=r}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}function mSe(s,e,t,i){if(s.length===0)return e;if(e.length===0)return s;const n=[];let r=0,o=0;for(;r<s.length&&o<e.length;){const a=s[r],l=e[o],c=t(a),h=t(l);c<h?(n.push(a),r++):c>h?(n.push(l),o++):(n.push(i(a,l)),r++,o++)}for(;r<s.length;)n.push(s[r]),r++;for(;o<e.length;)n.push(e[o]),o++;return n}function FI(s,e){const t=new Ze,i=s.createDecorationsCollection();return t.add(_P({debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const r=e.read(n);i.set(r)})),t.add({dispose:()=>{i.clear()}}),t}function XS(s,e){return s.appendChild(e),lt(()=>{e.remove()})}function pSe(s,e){return s.prepend(e),lt(()=>{e.remove()})}class nQ extends pe{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new gK(e,t)),this._width=xt(this,this.elementSizeObserver.getWidth()),this._height=xt(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>Un(n=>{this._width.set(this.elementSizeObserver.getWidth(),n),this._height.set(this.elementSizeObserver.getHeight(),n)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function Mq(s,e,t){let i=e.get(),n=i,r=i;const o=xt("animatedValue",i);let a=-1;const l=300;let c;t.add(EC({changeTracker:{createChangeSummary:()=>({animate:!1}),handleChange:(d,g)=>(d.didChange(e)&&(g.animate=g.animate||d.change),!0)}},(d,g)=>{c!==void 0&&(s.cancelAnimationFrame(c),c=void 0),n=r,i=e.read(d),a=Date.now()-(g.animate?0:l),h()}));function h(){const d=Date.now()-a;r=Math.floor(_Se(d,n,i-n,l)),d<l?c=s.requestAnimationFrame(h):r=i,o.set(r,void 0)}return o}function _Se(s,e,t,i){return s===i?e+t:t*(-Math.pow(2,-10*s/i)+1)+e}class mF extends pe{constructor(e,t,i){super(),this._register(new W8(e,i)),this._register(fp(i,{height:t.actualHeight,top:t.actualTop}))}}class rw{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=xt(this,void 0),this._actualHeight=xt(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}const VA=class VA{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${VA._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};VA._counter=0;let W8=VA;function fp(s,e){return qt(t=>{for(let[i,n]of Object.entries(e))n&&typeof n=="object"&&"read"in n&&(n=n.read(t)),typeof n=="number"&&(n=`${n}px`),i=i.replace(/[A-Z]/g,r=>"-"+r.toLowerCase()),s.style[i]=n})}function VI(s,e,t,i){const n=new Ze,r=[];return n.add(th((o,a)=>{const l=e.read(o),c=new Map,h=new Map;t&&t(!0),s.changeViewZones(d=>{for(const g of r)d.removeZone(g),i?.delete(g);r.length=0;for(const g of l){const _=d.addZone(g);g.setZoneId&&g.setZoneId(_),r.push(_),i?.add(_),c.set(g,_)}}),t&&t(!1),a.add(EC({changeTracker:{createChangeSummary(){return{zoneIds:[]}},handleChange(d,g){const _=h.get(d.changedObservable);return _!==void 0&&g.zoneIds.push(_),!0}}},(d,g)=>{for(const _ of l)_.onChange&&(h.set(_.onChange,c.get(_)),_.onChange.read(d));t&&t(!0),s.changeViewZones(_=>{for(const b of g.zoneIds)_.layoutZone(b)}),t&&t(!1)}))})),n.add({dispose(){t&&t(!0),s.changeViewZones(o=>{for(const a of r)o.removeZone(a)}),i?.clear(),t&&t(!1)}}),n}function Oq(s,e){const t=CN(e,n=>n.original.startLineNumber<=s.lineNumber);if(!t)return ie.fromPositions(s);if(t.original.endLineNumberExclusive<=s.lineNumber){const n=s.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return ie.fromPositions(new se(n,s.column))}if(!t.innerChanges)return ie.fromPositions(new se(t.modified.startLineNumber,1));const i=CN(t.innerChanges,n=>n.originalRange.getStartPosition().isBeforeOrEqual(s));if(!i){const n=s.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return ie.fromPositions(new se(n,s.column))}if(i.originalRange.containsPosition(s))return i.modifiedRange;{const n=bSe(i.originalRange.getEndPosition(),s);return ie.fromPositions(n.addToPosition(i.modifiedRange.getEndPosition()))}}function bSe(s,e){return s.lineNumber===e.lineNumber?new Ha(0,e.column-s.column):new Ha(e.lineNumber-s.lineNumber,e.column-1)}function vSe(s,e){let t;return s.filter(i=>{const n=e(i,t);return t=i,n})}class HI{static create(e,t=void 0){return new Pq(e,e,t)}static createWithDisposable(e,t,i=void 0){const n=new Ze;return n.add(t),n.add(e),new Pq(e,n,i)}}class Pq extends HI{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new wSe(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class wSe extends HI{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var pF=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},_F=function(s,e){return function(t,i){e(t,i,s)}};const CSe=yp("diff-review-insert",Ue.add,y(94,"Icon for 'Insert' in accessible diff viewer.")),ySe=yp("diff-review-remove",Ue.remove,y(95,"Icon for 'Remove' in accessible diff viewer.")),SSe=yp("diff-review-close",Ue.close,y(96,"Icon for 'Close' in accessible diff viewer."));var Zw;let A1=(Zw=class extends pe{constructor(e,t,i,n,r,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=n,this._width=r,this._height=o,this._diffs=a,this._models=l,this._instantiationService=c,this._state=Je(this,h=>{const d=this._visible.read(h);if(this._parentNode.style.visibility=d?"visible":"hidden",!d)return null;const g=h.store.add(this._instantiationService.createInstance(z8,this._diffs,this._models,this._setVisible,this._canClose)),_=h.store.add(this._instantiationService.createInstance(U8,this._parentNode,g,this._width,this._height,this._models));return{model:g,view:_}}).recomputeInitiallyAndOnChange(this._store)}next(){Un(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){Un(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){Un(e=>{this._setVisible(!1,e)})}},Zw._ttPolicy=bp("diffReview",{createHTML:e=>e}),Zw);A1=pF([_F(8,Zt)],A1);let z8=class extends pe{constructor(e,t,i,n,r){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=n,this._accessibilitySignalService=r,this._groups=xt(this,[]),this._currentGroupIdx=xt(this,0),this._currentElementIdx=xt(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>this.currentGroup.read(a)?.lines[o]),this._register(qt(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=LSe(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());Un(c=>{const h=this._models.getModifiedPosition();if(h){const d=l.findIndex(g=>h?.lineNumber<g.range.modified.endLineNumberExclusive);d!==-1&&this._currentGroupIdx.set(d,c)}this._groups.set(l,c)})})),this._register(qt(o=>{const a=this.currentElement.read(o);a?.type===mo.Deleted?this._accessibilitySignalService.playSignal(md.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):a?.type===mo.Added&&this._accessibilitySignalService.playSignal(md.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(qt(o=>{const a=this.currentElement.read(o);if(a&&a.type!==mo.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(ie.fromPositions(new se(l,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||mP(t,n=>{this._currentGroupIdx.set(it.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),n),this._currentElementIdx.set(0,n)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||Un(i=>{this._currentElementIdx.set(it.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&Un(n=>{this._currentElementIdx.set(i,n)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===mo.Deleted?this._models.originalReveal(ie.fromPositions(new se(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==mo.Header?ie.fromPositions(new se(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};z8=pF([_F(4,GR)],z8);const PS=3;function LSe(s,e,t){const i=[];for(const n of F6(s,(r,o)=>o.modified.startLineNumber-r.modified.endLineNumberExclusive<2*PS)){const r=[];r.push(new kSe);const o=new dt(Math.max(1,n[0].original.startLineNumber-PS),Math.min(n[n.length-1].original.endLineNumberExclusive+PS,e+1)),a=new dt(Math.max(1,n[0].modified.startLineNumber-PS),Math.min(n[n.length-1].modified.endLineNumberExclusive+PS,t+1));xj(n,(h,d)=>{const g=new dt(h?h.original.endLineNumberExclusive:o.startLineNumber,d?d.original.startLineNumber:o.endLineNumberExclusive),_=new dt(h?h.modified.endLineNumberExclusive:a.startLineNumber,d?d.modified.startLineNumber:a.endLineNumberExclusive);g.forEach(b=>{r.push(new DSe(b,_.startLineNumber+(b-g.startLineNumber)))}),d&&(d.original.forEach(b=>{r.push(new ESe(d,b))}),d.modified.forEach(b=>{r.push(new TSe(d,b))}))});const l=n[0].modified.join(n[n.length-1].modified),c=n[0].original.join(n[n.length-1].original);i.push(new xSe(new eo(l,c),r))}return i}var mo;(function(s){s[s.Header=0]="Header",s[s.Unchanged=1]="Unchanged",s[s.Deleted=2]="Deleted",s[s.Added=3]="Added"})(mo||(mo={}));class xSe{constructor(e,t){this.range=e,this.lines=t}}class kSe{constructor(){this.type=mo.Header}}class ESe{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=mo.Deleted,this.modifiedLineNumber=void 0}}class TSe{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=mo.Added,this.originalLineNumber=void 0}}class DSe{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=mo.Unchanged}}let U8=class extends pe{constructor(e,t,i,n,r,o){super(),this._element=e,this._model=t,this._width=i,this._height=n,this._models=r,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new kd(a)),this._register(qt(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(B1({id:"diffreview.close",label:y(97,"Close"),class:"close-diff-review "+Gt.asClassName(SSe),enabled:!0,run:async()=>t.close()}),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new XP(this._content,{})),Pr(this.domNode,this._scrollbar.getDomNode(),a),this._register(qt(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(lt(()=>{Pr(this.domNode)})),this._register(fp(this.domNode,{width:this._width,height:this._height})),this._register(fp(this._content,{width:this._width,height:this._height})),this._register(th((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Cr(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",y(98,"Accessible Diff Viewer. Use arrow up and down to navigate.")),Sr(n,i.get(59)),Pr(this._content,n);const r=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!r||!o)return;const a=r.getOptions(),l=o.getOptions(),c=i.get(75),h=this._model.currentGroup.get();for(const d of h?.lines||[]){if(!h)break;let g;if(d.type===mo.Header){const b=document.createElement("div");b.className="diff-review-row",b.setAttribute("role","listitem");const C=h.range,S=this._model.currentGroupIndex.get(),E=this._model.groups.get().length,x=P=>P===0?y(99,"no lines changed"):P===1?y(100,"1 line changed"):y(101,"{0} lines changed",P),T=x(C.original.length),N=x(C.modified.length);b.setAttribute("aria-label",y(102,"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",S+1,E,C.original.startLineNumber,T,C.modified.startLineNumber,N));const A=document.createElement("div");A.className="diff-review-cell diff-review-summary",A.appendChild(document.createTextNode(`${S+1}/${E}: @@ -${C.original.startLineNumber},${C.original.length} +${C.modified.startLineNumber},${C.modified.length} @@`)),b.appendChild(A),g=b}else g=this._createRow(d,c,this._width.get(),t,r,a,i,o,l);n.appendChild(g);const _=Je(b=>this._model.currentElement.read(b)===d);e.add(qt(b=>{const C=_.read(b);g.tabIndex=C?0:-1,C&&g.focus()})),e.add(ue(g,"focus",()=>{this._model.goToLine(d)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,n,r,o,a,l,c){const h=n.get(165),d=h.glyphMarginWidth+h.lineNumbersWidth,g=a.get(165),_=10+g.glyphMarginWidth+g.lineNumbersWidth;let b="diff-review-row",C="";const S="diff-review-spacer";let E=null;switch(e.type){case mo.Added:b="diff-review-row line-insert",C=" char-insert",E=CSe;break;case mo.Deleted:b="diff-review-row line-delete",C=" char-delete",E=ySe;break}const x=document.createElement("div");x.style.minWidth=i+"px",x.className=b,x.setAttribute("role","listitem"),x.ariaLevel="";const T=document.createElement("div");T.className="diff-review-cell",T.style.height=`${t}px`,x.appendChild(T);const N=document.createElement("span");N.style.width=d+"px",N.style.minWidth=d+"px",N.className="diff-review-line-number"+C,e.originalLineNumber!==void 0?N.appendChild(document.createTextNode(String(e.originalLineNumber))):N.innerText=" ",T.appendChild(N);const A=document.createElement("span");A.style.width=_+"px",A.style.minWidth=_+"px",A.style.paddingRight="10px",A.className="diff-review-line-number"+C,e.modifiedLineNumber!==void 0?A.appendChild(document.createTextNode(String(e.modifiedLineNumber))):A.innerText=" ",T.appendChild(A);const P=document.createElement("span");if(P.className=S,E){const U=document.createElement("span");U.className=Gt.asClassName(E),U.innerText="  ",P.appendChild(U)}else P.innerText="  ";T.appendChild(P);let O;if(e.modifiedLineNumber!==void 0){let U=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);A1._ttPolicy&&(U=A1._ttPolicy.createHTML(U)),T.insertAdjacentHTML("beforeend",U),O=l.getLineContent(e.modifiedLineNumber)}else{let U=this._getLineHtml(r,n,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);A1._ttPolicy&&(U=A1._ttPolicy.createHTML(U)),T.insertAdjacentHTML("beforeend",U),O=r.getLineContent(e.originalLineNumber)}O.length===0&&(O=y(103,"blank"));let V="";switch(e.type){case mo.Unchanged:e.originalLineNumber===e.modifiedLineNumber?V=y(104,"{0} unchanged line {1}",O,e.originalLineNumber):V=y(105,"{0} original line {1} modified line {2}",O,e.originalLineNumber,e.modifiedLineNumber);break;case mo.Added:V=y(106,"+ {0} modified line {1}",O,e.modifiedLineNumber);break;case mo.Deleted:V=y(107,"- {0} original line {1}",O,e.originalLineNumber);break}return x.setAttribute("aria-label",V),x}_getLineHtml(e,t,i,n,r){const o=e.getLineContent(n),a=t.get(59),l=t.get(117).verticalScrollbarSize,c=Ts.createEmpty(o,r),h=Rl.isBasicASCII(o,e.mightContainNonBasicASCII()),d=Rl.containsRTL(o,h,e.mightContainRTL());return CR(new B0(a.isMonospace&&!t.get(40),a.canUseHalfwidthRightwardsArrow,o,!1,h,d,0,c,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(133),t.get(113),t.get(108),t.get(60)!==rp.OFF,null,null,l)).html}};U8=pF([_F(5,$s)],U8);class NSe{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}Q("diffEditor.move.border","#8b8b8b9c",y(134,"The border color for text that got moved in the diff editor."));Q("diffEditor.moveActive.border","#FFA500",y(135,"The active border color for text that got moved in the diff editor."));Q("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},y(136,"The color of the shadow around unchanged region widgets."));const ISe=yp("diff-insert",Ue.add,y(137,"Line decoration for inserts in the diff editor.")),sQ=yp("diff-remove",Ue.remove,y(138,"Line decoration for removals in the diff editor.")),Bq=ks.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Gt.asClassName(ISe),marginClassName:"gutter-insert"}),Fq=ks.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Gt.asClassName(sQ),marginClassName:"gutter-delete"}),Vq=ks.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),Hq=ks.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),Wq=ks.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),ASe=ks.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),RSe=ks.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),q8=ks.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),MSe=ks.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),OSe=ks.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var rQ=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},$8=function(s,e){return function(t,i){e(t,i,s)}},G_;const oQ=At("diffProviderFactoryService");let j8=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(G8,e)}};j8=rQ([$8(0,Zt)],j8);$t(oQ,j8,1);var r0;let G8=(r0=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new ne,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){this.diffAlgorithmOnDidChangeSubscription?.dispose()}async computeDiff(e,t,i,n){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,n);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Il(new dt(1,2),new dt(1,t.getLineCount()+1),[new Na(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const r=JSON.stringify([e.uri.toString(),t.uri.toString()]),o=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=G_.diffCache.get(r);if(a&&a.context===o)return a.result;const l=bg.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),h=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:c?.quitEarly??!0,detectedMoves:i.computeMoves?c?.moves.length??0:-1}),n.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return G_.diffCache.size>10&&G_.diffCache.delete(G_.diffCache.keys().next().value),G_.diffCache.set(r,{result:c,context:o}),c}setOptions(e){let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription?.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},G_=r0,r0.diffCache=new Map,r0);G8=G_=rQ([$8(1,Z2),$8(2,Sg)],G8);var PSe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},BSe=function(s,e){return function(t,i){e(t,i,s)}};let K8=class extends pe{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=xt(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=xt(this,void 0),this.diff=this._diff,this._unchangedRegions=xt(this,void 0),this.unchangedRegions=Je(this,a=>this._options.hideUnchangedRegions.read(a)?this._unchangedRegions.read(a)?.regions??[]:(Un(l=>{for(const c of this._unchangedRegions.read(void 0)?.regions||[])c.collapseAll(l)}),[])),this.movedTextToCompare=xt(this,void 0),this._activeMovedText=xt(this,void 0),this._hoveredMovedText=xt(this,void 0),this.activeMovedText=Je(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new SC,this._diffProvider=Je(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=Qc("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(lt(()=>this._cancellationTokenSource.cancel()));const n=wx("contentChangedSignal"),r=this._register(new Or(()=>n.trigger(void 0),200));this._register(qt(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(b=>b.isDragged.read(a)))return;const c=l.originalDecorationIds.map(b=>e.original.getDecorationRange(b)).map(b=>b?dt.fromRangeInclusive(b):void 0),h=l.modifiedDecorationIds.map(b=>e.modified.getDecorationRange(b)).map(b=>b?dt.fromRangeInclusive(b):void 0),d=l.regions.map((b,C)=>!c[C]||!h[C]?void 0:new jm(c[C].startLineNumber,h[C].startLineNumber,c[C].length,b.visibleLineCountTop.read(a),b.visibleLineCountBottom.read(a))).filter(dc),g=[];let _=!1;for(const b of F6(d,(C,S)=>C.getHiddenModifiedRange(a).endLineNumberExclusive===S.getHiddenModifiedRange(a).startLineNumber))if(b.length>1){_=!0;const C=b.reduce((E,x)=>E+x.lineCount,0),S=new jm(b[0].originalLineNumber,b[0].modifiedLineNumber,C,b[0].visibleLineCountTop.read(void 0),b[b.length-1].visibleLineCountBottom.read(void 0));g.push(S)}else g.push(b[0]);if(_){const b=e.original.deltaDecorations(l.originalDecorationIds,g.map(S=>({range:S.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),C=e.modified.deltaDecorations(l.modifiedDecorationIds,g.map(S=>({range:S.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));Un(S=>{this._unchangedRegions.set({regions:g,originalDecorationIds:b,modifiedDecorationIds:C},S)})}}));const o=(a,l,c)=>{const h=jm.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let d;const g=this._unchangedRegions.get();if(g){const S=g.originalDecorationIds.map(N=>e.original.getDecorationRange(N)).map(N=>N?dt.fromRangeInclusive(N):void 0),E=g.modifiedDecorationIds.map(N=>e.modified.getDecorationRange(N)).map(N=>N?dt.fromRangeInclusive(N):void 0);let T=vSe(g.regions.map((N,A)=>{if(!S[A]||!E[A])return;const P=S[A].length;return new jm(S[A].startLineNumber,E[A].startLineNumber,P,Math.min(N.visibleLineCountTop.get(),P),Math.min(N.visibleLineCountBottom.get(),P-N.visibleLineCountTop.get()))}).filter(dc),(N,A)=>!A||N.modifiedLineNumber>=A.modifiedLineNumber+A.lineCount&&N.originalLineNumber>=A.originalLineNumber+A.lineCount).map(N=>new eo(N.getHiddenOriginalRange(c),N.getHiddenModifiedRange(c)));T=eo.clip(T,dt.ofLength(1,e.original.getLineCount()),dt.ofLength(1,e.modified.getLineCount())),d=eo.inverse(T,e.original.getLineCount(),e.modified.getLineCount())}const _=[];if(d)for(const S of h){const E=d.filter(x=>x.original.intersectsStrict(S.originalUnchangedRange)&&x.modified.intersectsStrict(S.modifiedUnchangedRange));_.push(...S.setVisibleRanges(E,l))}else _.push(...h);const b=e.original.deltaDecorations(g?.originalDecorationIds||[],_.map(S=>({range:S.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),C=e.modified.deltaDecorations(g?.modifiedDecorationIds||[],_.map(S=>({range:S.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:_,originalDecorationIds:b,modifiedDecorationIds:C},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=ag.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=ag.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(th(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),r.cancel(),n.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),this._isDiffUpToDate.set(!1,void 0);let h=[];l.add(e.original.onDidChangeContent(_=>{const b=ag.fromModelContentChanges(_.changes);h=eI(h,b)}));let d=[];l.add(e.modified.onDidChangeContent(_=>{const b=ag.fromModelContentChanges(_.changes);d=eI(d,b)}));let g=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(g=FSe(g,e.original,e.modified),g=(e.original,e.modified,void 0)??g,g=(e.original,e.modified,void 0)??g,Un(_=>{o(g,_),this._lastDiff=g;const b=bF.fromDiffResult(g);this._diff.set(b,_),this._isDiffUpToDate.set(!0,_);const C=this.movedTextToCompare.read(void 0);this.movedTextToCompare.set(C?this._lastDiff.moves.find(S=>S.lineRangeMapping.modified.intersect(C.lineRangeMapping.modified)):void 0,_)}))}))}ensureModifiedLineIsVisible(e,t,i){if(this.diff.get()?.mappings.length===0)return;const n=this._unchangedRegions.get()?.regions||[];for(const r of n)if(r.getHiddenModifiedRange(void 0).contains(e)){r.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){if(this.diff.get()?.mappings.length===0)return;const n=this._unchangedRegions.get()?.regions||[];for(const r of n)if(r.getHiddenOriginalRange(void 0).contains(e)){r.showOriginalLine(e,t,i);return}}async waitForDiff(){await One(this.isDiffUpToDate,e=>e)}serializeState(){return{collapsedRegions:this._unchangedRegions.get()?.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){const t=e.collapsedRegions?.map(n=>dt.deserialize(n.range)),i=this._unchangedRegions.get();!i||!t||Un(n=>{for(const r of i.regions)for(const o of t)if(r.modifiedUnchangedRange.intersect(o)){r.setHiddenModifiedRange(o,n);break}})}};K8=PSe([BSe(2,oQ)],K8);function FSe(s,e,t){return{changes:s.changes.map(i=>new Il(i.original,i.modified,i.innerChanges?i.innerChanges.map(n=>VSe(n,e,t)):void 0)),moves:s.moves,identical:s.identical,quitEarly:s.quitEarly}}function VSe(s,e,t){let i=s.originalRange,n=s.modifiedRange;return i.startColumn===1&&n.startColumn===1&&(i.endColumn!==1||n.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&n.endColumn===t.getLineMaxColumn(n.endLineNumber)&&i.endLineNumber<e.getLineCount()&&n.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),n=n.setEndPosition(n.endLineNumber+1,1)),new Na(i,n)}class bF{static fromDiffResult(e){return new bF(e.changes.map(t=>new aQ(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,n){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=n}}class aQ{constructor(e){this.lineRangeMapping=e}}class jm{static fromDiffs(e,t,i,n,r){const o=Il.inverse(e,t,i),a=[];for(const l of o){let c=l.original.startLineNumber,h=l.modified.startLineNumber,d=l.original.length;const g=c===1&&h===1,_=c+d===t+1&&h+d===i+1;(g||_)&&d>=r+n?(g&&!_&&(d-=r),_&&!g&&(c+=r,h+=r,d-=r),a.push(new jm(c,h,d,0,0))):d>=r*2+n&&(c+=r,h+=r,d-=r*2,a.push(new jm(c,h,d,0,0)))}return a}get originalUnchangedRange(){return dt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return dt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,n,r){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=xt(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=xt(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Je(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=xt(this,void 0);const o=Math.max(Math.min(n,this.lineCount),0),a=Math.max(Math.min(r,this.lineCount-n),0);dV(n===o),dV(r===a),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],n=new gc(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let r=this.originalLineNumber,o=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(n.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of n.ranges){const h=l===n.ranges.length-1;l++;const d=(h?a:c.endLineNumberExclusive)-o,g=new jm(r,o,d,0,0);g.setHiddenModifiedRange(c,t),i.push(g),r=g.originalUnchangedRange.endLineNumberExclusive,o=g.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return dt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return dt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,n,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),r=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&n<r||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+r,i)}showOriginalLine(e,t,i){const n=e-this.originalLineNumber,r=this.originalLineNumber+this.lineCount-e;t===0&&n<r||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+r-n,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-r,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class HSe extends pe{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,n,r,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=n,this._editor=r,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Gt.asClassName(Ue.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const h=this._modifiedEditor.getOption(75);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${h}px`,this._diffActions.style.lineHeight=`${h}px`,this._marginDomNode.appendChild(this._diffActions);let d=0;const g=i.getOption(144)&&!Nd,_=(b,C)=>{this._contextMenuService.showContextMenu({domForShadowRoot:g?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:b,y:C}),getActions:()=>{const S=[],E=n.modified.isEmpty;return S.push(new Zm("diff.clipboard.copyDeletedContent",E?n.original.length>1?y(109,"Copy deleted lines"):y(110,"Copy deleted line"):n.original.length>1?y(111,"Copy changed lines"):y(112,"Copy changed line"),void 0,!0,async()=>{const T=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());await this._clipboardService.writeText(T)})),n.original.length>1&&S.push(new Zm("diff.clipboard.copyDeletedLineContent",E?y(113,"Copy deleted line ({0})",n.original.startLineNumber+d):y(114,"Copy changed line ({0})",n.original.startLineNumber+d),void 0,!0,async()=>{let T=this._originalTextModel.getLineContent(n.original.startLineNumber+d);T===""&&(T=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(T)})),i.getOption(104)||S.push(new Zm("diff.inline.revertChange",y(115,"Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),S},autoSelectFirstItem:!0})};this._register(Cr(this._diffActions,"mousedown",b=>{if(!b.leftButton)return;const{top:C,height:S}=pc(this._diffActions),E=Math.floor(h/3);b.preventDefault(),_(b.posx,C+S+E)})),this._register(i.onMouseMove(b=>{(b.target.type===8||b.target.type===5)&&b.target.detail.viewZoneId===this._getViewZoneId()?(d=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,h),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(b=>{b.event.leftButton&&(b.target.type===8||b.target.type===5)&&b.target.detail.viewZoneId===this._getViewZoneId()&&(b.event.preventDefault(),d=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,h),_(b.event.posx,b.event.posy+h))}))}_updateLightBulbPosition(e,t,i){const{top:n}=pc(e),r=t-n,o=Math.floor(r/i),a=o*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const zq=bp("diffEditorWidget",{createHTML:s=>s});function WSe(s,e,t,i,n=!1){Sr(i,e.fontInfo);const r=t.length>0,o=new TC(1e4);let a=0,l=0;const c=[];for(let _=0;_<s.lineTokens.length;_++){const b=_+1,C=s.lineTokens[_],S=s.lineBreakData[_],E=_c.filter(t,b,1,Number.MAX_SAFE_INTEGER);if(S){let x=0;for(const T of S.breakOffsets){const N=C.sliceAndInflate(x,T,0);a=Math.max(a,Uq(l,N,_c.extractWrapped(E,x,T),r,s.mightContainNonBasicASCII,s.mightContainRTL,e,o,n)),l++,x=T}c.push(S.breakOffsets.length)}else c.push(1),a=Math.max(a,Uq(l,C,E,r,s.mightContainNonBasicASCII,s.mightContainRTL,e,o,n)),l++}a+=e.scrollBeyondLastColumn;const h=o.build(),d=zq?zq.createHTML(h):h;i.innerHTML=d;const g=a*e.typicalHalfwidthCharacterWidth;return{heightInLines:l,minWidthInPx:g,viewLineCounts:c}}class zSe{constructor(e,t=e.map(r=>null),i=!0,n=!0){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=n}}class WL{static fromEditor(e){const t=e.getOptions(),i=t.get(59),n=t.get(165);return new WL(e.getModel()?.getOptions().tabSize||0,i,t.get(40),i.typicalHalfwidthCharacterWidth,t.get(118),t.get(75),n.decorationsWidth,t.get(133),t.get(113),t.get(108),t.get(60),t.get(117).verticalScrollbarSize)}constructor(e,t,i,n,r,o,a,l,c,h,d,g,_=!0){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=n,this.scrollBeyondLastColumn=r,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=h,this.fontLigatures=d,this.verticalScrollbarSize=g,this.setWidth=_}withSetWidth(e){return new WL(this.tabSize,this.fontInfo,this.disableMonospaceOptimizations,this.typicalHalfwidthCharacterWidth,this.scrollBeyondLastColumn,this.lineHeight,this.lineDecorationsWidth,this.stopRenderingLineAfter,this.renderWhitespace,this.renderControlCharacters,this.fontLigatures,this.verticalScrollbarSize,e)}withScrollBeyondLastColumn(e){return new WL(this.tabSize,this.fontInfo,this.disableMonospaceOptimizations,this.typicalHalfwidthCharacterWidth,e,this.lineHeight,this.lineDecorationsWidth,this.stopRenderingLineAfter,this.renderWhitespace,this.renderControlCharacters,this.fontLigatures,this.verticalScrollbarSize,this.setWidth)}}function Uq(s,e,t,i,n,r,o,a,l){a.appendString('<div class="view-line'),!l&&!i&&a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(s*o.lineHeight)),o.setWidth?a.appendString('px;width:1000000px;">'):a.appendString('px;">');const c=e.getLineContent(),h=Rl.isBasicASCII(c,n),d=Rl.containsRTL(c,h,r),g=wR(new B0(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,c,!1,h,d,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==rp.OFF,null,null,o.verticalScrollbarSize),a);return a.appendString("</div>"),g.characterMapping.getHorizontalOffset(g.characterMapping.length)}var USe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},qq=function(s,e){return function(t,i){e(t,i,s)}};let Y8=class extends pe{constructor(e,t,i,n,r,o,a,l,c,h){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=n,this._diffEditorWidget=r,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=h,this._originalTopPadding=xt(this,0),this._originalScrollOffset=xt(this,0),this._originalScrollOffsetAnimated=Mq(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=xt(this,0),this._modifiedScrollOffset=xt(this,0),this._modifiedScrollOffsetAnimated=Mq(this._targetWindow,this._modifiedScrollOffset,this._store);const d=xt("invalidateAlignmentsState",0),g=this._register(new Or(()=>{d.set(d.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(T=>{this._canIgnoreViewZoneUpdateEvent()||g.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(T=>{this._canIgnoreViewZoneUpdateEvent()||g.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(T=>{(T.hasChanged(166)||T.hasChanged(75))&&g.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(T=>{(T.hasChanged(166)||T.hasChanged(75))&&g.schedule()}));const _=this._diffModel.map(T=>T?mn(this,T.model.original.onDidChangeTokens,()=>T.model.original.tokenization.backgroundTokenizationState===2):void 0).map((T,N)=>T?.read(N)),b=Je(T=>{const N=this._diffModel.read(T),A=N?.diff.read(T);if(!N||!A)return null;d.read(T);const O=this._options.renderSideBySide.read(T);return $q(this._editors.original,this._editors.modified,A.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,O)}),C=Je(T=>{const N=this._diffModel.read(T)?.movedTextToCompare.read(T);if(!N)return null;d.read(T);const A=N.changes.map(P=>new aQ(P));return $q(this._editors.original,this._editors.modified,A,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function S(){const T=document.createElement("div");return T.className="diagonal-fill",T}const E=this._register(new Ze);this.viewZones=Je(this,T=>{E.clear();const N=b.read(T)||[],A=[],P=[],O=this._modifiedTopPadding.read(T);O>0&&P.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:O,showInHiddenAreas:!0,suppressMouseDown:!0});const V=this._originalTopPadding.read(T);V>0&&A.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:V,showInHiddenAreas:!0,suppressMouseDown:!0});const U=this._options.renderSideBySide.read(T),Y=U?void 0:this._editors.modified._getViewModel()?.createLineBreaksComputer();if(Y){const he=this._editors.original.getModel();for(const j of N)if(j.diff)for(let ae=j.originalRange.startLineNumber;ae<j.originalRange.endLineNumberExclusive;ae++){if(ae>he.getLineCount())return{orig:A,mod:P};Y?.addRequest(he.getLineContent(ae),null,null)}}const B=Y?.finalize()??[];let F=0;const W=this._editors.modified.getOption(75),ee=this._diffModel.read(T)?.movedTextToCompare.read(T),X=this._editors.original.getModel()?.mightContainNonBasicASCII()??!1,$=this._editors.original.getModel()?.mightContainRTL()??!1,te=WL.fromEditor(this._editors.modified);for(const he of N)if(he.diff&&!U&&(!this._options.useTrueInlineDiffRendering.read(T)||!vF(he.diff))){if(!he.originalRange.isEmpty){_.read(T);const ae=document.createElement("div");ae.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const Te=this._editors.original.getModel();if(he.originalRange.endLineNumberExclusive-1>Te.getLineCount())return{orig:A,mod:P};const Le=new zSe(he.originalRange.mapToLineArray(Xe=>Te.tokenization.getLineTokens(Xe)),he.originalRange.mapToLineArray(Xe=>B[F++]),X,$),Oe=[];for(const Xe of he.diff.innerChanges||[])Oe.push(new TL(Xe.originalRange.delta(-(he.diff.original.startLineNumber-1)),q8.className,0));const Ne=WSe(Le,te,Oe,ae),Ke=document.createElement("div");if(Ke.className="inline-deleted-margin-view-zone",Sr(Ke,te.fontInfo),this._options.renderIndicators.read(T))for(let Xe=0;Xe<Ne.heightInLines;Xe++){const tt=document.createElement("div");tt.className=`delete-sign ${Gt.asClassName(sQ)}`,tt.setAttribute("style",`position:absolute;top:${Xe*W}px;width:${te.lineDecorationsWidth}px;height:${W}px;right:0;`),Ke.appendChild(tt)}let Dt;E.add(new HSe(()=>Tj(Dt),Ke,this._editors.modified,he.diff,this._diffEditorWidget,Ne.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Xe=0;Xe<Ne.viewLineCounts.length;Xe++){const tt=Ne.viewLineCounts[Xe];tt>1&&A.push({afterLineNumber:he.originalRange.startLineNumber+Xe,domNode:S(),heightInPx:(tt-1)*W,showInHiddenAreas:!0,suppressMouseDown:!0})}P.push({afterLineNumber:he.modifiedRange.startLineNumber-1,domNode:ae,heightInPx:Ne.heightInLines*W,minWidthInPx:Ne.minWidthInPx,marginDomNode:Ke,setZoneId(Xe){Dt=Xe},showInHiddenAreas:!0,suppressMouseDown:!0})}const j=document.createElement("div");j.className="gutter-delete",A.push({afterLineNumber:he.originalRange.endLineNumberExclusive-1,domNode:S(),heightInPx:he.modifiedHeightInPx,marginDomNode:j,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const j=he.modifiedHeightInPx-he.originalHeightInPx;if(j>0){if(ee?.lineRangeMapping.original.delta(-1).deltaLength(2).contains(he.originalRange.endLineNumberExclusive-1))continue;A.push({afterLineNumber:he.originalRange.endLineNumberExclusive-1,domNode:S(),heightInPx:j,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let ae=function(){const Le=document.createElement("div");return Le.className="arrow-revert-change "+Gt.asClassName(Ue.arrowRight),T.store.add(ue(Le,"mousedown",Oe=>Oe.stopPropagation())),T.store.add(ue(Le,"click",Oe=>{Oe.stopPropagation(),r.revert(he.diff)})),ot("div",{},Le)};var ce=ae;if(ee?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(he.modifiedRange.endLineNumberExclusive-1))continue;let Te;he.diff&&he.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(T)&&(Te=ae()),P.push({afterLineNumber:he.modifiedRange.endLineNumberExclusive-1,domNode:S(),heightInPx:-j,marginDomNode:Te,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const he of C.read(T)??[]){if(!ee?.lineRangeMapping.original.intersect(he.originalRange)||!ee?.lineRangeMapping.modified.intersect(he.modifiedRange))continue;const j=he.modifiedHeightInPx-he.originalHeightInPx;j>0?A.push({afterLineNumber:he.originalRange.endLineNumberExclusive-1,domNode:S(),heightInPx:j,showInHiddenAreas:!0,suppressMouseDown:!0}):P.push({afterLineNumber:he.modifiedRange.endLineNumberExclusive-1,domNode:S(),heightInPx:-j,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:A,mod:P}});let x=!1;this._register(this._editors.original.onDidScrollChange(T=>{T.scrollLeftChanged&&!x&&(x=!0,this._editors.modified.setScrollLeft(T.scrollLeft),x=!1)})),this._register(this._editors.modified.onDidScrollChange(T=>{T.scrollLeftChanged&&!x&&(x=!0,this._editors.original.setScrollLeft(T.scrollLeft),x=!1)})),this._originalScrollTop=mn(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=mn(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(qt(T=>{const N=this._originalScrollTop.read(T)-(this._originalScrollOffsetAnimated.read(void 0)-this._modifiedScrollOffsetAnimated.read(T))-(this._originalTopPadding.read(void 0)-this._modifiedTopPadding.read(T));N!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(N,1)})),this._register(qt(T=>{const N=this._modifiedScrollTop.read(T)-(this._modifiedScrollOffsetAnimated.read(void 0)-this._originalScrollOffsetAnimated.read(T))-(this._modifiedTopPadding.read(void 0)-this._originalTopPadding.read(T));N!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(N,1)})),this._register(qt(T=>{const N=this._diffModel.read(T)?.movedTextToCompare.read(T);let A=0;if(N){const P=this._editors.original.getTopForLineNumber(N.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.read(void 0);A=this._editors.modified.getTopForLineNumber(N.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.read(void 0)-P}A>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(A,void 0)):A<0?(this._modifiedTopPadding.set(-A,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.read(void 0)-A,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.read(void 0)+A,void 0,!0)}))}};Y8=USe([qq(8,fF),qq(9,kg)],Y8);function $q(s,e,t,i,n,r){const o=new _g(jq(s,i)),a=new _g(jq(e,n)),l=s.getOption(75),c=e.getOption(75),h=[];let d=0,g=0;function _(C,S){for(;;){let E=o.peek(),x=a.peek();if(E&&E.lineNumber>=C&&(E=void 0),x&&x.lineNumber>=S&&(x=void 0),!E&&!x)break;const T=E?E.lineNumber-d:Number.MAX_VALUE,N=x?x.lineNumber-g:Number.MAX_VALUE;T<N?(o.dequeue(),x={lineNumber:E.lineNumber-d+g,heightInPx:0}):T>N?(a.dequeue(),E={lineNumber:x.lineNumber-g+d,heightInPx:0}):(o.dequeue(),a.dequeue()),h.push({originalRange:dt.ofLength(E.lineNumber,1),modifiedRange:dt.ofLength(x.lineNumber,1),originalHeightInPx:l+E.heightInPx,modifiedHeightInPx:c+x.heightInPx,diff:void 0})}}for(const C of t){let N=function(A,P,O=!1){if(A<T||P<x)return;if(E)E=!1;else if(!O&&(A===T||P===x))return;const V=new dt(T,A),U=new dt(x,P);if(V.isEmpty&&U.isEmpty)return;const Y=o.takeWhile(F=>F.lineNumber<A)?.reduce((F,W)=>F+W.heightInPx,0)??0,B=a.takeWhile(F=>F.lineNumber<P)?.reduce((F,W)=>F+W.heightInPx,0)??0;h.push({originalRange:V,modifiedRange:U,originalHeightInPx:V.length*l+Y,modifiedHeightInPx:U.length*c+B,diff:C.lineRangeMapping}),T=A,x=P};var b=N;const S=C.lineRangeMapping;_(S.original.startLineNumber,S.modified.startLineNumber);let E=!0,x=S.modified.startLineNumber,T=S.original.startLineNumber;if(r)for(const A of S.innerChanges||[]){A.originalRange.startColumn>1&&A.modifiedRange.startColumn>1&&N(A.originalRange.startLineNumber,A.modifiedRange.startLineNumber);const P=s.getModel(),O=A.originalRange.endLineNumber<=P.getLineCount()?P.getLineMaxColumn(A.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;A.originalRange.endColumn<O&&N(A.originalRange.endLineNumber,A.modifiedRange.endLineNumber)}N(S.original.endLineNumberExclusive,S.modified.endLineNumberExclusive,!0),d=S.original.endLineNumberExclusive,g=S.modified.endLineNumberExclusive}return _(Number.MAX_VALUE,Number.MAX_VALUE),h}function jq(s,e){const t=[],i=[],n=s.getOption(166).wrappingColumn!==-1,r=s._getViewModel().coordinatesConverter,o=s.getOption(75);if(n)for(let l=1;l<=s.getModel().getLineCount();l++){const c=r.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of s.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:r.convertViewPositionToModelPosition(new se(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return mSe(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function vF(s){return s.innerChanges?s.innerChanges.every(e=>Gq(e.modifiedRange)&&Gq(e.originalRange)||e.originalRange.equalsRange(new ie(1,1,1,1))):!1}function Gq(s){return s.startLineNumber===s.endLineNumber}const sx=class sx extends pe{constructor(e,t,i,n,r){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=n,this._editors=r,this._originalScrollTop=mn(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=mn(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=Qc("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=xt(this,0),this._modifiedViewZonesChangedSignal=Qc("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=Qc("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=Je(this,h=>{this._element.replaceChildren();const d=this._diffModel.read(h),g=d?.diff.read(h)?.movedTexts;if(!g||g.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(h);const _=this._originalEditorLayoutInfo.read(h),b=this._modifiedEditorLayoutInfo.read(h);if(!_||!b){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(h),this._originalViewZonesChangedSignal.read(h);const C=g.map(P=>{function O($,te){const ce=te.getTopForLineNumber($.startLineNumber,!0),he=te.getTopForLineNumber($.endLineNumberExclusive,!0);return(ce+he)/2}const V=O(P.lineRangeMapping.original,this._editors.original),U=this._originalScrollTop.read(h),Y=O(P.lineRangeMapping.modified,this._editors.modified),B=this._modifiedScrollTop.read(h),F=V-U,W=Y-B,ee=Math.min(V,Y),X=Math.max(V,Y);return{range:new it(ee,X),from:F,to:W,fromWithoutScroll:V,toWithoutScroll:Y,move:P}});C.sort(Iee(Dl(P=>P.fromWithoutScroll>P.toWithoutScroll,Aee),Dl(P=>P.fromWithoutScroll>P.toWithoutScroll?P.fromWithoutScroll:-P.toWithoutScroll,ug)));const S=wF.compute(C.map(P=>P.range)),E=10,x=_.verticalScrollbarWidth,T=(S.getTrackCount()-1)*10+E*2,N=x+T+(b.contentLeft-sx.movedCodeBlockPadding);let A=0;for(const P of C){const O=S.getTrack(A),V=x+E+O*10,U=15,Y=15,B=N,F=b.glyphMarginWidth+b.lineNumbersWidth,W=18,ee=document.createElementNS("http://www.w3.org/2000/svg","rect");ee.classList.add("arrow-rectangle"),ee.setAttribute("x",`${B-F}`),ee.setAttribute("y",`${P.to-W/2}`),ee.setAttribute("width",`${F}`),ee.setAttribute("height",`${W}`),this._element.appendChild(ee);const X=document.createElementNS("http://www.w3.org/2000/svg","g"),$=document.createElementNS("http://www.w3.org/2000/svg","path");$.setAttribute("d",`M 0 ${P.from} L ${V} ${P.from} L ${V} ${P.to} L ${B-Y} ${P.to}`),$.setAttribute("fill","none"),X.appendChild($);const te=document.createElementNS("http://www.w3.org/2000/svg","polygon");te.classList.add("arrow"),h.store.add(qt(ce=>{$.classList.toggle("currentMove",P.move===d.activeMovedText.read(ce)),te.classList.toggle("currentMove",P.move===d.activeMovedText.read(ce))})),te.setAttribute("points",`${B-Y},${P.to-U/2} ${B},${P.to} ${B-Y},${P.to+U/2}`),X.appendChild(te),this._element.appendChild(X),A++}this.width.set(T,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(lt(()=>this._element.remove())),this._register(qt(h=>{const d=this._originalEditorLayoutInfo.read(h),g=this._modifiedEditorLayoutInfo.read(h);!d||!g||(this._element.style.left=`${d.width-d.verticalScrollbarWidth}px`,this._element.style.height=`${d.height}px`,this._element.style.width=`${d.verticalScrollbarWidth+d.contentLeft-sx.movedCodeBlockPadding+this.width.read(h)}px`)})),this._register(tR(this._state));const o=Je(h=>{const g=this._diffModel.read(h)?.diff.read(h);return g?g.movedTexts.map(_=>({move:_,original:new rw(Cx(_.lineRangeMapping.original.startLineNumber-1),18),modified:new rw(Cx(_.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(VI(this._editors.original,o.map(h=>h.map(d=>d.original)))),this._register(VI(this._editors.modified,o.map(h=>h.map(d=>d.modified)))),this._register(th((h,d)=>{const g=o.read(h);for(const _ of g)d.add(new Kq(this._editors.original,_.original,_.move,"original",this._diffModel.get())),d.add(new Kq(this._editors.modified,_.modified,_.move,"modified",this._diffModel.get()))}));const a=Qc("original.onDidFocusEditorWidget",h=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>h(void 0),0))),l=Qc("modified.onDidFocusEditorWidget",h=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>h(void 0),0)));let c="modified";this._register(EC({changeTracker:{createChangeSummary:()=>{},handleChange:(h,d)=>(h.didChange(a)&&(c="original"),h.didChange(l)&&(c="modified"),!0)}},h=>{a.read(h),l.read(h);const d=this._diffModel.read(h);if(!d)return;const g=d.diff.read(h);let _;if(g&&c==="original"){const b=this._editors.originalCursor.read(h);b&&(_=g.movedTexts.find(C=>C.lineRangeMapping.original.contains(b.lineNumber)))}if(g&&c==="modified"){const b=this._editors.modifiedCursor.read(h);b&&(_=g.movedTexts.find(C=>C.lineRangeMapping.modified.contains(b.lineNumber)))}_!==d.movedTextToCompare.read(void 0)&&d.movedTextToCompare.set(void 0,void 0),d.setActiveMovedText(_)}))}};sx.movedCodeBlockPadding=4;let $w=sx;class wF{static compute(e){const t=[],i=[];for(const n of e){let r=t.findIndex(o=>!o.intersectsStrict(n));r===-1&&(t.length>=6?r=Eoe(t,Dl(a=>a.intersectWithRangeLength(n),ug)):(r=t.length,t.push(new AP))),t[r].addRange(n),i.push(r)}return new wF(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class Kq extends mF{constructor(e,t,i,n,r){const o=Jt("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=i,this._kind=n,this._diffModel=r,this._nodes=Jt("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Jt("div.text-content@textContent"),Jt("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=mn(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(fp(this._nodes.root,{paddingRight:a.map(g=>g.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?y(128,"Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):y(129,"Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?y(130,"Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):y(131,"Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new kd(this._nodes.actionBar,{highlightToggledItems:!0})),h=new Zm("",l,"",!1);c.push(h,{icon:!1,label:!0});const d=new Zm("","Compare",Gt.asClassName(Ue.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(qt(g=>{const _=this._diffModel.movedTextToCompare.read(g)===i;d.checked=_})),c.push(d,{icon:!1,label:!0})}}class qSe extends pe{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=Je(this,r=>{const o=this._diffModel.read(r),a=o?.diff.read(r);if(!a)return null;const l=this._diffModel.read(r).movedTextToCompare.read(r),c=this._options.renderIndicators.read(r),h=this._options.showEmptyDecorations.read(r),d=[],g=[];if(!l)for(const b of a.mappings)if(b.lineRangeMapping.original.isEmpty||d.push({range:b.lineRangeMapping.original.toInclusiveRange(),options:c?Fq:Hq}),b.lineRangeMapping.modified.isEmpty||g.push({range:b.lineRangeMapping.modified.toInclusiveRange(),options:c?Bq:Vq}),b.lineRangeMapping.modified.isEmpty||b.lineRangeMapping.original.isEmpty)b.lineRangeMapping.original.isEmpty||d.push({range:b.lineRangeMapping.original.toInclusiveRange(),options:MSe}),b.lineRangeMapping.modified.isEmpty||g.push({range:b.lineRangeMapping.modified.toInclusiveRange(),options:ASe});else{const C=this._options.useTrueInlineDiffRendering.read(r)&&vF(b.lineRangeMapping);for(const S of b.lineRangeMapping.innerChanges||[])if(b.lineRangeMapping.original.contains(S.originalRange.startLineNumber)&&d.push({range:S.originalRange,options:S.originalRange.isEmpty()&&h?OSe:q8}),b.lineRangeMapping.modified.contains(S.modifiedRange.startLineNumber)&&g.push({range:S.modifiedRange,options:S.modifiedRange.isEmpty()&&h&&!C?RSe:Wq}),C){const E=o.model.original.getValueInRange(S.originalRange);g.push({range:S.modifiedRange,options:{description:"deleted-text",before:{content:E,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const b of l.changes){const C=b.original.toInclusiveRange();C&&d.push({range:C,options:c?Fq:Hq});const S=b.modified.toInclusiveRange();S&&g.push({range:S,options:c?Bq:Vq});for(const E of b.innerChanges||[])d.push({range:E.originalRange,options:q8}),g.push({range:E.modifiedRange,options:Wq})}const _=this._diffModel.read(r).activeMovedText.read(r);for(const b of a.movedTexts)d.push({range:b.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(b===_?" currentMove":""),blockPadding:[$w.movedCodeBlockPadding,0,$w.movedCodeBlockPadding,$w.movedCodeBlockPadding]}}),g.push({range:b.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(b===_?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:d,modifiedDecorations:g}}),this._register(FI(this._editors.original,this._decorations.map(r=>r?.originalDecorations||[]))),this._register(FI(this._editors.modified,this._decorations.map(r=>r?.modifiedDecorations||[])))}}class Ku{static equals(e,t){return e.x===t.x&&e.y===t.y}constructor(e,t){this.x=e,this.y=t}add(e){return new Ku(this.x+e.x,this.y+e.y)}deltaX(e){return new Ku(this.x+e,this.y)}deltaY(e){return new Ku(this.x,this.y+e)}toString(){return`(${this.x},${this.y})`}subtract(e){return new Ku(this.x-e.x,this.y-e.y)}scale(e){return new Ku(this.x*e,this.y*e)}mapComponents(e){return new Ku(e(this.x),e(this.y))}isZero(){return this.x===0&&this.y===0}withThreshold(e){return this.mapComponents(t=>t>e?t-e:t<-e?t+e:0)}}function R1(s){return Z8.get(s)}const Nm=class Nm extends pe{static get(e){let t=Nm._map.get(e);if(!t){t=new Nm(e),Nm._map.set(e,t);const i=e.onDidDispose(()=>{const n=Nm._map.get(e);n&&(Nm._map.delete(e),n.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new x2(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=xt(this,this.editor.getModel()),this.model=this._model,this.isReadonly=mn(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(104)),this._versionId=lL({owner:this,lazy:!0},this.editor.getModel()?.getVersionId()??null),this.versionId=this._versionId,this._selections=lL({owner:this,equalsFn:WS(L3(Yt.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.positions=Sd({owner:this,equalsFn:WS(L3(se.equals))},t=>this.selections.read(t)?.map(i=>i.getStartPosition())??null),this.isFocused=mn(this,t=>{const i=this.editor.onDidFocusEditorWidget(t),n=this.editor.onDidBlurEditorWidget(t);return{dispose(){i.dispose(),n.dispose()}}},()=>this.editor.hasWidgetFocus()),this.isTextFocused=mn(this,t=>{const i=this.editor.onDidFocusEditorText(t),n=this.editor.onDidBlurEditorText(t);return{dispose(){i.dispose(),n.dispose()}}},()=>this.editor.hasTextFocus()),this.inComposition=mn(this,t=>{const i=this.editor.onDidCompositionStart(()=>{t(void 0)}),n=this.editor.onDidCompositionEnd(()=>{t(void 0)});return{dispose(){i.dispose(),n.dispose()}}},()=>this.editor.inComposition),this.value=bP(this,t=>(this.versionId.read(t),this.model.read(t)?.getValue()??""),(t,i)=>{const n=this.model.get();n!==null&&t!==n.getValue()&&n.setValue(t)}),this.valueIsEmpty=Je(this,t=>(this.versionId.read(t),this.editor.getModel()?.getValueLength()===0)),this.cursorSelection=Sd({owner:this,equalsFn:WS(Yt.selectionsEqual)},t=>this.selections.read(t)?.[0]??null),this.cursorPosition=Sd({owner:this,equalsFn:se.equals},t=>this.selections.read(t)?.[0]?.getPosition()??null),this.cursorLineNumber=Je(this,t=>this.cursorPosition.read(t)?.lineNumber??null),this.onDidType=wx(this),this.onDidPaste=wx(this),this.scrollTop=mn(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=mn(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=mn(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(t=>t.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(t=>t.decorationsLeft),this.layoutInfoWidth=this.layoutInfo.map(t=>t.width),this.layoutInfoHeight=this.layoutInfo.map(t=>t.height),this.layoutInfoMinimap=this.layoutInfo.map(t=>t.minimap),this.layoutInfoVerticalScrollbarWidth=this.layoutInfo.map(t=>t.verticalScrollbarWidth),this.contentWidth=mn(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this.contentHeight=mn(this.editor.onDidContentSizeChange,()=>this.editor.getContentHeight()),this._widgetCounter=0,this.openedPeekWidgets=xt(this,0),this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(t=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,t)}finally{this._endUpdate()}})),this._register(this.editor.onDidPaste(t=>{this._beginUpdate();try{this._forceUpdate(),this.onDidPaste.trigger(this._currentTransaction,t)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(t=>{this._beginUpdate();try{this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,t),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(t=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,t),this._forceUpdate()}finally{this._endUpdate()}})),this.domNode=Je(t=>(this.model.read(t),this.editor.getDomNode()))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e,t=Fr.ofCaller()){return mn(this,i=>this.editor.onDidChangeConfiguration(n=>{n.hasChanged(e)&&i(void 0)}),()=>this.editor.getOption(e),t)}setDecorations(e){const t=new Ze,i=this.editor.createDecorationsCollection();return t.add(_P({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},n=>{const r=e.read(n);i.set(r)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._widgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const n=qt(r=>{e.position.read(r),e.minContentWidthInPx.read(r),this.editor.layoutOverlayWidget(i)});return lt(()=>{n.dispose(),this.editor.removeOverlayWidget(i)})}createContentWidget(e){const t="observableContentWidget"+this._widgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow};this.editor.addContentWidget(i);const n=qt(r=>{e.position.read(r),this.editor.layoutContentWidget(i)});return lt(()=>{n.dispose(),this.editor.removeContentWidget(i)})}observeLineOffsetRange(e,t){const i=this.observePosition(e.map(r=>new se(r.startLineNumber,1)),t),n=this.observePosition(e.map(r=>new se(r.endLineNumberExclusive+1,1)),t);return Je(r=>{i.read(r),n.read(r);const o=e.read(r),a=this.model.read(r)?.getLineCount(),l=(typeof a<"u"&&o.startLineNumber>a?this.editor.getBottomForLineNumber(a):this.editor.getTopForLineNumber(o.startLineNumber))-this.scrollTop.read(r),c=o.isEmpty?l:this.editor.getBottomForLineNumber(o.endLineNumberExclusive-1)-this.scrollTop.read(r);return new it(l,c)})}observePosition(e,t){let i=e.get();const n=lL({owner:this,debugName:()=>`topLeftOfPosition${i?.toString()}`,equalsFn:WS(Ku.equals)},new Ku(0,0)),r="observablePositionWidget"+this._widgetCounter++,o=document.createElement("div"),a={getDomNode:()=>o,getPosition:()=>i?{preference:[0],position:e.get()}:null,getId:()=>r,allowEditorOverflow:!1,afterRender:(l,c)=>{const h=this._model.get();h&&i&&i.lineNumber>h.getLineCount()?n.set(new Ku(0,this.editor.getBottomForLineNumber(h.getLineCount())-this.scrollTop.get()),void 0):n.set(c?new Ku(c.left,c.top):null,void 0)}};return this.editor.addContentWidget(a),t.add(qt(l=>{i=e.read(l),this.editor.layoutContentWidget(a)})),t.add(lt(()=>{this.editor.removeContentWidget(a)})),n}isTargetHovered(e,t){const i=xt("isInjectedTextHovered",!1);return t.add(this.editor.onMouseMove(n=>{const r=e(n);i.set(r,void 0)})),t.add(this.editor.onMouseLeave(n=>{i.set(!1,void 0)})),i}observeLineHeightForPosition(e){return Je(t=>{const i=e instanceof se?e:e.read(t);return i===null?null:(this.getOption(75).read(t),this.editor.getLineHeightForPosition(i))})}observeLineHeightForLine(e){return typeof e=="number"?this.observeLineHeightForPosition(new se(e,1)):Je(t=>{const i=e.read(t);return i===null?null:this.observeLineHeightForPosition(new se(i,1)).read(t)})}observeLineHeightsForLineRange(e){return Je(t=>{const i=e instanceof dt?e:e.read(t),n=[];for(let r=i.startLineNumber;r<i.endLineNumberExclusive;r++)n.push(this.observeLineHeightForLine(r).read(t));return n})}};Nm._map=new Map;let Z8=Nm;var $Se=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},jSe=function(s,e){return function(t,i){e(t,i,s)}},Fu,cg;let c2=(cg=class extends pe{constructor(e,t,i,n,r,o,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=n,this._rootHeight=r,this._modifiedEditorLayoutInfo=o,this._themeService=a,this.width=Fu.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=mn(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Je(g=>{const _=l.read(g),b=_.getColor(kle)||(_.getColor(Lle)||l7).transparent(2),C=_.getColor(Ele)||(_.getColor(xle)||c7).transparent(2);return{insertColor:b,removeColor:C}}),h=ei(document.createElement("div"));h.setClassName("diffViewport"),h.setPosition("absolute");const d=Jt("div.diffOverview",{style:{position:"absolute",top:"0px",width:Fu.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(XS(d,h.domNode)),this._register(Cr(d,Re.POINTER_DOWN,g=>{this._editors.modified.delegateVerticalScrollbarPointerDown(g)})),this._register(ue(d,Re.MOUSE_WHEEL,g=>{this._editors.modified.delegateScrollFromMouseWheelEvent(g)},{passive:!1})),this._register(XS(this._rootElement,d)),this._register(th((g,_)=>{const b=this._diffModel.read(g),C=this._editors.original.createOverviewRuler("original diffOverviewRuler");C&&(_.add(C),_.add(XS(d,C.getDomNode())));const S=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(S&&(_.add(S),_.add(XS(d,S.getDomNode()))),!C||!S)return;const E=Qc("viewZoneChanged",this._editors.original.onDidChangeViewZones),x=Qc("viewZoneChanged",this._editors.modified.onDidChangeViewZones),T=Qc("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),N=Qc("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);_.add(qt(A=>{E.read(A),x.read(A),T.read(A),N.read(A);const P=c.read(A),O=b?.diff.read(A)?.mappings;function V(B,F,W){const ee=W._getViewModel();return ee?B.filter(X=>X.length>0).map(X=>{const $=ee.coordinatesConverter.convertModelPositionToViewPosition(new se(X.startLineNumber,1)),te=ee.coordinatesConverter.convertModelPositionToViewPosition(new se(X.endLineNumberExclusive,1)),ce=te.lineNumber-$.lineNumber;return new CY($.lineNumber,te.lineNumber,ce,F.toString())}):[]}const U=V((O||[]).map(B=>B.lineRangeMapping.original),P.removeColor,this._editors.original),Y=V((O||[]).map(B=>B.lineRangeMapping.modified),P.insertColor,this._editors.modified);C?.setZones(U),S?.setZones(Y)})),_.add(qt(A=>{const P=this._rootHeight.read(A),O=this._rootWidth.read(A),V=this._modifiedEditorLayoutInfo.read(A);if(V){const U=Fu.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Fu.ONE_OVERVIEW_WIDTH;C.setLayout({top:0,height:P,right:U+Fu.ONE_OVERVIEW_WIDTH,width:Fu.ONE_OVERVIEW_WIDTH}),S.setLayout({top:0,height:P,right:0,width:Fu.ONE_OVERVIEW_WIDTH});const Y=this._editors.modifiedScrollTop.read(A),B=this._editors.modifiedScrollHeight.read(A),F=this._editors.modified.getOption(117),W=new fC(F.verticalHasArrows?F.arrowSize:0,F.verticalScrollbarSize,0,V.height,B,Y);h.setTop(W.getSliderPosition()),h.setHeight(W.getSliderSize())}else h.setTop(0),h.setHeight(0);d.style.height=P+"px",d.style.left=O-Fu.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",h.setWidth(Fu.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Fu=cg,cg.ONE_OVERVIEW_WIDTH=15,cg.ENTIRE_DIFF_OVERVIEW_WIDTH=cg.ONE_OVERVIEW_WIDTH*2,cg);c2=Fu=$Se([jSe(6,za)],c2);var GSe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},R5=function(s,e){return function(t,i){e(t,i,s)}};let X8=class extends pe{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,n,r,o,a,l){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=n,this._createInnerEditor=r,this._contextKeyService=o,this._instantiationService=a,this._keybindingService=l,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new ne),this.modifiedScrollTop=mn(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=mn(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=R1(this.modified),this.originalObs=R1(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=mn(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=Sd({owner:this,equalsFn:se.equals},c=>this.modifiedSelections.read(c)[0]?.getPosition()??new se(1,1)),this.originalCursor=mn(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new se(1,1)),this.isOriginalFocused=R1(this.original).isFocused,this.isModifiedFocused=R1(this.modified).isFocused,this.isFocused=Je(this,c=>this.isOriginalFocused.read(c)||this.isModifiedFocused.read(c)),this._argCodeEditorWidgetOptions=null,this._register(EC({changeTracker:{createChangeSummary:()=>({}),handleChange:(c,h)=>(c.didChange(i.editorOptions)&&Object.assign(h,c.change.changedOptions),!0)}},(c,h)=>{i.editorOptions.read(c),this._options.renderSideBySide.read(c),this.modified.updateOptions(this._adjustOptionsForRightHandSide(c,h)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(c,h))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t),r=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>r.set(!0))),this._register(n.onDidBlurEditorWidget(()=>r.set(!1))),n}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t),r=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>r.set(!0))),this._register(n.onDidBlurEditorWidget(()=>r.set(!1))),n}_constructInnerEditor(e,t,i,n){const r=this._createInnerEditor(e,t,i,n);return this._register(r.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+c2.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),r}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=N0.revealHorizontalRightPadding.defaultValue+c2.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.allowVariableLineHeights=!1,t.allowVariableFonts=!1,t.allowVariableFontsInAccessibilityMode=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){e||(e="");const t=y(108," use {0} to open the accessibility help.",this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp")?.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};X8=GSe([R5(5,ai),R5(6,Zt),R5(7,ar)],X8);class KSe{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=bP(this,i=>{const n=this._sashRatio.read(i)??this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(n,i)},(i,n)=>{const r=this.dimensions.width.get();this._sashRatio.set(i/r,n)}),this._sashRatio=xt(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),n=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),r=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):n,o=100;return i<=o*2?n:r<o?o:r>i-o?i-o:r}}class lQ extends pe{constructor(e,t,i,n,r,o){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=n,this.sashLeft=r,this._resetSash=o,this._sash=this._register(new ac(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(qt(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(qt(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}const HA=class HA extends pe{constructor(){super(...arguments),this._id=++HA.idCounter,this._onDidDispose=this._register(new ne),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,n=!0){this._targetEditor.revealRange(e,t,i,n)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};HA.idCounter=0;let Q8=HA;var YSe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},ZSe=function(s,e){return function(t,i){e(t,i,s)}};let J8=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=xt(this,0),this._screenReaderMode=mn(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Je(this,n=>this._options.read(n).renderSideBySide&&this._diffEditorWidth.read(n)<=this._options.read(n).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Je(this,n=>this._options.read(n).renderOverviewRuler),this.renderSideBySide=Je(this,n=>this.compactMode.read(n)&&this.shouldRenderInlineViewInSmartMode.read(n)?!1:this._options.read(n).renderSideBySide&&!(this._options.read(n).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(n)&&!this._screenReaderMode.read(n))),this.readOnly=Je(this,n=>this._options.read(n).readOnly),this.shouldRenderOldRevertArrows=Je(this,n=>!(!this._options.read(n).renderMarginRevertIcon||!this.renderSideBySide.read(n)||this.readOnly.read(n)||this.shouldRenderGutterMenu.read(n))),this.shouldRenderGutterMenu=Je(this,n=>this._options.read(n).renderGutterMenu),this.renderIndicators=Je(this,n=>this._options.read(n).renderIndicators),this.enableSplitViewResizing=Je(this,n=>this._options.read(n).enableSplitViewResizing),this.splitViewDefaultRatio=Je(this,n=>this._options.read(n).splitViewDefaultRatio),this.ignoreTrimWhitespace=Je(this,n=>this._options.read(n).ignoreTrimWhitespace),this.maxComputationTimeMs=Je(this,n=>this._options.read(n).maxComputationTime),this.showMoves=Je(this,n=>this._options.read(n).experimental.showMoves&&this.renderSideBySide.read(n)),this.isInEmbeddedEditor=Je(this,n=>this._options.read(n).isInEmbeddedEditor),this.diffWordWrap=Je(this,n=>this._options.read(n).diffWordWrap),this.originalEditable=Je(this,n=>this._options.read(n).originalEditable),this.diffCodeLens=Je(this,n=>this._options.read(n).diffCodeLens),this.accessibilityVerbose=Je(this,n=>this._options.read(n).accessibilityVerbose),this.diffAlgorithm=Je(this,n=>this._options.read(n).diffAlgorithm),this.showEmptyDecorations=Je(this,n=>this._options.read(n).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Je(this,n=>this._options.read(n).onlyShowAccessibleDiffViewer),this.compactMode=Je(this,n=>this._options.read(n).compactMode),this.trueInlineDiffRenderingEnabled=Je(this,n=>this._options.read(n).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=Je(this,n=>!this.renderSideBySide.read(n)&&this.trueInlineDiffRenderingEnabled.read(n)),this.hideUnchangedRegions=Je(this,n=>this._options.read(n).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Je(this,n=>this._options.read(n).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Je(this,n=>this._options.read(n).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Je(this,n=>this._options.read(n).hideUnchangedRegions.minimumLineCount),this._model=xt(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,n=>Wne(this,r=>{const o=n?.diff.read(r);return o?XSe(o,this.trueInlineDiffRenderingEnabled.read(r)):void 0})).flatten().map(this,n=>!!n),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...Yq(e,gr)};this._options=xt(this,i)}updateOptions(e){const t=Yq(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};J8=YSe([ZSe(1,Ol)],J8);function XSe(s,e){return s.mappings.every(t=>QSe(t.lineRangeMapping)||JSe(t.lineRangeMapping)||e&&vF(t.lineRangeMapping))}function QSe(s){return s.original.length===0}function JSe(s){return s.modified.length===0}function Yq(s,e){return{enableSplitViewResizing:$e(s.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:tte(s.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:$e(s.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:$e(s.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:H_(s.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:H_(s.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:$e(s.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:$e(s.renderIndicators,e.renderIndicators),originalEditable:$e(s.originalEditable,e.originalEditable),diffCodeLens:$e(s.diffCodeLens,e.diffCodeLens),renderOverviewRuler:$e(s.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:Gi(s.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:Gi(s.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:$e(s.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:$e(s.experimental?.showMoves,e.experimental.showMoves),showEmptyDecorations:$e(s.experimental?.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:$e(s.experimental?.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:$e(s.hideUnchangedRegions?.enabled??s.experimental?.collapseUnchangedRegions,e.hideUnchangedRegions.enabled),contextLineCount:H_(s.hideUnchangedRegions?.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:H_(s.hideUnchangedRegions?.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:H_(s.hideUnchangedRegions?.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:$e(s.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:$e(s.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:H_(s.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:$e(s.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:$e(s.renderGutterMenu,e.renderGutterMenu),compactMode:$e(s.compactMode,e.compactMode)}}class eLe extends pe{get onDidChangeDropdownVisibility(){return this._onDidChangeDropdownVisibility.event}constructor(e,t,i={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new iie),this.disposables=this._register(new Ze),i.hoverDelegate=i.hoverDelegate??this._register(UB()),this.options=i,this.toggleMenuAction=this._register(new u2(()=>this.toggleMenuActionViewItem?.show(),i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new kd(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(n,r)=>{if(n.id===u2.ID)return this.toggleMenuActionViewItem=new bI(n,n.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Gt.asClassNameArray(i.moreIcon??Ue.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const o=i.actionViewItemProvider(n,r);if(o)return o}if(n instanceof oR){const o=new bI(n,n.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:n.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return o.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(o),this.disposables.add(this._onDidChangeDropdownVisibility.add(o.onDidChangeVisibility)),o}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}set context(e){this.actionBar.context=e,this.toggleMenuActionViewItem?.setActionContext(e);for(const t of this.submenuActionViewItems)t.setActionContext(e)}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(n=>{this.actionBar.push(n,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(n)})})}getKeybindingLabel(e){return this.options.getKeyBinding?.(e)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const WA=class WA extends Zm{constructor(e,t){t=t||y(17,"More Actions..."),super(WA.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};WA.ID="toolbar.toggle.more";let u2=WA;const cQ=At("IActionViewItemService");class tLe{constructor(){this._providers=new Map,this._onDidChange=new ne,this.onDidChange=this._onDidChange.event}dispose(){this._onDidChange.dispose()}lookUp(e,t){return this._providers.get(this._makeKey(e,t))}_makeKey(e,t){return`${e.id}/${t instanceof ws?t.id:t}`}}$t(cQ,tLe,1);var uQ=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},vl=function(s,e){return function(t,i){e(t,i,s)}};let e6=class extends eLe{constructor(e,t,i,n,r,o,a,l){super(e,r,{getKeyBinding:h=>o.lookupKeybinding(h.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof t?.telemetrySource=="string"}),this._options=t,this._menuService=i,this._contextKeyService=n,this._contextMenuService=r,this._keybindingService=o,this._commandService=a,this._sessionDisposables=this._store.add(new Ze);const c=t?.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(h=>l.publicLog2("workbenchActionExecuted",{id:h.action.id,from:c})))}setActions(e,t=[],i){this._sessionDisposables.clear();const n=e.slice(),r=t.slice(),o=[];let a=0;const l=[];let c=!1;if(this._options?.hiddenItemStrategy!==-1)for(let h=0;h<n.length;h++){const d=n[h];!(d instanceof dg)&&!(d instanceof xw)||d.hideActions&&(o.push(d.hideActions.toggle),d.hideActions.toggle.checked&&a++,d.hideActions.isHidden&&(c=!0,n[h]=void 0,this._options?.hiddenItemStrategy!==0&&(l[h]=d)))}if(this._options?.overflowBehavior!==void 0){const h=QY(new Set(this._options.overflowBehavior.exempted),si.map(n,_=>_?.id)),d=this._options.overflowBehavior.maxItems-h.size;let g=0;for(let _=0;_<n.length;_++){const b=n[_];b&&(g++,!h.has(b.id)&&g>=d&&(n[_]=void 0,l[_]=b))}}hV(n),hV(l),super.setActions(n,Mr.join(l,r)),(o.length>0||n.length>0)&&this._sessionDisposables.add(ue(this.getElement(),"contextmenu",h=>{const d=new kl(nt(this.getElement()),h),g=this.getItemAction(d.target);if(!g)return;d.preventDefault(),d.stopPropagation();const _=[];if(g instanceof dg&&g.menuKeybinding)_.push(g.menuKeybinding);else if(!(g instanceof xw||g instanceof u2)){const C=!!this._keybindingService.lookupKeybinding(g.id);_.push(tQ(this._commandService,this._keybindingService,g.id,void 0,C))}if(o.length>0){let C=!1;if(a===1&&this._options?.hiddenItemStrategy===0){C=!0;for(let S=0;S<o.length;S++)if(o[S].checked){o[S]=B1({id:g.id,label:g.label,checked:!0,enabled:!1,run(){}});break}}if(!C&&(g instanceof dg||g instanceof xw)){if(!g.hideActions)return;_.push(g.hideActions.hide)}else _.push(B1({id:"label",label:y(1634,"Hide"),enabled:!1,run(){}}))}const b=Mr.join(_,o);this._options?.resetMenu&&!i&&(i=[this._options.resetMenu]),c&&i&&(b.push(new Mr),b.push(B1({id:"resetThisMenu",label:y(1635,"Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),b.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>d,getActions:()=>b,menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:typeof this._options?.telemetrySource=="string",contextKeyService:this._contextKeyService})}))}};e6=uQ([vl(2,O0),vl(3,ai),vl(4,kg),vl(5,ar),vl(6,Ml),vl(7,Sg)],e6);let WI=class extends e6{get onDidChangeMenuItems(){return this._onDidChangeMenuItems.event}constructor(e,t,i,n,r,o,a,l,c,h,d){super(e,{resetMenu:t,...i,actionViewItemProvider:(b,C)=>{let S=h.lookUp(t,b instanceof xw?b.item.submenu.id:b.id);S||(S=i?.actionViewItemProvider);const E=S?.(b,C,d,nt(e).vscodeWindowId);return E||mX(d,b,C)}},n,r,o,a,l,c),this._onDidChangeMenuItems=this._store.add(new ne);const g=this._store.add(n.createMenu(t,r,{emitEventsForSubmenuChanges:!0,eventDebounceDelay:i?.eventDebounceDelay})),_=()=>{const{primary:b,secondary:C}=Wve(g.getActions(i?.menuOptions),i?.toolbarOptions?.primaryGroup,i?.toolbarOptions?.shouldInlineSubmenu,i?.toolbarOptions?.useSeparatorsInPrimaryActions);e.classList.toggle("has-no-actions",b.length===0&&C.length===0),super.setActions(b,C)};this._store.add(g.onDidChange(()=>{_(),this._onDidChangeMenuItems.fire(this)})),this._store.add(h.onDidChange(b=>{b===t&&_()})),_()}setActions(){throw new at("This toolbar is populated from a menu.")}};WI=uQ([vl(3,O0),vl(4,ai),vl(5,kg),vl(6,ar),vl(7,Ml),vl(8,Sg),vl(9,cQ),vl(10,Zt)],WI);class Zq extends RP{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}getLineLength(e){return this._textModel.getLineLength(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new Ha(e-1,t)}}class hQ extends g0{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class iLe extends pe{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=mn(this,this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=mn(this,this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=Qc("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=Qc("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=wx("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const n=this._domNode.appendChild(Jt("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),r=new ResizeObserver(()=>{Un(o=>{this.domNodeSizeChanged.trigger(o)})});r.observe(this._domNode),this._register(lt(()=>r.disconnect())),this._register(qt(o=>{n.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register(qt(o=>this.render(o)))}dispose(){super.dispose(),Pr(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),n=new Set(this.views.keys()),r=it.ofStartAndLength(0,this._domNode.clientHeight);if(!r.isEmpty)for(const o of i){const a=new dt(o.startLineNumber,o.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);Un(c=>{for(const h of l){if(!h.range.intersect(a))continue;n.delete(h.id);let d=this.views.get(h.id);if(d)d.item.set(h,c);else{const C=document.createElement("div");this._domNode.appendChild(C);const S=xt("item",h),E=this.itemProvider.createView(S,C);d=new nLe(S,E,C),this.views.set(h.id,d)}const g=h.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(h.range.startLineNumber,!0)-t:h.range.startLineNumber>1?this._editor.getBottomForLineNumber(h.range.startLineNumber-1,!1)-t:0,b=(h.range.endLineNumberExclusive===1?Math.max(g,this._editor.getTopForLineNumber(h.range.startLineNumber,!1)-t):Math.max(g,this._editor.getBottomForLineNumber(h.range.endLineNumberExclusive-1,!0)-t))-g;d.domNode.style.top=`${g}px`,d.domNode.style.height=`${b}px`,d.gutterItemView.layout(it.ofStartAndLength(g,b),r)}})}for(const o of n){const a=this.views.get(o);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(o)}}}class nLe{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}var dQ=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},GD=function(s,e){return function(t,i){e(t,i,s)}};const M5=[],sD=35;let t6=class extends pe{constructor(e,t,i,n,r,o,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=n,this._sashLayout=r,this._boundarySashes=o,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(ws.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=mn(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(d=>d.length>0),this._showSash=Je(this,d=>this._options.renderSideBySide.read(d)&&this._hasActions.read(d)),this.width=Je(this,d=>this._hasActions.read(d)?sD:0),this.elements=Jt("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:sD+"px"}},[]),this._currentDiff=Je(this,d=>{const g=this._diffModel.read(d);if(!g)return;const _=g.diff.read(d)?.mappings,b=this._editors.modifiedCursor.read(d);if(b)return _?.find(C=>C.lineRangeMapping.modified.contains(b.lineNumber))}),this._selectedDiffs=Je(this,d=>{const _=this._diffModel.read(d)?.diff.read(d);if(!_)return M5;const b=this._editors.modifiedSelections.read(d);if(b.every(x=>x.isEmpty()))return M5;const C=new gc(b.map(x=>dt.fromRangeInclusive(x))),E=_.mappings.filter(x=>x.lineRangeMapping.innerChanges&&C.intersects(x.lineRangeMapping.modified)).map(x=>({mapping:x,rangeMappings:x.lineRangeMapping.innerChanges.filter(T=>b.some(N=>ie.areIntersecting(T.modifiedRange,N)))}));return E.length===0||E.every(x=>x.rangeMappings.length===0)?M5:E}),this._register(pSe(e,this.elements.root)),this._register(ue(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(fp(this.elements.root,{display:this._hasActions.map(d=>d?"block":"none")})),sd(this,d=>this._showSash.read(d)?new lQ(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,bP(this,_=>this._sashLayout.sashLeft.read(_)-sD,(_,b)=>this._sashLayout.sashLeft.set(_+sD,b)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store);const h=Je(this,d=>{const g=this._diffModel.read(d);if(!g)return[];const _=g.diff.read(d);if(!_)return[];const b=this._selectedDiffs.read(d);if(b.length>0){const S=Il.fromRangeMappings(b.flatMap(E=>E.rangeMappings));return[new Xq(S,!0,ws.DiffEditorSelectionToolbar,void 0,g.model.original.uri,g.model.modified.uri)]}const C=this._currentDiff.read(d);return _.mappings.map(S=>new Xq(S.lineRangeMapping.withInnerChangesFromLineRanges(),S.lineRangeMapping===C?.lineRangeMapping,ws.DiffEditorHunkToolbar,void 0,g.model.original.uri,g.model.modified.uri))});this._register(new iLe(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(d,g)=>h.read(g),createView:(d,g)=>this._instantiationService.createInstance(i6,d,g,this)})),this._register(ue(this.elements.gutter,Re.MOUSE_WHEEL,d=>{this._editors.modified.getOption(117).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new Zq(this._editors.modifiedModel.get()),n=new Zq(this._editors.original.getModel());return new Ex(t.map(a=>a.toTextEdit(i))).apply(n)}layout(e){this.elements.gutter.style.left=e+"px"}};t6=dQ([GD(6,Zt),GD(7,ai),GD(8,O0)],t6);class Xq{constructor(e,t,i,n,r,o){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=n,this.originalUri=r,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let i6=class extends pe{constructor(e,t,i,n){super(),this._item=e,this._elements=Jt("div.gutterItem",{style:{height:"20px",width:"34px"}},[Jt("div.background@background",{},[]),Jt("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,o=>o.showAlways),this._menuId=this._item.map(this,o=>o.menuId),this._isSmall=xt(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const r=this._register(n.createInstance(Gx,"element",{instantHover:!0},{position:{hoverPosition:1}}));this._register(XS(t,this._elements.root)),this._register(qt(o=>{const a=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(th((o,a)=>{this._elements.buttons.replaceChildren();const l=a.add(n.createInstance(WI,this._elements.buttons,this._menuId.read(o),{orientation:1,hoverDelegate:r,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:0,actionRunner:a.add(new hQ(()=>{const c=this._item.read(void 0),h=c.mapping;return{mapping:h,originalWithModifiedChanges:i.computeStagedValue(h),originalUri:c.originalUri,modifiedUri:c.modifiedUri}})),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const n=e.length/2-i/2,r=i;let o=e.start+n;const a=it.tryCreate(r,t.endExclusive-r-i),l=it.tryCreate(e.start+r,e.endExclusive-i-r);l&&a&&l.start<l.endExclusive&&(o=a.clip(o),o=l.clip(o)),this._elements.buttons.style.top=`${o-e.start}px`}};i6=dQ([GD(3,Zt)],i6);var sLe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},rLe=function(s,e){return function(t,i){e(t,i,s)}},KD,o0;let n6=(o0=class extends pe{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=n,this._modifiedOutlineSource=sd(this,l=>{const c=this._editors.modifiedModel.read(l),h=KD._breadcrumbsSourceFactory.read(l);return!c||!h?void 0:h(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Un(h=>{for(const d of this._editors.original.getSelections()||[])c?.ensureOriginalLineIsVisible(d.getStartPosition().lineNumber,0,h),c?.ensureOriginalLineIsVisible(d.getEndPosition().lineNumber,0,h)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Un(h=>{for(const d of this._editors.modified.getSelections()||[])c?.ensureModifiedLineIsVisible(d.getStartPosition().lineNumber,0,h),c?.ensureModifiedLineIsVisible(d.getEndPosition().lineNumber,0,h)})}));const r=this._diffModel.map((l,c)=>{const h=l?.unchangedRegions.read(c)??[];return h.length===1&&h[0].modifiedLineNumber===1&&h[0].lineCount===this._editors.modifiedModel.read(c)?.getLineCount()?[]:h});this.viewZones=Je(this,l=>{const c=this._modifiedOutlineSource.read(l);if(!c)return{origViewZones:[],modViewZones:[]};const h=[],d=[],g=this._options.renderSideBySide.read(l),_=this._options.compactMode.read(l),b=r.read(l);for(let C=0;C<b.length;C++){const S=b[C];if(!S.shouldHideControls(l)&&!(_&&(C===0||C===b.length-1)))if(_){{const E=Je(this,T=>S.getHiddenOriginalRange(T).startLineNumber-1),x=new rw(E,12);h.push(x),l.store.add(new Qq(this._editors.original,x,S,!g))}{const E=Je(this,T=>S.getHiddenModifiedRange(T).startLineNumber-1),x=new rw(E,12);d.push(x),l.store.add(new Qq(this._editors.modified,x,S))}}else{{const E=Je(this,T=>S.getHiddenOriginalRange(T).startLineNumber-1),x=new rw(E,24);h.push(x),l.store.add(new Jq(this._editors.original,x,S,S.originalUnchangedRange,!g,c,T=>this._diffModel.get().ensureModifiedLineIsVisible(T,2,void 0),this._options))}{const E=Je(this,T=>S.getHiddenModifiedRange(T).startLineNumber-1),x=new rw(E,24);d.push(x),l.store.add(new Jq(this._editors.modified,x,S,S.modifiedUnchangedRange,!1,c,T=>this._diffModel.get().ensureModifiedLineIsVisible(T,2,void 0),this._options))}}}return{origViewZones:h,modViewZones:d}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new EZ(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(y(121,"Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Gt.asClassName(Ue.fold),zIndex:10001};this._register(FI(this._editors.original,Je(this,l=>{const c=r.read(l),h=c.map(d=>({range:d.originalUnchangedRange.toInclusiveRange(),options:o}));for(const d of c)d.shouldHideControls(l)&&h.push({range:ie.fromPositions(new se(d.originalLineNumber,1)),options:a});return h}))),this._register(FI(this._editors.modified,Je(this,l=>{const c=r.read(l),h=c.map(d=>({range:d.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const d of c)d.shouldHideControls(l)&&h.push({range:dt.ofLength(d.modifiedLineNumber,1).toInclusiveRange(),options:a});return h}))),this._register(qt(l=>{const c=r.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(h=>h.getHiddenOriginalRange(l).toInclusiveRange()).filter(dc)),this._editors.modified.setHiddenAreas(c.map(h=>h.getHiddenModifiedRange(l).toInclusiveRange()).filter(dc))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{if(!l.event.rightButton&&l.target.position&&l.target.element?.className.includes("fold-unchanged")){const c=l.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const d=h.unchangedRegions.get().find(g=>g.modifiedUnchangedRange.contains(c));if(!d)return;d.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{if(!l.event.rightButton&&l.target.position&&l.target.element?.className.includes("fold-unchanged")){const c=l.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const d=h.unchangedRegions.get().find(g=>g.originalUnchangedRange.contains(c));if(!d)return;d.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},KD=o0,o0._breadcrumbsSourceFactory=xt(KD,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),o0);n6=KD=sLe([rLe(3,Zt)],n6);class Qq extends mF{constructor(e,t,i,n=!1){const r=Jt("div.diff-hidden-lines-widget");super(e,t,r.root),this._unchangedRegion=i,this._hide=n,this._nodes=Jt("div.diff-hidden-lines-compact",[Jt("div.line-left",[]),Jt("div.text@text",[]),Jt("div.line-right",[])]),r.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(qt(o=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(o).length,l=y(122,"{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class Jq extends mF{constructor(e,t,i,n,r,o,a,l){const c=Jt("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=n,this._hide=r,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=Jt("div.diff-hidden-lines",[Jt("div.top@top",{title:y(123,"Click or drag to show more above")}),Jt("div.center@content",{style:{display:"flex"}},[Jt("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ot("a",{title:y(124,"Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...$1("$(unfold)"))]),Jt("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Jt("div.bottom@bottom",{title:y(125,"Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?Pr(this._nodes.first):this._register(fp(this._nodes.first,{width:R1(this._editor).layoutInfoContentLeft})),this._register(qt(d=>{const g=this._unchangedRegion.visibleLineCountTop.read(d)+this._unchangedRegion.visibleLineCountBottom.read(d)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!g),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(d)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(d)>0),this._nodes.top.classList.toggle("canMoveBottom",!g);const _=this._unchangedRegion.isDragged.read(d),b=this._editor.getDomNode();b&&(b.classList.toggle("draggingUnchangedRegion",!!_),_==="top"?(b.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(d)>0),b.classList.toggle("canMoveBottom",!g)):_==="bottom"?(b.classList.toggle("canMoveTop",!g),b.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(d)>0)):(b.classList.toggle("canMoveTop",!1),b.classList.toggle("canMoveBottom",!1)))}));const h=this._editor;this._register(ue(this._nodes.top,"mousedown",d=>{if(d.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),d.preventDefault();const g=d.clientY;let _=!1;const b=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const C=nt(this._nodes.top),S=ue(C,"mousemove",x=>{const N=x.clientY-g;_=_||Math.abs(N)>2;const A=Math.round(N/h.getOption(75)),P=Math.max(0,Math.min(b+A,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(P,void 0)}),E=ue(C,"mouseup",x=>{_||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),S.dispose(),E.dispose()})})),this._register(ue(this._nodes.bottom,"mousedown",d=>{if(d.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),d.preventDefault();const g=d.clientY;let _=!1;const b=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const C=nt(this._nodes.bottom),S=ue(C,"mousemove",x=>{const N=x.clientY-g;_=_||Math.abs(N)>2;const A=Math.round(N/h.getOption(75)),P=Math.max(0,Math.min(b-A,this._unchangedRegion.getMaxVisibleLineCountBottom())),O=this._unchangedRegionRange.endLineNumberExclusive>h.getModel().getLineCount()?h.getContentHeight():h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(P,void 0);const V=this._unchangedRegionRange.endLineNumberExclusive>h.getModel().getLineCount()?h.getContentHeight():h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);h.setScrollTop(h.getScrollTop()+(V-O))}),E=ue(C,"mouseup",x=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!_){const T=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const N=h.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);h.setScrollTop(h.getScrollTop()+(N-T))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),S.dispose(),E.dispose()})})),this._register(qt(d=>{const g=[];if(!this._hide){const _=i.getHiddenModifiedRange(d).length,b=y(126,"{0} hidden lines",_),C=ot("span",{title:y(127,"Double click to unfold")},b);C.addEventListener("dblclick",x=>{x.button===0&&(x.preventDefault(),this._unchangedRegion.showAll(void 0))}),g.push(C);const S=this._unchangedRegion.getHiddenModifiedRange(d),E=this._modifiedOutlineSource.getBreadcrumbItems(S,d);if(E.length>0){g.push(ot("span",void 0,"  |  "));for(let x=0;x<E.length;x++){const T=E[x],N=mO.toIcon(T.kind),A=Jt("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[dI(N)," ",T.name,...x===E.length-1?[]:[dI(Ue.chevronRight)]]).root;g.push(A),A.onclick=()=>{this._revealModifiedHiddenLine(T.startLineNumber)}}}}Pr(this._nodes.others,...g)}))}}const O5=[];class oLe extends pe{constructor(e,t,i,n){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=n,this._selectedDiffs=Je(this,r=>{const a=this._diffModel.read(r)?.diff.read(r);if(!a)return O5;const l=this._editors.modifiedSelections.read(r);if(l.every(g=>g.isEmpty()))return O5;const c=new gc(l.map(g=>dt.fromRangeInclusive(g))),d=a.mappings.filter(g=>g.lineRangeMapping.innerChanges&&c.intersects(g.lineRangeMapping.modified)).map(g=>({mapping:g,rangeMappings:g.lineRangeMapping.innerChanges.filter(_=>l.some(b=>ie.areIntersecting(_.modifiedRange,b)))}));return d.length===0||d.every(g=>g.rangeMappings.length===0)?O5:d}),this._register(th((r,o)=>{if(!this._options.shouldRenderOldRevertArrows.read(r))return;const a=this._diffModel.read(r),l=a?.diff.read(r);if(!a||!l||a.movedTextToCompare.read(r))return;const c=[],h=this._selectedDiffs.read(r),d=new Set(h.map(g=>g.mapping));if(h.length>0){const g=this._editors.modifiedSelections.read(r),_=o.add(new zI(g[g.length-1].positionLineNumber,this._widget,h.flatMap(b=>b.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(_),c.push(_)}for(const g of l.mappings)if(!d.has(g)&&!g.lineRangeMapping.modified.isEmpty&&g.lineRangeMapping.innerChanges){const _=o.add(new zI(g.lineRangeMapping.modified.startLineNumber,this._widget,g.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(_),c.push(_)}o.add(lt(()=>{for(const g of c)this._editors.modified.removeGlyphMarginWidget(g)}))}))}}const zA=class zA extends pe{getId(){return this._id}constructor(e,t,i,n){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=n,this._id=`revertButton${zA.counter++}`,this._domNode=Jt("div.revertButton",{title:this._revertSelection?y(132,"Revert Selected Changes"):y(133,"Revert Change")},[dI(Ue.arrowRight)]).root,this._register(ue(this._domNode,Re.MOUSE_DOWN,r=>{r.button!==2&&(r.stopPropagation(),r.preventDefault())})),this._register(ue(this._domNode,Re.MOUSE_UP,r=>{r.stopPropagation(),r.preventDefault()})),this._register(ue(this._domNode,Re.CLICK,r=>{this._diffs instanceof eo?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),r.stopPropagation(),r.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:lp.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};zA.counter=0;let zI=zA;var aLe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},BS=function(s,e){return function(t,i){e(t,i,s)}};let UI=class extends Q8{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,n,r,o,a,l){super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=r,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=Jt("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Jt("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Jt("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Jt("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(pG(this,void 0)),this._diffModel=Je(this,N=>this._diffModelSrc.read(N)?.object),this.onDidChangeModel=Ie.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new IC([ai,this._contextKeyService]))),this._boundarySashes=xt(this,void 0),this._accessibleDiffViewerShouldBeVisible=xt(this,!1),this._accessibleDiffViewerVisible=Je(this,N=>this._options.onlyShowAccessibleDiffViewer.read(N)?!0:this._accessibleDiffViewerShouldBeVisible.read(N)),this._movedBlocksLinesPart=xt(this,void 0),this._layoutInfo=Je(this,N=>{const A=this._rootSizeObserver.width.read(N),P=this._rootSizeObserver.height.read(N);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=P+"px";const O=this._sash.read(N),V=this._gutter.read(N),U=V?.width.read(N)??0,Y=this._overviewRulerPart.read(N)?.width??0;let B,F,W,ee,X;if(!!O){const te=O.sashLeft.read(N),ce=this._movedBlocksLinesPart.read(N)?.width.read(N)??0;B=0,F=te-U-ce,X=te-U,W=te,ee=A-W-Y}else{X=0;const te=this._options.inlineViewHideOriginalLineNumbers.read(N);B=U,te?F=0:F=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(N)),W=U+F,ee=A-W-Y}return this.elements.original.style.left=B+"px",this.elements.original.style.width=F+"px",this._editors.original.layout({width:F,height:P},!0),V?.layout(X),this.elements.modified.style.left=W+"px",this.elements.modified.style.width=ee+"px",this._editors.modified.layout({width:ee,height:P},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((N,A)=>N?.diff.read(A)),this.onDidUpdateDiff=Ie.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(lt(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new nQ(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(J8,t),this._register(qt(N=>{this._options.setWidth(this._rootSizeObserver.width.read(N))})),this._contextKeyService.createKey(Ge.isEmbeddedDiffEditor.key,!1),this._register(Af(Ge.isEmbeddedDiffEditor,this._contextKeyService,N=>this._options.isInEmbeddedEditor.read(N))),this._register(Af(Ge.comparingMovedCode,this._contextKeyService,N=>!!this._diffModel.read(N)?.movedTextToCompare.read(N))),this._register(Af(Ge.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,N=>this._options.couldShowInlineViewBecauseOfSize.read(N))),this._register(Af(Ge.diffEditorInlineMode,this._contextKeyService,N=>!this._options.renderSideBySide.read(N))),this._register(Af(Ge.hasChanges,this._contextKeyService,N=>(this._diffModel.read(N)?.diff.read(N)?.mappings.length??0)>0)),this._editors=this._register(this._instantiationService.createInstance(X8,this.elements.original,this.elements.modified,this._options,i,(N,A,P,O)=>this._createInnerEditor(N,A,P,O))),this._register(Af(Ge.diffEditorOriginalWritable,this._contextKeyService,N=>this._options.originalEditable.read(N))),this._register(Af(Ge.diffEditorModifiedWritable,this._contextKeyService,N=>!this._options.readOnly.read(N))),this._register(Af(Ge.diffEditorOriginalUri,this._contextKeyService,N=>this._diffModel.read(N)?.model.original.uri.toString()??"")),this._register(Af(Ge.diffEditorModifiedUri,this._contextKeyService,N=>this._diffModel.read(N)?.model.modified.uri.toString()??"")),this._overviewRulerPart=sd(this,N=>this._options.renderOverviewRuler.read(N)?this._instantiationService.createInstance(Pf(c2),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(A=>A.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((N,A)=>N-(this._overviewRulerPart.read(A)?.width??0))};this._sashLayout=new KSe(this._options,c),this._sash=sd(this,N=>{const A=this._options.renderSideBySide.read(N);return this.elements.root.classList.toggle("side-by-side",A),A?new lQ(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const h=sd(this,N=>this._instantiationService.createInstance(Pf(n6),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);sd(this,N=>this._instantiationService.createInstance(Pf(qSe),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const d=new Set,g=new Set;let _=!1;const b=sd(this,N=>this._instantiationService.createInstance(Pf(Y8),nt(this._domElement),this._editors,this._diffModel,this._options,this,()=>_||h.read(void 0).isUpdatingHiddenAreas,d,g)).recomputeInitiallyAndOnChange(this._store),C=Je(this,N=>{const A=b.read(N).viewZones.read(N).orig,P=h.read(N).viewZones.read(N).origViewZones;return A.concat(P)}),S=Je(this,N=>{const A=b.read(N).viewZones.read(N).mod,P=h.read(N).viewZones.read(N).modViewZones;return A.concat(P)});this._register(VI(this._editors.original,C,N=>{_=N},d));let E;this._register(VI(this._editors.modified,S,N=>{_=N,_?E=BI.capture(this._editors.modified):(E?.restore(this._editors.modified),E=void 0)},g)),this._accessibleDiffViewer=sd(this,N=>this._instantiationService.createInstance(Pf(A1),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(A,P)=>this._accessibleDiffViewerShouldBeVisible.set(A,P),this._options.onlyShowAccessibleDiffViewer.map(A=>!A),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((A,P)=>A?.diff.read(P)?.mappings.map(O=>O.lineRangeMapping)),new NSe(this._editors))).recomputeInitiallyAndOnChange(this._store);const x=this._accessibleDiffViewerVisible.map(N=>N?"hidden":"visible");this._register(fp(this.elements.modified,{visibility:x})),this._register(fp(this.elements.original,{visibility:x})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=sd(this,N=>this._options.shouldRenderGutterMenu.read(N)?this._instantiationService.createInstance(Pf(t6),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(tR(this._layoutInfo)),sd(this,N=>new(Pf($w))(this.elements.root,this._diffModel,this._layoutInfo.map(A=>A.originalEditor),this._layoutInfo.map(A=>A.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,N=>{this._movedBlocksLinesPart.set(N,void 0)}),this._register(Ie.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,N=>this._handleCursorPositionChange(N,!0))),this._register(Ie.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,N=>this._handleCursorPositionChange(N,!1)));const T=this._diffModel.map(this,(N,A)=>{if(N)return N.diff.read(A)===void 0&&!N.isDiffUpToDate.read(A)});this._register(th((N,A)=>{if(T.read(N)===!0){const P=this._editorProgressService.show(!0,1e3);A.add(lt(()=>P.done()))}})),this._register(th((N,A)=>{A.add(new(Pf(oLe))(this._editors,this._diffModel,this._options,this))})),this._register(th((N,A)=>{const P=this._diffModel.read(N);if(P)for(const O of[P.model.original,P.model.modified])A.add(O.onWillDispose(V=>{mi(new at("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(qt(N=>{this._options.setModel(this._diffModel.read(N))}))}_createInnerEditor(e,t,i,n){return e.createInstance(rI,t,i,n)}_createDiffEditorContributions(){const e=kw.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){mi(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return BP.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:this._diffModel.get()?.serializeState()}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._editors.original.restoreViewState(t.original),this._editors.modified.restoreViewState(t.modified),t.modelState&&this._diffModel.get()?.restoreSerializedState(t.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(K8,e,this._options)}getModel(){return this._diffModel.get()?.model??null}setModel(e){const t=e?"model"in e?HI.create(e).createNewRef(this):HI.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==e?.object&&mP(t,n=>{const r=e?.object;mn.batchEventsGlobally(n,()=>{this._editors.original.setModel(r?r.model.original:null),this._editors.modified.setModel(r?r.model.modified:null)});const o=this._diffModelSrc.get()?.createNewRef(this);this._diffModelSrc.set(e?.createNewRef(this),n),setTimeout(()=>{o?.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){const e=this._diffModel.get()?.diff.get();return e?lLe(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(n=>({range:n.modifiedRange,text:t.model.original.getValueInRange(n.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}revertFocusedRangeMappings(){const e=this._diffModel.get();if(!e||!e.isDiffUpToDate.get())return;const t=this._diffModel.get()?.diff.get()?.mappings;if(!t||t.length===0)return;const i=this._editors.modified;if(!i.hasTextFocus())return;const n=i.getPosition().lineNumber,r=i.getSelection(),o=dt.fromRange(r||new ie(n,0,n,0)),a=t.filter(l=>l.lineRangeMapping.modified.intersect(o));i.executeEdits("diffEditor",a.map(l=>({range:l.lineRangeMapping.modified.toExclusiveRange(),text:e.model.original.getValueInRange(l.lineRangeMapping.original.toExclusiveRange())})))}_goTo(e){this._editors.modified.setPosition(new se(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){const t=this._diffModel.get()?.diff.get()?.mappings;if(!t||t.length===0)return;const i=this._editors.modified.getPosition().lineNumber;let n;e==="next"?this._editors.modified.getModel().getLineCount()===i?n=t[0]:n=t.find(o=>o.lineRangeMapping.modified.startLineNumber>i)??t[0]:n=CN(t,r=>r.lineRangeMapping.modified.startLineNumber<i)??t[t.length-1],this._goTo(n),n.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(md.diffLineDeleted,{source:"diffEditor.goToDiff"}):n.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(md.diffLineInserted,{source:"diffEditor.goToDiff"}):n&&this._accessibilitySignalService.playSignal(md.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{const t=e.diff.get()?.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let n;const r=t.getSelection();if(r){const o=this._diffModel.get()?.diff.get()?.mappings.map(a=>e?a.lineRangeMapping.flip():a.lineRangeMapping);if(o){const a=Oq(r.getStartPosition(),o),l=Oq(r.getEndPosition(),o);n=ie.plusRange(a,l)}}return{destination:i,destinationSelection:n}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){const e=this._diffModel.get()?.unchangedRegions.get();e&&Un(t=>{for(const i of e)i.collapseAll(t)})}showAllUnchangedRegions(){const e=this._diffModel.get()?.unchangedRegions.get();e&&Un(t=>{for(const i of e)i.showAll(t)})}_handleCursorPositionChange(e,t){if(e?.reason===3){const i=this._diffModel.get()?.diff.get()?.mappings.find(n=>t?n.lineRangeMapping.modified.contains(e.position.lineNumber):n.lineRangeMapping.original.contains(e.position.lineNumber));i?.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(md.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):i?.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(md.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):i&&this._accessibilitySignalService.playSignal(md.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};UI=aLe([BS(3,ai),BS(4,Zt),BS(5,Es),BS(6,GR),BS(7,WB)],UI);function lLe(s){return s.mappings.map(e=>{const t=e.lineRangeMapping;let i,n,r,o,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,n=0,a=void 0):(i=t.original.startLineNumber,n=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(r=t.modified.startLineNumber-1,o=0,a=void 0):(r=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:n,modifiedStartLineNumber:r,modifiedEndLineNumber:o,charChanges:a?.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var CF=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},Ui=function(s,e){return function(t,i){e(t,i,s)}};let cLe=0,e$=!1;function uLe(s){if(!s){if(e$)return;e$=!0}Gae(s||Ri.document.body)}let qI=class extends rI{constructor(e,t,i,n,r,o,a,l,c,h,d,g,_){const b={...t};b.ariaLabel=b.ariaLabel||A9.editorViewAccessibleLabel,super(e,b,{},i,n,r,o,c,h,d,g,_),l instanceof bC?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,uLe(b.ariaContainerElement),Gbe((C,S)=>i.createInstance(Gx,C,{instantHover:S},{})),Kbe(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const n="DYNAMIC_"+ ++cLe,r=Kt.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(n,e,t,r),n}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),pe.None;const t=e.id,i=e.label,n=Kt.and(Kt.equals("editorId",this.getId()),Kt.deserialize(e.precondition)),r=e.keybindings,o=Kt.and(n,Kt.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(_,...b)=>Promise.resolve(e.run(this,...b)),h=new Ze,d=this.getId()+":"+t;if(h.add(ra.registerCommand(d,c)),a){const _={command:{id:d,title:i},when:n,group:a,order:l};h.add(nC.appendMenuItem(ws.EditorContext,_))}if(Array.isArray(r))for(const _ of r)h.add(this._standaloneKeybindingService.addDynamicKeybinding(d,_,c,o));const g=new IY(d,i,i,void 0,n,(..._)=>Promise.resolve(e.run(this,..._)),this._contextKeyService);return this._actions.set(t,g),h.add(lt(()=>{this._actions.delete(t)})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof oI)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};qI=CF([Ui(2,Zt),Ui(3,Es),Ui(4,Ml),Ui(5,ai),Ui(6,H2),Ui(7,ar),Ui(8,za),Ui(9,cu),Ui(10,Ol),Ui(11,zd),Ui(12,Zi)],qI);let s6=class extends qI{constructor(e,t,i,n,r,o,a,l,c,h,d,g,_,b,C,S){const E={...t};PI(d,E,!1);const x=c.registerEditorContainer(e);typeof E.theme=="string"&&c.setTheme(E.theme),typeof E.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!E.autoDetectHighContrast);const T=E.model;delete E.model,super(e,E,i,n,r,o,a,l,c,h,g,C,S),this._configurationService=d,this._standaloneThemeService=c,this._register(x);let N;if(typeof T>"u"){const A=b.getLanguageIdByMimeType(E.language)||E.language||ru;N=fQ(_,b,E.value||"",A,void 0),this._ownsModel=!0}else N=T,this._ownsModel=!1;if(this._attachModel(N),N){const A={oldModelUrl:null,newModelUrl:N.uri};this._onDidChangeModel.fire(A)}}dispose(){super.dispose()}updateOptions(e){PI(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};s6=CF([Ui(2,Zt),Ui(3,Es),Ui(4,Ml),Ui(5,ai),Ui(6,H2),Ui(7,ar),Ui(8,hu),Ui(9,cu),Ui(10,cn),Ui(11,Ol),Ui(12,So),Ui(13,$s),Ui(14,zd),Ui(15,Zi)],s6);let r6=class extends UI{constructor(e,t,i,n,r,o,a,l,c,h,d,g){const _={...t};PI(l,_,!0);const b=o.registerEditorContainer(e);typeof _.theme=="string"&&o.setTheme(_.theme),typeof _.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!_.autoDetectHighContrast),super(e,_,{},n,i,r,g,h),this._configurationService=l,this._standaloneThemeService=o,this._register(b)}dispose(){super.dispose()}updateOptions(e){PI(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(qI,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};r6=CF([Ui(2,Zt),Ui(3,ai),Ui(4,Es),Ui(5,hu),Ui(6,cu),Ui(7,cn),Ui(8,kg),Ui(9,WB),Ui(10,fF),Ui(11,GR)],r6);function fQ(s,e,t,i,n){if(t=t||"",!i){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),t$(s,t,e.createByFilepathOrFirstLine(n||null,o),n)}return t$(s,t,e.createById(i),n)}function t$(s,e,t,i){return s.createModel(e,t,i)}Q("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},y(139,"The background color of the diff editor's header"));Q("multiDiffEditor.background",ou,y(140,"The background color of the multi file diff editor"));Q("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},y(141,"The border color of the multi file diff editor"));var hLe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},i$=function(s,e){return function(t,i){e(t,i,s)}};class dLe{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let o6=class extends pe{constructor(e,t,i,n,r){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=n,this._viewModel=xt(this,void 0),this._collapsed=Je(this,l=>this._viewModel.read(l)?.collapsed.read(l)),this._editorContentHeight=xt(this,500),this.contentHeight=Je(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=xt(this,0),this._modifiedWidth=xt(this,0),this._originalContentWidth=xt(this,0),this._originalWidth=xt(this,0),this.maxScroll=Je(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),h=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>h?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:h,width:this._originalWidth.read(l)}}),this._elements=Jt("div.multiDiffEntry",[Jt("div.header@header",[Jt("div.header-content",[Jt("div.collapse-button@collapseButton"),Jt("div.file-path",[Jt("div.title.modified.show-file-icons@primaryPath",[]),Jt("div.status.deleted@status",["R"]),Jt("div.title.original.show-file-icons@secondaryPath",[])]),Jt("div.actions@actions")])]),Jt("div.editorParent",[Jt("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(UI,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=R1(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=R1(this.editor.getOriginalEditor()).isFocused,this.isFocused=Je(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new Ze),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const o=new i8(this._elements.collapseButton,{});this._register(qt(l=>{o.element.className="",o.icon=this._collapsed.read(l)?Ue.chevronRight:Ue.chevronDown})),this._register(o.onDidClick(()=>{this._viewModel.get()?.collapsed.set(!this._collapsed.get(),void 0)})),this._register(qt(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{zS(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(qt(l=>{const c=this._viewModel.read(l)?.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(r.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new IC([ai,this._contextKeyService])));this._register(a.createInstance(WI,this._elements.actions,ws.MultiDiffEditorFileToolbar,{actionRunner:this._register(new hQ(()=>this._viewModel.get()?.modifiedUri)),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>mX(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(n){return{...n,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){zS(n=>{this._viewModel.set(void 0,n),this.editor.setDiffModel(null,n),this._dataStore.clear()});return}const i=e.viewModel.documentDiffItem;if(zS(n=>{this._resourceLabel?.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let r=!1,o=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",r=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",o=!0),this._elements.status.classList.toggle("renamed",r),this._elements.status.classList.toggle("deleted",o),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,this._resourceLabel2?.setUri(r?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,n),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,n),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,n=>{n||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[n,r]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(n,r)}render(e,t,i,n){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const r=e.length-this._headerHeight,o=Math.max(0,Math.min(n.start-e.start,r));this._elements.header.style.transform=`translateY(${o}px)`,zS(a=>{this.editor.layout({width:t-16-2,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||i>0),this._elements.header.classList.toggle("collapsed",o===r)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};o6=hLe([i$(3,Zt),i$(4,ai)],o6);class fLe{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find(n=>this._itemData.get(n).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var gLe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},n$=function(s,e){return function(t,i){e(t,i,s)}};let a6=class extends pe{constructor(e,t,i,n,r,o){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=n,this._parentContextKeyService=r,this._parentInstantiationService=o,this._scrollableElements=Jt("div.scrollContent",[Jt("div@content",{style:{overflow:"hidden"}}),Jt("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new DC({forceIntegerValues:!1,scheduleAtNextAnimationFrame:c=>na(nt(this._element),c),smoothScrollDuration:100})),this._scrollableElement=this._register(new TR(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=Jt("div.monaco-component.multiDiffEditor",{},[Jt("div",{},[this._scrollableElement.getDomNode()]),Jt("div.placeholder@placeholder",{},[Jt("div")])]),this._sizeObserver=this._register(new nQ(this._element,void 0)),this._objectPool=this._register(new fLe(c=>{const h=this._instantiationService.createInstance(o6,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return h.setData(c),h})),this.scrollTop=mn(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=mn(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=Je(this,c=>{const h=this._viewModel.read(c);if(!h)return{items:[],getItem:b=>{throw new at}};const d=h.items.read(c),g=new Map;return{items:d.map(b=>{const C=c.store.add(new mLe(b,this._objectPool,this.scrollLeft,E=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+E})})),S=this._lastDocStates?.[C.getKey()];return S&&Un(E=>{C.setViewState(S,E)}),g.set(b,C),C}),getItem:b=>g.get(b)}}),this._viewItems=this._viewItemsInfo.map(this,c=>c.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(c,h)=>c.reduce((d,g)=>d+g.contentHeight.read(h)+this._spaceBetweenPx,0)),this.activeControl=Je(this,c=>{const h=this._viewModel.read(c)?.activeDiffItem.read(c);return h?this._viewItemsInfo.read(c).getItem(h).template.read(c)?.editor:void 0}),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new IC([ai,this._contextKeyService]))),this._lastDocStates={},this._register(th((c,h)=>{const d=this._viewModel.read(c);if(d&&d.contextKeys)for(const[g,_]of Object.entries(d.contextKeys)){const b=this._contextKeyService.createKey(g,void 0);b.set(_),h.add(lt(()=>b.reset()))}}));const a=this._parentContextKeyService.createKey(Ge.multiDiffEditorAllCollapsed.key,!1);this._register(qt(c=>{const h=this._viewModel.read(c);if(h){const d=h.items.read(c).every(g=>g.collapsed.read(c));a.set(d)}})),this._register(qt(c=>{const h=this._dimension.read(c);this._sizeObserver.observe(h)}));const l=Je(c=>{if(this._viewItems.read(c).length>0)return;const d=this._viewModel.read(c);return!d||d.isLoading.read(c)?y(142,"Loading..."):y(143,"No Changed Files")});this._register(qt(c=>{const h=l.read(c);this._elements.placeholder.innerText=h??"",this._elements.placeholder.classList.toggle("visible",!!h)})),this._scrollableElements.content.style.position="relative",this._register(qt(c=>{const h=this._sizeObserver.height.read(c);this._scrollableElements.root.style.height=`${h}px`;const d=this._totalHeight.read(c);this._scrollableElements.content.style.height=`${d}px`;const g=this._sizeObserver.width.read(c);let _=g;const b=this._viewItems.read(c),C=iK(b,Dl(S=>S.maxScroll.read(c).maxScroll,ug));if(C){const S=C.maxScroll.read(c);_=g+S.maxScroll}this._scrollableElement.setScrollDimensions({width:g,height:h,scrollHeight:d,scrollWidth:_})})),e.replaceChildren(this._elements.root),this._register(lt(()=>{e.replaceChildren()})),this._register(this._register(qt(c=>{zS(h=>{this.render(c)})})))}render(e){const t=this.scrollTop.read(e);let i=0,n=0,r=0;const o=this._sizeObserver.height.read(e),a=it.ofStartAndLength(t,o),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const h=c.contentHeight.read(e),d=Math.min(h,o),g=it.ofStartAndLength(n,d),_=it.ofStartAndLength(r,h);if(_.isBefore(a))i-=h-d,c.hide();else if(_.isAfter(a))c.hide();else{const b=Math.max(0,Math.min(a.start-_.start,h-d));i-=b;const C=it.ofStartAndLength(t+i,o);c.render(g,b,l,C)}n+=d+this._spaceBetweenPx,r+=h+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};a6=gLe([n$(4,ai),n$(5,Zt)],a6);class mLe extends pe{constructor(e,t,i,n){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=n,this._templateRef=this._register(pG(this,void 0)),this.contentHeight=Je(this,r=>this._templateRef.read(r)?.object.contentHeight?.read(r)??this.viewModel.lastTemplateData.read(r).contentHeight),this.maxScroll=Je(this,r=>this._templateRef.read(r)?.object.maxScroll.read(r)??{maxScroll:0,scrollWidth:0}),this.template=Je(this,r=>this._templateRef.read(r)?.object),this._isHidden=xt(this,!1),this._isFocused=Je(this,r=>this.template.read(r)?.isFocused.read(r)??!1),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(qt(r=>{const o=this._scrollLeft.read(r);this._templateRef.read(r)?.object.setScrollLeft(o)})),this._register(qt(r=>{const o=this._templateRef.read(r);!o||!this._isHidden.read(r)||o.object.isFocused.read(r)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){return`VirtualViewItem(${this.viewModel.documentDiffItem.modified?.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),n=e.selections?.map(Yt.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:n},t);const r=this._templateRef.get();r&&n&&r.object.editor.setSelections(n)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&Un(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,n){this._isHidden.set(!1,void 0);let r=this._templateRef.get();if(!r){r=this._objectPool.getUnusedObj(new dLe(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(r,void 0);const o=this.viewModel.lastTemplateData.get().selections;o&&r.object.editor.setSelections(o)}r.object.render(e,i,t,n)}}var pLe=function(s,e,t,i){var n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var a=s.length-1;a>=0;a--)(o=s[a])&&(r=(n<3?o(r):n>3?o(e,t,r):o(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r},_Le=function(s,e){return function(t,i){e(t,i,s)}};let l6=class extends pe{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=xt(this,void 0),this._viewModel=xt(this,void 0),this._widgetImpl=Je(this,n=>n.store.add(this._instantiationService.createInstance(Pf(a6),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory))),this._register(tR(this._widgetImpl))}};l6=pLe([_Le(2,Zt)],l6);function bLe(s,e,t){return rt.initialize(t||{}).createInstance(s6,s,e)}function vLe(s){return rt.get(Es).onCodeEditorAdd(t=>{s(t)})}function wLe(s){return rt.get(Es).onDiffEditorAdd(t=>{s(t)})}function CLe(){return rt.get(Es).listCodeEditors()}function yLe(){return rt.get(Es).listDiffEditors()}function SLe(s,e,t){return rt.initialize(t||{}).createInstance(r6,s,e)}function LLe(s,e){const t=rt.initialize(e||{});return new l6(s,{},t)}function xLe(s){if(typeof s.id!="string"||typeof s.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return ra.registerCommand(s.id,s.run)}function kLe(s){if(typeof s.id!="string"||typeof s.label!="string"||typeof s.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=Kt.deserialize(s.precondition),t=(n,...r)=>m0.runEditorCommand(n,r,e,(o,a,l)=>Promise.resolve(s.run(a,...l))),i=new Ze;if(i.add(ra.registerCommand(s.id,t)),s.contextMenuGroupId){const n={command:{id:s.id,title:s.label},when:e,group:s.contextMenuGroupId,order:s.contextMenuOrder||0};i.add(nC.appendMenuItem(ws.EditorContext,n))}if(Array.isArray(s.keybindings)){const n=rt.get(ar);if(!(n instanceof bC))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const r=Kt.and(e,Kt.deserialize(s.keybindingContext));i.add(n.addDynamicKeybindings(s.keybindings.map(o=>({keybinding:o,command:s.id,when:r}))))}}return i}function ELe(s){return gQ([s])}function gQ(s){const e=rt.get(ar);return e instanceof bC?e.addDynamicKeybindings(s.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:Kt.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),pe.None)}function TLe(s,e,t){const i=rt.get($s),n=i.getLanguageIdByMimeType(e)||e;return fQ(rt.get(So),i,s,n,t)}function DLe(s,e){const t=rt.get($s),i=t.getLanguageIdByMimeType(e)||e||ru;s.setLanguage(t.createById(i))}function NLe(s,e,t){s&&rt.get(U0).changeOne(e,s.uri,t)}function ILe(s){rt.get(U0).changeAll(s,[])}function ALe(s){return rt.get(U0).read(s)}function RLe(s){return rt.get(U0).onMarkerChanged(s)}function MLe(s){return rt.get(So).getModel(s)}function OLe(){return rt.get(So).getModels()}function PLe(s){return rt.get(So).onModelAdded(s)}function BLe(s){return rt.get(So).onModelRemoved(s)}function FLe(s){return rt.get(So).onModelLanguageChanged(t=>{s({model:t.model,oldLanguage:t.oldLanguageId})})}function VLe(s){return bae(rt.get(So),s)}function HLe(s,e){const t=rt.get($s),i=rt.get(hu);return WP.colorizeElement(i,t,s,e).then(()=>{i.registerEditorContainer(s)})}function WLe(s,e,t){const i=rt.get($s);return rt.get(hu).registerEditorContainer(Ri.document.body),WP.colorize(i,s,e,t)}function zLe(s,e,t=4){return rt.get(hu).registerEditorContainer(Ri.document.body),WP.colorizeModelLine(s,e,t)}function ULe(s){const e=es.get(s);return e||{getInitialState:()=>Dx,tokenize:(t,i,n)=>lK(s,n)}}function qLe(s,e){es.getOrCreate(e);const t=ULe(e),i=LC(s),n=[];let r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenize(l,!0,r);n[o]=c.tokens,r=c.endState}return n}function $Le(s,e){rt.get(hu).defineTheme(s,e)}function jLe(s){rt.get(hu).setTheme(s)}function GLe(){A3.clearAllFontInfos()}function KLe(s,e){return ra.registerCommand({id:s,handler:e})}function YLe(s){return rt.get(z2).registerOpener({async open(t){return typeof t=="string"&&(t=Ot.parse(t)),s.open(t)}})}function ZLe(s){return rt.get(Es).registerCodeEditorOpenHandler(async(t,i,n)=>{if(!i)return null;const r=t.options?.selection;let o;return r&&typeof r.endLineNumber=="number"&&typeof r.endColumn=="number"?o=r:r&&(o={lineNumber:r.startLineNumber,column:r.startColumn}),await s.openCodeEditor(i,t.resource,o)?i:null})}function XLe(){return{create:bLe,getEditors:CLe,getDiffEditors:yLe,onDidCreateEditor:vLe,onDidCreateDiffEditor:wLe,createDiffEditor:SLe,addCommand:xLe,addEditorAction:kLe,addKeybindingRule:ELe,addKeybindingRules:gQ,createModel:TLe,setModelLanguage:DLe,setModelMarkers:NLe,getModelMarkers:ALe,removeAllMarkers:ILe,onDidChangeMarkers:RLe,getModels:OLe,getModel:MLe,onDidCreateModel:PLe,onWillDisposeModel:BLe,onDidChangeModelLanguage:FLe,createWebWorker:VLe,colorizeElement:HLe,colorize:WLe,colorizeModelLine:zLe,tokenize:qLe,defineTheme:$Le,setTheme:jLe,remeasureFonts:GLe,registerCommand:KLe,registerLinkOpener:YLe,registerEditorOpener:ZLe,AccessibilitySupport:_O,ContentWidgetPositionPreference:SO,CursorChangeReason:LO,DefaultEndOfLine:xO,EditorAutoIndentStrategy:EO,EditorOption:TO,EndOfLinePreference:DO,EndOfLineSequence:NO,MinimapPosition:zO,MinimapSectionHeaderStyle:UO,MouseTargetType:qO,OverlayWidgetPositionPreference:GO,OverviewRulerLane:KO,GlyphMarginLane:IO,RenderLineNumbersType:XO,RenderMinimap:QO,ScrollbarVisibility:e3,ScrollType:JO,TextEditorCursorBlinkingStyle:a3,TextEditorCursorStyle:l3,TrackedRangeStickiness:c3,WrappingIndent:u3,InjectedTextCursorStops:MO,PositionAffinity:ZO,ShowLightbulbIconMode:i3,TextDirection:o3,ConfigurationChangedEvent:Fj,BareFontInfo:P1,FontInfo:I3,TextModelResolvedOptions:xD,FindMatch:kx,ApplyUpdateResult:rL,EditorZoom:Im,createMultiFileDiffEditor:LLe,EditorType:BP,EditorOptions:N0}}function QLe(s,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!s(t))return!1;return!0}function rD(s,e){return typeof s=="boolean"?s:e}function s$(s,e){return typeof s=="string"?s:e}function JLe(s){const e={};for(const t of s)e[t]=!0;return e}function r$(s,e=!1){e&&(s=s.map(function(i){return i.toLowerCase()}));const t=JLe(s);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function c6(s,e,t){e=e.replace(/@@/g,"");let i=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(o,a){n=!0;let l="";if(typeof s[a]=="string")l=s[a];else if(s[a]&&s[a]instanceof RegExp)l=s[a].source;else throw s[a]===void 0?Ji(s,"language definition does not contain attribute '"+a+"', used at: "+e):Ji(s,"attribute reference '"+a+"' must be a string, used at: "+e);return t1(l)?"":"(?:"+l+")"}),i++;while(n&&i<5);e=e.replace(/\x01/g,"@");const r=(s.ignoreCase?"i":"")+(s.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(Fae(s,e,c),r)),l)}return new RegExp(e,r)}function exe(s,e,t,i){if(i<0)return s;if(i<e.length)return e[i];if(i>=100){i=i-100;const n=t.split(".");if(n.unshift(t),i<n.length)return n[i]}return null}function txe(s,e,t,i){let n=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(n=parseInt(o[3]),o[2]&&(n=n+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const h=r$(l.split("|"),s.ignoreCase);c=function(d){return a==="~"?h(d):!h(d)}}else if(a==="@"||a==="!@"){const h=s[l];if(!h)throw Ji(s,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!QLe(function(g){return typeof g=="string"},h))throw Ji(s,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const d=r$(h,s.ignoreCase);c=function(g){return a==="@"?d(g):!d(g)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const h=c6(s,"^"+l+"$",!1);c=function(d){return a==="~"?h.test(d):!h.test(d)}}else c=function(h,d,g,_){return c6(s,"^"+Am(s,l,d,g,_)+"$",!1).test(h)};else if(l.indexOf("$")<0){const h=gg(s,l);c=function(d){return a==="=="?d===h:d!==h}}else{const h=gg(s,l);c=function(d,g,_,b,C){const S=Am(s,h,g,_,b);return a==="=="?d===S:d!==S}}return n===-1?{name:t,value:i,test:function(h,d,g,_){return c(h,h,d,g,_)}}:{name:t,value:i,test:function(h,d,g,_){const b=exe(h,d,g,n);return c(b||"",h,d,g,_)}}}function u6(s,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Ji(s,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw Ji(s,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Ji(s,"the next state must be a string value in rule: "+e);{let n=t.next;if(!/^(@pop|@push|@popall)$/.test(n)&&(n[0]==="@"&&(n=n.substr(1)),n.indexOf("$")<0&&!Vae(s,Am(s,n,"",[],""))))throw Ji(s,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=n}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,s.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let n=0,r=t.length;n<r;n++)i[n]=u6(s,e,t[n]);return{group:i}}else if(t.cases){const i=[];let n=!1;for(const o in t.cases)if(t.cases.hasOwnProperty(o)){const a=u6(s,e,t.cases[o]);o==="@default"||o==="@"||o===""?i.push({test:void 0,value:a,name:o}):o==="@eos"?i.push({test:function(l,c,h,d){return d},value:a,name:o}):i.push(txe(s,e,o,a)),n||(n=!rr(a)&&(a.hasEmbeddedEndInCases||["@pop","@popall"].includes(a.nextEmbedded||"")))}const r=s.defaultToken;return{hasEmbeddedEndInCases:n,test:function(o,a,l,c){for(const h of i)if(!h.test||h.test(o,a,l,c))return h.value;return r}}}else throw Ji(s,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class ixe{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw Ji(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=c6(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=u6(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function mQ(s,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:s,includeLF:rD(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:rD(e.ignoreCase,!1),unicode:rD(e.unicode,!1),tokenPostfix:s$(e.tokenPostfix,"."+s),defaultToken:s$(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=e;i.languageId=s,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function n(o,a,l){for(const c of l){let h=c.include;if(h){if(typeof h!="string")throw Ji(t,"an 'include' attribute must be a string at: "+o);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw Ji(t,"include target '"+h+"' is not defined at: "+o);n(o+"."+h,a,e.tokenizer[h])}else{const d=new ixe(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(d.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")d.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const g=c[1];g.next=c[2],d.setAction(i,g)}else throw Ji(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else d.setAction(i,c[1]);else{if(!c.regex)throw Ji(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(d.name=c.name),c.matchOnlyAtStart&&(d.matchOnlyAtLineStart=rD(c.matchOnlyAtLineStart,!1)),d.setRegex(i,c.regex),d.setAction(i,c.action)}a.push(d)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Ji(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,n("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Ji(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const r=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Ji(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:gg(t,a.open),close:gg(t,a.close)});else throw Ji(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function nxe(s){sC.registerLanguage(s)}function sxe(){let s=[];return s=s.concat(sC.getLanguages()),s}function rxe(s){return rt.get($s).languageIdCodec.encodeLanguageId(s)}function oxe(s,e){return rt.withServices(()=>{const i=rt.get($s).onDidRequestRichLanguageFeatures(n=>{n===s&&(i.dispose(),e())});return i})}function axe(s,e){return rt.withServices(()=>{const i=rt.get($s).onDidRequestBasicLanguageFeatures(n=>{n===s&&(i.dispose(),e())});return i})}function lxe(s,e){if(!rt.get($s).isRegisteredLanguageId(s))throw new Error(`Cannot set configuration for unknown language ${s}`);return rt.get(zd).register(s,e,100)}class cxe{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return h2.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const n=this._actual.tokenizeEncoded(e,i);return new YA(n.tokens,n.endState)}}class h2{constructor(e,t,i,n){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=n}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let n=0;for(let r=0,o=e.length;r<o;r++){const a=e[r];let l=a.startIndex;r===0?l=0:l<n&&(l=n),i[r]=new gx(l,a.scopes,t),n=l}return i}static adaptTokenize(e,t,i,n){const r=t.tokenize(i,n),o=h2._toClassicTokens(r.tokens,e);let a;return r.endState.equals(n)?a=n:a=r.endState,new eP(o,a)}tokenize(e,t,i){return h2.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),n=this._standaloneThemeService.getColorTheme().tokenTheme,r=[];let o=0,a=0;for(let c=0,h=t.length;c<h;c++){const d=t[c],g=n.match(i,d.scopes)|1024;if(o>0&&r[o-1]===g)continue;let _=d.startIndex;c===0?_=0:_<a&&(_=a),r[o++]=_,r[o++]=g,a=_}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=r[c];return l}tokenizeEncoded(e,t,i){const n=this._actual.tokenize(e,i),r=this._toBinaryTokens(this._languageService.languageIdCodec,n.tokens);let o;return n.endState.equals(i)?o=i:o=n.endState,new YA(r,o)}}function uxe(s){return typeof s.getInitialState=="function"}function hxe(s){return"tokenizeEncoded"in s}function pQ(s){return s&&typeof s.then=="function"}function dxe(s){const e=rt.get(hu);if(s){const t=[null];for(let i=1,n=s.length;i<n;i++)t[i]=xe.fromHex(s[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function _Q(s,e){return hxe(e)?new cxe(s,e):new h2(s,e,rt.get($s),rt.get(hu))}function yF(s,e){const t=new Iie(async()=>{const i=await Promise.resolve(e.create());return i?uxe(i)?_Q(s,i):new Ax(rt.get($s),rt.get(hu),s,mQ(s,i),rt.get(cn)):null});return es.registerFactory(s,t)}function fxe(s,e){if(!rt.get($s).isRegisteredLanguageId(s))throw new Error(`Cannot set tokens provider for unknown language ${s}`);return pQ(e)?yF(s,{create:()=>e}):es.register(s,_Q(s,e))}function gxe(s,e){const t=i=>new Ax(rt.get($s),rt.get(hu),s,mQ(s,i),rt.get(cn));return pQ(e)?yF(s,{create:()=>e}):es.register(s,t(e))}function mxe(s,e){return rt.get(Zi).referenceProvider.register(s,e)}function pxe(s,e){return rt.get(Zi).renameProvider.register(s,e)}function _xe(s,e){return rt.get(Zi).newSymbolNamesProvider.register(s,e)}function bxe(s,e){return rt.get(Zi).signatureHelpProvider.register(s,e)}function vxe(s,e){return rt.get(Zi).hoverProvider.register(s,{provideHover:async(i,n,r,o)=>{const a=i.getWordAtPosition(n);return Promise.resolve(e.provideHover(i,n,r,o)).then(l=>{if(l)return!l.range&&a&&(l.range=new ie(n.lineNumber,a.startColumn,n.lineNumber,a.endColumn)),l.range||(l.range=new ie(n.lineNumber,n.column,n.lineNumber,n.column)),l})}})}function wxe(s,e){return rt.get(Zi).documentSymbolProvider.register(s,e)}function Cxe(s,e){return rt.get(Zi).documentHighlightProvider.register(s,e)}function yxe(s,e){return rt.get(Zi).linkedEditingRangeProvider.register(s,e)}function Sxe(s,e){return rt.get(Zi).definitionProvider.register(s,e)}function Lxe(s,e){return rt.get(Zi).implementationProvider.register(s,e)}function xxe(s,e){return rt.get(Zi).typeDefinitionProvider.register(s,e)}function kxe(s,e){return rt.get(Zi).codeLensProvider.register(s,e)}function Exe(s,e,t){return rt.get(Zi).codeActionProvider.register(s,{providedCodeActionKinds:t?.providedCodeActionKinds,documentation:t?.documentation,provideCodeActions:(n,r,o,a)=>{const c=rt.get(U0).read({resource:n.uri}).filter(h=>ie.areIntersectingOrTouching(h,r));return e.provideCodeActions(n,r,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function Txe(s,e){return rt.get(Zi).documentFormattingEditProvider.register(s,e)}function Dxe(s,e){return rt.get(Zi).documentRangeFormattingEditProvider.register(s,e)}function Nxe(s,e){return rt.get(Zi).onTypeFormattingEditProvider.register(s,e)}function Ixe(s,e){return rt.get(Zi).linkProvider.register(s,e)}function Axe(s,e){return rt.get(Zi).completionProvider.register(s,e)}function Rxe(s,e){return rt.get(Zi).colorProvider.register(s,e)}function Mxe(s,e){return rt.get(Zi).foldingRangeProvider.register(s,e)}function Oxe(s,e){return rt.get(Zi).declarationProvider.register(s,e)}function Pxe(s,e){return rt.get(Zi).selectionRangeProvider.register(s,e)}function Bxe(s,e){return rt.get(Zi).documentSemanticTokensProvider.register(s,e)}function Fxe(s,e){return rt.get(Zi).documentRangeSemanticTokensProvider.register(s,e)}function Vxe(s,e){return rt.get(Zi).inlineCompletionsProvider.register(s,e)}function Hxe(s,e){return rt.get(Zi).inlayHintsProvider.register(s,e)}function Wxe(){return{register:nxe,getLanguages:sxe,onLanguage:oxe,onLanguageEncountered:axe,getEncodedLanguageId:rxe,setLanguageConfiguration:lxe,setColorMap:dxe,registerTokensProviderFactory:yF,setTokensProvider:fxe,setMonarchTokensProvider:gxe,registerReferenceProvider:mxe,registerRenameProvider:pxe,registerNewSymbolNameProvider:_xe,registerCompletionItemProvider:Axe,registerSignatureHelpProvider:bxe,registerHoverProvider:vxe,registerDocumentSymbolProvider:wxe,registerDocumentHighlightProvider:Cxe,registerLinkedEditingRangeProvider:yxe,registerDefinitionProvider:Sxe,registerImplementationProvider:Lxe,registerTypeDefinitionProvider:xxe,registerCodeLensProvider:kxe,registerCodeActionProvider:Exe,registerDocumentFormattingEditProvider:Txe,registerDocumentRangeFormattingEditProvider:Dxe,registerOnTypeFormattingEditProvider:Nxe,registerLinkProvider:Ixe,registerColorProvider:Rxe,registerFoldingRangeProvider:Mxe,registerDeclarationProvider:Oxe,registerSelectionRangeProvider:Pxe,registerDocumentSemanticTokensProvider:Bxe,registerDocumentRangeSemanticTokensProvider:Fxe,registerInlineCompletionsProvider:Vxe,registerInlayHintsProvider:Hxe,DocumentHighlightKind:kO,CompletionItemKind:wO,CompletionItemTag:CO,CompletionItemInsertTextRule:vO,SymbolKind:s3,SymbolTag:r3,IndentAction:RO,CompletionTriggerKind:yO,SignatureHelpTriggerKind:n3,InlayHintKind:OO,InlineCompletionTriggerKind:FO,CodeActionTriggerType:bO,NewSymbolNameTag:$O,NewSymbolNameTriggerKind:jO,PartialAcceptTriggerKind:YO,HoverVerbosityAction:AO,InlineCompletionEndOfLifeReasonKind:BO,InlineCompletionDisplayLocationKind:PO,FoldingRangeKind:pO,SelectedSuggestionInfo:Nie,EditDeltaInfo:tI}}const bQ=At("IEditorCancelService"),vQ=new et("cancellableOperation",!1,y(934,"Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));$t(bQ,class{constructor(){this._tokens=new WeakMap}add(s,e){let t=this._tokens.get(s);t||(t=s.invokeWithinContext(n=>{const r=vQ.bindTo(n.get(ai)),o=new ea;return{key:r,tokens:o}}),this._tokens.set(s,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(s){const e=this._tokens.get(s);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);Ct(new class extends m0{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:vQ})}runEditorCommand(s,e){s.get(bQ).cancel(e)}});class o${constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class zxe{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(o$.toKey(e))}has(e){return this._set.has(o$.toKey(e))}}function Uxe(s,e,t){const i=[],n=new zxe,r=s.ordered(t);for(const a of r)i.push(a),a.extensionId&&n.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(n.has(a.extensionId))continue;n.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,h){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,h)}})}return i}const rx=class rx{static setFormatterSelector(e){return{dispose:rx._selectors.unshift(e)}}static async select(e,t,i,n){if(e.length===0)return;const r=si.first(rx._selectors);if(r)return await r(e,t,i,n)}};rx._selectors=new ea;let h6=rx;async function qxe(s,e,t,i,n,r){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,n,r)).catch(W6);if(UA(l))return await s.computeMoreMinimalEdits(t.uri,l)}}async function $xe(s,e,t,i,n){const r=Uxe(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of r){const a=await Promise.resolve(o.provideDocumentFormattingEdits(t,i,n)).catch(W6);if(UA(a))return await s.computeMoreMinimalEdits(t.uri,a)}}function jxe(s,e,t,i,n,r,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,n,r,o)).catch(W6).then(l=>s.computeMoreMinimalEdits(t.uri,l))}ra.registerCommand("_executeFormatRangeProvider",async function(s,...e){const[t,i,n]=e;Km(Ot.isUri(t)),Km(ie.isIRange(i));const r=s.get(rR),o=s.get(Z2),a=s.get(Zi),l=await r.createModelReference(t);try{return qxe(o,a,l.object.textEditorModel,ie.lift(i),n,Al.None)}finally{l.dispose()}});ra.registerCommand("_executeFormatDocumentProvider",async function(s,...e){const[t,i]=e;Km(Ot.isUri(t));const n=s.get(rR),r=s.get(Z2),o=s.get(Zi),a=await n.createModelReference(t);try{return $xe(r,o,a.object.textEditorModel,i,Al.None)}finally{a.dispose()}});ra.registerCommand("_executeFormatOnTypeProvider",async function(s,...e){const[t,i,n,r]=e;Km(Ot.isUri(t)),Km(se.isIPosition(i)),Km(typeof n=="string");const o=s.get(rR),a=s.get(Z2),l=s.get(Zi),c=await o.createModelReference(t);try{return jxe(a,l,c.object.textEditorModel,se.lift(i),n,r,Al.None)}finally{c.dispose()}});N0.wrappingIndent.defaultValue=0;N0.glyphMargin.defaultValue=!1;N0.autoIndent.defaultValue=3;N0.overviewRulerLanes.defaultValue=2;h6.setFormatterSelector((s,e,t)=>Promise.resolve(s[0]));const Eo=Jj();Eo.editor=XLe();Eo.languages=Wxe();Eo.CancellationTokenSource;Eo.Emitter;Eo.KeyCode;Eo.KeyMod;Eo.Position;Eo.Range;Eo.Selection;Eo.SelectionDirection;Eo.MarkerSeverity;Eo.MarkerTag;Eo.Uri;Eo.Token;Eo.editor;Eo.languages;const Gxe=globalThis.MonacoEnvironment;(Gxe?.globalAPI||typeof globalThis.define=="function"&&globalThis.define.amd)&&(globalThis.monaco=Eo);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});function Kxe(s){return new Worker("/h2o-editor-frontend/assets/editor.worker-DDBMwjcz.js",{name:s?.name})}function Yxe(s){return new Worker("/h2o-editor-frontend/assets/ts.worker-Bwjs0mTU.js",{name:s?.name})}function Zxe(s){return new Worker("/h2o-editor-frontend/assets/json.worker-BsgQCEGM.js",{name:s?.name})}function Xxe(s){return new Worker("/h2o-editor-frontend/assets/html.worker-D6Y4NJTr.js",{name:s?.name})}function Qxe(s){return new Worker("/h2o-editor-frontend/assets/css.worker-DJg32cOK.js",{name:s?.name})}self.MonacoEnvironment={getWorker:function(s,e){return e==="typescript"||e==="javascript"?new Yxe:e==="json"?new Zxe:e==="html"?new Xxe:e==="css"?new Qxe:new Kxe}};const Jxe="/h2o-editor-frontend/assets/logo1-Yh89x6Xs.svg",Vd=Object.create(null);Vd.open="0";Vd.close="1";Vd.ping="2";Vd.pong="3";Vd.message="4";Vd.upgrade="5";Vd.noop="6";const YD=Object.create(null);Object.keys(Vd).forEach(s=>{YD[Vd[s]]=s});const d6={type:"error",data:"parser error"},wQ=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",CQ=typeof ArrayBuffer=="function",yQ=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,SF=({type:s,data:e},t,i)=>wQ&&e instanceof Blob?t?i(e):a$(e,i):CQ&&(e instanceof ArrayBuffer||yQ(e))?t?i(e):a$(new Blob([e]),i):i(Vd[s]+(e||"")),a$=(s,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(s)};function l$(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let P5;function e2e(s,e){if(wQ&&s.data instanceof Blob)return s.data.arrayBuffer().then(l$).then(e);if(CQ&&(s.data instanceof ArrayBuffer||yQ(s.data)))return e(l$(s.data));SF(s,!1,t=>{P5||(P5=new TextEncoder),e(P5.encode(t))})}const c$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",QS=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<c$.length;s++)QS[c$.charCodeAt(s)]=s;const t2e=s=>{let e=s.length*.75,t=s.length,i,n=0,r,o,a,l;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const c=new ArrayBuffer(e),h=new Uint8Array(c);for(i=0;i<t;i+=4)r=QS[s.charCodeAt(i)],o=QS[s.charCodeAt(i+1)],a=QS[s.charCodeAt(i+2)],l=QS[s.charCodeAt(i+3)],h[n++]=r<<2|o>>4,h[n++]=(o&15)<<4|a>>2,h[n++]=(a&3)<<6|l&63;return c},i2e=typeof ArrayBuffer=="function",LF=(s,e)=>{if(typeof s!="string")return{type:"message",data:SQ(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:n2e(s.substring(1),e)}:YD[t]?s.length>1?{type:YD[t],data:s.substring(1)}:{type:YD[t]}:d6},n2e=(s,e)=>{if(i2e){const t=t2e(s);return SQ(t,e)}else return{base64:!0,data:s}},SQ=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},LQ="",s2e=(s,e)=>{const t=s.length,i=new Array(t);let n=0;s.forEach((r,o)=>{SF(r,!1,a=>{i[o]=a,++n===t&&e(i.join(LQ))})})},r2e=(s,e)=>{const t=s.split(LQ),i=[];for(let n=0;n<t.length;n++){const r=LF(t[n],e);if(i.push(r),r.type==="error")break}return i};function o2e(){return new TransformStream({transform(s,e){e2e(s,t=>{const i=t.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const r=new DataView(n.buffer);r.setUint8(0,126),r.setUint16(1,i)}else{n=new Uint8Array(9);const r=new DataView(n.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(i))}s.data&&typeof s.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(t)})}})}let B5;function oD(s){return s.reduce((e,t)=>e+t.length,0)}function aD(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let i=0;for(let n=0;n<e;n++)t[n]=s[0][i++],i===s[0].length&&(s.shift(),i=0);return s.length&&i<s[0].length&&(s[0]=s[0].slice(i)),t}function a2e(s,e){B5||(B5=new TextDecoder);const t=[];let i=0,n=-1,r=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(i===0){if(oD(t)<1)break;const l=aD(t,1);r=(l[0]&128)===128,n=l[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(oD(t)<2)break;const l=aD(t,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(oD(t)<8)break;const l=aD(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),h=c.getUint32(0);if(h>Math.pow(2,21)-1){a.enqueue(d6);break}n=h*Math.pow(2,32)+c.getUint32(4),i=3}else{if(oD(t)<n)break;const l=aD(t,n);a.enqueue(LF(r?l:B5.decode(l),e)),i=0}if(n===0||n>s){a.enqueue(d6);break}}}})}const xQ=4;function yr(s){if(s)return l2e(s)}function l2e(s){for(var e in yr.prototype)s[e]=yr.prototype[e];return s}yr.prototype.on=yr.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};yr.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};yr.prototype.off=yr.prototype.removeListener=yr.prototype.removeAllListeners=yr.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,n=0;n<t.length;n++)if(i=t[n],i===e||i.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+s],this};yr.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,n=t.length;i<n;++i)t[i].apply(this,e)}return this};yr.prototype.emitReserved=yr.prototype.emit;yr.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};yr.prototype.hasListeners=function(s){return!!this.listeners(s).length};const KR=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Yc=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),c2e="arraybuffer";function kQ(s,...e){return e.reduce((t,i)=>(s.hasOwnProperty(i)&&(t[i]=s[i]),t),{})}const u2e=Yc.setTimeout,h2e=Yc.clearTimeout;function YR(s,e){e.useNativeTimers?(s.setTimeoutFn=u2e.bind(Yc),s.clearTimeoutFn=h2e.bind(Yc)):(s.setTimeoutFn=Yc.setTimeout.bind(Yc),s.clearTimeoutFn=Yc.clearTimeout.bind(Yc))}const d2e=1.33;function f2e(s){return typeof s=="string"?g2e(s):Math.ceil((s.byteLength||s.size)*d2e)}function g2e(s){let e=0,t=0;for(let i=0,n=s.length;i<n;i++)e=s.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function EQ(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function m2e(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function p2e(s){let e={},t=s.split("&");for(let i=0,n=t.length;i<n;i++){let r=t[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class _2e extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class xF extends yr{constructor(e){super(),this.writable=!1,YR(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new _2e(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=LF(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=m2e(e);return t.length?"?"+t:""}}class b2e extends xF{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};r2e(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,s2e(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=EQ()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let TQ=!1;try{TQ=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const v2e=TQ;function w2e(){}class C2e extends b2e{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}class Td extends yr{constructor(e,t,i){super(),this.createRequest=e,YR(this,i),this._opts=i,this._method=i.method||"GET",this._uri=t,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const t=kQ(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Td.requestsCount++,Td.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=w2e,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Td.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Td.requestsCount=0;Td.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",u$);else if(typeof addEventListener=="function"){const s="onpagehide"in Yc?"pagehide":"unload";addEventListener(s,u$,!1)}}function u$(){for(let s in Td.requests)Td.requests.hasOwnProperty(s)&&Td.requests[s].abort()}const y2e=(function(){const s=DQ({xdomain:!1});return s&&s.responseType!==null})();class S2e extends C2e{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=y2e&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Td(DQ,this.uri(),e)}}function DQ(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||v2e))return new XMLHttpRequest}catch{}if(!e)try{return new Yc[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const NQ=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class L2e extends xF{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,i=NQ?{}:kQ(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],n=t===e.length-1;SF(i,this.supportsBinary,r=>{try{this.doWrite(i,r)}catch{}n&&KR(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=EQ()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const F5=Yc.WebSocket||Yc.MozWebSocket;class x2e extends L2e{createSocket(e,t,i){return NQ?new F5(e,t,i):t?new F5(e,t):new F5(e)}doWrite(e,t){this.ws.send(t)}}class k2e extends xF{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=a2e(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),n=o2e();n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();const r=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],n=t===e.length-1;this._writer.write(i).then(()=>{n&&KR(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const E2e={websocket:x2e,webtransport:k2e,polling:S2e},T2e=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,D2e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function f6(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),i=s.indexOf("]");t!=-1&&i!=-1&&(s=s.substring(0,t)+s.substring(t,i).replace(/:/g,";")+s.substring(i,s.length));let n=T2e.exec(s||""),r={},o=14;for(;o--;)r[D2e[o]]=n[o]||"";return t!=-1&&i!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=N2e(r,r.path),r.queryKey=I2e(r,r.query),r}function N2e(s,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function I2e(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,r){n&&(t[n]=r)}),t}const g6=typeof addEventListener=="function"&&typeof removeEventListener=="function",ZD=[];g6&&addEventListener("offline",()=>{ZD.forEach(s=>s())},!1);class Jm extends yr{constructor(e,t){if(super(),this.binaryType=c2e,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const i=f6(e);t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=f6(t.host).host);YR(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=p2e(this.opts.query)),g6&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ZD.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=xQ,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Jm.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Jm.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(t+=f2e(n)),i>0&&t>this._maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,KR(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,i){return this._sendPacket("message",e,t,i),this}send(e,t,i){return this._sendPacket("message",e,t,i),this}_sendPacket(e,t,i,n){if(typeof t=="function"&&(n=t,t=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:e,data:t,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(Jm.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),g6&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=ZD.indexOf(this._offlineEventListener);i!==-1&&ZD.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Jm.protocol=xQ;class A2e extends Jm{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),i=!1;Jm.priorWebsocketSuccess=!1;const n=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Jm.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(h(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=t.name,this.emitReserved("upgradeError",g)}}))};function r(){i||(i=!0,h(),t.close(),t=null)}const o=d=>{const g=new Error("probe error: "+d);g.transport=t.name,r(),this.emitReserved("upgradeError",g)};function a(){o("transport closed")}function l(){o("socket closed")}function c(d){t&&d.name!==t.name&&r()}const h=()=>{t.removeListener("open",n),t.removeListener("error",o),t.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};t.once("open",n),t.once("error",o),t.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}let R2e=class extends A2e{constructor(e,t={}){const i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>E2e[n]).filter(n=>!!n)),super(e,i)}};function M2e(s,e="",t){let i=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),i=f6(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+e,i.href=i.protocol+"://"+r+(t&&t.port===i.port?"":":"+i.port),i}const O2e=typeof ArrayBuffer=="function",P2e=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,IQ=Object.prototype.toString,B2e=typeof Blob=="function"||typeof Blob<"u"&&IQ.call(Blob)==="[object BlobConstructor]",F2e=typeof File=="function"||typeof File<"u"&&IQ.call(File)==="[object FileConstructor]";function kF(s){return O2e&&(s instanceof ArrayBuffer||P2e(s))||B2e&&s instanceof Blob||F2e&&s instanceof File}function XD(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,i=s.length;t<i;t++)if(XD(s[t]))return!0;return!1}if(kF(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return XD(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&XD(s[t]))return!0;return!1}function V2e(s){const e=[],t=s.data,i=s;return i.data=m6(t,e),i.attachments=e.length,{packet:i,buffers:e}}function m6(s,e){if(!s)return s;if(kF(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let i=0;i<s.length;i++)t[i]=m6(s[i],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=m6(s[i],e));return t}return s}function H2e(s,e){return s.data=p6(s.data,e),delete s.attachments,s}function p6(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=p6(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=p6(s[t],e));return s}const W2e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],z2e=5;var qi;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(qi||(qi={}));class U2e{constructor(e){this.replacer=e}encode(e){return(e.type===qi.EVENT||e.type===qi.ACK)&&XD(e)?this.encodeAsBinary({type:e.type===qi.EVENT?qi.BINARY_EVENT:qi.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===qi.BINARY_EVENT||e.type===qi.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=V2e(e),i=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(i),n}}function h$(s){return Object.prototype.toString.call(s)==="[object Object]"}class EF extends yr{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===qi.BINARY_EVENT;i||t.type===qi.BINARY_ACK?(t.type=i?qi.EVENT:qi.ACK,this.reconstructor=new q2e(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(kF(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(qi[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===qi.BINARY_EVENT||i.type===qi.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(r,t)}else i.nsp="/";const n=e.charAt(t+1);if(n!==""&&Number(n)==n){const r=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}i.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(EF.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case qi.CONNECT:return h$(t);case qi.DISCONNECT:return t===void 0;case qi.CONNECT_ERROR:return typeof t=="string"||h$(t);case qi.EVENT:case qi.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&W2e.indexOf(t[0])===-1);case qi.ACK:case qi.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class q2e{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=H2e(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const $2e=Object.freeze(Object.defineProperty({__proto__:null,Decoder:EF,Encoder:U2e,get PacketType(){return qi},protocol:z2e},Symbol.toStringTag,{value:"Module"}));function Uu(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const j2e=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class AQ extends yr{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Uu(e,"open",this.onopen.bind(this)),Uu(e,"packet",this.onpacket.bind(this)),Uu(e,"error",this.onerror.bind(this)),Uu(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,n,r;if(j2e.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:qi.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const h=this.ids++,d=t.pop();this._registerAckCallback(h,d),o.id=h}const a=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},n),o=(...a)=>{this.io.clearTimeoutFn(r),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((i,n)=>{const r=(o,a)=>o?n(o):i(a);r.withError=!0,t.push(r),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...r)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(n)):(this._queue.shift(),t&&t(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:qi.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case qi.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qi.EVENT:case qi.BINARY_EVENT:this.onevent(e);break;case qi.ACK:case qi.BINARY_ACK:this.onack(e);break;case qi.DISCONNECT:this.ondisconnect();break;case qi.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...n){i||(i=!0,t.packet({type:qi.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qi.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function MC(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}MC.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=(Math.floor(e*10)&1)==0?s-t:s+t}return Math.min(s,this.max)|0};MC.prototype.reset=function(){this.attempts=0};MC.prototype.setMin=function(s){this.ms=s};MC.prototype.setMax=function(s){this.max=s};MC.prototype.setJitter=function(s){this.jitter=s};class _6 extends yr{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,YR(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new MC({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||$2e;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new R2e(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=Uu(t,"open",function(){i.onopen(),e&&e()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=Uu(t,"error",r);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{n(),r(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Uu(e,"ping",this.onping.bind(this)),Uu(e,"data",this.ondata.bind(this)),Uu(e,"error",this.onerror.bind(this)),Uu(e,"close",this.onclose.bind(this)),Uu(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){KR(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new AQ(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const FS={};function QD(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=M2e(s,e.path||"/socket.io"),i=t.source,n=t.id,r=t.path,o=FS[n]&&r in FS[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new _6(i,e):(FS[n]||(FS[n]=new _6(i,e)),l=FS[n]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(QD,{Manager:_6,Socket:AQ,io:QD,connect:QD});var JS={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var G2e=JS.exports,d$;function K2e(){return d$||(d$=1,(function(s,e){(function(){var t,i="4.17.21",n=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",d=1,g=2,_=4,b=1,C=2,S=1,E=2,x=4,T=8,N=16,A=32,P=64,O=128,V=256,U=512,Y=30,B="...",F=800,W=16,ee=1,X=2,$=3,te=1/0,ce=9007199254740991,he=17976931348623157e292,j=NaN,ae=4294967295,Te=ae-1,Le=ae>>>1,Oe=[["ary",O],["bind",S],["bindKey",E],["curry",T],["curryRight",N],["flip",U],["partial",A],["partialRight",P],["rearg",V]],Ne="[object Arguments]",Ke="[object Array]",Dt="[object AsyncFunction]",Xe="[object Boolean]",tt="[object Date]",Et="[object DOMException]",jt="[object Error]",ii="[object Function]",Ci="[object GeneratorFunction]",ri="[object Map]",Tn="[object Number]",Pl="[object Null]",on="[object Object]",Bl="[object Promise]",Fl="[object Proxy]",Hr="[object RegExp]",is="[object Set]",Ua="[object String]",To="[object Symbol]",lr="[object Undefined]",js="[object WeakMap]",Wr="[object WeakSet]",pn="[object ArrayBuffer]",ns="[object DataView]",jn="[object Float32Array]",Ds="[object Float64Array]",Vl="[object Int8Array]",oa="[object Int16Array]",to="[object Int32Array]",hs="[object Uint8Array]",ss="[object Uint8ClampedArray]",io="[object Uint16Array]",cr="[object Uint32Array]",Hl=/\b__p \+= '';/g,Ns=/\b(__p \+=) '' \+/g,Wl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qa=/&(?:amp|lt|gt|quot|#39);/g,Bi=/[&<>"']/g,Do=RegExp(qa.source),$a=RegExp(Bi.source),zl=/<%-([\s\S]+?)%>/g,aa=/<%([\s\S]+?)%>/g,la=/<%=([\s\S]+?)%>/g,No=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_h=/^\w*$/,ys=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mn=/[\\^$.*+?()[\]{}|]/g,Is=RegExp(Mn.source),rs=/^\s+/,ca=/\s/,kc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ds=/\{\n\/\* \[wrapped with (.+)\] \*/,fu=/,? & /,ja=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xr=/[()=,{}\[\]\/\s]/,ua=/\\(\\)?/g,ha=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dn=/\w*$/,da=/^[-+]0x[0-9a-f]+$/i,Gn=/^0b[01]+$/i,pt=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,je=/^(?:0|[1-9]\d*)$/,st=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Di=/($^)/,os=/['\n\r\u2028\u2029\\]/g,Cn="\\ud800-\\udfff",As="\\u0300-\\u036f",Gs="\\ufe20-\\ufe2f",kr="\\u20d0-\\u20ff",en=As+Gs+kr,Io="\\u2700-\\u27bf",Er="a-z\\xdf-\\xf6\\xf8-\\xff",Ga="\\xac\\xb1\\xd7\\xf7",Kd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Yd="\\u2000-\\u206f",xp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zd="A-Z\\xc0-\\xd6\\xd8-\\xde",Tr="\\ufe0e\\ufe0f",Ec=Ga+Kd+Yd+xp,gu="['’]",Ka="["+Cn+"]",bh="["+Ec+"]",Ya="["+en+"]",Ig="\\d+",zr="["+Io+"]",vh="["+Er+"]",Xd="[^"+Cn+Ec+Ig+Io+Er+Zd+"]",Ul="\\ud83c[\\udffb-\\udfff]",Tc="(?:"+Ya+"|"+Ul+")",Qd="[^"+Cn+"]",Za="(?:\\ud83c[\\udde6-\\uddff]){2}",Rs="[\\ud800-\\udbff][\\udc00-\\udfff]",Ur="["+Zd+"]",fa="\\u200d",Jd="(?:"+vh+"|"+Xd+")",Ao="(?:"+Ur+"|"+Xd+")",Ag="(?:"+gu+"(?:d|ll|m|re|s|t|ve))?",Rg="(?:"+gu+"(?:D|LL|M|RE|S|T|VE))?",mu=Tc+"?",wh="["+Tr+"]?",Ch="(?:"+fa+"(?:"+[Qd,Za,Rs].join("|")+")"+wh+mu+")*",fs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ql="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yh=wh+mu+Ch,Dc="(?:"+[zr,Za,Rs].join("|")+")"+yh,Sh="(?:"+[Qd+Ya+"?",Ya,Za,Rs,Ka].join("|")+")",Xa=RegExp(gu,"g"),ga=RegExp(Ya,"g"),Nc=RegExp(Ul+"(?="+Ul+")|"+Sh+yh,"g"),$l=RegExp([Ur+"?"+vh+"+"+Ag+"(?="+[bh,Ur,"$"].join("|")+")",Ao+"+"+Rg+"(?="+[bh,Ur+Jd,"$"].join("|")+")",Ur+"?"+Jd+"+"+Ag,Ur+"+"+Rg,ql,fs,Ig,Dc].join("|"),"g"),ma=RegExp("["+fa+Cn+en+Tr+"]"),Ro=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lh=-1,Xi={};Xi[jn]=Xi[Ds]=Xi[Vl]=Xi[oa]=Xi[to]=Xi[hs]=Xi[ss]=Xi[io]=Xi[cr]=!0,Xi[Ne]=Xi[Ke]=Xi[pn]=Xi[Xe]=Xi[ns]=Xi[tt]=Xi[jt]=Xi[ii]=Xi[ri]=Xi[Tn]=Xi[on]=Xi[Hr]=Xi[is]=Xi[Ua]=Xi[js]=!1;var Fi={};Fi[Ne]=Fi[Ke]=Fi[pn]=Fi[ns]=Fi[Xe]=Fi[tt]=Fi[jn]=Fi[Ds]=Fi[Vl]=Fi[oa]=Fi[to]=Fi[ri]=Fi[Tn]=Fi[on]=Fi[Hr]=Fi[is]=Fi[Ua]=Fi[To]=Fi[hs]=Fi[ss]=Fi[io]=Fi[cr]=!0,Fi[jt]=Fi[ii]=Fi[js]=!1;var M={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},le={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ft=parseFloat,yt=parseInt,yi=typeof eu=="object"&&eu&&eu.Object===Object&&eu,Si=typeof self=="object"&&self&&self.Object===Object&&self,oi=yi||Si||Function("return this")(),Li=e&&!e.nodeType&&e,On=Li&&!0&&s&&!s.nodeType&&s,Dr=On&&On.exports===Li,as=Dr&&yi.process,un=(function(){try{var _e=On&&On.require&&On.require("util").types;return _e||as&&as.binding&&as.binding("util")}catch{}})(),gs=un&&un.isArrayBuffer,jl=un&&un.isDate,Qa=un&&un.isMap,Ic=un&&un.isRegExp,kp=un&&un.isSet,ef=un&&un.isTypedArray;function Ks(_e,Me,De){switch(De.length){case 0:return _e.call(Me);case 1:return _e.call(Me,De[0]);case 2:return _e.call(Me,De[0],De[1]);case 3:return _e.call(Me,De[0],De[1],De[2])}return _e.apply(Me,De)}function r4(_e,Me,De,ct){for(var Vt=-1,Vi=_e==null?0:_e.length;++Vt<Vi;){var Ms=_e[Vt];Me(ct,Ms,De(Ms),_e)}return ct}function Ja(_e,Me){for(var De=-1,ct=_e==null?0:_e.length;++De<ct&&Me(_e[De],De,_e)!==!1;);return _e}function o4(_e,Me){for(var De=_e==null?0:_e.length;De--&&Me(_e[De],De,_e)!==!1;);return _e}function rk(_e,Me){for(var De=-1,ct=_e==null?0:_e.length;++De<ct;)if(!Me(_e[De],De,_e))return!1;return!0}function Ac(_e,Me){for(var De=-1,ct=_e==null?0:_e.length,Vt=0,Vi=[];++De<ct;){var Ms=_e[De];Me(Ms,De,_e)&&(Vi[Vt++]=Ms)}return Vi}function Q0(_e,Me){var De=_e==null?0:_e.length;return!!De&&Mg(_e,Me,0)>-1}function BC(_e,Me,De){for(var ct=-1,Vt=_e==null?0:_e.length;++ct<Vt;)if(De(Me,_e[ct]))return!0;return!1}function Kn(_e,Me){for(var De=-1,ct=_e==null?0:_e.length,Vt=Array(ct);++De<ct;)Vt[De]=Me(_e[De],De,_e);return Vt}function _u(_e,Me){for(var De=-1,ct=Me.length,Vt=_e.length;++De<ct;)_e[Vt+De]=Me[De];return _e}function FC(_e,Me,De,ct){var Vt=-1,Vi=_e==null?0:_e.length;for(ct&&Vi&&(De=_e[++Vt]);++Vt<Vi;)De=Me(De,_e[Vt],Vt,_e);return De}function a4(_e,Me,De,ct){var Vt=_e==null?0:_e.length;for(ct&&Vt&&(De=_e[--Vt]);Vt--;)De=Me(De,_e[Vt],Vt,_e);return De}function VC(_e,Me){for(var De=-1,ct=_e==null?0:_e.length;++De<ct;)if(Me(_e[De],De,_e))return!0;return!1}var l4=eb("length");function c4(_e){return _e.split("")}function u4(_e){return _e.match(ja)||[]}function ok(_e,Me,De){var ct;return De(_e,function(Vt,Vi,Ms){if(Me(Vt,Vi,Ms))return ct=Vi,!1}),ct}function J0(_e,Me,De,ct){for(var Vt=_e.length,Vi=De+(ct?1:-1);ct?Vi--:++Vi<Vt;)if(Me(_e[Vi],Vi,_e))return Vi;return-1}function Mg(_e,Me,De){return Me===Me?g4(_e,Me,De):J0(_e,Og,De)}function HC(_e,Me,De,ct){for(var Vt=De-1,Vi=_e.length;++Vt<Vi;)if(ct(_e[Vt],Me))return Vt;return-1}function Og(_e){return _e!==_e}function ak(_e,Me){var De=_e==null?0:_e.length;return De?ib(_e,Me)/De:j}function eb(_e){return function(Me){return Me==null?t:Me[_e]}}function tb(_e){return function(Me){return _e==null?t:_e[Me]}}function WC(_e,Me,De,ct,Vt){return Vt(_e,function(Vi,Ms,Hi){De=ct?(ct=!1,Vi):Me(De,Vi,Ms,Hi)}),De}function lk(_e,Me){var De=_e.length;for(_e.sort(Me);De--;)_e[De]=_e[De].value;return _e}function ib(_e,Me){for(var De,ct=-1,Vt=_e.length;++ct<Vt;){var Vi=Me(_e[ct]);Vi!==t&&(De=De===t?Vi:De+Vi)}return De}function xh(_e,Me){for(var De=-1,ct=Array(_e);++De<_e;)ct[De]=Me(De);return ct}function h4(_e,Me){return Kn(Me,function(De){return[De,_e[De]]})}function ck(_e){return _e&&_e.slice(0,UC(_e)+1).replace(rs,"")}function pa(_e){return function(Me){return _e(Me)}}function nb(_e,Me){return Kn(Me,function(De){return _e[De]})}function Pg(_e,Me){return _e.has(Me)}function Bg(_e,Me){for(var De=-1,ct=_e.length;++De<ct&&Mg(Me,_e[De],0)>-1;);return De}function Fg(_e,Me){for(var De=_e.length;De--&&Mg(Me,_e[De],0)>-1;);return De}function d4(_e,Me){for(var De=_e.length,ct=0;De--;)_e[De]===Me&&++ct;return ct}var sb=tb(M),uk=tb(Z);function hk(_e){return"\\"+Ae[_e]}function zC(_e,Me){return _e==null?t:_e[Me]}function kh(_e){return ma.test(_e)}function dk(_e){return Ro.test(_e)}function fk(_e){for(var Me,De=[];!(Me=_e.next()).done;)De.push(Me.value);return De}function rb(_e){var Me=-1,De=Array(_e.size);return _e.forEach(function(ct,Vt){De[++Me]=[Vt,ct]}),De}function gk(_e,Me){return function(De){return _e(Me(De))}}function Eh(_e,Me){for(var De=-1,ct=_e.length,Vt=0,Vi=[];++De<ct;){var Ms=_e[De];(Ms===Me||Ms===h)&&(_e[De]=h,Vi[Vt++]=De)}return Vi}function ob(_e){var Me=-1,De=Array(_e.size);return _e.forEach(function(ct){De[++Me]=ct}),De}function f4(_e){var Me=-1,De=Array(_e.size);return _e.forEach(function(ct){De[++Me]=[ct,ct]}),De}function g4(_e,Me,De){for(var ct=De-1,Vt=_e.length;++ct<Vt;)if(_e[ct]===Me)return ct;return-1}function _a(_e,Me,De){for(var ct=De+1;ct--;)if(_e[ct]===Me)return ct;return ct}function Rc(_e){return kh(_e)?pk(_e):l4(_e)}function el(_e){return kh(_e)?qC(_e):c4(_e)}function UC(_e){for(var Me=_e.length;Me--&&ca.test(_e.charAt(Me)););return Me}var mk=tb(le);function pk(_e){for(var Me=Nc.lastIndex=0;Nc.test(_e);)++Me;return Me}function qC(_e){return _e.match(Nc)||[]}function m4(_e){return _e.match($l)||[]}var Vg=(function _e(Me){Me=Me==null?oi:Th.defaults(oi.Object(),Me,Th.pick(oi,pu));var De=Me.Array,ct=Me.Date,Vt=Me.Error,Vi=Me.Function,Ms=Me.Math,Hi=Me.Object,ab=Me.RegExp,_k=Me.String,ba=Me.TypeError,lb=De.prototype,p4=Vi.prototype,Hg=Hi.prototype,Ep=Me["__core-js_shared__"],Tp=p4.toString,tn=Hg.hasOwnProperty,Gl=0,$C=(function(){var p=/[^.]+$/.exec(Ep&&Ep.keys&&Ep.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""})(),no=Hg.toString,tl=Tp.call(Hi),Wg=oi._,jC=ab("^"+Tp.call(tn).replace(Mn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tf=Dr?Me.Buffer:t,Kl=Me.Symbol,zg=Me.Uint8Array,nf=tf?tf.allocUnsafe:t,Dp=gk(Hi.getPrototypeOf,Hi),Np=Hi.create,sf=Hg.propertyIsEnumerable,cb=lb.splice,Mo=Kl?Kl.isConcatSpreadable:t,rf=Kl?Kl.iterator:t,so=Kl?Kl.toStringTag:t,Ip=(function(){try{var p=Bh(Hi,"defineProperty");return p({},"",{}),p}catch{}})(),ub=Me.clearTimeout!==oi.clearTimeout&&Me.clearTimeout,of=ct&&ct.now!==oi.Date.now&&ct.now,GC=Me.setTimeout!==oi.setTimeout&&Me.setTimeout,Ug=Ms.ceil,bu=Ms.floor,Dh=Hi.getOwnPropertySymbols,hb=tf?tf.isBuffer:t,Ap=Me.isFinite,il=lb.join,nl=gk(Hi.keys,Hi),Pn=Ms.max,Yn=Ms.min,vu=ct.now,af=Me.parseInt,KC=Ms.random,YC=lb.reverse,Rp=Bh(Me,"DataView"),Ys=Bh(Me,"Map"),Zn=Bh(Me,"Promise"),Ei=Bh(Me,"Set"),Yl=Bh(Me,"WeakMap"),Oo=Bh(Hi,"create"),qg=Yl&&new Yl,sl={},bk=Tu(Rp),vk=Tu(Ys),Mp=Tu(Zn),Op=Tu(Ei),wk=Tu(Yl),Nh=Kl?Kl.prototype:t,lf=Nh?Nh.valueOf:t,Ih=Nh?Nh.toString:t;function G(p){if(ls(p)&&!Ut(p)&&!(p instanceof pi)){if(p instanceof Po)return p;if(tn.call(p,"__wrapped__"))return Xs(p)}return new Po(p)}var va=(function(){function p(){}return function(v){if(!Qn(v))return{};if(Np)return Np(v);p.prototype=v;var k=new p;return p.prototype=t,k}})();function rl(){}function Po(p,v){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=t}G.templateSettings={escape:zl,evaluate:aa,interpolate:la,variable:"",imports:{_:G}},G.prototype=rl.prototype,G.prototype.constructor=G,Po.prototype=va(rl.prototype),Po.prototype.constructor=Po;function pi(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ae,this.__views__=[]}function Pp(){var p=new pi(this.__wrapped__);return p.__actions__=Zs(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Zs(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Zs(this.__views__),p}function db(){if(this.__filtered__){var p=new pi(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function cf(){var p=this.__wrapped__.value(),v=this.__dir__,k=Ut(p),R=v<0,q=k?p.length:0,J=Jk(0,q,this.__views__),re=J.start,de=J.end,ve=de-re,He=R?de:re-1,ze=this.__iteratees__,qe=ze.length,ut=0,St=Yn(ve,this.__takeCount__);if(!k||!R&&q==ve&&St==ve)return Vk(p,this.__actions__);var Wt=[];e:for(;ve--&&ut<St;){He+=v;for(var bi=-1,zt=p[He];++bi<qe;){var Ii=ze[bi],zi=Ii.iteratee,ic=Ii.type,ka=zi(zt);if(ic==X)zt=ka;else if(!ka){if(ic==ee)continue e;break e}}Wt[ut++]=zt}return Wt}pi.prototype=va(rl.prototype),pi.prototype.constructor=pi;function ms(p){var v=-1,k=p==null?0:p.length;for(this.clear();++v<k;){var R=p[v];this.set(R[0],R[1])}}function fb(){this.__data__=Oo?Oo(null):{},this.size=0}function Ck(p){var v=this.has(p)&&delete this.__data__[p];return this.size-=v?1:0,v}function _4(p){var v=this.__data__;if(Oo){var k=v[p];return k===l?t:k}return tn.call(v,p)?v[p]:t}function b4(p){var v=this.__data__;return Oo?v[p]!==t:tn.call(v,p)}function v4(p,v){var k=this.__data__;return this.size+=this.has(p)?0:1,k[p]=Oo&&v===t?l:v,this}ms.prototype.clear=fb,ms.prototype.delete=Ck,ms.prototype.get=_4,ms.prototype.has=b4,ms.prototype.set=v4;function yn(p){var v=-1,k=p==null?0:p.length;for(this.clear();++v<k;){var R=p[v];this.set(R[0],R[1])}}function ZC(){this.__data__=[],this.size=0}function Bp(p){var v=this.__data__,k=Gg(v,p);if(k<0)return!1;var R=v.length-1;return k==R?v.pop():cb.call(v,k,1),--this.size,!0}function Fp(p){var v=this.__data__,k=Gg(v,p);return k<0?t:v[k][1]}function XC(p){return Gg(this.__data__,p)>-1}function $g(p,v){var k=this.__data__,R=Gg(k,p);return R<0?(++this.size,k.push([p,v])):k[R][1]=v,this}yn.prototype.clear=ZC,yn.prototype.delete=Bp,yn.prototype.get=Fp,yn.prototype.has=XC,yn.prototype.set=$g;function Bo(p){var v=-1,k=p==null?0:p.length;for(this.clear();++v<k;){var R=p[v];this.set(R[0],R[1])}}function w4(){this.size=0,this.__data__={hash:new ms,map:new(Ys||yn),string:new ms}}function yk(p){var v=Jg(this,p).delete(p);return this.size-=v?1:0,v}function C4(p){return Jg(this,p).get(p)}function Sk(p){return Jg(this,p).has(p)}function uf(p,v){var k=Jg(this,p),R=k.size;return k.set(p,v),this.size+=k.size==R?0:1,this}Bo.prototype.clear=w4,Bo.prototype.delete=yk,Bo.prototype.get=C4,Bo.prototype.has=Sk,Bo.prototype.set=uf;function wu(p){var v=-1,k=p==null?0:p.length;for(this.__data__=new Bo;++v<k;)this.add(p[v])}function gb(p){return this.__data__.set(p,l),this}function Lk(p){return this.__data__.has(p)}wu.prototype.add=wu.prototype.push=gb,wu.prototype.has=Lk;function ro(p){var v=this.__data__=new yn(p);this.size=v.size}function xk(){this.__data__=new yn,this.size=0}function mb(p){var v=this.__data__,k=v.delete(p);return this.size=v.size,k}function QC(p){return this.__data__.get(p)}function kk(p){return this.__data__.has(p)}function pb(p,v){var k=this.__data__;if(k instanceof yn){var R=k.__data__;if(!Ys||R.length<n-1)return R.push([p,v]),this.size=++k.size,this;k=this.__data__=new Bo(R)}return k.set(p,v),this.size=k.size,this}ro.prototype.clear=xk,ro.prototype.delete=mb,ro.prototype.get=QC,ro.prototype.has=kk,ro.prototype.set=pb;function JC(p,v){var k=Ut(p),R=!k&&Au(p),q=!k&&!R&&Gh(p),J=!k&&!R&&!q&&fm(p),re=k||R||q||J,de=re?xh(p.length,_k):[],ve=de.length;for(var He in p)(v||tn.call(p,He))&&!(re&&(He=="length"||q&&(He=="offset"||He=="parent")||J&&(He=="buffer"||He=="byteLength"||He=="byteOffset")||Jl(He,ve)))&&de.push(He);return de}function jg(p){var v=p.length;return v?p[kb(0,v-1)]:t}function Ek(p,v){return h_(Zs(p),Xl(v,0,p.length))}function Tk(p){return h_(Zs(p))}function Mc(p,v,k){(k!==t&&!qo(p[v],k)||k===t&&!(v in p))&&Zl(p,v,k)}function hf(p,v,k){var R=p[v];(!(tn.call(p,v)&&qo(R,k))||k===t&&!(v in p))&&Zl(p,v,k)}function Gg(p,v){for(var k=p.length;k--;)if(qo(p[k][0],v))return k;return-1}function Ah(p,v,k,R){return yu(p,function(q,J,re){v(R,q,k(q),re)}),R}function Cu(p,v){return p&&Ho(v,er(v),p)}function Vp(p,v){return p&&Ho(v,dr(v),p)}function Zl(p,v,k){v=="__proto__"&&Ip?Ip(p,v,{configurable:!0,enumerable:!0,value:k,writable:!0}):p[v]=k}function Hp(p,v){for(var k=-1,R=v.length,q=De(R),J=p==null;++k<R;)q[k]=J?t:x_(p,v[k]);return q}function Xl(p,v,k){return p===p&&(k!==t&&(p=p<=k?p:k),v!==t&&(p=p>=v?p:v)),p}function qr(p,v,k,R,q,J){var re,de=v&d,ve=v&g,He=v&_;if(k&&(re=q?k(p,R,q,J):k(p)),re!==t)return re;if(!Qn(p))return p;var ze=Ut(p);if(ze){if(re=xy(p),!de)return Zs(p,re)}else{var qe=hr(p),ut=qe==ii||qe==Ci;if(Gh(p))return _y(p,de);if(qe==on||qe==Ne||ut&&!q){if(re=ve||ut?{}:ky(p),!de)return ve?Jp(p,Vp(re,p)):Ab(p,Cu(re,p))}else{if(!Fi[qe])return q?p:{};re=Ey(p,qe,de)}}J||(J=new ro);var St=J.get(p);if(St)return St;J.set(p,re),$E(p)?p.forEach(function(zt){re.add(qr(zt,v,k,zt,p,J))}):nv(p)&&p.forEach(function(zt,Ii){re.set(Ii,qr(zt,v,k,Ii,p,J))});var Wt=He?ve?Pb:Ob:ve?dr:er,bi=ze?t:Wt(p);return Ja(bi||p,function(zt,Ii){bi&&(Ii=zt,zt=p[Ii]),hf(re,Ii,qr(zt,v,k,Ii,p,J))}),re}function Dk(p){var v=er(p);return function(k){return ey(k,p,v)}}function ey(p,v,k){var R=k.length;if(p==null)return!R;for(p=Hi(p);R--;){var q=k[R],J=v[q],re=p[q];if(re===t&&!(q in p)||!J(re))return!1}return!0}function df(p,v,k){if(typeof p!="function")throw new ba(o);return tm(function(){p.apply(t,k)},v)}function Rh(p,v,k,R){var q=-1,J=Q0,re=!0,de=p.length,ve=[],He=v.length;if(!de)return ve;k&&(v=Kn(v,pa(k))),R?(J=BC,re=!1):v.length>=n&&(J=Pg,re=!1,v=new wu(v));e:for(;++q<de;){var ze=p[q],qe=k==null?ze:k(ze);if(ze=R||ze!==0?ze:0,re&&qe===qe){for(var ut=He;ut--;)if(v[ut]===qe)continue e;ve.push(ze)}else J(v,qe,R)||ve.push(ze)}return ve}var yu=Cy($r),_b=Cy(Yg,!0);function ty(p,v){var k=!0;return yu(p,function(R,q,J){return k=!!v(R,q,J),k}),k}function Ql(p,v,k){for(var R=-1,q=p.length;++R<q;){var J=p[R],re=v(J);if(re!=null&&(de===t?re===re&&!lo(re):k(re,de)))var de=re,ve=J}return ve}function di(p,v,k,R){var q=p.length;for(k=Xt(k),k<0&&(k=-k>q?0:q+k),R=R===t||R>q?q:Xt(R),R<0&&(R+=q),R=k>R?0:Uc(R);k<R;)p[k++]=v;return p}function hn(p,v){var k=[];return yu(p,function(R,q,J){v(R,q,J)&&k.push(R)}),k}function Ti(p,v,k,R,q){var J=-1,re=p.length;for(k||(k=ku),q||(q=[]);++J<re;){var de=p[J];v>0&&k(de)?v>1?Ti(de,v-1,k,R,q):_u(q,de):R||(q[q.length]=de)}return q}var Kg=vf(),ff=vf(!0);function $r(p,v){return p&&Kg(p,v,er)}function Yg(p,v){return p&&ff(p,v,er)}function Mh(p,v){return Ac(v,function(k){return ec(p[k])})}function ol(p,v){v=Lu(v,p);for(var k=0,R=v.length;p!=null&&k<R;)p=p[an(v[k++])];return k&&k==R?p:t}function Nk(p,v,k){var R=v(p);return Ut(p)?R:_u(R,k(p))}function Ni(p){return p==null?p===t?lr:Pl:so&&so in Hi(p)?Qk(p):sE(p)}function Wp(p,v){return p>v}function iy(p,v){return p!=null&&tn.call(p,v)}function Ik(p,v){return p!=null&&v in Hi(p)}function Ak(p,v,k){return p>=Yn(v,k)&&p<Pn(v,k)}function ny(p,v,k){for(var R=k?BC:Q0,q=p[0].length,J=p.length,re=J,de=De(J),ve=1/0,He=[];re--;){var ze=p[re];re&&v&&(ze=Kn(ze,pa(v))),ve=Yn(ze.length,ve),de[re]=!k&&(v||q>=120&&ze.length>=120)?new wu(re&&ze):t}ze=p[0];var qe=-1,ut=de[0];e:for(;++qe<q&&He.length<ve;){var St=ze[qe],Wt=v?v(St):St;if(St=k||St!==0?St:0,!(ut?Pg(ut,Wt):R(He,Wt,k))){for(re=J;--re;){var bi=de[re];if(!(bi?Pg(bi,Wt):R(p[re],Wt,k)))continue e}ut&&ut.push(Wt),He.push(St)}}return He}function sy(p,v,k,R){return $r(p,function(q,J,re){v(R,k(q),J,re)}),R}function gf(p,v,k){v=Lu(v,p),p=em(p,v);var R=p==null?p:p[an(jr(v))];return R==null?t:Ks(R,p,k)}function bb(p){return ls(p)&&Ni(p)==Ne}function Fo(p){return ls(p)&&Ni(p)==pn}function Os(p){return ls(p)&&Ni(p)==tt}function mf(p,v,k,R,q){return p===v?!0:p==null||v==null||!ls(p)&&!ls(v)?p!==p&&v!==v:zp(p,v,k,R,mf,q)}function zp(p,v,k,R,q,J){var re=Ut(p),de=Ut(v),ve=re?Ke:hr(p),He=de?Ke:hr(v);ve=ve==Ne?on:ve,He=He==Ne?on:He;var ze=ve==on,qe=He==on,ut=ve==He;if(ut&&Gh(p)){if(!Gh(v))return!1;re=!0,ze=!1}if(ut&&!ze)return J||(J=new ro),re||fm(p)?Zk(p,v,k,R,q,J):Xk(p,v,ve,k,R,q,J);if(!(k&b)){var St=ze&&tn.call(p,"__wrapped__"),Wt=qe&&tn.call(v,"__wrapped__");if(St||Wt){var bi=St?p.value():p,zt=Wt?v.value():v;return J||(J=new ro),q(bi,zt,k,R,J)}}return ut?(J||(J=new ro),ur(p,v,k,R,q,J)):!1}function vb(p){return ls(p)&&hr(p)==ri}function Up(p,v,k,R){var q=k.length,J=q,re=!R;if(p==null)return!J;for(p=Hi(p);q--;){var de=k[q];if(re&&de[2]?de[1]!==p[de[0]]:!(de[0]in p))return!1}for(;++q<J;){de=k[q];var ve=de[0],He=p[ve],ze=de[1];if(re&&de[2]){if(He===t&&!(ve in p))return!1}else{var qe=new ro;if(R)var ut=R(He,ze,ve,p,v,qe);if(!(ut===t?mf(ze,He,b|C,R,qe):ut))return!1}}return!0}function Oc(p){if(!Qn(p)||zb(p))return!1;var v=ec(p)?jC:pt;return v.test(Tu(p))}function wb(p){return ls(p)&&Ni(p)==Hr}function ry(p){return ls(p)&&hr(p)==is}function oy(p){return ls(p)&&Lf(p.length)&&!!Xi[Ni(p)]}function ay(p){return typeof p=="function"?p:p==null?Se:typeof p=="object"?Ut(p)?Sb(p[0],p[1]):cy(p):Wi(p)}function Cb(p){if(!Sn(p))return nl(p);var v=[];for(var k in Hi(p))tn.call(p,k)&&k!="constructor"&&v.push(k);return v}function Rk(p){if(!Qn(p))return Fh(p);var v=Sn(p),k=[];for(var R in p)R=="constructor"&&(v||!tn.call(p,R))||k.push(R);return k}function yb(p,v){return p<v}function ly(p,v){var k=-1,R=Qs(p)?De(p.length):[];return yu(p,function(q,J,re){R[++k]=v(q,J,re)}),R}function cy(p){var v=Fb(p);return v.length==1&&v[0][2]?iE(v[0][0],v[0][1]):function(k){return k===p||Up(k,p,v)}}function Sb(p,v){return Hb(p)&&tE(v)?iE(an(p),v):function(k){var R=x_(k,p);return R===t&&R===v?_m(k,p):mf(v,R,b|C)}}function qp(p,v,k,R,q){p!==v&&Kg(v,function(J,re){if(q||(q=new ro),Qn(J))y4(p,v,re,k,qp,R,q);else{var de=R?R(Ub(p,re),J,re+"",p,v,q):t;de===t&&(de=J),Mc(p,re,de)}},dr)}function y4(p,v,k,R,q,J,re){var de=Ub(p,k),ve=Ub(v,k),He=re.get(ve);if(He){Mc(p,k,He);return}var ze=J?J(de,ve,k+"",p,v,re):t,qe=ze===t;if(qe){var ut=Ut(ve),St=!ut&&Gh(ve),Wt=!ut&&!St&&fm(ve);ze=ve,ut||St||Wt?Ut(de)?ze=de:bs(de)?ze=Zs(de):St?(qe=!1,ze=_y(ve,!0)):Wt?(qe=!1,ze=vy(ve,!0)):ze=[]:ul(ve)||Au(ve)?(ze=de,Au(de)?ze=KE(de):(!Qn(de)||ec(de))&&(ze=ky(ve))):qe=!1}qe&&(re.set(ve,ze),q(ze,ve,R,J,re),re.delete(ve)),Mc(p,k,ze)}function uy(p,v){var k=p.length;if(k)return v+=v<0?k:0,Jl(v,k)?p[v]:t}function hy(p,v,k){v.length?v=Kn(v,function(J){return Ut(J)?function(re){return ol(re,J.length===1?J[0]:J)}:J}):v=[Se];var R=-1;v=Kn(v,pa(Nt()));var q=ly(p,function(J,re,de){var ve=Kn(v,function(He){return He(J)});return{criteria:ve,index:++R,value:J}});return lk(q,function(J,re){return Uk(J,re,k)})}function Mk(p,v){return Lb(p,v,function(k,R){return _m(p,R)})}function Lb(p,v,k){for(var R=-1,q=v.length,J={};++R<q;){var re=v[R],de=ol(p,re);k(de,re)&&Xg(J,Lu(re,p),de)}return J}function Ok(p){return function(v){return ol(v,p)}}function xb(p,v,k,R){var q=R?HC:Mg,J=-1,re=v.length,de=p;for(p===v&&(v=Zs(v)),k&&(de=Kn(p,pa(k)));++J<re;)for(var ve=0,He=v[J],ze=k?k(He):He;(ve=q(de,ze,ve,R))>-1;)de!==p&&cb.call(de,ve,1),cb.call(p,ve,1);return p}function dy(p,v){for(var k=p?v.length:0,R=k-1;k--;){var q=v[k];if(k==R||q!==J){var J=q;Jl(q)?cb.call(p,q,1):Kp(p,q)}}return p}function kb(p,v){return p+bu(KC()*(v-p+1))}function Pk(p,v,k,R){for(var q=-1,J=Pn(Ug((v-p)/(k||1)),0),re=De(J);J--;)re[R?J:++q]=p,p+=k;return re}function fy(p,v){var k="";if(!p||v<1||v>ce)return k;do v%2&&(k+=p),v=bu(v/2),v&&(p+=p);while(v);return k}function li(p,v){return c_(Ty(p,v,Se),p+"")}function Zg(p){return jg(vm(p))}function Eb(p,v){var k=vm(p);return h_(k,Xl(v,0,k.length))}function Xg(p,v,k,R){if(!Qn(p))return p;v=Lu(v,p);for(var q=-1,J=v.length,re=J-1,de=p;de!=null&&++q<J;){var ve=an(v[q]),He=k;if(ve==="__proto__"||ve==="constructor"||ve==="prototype")return p;if(q!=re){var ze=de[ve];He=R?R(ze,ve,de):t,He===t&&(He=Qn(ze)?ze:Jl(v[q+1])?[]:{})}hf(de,ve,He),de=de[ve]}return p}var $p=qg?function(p,v){return qg.set(p,v),p}:Se,jp=Ip?function(p,v){return Ip(p,"toString",{configurable:!0,enumerable:!1,value:ye(v),writable:!0})}:Se;function Bk(p){return h_(vm(p))}function wa(p,v,k){var R=-1,q=p.length;v<0&&(v=-v>q?0:q+v),k=k>q?q:k,k<0&&(k+=q),q=v>k?0:k-v>>>0,v>>>=0;for(var J=De(q);++R<q;)J[R]=p[R+v];return J}function Fk(p,v){var k;return yu(p,function(R,q,J){return k=v(R,q,J),!k}),!!k}function Gp(p,v,k){var R=0,q=p==null?R:p.length;if(typeof v=="number"&&v===v&&q<=Le){for(;R<q;){var J=R+q>>>1,re=p[J];re!==null&&!lo(re)&&(k?re<=v:re<v)?R=J+1:q=J}return q}return Tb(p,v,Se,k)}function Tb(p,v,k,R){var q=0,J=p==null?0:p.length;if(J===0)return 0;v=k(v);for(var re=v!==v,de=v===null,ve=lo(v),He=v===t;q<J;){var ze=bu((q+J)/2),qe=k(p[ze]),ut=qe!==t,St=qe===null,Wt=qe===qe,bi=lo(qe);if(re)var zt=R||Wt;else He?zt=Wt&&(R||ut):de?zt=Wt&&ut&&(R||!St):ve?zt=Wt&&ut&&!St&&(R||!bi):St||bi?zt=!1:zt=R?qe<=v:qe<v;zt?q=ze+1:J=ze}return Yn(J,Te)}function gy(p,v){for(var k=-1,R=p.length,q=0,J=[];++k<R;){var re=p[k],de=v?v(re):re;if(!k||!qo(de,ve)){var ve=de;J[q++]=re===0?0:re}}return J}function Db(p){return typeof p=="number"?p:lo(p)?j:+p}function Vo(p){if(typeof p=="string")return p;if(Ut(p))return Kn(p,Vo)+"";if(lo(p))return Ih?Ih.call(p):"";var v=p+"";return v=="0"&&1/p==-te?"-0":v}function Su(p,v,k){var R=-1,q=Q0,J=p.length,re=!0,de=[],ve=de;if(k)re=!1,q=BC;else if(J>=n){var He=v?null:Kk(p);if(He)return ob(He);re=!1,q=Pg,ve=new wu}else ve=v?[]:de;e:for(;++R<J;){var ze=p[R],qe=v?v(ze):ze;if(ze=k||ze!==0?ze:0,re&&qe===qe){for(var ut=ve.length;ut--;)if(ve[ut]===qe)continue e;v&&ve.push(qe),de.push(ze)}else q(ve,qe,k)||(ve!==de&&ve.push(qe),de.push(ze))}return de}function Kp(p,v){return v=Lu(v,p),p=em(p,v),p==null||delete p[an(jr(v))]}function my(p,v,k,R){return Xg(p,v,k(ol(p,v)),R)}function Yp(p,v,k,R){for(var q=p.length,J=R?q:-1;(R?J--:++J<q)&&v(p[J],J,p););return k?wa(p,R?0:J,R?J+1:q):wa(p,R?J+1:0,R?q:J)}function Vk(p,v){var k=p;return k instanceof pi&&(k=k.value()),FC(v,function(R,q){return q.func.apply(q.thisArg,_u([R],q.args))},k)}function Zp(p,v,k){var R=p.length;if(R<2)return R?Su(p[0]):[];for(var q=-1,J=De(R);++q<R;)for(var re=p[q],de=-1;++de<R;)de!=q&&(J[q]=Rh(J[q]||re,p[de],v,k));return Su(Ti(J,1),v,k)}function py(p,v,k){for(var R=-1,q=p.length,J=v.length,re={};++R<q;){var de=R<J?v[R]:t;k(re,p[R],de)}return re}function Nb(p){return bs(p)?p:[]}function Xp(p){return typeof p=="function"?p:Se}function Lu(p,v){return Ut(p)?p:Hb(p,v)?[p]:Vc(nn(p))}var Hk=li;function Oh(p,v,k){var R=p.length;return k=k===t?R:k,!v&&k>=R?p:wa(p,v,k)}var Wk=ub||function(p){return oi.clearTimeout(p)};function _y(p,v){if(v)return p.slice();var k=p.length,R=nf?nf(k):new p.constructor(k);return p.copy(R),R}function pf(p){var v=new p.constructor(p.byteLength);return new zg(v).set(new zg(p)),v}function by(p,v){var k=v?pf(p.buffer):p.buffer;return new p.constructor(k,p.byteOffset,p.byteLength)}function Ib(p){var v=new p.constructor(p.source,Dn.exec(p));return v.lastIndex=p.lastIndex,v}function zk(p){return lf?Hi(lf.call(p)):{}}function vy(p,v){var k=v?pf(p.buffer):p.buffer;return new p.constructor(k,p.byteOffset,p.length)}function Qp(p,v){if(p!==v){var k=p!==t,R=p===null,q=p===p,J=lo(p),re=v!==t,de=v===null,ve=v===v,He=lo(v);if(!de&&!He&&!J&&p>v||J&&re&&ve&&!de&&!He||R&&re&&ve||!k&&ve||!q)return 1;if(!R&&!J&&!He&&p<v||He&&k&&q&&!R&&!J||de&&k&&q||!re&&q||!ve)return-1}return 0}function Uk(p,v,k){for(var R=-1,q=p.criteria,J=v.criteria,re=q.length,de=k.length;++R<re;){var ve=Qp(q[R],J[R]);if(ve){if(R>=de)return ve;var He=k[R];return ve*(He=="desc"?-1:1)}}return p.index-v.index}function wy(p,v,k,R){for(var q=-1,J=p.length,re=k.length,de=-1,ve=v.length,He=Pn(J-re,0),ze=De(ve+He),qe=!R;++de<ve;)ze[de]=v[de];for(;++q<re;)(qe||q<J)&&(ze[k[q]]=p[q]);for(;He--;)ze[de++]=p[q++];return ze}function qk(p,v,k,R){for(var q=-1,J=p.length,re=-1,de=k.length,ve=-1,He=v.length,ze=Pn(J-de,0),qe=De(ze+He),ut=!R;++q<ze;)qe[q]=p[q];for(var St=q;++ve<He;)qe[St+ve]=v[ve];for(;++re<de;)(ut||q<J)&&(qe[St+k[re]]=p[q++]);return qe}function Zs(p,v){var k=-1,R=p.length;for(v||(v=De(R));++k<R;)v[k]=p[k];return v}function Ho(p,v,k,R){var q=!k;k||(k={});for(var J=-1,re=v.length;++J<re;){var de=v[J],ve=R?R(k[de],p[de],de,k,p):t;ve===t&&(ve=p[de]),q?Zl(k,de,ve):hf(k,de,ve)}return k}function Ab(p,v){return Ho(p,r_(p),v)}function Jp(p,v){return Ho(p,Vb(p),v)}function _f(p,v){return function(k,R){var q=Ut(k)?r4:Ah,J=v?v():{};return q(k,p,Nt(R,2),J)}}function bf(p){return li(function(v,k){var R=-1,q=k.length,J=q>1?k[q-1]:t,re=q>2?k[2]:t;for(J=p.length>3&&typeof J=="function"?(q--,J):t,re&&ao(k[0],k[1],re)&&(J=q<3?t:J,q=1),v=Hi(v);++R<q;){var de=k[R];de&&p(v,de,R,J)}return v})}function Cy(p,v){return function(k,R){if(k==null)return k;if(!Qs(k))return p(k,R);for(var q=k.length,J=v?q:-1,re=Hi(k);(v?J--:++J<q)&&R(re[J],J,re)!==!1;);return k}}function vf(p){return function(v,k,R){for(var q=-1,J=Hi(v),re=R(v),de=re.length;de--;){var ve=re[p?de:++q];if(k(J[ve],ve,J)===!1)break}return v}}function $k(p,v,k){var R=v&S,q=al(p);function J(){var re=this&&this!==oi&&this instanceof J?q:p;return re.apply(R?k:this,arguments)}return J}function Ca(p){return function(v){v=nn(v);var k=kh(v)?el(v):t,R=k?k[0]:v.charAt(0),q=k?Oh(k,1).join(""):v.slice(1);return R[p]()+q}}function oo(p){return function(v){return FC(L(Ru(v).replace(Xa,"")),p,"")}}function al(p){return function(){var v=arguments;switch(v.length){case 0:return new p;case 1:return new p(v[0]);case 2:return new p(v[0],v[1]);case 3:return new p(v[0],v[1],v[2]);case 4:return new p(v[0],v[1],v[2],v[3]);case 5:return new p(v[0],v[1],v[2],v[3],v[4]);case 6:return new p(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new p(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var k=va(p.prototype),R=p.apply(k,v);return Qn(R)?R:k}}function jk(p,v,k){var R=al(p);function q(){for(var J=arguments.length,re=De(J),de=J,ve=Cf(q);de--;)re[de]=arguments[de];var He=J<3&&re[0]!==ve&&re[J-1]!==ve?[]:Eh(re,ve);if(J-=He.length,J<k)return yy(p,v,ps,q.placeholder,t,re,He,t,t,k-J);var ze=this&&this!==oi&&this instanceof q?R:p;return Ks(ze,this,re)}return q}function xu(p){return function(v,k,R){var q=Hi(v);if(!Qs(v)){var J=Nt(k,3);v=er(v),k=function(de){return J(q[de],de,q)}}var re=p(v,k,R);return re>-1?q[J?v[re]:re]:t}}function Pc(p){return Bn(function(v){var k=v.length,R=k,q=Po.prototype.thru;for(p&&v.reverse();R--;){var J=v[R];if(typeof J!="function")throw new ba(o);if(q&&!re&&s_(J)=="wrapper")var re=new Po([],!0)}for(R=re?R:k;++R<k;){J=v[R];var de=s_(J),ve=de=="wrapper"?Bb(J):t;ve&&Wb(ve[0])&&ve[1]==(O|T|A|V)&&!ve[4].length&&ve[9]==1?re=re[s_(ve[0])].apply(re,ve[3]):re=J.length==1&&Wb(J)?re[de]():re.thru(J)}return function(){var He=arguments,ze=He[0];if(re&&He.length==1&&Ut(ze))return re.plant(ze).value();for(var qe=0,ut=k?v[qe].apply(this,He):ze;++qe<k;)ut=v[qe].call(this,ut);return ut}})}function ps(p,v,k,R,q,J,re,de,ve,He){var ze=v&O,qe=v&S,ut=v&E,St=v&(T|N),Wt=v&U,bi=ut?t:al(p);function zt(){for(var Ii=arguments.length,zi=De(Ii),ic=Ii;ic--;)zi[ic]=arguments[ic];if(St)var ka=Cf(zt),nc=d4(zi,ka);if(R&&(zi=wy(zi,R,q,St)),J&&(zi=qk(zi,J,re,St)),Ii-=nc,St&&Ii<He){var tr=Eh(zi,ka);return yy(p,v,ps,zt.placeholder,k,zi,tr,de,ve,He-Ii)}var Mu=qe?k:this,xf=ut?Mu[p]:p;return Ii=zi.length,de?zi=Fc(zi,de):Wt&&Ii>1&&zi.reverse(),ze&&ve<Ii&&(zi.length=ve),this&&this!==oi&&this instanceof zt&&(xf=bi||al(xf)),xf.apply(Mu,zi)}return zt}function e_(p,v){return function(k,R){return sy(k,p,v(R),{})}}function Qg(p,v){return function(k,R){var q;if(k===t&&R===t)return v;if(k!==t&&(q=k),R!==t){if(q===t)return R;typeof k=="string"||typeof R=="string"?(k=Vo(k),R=Vo(R)):(k=Db(k),R=Db(R)),q=p(k,R)}return q}}function t_(p){return Bn(function(v){return v=Kn(v,pa(Nt())),li(function(k){var R=this;return p(v,function(q){return Ks(q,R,k)})})})}function i_(p,v){v=v===t?" ":Vo(v);var k=v.length;if(k<2)return k?fy(v,p):v;var R=fy(v,Ug(p/Rc(v)));return kh(v)?Oh(el(R),0,p).join(""):R.slice(0,p)}function Gk(p,v,k,R){var q=v&S,J=al(p);function re(){for(var de=-1,ve=arguments.length,He=-1,ze=R.length,qe=De(ze+ve),ut=this&&this!==oi&&this instanceof re?J:p;++He<ze;)qe[He]=R[He];for(;ve--;)qe[He++]=arguments[++de];return Ks(ut,q?k:this,qe)}return re}function Ph(p){return function(v,k,R){return R&&typeof R!="number"&&ao(v,k,R)&&(k=R=t),v=zc(v),k===t?(k=v,v=0):k=zc(k),R=R===t?v<k?1:-1:zc(R),Pk(v,k,R,p)}}function wf(p){return function(v,k){return typeof v=="string"&&typeof k=="string"||(v=hl(v),k=hl(k)),p(v,k)}}function yy(p,v,k,R,q,J,re,de,ve,He){var ze=v&T,qe=ze?re:t,ut=ze?t:re,St=ze?J:t,Wt=ze?t:J;v|=ze?A:P,v&=~(ze?P:A),v&x||(v&=-4);var bi=[p,v,q,St,qe,Wt,ut,de,ve,He],zt=k.apply(t,bi);return Wb(p)&&qb(zt,bi),zt.placeholder=R,$b(zt,p,v)}function Rb(p){var v=Ms[p];return function(k,R){if(k=hl(k),R=R==null?0:Yn(Xt(R),292),R&&Ap(k)){var q=(nn(k)+"e").split("e"),J=v(q[0]+"e"+(+q[1]+R));return q=(nn(J)+"e").split("e"),+(q[0]+"e"+(+q[1]-R))}return v(k)}}var Kk=Ei&&1/ob(new Ei([,-0]))[1]==te?function(p){return new Ei(p)}:ft;function n_(p){return function(v){var k=hr(v);return k==ri?rb(v):k==is?f4(v):h4(v,p(v))}}function Bc(p,v,k,R,q,J,re,de){var ve=v&E;if(!ve&&typeof p!="function")throw new ba(o);var He=R?R.length:0;if(He||(v&=-97,R=q=t),re=re===t?re:Pn(Xt(re),0),de=de===t?de:Xt(de),He-=q?q.length:0,v&P){var ze=R,qe=q;R=q=t}var ut=ve?t:Bb(p),St=[p,v,k,R,q,ze,qe,J,re,de];if(ut&&l_(St,ut),p=St[0],v=St[1],k=St[2],R=St[3],q=St[4],de=St[9]=St[9]===t?ve?0:p.length:Pn(St[9]-He,0),!de&&v&(T|N)&&(v&=-25),!v||v==S)var Wt=$k(p,v,k);else v==T||v==N?Wt=jk(p,v,de):(v==A||v==(S|A))&&!q.length?Wt=Gk(p,v,k,R):Wt=ps.apply(t,St);var bi=ut?$p:qb;return $b(bi(Wt,St),p,v)}function Mb(p,v,k,R){return p===t||qo(p,Hg[k])&&!tn.call(R,k)?v:p}function Sy(p,v,k,R,q,J){return Qn(p)&&Qn(v)&&(J.set(v,p),qp(p,v,t,Sy,J),J.delete(v)),p}function Yk(p){return ul(p)?t:p}function Zk(p,v,k,R,q,J){var re=k&b,de=p.length,ve=v.length;if(de!=ve&&!(re&&ve>de))return!1;var He=J.get(p),ze=J.get(v);if(He&&ze)return He==v&&ze==p;var qe=-1,ut=!0,St=k&C?new wu:t;for(J.set(p,v),J.set(v,p);++qe<de;){var Wt=p[qe],bi=v[qe];if(R)var zt=re?R(bi,Wt,qe,v,p,J):R(Wt,bi,qe,p,v,J);if(zt!==t){if(zt)continue;ut=!1;break}if(St){if(!VC(v,function(Ii,zi){if(!Pg(St,zi)&&(Wt===Ii||q(Wt,Ii,k,R,J)))return St.push(zi)})){ut=!1;break}}else if(!(Wt===bi||q(Wt,bi,k,R,J))){ut=!1;break}}return J.delete(p),J.delete(v),ut}function Xk(p,v,k,R,q,J,re){switch(k){case ns:if(p.byteLength!=v.byteLength||p.byteOffset!=v.byteOffset)return!1;p=p.buffer,v=v.buffer;case pn:return!(p.byteLength!=v.byteLength||!J(new zg(p),new zg(v)));case Xe:case tt:case Tn:return qo(+p,+v);case jt:return p.name==v.name&&p.message==v.message;case Hr:case Ua:return p==v+"";case ri:var de=rb;case is:var ve=R&b;if(de||(de=ob),p.size!=v.size&&!ve)return!1;var He=re.get(p);if(He)return He==v;R|=C,re.set(p,v);var ze=Zk(de(p),de(v),R,q,J,re);return re.delete(p),ze;case To:if(lf)return lf.call(p)==lf.call(v)}return!1}function ur(p,v,k,R,q,J){var re=k&b,de=Ob(p),ve=de.length,He=Ob(v),ze=He.length;if(ve!=ze&&!re)return!1;for(var qe=ve;qe--;){var ut=de[qe];if(!(re?ut in v:tn.call(v,ut)))return!1}var St=J.get(p),Wt=J.get(v);if(St&&Wt)return St==v&&Wt==p;var bi=!0;J.set(p,v),J.set(v,p);for(var zt=re;++qe<ve;){ut=de[qe];var Ii=p[ut],zi=v[ut];if(R)var ic=re?R(zi,Ii,ut,v,p,J):R(Ii,zi,ut,p,v,J);if(!(ic===t?Ii===zi||q(Ii,zi,k,R,J):ic)){bi=!1;break}zt||(zt=ut=="constructor")}if(bi&&!zt){var ka=p.constructor,nc=v.constructor;ka!=nc&&"constructor"in p&&"constructor"in v&&!(typeof ka=="function"&&ka instanceof ka&&typeof nc=="function"&&nc instanceof nc)&&(bi=!1)}return J.delete(p),J.delete(v),bi}function Bn(p){return c_(Ty(p,t,zo),p+"")}function Ob(p){return Nk(p,er,r_)}function Pb(p){return Nk(p,dr,Vb)}var Bb=qg?function(p){return qg.get(p)}:ft;function s_(p){for(var v=p.name+"",k=sl[v],R=tn.call(sl,v)?k.length:0;R--;){var q=k[R],J=q.func;if(J==null||J==p)return q.name}return v}function Cf(p){var v=tn.call(G,"placeholder")?G:p;return v.placeholder}function Nt(){var p=G.iteratee||Rt;return p=p===Rt?ay:p,arguments.length?p(arguments[0],arguments[1]):p}function Jg(p,v){var k=p.__data__;return Eu(v)?k[typeof v=="string"?"string":"hash"]:k.map}function Fb(p){for(var v=er(p),k=v.length;k--;){var R=v[k],q=p[R];v[k]=[R,q,tE(q)]}return v}function Bh(p,v){var k=zC(p,v);return Oc(k)?k:t}function Qk(p){var v=tn.call(p,so),k=p[so];try{p[so]=t;var R=!0}catch{}var q=no.call(p);return R&&(v?p[so]=k:delete p[so]),q}var r_=Dh?function(p){return p==null?[]:(p=Hi(p),Ac(Dh(p),function(v){return sf.call(p,v)}))}:rM,Vb=Dh?function(p){for(var v=[];p;)_u(v,r_(p)),p=Dp(p);return v}:rM,hr=Ni;(Rp&&hr(new Rp(new ArrayBuffer(1)))!=ns||Ys&&hr(new Ys)!=ri||Zn&&hr(Zn.resolve())!=Bl||Ei&&hr(new Ei)!=is||Yl&&hr(new Yl)!=js)&&(hr=function(p){var v=Ni(p),k=v==on?p.constructor:t,R=k?Tu(k):"";if(R)switch(R){case bk:return ns;case vk:return ri;case Mp:return Bl;case Op:return is;case wk:return js}return v});function Jk(p,v,k){for(var R=-1,q=k.length;++R<q;){var J=k[R],re=J.size;switch(J.type){case"drop":p+=re;break;case"dropRight":v-=re;break;case"take":v=Yn(v,p+re);break;case"takeRight":p=Pn(p,v-re);break}}return{start:p,end:v}}function Ly(p){var v=p.match(ds);return v?v[1].split(fu):[]}function o_(p,v,k){v=Lu(v,p);for(var R=-1,q=v.length,J=!1;++R<q;){var re=an(v[R]);if(!(J=p!=null&&k(p,re)))break;p=p[re]}return J||++R!=q?J:(q=p==null?0:p.length,!!q&&Lf(q)&&Jl(re,q)&&(Ut(p)||Au(p)))}function xy(p){var v=p.length,k=new p.constructor(v);return v&&typeof p[0]=="string"&&tn.call(p,"index")&&(k.index=p.index,k.input=p.input),k}function ky(p){return typeof p.constructor=="function"&&!Sn(p)?va(Dp(p)):{}}function Ey(p,v,k){var R=p.constructor;switch(v){case pn:return pf(p);case Xe:case tt:return new R(+p);case ns:return by(p,k);case jn:case Ds:case Vl:case oa:case to:case hs:case ss:case io:case cr:return vy(p,k);case ri:return new R;case Tn:case Ua:return new R(p);case Hr:return Ib(p);case is:return new R;case To:return zk(p)}}function eE(p,v){var k=v.length;if(!k)return p;var R=k-1;return v[R]=(k>1?"& ":"")+v[R],v=v.join(k>2?", ":" "),p.replace(kc,`{
/* [wrapped with `+v+`] */
`)}function ku(p){return Ut(p)||Au(p)||!!(Mo&&p&&p[Mo])}function Jl(p,v){var k=typeof p;return v=v??ce,!!v&&(k=="number"||k!="symbol"&&je.test(p))&&p>-1&&p%1==0&&p<v}function ao(p,v,k){if(!Qn(k))return!1;var R=typeof v;return(R=="number"?Qs(k)&&Jl(v,k.length):R=="string"&&v in k)?qo(k[v],p):!1}function Hb(p,v){if(Ut(p))return!1;var k=typeof p;return k=="number"||k=="symbol"||k=="boolean"||p==null||lo(p)?!0:_h.test(p)||!No.test(p)||v!=null&&p in Hi(v)}function Eu(p){var v=typeof p;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?p!=="__proto__":p===null}function Wb(p){var v=s_(p),k=G[v];if(typeof k!="function"||!(v in pi.prototype))return!1;if(p===k)return!0;var R=Bb(k);return!!R&&p===R[0]}function zb(p){return!!$C&&$C in p}var a_=Ep?ec:oM;function Sn(p){var v=p&&p.constructor,k=typeof v=="function"&&v.prototype||Hg;return p===k}function tE(p){return p===p&&!Qn(p)}function iE(p,v){return function(k){return k==null?!1:k[p]===v&&(v!==t||p in Hi(k))}}function nE(p){var v=v_(p,function(R){return k.size===c&&k.clear(),R}),k=v.cache;return v}function l_(p,v){var k=p[1],R=v[1],q=k|R,J=q<(S|E|O),re=R==O&&k==T||R==O&&k==V&&p[7].length<=v[8]||R==(O|V)&&v[7].length<=v[8]&&k==T;if(!(J||re))return p;R&S&&(p[2]=v[2],q|=k&S?0:x);var de=v[3];if(de){var ve=p[3];p[3]=ve?wy(ve,de,v[4]):de,p[4]=ve?Eh(p[3],h):v[4]}return de=v[5],de&&(ve=p[5],p[5]=ve?qk(ve,de,v[6]):de,p[6]=ve?Eh(p[5],h):v[6]),de=v[7],de&&(p[7]=de),R&O&&(p[8]=p[8]==null?v[8]:Yn(p[8],v[8])),p[9]==null&&(p[9]=v[9]),p[0]=v[0],p[1]=q,p}function Fh(p){var v=[];if(p!=null)for(var k in Hi(p))v.push(k);return v}function sE(p){return no.call(p)}function Ty(p,v,k){return v=Pn(v===t?p.length-1:v,0),function(){for(var R=arguments,q=-1,J=Pn(R.length-v,0),re=De(J);++q<J;)re[q]=R[v+q];q=-1;for(var de=De(v+1);++q<v;)de[q]=R[q];return de[v]=k(re),Ks(p,this,de)}}function em(p,v){return v.length<2?p:ol(p,wa(v,0,-1))}function Fc(p,v){for(var k=p.length,R=Yn(v.length,k),q=Zs(p);R--;){var J=v[R];p[R]=Jl(J,k)?q[J]:t}return p}function Ub(p,v){if(!(v==="constructor"&&typeof p[v]=="function")&&v!="__proto__")return p[v]}var qb=u_($p),tm=GC||function(p,v){return oi.setTimeout(p,v)},c_=u_(jp);function $b(p,v,k){var R=v+"";return c_(p,eE(R,rE(Ly(R),k)))}function u_(p){var v=0,k=0;return function(){var R=vu(),q=W-(R-k);if(k=R,q>0){if(++v>=F)return arguments[0]}else v=0;return p.apply(t,arguments)}}function h_(p,v){var k=-1,R=p.length,q=R-1;for(v=v===t?R:v;++k<v;){var J=kb(k,q),re=p[J];p[J]=p[k],p[k]=re}return p.length=v,p}var Vc=nE(function(p){var v=[];return p.charCodeAt(0)===46&&v.push(""),p.replace(ys,function(k,R,q,J){v.push(q?J.replace(ua,"$1"):R||k)}),v});function an(p){if(typeof p=="string"||lo(p))return p;var v=p+"";return v=="0"&&1/p==-te?"-0":v}function Tu(p){if(p!=null){try{return Tp.call(p)}catch{}try{return p+""}catch{}}return""}function rE(p,v){return Ja(Oe,function(k){var R="_."+k[0];v&k[1]&&!Q0(p,R)&&p.push(R)}),p.sort()}function Xs(p){if(p instanceof pi)return p.clone();var v=new Po(p.__wrapped__,p.__chain__);return v.__actions__=Zs(p.__actions__),v.__index__=p.__index__,v.__values__=p.__values__,v}function S4(p,v,k){(k?ao(p,v,k):v===t)?v=1:v=Pn(Xt(v),0);var R=p==null?0:p.length;if(!R||v<1)return[];for(var q=0,J=0,re=De(Ug(R/v));q<R;)re[J++]=wa(p,q,q+=v);return re}function oE(p){for(var v=-1,k=p==null?0:p.length,R=0,q=[];++v<k;){var J=p[v];J&&(q[R++]=J)}return q}function aE(){var p=arguments.length;if(!p)return[];for(var v=De(p-1),k=arguments[0],R=p;R--;)v[R-1]=arguments[R];return _u(Ut(k)?Zs(k):[k],Ti(v,1))}var Xn=li(function(p,v){return bs(p)?Rh(p,Ti(v,1,bs,!0)):[]}),Wo=li(function(p,v){var k=jr(v);return bs(k)&&(k=t),bs(p)?Rh(p,Ti(v,1,bs,!0),Nt(k,2)):[]}),Du=li(function(p,v){var k=jr(v);return bs(k)&&(k=t),bs(p)?Rh(p,Ti(v,1,bs,!0),t,k):[]});function lE(p,v,k){var R=p==null?0:p.length;return R?(v=k||v===t?1:Xt(v),wa(p,v<0?0:v,R)):[]}function cE(p,v,k){var R=p==null?0:p.length;return R?(v=k||v===t?1:Xt(v),v=R-v,wa(p,0,v<0?0:v)):[]}function L4(p,v){return p&&p.length?Yp(p,Nt(v,3),!0,!0):[]}function Dy(p,v){return p&&p.length?Yp(p,Nt(v,3),!0):[]}function ya(p,v,k,R){var q=p==null?0:p.length;return q?(k&&typeof k!="number"&&ao(p,v,k)&&(k=0,R=q),di(p,v,k,R)):[]}function ll(p,v,k){var R=p==null?0:p.length;if(!R)return-1;var q=k==null?0:Xt(k);return q<0&&(q=Pn(R+q,0)),J0(p,Nt(v,3),q)}function Ny(p,v,k){var R=p==null?0:p.length;if(!R)return-1;var q=R-1;return k!==t&&(q=Xt(k),q=k<0?Pn(R+q,0):Yn(q,R-1)),J0(p,Nt(v,3),q,!0)}function zo(p){var v=p==null?0:p.length;return v?Ti(p,1):[]}function uE(p){var v=p==null?0:p.length;return v?Ti(p,te):[]}function Vh(p,v){var k=p==null?0:p.length;return k?(v=v===t?1:Xt(v),Ti(p,v)):[]}function yf(p){for(var v=-1,k=p==null?0:p.length,R={};++v<k;){var q=p[v];R[q[0]]=q[1]}return R}function Nu(p){return p&&p.length?p[0]:t}function Iy(p,v,k){var R=p==null?0:p.length;if(!R)return-1;var q=k==null?0:Xt(k);return q<0&&(q=Pn(R+q,0)),Mg(p,v,q)}function Ay(p){var v=p==null?0:p.length;return v?wa(p,0,-1):[]}var Hc=li(function(p){var v=Kn(p,Nb);return v.length&&v[0]===p[0]?ny(v):[]}),hE=li(function(p){var v=jr(p),k=Kn(p,Nb);return v===jr(k)?v=t:k.pop(),k.length&&k[0]===p[0]?ny(k,Nt(v,2)):[]}),im=li(function(p){var v=jr(p),k=Kn(p,Nb);return v=typeof v=="function"?v:t,v&&k.pop(),k.length&&k[0]===p[0]?ny(k,t,v):[]});function d_(p,v){return p==null?"":il.call(p,v)}function jr(p){var v=p==null?0:p.length;return v?p[v-1]:t}function nm(p,v,k){var R=p==null?0:p.length;if(!R)return-1;var q=R;return k!==t&&(q=Xt(k),q=q<0?Pn(R+q,0):Yn(q,R-1)),v===v?_a(p,v,q):J0(p,Og,q,!0)}function dE(p,v){return p&&p.length?uy(p,Xt(v)):t}var fE=li(sm);function sm(p,v){return p&&p.length&&v&&v.length?xb(p,v):p}function gE(p,v,k){return p&&p.length&&v&&v.length?xb(p,v,Nt(k,2)):p}function jb(p,v,k){return p&&p.length&&v&&v.length?xb(p,v,t,k):p}var mE=Bn(function(p,v){var k=p==null?0:p.length,R=Hp(p,v);return dy(p,Kn(v,function(q){return Jl(q,k)?+q:q}).sort(Qp)),R});function x4(p,v){var k=[];if(!(p&&p.length))return k;var R=-1,q=[],J=p.length;for(v=Nt(v,3);++R<J;){var re=p[R];v(re,R,p)&&(k.push(re),q.push(R))}return dy(p,q),k}function Ry(p){return p==null?p:YC.call(p)}function dn(p,v,k){var R=p==null?0:p.length;return R?(k&&typeof k!="number"&&ao(p,v,k)?(v=0,k=R):(v=v==null?0:Xt(v),k=k===t?R:Xt(k)),wa(p,v,k)):[]}function Nn(p,v){return Gp(p,v)}function xi(p,v,k){return Tb(p,v,Nt(k,2))}function Pi(p,v){var k=p==null?0:p.length;if(k){var R=Gp(p,v);if(R<k&&qo(p[R],v))return R}return-1}function fn(p,v){return Gp(p,v,!0)}function Sa(p,v,k){return Tb(p,v,Nt(k,2),!0)}function Hh(p,v){var k=p==null?0:p.length;if(k){var R=Gp(p,v,!0)-1;if(qo(p[R],v))return R}return-1}function rm(p){return p&&p.length?gy(p):[]}function My(p,v){return p&&p.length?gy(p,Nt(v,2)):[]}function Iu(p){var v=p==null?0:p.length;return v?wa(p,1,v):[]}function _s(p,v,k){return p&&p.length?(v=k||v===t?1:Xt(v),wa(p,0,v<0?0:v)):[]}function Wh(p,v,k){var R=p==null?0:p.length;return R?(v=k||v===t?1:Xt(v),v=R-v,wa(p,v<0?0:v,R)):[]}function Sf(p,v){return p&&p.length?Yp(p,Nt(v,3),!1,!0):[]}function Oy(p,v){return p&&p.length?Yp(p,Nt(v,3)):[]}var cl=li(function(p){return Su(Ti(p,1,bs,!0))}),om=li(function(p){var v=jr(p);return bs(v)&&(v=t),Su(Ti(p,1,bs,!0),Nt(v,2))}),f_=li(function(p){var v=jr(p);return v=typeof v=="function"?v:t,Su(Ti(p,1,bs,!0),t,v)});function Uo(p){return p&&p.length?Su(p):[]}function Py(p,v){return p&&p.length?Su(p,Nt(v,2)):[]}function By(p,v){return v=typeof v=="function"?v:t,p&&p.length?Su(p,t,v):[]}function am(p){if(!(p&&p.length))return[];var v=0;return p=Ac(p,function(k){if(bs(k))return v=Pn(k.length,v),!0}),xh(v,function(k){return Kn(p,eb(k))})}function g_(p,v){if(!(p&&p.length))return[];var k=am(p);return v==null?k:Kn(k,function(R){return Ks(v,t,R)})}var zh=li(function(p,v){return bs(p)?Rh(p,v):[]}),Nr=li(function(p){return Zp(Ac(p,bs))}),Uh=li(function(p){var v=jr(p);return bs(v)&&(v=t),Zp(Ac(p,bs),Nt(v,2))}),lm=li(function(p){var v=jr(p);return v=typeof v=="function"?v:t,Zp(Ac(p,bs),t,v)}),cm=li(am);function Fy(p,v){return py(p||[],v||[],hf)}function Vy(p,v){return py(p||[],v||[],Xg)}var pE=li(function(p){var v=p.length,k=v>1?p[v-1]:t;return k=typeof k=="function"?(p.pop(),k):t,g_(p,k)});function um(p){var v=G(p);return v.__chain__=!0,v}function Hy(p,v){return v(p),p}function Gr(p,v){return v(p)}var _E=Bn(function(p){var v=p.length,k=v?p[0]:0,R=this.__wrapped__,q=function(J){return Hp(J,p)};return v>1||this.__actions__.length||!(R instanceof pi)||!Jl(k)?this.thru(q):(R=R.slice(k,+k+(v?1:0)),R.__actions__.push({func:Gr,args:[q],thisArg:t}),new Po(R,this.__chain__).thru(function(J){return v&&!J.length&&J.push(t),J}))});function La(){return um(this)}function bE(){return new Po(this.value(),this.__chain__)}function vE(){this.__values__===t&&(this.__values__=xa(this.value()));var p=this.__index__>=this.__values__.length,v=p?t:this.__values__[this.__index__++];return{done:p,value:v}}function k4(){return this}function qh(p){for(var v,k=this;k instanceof rl;){var R=Xs(k);R.__index__=0,R.__values__=t,v?q.__wrapped__=R:v=R;var q=R;k=k.__wrapped__}return q.__wrapped__=p,v}function Gb(){var p=this.__wrapped__;if(p instanceof pi){var v=p;return this.__actions__.length&&(v=new pi(this)),v=v.reverse(),v.__actions__.push({func:Gr,args:[Ry],thisArg:t}),new Po(v,this.__chain__)}return this.thru(Ry)}function Wy(){return Vk(this.__wrapped__,this.__actions__)}var hm=_f(function(p,v,k){tn.call(p,k)?++p[k]:Zl(p,k,1)});function wE(p,v,k){var R=Ut(p)?rk:ty;return k&&ao(p,v,k)&&(v=t),R(p,Nt(v,3))}function CE(p,v){var k=Ut(p)?Ac:hn;return k(p,Nt(v,3))}var yE=xu(ll),zy=xu(Ny);function Uy(p,v){return Ti(m_(p,v),1)}function E4(p,v){return Ti(m_(p,v),te)}function T4(p,v,k){return k=k===t?1:Xt(k),Ti(m_(p,v),k)}function SE(p,v){var k=Ut(p)?Ja:yu;return k(p,Nt(v,3))}function qy(p,v){var k=Ut(p)?o4:_b;return k(p,Nt(v,3))}var LE=_f(function(p,v,k){tn.call(p,k)?p[k].push(v):Zl(p,k,[v])});function dm(p,v,k,R){p=Qs(p)?p:vm(p),k=k&&!R?Xt(k):0;var q=p.length;return k<0&&(k=Pn(q+k,0)),rv(p)?k<=q&&p.indexOf(v,k)>-1:!!q&&Mg(p,v,k)>-1}var Kb=li(function(p,v,k){var R=-1,q=typeof v=="function",J=Qs(p)?De(p.length):[];return yu(p,function(re){J[++R]=q?Ks(v,re,k):gf(re,v,k)}),J}),xE=_f(function(p,v,k){Zl(p,k,v)});function m_(p,v){var k=Ut(p)?Kn:ly;return k(p,Nt(v,3))}function kE(p,v,k,R){return p==null?[]:(Ut(v)||(v=v==null?[]:[v]),k=R?t:k,Ut(k)||(k=k==null?[]:[k]),hy(p,v,k))}var EE=_f(function(p,v,k){p[k?0:1].push(v)},function(){return[[],[]]});function TE(p,v,k){var R=Ut(p)?FC:WC,q=arguments.length<3;return R(p,Nt(v,4),k,q,yu)}function DE(p,v,k){var R=Ut(p)?a4:WC,q=arguments.length<3;return R(p,Nt(v,4),k,q,_b)}function Yb(p,v){var k=Ut(p)?Ac:hn;return k(p,w_(Nt(v,3)))}function NE(p){var v=Ut(p)?jg:Zg;return v(p)}function IE(p,v,k){(k?ao(p,v,k):v===t)?v=1:v=Xt(v);var R=Ut(p)?Ek:Eb;return R(p,v)}function Ln(p){var v=Ut(p)?Tk:Bk;return v(p)}function $y(p){if(p==null)return 0;if(Qs(p))return rv(p)?Rc(p):p.length;var v=hr(p);return v==ri||v==is?p.size:Cb(p).length}function D4(p,v,k){var R=Ut(p)?VC:Fk;return k&&ao(p,v,k)&&(v=t),R(p,Nt(v,3))}var AE=li(function(p,v){if(p==null)return[];var k=v.length;return k>1&&ao(p,v[0],v[1])?v=[]:k>2&&ao(v[0],v[1],v[2])&&(v=[v[0]]),hy(p,Ti(v,1),[])}),Zb=of||function(){return oi.Date.now()};function N4(p,v){if(typeof v!="function")throw new ba(o);return p=Xt(p),function(){if(--p<1)return v.apply(this,arguments)}}function RE(p,v,k){return v=k?t:v,v=p&&v==null?p.length:v,Bc(p,O,t,t,t,t,v)}function p_(p,v){var k;if(typeof v!="function")throw new ba(o);return p=Xt(p),function(){return--p>0&&(k=v.apply(this,arguments)),p<=1&&(v=t),k}}var $h=li(function(p,v,k){var R=S;if(k.length){var q=Eh(k,Cf($h));R|=A}return Bc(p,R,v,k,q)}),Xb=li(function(p,v,k){var R=S|E;if(k.length){var q=Eh(k,Cf(Xb));R|=A}return Bc(v,R,p,k,q)});function __(p,v,k){v=k?t:v;var R=Bc(p,T,t,t,t,t,t,v);return R.placeholder=__.placeholder,R}function Qb(p,v,k){v=k?t:v;var R=Bc(p,N,t,t,t,t,t,v);return R.placeholder=Qb.placeholder,R}function jh(p,v,k){var R,q,J,re,de,ve,He=0,ze=!1,qe=!1,ut=!0;if(typeof p!="function")throw new ba(o);v=hl(v)||0,Qn(k)&&(ze=!!k.leading,qe="maxWait"in k,J=qe?Pn(hl(k.maxWait)||0,v):J,ut="trailing"in k?!!k.trailing:ut);function St(tr){var Mu=R,xf=q;return R=q=t,He=tr,re=p.apply(xf,Mu),re}function Wt(tr){return He=tr,de=tm(Ii,v),ze?St(tr):re}function bi(tr){var Mu=tr-ve,xf=tr-He,eV=v-Mu;return qe?Yn(eV,J-xf):eV}function zt(tr){var Mu=tr-ve,xf=tr-He;return ve===t||Mu>=v||Mu<0||qe&&xf>=J}function Ii(){var tr=Zb();if(zt(tr))return zi(tr);de=tm(Ii,bi(tr))}function zi(tr){return de=t,ut&&R?St(tr):(R=q=t,re)}function ic(){de!==t&&Wk(de),He=0,R=ve=q=de=t}function ka(){return de===t?re:zi(Zb())}function nc(){var tr=Zb(),Mu=zt(tr);if(R=arguments,q=this,ve=tr,Mu){if(de===t)return Wt(ve);if(qe)return Wk(de),de=tm(Ii,v),St(ve)}return de===t&&(de=tm(Ii,v)),re}return nc.cancel=ic,nc.flush=ka,nc}var Wc=li(function(p,v){return df(p,1,v)}),b_=li(function(p,v,k){return df(p,hl(v)||0,k)});function I4(p){return Bc(p,U)}function v_(p,v){if(typeof p!="function"||v!=null&&typeof v!="function")throw new ba(o);var k=function(){var R=arguments,q=v?v.apply(this,R):R[0],J=k.cache;if(J.has(q))return J.get(q);var re=p.apply(this,R);return k.cache=J.set(q,re)||J,re};return k.cache=new(v_.Cache||Bo),k}v_.Cache=Bo;function w_(p){if(typeof p!="function")throw new ba(o);return function(){var v=arguments;switch(v.length){case 0:return!p.call(this);case 1:return!p.call(this,v[0]);case 2:return!p.call(this,v[0],v[1]);case 3:return!p.call(this,v[0],v[1],v[2])}return!p.apply(this,v)}}function ME(p){return p_(2,p)}var OE=Hk(function(p,v){v=v.length==1&&Ut(v[0])?Kn(v[0],pa(Nt())):Kn(Ti(v,1),pa(Nt()));var k=v.length;return li(function(R){for(var q=-1,J=Yn(R.length,k);++q<J;)R[q]=v[q].call(this,R[q]);return Ks(p,this,R)})}),jy=li(function(p,v){var k=Eh(v,Cf(jy));return Bc(p,A,t,v,k)}),Jb=li(function(p,v){var k=Eh(v,Cf(Jb));return Bc(p,P,t,v,k)}),PE=Bn(function(p,v){return Bc(p,V,t,t,t,v)});function BE(p,v){if(typeof p!="function")throw new ba(o);return v=v===t?v:Xt(v),li(p,v)}function A4(p,v){if(typeof p!="function")throw new ba(o);return v=v==null?0:Pn(Xt(v),0),li(function(k){var R=k[v],q=Oh(k,0,v);return R&&_u(q,R),Ks(p,this,q)})}function Gy(p,v,k){var R=!0,q=!0;if(typeof p!="function")throw new ba(o);return Qn(k)&&(R="leading"in k?!!k.leading:R,q="trailing"in k?!!k.trailing:q),jh(p,v,{leading:R,maxWait:v,trailing:q})}function Ky(p){return RE(p,1)}function R4(p,v){return jy(Xp(v),p)}function M4(){if(!arguments.length)return[];var p=arguments[0];return Ut(p)?p:[p]}function C_(p){return qr(p,_)}function O4(p,v){return v=typeof v=="function"?v:t,qr(p,_,v)}function FE(p){return qr(p,d|_)}function ki(p,v){return v=typeof v=="function"?v:t,qr(p,d|_,v)}function Yy(p,v){return v==null||ey(p,v,er(v))}function qo(p,v){return p===v||p!==p&&v!==v}var Zy=wf(Wp),VE=wf(function(p,v){return p>=v}),Au=bb((function(){return arguments})())?bb:function(p){return ls(p)&&tn.call(p,"callee")&&!sf.call(p,"callee")},Ut=De.isArray,ev=gs?pa(gs):Fo;function Qs(p){return p!=null&&Lf(p.length)&&!ec(p)}function bs(p){return ls(p)&&Qs(p)}function P4(p){return p===!0||p===!1||ls(p)&&Ni(p)==Xe}var Gh=hb||oM,HE=jl?pa(jl):Os;function WE(p){return ls(p)&&p.nodeType===1&&!ul(p)}function tv(p){if(p==null)return!0;if(Qs(p)&&(Ut(p)||typeof p=="string"||typeof p.splice=="function"||Gh(p)||fm(p)||Au(p)))return!p.length;var v=hr(p);if(v==ri||v==is)return!p.size;if(Sn(p))return!Cb(p).length;for(var k in p)if(tn.call(p,k))return!1;return!0}function _n(p,v){return mf(p,v)}function Xy(p,v,k){k=typeof k=="function"?k:t;var R=k?k(p,v):t;return R===t?mf(p,v,t,k):!!R}function Js(p){if(!ls(p))return!1;var v=Ni(p);return v==jt||v==Et||typeof p.message=="string"&&typeof p.name=="string"&&!ul(p)}function B4(p){return typeof p=="number"&&Ap(p)}function ec(p){if(!Qn(p))return!1;var v=Ni(p);return v==ii||v==Ci||v==Dt||v==Fl}function iv(p){return typeof p=="number"&&p==Xt(p)}function Lf(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=ce}function Qn(p){var v=typeof p;return p!=null&&(v=="object"||v=="function")}function ls(p){return p!=null&&typeof p=="object"}var nv=Qa?pa(Qa):vb;function Qy(p,v){return p===v||Up(p,v,Fb(v))}function F4(p,v,k){return k=typeof k=="function"?k:t,Up(p,v,Fb(v),k)}function zE(p){return qE(p)&&p!=+p}function V4(p){if(a_(p))throw new Vt(r);return Oc(p)}function UE(p){return p===null}function H4(p){return p==null}function qE(p){return typeof p=="number"||ls(p)&&Ni(p)==Tn}function ul(p){if(!ls(p)||Ni(p)!=on)return!1;var v=Dp(p);if(v===null)return!0;var k=tn.call(v,"constructor")&&v.constructor;return typeof k=="function"&&k instanceof k&&Tp.call(k)==tl}var sv=Ic?pa(Ic):wb;function Jy(p){return iv(p)&&p>=-ce&&p<=ce}var $E=kp?pa(kp):ry;function rv(p){return typeof p=="string"||!Ut(p)&&ls(p)&&Ni(p)==Ua}function lo(p){return typeof p=="symbol"||ls(p)&&Ni(p)==To}var fm=ef?pa(ef):oy;function tc(p){return p===t}function eS(p){return ls(p)&&hr(p)==js}function jE(p){return ls(p)&&Ni(p)==Wr}var GE=wf(yb),y_=wf(function(p,v){return p<=v});function xa(p){if(!p)return[];if(Qs(p))return rv(p)?el(p):Zs(p);if(rf&&p[rf])return fk(p[rf]());var v=hr(p),k=v==ri?rb:v==is?ob:vm;return k(p)}function zc(p){if(!p)return p===0?p:0;if(p=hl(p),p===te||p===-te){var v=p<0?-1:1;return v*he}return p===p?p:0}function Xt(p){var v=zc(p),k=v%1;return v===v?k?v-k:v:0}function Uc(p){return p?Xl(Xt(p),0,ae):0}function hl(p){if(typeof p=="number")return p;if(lo(p))return j;if(Qn(p)){var v=typeof p.valueOf=="function"?p.valueOf():p;p=Qn(v)?v+"":v}if(typeof p!="string")return p===0?p:+p;p=ck(p);var k=Gn.test(p);return k||me.test(p)?yt(p.slice(2),k?2:8):da.test(p)?j:+p}function KE(p){return Ho(p,dr(p))}function gm(p){return p?Xl(Xt(p),-ce,ce):p===0?p:0}function nn(p){return p==null?"":Vo(p)}var W4=bf(function(p,v){if(Sn(v)||Qs(v)){Ho(v,er(v),p);return}for(var k in v)tn.call(v,k)&&hf(p,k,v[k])}),YE=bf(function(p,v){Ho(v,dr(v),p)}),ov=bf(function(p,v,k,R){Ho(v,dr(v),p,R)}),z4=bf(function(p,v,k,R){Ho(v,er(v),p,R)}),U4=Bn(Hp);function q4(p,v){var k=va(p);return v==null?k:Cu(k,v)}var $4=li(function(p,v){p=Hi(p);var k=-1,R=v.length,q=R>2?v[2]:t;for(q&&ao(v[0],v[1],q)&&(R=1);++k<R;)for(var J=v[k],re=dr(J),de=-1,ve=re.length;++de<ve;){var He=re[de],ze=p[He];(ze===t||qo(ze,Hg[He])&&!tn.call(p,He))&&(p[He]=J[He])}return p}),ZE=li(function(p){return p.push(t,Sy),Ks(k_,t,p)});function mm(p,v){return ok(p,Nt(v,3),$r)}function S_(p,v){return ok(p,Nt(v,3),Yg)}function XE(p,v){return p==null?p:Kg(p,Nt(v,3),dr)}function j4(p,v){return p==null?p:ff(p,Nt(v,3),dr)}function pm(p,v){return p&&$r(p,Nt(v,3))}function L_(p,v){return p&&Yg(p,Nt(v,3))}function QE(p){return p==null?[]:Mh(p,er(p))}function av(p){return p==null?[]:Mh(p,dr(p))}function x_(p,v,k){var R=p==null?t:ol(p,v);return R===t?k:R}function tS(p,v){return p!=null&&o_(p,v,iy)}function _m(p,v){return p!=null&&o_(p,v,Ik)}var JE=e_(function(p,v,k){v!=null&&typeof v.toString!="function"&&(v=no.call(v)),p[v]=k},ye(Se)),eT=e_(function(p,v,k){v!=null&&typeof v.toString!="function"&&(v=no.call(v)),tn.call(p,v)?p[v].push(k):p[v]=[k]},Nt),G4=li(gf);function er(p){return Qs(p)?JC(p):Cb(p)}function dr(p){return Qs(p)?JC(p,!0):Rk(p)}function K4(p,v){var k={};return v=Nt(v,3),$r(p,function(R,q,J){Zl(k,v(R,q,J),R)}),k}function Y4(p,v){var k={};return v=Nt(v,3),$r(p,function(R,q,J){Zl(k,q,v(R,q,J))}),k}var Z4=bf(function(p,v,k){qp(p,v,k)}),k_=bf(function(p,v,k,R){qp(p,v,k,R)}),lv=Bn(function(p,v){var k={};if(p==null)return k;var R=!1;v=Kn(v,function(J){return J=Lu(J,p),R||(R=J.length>1),J}),Ho(p,Pb(p),k),R&&(k=qr(k,d|g|_,Yk));for(var q=v.length;q--;)Kp(k,v[q]);return k});function iS(p,v){return bm(p,w_(Nt(v)))}var X4=Bn(function(p,v){return p==null?{}:Mk(p,v)});function bm(p,v){if(p==null)return{};var k=Kn(Pb(p),function(R){return[R]});return v=Nt(v),Lb(p,k,function(R,q){return v(R,q[0])})}function Q4(p,v,k){v=Lu(v,p);var R=-1,q=v.length;for(q||(q=1,p=t);++R<q;){var J=p==null?t:p[an(v[R])];J===t&&(R=q,J=k),p=ec(J)?J.call(p):J}return p}function tT(p,v,k){return p==null?p:Xg(p,v,k)}function iT(p,v,k,R){return R=typeof R=="function"?R:t,p==null?p:Xg(p,v,k,R)}var nS=n_(er),sS=n_(dr);function rS(p,v,k){var R=Ut(p),q=R||Gh(p)||fm(p);if(v=Nt(v,4),k==null){var J=p&&p.constructor;q?k=R?new J:[]:Qn(p)?k=ec(J)?va(Dp(p)):{}:k={}}return(q?Ja:$r)(p,function(re,de,ve){return v(k,re,de,ve)}),k}function nT(p,v){return p==null?!0:Kp(p,v)}function cv(p,v,k){return p==null?p:my(p,v,Xp(k))}function J4(p,v,k,R){return R=typeof R=="function"?R:t,p==null?p:my(p,v,Xp(k),R)}function vm(p){return p==null?[]:nb(p,er(p))}function oS(p){return p==null?[]:nb(p,dr(p))}function aS(p,v,k){return k===t&&(k=v,v=t),k!==t&&(k=hl(k),k=k===k?k:0),v!==t&&(v=hl(v),v=v===v?v:0),Xl(hl(p),v,k)}function uv(p,v,k){return v=zc(v),k===t?(k=v,v=0):k=zc(k),p=hl(p),Ak(p,v,k)}function lS(p,v,k){if(k&&typeof k!="boolean"&&ao(p,v,k)&&(v=k=t),k===t&&(typeof v=="boolean"?(k=v,v=t):typeof p=="boolean"&&(k=p,p=t)),p===t&&v===t?(p=0,v=1):(p=zc(p),v===t?(v=p,p=0):v=zc(v)),p>v){var R=p;p=v,v=R}if(k||p%1||v%1){var q=KC();return Yn(p+q*(v-p+Ft("1e-"+((q+"").length-1))),v)}return kb(p,v)}var sT=oo(function(p,v,k){return v=v.toLowerCase(),p+(k?hv(v):v)});function hv(p){return w(nn(p).toLowerCase())}function Ru(p){return p=nn(p),p&&p.replace(st,sb).replace(ga,"")}function Kh(p,v,k){p=nn(p),v=Vo(v);var R=p.length;k=k===t?R:Xl(Xt(k),0,R);var q=k;return k-=v.length,k>=0&&p.slice(k,q)==v}function Yh(p){return p=nn(p),p&&$a.test(p)?p.replace(Bi,uk):p}function E_(p){return p=nn(p),p&&Is.test(p)?p.replace(Mn,"\\$&"):p}var T_=oo(function(p,v,k){return p+(k?"-":"")+v.toLowerCase()}),Zh=oo(function(p,v,k){return p+(k?" ":"")+v.toLowerCase()}),eM=Ca("toLowerCase");function rT(p,v,k){p=nn(p),v=Xt(v);var R=v?Rc(p):0;if(!v||R>=v)return p;var q=(v-R)/2;return i_(bu(q),k)+p+i_(Ug(q),k)}function D_(p,v,k){p=nn(p),v=Xt(v);var R=v?Rc(p):0;return v&&R<v?p+i_(v-R,k):p}function tM(p,v,k){p=nn(p),v=Xt(v);var R=v?Rc(p):0;return v&&R<v?i_(v-R,k)+p:p}function oT(p,v,k){return k||v==null?v=0:v&&(v=+v),af(nn(p).replace(rs,""),v||0)}function dv(p,v,k){return(k?ao(p,v,k):v===t)?v=1:v=Xt(v),fy(nn(p),v)}function aT(){var p=arguments,v=nn(p[0]);return p.length<3?v:v.replace(p[1],p[2])}var iM=oo(function(p,v,k){return p+(k?"_":"")+v.toLowerCase()});function fv(p,v,k){return k&&typeof k!="number"&&ao(p,v,k)&&(v=k=t),k=k===t?ae:k>>>0,k?(p=nn(p),p&&(typeof v=="string"||v!=null&&!sv(v))&&(v=Vo(v),!v&&kh(p))?Oh(el(p),0,k):p.split(v,k)):[]}var gv=oo(function(p,v,k){return p+(k?" ":"")+w(v)});function lT(p,v,k){return p=nn(p),k=k==null?0:Xl(Xt(k),0,p.length),v=Vo(v),p.slice(k,k+v.length)==v}function N_(p,v,k){var R=G.templateSettings;k&&ao(p,v,k)&&(v=t),p=nn(p),v=ov({},v,R,Mb);var q=ov({},v.imports,R.imports,Mb),J=er(q),re=nb(q,J),de,ve,He=0,ze=v.interpolate||Di,qe="__p += '",ut=ab((v.escape||Di).source+"|"+ze.source+"|"+(ze===la?ha:Di).source+"|"+(v.evaluate||Di).source+"|$","g"),St="//# sourceURL="+(tn.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lh+"]")+`
`;p.replace(ut,function(zt,Ii,zi,ic,ka,nc){return zi||(zi=ic),qe+=p.slice(He,nc).replace(os,hk),Ii&&(de=!0,qe+=`' +
__e(`+Ii+`) +
'`),ka&&(ve=!0,qe+=`';
`+ka+`;
__p += '`),zi&&(qe+=`' +
((__t = (`+zi+`)) == null ? '' : __t) +
'`),He=nc+zt.length,zt}),qe+=`';
`;var Wt=tn.call(v,"variable")&&v.variable;if(!Wt)qe=`with (obj) {
`+qe+`
}
`;else if(xr.test(Wt))throw new Vt(a);qe=(ve?qe.replace(Hl,""):qe).replace(Ns,"$1").replace(Wl,"$1;"),qe="function("+(Wt||"obj")+`) {
`+(Wt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(de?", __e = _.escape":"")+(ve?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+qe+`return __p
}`;var bi=D(function(){return Vi(J,St+"return "+qe).apply(t,re)});if(bi.source=qe,Js(bi))throw bi;return bi}function cS(p){return nn(p).toLowerCase()}function mv(p){return nn(p).toUpperCase()}function cT(p,v,k){if(p=nn(p),p&&(k||v===t))return ck(p);if(!p||!(v=Vo(v)))return p;var R=el(p),q=el(v),J=Bg(R,q),re=Fg(R,q)+1;return Oh(R,J,re).join("")}function nM(p,v,k){if(p=nn(p),p&&(k||v===t))return p.slice(0,UC(p)+1);if(!p||!(v=Vo(v)))return p;var R=el(p),q=Fg(R,el(v))+1;return Oh(R,0,q).join("")}function pv(p,v,k){if(p=nn(p),p&&(k||v===t))return p.replace(rs,"");if(!p||!(v=Vo(v)))return p;var R=el(p),q=Bg(R,el(v));return Oh(R,q).join("")}function u(p,v){var k=Y,R=B;if(Qn(v)){var q="separator"in v?v.separator:q;k="length"in v?Xt(v.length):k,R="omission"in v?Vo(v.omission):R}p=nn(p);var J=p.length;if(kh(p)){var re=el(p);J=re.length}if(k>=J)return p;var de=k-Rc(R);if(de<1)return R;var ve=re?Oh(re,0,de).join(""):p.slice(0,de);if(q===t)return ve+R;if(re&&(de+=ve.length-de),sv(q)){if(p.slice(de).search(q)){var He,ze=ve;for(q.global||(q=ab(q.source,nn(Dn.exec(q))+"g")),q.lastIndex=0;He=q.exec(ze);)var qe=He.index;ve=ve.slice(0,qe===t?de:qe)}}else if(p.indexOf(Vo(q),de)!=de){var ut=ve.lastIndexOf(q);ut>-1&&(ve=ve.slice(0,ut))}return ve+R}function f(p){return p=nn(p),p&&Do.test(p)?p.replace(qa,mk):p}var m=oo(function(p,v,k){return p+(k?" ":"")+v.toUpperCase()}),w=Ca("toUpperCase");function L(p,v,k){return p=nn(p),v=k?t:v,v===t?dk(p)?m4(p):u4(p):p.match(v)||[]}var D=li(function(p,v){try{return Ks(p,t,v)}catch(k){return Js(k)?k:new Vt(k)}}),H=Bn(function(p,v){return Ja(v,function(k){k=an(k),Zl(p,k,$h(p[k],p))}),p});function K(p){var v=p==null?0:p.length,k=Nt();return p=v?Kn(p,function(R){if(typeof R[1]!="function")throw new ba(o);return[k(R[0]),R[1]]}):[],li(function(R){for(var q=-1;++q<v;){var J=p[q];if(Ks(J[0],this,R))return Ks(J[1],this,R)}})}function oe(p){return Dk(qr(p,d))}function ye(p){return function(){return p}}function Pe(p,v){return p==null||p!==p?v:p}var We=Pc(),ke=Pc(!0);function Se(p){return p}function Rt(p){return ay(typeof p=="function"?p:qr(p,d))}function It(p){return cy(qr(p,d))}function bn(p,v){return Sb(p,qr(v,d))}var be=li(function(p,v){return function(k){return gf(k,p,v)}}),fe=li(function(p,v){return function(k){return gf(p,k,v)}});function Ce(p,v,k){var R=er(v),q=Mh(v,R);k==null&&!(Qn(v)&&(q.length||!R.length))&&(k=v,v=p,p=this,q=Mh(v,er(v)));var J=!(Qn(k)&&"chain"in k)||!!k.chain,re=ec(p);return Ja(q,function(de){var ve=v[de];p[de]=ve,re&&(p.prototype[de]=function(){var He=this.__chain__;if(J||He){var ze=p(this.__wrapped__),qe=ze.__actions__=Zs(this.__actions__);return qe.push({func:ve,args:arguments,thisArg:p}),ze.__chain__=He,ze}return ve.apply(p,_u([this.value()],arguments))})}),p}function Ve(){return oi._===this&&(oi._=Wg),this}function ft(){}function _i(p){return p=Xt(p),li(function(v){return uy(v,p)})}var kt=t_(Kn),Mt=t_(rk),fr=t_(VC);function Wi(p){return Hb(p)?eb(an(p)):Ok(p)}function Xh(p){return function(v){return p==null?t:ol(p,v)}}var sM=Ph(),jJ=Ph(!0);function rM(){return[]}function oM(){return!1}function GJ(){return{}}function KJ(){return""}function YJ(){return!0}function ZJ(p,v){if(p=Xt(p),p<1||p>ce)return[];var k=ae,R=Yn(p,ae);v=Nt(v),p-=ae;for(var q=xh(R,v);++k<p;)v(k);return q}function XJ(p){return Ut(p)?Kn(p,an):lo(p)?[p]:Zs(Vc(nn(p)))}function QJ(p){var v=++Gl;return nn(p)+v}var JJ=Qg(function(p,v){return p+v},0),eee=Rb("ceil"),tee=Qg(function(p,v){return p/v},1),iee=Rb("floor");function nee(p){return p&&p.length?Ql(p,Se,Wp):t}function see(p,v){return p&&p.length?Ql(p,Nt(v,2),Wp):t}function ree(p){return ak(p,Se)}function oee(p,v){return ak(p,Nt(v,2))}function aee(p){return p&&p.length?Ql(p,Se,yb):t}function lee(p,v){return p&&p.length?Ql(p,Nt(v,2),yb):t}var cee=Qg(function(p,v){return p*v},1),uee=Rb("round"),hee=Qg(function(p,v){return p-v},0);function dee(p){return p&&p.length?ib(p,Se):0}function fee(p,v){return p&&p.length?ib(p,Nt(v,2)):0}return G.after=N4,G.ary=RE,G.assign=W4,G.assignIn=YE,G.assignInWith=ov,G.assignWith=z4,G.at=U4,G.before=p_,G.bind=$h,G.bindAll=H,G.bindKey=Xb,G.castArray=M4,G.chain=um,G.chunk=S4,G.compact=oE,G.concat=aE,G.cond=K,G.conforms=oe,G.constant=ye,G.countBy=hm,G.create=q4,G.curry=__,G.curryRight=Qb,G.debounce=jh,G.defaults=$4,G.defaultsDeep=ZE,G.defer=Wc,G.delay=b_,G.difference=Xn,G.differenceBy=Wo,G.differenceWith=Du,G.drop=lE,G.dropRight=cE,G.dropRightWhile=L4,G.dropWhile=Dy,G.fill=ya,G.filter=CE,G.flatMap=Uy,G.flatMapDeep=E4,G.flatMapDepth=T4,G.flatten=zo,G.flattenDeep=uE,G.flattenDepth=Vh,G.flip=I4,G.flow=We,G.flowRight=ke,G.fromPairs=yf,G.functions=QE,G.functionsIn=av,G.groupBy=LE,G.initial=Ay,G.intersection=Hc,G.intersectionBy=hE,G.intersectionWith=im,G.invert=JE,G.invertBy=eT,G.invokeMap=Kb,G.iteratee=Rt,G.keyBy=xE,G.keys=er,G.keysIn=dr,G.map=m_,G.mapKeys=K4,G.mapValues=Y4,G.matches=It,G.matchesProperty=bn,G.memoize=v_,G.merge=Z4,G.mergeWith=k_,G.method=be,G.methodOf=fe,G.mixin=Ce,G.negate=w_,G.nthArg=_i,G.omit=lv,G.omitBy=iS,G.once=ME,G.orderBy=kE,G.over=kt,G.overArgs=OE,G.overEvery=Mt,G.overSome=fr,G.partial=jy,G.partialRight=Jb,G.partition=EE,G.pick=X4,G.pickBy=bm,G.property=Wi,G.propertyOf=Xh,G.pull=fE,G.pullAll=sm,G.pullAllBy=gE,G.pullAllWith=jb,G.pullAt=mE,G.range=sM,G.rangeRight=jJ,G.rearg=PE,G.reject=Yb,G.remove=x4,G.rest=BE,G.reverse=Ry,G.sampleSize=IE,G.set=tT,G.setWith=iT,G.shuffle=Ln,G.slice=dn,G.sortBy=AE,G.sortedUniq=rm,G.sortedUniqBy=My,G.split=fv,G.spread=A4,G.tail=Iu,G.take=_s,G.takeRight=Wh,G.takeRightWhile=Sf,G.takeWhile=Oy,G.tap=Hy,G.throttle=Gy,G.thru=Gr,G.toArray=xa,G.toPairs=nS,G.toPairsIn=sS,G.toPath=XJ,G.toPlainObject=KE,G.transform=rS,G.unary=Ky,G.union=cl,G.unionBy=om,G.unionWith=f_,G.uniq=Uo,G.uniqBy=Py,G.uniqWith=By,G.unset=nT,G.unzip=am,G.unzipWith=g_,G.update=cv,G.updateWith=J4,G.values=vm,G.valuesIn=oS,G.without=zh,G.words=L,G.wrap=R4,G.xor=Nr,G.xorBy=Uh,G.xorWith=lm,G.zip=cm,G.zipObject=Fy,G.zipObjectDeep=Vy,G.zipWith=pE,G.entries=nS,G.entriesIn=sS,G.extend=YE,G.extendWith=ov,Ce(G,G),G.add=JJ,G.attempt=D,G.camelCase=sT,G.capitalize=hv,G.ceil=eee,G.clamp=aS,G.clone=C_,G.cloneDeep=FE,G.cloneDeepWith=ki,G.cloneWith=O4,G.conformsTo=Yy,G.deburr=Ru,G.defaultTo=Pe,G.divide=tee,G.endsWith=Kh,G.eq=qo,G.escape=Yh,G.escapeRegExp=E_,G.every=wE,G.find=yE,G.findIndex=ll,G.findKey=mm,G.findLast=zy,G.findLastIndex=Ny,G.findLastKey=S_,G.floor=iee,G.forEach=SE,G.forEachRight=qy,G.forIn=XE,G.forInRight=j4,G.forOwn=pm,G.forOwnRight=L_,G.get=x_,G.gt=Zy,G.gte=VE,G.has=tS,G.hasIn=_m,G.head=Nu,G.identity=Se,G.includes=dm,G.indexOf=Iy,G.inRange=uv,G.invoke=G4,G.isArguments=Au,G.isArray=Ut,G.isArrayBuffer=ev,G.isArrayLike=Qs,G.isArrayLikeObject=bs,G.isBoolean=P4,G.isBuffer=Gh,G.isDate=HE,G.isElement=WE,G.isEmpty=tv,G.isEqual=_n,G.isEqualWith=Xy,G.isError=Js,G.isFinite=B4,G.isFunction=ec,G.isInteger=iv,G.isLength=Lf,G.isMap=nv,G.isMatch=Qy,G.isMatchWith=F4,G.isNaN=zE,G.isNative=V4,G.isNil=H4,G.isNull=UE,G.isNumber=qE,G.isObject=Qn,G.isObjectLike=ls,G.isPlainObject=ul,G.isRegExp=sv,G.isSafeInteger=Jy,G.isSet=$E,G.isString=rv,G.isSymbol=lo,G.isTypedArray=fm,G.isUndefined=tc,G.isWeakMap=eS,G.isWeakSet=jE,G.join=d_,G.kebabCase=T_,G.last=jr,G.lastIndexOf=nm,G.lowerCase=Zh,G.lowerFirst=eM,G.lt=GE,G.lte=y_,G.max=nee,G.maxBy=see,G.mean=ree,G.meanBy=oee,G.min=aee,G.minBy=lee,G.stubArray=rM,G.stubFalse=oM,G.stubObject=GJ,G.stubString=KJ,G.stubTrue=YJ,G.multiply=cee,G.nth=dE,G.noConflict=Ve,G.noop=ft,G.now=Zb,G.pad=rT,G.padEnd=D_,G.padStart=tM,G.parseInt=oT,G.random=lS,G.reduce=TE,G.reduceRight=DE,G.repeat=dv,G.replace=aT,G.result=Q4,G.round=uee,G.runInContext=_e,G.sample=NE,G.size=$y,G.snakeCase=iM,G.some=D4,G.sortedIndex=Nn,G.sortedIndexBy=xi,G.sortedIndexOf=Pi,G.sortedLastIndex=fn,G.sortedLastIndexBy=Sa,G.sortedLastIndexOf=Hh,G.startCase=gv,G.startsWith=lT,G.subtract=hee,G.sum=dee,G.sumBy=fee,G.template=N_,G.times=ZJ,G.toFinite=zc,G.toInteger=Xt,G.toLength=Uc,G.toLower=cS,G.toNumber=hl,G.toSafeInteger=gm,G.toString=nn,G.toUpper=mv,G.trim=cT,G.trimEnd=nM,G.trimStart=pv,G.truncate=u,G.unescape=f,G.uniqueId=QJ,G.upperCase=m,G.upperFirst=w,G.each=SE,G.eachRight=qy,G.first=Nu,Ce(G,(function(){var p={};return $r(G,function(v,k){tn.call(G.prototype,k)||(p[k]=v)}),p})(),{chain:!1}),G.VERSION=i,Ja(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){G[p].placeholder=G}),Ja(["drop","take"],function(p,v){pi.prototype[p]=function(k){k=k===t?1:Pn(Xt(k),0);var R=this.__filtered__&&!v?new pi(this):this.clone();return R.__filtered__?R.__takeCount__=Yn(k,R.__takeCount__):R.__views__.push({size:Yn(k,ae),type:p+(R.__dir__<0?"Right":"")}),R},pi.prototype[p+"Right"]=function(k){return this.reverse()[p](k).reverse()}}),Ja(["filter","map","takeWhile"],function(p,v){var k=v+1,R=k==ee||k==$;pi.prototype[p]=function(q){var J=this.clone();return J.__iteratees__.push({iteratee:Nt(q,3),type:k}),J.__filtered__=J.__filtered__||R,J}}),Ja(["head","last"],function(p,v){var k="take"+(v?"Right":"");pi.prototype[p]=function(){return this[k](1).value()[0]}}),Ja(["initial","tail"],function(p,v){var k="drop"+(v?"":"Right");pi.prototype[p]=function(){return this.__filtered__?new pi(this):this[k](1)}}),pi.prototype.compact=function(){return this.filter(Se)},pi.prototype.find=function(p){return this.filter(p).head()},pi.prototype.findLast=function(p){return this.reverse().find(p)},pi.prototype.invokeMap=li(function(p,v){return typeof p=="function"?new pi(this):this.map(function(k){return gf(k,p,v)})}),pi.prototype.reject=function(p){return this.filter(w_(Nt(p)))},pi.prototype.slice=function(p,v){p=Xt(p);var k=this;return k.__filtered__&&(p>0||v<0)?new pi(k):(p<0?k=k.takeRight(-p):p&&(k=k.drop(p)),v!==t&&(v=Xt(v),k=v<0?k.dropRight(-v):k.take(v-p)),k)},pi.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},pi.prototype.toArray=function(){return this.take(ae)},$r(pi.prototype,function(p,v){var k=/^(?:filter|find|map|reject)|While$/.test(v),R=/^(?:head|last)$/.test(v),q=G[R?"take"+(v=="last"?"Right":""):v],J=R||/^find/.test(v);q&&(G.prototype[v]=function(){var re=this.__wrapped__,de=R?[1]:arguments,ve=re instanceof pi,He=de[0],ze=ve||Ut(re),qe=function(Ii){var zi=q.apply(G,_u([Ii],de));return R&&ut?zi[0]:zi};ze&&k&&typeof He=="function"&&He.length!=1&&(ve=ze=!1);var ut=this.__chain__,St=!!this.__actions__.length,Wt=J&&!ut,bi=ve&&!St;if(!J&&ze){re=bi?re:new pi(this);var zt=p.apply(re,de);return zt.__actions__.push({func:Gr,args:[qe],thisArg:t}),new Po(zt,ut)}return Wt&&bi?p.apply(this,de):(zt=this.thru(qe),Wt?R?zt.value()[0]:zt.value():zt)})}),Ja(["pop","push","shift","sort","splice","unshift"],function(p){var v=lb[p],k=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",R=/^(?:pop|shift)$/.test(p);G.prototype[p]=function(){var q=arguments;if(R&&!this.__chain__){var J=this.value();return v.apply(Ut(J)?J:[],q)}return this[k](function(re){return v.apply(Ut(re)?re:[],q)})}}),$r(pi.prototype,function(p,v){var k=G[v];if(k){var R=k.name+"";tn.call(sl,R)||(sl[R]=[]),sl[R].push({name:v,func:k})}}),sl[ps(t,E).name]=[{name:"wrapper",func:t}],pi.prototype.clone=Pp,pi.prototype.reverse=db,pi.prototype.value=cf,G.prototype.at=_E,G.prototype.chain=La,G.prototype.commit=bE,G.prototype.next=vE,G.prototype.plant=qh,G.prototype.reverse=Gb,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Wy,G.prototype.first=G.prototype.head,rf&&(G.prototype[rf]=k4),G}),Th=Vg();On?((On.exports=Th)._=Th,Li._=Th):oi._=Th}).call(G2e)})(JS,JS.exports)),JS.exports}var f$=K2e();const g$={async post(s,e){return await fetch("https://h2o-editor-oljn22.azurewebsites.net/account"+s,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)})}};async function bd(s){const e=await s.json();if(!s.ok||e.errors){const t=e.errors?.[0]?.message||e.errors?.[0]?.detail||`HTTP ${s.status} ${s.statusText}`;throw(t==="jwt expired"||t==="jwt must be provided")&&(Hd.logOut(),alert("Sorry, your session expired. Please log in again."),window.location.reload()),new Error(t)}return e}const Hd={isLoggedIn:function(){return this.getToken()!==null},getToken:function(){return sessionStorage.getItem("token")},signUp:async function(e,t,i){try{const n=await g$.post("/signup",{name:e,email:t,password:i}),r=await bd(n);sessionStorage.setItem("token",r.data.token),console.log(this.getToken()!==null?"SIGN UP SUCCESS":"SIGN UP FAIL")}catch(n){console.error("signUp:",n),alert("Sorry, could not sign up")}},logIn:async function(e,t){try{const i=await g$.post("/login",{email:e,password:t}),n=await bd(i);sessionStorage.setItem("token",n.data.token),console.log(this.getToken()!==null?"LOG IN SUCCESS":"LOG IN FAIL")}catch(i){console.error("LogIn:",i),alert(i.message)}},logOut:function(){sessionStorage.removeItem("token")}},Bm={async query(s,e=null){const t=e?{query:s,variables:e}:{query:s},i=Hd.getToken();return await fetch("https://h2o-editor-oljn22.azurewebsites.net/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:i?`Bearer ${i}`:""},body:JSON.stringify(t)})}},Y2e="query GetUser { user { _id name email documents { _id title code } } } ",Z2e="query GetDoc($id: ID!) { document(id: $id) { _id title content code } } ",X2e="query GetDocuments { documents { _id title code } } ",b6={getUser:Y2e,getDocument:Z2e,getDocuments:X2e},Q2e="mutation UpdateUser( $name: String! $email: String! $password: String ) { updateUser( name: $name email: $email password: $password ) } ",J2e="mutation DeleteUser { deleteUser } ",eke="mutation CreateDoc( $title: String! $content: JSON! $code: Boolean! ) { createDocument( title: $title content: $content code: $code ) } ",tke="mutation DeleteDoc($id: ID!) { deleteDocument(id: $id) } ",ike="mutation shareDoc( $docId: ID! $email: String! ) { shareDocument( docId: $docId email: $email ) }",zL={updateUser:Q2e,deleteUser:J2e,createDocument:eke,deleteDocument:tke,shareDocument:ike},v6={getUserData:async()=>{try{const s=await Bm.query(b6.getUser);return(await bd(s)).data.user}catch(s){console.error("Get user:",s),alert("Sorry, could not retrieve user")}},update:async s=>{const e={name:s.name,email:s.email,...s.password?{password:s.password}:{}};try{const t=await Bm.query(zL.updateUser,e);return(await bd(t)).data.updateUser}catch(t){return console.error("Update user:",t),alert(t.message),!1}},delete:async()=>{try{const s=await Bm.query(zL.deleteUser);return(await bd(s)).data.deleteUser}catch(s){console.error("Delete user:",s),alert("Sorry, could not delete user")}}},K_={getAll:async()=>{try{const s=await Bm.query(b6.getDocuments);return(await bd(s)).data.documents}catch(s){console.error("Get all docs:",s),alert("Sorry, could not retrieve documents")}},getOne:async s=>{try{const e=await Bm.query(b6.getDocument,{id:s});return(await bd(e)).data.document}catch(e){console.error("Get one doc:",e),alert("Sorry, could not retrieve document")}},create:async(s=!1)=>{const e={title:"Untitled",content:s?{code:""}:{ops:[{insert:`
`}]},code:s};try{const t=await Bm.query(zL.createDocument,e);return(await bd(t)).data.createDocument}catch(t){console.error("Create doc:",t),alert("Sorry, could not create document")}},delete:async s=>{try{const e=await Bm.query(zL.deleteDocument,{id:s});return(await bd(e)).data.deleteDocument}catch(e){console.error("Delete doc:",e),alert("Sorry, could not delete document")}},share:async(s,e)=>{try{const t=await Bm.query(zL.shareDocument,{docId:s,email:e}),i=await bd(t);alert(`An invitation has been sent to ${e}.`)}catch(t){console.error("Share doc:",t),alert("Sorry, could not share document")}}},RQ=Ye.createContext(),nke=({children:s})=>{const e=Ye.useRef(null),[t,i]=Ye.useState(Hd.isLoggedIn()),[n,r]=Ye.useState(null),[o,a]=Ye.useState([]),[l,c]=Ye.useState(null),[h,d]=Ye.useState(""),[g,_]=Ye.useState(""),[b,C]=Ye.useState(h),[S,E]=Ye.useState(null),[x,T]=Ye.useState(null),[N,A]=Ye.useState(""),P=Ye.useRef(null),O=Ye.useRef(null),V=Ye.useRef(null),U=Ye.useRef(null),[Y,B]=Ye.useState(!1),[F,W]=Ye.useState(!1),[ee,X]=Ye.useState([]),[$,te]=Ye.useState("");Ye.useEffect(()=>{P.current=l},[l]),Ye.useEffect(()=>{O&&(O.current=S)},[S]),Ye.useEffect(()=>{t?Dt():(Xe(),A("login"))},[t]),Ye.useEffect(()=>{const Et=new URLSearchParams(window.location.search).get("message");if(!Et)return;const jt={signup:()=>A("signup"),"invite-success":()=>alert("Invitation accepted!"),"invite-user-not-found":()=>{alert("You have to sign up before you can accept an invitation."),A("signup")},"invite-link-expired":()=>alert("The link has expired. You will have to be invited again."),"invite-error":()=>alert("Sorry, could not accept invitation due to an unexpected error.")};jt[Et]&&jt[Et](),window.history.replaceState({},"",window.location.pathname)},[]);const ce=async()=>{const tt=await v6.getUserData();if(tt){const{documents:Et,...jt}=tt;r(jt),a(Et)}},he=async()=>{const tt=await K_.getAll();a(tt)},j=async()=>{await K_.create(),he()},ae=async()=>{await K_.create(!0),he()},Te=async tt=>{confirm(`Are you sure you want to delete the document titled "${tt.title}"with _id "...${tt._id.slice(-5)}"?`)&&(await K_.delete(tt._id),tt._id===P.current?Dt():await he())},Le=async tt=>{const Et=prompt("Share this document, by entering an '@student.bth.se' address.");Et&&await K_.share(tt,Et)},Oe=async tt=>{try{const Et=await K_.getOne(tt);c(Et._id),d(Et.title||""),_(Et.content||""),T(Et._id),A("update"),e.current.emit("join-document-room",Et._id)}catch(Et){console.error("Load Document Error:",Et)}};Ye.useEffect(()=>{if(!t){e.current&&(e.current.disconnect(),e.current=null);return}const tt=QD("https://h2o-editor-oljn22.azurewebsites.net",{auth:{token:Hd.getToken()}});return e.current=tt,tt.on("connect",()=>{console.log("Socket connected:",tt.id),O.current=tt.id,E(tt.id)}),()=>{e.current&&(e.current.disconnect(),e.current=null)}},[t]),Ye.useEffect(()=>{V.current=f$.throttle(tt=>{P.current&&e.current.emit("update-document-title",{id:P.current,title:tt})},175),U.current=f$.throttle(tt=>{P.current&&e.current.emit("update-document-content",{id:P.current,delta:tt})},0)},[]);const Ne=tt=>{d(tt),V.current(tt)},Ke=tt=>{U.current(tt)},Dt=()=>{Xe(),ce(),A("view")},Xe=()=>{r(null),a(null),d(""),_(""),T(null),X([]),B(!1),W(!1)};return Ee.jsx(RQ.Provider,{value:{isLoggedIn:t,setIsLoggedIn:i,user:n,setUser:r,documents:o,setDocuments:a,currentDocId:l,setCurrentDocId:c,title:h,setTitle:d,content:g,setContent:_,mode:N,setMode:A,updateId:x,setUpdateId:T,socketRef:e,currentDocIdRef:P,emitTitleUpdate:V,emitContentUpdate:U,createDocument:j,createCodeModule:ae,deleteDocument:Te,shareDocument:Le,joinEditDocument:Oe,getAllDocuments:he,socketTitleChange:Ne,socketContentChange:Ke,switchToViewMode:Dt,resetState:Xe,clientId:S,setClientId:E,localTitle:b,setLocalTitle:C,chatDisplayed:Y,setChatDisplayed:B,commentsDisplayed:F,setCommentsDisplayed:W,chatMessages:ee,setChatMessages:X,clientIdRef:O,chatInputValue:$,setChatInputValue:te},children:s})},du=()=>Ye.useContext(RQ);function ske(){const{user:s,setMode:e}=du();if(s)return Ee.jsxs("div",{className:"user-panel",onClick:()=>e("profile"),children:[Ee.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",focusable:"false",className:"user-icon",children:Ee.jsx("path",{d:"M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm7 8a7 7 0 0 0-14 0h14z"})}),Ee.jsx("span",{className:"name",children:s.name})]})}function rke(){const{mode:s}=du(),e={backgroundColor:s==="code-edit"?"#e9baff":s==="update"?"#c6daea":"#f5f9fc"};return Ee.jsxs("header",{style:e,children:[Ee.jsxs("div",{className:"header-logo",children:[Ee.jsx("img",{src:Jxe,alt:"Logo",style:{width:49,height:49}}),Ee.jsx("h1",{className:"header-title",children:"docpool"})]}),Ee.jsx(ske,{})]})}const MQ=Ye.createContext(),oke=({children:s})=>{const[e,t]=Ye.useState(""),[i,n]=Ye.useState(""),[r,o]=Ye.useState(""),[a,l]=Ye.useState(null),[c,h]=Ye.useState(null),[d,g]=Ye.useState("view"),[_,b]=Ye.useState(null),[C,S]=Ye.useState(null),E=Ye.useRef(null),x=Ye.useRef(!1),{isLoggedIn:T,socketRef:N,setMode:A,getAllDocuments:P}=du();Ye.useEffect(()=>{E.current=C},[C]);const O=async B=>{try{const F=await K_.getOne(B);setCurrentDocId(F._id),setTitle(F.title||""),setContent(F.content||""),setUpdateId(F._id),A("code-edit")}catch(F){console.error("Load Code Document Error:",F)}},V=async B=>{if(!B.current)return;const F=B.current.getValue();console.log("codeToRun",F);const W={code:btoa(F)};try{const X=await(await fetch("https://execjs.emilfolino.se/code",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(W)})).json(),$=atob(X.data);console.log("Decoded output received back from API:",$),b($)}catch(ee){console.error("Execution failed:",ee),b(`Error: ${ee.message}`)}};Ye.useEffect(()=>{if(!T){N.current&&(N.current.disconnect(),N.current=null);return}},[T]);const U=()=>{Y(),P(),A("view")},Y=()=>{t(""),n(""),h(null),S(null),b(null)};return Ee.jsx(MQ.Provider,{value:{codeTitle:e,setCodeTitle:t,localCodeTitle:r,setLocalCodeTitle:o,codeContent:i,setCodeContent:n,codeOutput:_,setCodeOutput:b,codeMode:d,setCodeMode:g,codeUpdateId:c,setCodeUpdateId:h,currentCodeDocId:C,setCurrentCodeDocId:S,currentCodeDocIdRef:E,socketRef:N,openCodeEditor:O,switchToViewModeCode:U,resetStateCode:Y,clientCodeId:a,setClientId:l,runCodeApi:V,isRemoteChange:x},children:s})},TF=()=>Ye.useContext(MQ);function ake(){const{setIsLoggedIn:s,setMode:e}=du(),[t,i]=Ye.useState(""),[n,r]=Ye.useState(""),[o,a]=Ye.useState(!1);async function l(c){c.preventDefault(),await Hd.logIn(t,n),s(Hd.isLoggedIn())}return Ee.jsxs(Ee.Fragment,{children:[Ee.jsxs("form",{className:"login-form",onSubmit:l,children:[Ee.jsxs("h3",{children:["Log in to h",Ee.jsx("sub",{children:"2"}),"o docpool"]}),Ee.jsx("label",{htmlFor:"email",children:"Email"}),Ee.jsx("input",{type:"email",name:"email",title:"Enter the email of your account",id:"email",onChange:c=>i(c.target.value),required:!0}),Ee.jsx("label",{htmlFor:"password",children:"Password"}),Ee.jsxs("div",{className:"password-wrapper",children:[Ee.jsx("input",{type:o?"text":"password",name:"password",id:"password",title:"Enter the password of your acount",onChange:c=>r(c.target.value),required:!0}),Ee.jsx("span",{className:"toggle-visibility",onClick:()=>a(!o),children:o?"🔓":"🔒"})]}),Ee.jsx("button",{type:"submit",className:"login-form-button",children:"Log in"})]}),Ee.jsx("p",{children:Ee.jsxs("span",{className:"link",onClick:()=>e("signup"),children:["Sign up to h",Ee.jsx("sub",{children:"2"}),"o docpool"]})}),Ee.jsx("p",{children:Ee.jsx("span",{className:"link",onClick:()=>e("reset-password"),children:"Forgot your password?"})})]})}function lke(){const{setIsLoggedIn:s}=du(),[e,t]=Ye.useState(""),[i,n]=Ye.useState(""),[r,o]=Ye.useState(""),[a,l]=Ye.useState(!0);async function c(h){h.preventDefault(),await Hd.signUp(e,i,r),s(Hd.isLoggedIn())}return Ee.jsxs("form",{className:"signup-form",onSubmit:c,children:[Ee.jsxs("h3",{children:["Sign up to h",Ee.jsx("sub",{children:"2"}),"o docpool"]}),Ee.jsx("label",{htmlFor:"name",children:"Name"}),Ee.jsx("input",{type:"text",name:"name",id:"name",title:"Name should be between 3-30 characters long",minLength:"3",maxLength:"30",onChange:h=>t(h.target.value),required:!0}),Ee.jsx("label",{htmlFor:"email",children:"Email"}),Ee.jsx("input",{type:"email",name:"email",title:"Email should be a valid email address",id:"email",onChange:h=>n(h.target.value),required:!0}),Ee.jsx("label",{htmlFor:"password",children:"Password"}),Ee.jsxs("div",{className:"password-wrapper",children:[Ee.jsx("input",{type:a?"text":"password",name:"password",id:"password",pattern:"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,64}$",title:"Password should be 8–64 characters long and contain a mix of uppercase letters, lowercase letters, and numbers",onChange:h=>o(h.target.value),required:!0}),Ee.jsx("span",{className:"toggle-visibility",onClick:()=>l(!a),children:a?"🔓":"🔒"})]}),Ee.jsx("button",{type:"submit",className:"signup-form-button",children:"Sign up"})]})}function cke(){const{setMode:s}=du(),[e,t]=Ye.useState("");async function i(n){n.preventDefault(),alert("Not yet implemented"),s("login")}return Ee.jsx(Ee.Fragment,{children:Ee.jsxs("form",{className:"reset-form",onSubmit:i,children:[Ee.jsx("h3",{children:"Reset password"}),Ee.jsx("label",{htmlFor:"email",children:"Email"}),Ee.jsx("input",{type:"email",name:"email",title:"Enter the email of your account",id:"email",onChange:n=>t(n.target.value),required:!0}),Ee.jsx("button",{type:"submit",className:"reset-form-button",children:"Send a new password by email"})]})})}function uke(){const{user:s,setUser:e,switchToViewMode:t,setIsLoggedIn:i}=du(),[n,r]=Ye.useState(!0);async function o(c){c.preventDefault(),await v6.update(s)&&t()}function a(){Hd.logOut(),i(Hd.isLoggedIn())}async function l(){confirm(`Are you sure you want to delete the account of user '${s.name}'?`)&&(await v6.delete(),a())}return Ee.jsxs(Ee.Fragment,{children:[Ee.jsxs("form",{className:"profile-form",onSubmit:o,children:[Ee.jsx("h3",{children:"User profile"}),Ee.jsx("label",{htmlFor:"name",children:"Name"}),Ee.jsx("input",{type:"text",name:"name",id:"name",title:"Name should be between 3-30 characters long",minLength:"3",maxLength:"30",onChange:c=>e(h=>({...h,name:c.target.value})),value:s.name,required:!0}),Ee.jsx("label",{htmlFor:"email",children:"Email"}),Ee.jsx("input",{type:"email",name:"email",title:"Email should be a valid email address",id:"email",onChange:c=>e(h=>({...h,email:c.target.value})),value:s.email,required:!0}),Ee.jsx("label",{htmlFor:"password",children:"Change password"}),Ee.jsxs("div",{className:"password-wrapper",children:[Ee.jsx("input",{type:n?"text":"password",name:"password",id:"password",pattern:"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,64}$",title:"Password should be 8–64 characters long and contain a mix of uppercase letters, lowercase letters, and numbers",onChange:c=>e(h=>({...h,password:c.target.value}))}),Ee.jsx("span",{className:"toggle-visibility",onClick:()=>r(!n),children:n?"🔓":"🔒"})]}),Ee.jsx("button",{type:"submit",className:"profile-form-button",children:"Save"})]}),Ee.jsx("button",{type:"button",className:"logout-button",onClick:a,children:"Log out"}),Ee.jsx("button",{type:"button",className:"red-delete-button",onClick:l,children:"Delete account"})]})}function hke(){const{documents:s,joinEditDocument:e,deleteDocument:t,shareDocument:i}=du(),{openCodeEditor:n}=TF();return Ee.jsxs("div",{className:"saved-documents",children:[Ee.jsx("h2",{className:"saved-documents-h2",children:"Saved Documents"}),Ee.jsx("div",{className:"document-buttons-container",children:Array.isArray(s)&&s.map(r=>Ee.jsx("div",{className:"document-button-container",children:Ee.jsxs("button",{className:`
                            document-button
                            ${r.code?"code-button":""}
                        `,onClick:()=>r.code?n(r._id):e(r._id),children:[r.title,Ee.jsxs("span",{className:"id-button id-square",children:[" _id: ...",r._id.slice(-5)]}),Ee.jsx("span",{className:"delete-button",onClick:o=>{o.stopPropagation(),t(r)},children:"☒"}),Ee.jsx("span",{className:"share-button",onClick:o=>{o.stopPropagation(),i(r._id)},children:"✉"})]})},r._id))})]})}var OQ=typeof global=="object"&&global&&global.Object===Object&&global,dke=typeof self=="object"&&self&&self.Object===Object&&self,jd=OQ||dke||Function("return this")(),gp=jd.Symbol,PQ=Object.prototype,fke=PQ.hasOwnProperty,gke=PQ.toString,VS=gp?gp.toStringTag:void 0;function mke(s){var e=fke.call(s,VS),t=s[VS];try{s[VS]=void 0;var i=!0}catch{}var n=gke.call(s);return i&&(e?s[VS]=t:delete s[VS]),n}var pke=Object.prototype,_ke=pke.toString;function bke(s){return _ke.call(s)}var vke="[object Null]",wke="[object Undefined]",m$=gp?gp.toStringTag:void 0;function OC(s){return s==null?s===void 0?wke:vke:m$&&m$ in Object(s)?mke(s):bke(s)}function wg(s){return s!=null&&typeof s=="object"}var x0=Array.isArray;function Sp(s){var e=typeof s;return s!=null&&(e=="object"||e=="function")}function BQ(s){return s}var Cke="[object AsyncFunction]",yke="[object Function]",Ske="[object GeneratorFunction]",Lke="[object Proxy]";function DF(s){if(!Sp(s))return!1;var e=OC(s);return e==yke||e==Ske||e==Cke||e==Lke}var V5=jd["__core-js_shared__"],p$=(function(){var s=/[^.]+$/.exec(V5&&V5.keys&&V5.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function xke(s){return!!p$&&p$ in s}var kke=Function.prototype,Eke=kke.toString;function j0(s){if(s!=null){try{return Eke.call(s)}catch{}try{return s+""}catch{}}return""}var Tke=/[\\^$.*+?()[\]{}|]/g,Dke=/^\[object .+?Constructor\]$/,Nke=Function.prototype,Ike=Object.prototype,Ake=Nke.toString,Rke=Ike.hasOwnProperty,Mke=RegExp("^"+Ake.call(Rke).replace(Tke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Oke(s){if(!Sp(s)||xke(s))return!1;var e=DF(s)?Mke:Dke;return e.test(j0(s))}function Pke(s,e){return s?.[e]}function G0(s,e){var t=Pke(s,e);return Oke(t)?t:void 0}var w6=G0(jd,"WeakMap"),_$=Object.create,Bke=(function(){function s(){}return function(e){if(!Sp(e))return{};if(_$)return _$(e);s.prototype=e;var t=new s;return s.prototype=void 0,t}})();function Fke(s,e,t){switch(t.length){case 0:return s.call(e);case 1:return s.call(e,t[0]);case 2:return s.call(e,t[0],t[1]);case 3:return s.call(e,t[0],t[1],t[2])}return s.apply(e,t)}function Vke(s,e){var t=-1,i=s.length;for(e||(e=Array(i));++t<i;)e[t]=s[t];return e}var Hke=800,Wke=16,zke=Date.now;function Uke(s){var e=0,t=0;return function(){var i=zke(),n=Wke-(i-t);if(t=i,n>0){if(++e>=Hke)return arguments[0]}else e=0;return s.apply(void 0,arguments)}}function qke(s){return function(){return s}}var $I=(function(){try{var s=G0(Object,"defineProperty");return s({},"",{}),s}catch{}})(),$ke=$I?function(s,e){return $I(s,"toString",{configurable:!0,enumerable:!1,value:qke(e),writable:!0})}:BQ,jke=Uke($ke);function Gke(s,e){for(var t=-1,i=s==null?0:s.length;++t<i&&e(s[t],t,s)!==!1;);return s}var Kke=9007199254740991,Yke=/^(?:0|[1-9]\d*)$/;function FQ(s,e){var t=typeof s;return e=e??Kke,!!e&&(t=="number"||t!="symbol"&&Yke.test(s))&&s>-1&&s%1==0&&s<e}function NF(s,e,t){e=="__proto__"&&$I?$I(s,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):s[e]=t}function J2(s,e){return s===e||s!==s&&e!==e}var Zke=Object.prototype,Xke=Zke.hasOwnProperty;function VQ(s,e,t){var i=s[e];(!(Xke.call(s,e)&&J2(i,t))||t===void 0&&!(e in s))&&NF(s,e,t)}function Qke(s,e,t,i){var n=!t;t||(t={});for(var r=-1,o=e.length;++r<o;){var a=e[r],l=void 0;l===void 0&&(l=s[a]),n?NF(t,a,l):VQ(t,a,l)}return t}var b$=Math.max;function Jke(s,e,t){return e=b$(e===void 0?s.length-1:e,0),function(){for(var i=arguments,n=-1,r=b$(i.length-e,0),o=Array(r);++n<r;)o[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=t(o),Fke(s,this,a)}}function eEe(s,e){return jke(Jke(s,e,BQ),s+"")}var tEe=9007199254740991;function HQ(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=tEe}function ZR(s){return s!=null&&HQ(s.length)&&!DF(s)}function iEe(s,e,t){if(!Sp(t))return!1;var i=typeof e;return(i=="number"?ZR(t)&&FQ(e,t.length):i=="string"&&e in t)?J2(t[e],s):!1}function nEe(s){return eEe(function(e,t){var i=-1,n=t.length,r=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(r=s.length>3&&typeof r=="function"?(n--,r):void 0,o&&iEe(t[0],t[1],o)&&(r=n<3?void 0:r,n=1),e=Object(e);++i<n;){var a=t[i];a&&s(e,a,i,r)}return e})}var sEe=Object.prototype;function IF(s){var e=s&&s.constructor,t=typeof e=="function"&&e.prototype||sEe;return s===t}function rEe(s,e){for(var t=-1,i=Array(s);++t<s;)i[t]=e(t);return i}var oEe="[object Arguments]";function v$(s){return wg(s)&&OC(s)==oEe}var WQ=Object.prototype,aEe=WQ.hasOwnProperty,lEe=WQ.propertyIsEnumerable,C6=v$((function(){return arguments})())?v$:function(s){return wg(s)&&aEe.call(s,"callee")&&!lEe.call(s,"callee")};function cEe(){return!1}var zQ=typeof vc=="object"&&vc&&!vc.nodeType&&vc,w$=zQ&&typeof wc=="object"&&wc&&!wc.nodeType&&wc,uEe=w$&&w$.exports===zQ,C$=uEe?jd.Buffer:void 0,hEe=C$?C$.isBuffer:void 0,d2=hEe||cEe,dEe="[object Arguments]",fEe="[object Array]",gEe="[object Boolean]",mEe="[object Date]",pEe="[object Error]",_Ee="[object Function]",bEe="[object Map]",vEe="[object Number]",wEe="[object Object]",CEe="[object RegExp]",yEe="[object Set]",SEe="[object String]",LEe="[object WeakMap]",xEe="[object ArrayBuffer]",kEe="[object DataView]",EEe="[object Float32Array]",TEe="[object Float64Array]",DEe="[object Int8Array]",NEe="[object Int16Array]",IEe="[object Int32Array]",AEe="[object Uint8Array]",REe="[object Uint8ClampedArray]",MEe="[object Uint16Array]",OEe="[object Uint32Array]",cs={};cs[EEe]=cs[TEe]=cs[DEe]=cs[NEe]=cs[IEe]=cs[AEe]=cs[REe]=cs[MEe]=cs[OEe]=!0;cs[dEe]=cs[fEe]=cs[xEe]=cs[gEe]=cs[kEe]=cs[mEe]=cs[pEe]=cs[_Ee]=cs[bEe]=cs[vEe]=cs[wEe]=cs[CEe]=cs[yEe]=cs[SEe]=cs[LEe]=!1;function PEe(s){return wg(s)&&HQ(s.length)&&!!cs[OC(s)]}function AF(s){return function(e){return s(e)}}var UQ=typeof vc=="object"&&vc&&!vc.nodeType&&vc,UL=UQ&&typeof wc=="object"&&wc&&!wc.nodeType&&wc,BEe=UL&&UL.exports===UQ,H5=BEe&&OQ.process,vC=(function(){try{var s=UL&&UL.require&&UL.require("util").types;return s||H5&&H5.binding&&H5.binding("util")}catch{}})(),y$=vC&&vC.isTypedArray,RF=y$?AF(y$):PEe,FEe=Object.prototype,VEe=FEe.hasOwnProperty;function qQ(s,e){var t=x0(s),i=!t&&C6(s),n=!t&&!i&&d2(s),r=!t&&!i&&!n&&RF(s),o=t||i||n||r,a=o?rEe(s.length,String):[],l=a.length;for(var c in s)(e||VEe.call(s,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||FQ(c,l)))&&a.push(c);return a}function $Q(s,e){return function(t){return s(e(t))}}var HEe=$Q(Object.keys,Object),WEe=Object.prototype,zEe=WEe.hasOwnProperty;function UEe(s){if(!IF(s))return HEe(s);var e=[];for(var t in Object(s))zEe.call(s,t)&&t!="constructor"&&e.push(t);return e}function qEe(s){return ZR(s)?qQ(s):UEe(s)}function $Ee(s){var e=[];if(s!=null)for(var t in Object(s))e.push(t);return e}var jEe=Object.prototype,GEe=jEe.hasOwnProperty;function KEe(s){if(!Sp(s))return $Ee(s);var e=IF(s),t=[];for(var i in s)i=="constructor"&&(e||!GEe.call(s,i))||t.push(i);return t}function jQ(s){return ZR(s)?qQ(s,!0):KEe(s)}var f2=G0(Object,"create");function YEe(){this.__data__=f2?f2(null):{},this.size=0}function ZEe(s){var e=this.has(s)&&delete this.__data__[s];return this.size-=e?1:0,e}var XEe="__lodash_hash_undefined__",QEe=Object.prototype,JEe=QEe.hasOwnProperty;function eTe(s){var e=this.__data__;if(f2){var t=e[s];return t===XEe?void 0:t}return JEe.call(e,s)?e[s]:void 0}var tTe=Object.prototype,iTe=tTe.hasOwnProperty;function nTe(s){var e=this.__data__;return f2?e[s]!==void 0:iTe.call(e,s)}var sTe="__lodash_hash_undefined__";function rTe(s,e){var t=this.__data__;return this.size+=this.has(s)?0:1,t[s]=f2&&e===void 0?sTe:e,this}function k0(s){var e=-1,t=s==null?0:s.length;for(this.clear();++e<t;){var i=s[e];this.set(i[0],i[1])}}k0.prototype.clear=YEe;k0.prototype.delete=ZEe;k0.prototype.get=eTe;k0.prototype.has=nTe;k0.prototype.set=rTe;function oTe(){this.__data__=[],this.size=0}function XR(s,e){for(var t=s.length;t--;)if(J2(s[t][0],e))return t;return-1}var aTe=Array.prototype,lTe=aTe.splice;function cTe(s){var e=this.__data__,t=XR(e,s);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():lTe.call(e,t,1),--this.size,!0}function uTe(s){var e=this.__data__,t=XR(e,s);return t<0?void 0:e[t][1]}function hTe(s){return XR(this.__data__,s)>-1}function dTe(s,e){var t=this.__data__,i=XR(t,s);return i<0?(++this.size,t.push([s,e])):t[i][1]=e,this}function Dg(s){var e=-1,t=s==null?0:s.length;for(this.clear();++e<t;){var i=s[e];this.set(i[0],i[1])}}Dg.prototype.clear=oTe;Dg.prototype.delete=cTe;Dg.prototype.get=uTe;Dg.prototype.has=hTe;Dg.prototype.set=dTe;var g2=G0(jd,"Map");function fTe(){this.size=0,this.__data__={hash:new k0,map:new(g2||Dg),string:new k0}}function gTe(s){var e=typeof s;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?s!=="__proto__":s===null}function QR(s,e){var t=s.__data__;return gTe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function mTe(s){var e=QR(this,s).delete(s);return this.size-=e?1:0,e}function pTe(s){return QR(this,s).get(s)}function _Te(s){return QR(this,s).has(s)}function bTe(s,e){var t=QR(this,s),i=t.size;return t.set(s,e),this.size+=t.size==i?0:1,this}function K0(s){var e=-1,t=s==null?0:s.length;for(this.clear();++e<t;){var i=s[e];this.set(i[0],i[1])}}K0.prototype.clear=fTe;K0.prototype.delete=mTe;K0.prototype.get=pTe;K0.prototype.has=_Te;K0.prototype.set=bTe;function vTe(s,e){for(var t=-1,i=e.length,n=s.length;++t<i;)s[n+t]=e[t];return s}var GQ=$Q(Object.getPrototypeOf,Object),wTe="[object Object]",CTe=Function.prototype,yTe=Object.prototype,KQ=CTe.toString,STe=yTe.hasOwnProperty,LTe=KQ.call(Object);function xTe(s){if(!wg(s)||OC(s)!=wTe)return!1;var e=GQ(s);if(e===null)return!0;var t=STe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&KQ.call(t)==LTe}function kTe(){this.__data__=new Dg,this.size=0}function ETe(s){var e=this.__data__,t=e.delete(s);return this.size=e.size,t}function TTe(s){return this.__data__.get(s)}function DTe(s){return this.__data__.has(s)}var NTe=200;function ITe(s,e){var t=this.__data__;if(t instanceof Dg){var i=t.__data__;if(!g2||i.length<NTe-1)return i.push([s,e]),this.size=++t.size,this;t=this.__data__=new K0(i)}return t.set(s,e),this.size=t.size,this}function Dd(s){var e=this.__data__=new Dg(s);this.size=e.size}Dd.prototype.clear=kTe;Dd.prototype.delete=ETe;Dd.prototype.get=TTe;Dd.prototype.has=DTe;Dd.prototype.set=ITe;var YQ=typeof vc=="object"&&vc&&!vc.nodeType&&vc,S$=YQ&&typeof wc=="object"&&wc&&!wc.nodeType&&wc,ATe=S$&&S$.exports===YQ,L$=ATe?jd.Buffer:void 0,x$=L$?L$.allocUnsafe:void 0;function ZQ(s,e){if(e)return s.slice();var t=s.length,i=x$?x$(t):new s.constructor(t);return s.copy(i),i}function RTe(s,e){for(var t=-1,i=s==null?0:s.length,n=0,r=[];++t<i;){var o=s[t];e(o,t,s)&&(r[n++]=o)}return r}function MTe(){return[]}var OTe=Object.prototype,PTe=OTe.propertyIsEnumerable,k$=Object.getOwnPropertySymbols,BTe=k$?function(s){return s==null?[]:(s=Object(s),RTe(k$(s),function(e){return PTe.call(s,e)}))}:MTe;function FTe(s,e,t){var i=e(s);return x0(s)?i:vTe(i,t(s))}function y6(s){return FTe(s,qEe,BTe)}var S6=G0(jd,"DataView"),L6=G0(jd,"Promise"),x6=G0(jd,"Set"),E$="[object Map]",VTe="[object Object]",T$="[object Promise]",D$="[object Set]",N$="[object WeakMap]",I$="[object DataView]",HTe=j0(S6),WTe=j0(g2),zTe=j0(L6),UTe=j0(x6),qTe=j0(w6),Yu=OC;(S6&&Yu(new S6(new ArrayBuffer(1)))!=I$||g2&&Yu(new g2)!=E$||L6&&Yu(L6.resolve())!=T$||x6&&Yu(new x6)!=D$||w6&&Yu(new w6)!=N$)&&(Yu=function(s){var e=OC(s),t=e==VTe?s.constructor:void 0,i=t?j0(t):"";if(i)switch(i){case HTe:return I$;case WTe:return E$;case zTe:return T$;case UTe:return D$;case qTe:return N$}return e});var $Te=Object.prototype,jTe=$Te.hasOwnProperty;function GTe(s){var e=s.length,t=new s.constructor(e);return e&&typeof s[0]=="string"&&jTe.call(s,"index")&&(t.index=s.index,t.input=s.input),t}var jI=jd.Uint8Array;function MF(s){var e=new s.constructor(s.byteLength);return new jI(e).set(new jI(s)),e}function KTe(s,e){var t=MF(s.buffer);return new s.constructor(t,s.byteOffset,s.byteLength)}var YTe=/\w*$/;function ZTe(s){var e=new s.constructor(s.source,YTe.exec(s));return e.lastIndex=s.lastIndex,e}var A$=gp?gp.prototype:void 0,R$=A$?A$.valueOf:void 0;function XTe(s){return R$?Object(R$.call(s)):{}}function XQ(s,e){var t=e?MF(s.buffer):s.buffer;return new s.constructor(t,s.byteOffset,s.length)}var QTe="[object Boolean]",JTe="[object Date]",eDe="[object Map]",tDe="[object Number]",iDe="[object RegExp]",nDe="[object Set]",sDe="[object String]",rDe="[object Symbol]",oDe="[object ArrayBuffer]",aDe="[object DataView]",lDe="[object Float32Array]",cDe="[object Float64Array]",uDe="[object Int8Array]",hDe="[object Int16Array]",dDe="[object Int32Array]",fDe="[object Uint8Array]",gDe="[object Uint8ClampedArray]",mDe="[object Uint16Array]",pDe="[object Uint32Array]";function _De(s,e,t){var i=s.constructor;switch(e){case oDe:return MF(s);case QTe:case JTe:return new i(+s);case aDe:return KTe(s);case lDe:case cDe:case uDe:case hDe:case dDe:case fDe:case gDe:case mDe:case pDe:return XQ(s,t);case eDe:return new i;case tDe:case sDe:return new i(s);case iDe:return ZTe(s);case nDe:return new i;case rDe:return XTe(s)}}function QQ(s){return typeof s.constructor=="function"&&!IF(s)?Bke(GQ(s)):{}}var bDe="[object Map]";function vDe(s){return wg(s)&&Yu(s)==bDe}var M$=vC&&vC.isMap,wDe=M$?AF(M$):vDe,CDe="[object Set]";function yDe(s){return wg(s)&&Yu(s)==CDe}var O$=vC&&vC.isSet,SDe=O$?AF(O$):yDe,LDe=1,JQ="[object Arguments]",xDe="[object Array]",kDe="[object Boolean]",EDe="[object Date]",TDe="[object Error]",eJ="[object Function]",DDe="[object GeneratorFunction]",NDe="[object Map]",IDe="[object Number]",tJ="[object Object]",ADe="[object RegExp]",RDe="[object Set]",MDe="[object String]",ODe="[object Symbol]",PDe="[object WeakMap]",BDe="[object ArrayBuffer]",FDe="[object DataView]",VDe="[object Float32Array]",HDe="[object Float64Array]",WDe="[object Int8Array]",zDe="[object Int16Array]",UDe="[object Int32Array]",qDe="[object Uint8Array]",$De="[object Uint8ClampedArray]",jDe="[object Uint16Array]",GDe="[object Uint32Array]",Jn={};Jn[JQ]=Jn[xDe]=Jn[BDe]=Jn[FDe]=Jn[kDe]=Jn[EDe]=Jn[VDe]=Jn[HDe]=Jn[WDe]=Jn[zDe]=Jn[UDe]=Jn[NDe]=Jn[IDe]=Jn[tJ]=Jn[ADe]=Jn[RDe]=Jn[MDe]=Jn[ODe]=Jn[qDe]=Jn[$De]=Jn[jDe]=Jn[GDe]=!0;Jn[TDe]=Jn[eJ]=Jn[PDe]=!1;function JD(s,e,t,i,n,r){var o,a=e&LDe;if(o!==void 0)return o;if(!Sp(s))return s;var l=x0(s);if(l)o=GTe(s);else{var c=Yu(s),h=c==eJ||c==DDe;if(d2(s))return ZQ(s,a);if(c==tJ||c==JQ||h&&!n)o=h?{}:QQ(s);else{if(!Jn[c])return n?s:{};o=_De(s,c,a)}}r||(r=new Dd);var d=r.get(s);if(d)return d;r.set(s,o),SDe(s)?s.forEach(function(b){o.add(JD(b,e,t,b,s,r))}):wDe(s)&&s.forEach(function(b,C){o.set(C,JD(b,e,t,C,s,r))});var g=y6,_=l?void 0:g(s);return Gke(_||s,function(b,C){_&&(C=b,b=s[C]),VQ(o,C,JD(b,e,t,C,s,r))}),o}var KDe=1,YDe=4;function jw(s){return JD(s,KDe|YDe)}var ZDe="__lodash_hash_undefined__";function XDe(s){return this.__data__.set(s,ZDe),this}function QDe(s){return this.__data__.has(s)}function GI(s){var e=-1,t=s==null?0:s.length;for(this.__data__=new K0;++e<t;)this.add(s[e])}GI.prototype.add=GI.prototype.push=XDe;GI.prototype.has=QDe;function JDe(s,e){for(var t=-1,i=s==null?0:s.length;++t<i;)if(e(s[t],t,s))return!0;return!1}function eNe(s,e){return s.has(e)}var tNe=1,iNe=2;function iJ(s,e,t,i,n,r){var o=t&tNe,a=s.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(s),h=r.get(e);if(c&&h)return c==e&&h==s;var d=-1,g=!0,_=t&iNe?new GI:void 0;for(r.set(s,e),r.set(e,s);++d<a;){var b=s[d],C=e[d];if(i)var S=o?i(C,b,d,e,s,r):i(b,C,d,s,e,r);if(S!==void 0){if(S)continue;g=!1;break}if(_){if(!JDe(e,function(E,x){if(!eNe(_,x)&&(b===E||n(b,E,t,i,r)))return _.push(x)})){g=!1;break}}else if(!(b===C||n(b,C,t,i,r))){g=!1;break}}return r.delete(s),r.delete(e),g}function nNe(s){var e=-1,t=Array(s.size);return s.forEach(function(i,n){t[++e]=[n,i]}),t}function sNe(s){var e=-1,t=Array(s.size);return s.forEach(function(i){t[++e]=i}),t}var rNe=1,oNe=2,aNe="[object Boolean]",lNe="[object Date]",cNe="[object Error]",uNe="[object Map]",hNe="[object Number]",dNe="[object RegExp]",fNe="[object Set]",gNe="[object String]",mNe="[object Symbol]",pNe="[object ArrayBuffer]",_Ne="[object DataView]",P$=gp?gp.prototype:void 0,W5=P$?P$.valueOf:void 0;function bNe(s,e,t,i,n,r,o){switch(t){case _Ne:if(s.byteLength!=e.byteLength||s.byteOffset!=e.byteOffset)return!1;s=s.buffer,e=e.buffer;case pNe:return!(s.byteLength!=e.byteLength||!r(new jI(s),new jI(e)));case aNe:case lNe:case hNe:return J2(+s,+e);case cNe:return s.name==e.name&&s.message==e.message;case dNe:case gNe:return s==e+"";case uNe:var a=nNe;case fNe:var l=i&rNe;if(a||(a=sNe),s.size!=e.size&&!l)return!1;var c=o.get(s);if(c)return c==e;i|=oNe,o.set(s,e);var h=iJ(a(s),a(e),i,n,r,o);return o.delete(s),h;case mNe:if(W5)return W5.call(s)==W5.call(e)}return!1}var vNe=1,wNe=Object.prototype,CNe=wNe.hasOwnProperty;function yNe(s,e,t,i,n,r){var o=t&vNe,a=y6(s),l=a.length,c=y6(e),h=c.length;if(l!=h&&!o)return!1;for(var d=l;d--;){var g=a[d];if(!(o?g in e:CNe.call(e,g)))return!1}var _=r.get(s),b=r.get(e);if(_&&b)return _==e&&b==s;var C=!0;r.set(s,e),r.set(e,s);for(var S=o;++d<l;){g=a[d];var E=s[g],x=e[g];if(i)var T=o?i(x,E,g,e,s,r):i(E,x,g,s,e,r);if(!(T===void 0?E===x||n(E,x,t,i,r):T)){C=!1;break}S||(S=g=="constructor")}if(C&&!S){var N=s.constructor,A=e.constructor;N!=A&&"constructor"in s&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof A=="function"&&A instanceof A)&&(C=!1)}return r.delete(s),r.delete(e),C}var SNe=1,B$="[object Arguments]",F$="[object Array]",lD="[object Object]",LNe=Object.prototype,V$=LNe.hasOwnProperty;function xNe(s,e,t,i,n,r){var o=x0(s),a=x0(e),l=o?F$:Yu(s),c=a?F$:Yu(e);l=l==B$?lD:l,c=c==B$?lD:c;var h=l==lD,d=c==lD,g=l==c;if(g&&d2(s)){if(!d2(e))return!1;o=!0,h=!1}if(g&&!h)return r||(r=new Dd),o||RF(s)?iJ(s,e,t,i,n,r):bNe(s,e,l,t,i,n,r);if(!(t&SNe)){var _=h&&V$.call(s,"__wrapped__"),b=d&&V$.call(e,"__wrapped__");if(_||b){var C=_?s.value():s,S=b?e.value():e;return r||(r=new Dd),n(C,S,t,i,r)}}return g?(r||(r=new Dd),yNe(s,e,t,i,n,r)):!1}function nJ(s,e,t,i,n){return s===e?!0:s==null||e==null||!wg(s)&&!wg(e)?s!==s&&e!==e:xNe(s,e,t,i,nJ,n)}function kNe(s){return function(e,t,i){for(var n=-1,r=Object(e),o=i(e),a=o.length;a--;){var l=o[++n];if(t(r[l],l,r)===!1)break}return e}}var ENe=kNe();function k6(s,e,t){(t!==void 0&&!J2(s[e],t)||t===void 0&&!(e in s))&&NF(s,e,t)}function TNe(s){return wg(s)&&ZR(s)}function E6(s,e){if(!(e==="constructor"&&typeof s[e]=="function")&&e!="__proto__")return s[e]}function DNe(s){return Qke(s,jQ(s))}function NNe(s,e,t,i,n,r,o){var a=E6(s,t),l=E6(e,t),c=o.get(l);if(c){k6(s,t,c);return}var h=r?r(a,l,t+"",s,e,o):void 0,d=h===void 0;if(d){var g=x0(l),_=!g&&d2(l),b=!g&&!_&&RF(l);h=l,g||_||b?x0(a)?h=a:TNe(a)?h=Vke(a):_?(d=!1,h=ZQ(l,!0)):b?(d=!1,h=XQ(l,!0)):h=[]:xTe(l)||C6(l)?(h=a,C6(a)?h=DNe(a):(!Sp(a)||DF(a))&&(h=QQ(l))):d=!1}d&&(o.set(l,h),n(h,l,i,r,o),o.delete(l)),k6(s,t,h)}function sJ(s,e,t,i,n){s!==e&&ENe(e,function(r,o){if(n||(n=new Dd),Sp(r))NNe(s,e,o,t,sJ,i,n);else{var a=i?i(E6(s,o),r,o+"",s,e,n):void 0;a===void 0&&(a=r),k6(s,o,a)}},jQ)}function OF(s,e){return nJ(s,e)}var ep=nEe(function(s,e,t){sJ(s,e,t)}),Lt=(s=>(s[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY",s))(Lt||{});class Wd{constructor(e,t,i={}){this.attrName=e,this.keyName=t;const n=Lt.TYPE&Lt.ATTRIBUTE;this.scope=i.scope!=null?i.scope&Lt.LEVEL|n:Lt.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class Gw extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const rJ=class T6{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let i=null;try{i=e.parentNode}catch{return null}return this.find(i,t)}return null}create(e,t,i){const n=this.query(t);if(n==null)throw new Gw(`Unable to create ${t} blot`);const r=n,o=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:r.create(i),a=new r(e,o,i);return T6.blots.set(a.domNode,a),a}find(e,t=!1){return T6.find(e,t)}query(e,t=Lt.ANY){let i;return typeof e=="string"?i=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?i=this.types.text:typeof e=="number"?e&Lt.LEVEL&Lt.BLOCK?i=this.types.block:e&Lt.LEVEL&Lt.INLINE&&(i=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(n=>(i=this.classes[n],!!i)),i=i||this.tags[e.tagName]),i==null?null:"scope"in i&&t&Lt.LEVEL&i.scope&&t&Lt.TYPE&i.scope?i:null}register(...e){return e.map(t=>{const i="blotName"in t,n="attrName"in t;if(!i&&!n)throw new Gw("Invalid definition");if(i&&t.blotName==="abstract")throw new Gw("Cannot register abstract class");const r=i?t.blotName:n?t.attrName:void 0;return this.types[r]=t,n?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):i&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(o=>o.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(o=>{(this.tags[o]==null||t.className==null)&&(this.tags[o]=t)}))),t})}};rJ.blots=new WeakMap;let wC=rJ;function H$(s,e){return(s.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class INe extends Wd{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){H$(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(H$(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const mh=INe;function z5(s){const e=s.split("-"),t=e.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("");return e[0]+t}class ANe extends Wd{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[z5(this.keyName)]=t,!0):!1}remove(e){e.style[z5(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[z5(this.keyName)];return this.canAdd(e,t)?t:""}}const Lp=ANe;class RNe{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=wC.find(this.domNode);if(e==null)return;const t=Wd.keys(this.domNode),i=mh.keys(this.domNode),n=Lp.keys(this.domNode);t.concat(i).concat(n).forEach(r=>{const o=e.scroll.query(r,Lt.ATTRIBUTE);o instanceof Wd&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(t=>{const i=this.attributes[t].value(this.domNode);e.format(t,i)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const JR=RNe,oJ=class{constructor(e,t){this.scroll=e,this.domNode=t,wC.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Gw("Blot definition missing tagName");let t,i;return Array.isArray(this.tagName)?(typeof e=="string"?(i=e.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):typeof e=="number"&&(i=e),typeof i=="number"?t=document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?t=document.createElement(i):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),wC.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,i,n){const r=this.isolate(e,t);if(this.scroll.query(i,Lt.BLOT)!=null&&n)r.wrap(i,n);else if(this.scroll.query(i,Lt.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);r.wrap(o),o.format(i,n)}}insertAt(e,t,i){const n=i==null?this.scroll.create("text",t):this.scroll.create(t,i),r=this.split(e);this.parent.insertBefore(n,r||void 0)}isolate(e,t){const i=this.split(e);if(i==null)throw new Error("Attempt to isolate at end");return i.split(t),i}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const i=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const i=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(i,this.next||void 0),typeof i.appendChild!="function")throw new Gw(`Cannot wrap ${e}`);return i.appendChild(this),i}};oJ.blotName="abstract";let aJ=oJ;const lJ=class extends aJ{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};lJ.scope=Lt.INLINE_BLOT;let MNe=lJ;const Jo=MNe;class ONe{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let i=t();for(;i&&e>0;)e-=1,i=t();return i}contains(e){const t=this.iterator();let i=t();for(;i;){if(i===e)return!0;i=t()}return!1}indexOf(e){const t=this.iterator();let i=t(),n=0;for(;i;){if(i===e)return n;n+=1,i=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,i=this.head;for(;i!=null;){if(i===e)return t;t+=i.length(),i=i.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const i=this.iterator();let n=i();for(;n;){const r=n.length();if(e<r||t&&e===r&&(n.next==null||n.next.length()!==0))return[n,e];e-=r,n=i()}return[null,0]}forEach(e){const t=this.iterator();let i=t();for(;i;)e(i),i=t()}forEachAt(e,t,i){if(t<=0)return;const[n,r]=this.find(e);let o=e-r;const a=this.iterator(n);let l=a();for(;l&&o<e+t;){const c=l.length();e>o?i(l,e-o,Math.min(t,o+c-e)):i(l,0,Math.min(c,e+t-o)),o+=c,l=a()}}map(e){return this.reduce((t,i)=>(t.push(e(i)),t),[])}reduce(e,t){const i=this.iterator();let n=i();for(;n;)t=e(t,n),n=i();return t}}function W$(s,e){const t=e.find(s);if(t)return t;try{return e.create(s)}catch{const i=e.create(Lt.INLINE);return Array.from(s.childNodes).forEach(n=>{i.domNode.appendChild(n)}),s.parentNode&&s.parentNode.replaceChild(i.domNode,s),i.attach(),i}}const cJ=class km extends aJ{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,km.uiClass&&this.uiNode.classList.add(km.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new ONe,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=W$(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof Gw)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(i,n,r)=>{i.deleteAt(n,r)})}descendant(e,t=0){const[i,n]=this.children.find(t);return e.blotName==null&&e(i)||e.blotName!=null&&i instanceof e?[i,n]:i instanceof km?i.descendant(e,n):[null,-1]}descendants(e,t=0,i=Number.MAX_VALUE){let n=[],r=i;return this.children.forEachAt(t,i,(o,a,l)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&n.push(o),o instanceof km&&(n=n.concat(o.descendants(e,a,r))),r-=l}),n}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(i=>t instanceof i)||(t.statics.scope===Lt.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof km?t.unwrap():t.remove())})}formatAt(e,t,i,n){this.children.forEachAt(e,t,(r,o,a)=>{r.formatAt(o,a,i,n)})}insertAt(e,t,i){const[n,r]=this.children.find(e);if(n)n.insertAt(r,t,i);else{const o=i==null?this.scroll.create("text",t):this.scroll.create(t,i);this.appendChild(o)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let i=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(i=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(e.domNode,i),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(i=>{e.insertBefore(i,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[i,n]=this.children.find(e,t),r=[[this,e]];return i instanceof km?r.concat(i.path(n,t)):(i!=null&&r.push([i,n]),r)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const i=typeof e=="string"?this.scroll.create(e,t):e;return i instanceof km&&this.moveChildren(i),super.replaceWith(i)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(e,this.length(),(n,r,o)=>{const a=n.split(r,t);a!=null&&i.appendChild(a)}),i}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const i=[],n=[];e.forEach(r=>{r.target===this.domNode&&r.type==="childList"&&(i.push(...r.addedNodes),n.push(...r.removedNodes))}),n.forEach(r=>{if(r.parentNode!=null&&r.tagName!=="IFRAME"&&document.body.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(r);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),i.filter(r=>r.parentNode===this.domNode&&r!==this.uiNode).sort((r,o)=>r===o?0:r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(r=>{let o=null;r.nextSibling!=null&&(o=this.scroll.find(r.nextSibling));const a=W$(r,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};cJ.uiClass="";let PNe=cJ;const sh=PNe;function BNe(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(s[t]!==e[t])return!1;return!0}const Pv=class Bv extends sh{static create(e){return super.create(e)}static formats(e,t){const i=t.query(Bv.blotName);if(!(i!=null&&e.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new JR(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(i=>{i instanceof Bv||(i=i.wrap(Bv.blotName,!0)),this.attributes.copy(i)}),this.unwrap();else{const i=this.scroll.query(e,Lt.INLINE);if(i==null)return;i instanceof Wd?this.attributes.attribute(i,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,i,n){this.formats()[i]!=null||this.scroll.query(i,Lt.ATTRIBUTE)?this.isolate(e,t).format(i,n):super.formatAt(e,t,i,n)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const i=this.next;i instanceof Bv&&i.prev===this&&BNe(t,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(e,t){const i=super.replaceWith(e,t);return this.attributes.copy(i),i}update(e,t){super.update(e,t),e.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}wrap(e,t){const i=super.wrap(e,t);return i instanceof Bv&&this.attributes.move(i),i}};Pv.allowedChildren=[Pv,Jo],Pv.blotName="inline",Pv.scope=Lt.INLINE_BLOT,Pv.tagName="SPAN";let FNe=Pv;const PF=FNe,Fv=class D6 extends sh{static create(e){return super.create(e)}static formats(e,t){const i=t.query(D6.blotName);if(!(i!=null&&e.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new JR(this.domNode)}format(e,t){const i=this.scroll.query(e,Lt.BLOCK);i!=null&&(i instanceof Wd?this.attributes.attribute(i,t):e===this.statics.blotName&&!t?this.replaceWith(D6.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,i,n){this.scroll.query(i,Lt.BLOCK)!=null?this.format(i,n):super.formatAt(e,t,i,n)}insertAt(e,t,i){if(i==null||this.scroll.query(t,Lt.INLINE)!=null)super.insertAt(e,t,i);else{const n=this.split(e);if(n!=null){const r=this.scroll.create(t,i);n.parent.insertBefore(r,n)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const i=super.replaceWith(e,t);return this.attributes.copy(i),i}update(e,t){super.update(e,t),e.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}};Fv.blotName="block",Fv.scope=Lt.BLOCK_BLOT,Fv.tagName="P",Fv.allowedChildren=[PF,Fv,Jo];let VNe=Fv;const m2=VNe,N6=class extends sh{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,i,n){super.formatAt(e,t,i,n),this.enforceAllowedChildren()}insertAt(e,t,i){super.insertAt(e,t,i),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};N6.blotName="container",N6.scope=Lt.BLOCK_BLOT;let HNe=N6;const e4=HNe;class WNe extends Jo{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,i,n){e===0&&t===this.length()?this.format(i,n):super.formatAt(e,t,i,n)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const xc=WNe,zNe={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},UNe=100,Vv=class extends sh{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(i=>{this.update(i)}),this.observer.observe(this.domNode,zNe),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const i=this.registry.find(e,t);return i?i.scroll===this?i:t?this.find(i.scroll.domNode.parentNode,!0):null:null}query(e,t=Lt.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(i=>{i.remove()}):super.deleteAt(e,t)}formatAt(e,t,i,n){this.update(),super.formatAt(e,t,i,n)}insertAt(e,t,i){this.update(),super.insertAt(e,t,i)}optimize(e=[],t={}){super.optimize(t);const i=t.mutationsMap||new WeakMap;let n=Array.from(this.observer.takeRecords());for(;n.length>0;)e.push(n.pop());const r=(l,c=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(i.has(l.domNode)||i.set(l.domNode,[]),c&&r(l.parent))},o=l=>{i.has(l.domNode)&&(l instanceof sh&&l.children.forEach(o),i.delete(l.domNode),l.optimize(t))};let a=e;for(let l=0;a.length>0;l+=1){if(l>=UNe)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(c=>{const h=this.find(c.target,!0);h!=null&&(h.domNode===c.target&&(c.type==="childList"?(r(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(d=>{const g=this.find(d,!1);r(g,!1),g instanceof sh&&g.children.forEach(_=>{r(_,!1)})})):c.type==="attributes"&&r(h.prev)),r(h))}),this.children.forEach(o),a=Array.from(this.observer.takeRecords()),n=a.slice();n.length>0;)e.push(n.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const i=new WeakMap;e.map(n=>{const r=this.find(n.target,!0);return r==null?null:i.has(r.domNode)?(i.get(r.domNode).push(n),null):(i.set(r.domNode,[n]),r)}).forEach(n=>{n!=null&&n!==this&&i.has(n.domNode)&&n.update(i.get(n.domNode)||[],t)}),t.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),t),this.optimize(e,t)}};Vv.blotName="scroll",Vv.defaultChild=m2,Vv.allowedChildren=[m2,e4],Vv.scope=Lt.BLOCK_BLOT,Vv.tagName="DIV";let qNe=Vv;const BF=qNe,I6=class uJ extends Jo{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,i){i==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,i)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof uJ&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const i=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(e,t){e.some(i=>i.type==="characterData"&&i.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};I6.blotName="text",I6.scope=Lt.INLINE_BLOT;let $Ne=I6;const KI=$Ne,jNe=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Wd,AttributorStore:JR,BlockBlot:m2,ClassAttributor:mh,ContainerBlot:e4,EmbedBlot:xc,InlineBlot:PF,LeafBlot:Jo,ParentBlot:sh,Registry:wC,Scope:Lt,ScrollBlot:BF,StyleAttributor:Lp,TextBlot:KI},Symbol.toStringTag,{value:"Module"}));var cD={exports:{}},U5,z$;function GNe(){if(z$)return U5;z$=1;var s=-1,e=1,t=0;function i(B,F,W,ee,X){if(B===F)return B?[[t,B]]:[];if(W!=null){var $=U(B,F,W);if($)return $}var te=a(B,F),ce=B.substring(0,te);B=B.substring(te),F=F.substring(te),te=c(B,F);var he=B.substring(B.length-te);B=B.substring(0,B.length-te),F=F.substring(0,F.length-te);var j=n(B,F);return ce&&j.unshift([t,ce]),he&&j.push([t,he]),x(j,X),ee&&d(j),j}function n(B,F){var W;if(!B)return[[e,F]];if(!F)return[[s,B]];var ee=B.length>F.length?B:F,X=B.length>F.length?F:B,$=ee.indexOf(X);if($!==-1)return W=[[e,ee.substring(0,$)],[t,X],[e,ee.substring($+X.length)]],B.length>F.length&&(W[0][0]=W[2][0]=s),W;if(X.length===1)return[[s,B],[e,F]];var te=h(B,F);if(te){var ce=te[0],he=te[1],j=te[2],ae=te[3],Te=te[4],Le=i(ce,j),Oe=i(he,ae);return Le.concat([[t,Te]],Oe)}return r(B,F)}function r(B,F){for(var W=B.length,ee=F.length,X=Math.ceil((W+ee)/2),$=X,te=2*X,ce=new Array(te),he=new Array(te),j=0;j<te;j++)ce[j]=-1,he[j]=-1;ce[$+1]=0,he[$+1]=0;for(var ae=W-ee,Te=ae%2!==0,Le=0,Oe=0,Ne=0,Ke=0,Dt=0;Dt<X;Dt++){for(var Xe=-Dt+Le;Xe<=Dt-Oe;Xe+=2){var tt=$+Xe,Et;Xe===-Dt||Xe!==Dt&&ce[tt-1]<ce[tt+1]?Et=ce[tt+1]:Et=ce[tt-1]+1;for(var jt=Et-Xe;Et<W&&jt<ee&&B.charAt(Et)===F.charAt(jt);)Et++,jt++;if(ce[tt]=Et,Et>W)Oe+=2;else if(jt>ee)Le+=2;else if(Te){var ii=$+ae-Xe;if(ii>=0&&ii<te&&he[ii]!==-1){var Ci=W-he[ii];if(Et>=Ci)return o(B,F,Et,jt)}}}for(var ri=-Dt+Ne;ri<=Dt-Ke;ri+=2){var ii=$+ri,Ci;ri===-Dt||ri!==Dt&&he[ii-1]<he[ii+1]?Ci=he[ii+1]:Ci=he[ii-1]+1;for(var Tn=Ci-ri;Ci<W&&Tn<ee&&B.charAt(W-Ci-1)===F.charAt(ee-Tn-1);)Ci++,Tn++;if(he[ii]=Ci,Ci>W)Ke+=2;else if(Tn>ee)Ne+=2;else if(!Te){var tt=$+ae-ri;if(tt>=0&&tt<te&&ce[tt]!==-1){var Et=ce[tt],jt=$+Et-tt;if(Ci=W-Ci,Et>=Ci)return o(B,F,Et,jt)}}}}return[[s,B],[e,F]]}function o(B,F,W,ee){var X=B.substring(0,W),$=F.substring(0,ee),te=B.substring(W),ce=F.substring(ee),he=i(X,$),j=i(te,ce);return he.concat(j)}function a(B,F){if(!B||!F||B.charAt(0)!==F.charAt(0))return 0;for(var W=0,ee=Math.min(B.length,F.length),X=ee,$=0;W<X;)B.substring($,X)==F.substring($,X)?(W=X,$=W):ee=X,X=Math.floor((ee-W)/2+W);return T(B.charCodeAt(X-1))&&X--,X}function l(B,F){var W=B.length,ee=F.length;if(W==0||ee==0)return 0;W>ee?B=B.substring(W-ee):W<ee&&(F=F.substring(0,W));var X=Math.min(W,ee);if(B==F)return X;for(var $=0,te=1;;){var ce=B.substring(X-te),he=F.indexOf(ce);if(he==-1)return $;te+=he,(he==0||B.substring(X-te)==F.substring(0,te))&&($=te,te++)}}function c(B,F){if(!B||!F||B.slice(-1)!==F.slice(-1))return 0;for(var W=0,ee=Math.min(B.length,F.length),X=ee,$=0;W<X;)B.substring(B.length-X,B.length-$)==F.substring(F.length-X,F.length-$)?(W=X,$=W):ee=X,X=Math.floor((ee-W)/2+W);return N(B.charCodeAt(B.length-X))&&X--,X}function h(B,F){var W=B.length>F.length?B:F,ee=B.length>F.length?F:B;if(W.length<4||ee.length*2<W.length)return null;function X(Oe,Ne,Ke){for(var Dt=Oe.substring(Ke,Ke+Math.floor(Oe.length/4)),Xe=-1,tt="",Et,jt,ii,Ci;(Xe=Ne.indexOf(Dt,Xe+1))!==-1;){var ri=a(Oe.substring(Ke),Ne.substring(Xe)),Tn=c(Oe.substring(0,Ke),Ne.substring(0,Xe));tt.length<Tn+ri&&(tt=Ne.substring(Xe-Tn,Xe)+Ne.substring(Xe,Xe+ri),Et=Oe.substring(0,Ke-Tn),jt=Oe.substring(Ke+ri),ii=Ne.substring(0,Xe-Tn),Ci=Ne.substring(Xe+ri))}return tt.length*2>=Oe.length?[Et,jt,ii,Ci,tt]:null}var $=X(W,ee,Math.ceil(W.length/4)),te=X(W,ee,Math.ceil(W.length/2)),ce;if(!$&&!te)return null;te?$?ce=$[4].length>te[4].length?$:te:ce=te:ce=$;var he,j,ae,Te;B.length>F.length?(he=ce[0],j=ce[1],ae=ce[2],Te=ce[3]):(ae=ce[0],Te=ce[1],he=ce[2],j=ce[3]);var Le=ce[4];return[he,j,ae,Te,Le]}function d(B){for(var F=!1,W=[],ee=0,X=null,$=0,te=0,ce=0,he=0,j=0;$<B.length;)B[$][0]==t?(W[ee++]=$,te=he,ce=j,he=0,j=0,X=B[$][1]):(B[$][0]==e?he+=B[$][1].length:j+=B[$][1].length,X&&X.length<=Math.max(te,ce)&&X.length<=Math.max(he,j)&&(B.splice(W[ee-1],0,[s,X]),B[W[ee-1]+1][0]=e,ee--,ee--,$=ee>0?W[ee-1]:-1,te=0,ce=0,he=0,j=0,X=null,F=!0)),$++;for(F&&x(B),E(B),$=1;$<B.length;){if(B[$-1][0]==s&&B[$][0]==e){var ae=B[$-1][1],Te=B[$][1],Le=l(ae,Te),Oe=l(Te,ae);Le>=Oe?(Le>=ae.length/2||Le>=Te.length/2)&&(B.splice($,0,[t,Te.substring(0,Le)]),B[$-1][1]=ae.substring(0,ae.length-Le),B[$+1][1]=Te.substring(Le),$++):(Oe>=ae.length/2||Oe>=Te.length/2)&&(B.splice($,0,[t,ae.substring(0,Oe)]),B[$-1][0]=e,B[$-1][1]=Te.substring(0,Te.length-Oe),B[$+1][0]=s,B[$+1][1]=ae.substring(Oe),$++),$++}$++}}var g=/[^a-zA-Z0-9]/,_=/\s/,b=/[\r\n]/,C=/\n\r?\n$/,S=/^\r?\n\r?\n/;function E(B){function F(Oe,Ne){if(!Oe||!Ne)return 6;var Ke=Oe.charAt(Oe.length-1),Dt=Ne.charAt(0),Xe=Ke.match(g),tt=Dt.match(g),Et=Xe&&Ke.match(_),jt=tt&&Dt.match(_),ii=Et&&Ke.match(b),Ci=jt&&Dt.match(b),ri=ii&&Oe.match(C),Tn=Ci&&Ne.match(S);return ri||Tn?5:ii||Ci?4:Xe&&!Et&&jt?3:Et||jt?2:Xe||tt?1:0}for(var W=1;W<B.length-1;){if(B[W-1][0]==t&&B[W+1][0]==t){var ee=B[W-1][1],X=B[W][1],$=B[W+1][1],te=c(ee,X);if(te){var ce=X.substring(X.length-te);ee=ee.substring(0,ee.length-te),X=ce+X.substring(0,X.length-te),$=ce+$}for(var he=ee,j=X,ae=$,Te=F(ee,X)+F(X,$);X.charAt(0)===$.charAt(0);){ee+=X.charAt(0),X=X.substring(1)+$.charAt(0),$=$.substring(1);var Le=F(ee,X)+F(X,$);Le>=Te&&(Te=Le,he=ee,j=X,ae=$)}B[W-1][1]!=he&&(he?B[W-1][1]=he:(B.splice(W-1,1),W--),B[W][1]=j,ae?B[W+1][1]=ae:(B.splice(W+1,1),W--))}W++}}function x(B,F){B.push([t,""]);for(var W=0,ee=0,X=0,$="",te="",ce;W<B.length;){if(W<B.length-1&&!B[W][1]){B.splice(W,1);continue}switch(B[W][0]){case e:X++,te+=B[W][1],W++;break;case s:ee++,$+=B[W][1],W++;break;case t:var he=W-X-ee-1;if(F){if(he>=0&&P(B[he][1])){var j=B[he][1].slice(-1);if(B[he][1]=B[he][1].slice(0,-1),$=j+$,te=j+te,!B[he][1]){B.splice(he,1),W--;var ae=he-1;B[ae]&&B[ae][0]===e&&(X++,te=B[ae][1]+te,ae--),B[ae]&&B[ae][0]===s&&(ee++,$=B[ae][1]+$,ae--),he=ae}}if(A(B[W][1])){var j=B[W][1].charAt(0);B[W][1]=B[W][1].slice(1),$+=j,te+=j}}if(W<B.length-1&&!B[W][1]){B.splice(W,1);break}if($.length>0||te.length>0){$.length>0&&te.length>0&&(ce=a(te,$),ce!==0&&(he>=0?B[he][1]+=te.substring(0,ce):(B.splice(0,0,[t,te.substring(0,ce)]),W++),te=te.substring(ce),$=$.substring(ce)),ce=c(te,$),ce!==0&&(B[W][1]=te.substring(te.length-ce)+B[W][1],te=te.substring(0,te.length-ce),$=$.substring(0,$.length-ce)));var Te=X+ee;$.length===0&&te.length===0?(B.splice(W-Te,Te),W=W-Te):$.length===0?(B.splice(W-Te,Te,[e,te]),W=W-Te+1):te.length===0?(B.splice(W-Te,Te,[s,$]),W=W-Te+1):(B.splice(W-Te,Te,[s,$],[e,te]),W=W-Te+2)}W!==0&&B[W-1][0]===t?(B[W-1][1]+=B[W][1],B.splice(W,1)):W++,X=0,ee=0,$="",te="";break}}B[B.length-1][1]===""&&B.pop();var Le=!1;for(W=1;W<B.length-1;)B[W-1][0]===t&&B[W+1][0]===t&&(B[W][1].substring(B[W][1].length-B[W-1][1].length)===B[W-1][1]?(B[W][1]=B[W-1][1]+B[W][1].substring(0,B[W][1].length-B[W-1][1].length),B[W+1][1]=B[W-1][1]+B[W+1][1],B.splice(W-1,1),Le=!0):B[W][1].substring(0,B[W+1][1].length)==B[W+1][1]&&(B[W-1][1]+=B[W+1][1],B[W][1]=B[W][1].substring(B[W+1][1].length)+B[W+1][1],B.splice(W+1,1),Le=!0)),W++;Le&&x(B,F)}function T(B){return B>=55296&&B<=56319}function N(B){return B>=56320&&B<=57343}function A(B){return N(B.charCodeAt(0))}function P(B){return T(B.charCodeAt(B.length-1))}function O(B){for(var F=[],W=0;W<B.length;W++)B[W][1].length>0&&F.push(B[W]);return F}function V(B,F,W,ee){return P(B)||A(ee)?null:O([[t,B],[s,F],[e,W],[t,ee]])}function U(B,F,W){var ee=typeof W=="number"?{index:W,length:0}:W.oldRange,X=typeof W=="number"?null:W.newRange,$=B.length,te=F.length;if(ee.length===0&&(X===null||X.length===0)){var ce=ee.index,he=B.slice(0,ce),j=B.slice(ce),ae=X?X.index:null;e:{var Te=ce+te-$;if(ae!==null&&ae!==Te||Te<0||Te>te)break e;var Le=F.slice(0,Te),Oe=F.slice(Te);if(Oe!==j)break e;var Ne=Math.min(ce,Te),Ke=he.slice(0,Ne),Dt=Le.slice(0,Ne);if(Ke!==Dt)break e;var Xe=he.slice(Ne),tt=Le.slice(Ne);return V(Ke,Xe,tt,j)}e:{if(ae!==null&&ae!==ce)break e;var Et=ce,Le=F.slice(0,Et),Oe=F.slice(Et);if(Le!==he)break e;var jt=Math.min($-Et,te-Et),ii=j.slice(j.length-jt),Ci=Oe.slice(Oe.length-jt);if(ii!==Ci)break e;var Xe=j.slice(0,j.length-jt),tt=Oe.slice(0,Oe.length-jt);return V(he,Xe,tt,ii)}}if(ee.length>0&&X&&X.length===0)e:{var Ke=B.slice(0,ee.index),ii=B.slice(ee.index+ee.length),Ne=Ke.length,jt=ii.length;if(te<Ne+jt)break e;var Dt=F.slice(0,Ne),Ci=F.slice(te-jt);if(Ke!==Dt||ii!==Ci)break e;var Xe=B.slice(Ne,$-jt),tt=F.slice(Ne,te-jt);return V(Ke,Xe,tt,ii)}return null}function Y(B,F,W,ee){return i(B,F,W,ee,!0)}return Y.INSERT=e,Y.DELETE=s,Y.EQUAL=t,U5=Y,U5}var eL={exports:{}};eL.exports;var U$;function hJ(){return U$||(U$=1,(function(s,e){var t=200,i="__lodash_hash_undefined__",n=9007199254740991,r="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",h="[object Function]",d="[object GeneratorFunction]",g="[object Map]",_="[object Number]",b="[object Object]",C="[object Promise]",S="[object RegExp]",E="[object Set]",x="[object String]",T="[object Symbol]",N="[object WeakMap]",A="[object ArrayBuffer]",P="[object DataView]",O="[object Float32Array]",V="[object Float64Array]",U="[object Int8Array]",Y="[object Int16Array]",B="[object Int32Array]",F="[object Uint8Array]",W="[object Uint8ClampedArray]",ee="[object Uint16Array]",X="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,te=/\w*$/,ce=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,j={};j[r]=j[o]=j[A]=j[P]=j[a]=j[l]=j[O]=j[V]=j[U]=j[Y]=j[B]=j[g]=j[_]=j[b]=j[S]=j[E]=j[x]=j[T]=j[F]=j[W]=j[ee]=j[X]=!0,j[c]=j[h]=j[N]=!1;var ae=typeof eu=="object"&&eu&&eu.Object===Object&&eu,Te=typeof self=="object"&&self&&self.Object===Object&&self,Le=ae||Te||Function("return this")(),Oe=e&&!e.nodeType&&e,Ne=Oe&&!0&&s&&!s.nodeType&&s,Ke=Ne&&Ne.exports===Oe;function Dt(M,Z){return M.set(Z[0],Z[1]),M}function Xe(M,Z){return M.add(Z),M}function tt(M,Z){for(var le=-1,Ae=M?M.length:0;++le<Ae&&Z(M[le],le,M)!==!1;);return M}function Et(M,Z){for(var le=-1,Ae=Z.length,Ft=M.length;++le<Ae;)M[Ft+le]=Z[le];return M}function jt(M,Z,le,Ae){for(var Ft=-1,yt=M?M.length:0;++Ft<yt;)le=Z(le,M[Ft],Ft,M);return le}function ii(M,Z){for(var le=-1,Ae=Array(M);++le<M;)Ae[le]=Z(le);return Ae}function Ci(M,Z){return M?.[Z]}function ri(M){var Z=!1;if(M!=null&&typeof M.toString!="function")try{Z=!!(M+"")}catch{}return Z}function Tn(M){var Z=-1,le=Array(M.size);return M.forEach(function(Ae,Ft){le[++Z]=[Ft,Ae]}),le}function Pl(M,Z){return function(le){return M(Z(le))}}function on(M){var Z=-1,le=Array(M.size);return M.forEach(function(Ae){le[++Z]=Ae}),le}var Bl=Array.prototype,Fl=Function.prototype,Hr=Object.prototype,is=Le["__core-js_shared__"],Ua=(function(){var M=/[^.]+$/.exec(is&&is.keys&&is.keys.IE_PROTO||"");return M?"Symbol(src)_1."+M:""})(),To=Fl.toString,lr=Hr.hasOwnProperty,js=Hr.toString,Wr=RegExp("^"+To.call(lr).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pn=Ke?Le.Buffer:void 0,ns=Le.Symbol,jn=Le.Uint8Array,Ds=Pl(Object.getPrototypeOf,Object),Vl=Object.create,oa=Hr.propertyIsEnumerable,to=Bl.splice,hs=Object.getOwnPropertySymbols,ss=pn?pn.isBuffer:void 0,io=Pl(Object.keys,Object),cr=Rs(Le,"DataView"),Hl=Rs(Le,"Map"),Ns=Rs(Le,"Promise"),Wl=Rs(Le,"Set"),qa=Rs(Le,"WeakMap"),Bi=Rs(Object,"create"),Do=fs(cr),$a=fs(Hl),zl=fs(Ns),aa=fs(Wl),la=fs(qa),No=ns?ns.prototype:void 0,_h=No?No.valueOf:void 0;function ys(M){var Z=-1,le=M?M.length:0;for(this.clear();++Z<le;){var Ae=M[Z];this.set(Ae[0],Ae[1])}}function Mn(){this.__data__=Bi?Bi(null):{}}function Is(M){return this.has(M)&&delete this.__data__[M]}function rs(M){var Z=this.__data__;if(Bi){var le=Z[M];return le===i?void 0:le}return lr.call(Z,M)?Z[M]:void 0}function ca(M){var Z=this.__data__;return Bi?Z[M]!==void 0:lr.call(Z,M)}function kc(M,Z){var le=this.__data__;return le[M]=Bi&&Z===void 0?i:Z,this}ys.prototype.clear=Mn,ys.prototype.delete=Is,ys.prototype.get=rs,ys.prototype.has=ca,ys.prototype.set=kc;function ds(M){var Z=-1,le=M?M.length:0;for(this.clear();++Z<le;){var Ae=M[Z];this.set(Ae[0],Ae[1])}}function fu(){this.__data__=[]}function ja(M){var Z=this.__data__,le=Io(Z,M);if(le<0)return!1;var Ae=Z.length-1;return le==Ae?Z.pop():to.call(Z,le,1),!0}function xr(M){var Z=this.__data__,le=Io(Z,M);return le<0?void 0:Z[le][1]}function ua(M){return Io(this.__data__,M)>-1}function ha(M,Z){var le=this.__data__,Ae=Io(le,M);return Ae<0?le.push([M,Z]):le[Ae][1]=Z,this}ds.prototype.clear=fu,ds.prototype.delete=ja,ds.prototype.get=xr,ds.prototype.has=ua,ds.prototype.set=ha;function Dn(M){var Z=-1,le=M?M.length:0;for(this.clear();++Z<le;){var Ae=M[Z];this.set(Ae[0],Ae[1])}}function da(){this.__data__={hash:new ys,map:new(Hl||ds),string:new ys}}function Gn(M){return Za(this,M).delete(M)}function pt(M){return Za(this,M).get(M)}function me(M){return Za(this,M).has(M)}function je(M,Z){return Za(this,M).set(M,Z),this}Dn.prototype.clear=da,Dn.prototype.delete=Gn,Dn.prototype.get=pt,Dn.prototype.has=me,Dn.prototype.set=je;function st(M){this.__data__=new ds(M)}function Di(){this.__data__=new ds}function os(M){return this.__data__.delete(M)}function Cn(M){return this.__data__.get(M)}function As(M){return this.__data__.has(M)}function Gs(M,Z){var le=this.__data__;if(le instanceof ds){var Ae=le.__data__;if(!Hl||Ae.length<t-1)return Ae.push([M,Z]),this;le=this.__data__=new Dn(Ae)}return le.set(M,Z),this}st.prototype.clear=Di,st.prototype.delete=os,st.prototype.get=Cn,st.prototype.has=As,st.prototype.set=Gs;function kr(M,Z){var le=Sh(M)||Dc(M)?ii(M.length,String):[],Ae=le.length,Ft=!!Ae;for(var yt in M)lr.call(M,yt)&&!(Ft&&(yt=="length"||Rg(yt,Ae)))&&le.push(yt);return le}function en(M,Z,le){var Ae=M[Z];(!(lr.call(M,Z)&&yh(Ae,le))||le===void 0&&!(Z in M))&&(M[Z]=le)}function Io(M,Z){for(var le=M.length;le--;)if(yh(M[le][0],Z))return le;return-1}function Er(M,Z){return M&&Ul(Z,Lh(Z),M)}function Ga(M,Z,le,Ae,Ft,yt,yi){var Si;if(Ae&&(Si=yt?Ae(M,Ft,yt,yi):Ae(M)),Si!==void 0)return Si;if(!Ro(M))return M;var oi=Sh(M);if(oi){if(Si=Jd(M),!Z)return Xd(M,Si)}else{var Li=fa(M),On=Li==h||Li==d;if(Nc(M))return Ec(M,Z);if(Li==b||Li==r||On&&!yt){if(ri(M))return yt?M:{};if(Si=Ao(On?{}:M),!Z)return Tc(M,Er(Si,M))}else{if(!j[Li])return yt?M:{};Si=Ag(M,Li,Ga,Z)}}yi||(yi=new st);var Dr=yi.get(M);if(Dr)return Dr;if(yi.set(M,Si),!oi)var as=le?Qd(M):Lh(M);return tt(as||M,function(un,gs){as&&(gs=un,un=M[gs]),en(Si,gs,Ga(un,Z,le,Ae,gs,M,yi))}),Si}function Kd(M){return Ro(M)?Vl(M):{}}function Yd(M,Z,le){var Ae=Z(M);return Sh(M)?Ae:Et(Ae,le(M))}function xp(M){return js.call(M)}function Zd(M){if(!Ro(M)||wh(M))return!1;var Z=$l(M)||ri(M)?Wr:ce;return Z.test(fs(M))}function Tr(M){if(!Ch(M))return io(M);var Z=[];for(var le in Object(M))lr.call(M,le)&&le!="constructor"&&Z.push(le);return Z}function Ec(M,Z){if(Z)return M.slice();var le=new M.constructor(M.length);return M.copy(le),le}function gu(M){var Z=new M.constructor(M.byteLength);return new jn(Z).set(new jn(M)),Z}function Ka(M,Z){var le=Z?gu(M.buffer):M.buffer;return new M.constructor(le,M.byteOffset,M.byteLength)}function bh(M,Z,le){var Ae=Z?le(Tn(M),!0):Tn(M);return jt(Ae,Dt,new M.constructor)}function Ya(M){var Z=new M.constructor(M.source,te.exec(M));return Z.lastIndex=M.lastIndex,Z}function Ig(M,Z,le){var Ae=Z?le(on(M),!0):on(M);return jt(Ae,Xe,new M.constructor)}function zr(M){return _h?Object(_h.call(M)):{}}function vh(M,Z){var le=Z?gu(M.buffer):M.buffer;return new M.constructor(le,M.byteOffset,M.length)}function Xd(M,Z){var le=-1,Ae=M.length;for(Z||(Z=Array(Ae));++le<Ae;)Z[le]=M[le];return Z}function Ul(M,Z,le,Ae){le||(le={});for(var Ft=-1,yt=Z.length;++Ft<yt;){var yi=Z[Ft],Si=void 0;en(le,yi,Si===void 0?M[yi]:Si)}return le}function Tc(M,Z){return Ul(M,Ur(M),Z)}function Qd(M){return Yd(M,Lh,Ur)}function Za(M,Z){var le=M.__data__;return mu(Z)?le[typeof Z=="string"?"string":"hash"]:le.map}function Rs(M,Z){var le=Ci(M,Z);return Zd(le)?le:void 0}var Ur=hs?Pl(hs,Object):Xi,fa=xp;(cr&&fa(new cr(new ArrayBuffer(1)))!=P||Hl&&fa(new Hl)!=g||Ns&&fa(Ns.resolve())!=C||Wl&&fa(new Wl)!=E||qa&&fa(new qa)!=N)&&(fa=function(M){var Z=js.call(M),le=Z==b?M.constructor:void 0,Ae=le?fs(le):void 0;if(Ae)switch(Ae){case Do:return P;case $a:return g;case zl:return C;case aa:return E;case la:return N}return Z});function Jd(M){var Z=M.length,le=M.constructor(Z);return Z&&typeof M[0]=="string"&&lr.call(M,"index")&&(le.index=M.index,le.input=M.input),le}function Ao(M){return typeof M.constructor=="function"&&!Ch(M)?Kd(Ds(M)):{}}function Ag(M,Z,le,Ae){var Ft=M.constructor;switch(Z){case A:return gu(M);case a:case l:return new Ft(+M);case P:return Ka(M,Ae);case O:case V:case U:case Y:case B:case F:case W:case ee:case X:return vh(M,Ae);case g:return bh(M,Ae,le);case _:case x:return new Ft(M);case S:return Ya(M);case E:return Ig(M,Ae,le);case T:return zr(M)}}function Rg(M,Z){return Z=Z??n,!!Z&&(typeof M=="number"||he.test(M))&&M>-1&&M%1==0&&M<Z}function mu(M){var Z=typeof M;return Z=="string"||Z=="number"||Z=="symbol"||Z=="boolean"?M!=="__proto__":M===null}function wh(M){return!!Ua&&Ua in M}function Ch(M){var Z=M&&M.constructor,le=typeof Z=="function"&&Z.prototype||Hr;return M===le}function fs(M){if(M!=null){try{return To.call(M)}catch{}try{return M+""}catch{}}return""}function ql(M){return Ga(M,!0,!0)}function yh(M,Z){return M===Z||M!==M&&Z!==Z}function Dc(M){return ga(M)&&lr.call(M,"callee")&&(!oa.call(M,"callee")||js.call(M)==r)}var Sh=Array.isArray;function Xa(M){return M!=null&&ma(M.length)&&!$l(M)}function ga(M){return pu(M)&&Xa(M)}var Nc=ss||Fi;function $l(M){var Z=Ro(M)?js.call(M):"";return Z==h||Z==d}function ma(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=n}function Ro(M){var Z=typeof M;return!!M&&(Z=="object"||Z=="function")}function pu(M){return!!M&&typeof M=="object"}function Lh(M){return Xa(M)?kr(M):Tr(M)}function Xi(){return[]}function Fi(){return!1}s.exports=ql})(eL,eL.exports)),eL.exports}var tL={exports:{}};tL.exports;var q$;function dJ(){return q$||(q$=1,(function(s,e){var t=200,i="__lodash_hash_undefined__",n=1,r=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",g="[object Error]",_="[object Function]",b="[object GeneratorFunction]",C="[object Map]",S="[object Number]",E="[object Null]",x="[object Object]",T="[object Promise]",N="[object Proxy]",A="[object RegExp]",P="[object Set]",O="[object String]",V="[object Symbol]",U="[object Undefined]",Y="[object WeakMap]",B="[object ArrayBuffer]",F="[object DataView]",W="[object Float32Array]",ee="[object Float64Array]",X="[object Int8Array]",$="[object Int16Array]",te="[object Int32Array]",ce="[object Uint8Array]",he="[object Uint8ClampedArray]",j="[object Uint16Array]",ae="[object Uint32Array]",Te=/[\\^$.*+?()[\]{}|]/g,Le=/^\[object .+?Constructor\]$/,Oe=/^(?:0|[1-9]\d*)$/,Ne={};Ne[W]=Ne[ee]=Ne[X]=Ne[$]=Ne[te]=Ne[ce]=Ne[he]=Ne[j]=Ne[ae]=!0,Ne[a]=Ne[l]=Ne[B]=Ne[h]=Ne[F]=Ne[d]=Ne[g]=Ne[_]=Ne[C]=Ne[S]=Ne[x]=Ne[A]=Ne[P]=Ne[O]=Ne[Y]=!1;var Ke=typeof eu=="object"&&eu&&eu.Object===Object&&eu,Dt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=Ke||Dt||Function("return this")(),tt=e&&!e.nodeType&&e,Et=tt&&!0&&s&&!s.nodeType&&s,jt=Et&&Et.exports===tt,ii=jt&&Ke.process,Ci=(function(){try{return ii&&ii.binding&&ii.binding("util")}catch{}})(),ri=Ci&&Ci.isTypedArray;function Tn(M,Z){for(var le=-1,Ae=M==null?0:M.length,Ft=0,yt=[];++le<Ae;){var yi=M[le];Z(yi,le,M)&&(yt[Ft++]=yi)}return yt}function Pl(M,Z){for(var le=-1,Ae=Z.length,Ft=M.length;++le<Ae;)M[Ft+le]=Z[le];return M}function on(M,Z){for(var le=-1,Ae=M==null?0:M.length;++le<Ae;)if(Z(M[le],le,M))return!0;return!1}function Bl(M,Z){for(var le=-1,Ae=Array(M);++le<M;)Ae[le]=Z(le);return Ae}function Fl(M){return function(Z){return M(Z)}}function Hr(M,Z){return M.has(Z)}function is(M,Z){return M?.[Z]}function Ua(M){var Z=-1,le=Array(M.size);return M.forEach(function(Ae,Ft){le[++Z]=[Ft,Ae]}),le}function To(M,Z){return function(le){return M(Z(le))}}function lr(M){var Z=-1,le=Array(M.size);return M.forEach(function(Ae){le[++Z]=Ae}),le}var js=Array.prototype,Wr=Function.prototype,pn=Object.prototype,ns=Xe["__core-js_shared__"],jn=Wr.toString,Ds=pn.hasOwnProperty,Vl=(function(){var M=/[^.]+$/.exec(ns&&ns.keys&&ns.keys.IE_PROTO||"");return M?"Symbol(src)_1."+M:""})(),oa=pn.toString,to=RegExp("^"+jn.call(Ds).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hs=jt?Xe.Buffer:void 0,ss=Xe.Symbol,io=Xe.Uint8Array,cr=pn.propertyIsEnumerable,Hl=js.splice,Ns=ss?ss.toStringTag:void 0,Wl=Object.getOwnPropertySymbols,qa=hs?hs.isBuffer:void 0,Bi=To(Object.keys,Object),Do=Ur(Xe,"DataView"),$a=Ur(Xe,"Map"),zl=Ur(Xe,"Promise"),aa=Ur(Xe,"Set"),la=Ur(Xe,"WeakMap"),No=Ur(Object,"create"),_h=fs(Do),ys=fs($a),Mn=fs(zl),Is=fs(aa),rs=fs(la),ca=ss?ss.prototype:void 0,kc=ca?ca.valueOf:void 0;function ds(M){var Z=-1,le=M==null?0:M.length;for(this.clear();++Z<le;){var Ae=M[Z];this.set(Ae[0],Ae[1])}}function fu(){this.__data__=No?No(null):{},this.size=0}function ja(M){var Z=this.has(M)&&delete this.__data__[M];return this.size-=Z?1:0,Z}function xr(M){var Z=this.__data__;if(No){var le=Z[M];return le===i?void 0:le}return Ds.call(Z,M)?Z[M]:void 0}function ua(M){var Z=this.__data__;return No?Z[M]!==void 0:Ds.call(Z,M)}function ha(M,Z){var le=this.__data__;return this.size+=this.has(M)?0:1,le[M]=No&&Z===void 0?i:Z,this}ds.prototype.clear=fu,ds.prototype.delete=ja,ds.prototype.get=xr,ds.prototype.has=ua,ds.prototype.set=ha;function Dn(M){var Z=-1,le=M==null?0:M.length;for(this.clear();++Z<le;){var Ae=M[Z];this.set(Ae[0],Ae[1])}}function da(){this.__data__=[],this.size=0}function Gn(M){var Z=this.__data__,le=Ec(Z,M);if(le<0)return!1;var Ae=Z.length-1;return le==Ae?Z.pop():Hl.call(Z,le,1),--this.size,!0}function pt(M){var Z=this.__data__,le=Ec(Z,M);return le<0?void 0:Z[le][1]}function me(M){return Ec(this.__data__,M)>-1}function je(M,Z){var le=this.__data__,Ae=Ec(le,M);return Ae<0?(++this.size,le.push([M,Z])):le[Ae][1]=Z,this}Dn.prototype.clear=da,Dn.prototype.delete=Gn,Dn.prototype.get=pt,Dn.prototype.has=me,Dn.prototype.set=je;function st(M){var Z=-1,le=M==null?0:M.length;for(this.clear();++Z<le;){var Ae=M[Z];this.set(Ae[0],Ae[1])}}function Di(){this.size=0,this.__data__={hash:new ds,map:new($a||Dn),string:new ds}}function os(M){var Z=Rs(this,M).delete(M);return this.size-=Z?1:0,Z}function Cn(M){return Rs(this,M).get(M)}function As(M){return Rs(this,M).has(M)}function Gs(M,Z){var le=Rs(this,M),Ae=le.size;return le.set(M,Z),this.size+=le.size==Ae?0:1,this}st.prototype.clear=Di,st.prototype.delete=os,st.prototype.get=Cn,st.prototype.has=As,st.prototype.set=Gs;function kr(M){var Z=-1,le=M==null?0:M.length;for(this.__data__=new st;++Z<le;)this.add(M[Z])}function en(M){return this.__data__.set(M,i),this}function Io(M){return this.__data__.has(M)}kr.prototype.add=kr.prototype.push=en,kr.prototype.has=Io;function Er(M){var Z=this.__data__=new Dn(M);this.size=Z.size}function Ga(){this.__data__=new Dn,this.size=0}function Kd(M){var Z=this.__data__,le=Z.delete(M);return this.size=Z.size,le}function Yd(M){return this.__data__.get(M)}function xp(M){return this.__data__.has(M)}function Zd(M,Z){var le=this.__data__;if(le instanceof Dn){var Ae=le.__data__;if(!$a||Ae.length<t-1)return Ae.push([M,Z]),this.size=++le.size,this;le=this.__data__=new st(Ae)}return le.set(M,Z),this.size=le.size,this}Er.prototype.clear=Ga,Er.prototype.delete=Kd,Er.prototype.get=Yd,Er.prototype.has=xp,Er.prototype.set=Zd;function Tr(M,Z){var le=Dc(M),Ae=!le&&yh(M),Ft=!le&&!Ae&&Xa(M),yt=!le&&!Ae&&!Ft&&pu(M),yi=le||Ae||Ft||yt,Si=yi?Bl(M.length,String):[],oi=Si.length;for(var Li in M)Ds.call(M,Li)&&!(yi&&(Li=="length"||Ft&&(Li=="offset"||Li=="parent")||yt&&(Li=="buffer"||Li=="byteLength"||Li=="byteOffset")||Ag(Li,oi)))&&Si.push(Li);return Si}function Ec(M,Z){for(var le=M.length;le--;)if(ql(M[le][0],Z))return le;return-1}function gu(M,Z,le){var Ae=Z(M);return Dc(M)?Ae:Pl(Ae,le(M))}function Ka(M){return M==null?M===void 0?U:E:Ns&&Ns in Object(M)?fa(M):Ch(M)}function bh(M){return Ro(M)&&Ka(M)==a}function Ya(M,Z,le,Ae,Ft){return M===Z?!0:M==null||Z==null||!Ro(M)&&!Ro(Z)?M!==M&&Z!==Z:Ig(M,Z,le,Ae,Ya,Ft)}function Ig(M,Z,le,Ae,Ft,yt){var yi=Dc(M),Si=Dc(Z),oi=yi?l:Ao(M),Li=Si?l:Ao(Z);oi=oi==a?x:oi,Li=Li==a?x:Li;var On=oi==x,Dr=Li==x,as=oi==Li;if(as&&Xa(M)){if(!Xa(Z))return!1;yi=!0,On=!1}if(as&&!On)return yt||(yt=new Er),yi||pu(M)?Ul(M,Z,le,Ae,Ft,yt):Tc(M,Z,oi,le,Ae,Ft,yt);if(!(le&n)){var un=On&&Ds.call(M,"__wrapped__"),gs=Dr&&Ds.call(Z,"__wrapped__");if(un||gs){var jl=un?M.value():M,Qa=gs?Z.value():Z;return yt||(yt=new Er),Ft(jl,Qa,le,Ae,yt)}}return as?(yt||(yt=new Er),Qd(M,Z,le,Ae,Ft,yt)):!1}function zr(M){if(!ma(M)||mu(M))return!1;var Z=Nc(M)?to:Le;return Z.test(fs(M))}function vh(M){return Ro(M)&&$l(M.length)&&!!Ne[Ka(M)]}function Xd(M){if(!wh(M))return Bi(M);var Z=[];for(var le in Object(M))Ds.call(M,le)&&le!="constructor"&&Z.push(le);return Z}function Ul(M,Z,le,Ae,Ft,yt){var yi=le&n,Si=M.length,oi=Z.length;if(Si!=oi&&!(yi&&oi>Si))return!1;var Li=yt.get(M);if(Li&&yt.get(Z))return Li==Z;var On=-1,Dr=!0,as=le&r?new kr:void 0;for(yt.set(M,Z),yt.set(Z,M);++On<Si;){var un=M[On],gs=Z[On];if(Ae)var jl=yi?Ae(gs,un,On,Z,M,yt):Ae(un,gs,On,M,Z,yt);if(jl!==void 0){if(jl)continue;Dr=!1;break}if(as){if(!on(Z,function(Qa,Ic){if(!Hr(as,Ic)&&(un===Qa||Ft(un,Qa,le,Ae,yt)))return as.push(Ic)})){Dr=!1;break}}else if(!(un===gs||Ft(un,gs,le,Ae,yt))){Dr=!1;break}}return yt.delete(M),yt.delete(Z),Dr}function Tc(M,Z,le,Ae,Ft,yt,yi){switch(le){case F:if(M.byteLength!=Z.byteLength||M.byteOffset!=Z.byteOffset)return!1;M=M.buffer,Z=Z.buffer;case B:return!(M.byteLength!=Z.byteLength||!yt(new io(M),new io(Z)));case h:case d:case S:return ql(+M,+Z);case g:return M.name==Z.name&&M.message==Z.message;case A:case O:return M==Z+"";case C:var Si=Ua;case P:var oi=Ae&n;if(Si||(Si=lr),M.size!=Z.size&&!oi)return!1;var Li=yi.get(M);if(Li)return Li==Z;Ae|=r,yi.set(M,Z);var On=Ul(Si(M),Si(Z),Ae,Ft,yt,yi);return yi.delete(M),On;case V:if(kc)return kc.call(M)==kc.call(Z)}return!1}function Qd(M,Z,le,Ae,Ft,yt){var yi=le&n,Si=Za(M),oi=Si.length,Li=Za(Z),On=Li.length;if(oi!=On&&!yi)return!1;for(var Dr=oi;Dr--;){var as=Si[Dr];if(!(yi?as in Z:Ds.call(Z,as)))return!1}var un=yt.get(M);if(un&&yt.get(Z))return un==Z;var gs=!0;yt.set(M,Z),yt.set(Z,M);for(var jl=yi;++Dr<oi;){as=Si[Dr];var Qa=M[as],Ic=Z[as];if(Ae)var kp=yi?Ae(Ic,Qa,as,Z,M,yt):Ae(Qa,Ic,as,M,Z,yt);if(!(kp===void 0?Qa===Ic||Ft(Qa,Ic,le,Ae,yt):kp)){gs=!1;break}jl||(jl=as=="constructor")}if(gs&&!jl){var ef=M.constructor,Ks=Z.constructor;ef!=Ks&&"constructor"in M&&"constructor"in Z&&!(typeof ef=="function"&&ef instanceof ef&&typeof Ks=="function"&&Ks instanceof Ks)&&(gs=!1)}return yt.delete(M),yt.delete(Z),gs}function Za(M){return gu(M,Lh,Jd)}function Rs(M,Z){var le=M.__data__;return Rg(Z)?le[typeof Z=="string"?"string":"hash"]:le.map}function Ur(M,Z){var le=is(M,Z);return zr(le)?le:void 0}function fa(M){var Z=Ds.call(M,Ns),le=M[Ns];try{M[Ns]=void 0;var Ae=!0}catch{}var Ft=oa.call(M);return Ae&&(Z?M[Ns]=le:delete M[Ns]),Ft}var Jd=Wl?function(M){return M==null?[]:(M=Object(M),Tn(Wl(M),function(Z){return cr.call(M,Z)}))}:Xi,Ao=Ka;(Do&&Ao(new Do(new ArrayBuffer(1)))!=F||$a&&Ao(new $a)!=C||zl&&Ao(zl.resolve())!=T||aa&&Ao(new aa)!=P||la&&Ao(new la)!=Y)&&(Ao=function(M){var Z=Ka(M),le=Z==x?M.constructor:void 0,Ae=le?fs(le):"";if(Ae)switch(Ae){case _h:return F;case ys:return C;case Mn:return T;case Is:return P;case rs:return Y}return Z});function Ag(M,Z){return Z=Z??o,!!Z&&(typeof M=="number"||Oe.test(M))&&M>-1&&M%1==0&&M<Z}function Rg(M){var Z=typeof M;return Z=="string"||Z=="number"||Z=="symbol"||Z=="boolean"?M!=="__proto__":M===null}function mu(M){return!!Vl&&Vl in M}function wh(M){var Z=M&&M.constructor,le=typeof Z=="function"&&Z.prototype||pn;return M===le}function Ch(M){return oa.call(M)}function fs(M){if(M!=null){try{return jn.call(M)}catch{}try{return M+""}catch{}}return""}function ql(M,Z){return M===Z||M!==M&&Z!==Z}var yh=bh((function(){return arguments})())?bh:function(M){return Ro(M)&&Ds.call(M,"callee")&&!cr.call(M,"callee")},Dc=Array.isArray;function Sh(M){return M!=null&&$l(M.length)&&!Nc(M)}var Xa=qa||Fi;function ga(M,Z){return Ya(M,Z)}function Nc(M){if(!ma(M))return!1;var Z=Ka(M);return Z==_||Z==b||Z==c||Z==N}function $l(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=o}function ma(M){var Z=typeof M;return M!=null&&(Z=="object"||Z=="function")}function Ro(M){return M!=null&&typeof M=="object"}var pu=ri?Fl(ri):vh;function Lh(M){return Sh(M)?Tr(M):Xd(M)}function Xi(){return[]}function Fi(){return!1}s.exports=ga})(tL,tL.exports)),tL.exports}var uD={},$$;function KNe(){if($$)return uD;$$=1,Object.defineProperty(uD,"__esModule",{value:!0});const s=hJ(),e=dJ();var t;return(function(i){function n(l={},c={},h=!1){typeof l!="object"&&(l={}),typeof c!="object"&&(c={});let d=s(c);h||(d=Object.keys(d).reduce((g,_)=>(d[_]!=null&&(g[_]=d[_]),g),{}));for(const g in l)l[g]!==void 0&&c[g]===void 0&&(d[g]=l[g]);return Object.keys(d).length>0?d:void 0}i.compose=n;function r(l={},c={}){typeof l!="object"&&(l={}),typeof c!="object"&&(c={});const h=Object.keys(l).concat(Object.keys(c)).reduce((d,g)=>(e(l[g],c[g])||(d[g]=c[g]===void 0?null:c[g]),d),{});return Object.keys(h).length>0?h:void 0}i.diff=r;function o(l={},c={}){l=l||{};const h=Object.keys(c).reduce((d,g)=>(c[g]!==l[g]&&l[g]!==void 0&&(d[g]=c[g]),d),{});return Object.keys(l).reduce((d,g)=>(l[g]!==c[g]&&c[g]===void 0&&(d[g]=null),d),h)}i.invert=o;function a(l,c,h=!1){if(typeof l!="object")return c;if(typeof c!="object")return;if(!h)return c;const d=Object.keys(c).reduce((g,_)=>(l[_]===void 0&&(g[_]=c[_]),g),{});return Object.keys(d).length>0?d:void 0}i.transform=a})(t||(t={})),uD.default=t,uD}var hD={},j$;function fJ(){if(j$)return hD;j$=1,Object.defineProperty(hD,"__esModule",{value:!0});var s;return(function(e){function t(i){return typeof i.delete=="number"?i.delete:typeof i.retain=="number"?i.retain:typeof i.retain=="object"&&i.retain!==null?1:typeof i.insert=="string"?i.insert.length:1}e.length=t})(s||(s={})),hD.default=s,hD}var dD={},G$;function YNe(){if(G$)return dD;G$=1,Object.defineProperty(dD,"__esModule",{value:!0});const s=fJ();class e{constructor(i){this.ops=i,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(i){i||(i=1/0);const n=this.ops[this.index];if(n){const r=this.offset,o=s.default.length(n);if(i>=o-r?(i=o-r,this.index+=1,this.offset=0):this.offset+=i,typeof n.delete=="number")return{delete:i};{const a={};return n.attributes&&(a.attributes=n.attributes),typeof n.retain=="number"?a.retain=i:typeof n.retain=="object"&&n.retain!==null?a.retain=n.retain:typeof n.insert=="string"?a.insert=n.insert.substr(r,i):a.insert=n.insert,a}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?s.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const i=this.ops[this.index];return i?typeof i.delete=="number"?"delete":typeof i.retain=="number"||typeof i.retain=="object"&&i.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const i=this.offset,n=this.index,r=this.next(),o=this.ops.slice(this.index);return this.offset=i,this.index=n,[r].concat(o)}}else return[]}}return dD.default=e,dD}var K$;function ZNe(){return K$||(K$=1,(function(s,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=GNe(),i=hJ(),n=dJ(),r=KNe();e.AttributeMap=r.default;const o=fJ();e.Op=o.default;const a=YNe();e.OpIterator=a.default;const l="\0",c=(d,g)=>{if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);if(typeof g!="object"||g===null)throw new Error(`cannot retain a ${typeof g}`);const _=Object.keys(d)[0];if(!_||_!==Object.keys(g)[0])throw new Error(`embed types not matched: ${_} != ${Object.keys(g)[0]}`);return[_,d[_],g[_]]};class h{constructor(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]}static registerEmbed(g,_){this.handlers[g]=_}static unregisterEmbed(g){delete this.handlers[g]}static getHandler(g){const _=this.handlers[g];if(!_)throw new Error(`no handlers for embed type "${g}"`);return _}insert(g,_){const b={};return typeof g=="string"&&g.length===0?this:(b.insert=g,_!=null&&typeof _=="object"&&Object.keys(_).length>0&&(b.attributes=_),this.push(b))}delete(g){return g<=0?this:this.push({delete:g})}retain(g,_){if(typeof g=="number"&&g<=0)return this;const b={retain:g};return _!=null&&typeof _=="object"&&Object.keys(_).length>0&&(b.attributes=_),this.push(b)}push(g){let _=this.ops.length,b=this.ops[_-1];if(g=i(g),typeof b=="object"){if(typeof g.delete=="number"&&typeof b.delete=="number")return this.ops[_-1]={delete:b.delete+g.delete},this;if(typeof b.delete=="number"&&g.insert!=null&&(_-=1,b=this.ops[_-1],typeof b!="object"))return this.ops.unshift(g),this;if(n(g.attributes,b.attributes)){if(typeof g.insert=="string"&&typeof b.insert=="string")return this.ops[_-1]={insert:b.insert+g.insert},typeof g.attributes=="object"&&(this.ops[_-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof b.retain=="number")return this.ops[_-1]={retain:b.retain+g.retain},typeof g.attributes=="object"&&(this.ops[_-1].attributes=g.attributes),this}}return _===this.ops.length?this.ops.push(g):this.ops.splice(_,0,g),this}chop(){const g=this.ops[this.ops.length-1];return g&&typeof g.retain=="number"&&!g.attributes&&this.ops.pop(),this}filter(g){return this.ops.filter(g)}forEach(g){this.ops.forEach(g)}map(g){return this.ops.map(g)}partition(g){const _=[],b=[];return this.forEach(C=>{(g(C)?_:b).push(C)}),[_,b]}reduce(g,_){return this.ops.reduce(g,_)}changeLength(){return this.reduce((g,_)=>_.insert?g+o.default.length(_):_.delete?g-_.delete:g,0)}length(){return this.reduce((g,_)=>g+o.default.length(_),0)}slice(g=0,_=1/0){const b=[],C=new a.default(this.ops);let S=0;for(;S<_&&C.hasNext();){let E;S<g?E=C.next(g-S):(E=C.next(_-S),b.push(E)),S+=o.default.length(E)}return new h(b)}compose(g){const _=new a.default(this.ops),b=new a.default(g.ops),C=[],S=b.peek();if(S!=null&&typeof S.retain=="number"&&S.attributes==null){let x=S.retain;for(;_.peekType()==="insert"&&_.peekLength()<=x;)x-=_.peekLength(),C.push(_.next());S.retain-x>0&&b.next(S.retain-x)}const E=new h(C);for(;_.hasNext()||b.hasNext();)if(b.peekType()==="insert")E.push(b.next());else if(_.peekType()==="delete")E.push(_.next());else{const x=Math.min(_.peekLength(),b.peekLength()),T=_.next(x),N=b.next(x);if(N.retain){const A={};if(typeof T.retain=="number")A.retain=typeof N.retain=="number"?x:N.retain;else if(typeof N.retain=="number")T.retain==null?A.insert=T.insert:A.retain=T.retain;else{const O=T.retain==null?"insert":"retain",[V,U,Y]=c(T[O],N.retain),B=h.getHandler(V);A[O]={[V]:B.compose(U,Y,O==="retain")}}const P=r.default.compose(T.attributes,N.attributes,typeof T.retain=="number");if(P&&(A.attributes=P),E.push(A),!b.hasNext()&&n(E.ops[E.ops.length-1],A)){const O=new h(_.rest());return E.concat(O).chop()}}else typeof N.delete=="number"&&(typeof T.retain=="number"||typeof T.retain=="object"&&T.retain!==null)&&E.push(N)}return E.chop()}concat(g){const _=new h(this.ops.slice());return g.ops.length>0&&(_.push(g.ops[0]),_.ops=_.ops.concat(g.ops.slice(1))),_}diff(g,_){if(this.ops===g.ops)return new h;const b=[this,g].map(T=>T.map(N=>{if(N.insert!=null)return typeof N.insert=="string"?N.insert:l;const A=T===g?"on":"with";throw new Error("diff() called "+A+" non-document")}).join("")),C=new h,S=t(b[0],b[1],_,!0),E=new a.default(this.ops),x=new a.default(g.ops);return S.forEach(T=>{let N=T[1].length;for(;N>0;){let A=0;switch(T[0]){case t.INSERT:A=Math.min(x.peekLength(),N),C.push(x.next(A));break;case t.DELETE:A=Math.min(N,E.peekLength()),E.next(A),C.delete(A);break;case t.EQUAL:A=Math.min(E.peekLength(),x.peekLength(),N);const P=E.next(A),O=x.next(A);n(P.insert,O.insert)?C.retain(A,r.default.diff(P.attributes,O.attributes)):C.push(O).delete(A);break}N-=A}}),C.chop()}eachLine(g,_=`
`){const b=new a.default(this.ops);let C=new h,S=0;for(;b.hasNext();){if(b.peekType()!=="insert")return;const E=b.peek(),x=o.default.length(E)-b.peekLength(),T=typeof E.insert=="string"?E.insert.indexOf(_,x)-x:-1;if(T<0)C.push(b.next());else if(T>0)C.push(b.next(T));else{if(g(C,b.next(1).attributes||{},S)===!1)return;S+=1,C=new h}}C.length()>0&&g(C,{},S)}invert(g){const _=new h;return this.reduce((b,C)=>{if(C.insert)_.delete(o.default.length(C));else{if(typeof C.retain=="number"&&C.attributes==null)return _.retain(C.retain),b+C.retain;if(C.delete||typeof C.retain=="number"){const S=C.delete||C.retain;return g.slice(b,b+S).forEach(x=>{C.delete?_.push(x):C.retain&&C.attributes&&_.retain(o.default.length(x),r.default.invert(C.attributes,x.attributes))}),b+S}else if(typeof C.retain=="object"&&C.retain!==null){const S=g.slice(b,b+1),E=new a.default(S.ops).next(),[x,T,N]=c(C.retain,E.insert),A=h.getHandler(x);return _.retain({[x]:A.invert(T,N)},r.default.invert(C.attributes,E.attributes)),b+1}}return b},0),_.chop()}transform(g,_=!1){if(_=!!_,typeof g=="number")return this.transformPosition(g,_);const b=g,C=new a.default(this.ops),S=new a.default(b.ops),E=new h;for(;C.hasNext()||S.hasNext();)if(C.peekType()==="insert"&&(_||S.peekType()!=="insert"))E.retain(o.default.length(C.next()));else if(S.peekType()==="insert")E.push(S.next());else{const x=Math.min(C.peekLength(),S.peekLength()),T=C.next(x),N=S.next(x);if(T.delete)continue;if(N.delete)E.push(N);else{const A=T.retain,P=N.retain;let O=typeof P=="object"&&P!==null?P:x;if(typeof A=="object"&&A!==null&&typeof P=="object"&&P!==null){const V=Object.keys(A)[0];if(V===Object.keys(P)[0]){const U=h.getHandler(V);U&&(O={[V]:U.transform(A[V],P[V],_)})}}E.retain(O,r.default.transform(T.attributes,N.attributes,_))}}return E.chop()}transformPosition(g,_=!1){_=!!_;const b=new a.default(this.ops);let C=0;for(;b.hasNext()&&C<=g;){const S=b.peekLength(),E=b.peekType();if(b.next(),E==="delete"){g-=Math.min(S,g-C);continue}else E==="insert"&&(C<g||!_)&&(g+=S);C+=S}return g}}h.Op=o.default,h.OpIterator=a.default,h.AttributeMap=r.default,h.handlers={},e.default=h,s.exports=h,s.exports.default=h})(cD,cD.exports)),cD.exports}var nu=ZNe();const bt=P6(nu);class ph extends xc{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ph.blotName="break";ph.tagName="BR";let dh=class extends KI{};const XNe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function t4(s){return s.replace(/[&<>"']/g,e=>XNe[e])}class Ia extends PF{static allowedChildren=[Ia,ph,xc,dh];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,t){const i=Ia.order.indexOf(e),n=Ia.order.indexOf(t);return i>=0||n>=0?i-n:e===t?0:e<t?-1:1}formatAt(e,t,i,n){if(Ia.compare(this.statics.blotName,i)<0&&this.scroll.query(i,Lt.BLOT)){const r=this.isolate(e,t);n&&r.wrap(i,n)}else super.formatAt(e,t,i,n)}optimize(e){if(super.optimize(e),this.parent instanceof Ia&&Ia.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const Y$=1;class bo extends m2{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=gJ(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,i,n){t<=0||(this.scroll.query(i,Lt.BLOCK)?e+t===this.length()&&this.format(i,n):super.formatAt(e,Math.min(t,this.length()-e-1),i,n),this.cache={})}insertAt(e,t,i){if(i!=null){super.insertAt(e,t,i),this.cache={};return}if(t.length===0)return;const n=t.split(`
`),r=n.shift();r.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});let o=this;n.reduce((a,l)=>(o=o.split(a,!0),o.insertAt(0,l),l.length),e+r.length)}insertBefore(e,t){const{head:i}=this.children;super.insertBefore(e,t),i instanceof ph&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Y$),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-Y$)){const n=this.clone();return e===0?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}const i=super.split(e,t);return this.cache={},i}}bo.blotName="block";bo.tagName="P";bo.defaultChild=ph;bo.allowedChildren=[ph,Ia,xc,dh];class Jc extends xc{attach(){super.attach(),this.attributes=new JR(this.domNode)}delta(){return new bt().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const i=this.scroll.query(e,Lt.BLOCK_ATTRIBUTE);i!=null&&this.attributes.attribute(i,t)}formatAt(e,t,i,n){this.format(i,n)}insertAt(e,t,i){if(i!=null){super.insertAt(e,t,i);return}const n=t.split(`
`),r=n.pop(),o=n.map(l=>{const c=this.scroll.create(bo.blotName);return c.insertAt(0,l),c}),a=this.split(e);o.forEach(l=>{this.parent.insertBefore(l,a)}),r&&this.parent.insertBefore(this.scroll.create("text",r),a)}}Jc.scope=Lt.BLOCK_BLOT;function gJ(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return s.descendants(Jo).reduce((t,i)=>i.length()===0?t:t.insert(i.value(),Zc(i,{},e)),new bt).insert(`
`,Zc(s))}function Zc(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return s==null||("formats"in s&&typeof s.formats=="function"&&(e={...e,...s.formats()},t&&delete e["code-token"]),s.parent==null||s.parent.statics.blotName==="scroll"||s.parent.statics.scope!==s.statics.scope)?e:Zc(s.parent,e,t)}class Zu extends xc{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,t,i){super(e,t),this.selection=i,this.textNode=document.createTextNode(Zu.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let i=this,n=0;for(;i!=null&&i.statics.scope!==Lt.BLOCK_BLOT;)n+=i.offset(i.parent),i=i.parent;i!=null&&(this.savedLength=Zu.CONTENTS.length,i.optimize(),i.formatAt(n,Zu.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof dh?this.prev:null,i=t?t.length():0,n=this.next instanceof dh?this.next:null,r=n?n.text:"",{textNode:o}=this,a=o.data.split(Zu.CONTENTS).join("");o.data=Zu.CONTENTS;let l;if(t)l=t,(a||n)&&(t.insertAt(t.length(),a+r),n&&n.remove());else if(n)l=n,n.insertAt(0,a);else{const c=document.createTextNode(a);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),e){const c=(g,_)=>t&&g===t.domNode?_:g===o?i+_-1:n&&g===n.domNode?i+a.length+_:null,h=c(e.start.node,e.start.offset),d=c(e.end.node,e.end.offset);if(h!==null&&d!==null)return{startNode:l.domNode,startOffset:h,endNode:l.domNode,endOffset:d}}return null}update(e,t){if(e.some(i=>i.type==="characterData"&&i.target===this.textNode)){const i=this.restore();i&&(t.range=i)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=Zu.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}}var q5={exports:{}},Z$;function QNe(){return Z$||(Z$=1,(function(s){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function n(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function r(l,c,h,d,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var _=new n(h,d||l,g),b=t?t+c:c;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],_]:l._events[b].push(_):(l._events[b]=_,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)e.call(h,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},a.prototype.listeners=function(c){var h=t?t+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var g=0,_=d.length,b=new Array(_);g<_;g++)b[g]=d[g].fn;return b},a.prototype.listenerCount=function(c){var h=t?t+c:c,d=this._events[h];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,h,d,g,_,b){var C=t?t+c:c;if(!this._events[C])return!1;var S=this._events[C],E=arguments.length,x,T;if(S.fn){switch(S.once&&this.removeListener(c,S.fn,void 0,!0),E){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,d),!0;case 4:return S.fn.call(S.context,h,d,g),!0;case 5:return S.fn.call(S.context,h,d,g,_),!0;case 6:return S.fn.call(S.context,h,d,g,_,b),!0}for(T=1,x=new Array(E-1);T<E;T++)x[T-1]=arguments[T];S.fn.apply(S.context,x)}else{var N=S.length,A;for(T=0;T<N;T++)switch(S[T].once&&this.removeListener(c,S[T].fn,void 0,!0),E){case 1:S[T].fn.call(S[T].context);break;case 2:S[T].fn.call(S[T].context,h);break;case 3:S[T].fn.call(S[T].context,h,d);break;case 4:S[T].fn.call(S[T].context,h,d,g);break;default:if(!x)for(A=1,x=new Array(E-1);A<E;A++)x[A-1]=arguments[A];S[T].fn.apply(S[T].context,x)}}return!0},a.prototype.on=function(c,h,d){return r(this,c,h,d,!1)},a.prototype.once=function(c,h,d){return r(this,c,h,d,!0)},a.prototype.removeListener=function(c,h,d,g){var _=t?t+c:c;if(!this._events[_])return this;if(!h)return o(this,_),this;var b=this._events[_];if(b.fn)b.fn===h&&(!g||b.once)&&(!d||b.context===d)&&o(this,_);else{for(var C=0,S=[],E=b.length;C<E;C++)(b[C].fn!==h||g&&!b[C].once||d&&b[C].context!==d)&&S.push(b[C]);S.length?this._events[_]=S.length===1?S[0]:S:o(this,_)}return this},a.prototype.removeAllListeners=function(c){var h;return c?(h=t?t+c:c,this._events[h]&&o(this,h)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,s.exports=a})(q5)),q5.exports}var JNe=QNe();const eIe=P6(JNe),A6=new WeakMap,R6=["error","warn","log","info"];let M6="warn";function mJ(s){if(M6&&R6.indexOf(s)<=R6.indexOf(M6)){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];console[s](...t)}}function Ng(s){return R6.reduce((e,t)=>(e[t]=mJ.bind(console,t,s),e),{})}Ng.level=s=>{M6=s};mJ.level=Ng.level;const $5=Ng("quill:events"),tIe=["selectionchange","mousedown","mouseup","click"];tIe.forEach(s=>{document.addEventListener(s,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach(n=>{const r=A6.get(n);r&&r.emitter&&r.emitter.handleDOM(...t)})})});class wt extends eIe{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",$5.error)}emit(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return $5.log.call($5,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];(this.domListeners[e.type]||[]).forEach(r=>{let{node:o,handler:a}=r;(e.target===o||o.contains(e.target))&&a(e,...i)})}listenDOM(e,t,i){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:i})}}const j5=Ng("quill:selection");class E0{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class iIe{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new E0(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,wt.sources.USER),1)}),this.emitter.on(wt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const i=this.getNativeRange();i!=null&&i.start.node!==this.cursor.textNode&&this.emitter.once(wt.events.SCROLL_UPDATE,(n,r)=>{try{this.root.contains(i.start.node)&&this.root.contains(i.end.node)&&this.setNativeRange(i.start.node,i.start.offset,i.end.node,i.end.offset);const o=r.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?wt.sources.SILENT:n)}catch{}})}),this.emitter.on(wt.events.SCROLL_OPTIMIZE,(i,n)=>{if(n.range){const{startNode:r,startOffset:o,endNode:a,endOffset:l}=n.range;this.setNativeRange(r,o,a,l),this.update(wt.sources.SILENT)}}),this.update(wt.sources.SILENT)}handleComposition(){this.emitter.on(wt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(wt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(wt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const i=this.getNativeRange();if(!(i==null||!i.native.collapsed||this.scroll.query(e,Lt.BLOCK))){if(i.start.node!==this.cursor.textNode){const n=this.scroll.find(i.start.node,!1);if(n==null)return;if(n instanceof Jo){const r=n.split(i.start.offset);n.parent.insertBefore(this.cursor,r)}else n.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=this.scroll.length();e=Math.min(e,i-1),t=Math.min(e+t,i-1)-e;let n,[r,o]=this.scroll.leaf(e);if(r==null)return null;if(t>0&&o===r.length()){const[h]=this.scroll.leaf(e+1);if(h){const[d]=this.scroll.line(e),[g]=this.scroll.line(e+1);d===g&&(r=h,o=0)}}[n,o]=r.position(o,!0);const a=document.createRange();if(t>0)return a.setStart(n,o),[r,o]=this.scroll.leaf(e+t),r==null?null:([n,o]=r.position(o,!0),a.setEnd(n,o),a.getBoundingClientRect());let l="left",c;if(n instanceof Text){if(!n.data.length)return null;o<n.data.length?(a.setStart(n,o),a.setEnd(n,o+1)):(a.setStart(n,o-1),a.setEnd(n,o),l="right"),c=a.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;c=r.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const i=this.normalizeNative(t);return j5.info("getNativeRange",i),i}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&G5(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const i=t.map(o=>{const[a,l]=o,c=this.scroll.find(a,!0),h=c.offset(this.scroll);return l===0?h:c instanceof Jo?h+c.index(a,l):h+c.length()}),n=Math.min(Math.max(...i),this.scroll.length()-1),r=Math.min(n,...i);return new E0(r,n-r)}normalizeNative(e){if(!G5(this.root,e.startContainer)||!e.collapsed&&!G5(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(i=>{let{node:n,offset:r}=i;for(;!(n instanceof Text)&&n.childNodes.length>0;)if(n.childNodes.length>r)n=n.childNodes[r],r=0;else if(n.childNodes.length===r)n=n.lastChild,n instanceof Text?r=n.data.length:n.childNodes.length>0?r=n.childNodes.length:r=n.childNodes.length+1;else break;i.node=n,i.offset=r}),t}rangeToNative(e){const t=this.scroll.length(),i=(n,r)=>{n=Math.min(t-1,n);const[o,a]=this.scroll.leaf(n);return o?o.position(a,r):[null,-1]};return[...i(e.index,!1),...i(e.index+e.length,!0)]}setNativeRange(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(j5.info("setNativeRange",e,t,i,n),e!=null&&(this.root.parentNode==null||e.parentNode==null||i.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(a==null||r||e!==a.startContainer||t!==a.startOffset||i!==a.endContainer||n!==a.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),i instanceof Element&&i.tagName==="BR"&&(n=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);const l=document.createRange();l.setStart(e,t),l.setEnd(i,n),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt.sources.API;if(typeof t=="string"&&(i=t,t=!1),j5.info("setRange",e),e!=null){const n=this.rangeToNative(e);this.setNativeRange(...n,t)}else this.setNativeRange(null);this.update(i)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt.sources.USER;const t=this.lastRange,[i,n]=this.getRange();if(this.lastRange=i,this.lastNative=n,this.lastRange!=null&&(this.savedRange=this.lastRange),!OF(t,this.lastRange)){if(!this.composing&&n!=null&&n.native.collapsed&&n.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const r=[wt.events.SELECTION_CHANGE,jw(this.lastRange),jw(t),e];this.emitter.emit(wt.events.EDITOR_CHANGE,...r),e!==wt.sources.SILENT&&this.emitter.emit(...r)}}}function G5(s,e){try{e.parentNode}catch{return!1}return s.contains(e)}const nIe=/^[ -~]*$/;class sIe{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const i=X$(e),n=new bt;return oIe(i.ops.slice()).reduce((o,a)=>{const l=nu.Op.length(a);let c=a.attributes||{},h=!1,d=!1;if(a.insert!=null){if(n.retain(l),typeof a.insert=="string"){const b=a.insert;d=!b.endsWith(`
`)&&(t<=o||!!this.scroll.descendant(Jc,o)[0]),this.scroll.insertAt(o,b);const[C,S]=this.scroll.line(o);let E=ep({},Zc(C));if(C instanceof bo){const[x]=C.descendant(Jo,S);x&&(E=ep(E,Zc(x)))}c=nu.AttributeMap.diff(E,c)||{}}else if(typeof a.insert=="object"){const b=Object.keys(a.insert)[0];if(b==null)return o;const C=this.scroll.query(b,Lt.INLINE)!=null;if(C)(t<=o||this.scroll.descendant(Jc,o)[0])&&(d=!0);else if(o>0){const[S,E]=this.scroll.descendant(Jo,o-1);S instanceof dh?S.value()[E]!==`
`&&(h=!0):S instanceof xc&&S.statics.scope===Lt.INLINE_BLOT&&(h=!0)}if(this.scroll.insertAt(o,b,a.insert[b]),C){const[S]=this.scroll.descendant(Jo,o);if(S){const E=ep({},Zc(S));c=nu.AttributeMap.diff(E,c)||{}}}}t+=l}else if(n.push(a),a.retain!==null&&typeof a.retain=="object"){const b=Object.keys(a.retain)[0];if(b==null)return o;this.scroll.updateEmbedAt(o,b,a.retain[b])}Object.keys(c).forEach(b=>{this.scroll.formatAt(o,l,b,c[b])});const g=h?1:0,_=d?1:0;return t+=g+_,n.retain(g),n.delete(_),o+l+g+_},0),n.reduce((o,a)=>typeof a.delete=="number"?(this.scroll.deleteAt(o,a.delete),o):o+nu.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new bt().retain(e).delete(t))}formatLine(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach(r=>{this.scroll.lines(e,Math.max(t,1)).forEach(o=>{o.format(r,i[r])})}),this.scroll.optimize();const n=new bt().retain(e).retain(t,jw(i));return this.update(n)}formatText(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(i).forEach(r=>{this.scroll.formatAt(e,t,r,i[r])});const n=new bt().retain(e).retain(t,jw(i));return this.update(n)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new bt)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],n=[];t===0?this.scroll.path(e).forEach(a=>{const[l]=a;l instanceof bo?i.push(l):l instanceof Jo&&n.push(l)}):(i=this.scroll.lines(e,t),n=this.scroll.descendants(Jo,e,t));const[r,o]=[i,n].map(a=>{const l=a.shift();if(l==null)return{};let c=Zc(l);for(;Object.keys(c).length>0;){const h=a.shift();if(h==null)return c;c=rIe(Zc(h),c)}return c});return{...r,...o}}getHTML(e,t){const[i,n]=this.scroll.line(e);if(i){const r=i.length();return i.length()>=n+t&&!(n===0&&t===r)?p2(i,n,t,!0):p2(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(i=>typeof i.insert=="string").map(i=>i.insert).join("")}insertContents(e,t){const i=X$(t),n=new bt().retain(e).concat(i);return this.scroll.insertContents(e,i),this.update(n)}insertEmbed(e,t,i){return this.scroll.insertAt(e,t,i),this.update(new bt().retain(e).insert({[t]:i}))}insertText(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(i).forEach(n=>{this.scroll.formatAt(e,t.length,n,i[n])}),this.update(new bt().retain(e).insert(t,jw(i)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==bo.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof ph}removeFormat(e,t){const i=this.getText(e,t),[n,r]=this.scroll.line(e+t);let o=0,a=new bt;n!=null&&(o=n.length()-r,a=n.delta().slice(r,r+o-1).insert(`
`));const c=this.getContents(e,t+o).diff(new bt().insert(i).concat(a)),h=new bt().retain(e).concat(c);return this.applyDelta(h)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const n=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(nIe)&&this.scroll.find(t[0].target)){const r=this.scroll.find(t[0].target),o=Zc(r),a=r.offset(this.scroll),l=t[0].oldValue.replace(Zu.CONTENTS,""),c=new bt().insert(l),h=new bt().insert(r.value()),d=i&&{oldRange:Q$(i.oldRange,-a),newRange:Q$(i.newRange,-a)};e=new bt().retain(a).concat(c.diff(h,d)).reduce((_,b)=>b.insert?_.insert(b.insert,o):_.push(b),new bt),this.delta=n.compose(e)}else this.delta=this.getDelta(),(!e||!OF(n.compose(e),this.delta))&&(e=n.diff(this.delta,i));return e}}function Hv(s,e,t){if(s.length===0){const[_]=K5(t.pop());return e<=0?`</li></${_}>`:`</li></${_}>${Hv([],e-1,t)}`}const[{child:i,offset:n,length:r,indent:o,type:a},...l]=s,[c,h]=K5(a);if(o>e)return t.push(a),o===e+1?`<${c}><li${h}>${p2(i,n,r)}${Hv(l,o,t)}`:`<${c}><li>${Hv(s,e+1,t)}`;const d=t[t.length-1];if(o===e&&a===d)return`</li><li${h}>${p2(i,n,r)}${Hv(l,o,t)}`;const[g]=K5(t.pop());return`</li></${g}>${Hv(s,e-1,t)}`}function p2(s,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in s&&typeof s.html=="function")return s.html(e,t);if(s instanceof dh)return t4(s.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(s instanceof sh){if(s.statics.blotName==="list-container"){const c=[];return s.children.forEachAt(e,t,(h,d,g)=>{const _="formats"in h&&typeof h.formats=="function"?h.formats():{};c.push({child:h,offset:d,length:g,indent:_.indent||0,type:_.list})}),Hv(c,-1,[])}const n=[];if(s.children.forEachAt(e,t,(c,h,d)=>{n.push(p2(c,h,d))}),i||s.statics.blotName==="list")return n.join("");const{outerHTML:r,innerHTML:o}=s.domNode,[a,l]=r.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${n.join("")}<${l}`:`${a}>${n.join("")}<${l}`}return s.domNode instanceof Element?s.domNode.outerHTML:""}function rIe(s,e){return Object.keys(e).reduce((t,i)=>{if(s[i]==null)return t;const n=e[i];return n===s[i]?t[i]=n:Array.isArray(n)?n.indexOf(s[i])<0?t[i]=n.concat([s[i]]):t[i]=n:t[i]=[n,s[i]],t},{})}function K5(s){const e=s==="ordered"?"ol":"ul";switch(s){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function X$(s){return s.reduce((e,t)=>{if(typeof t.insert=="string"){const i=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(i,t.attributes)}return e.push(t)},new bt)}function Q$(s,e){let{index:t,length:i}=s;return new E0(t+e,i)}function oIe(s){const e=[];return s.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((n,r)=>{r&&e.push({insert:`
`,attributes:t.attributes}),n&&e.push({insert:n,attributes:t.attributes})}):e.push(t)}),e}class Gd{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}const fD="\uFEFF";class FF extends xc{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(i=>{this.contentNode.appendChild(i)}),this.leftGuard=document.createTextNode(fD),this.rightGuard=document.createTextNode(fD),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,i;const n=e.data.split(fD).join("");if(e===this.leftGuard)if(this.prev instanceof dh){const r=this.prev.length();this.prev.insertAt(r,n),t={startNode:this.prev.domNode,startOffset:r+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this),t={startNode:i,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof dh?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this.next),t={startNode:i,startOffset:n.length}));return e.data=fD,t}update(e,t){e.forEach(i=>{if(i.type==="characterData"&&(i.target===this.leftGuard||i.target===this.rightGuard)){const n=this.restore(i.target);n&&(t.range=n)}})}}class aIe{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof FF)&&(this.emitter.emit(wt.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(wt.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(wt.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(wt.events.COMPOSITION_END,e),this.isComposing=!1}}class PC{static DEFAULTS={modules:{}};static themes={default:PC};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}const lIe=s=>s.parentElement||s.getRootNode().host||null,cIe=s=>{const e=s.getBoundingClientRect(),t="offsetWidth"in s&&Math.abs(e.width)/s.offsetWidth||1,i="offsetHeight"in s&&Math.abs(e.height)/s.offsetHeight||1;return{top:e.top,right:e.left+s.clientWidth*t,bottom:e.top+s.clientHeight*i,left:e.left}},gD=s=>{const e=parseInt(s,10);return Number.isNaN(e)?0:e},J$=(s,e,t,i,n,r)=>s<t&&e>i?0:s<t?-(t-s+n):e>i?e-s>i-t?s+n-t:e-i+r:0,uIe=(s,e)=>{const t=s.ownerDocument;let i=e,n=s;for(;n;){const r=n===t.body,o=r?{top:0,right:window.visualViewport?.width??t.documentElement.clientWidth,bottom:window.visualViewport?.height??t.documentElement.clientHeight,left:0}:cIe(n),a=getComputedStyle(n),l=J$(i.left,i.right,o.left,o.right,gD(a.scrollPaddingLeft),gD(a.scrollPaddingRight)),c=J$(i.top,i.bottom,o.top,o.bottom,gD(a.scrollPaddingTop),gD(a.scrollPaddingBottom));if(l||c)if(r)t.defaultView?.scrollBy(l,c);else{const{scrollLeft:h,scrollTop:d}=n;c&&(n.scrollTop+=c),l&&(n.scrollLeft+=l);const g=n.scrollLeft-h,_=n.scrollTop-d;i={left:i.left-g,top:i.top-_,right:i.right-g,bottom:i.bottom-_}}n=r||a.position==="fixed"?null:lIe(n)}},hIe=100,dIe=["block","break","cursor","inline","scroll","text"],fIe=(s,e,t)=>{const i=new wC;return dIe.forEach(n=>{const r=e.query(n);r&&i.register(r)}),s.forEach(n=>{let r=e.query(n);r||t.error(`Cannot register "${n}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;r;)if(i.register(r),r="blotName"in r?r.requiredContainer??null:null,o+=1,o>hIe){t.error(`Cycle detected in registering blot requiredContainer: "${n}"`);break}}),i},Kw=Ng("quill"),mD=new wC;sh.uiClass="ql-ui";class Be{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:mD,theme:"default"};static events=wt.events;static sources=wt.sources;static version="2.0.3";static imports={delta:bt,parchment:jNe,"core/module":Gd,"core/theme":PC};static debug(e){e===!0&&(e="log"),Ng.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return A6.get(e)||mD.find(e,t)}static import(e){return this.imports[e]==null&&Kw.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),i="attrName"in e?e.attrName:e.blotName;typeof i=="string"?this.register(`formats/${i}`,e,t):Object.keys(e).forEach(n=>{this.register(n,e[n],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!i&&Kw.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&mD.register(t),typeof t.register=="function"&&t.register(mD)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=gIe(e,t),this.container=this.options.container,this.container==null){Kw.error("Invalid Quill container",e);return}this.options.debug&&Be.debug(this.options.debug);const i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",A6.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new wt;const n=BF.blotName,r=this.options.registry.query(n);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${n}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new sIe(this.scroll),this.selection=new iIe(this.scroll,this.emitter),this.composition=new aIe(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(wt.events.EDITOR_CHANGE,o=>{o===wt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(wt.events.SCROLL_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),h=l&&c?{oldRange:l,newRange:c}:void 0;Bu.call(this,()=>this.editor.update(null,a,h),o)}),this.emitter.on(wt.events.SCROLL_EMBED_UPDATE,(o,a)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),h=l&&c?{oldRange:l,newRange:c}:void 0;Bu.call(this,()=>{const d=new bt().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(d,[],h)},Be.sources.USER)}),i){const o=this.clipboard.convert({html:`${i}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const i=e;e=document.createElement("div"),e.classList.add(i)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,i){return[e,t,,i]=Rf(e,t,i),Bu.call(this,()=>this.editor.deleteText(e,t),i,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt.sources.API;return Bu.call(this,()=>{const n=this.getSelection(!0);let r=new bt;if(n==null)return r;if(this.scroll.query(e,Lt.BLOCK))r=this.editor.formatLine(n.index,n.length,{[e]:t});else{if(n.length===0)return this.selection.format(e,t),r;r=this.editor.formatText(n.index,n.length,{[e]:t})}return this.setSelection(n,wt.sources.SILENT),r},i)}formatLine(e,t,i,n,r){let o;return[e,t,o,r]=Rf(e,t,i,n,r),Bu.call(this,()=>this.editor.formatLine(e,t,o),r,e,0)}formatText(e,t,i,n,r){let o;return[e,t,o,r]=Rf(e,t,i,n,r),Bu.call(this,()=>this.editor.formatText(e,t,o),r,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=null;if(typeof e=="number"?i=this.selection.getBounds(e,t):i=this.selection.getBounds(e.index,e.length),!i)return null;const n=this.container.getBoundingClientRect();return{bottom:i.bottom-n.top,height:i.height,left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,width:i.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=Rf(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=Rf(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=Rf(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Be.sources.API;return Bu.call(this,()=>this.editor.insertEmbed(e,t,i),n,e)}insertText(e,t,i,n,r){let o;return[e,,o,r]=Rf(e,0,i,n,r),Bu.call(this,()=>this.editor.insertText(e,t,o),r,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,i){return[e,t,,i]=Rf(e,t,i),Bu.call(this,()=>this.editor.removeFormat(e,t),i,e)}scrollRectIntoView(e){uIe(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;return Bu.call(this,()=>{e=new bt(e);const i=this.getLength(),n=this.editor.deleteText(0,i),r=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return n.compose(r).compose(o)},t)}setSelection(e,t,i){e==null?this.selection.setRange(null,t||Be.sources.API):([e,t,,i]=Rf(e,t,i),this.selection.setRange(new E0(Math.max(0,e),t),i),i!==wt.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;const i=new bt().insert(e);return this.setContents(i,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;return Bu.call(this,()=>(e=new bt(e),this.editor.applyDelta(e)),t,!0)}}function ej(s){return typeof s=="string"?document.querySelector(s):s}function Y5(s){return Object.entries(s??{}).reduce((e,t)=>{let[i,n]=t;return{...e,[i]:n===!0?{}:n}},{})}function tj(s){return Object.fromEntries(Object.entries(s).filter(e=>e[1]!==void 0))}function gIe(s,e){const t=ej(s);if(!t)throw new Error("Invalid Quill container");const n=!e.theme||e.theme===Be.DEFAULTS.theme?PC:Be.import(`themes/${e.theme}`);if(!n)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:r,...o}=Be.DEFAULTS,{modules:a,...l}=n.DEFAULTS;let c=Y5(e.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});const h=ep({},Y5(r),Y5(a),c),d={...o,...tj(l),...tj(e)};let g=e.registry;return g?e.formats&&Kw.warn('Ignoring "formats" option because "registry" is specified'):g=e.formats?fIe(e.formats,d.registry,Kw):d.registry,{...d,registry:g,container:t,theme:n,modules:Object.entries(h).reduce((_,b)=>{let[C,S]=b;if(!S)return _;const E=Be.import(`modules/${C}`);return E==null?(Kw.error(`Cannot load ${C} module. Are you sure you registered it?`),_):{..._,[C]:ep({},E.DEFAULTS||{},S)}},{}),bounds:ej(d.bounds)}}function Bu(s,e,t,i){if(!this.isEnabled()&&e===wt.sources.USER&&!this.allowReadOnlyEdits)return new bt;let n=t==null?null:this.getSelection();const r=this.editor.delta,o=s();if(n!=null&&(t===!0&&(t=n.index),i==null?n=ij(n,o,e):i!==0&&(n=ij(n,t,i,e)),this.setSelection(n,wt.sources.SILENT)),o.length()>0){const a=[wt.events.TEXT_CHANGE,o,r,e];this.emitter.emit(wt.events.EDITOR_CHANGE,...a),e!==wt.sources.SILENT&&this.emitter.emit(...a)}return o}function Rf(s,e,t,i,n){let r={};return typeof s.index=="number"&&typeof s.length=="number"?typeof e!="number"?(n=i,i=t,t=e,e=s.length,s=s.index):(e=s.length,s=s.index):typeof e!="number"&&(n=i,i=t,t=e,e=0),typeof t=="object"?(r=t,n=i):typeof t=="string"&&(i!=null?r[t]=i:n=t),n=n||wt.sources.API,[s,e,r,n]}function ij(s,e,t,i){const n=typeof t=="number"?t:0;if(s==null)return null;let r,o;return e&&typeof e.transformPosition=="function"?[r,o]=[s.index,s.index+s.length].map(a=>e.transformPosition(a,i!==wt.sources.USER)):[r,o]=[s.index,s.index+s.length].map(a=>a<e||a===e&&i===wt.sources.USER?a:n>=0?a+n:Math.max(e,a+n)),new E0(r,o-r)}class Y0 extends e4{}function nj(s){return s instanceof bo||s instanceof Jc}function sj(s){return typeof s.updateContent=="function"}class mIe extends BF{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=bo;static allowedChildren=[bo,Jc,Y0];constructor(e,t,i){let{emitter:n}=i;super(e,t),this.emitter=n,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",r=>this.handleDragStart(r))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(wt.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(wt.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(wt.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[i,n]=this.line(e),[r]=this.line(e+t);if(super.deleteAt(e,t),r!=null&&i!==r&&n>0){if(i instanceof Jc||r instanceof Jc){this.optimize();return}const o=r.children.head instanceof ph?null:r.children.head;i.moveChildren(r,o),i.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,i,n){super.formatAt(e,t,i,n),this.optimize()}insertAt(e,t,i){if(e>=this.length())if(i==null||this.scroll.query(t,Lt.BLOCK)==null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n),i==null&&t.endsWith(`
`)?n.insertAt(0,t.slice(0,-1),i):n.insertAt(0,t,i)}else{const n=this.scroll.create(t,i);this.appendChild(n)}else super.insertAt(e,t,i);this.optimize()}insertBefore(e,t){if(e.statics.scope===Lt.INLINE_BLOT){const i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(e),super.insertBefore(i,t)}else super.insertBefore(e,t)}insertContents(e,t){const i=this.deltaToRenderBlocks(t.concat(new bt().insert(`
`))),n=i.pop();if(n==null)return;this.batchStart();const r=i.shift();if(r){const l=r.type==="block"&&(r.delta.length()===0||!this.descendant(Jc,e)[0]&&e<this.length()),c=r.type==="block"?r.delta:new bt().insert({[r.key]:r.value});Z5(this,e,c);const h=r.type==="block"?1:0,d=e+c.length()+h;l&&this.insertAt(d-1,`
`);const g=Zc(this.line(e)[0]),_=nu.AttributeMap.diff(g,r.attributes)||{};Object.keys(_).forEach(b=>{this.formatAt(d-1,1,b,_[b])}),e=d}let[o,a]=this.children.find(e);if(i.length&&(o&&(o=o.split(a),a=0),i.forEach(l=>{if(l.type==="block"){const c=this.createBlock(l.attributes,o||void 0);Z5(c,0,l.delta)}else{const c=this.create(l.key,l.value);this.insertBefore(c,o||void 0),Object.keys(l.attributes).forEach(h=>{c.format(h,l.attributes[h])})}})),n.type==="block"&&n.delta.length()){const l=o?o.offset(o.scroll)+a:this.length();Z5(this,l,n.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[i,n]=t;return i instanceof Jo?[i,n]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(nj,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const i=(n,r,o)=>{let a=[],l=o;return n.children.forEachAt(r,o,(c,h,d)=>{nj(c)?a.push(c):c instanceof e4&&(a=a.concat(i(c,h,l))),l-=d}),a};return i(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(wt.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=wt.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(i=>{let{target:n}=i;const r=this.find(n,!0);return r&&!sj(r)}),e.length>0&&this.emitter.emit(wt.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(wt.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,i){const[n]=this.descendant(r=>r instanceof Jc,e);n&&n.statics.blotName===t&&sj(n)&&n.updateContent(i)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let i=new bt;return e.forEach(n=>{const r=n?.insert;if(r)if(typeof r=="string"){const o=r.split(`
`);o.slice(0,-1).forEach(l=>{i.insert(l,n.attributes),t.push({type:"block",delta:i,attributes:n.attributes??{}}),i=new bt});const a=o[o.length-1];a&&i.insert(a,n.attributes)}else{const o=Object.keys(r)[0];if(!o)return;this.query(o,Lt.INLINE)?i.push(n):(i.length()&&t.push({type:"block",delta:i,attributes:{}}),i=new bt,t.push({type:"blockEmbed",key:o,value:r[o],attributes:n.attributes??{}}))}}),i.length()&&t.push({type:"block",delta:i,attributes:{}}),t}createBlock(e,t){let i;const n={};Object.entries(e).forEach(a=>{let[l,c]=a;this.query(l,Lt.BLOCK&Lt.BLOT)!=null?i=l:n[l]=c});const r=this.create(i||this.statics.defaultChild.blotName,i?e[i]:void 0);this.insertBefore(r,t||void 0);const o=r.length();return Object.entries(n).forEach(a=>{let[l,c]=a;r.formatAt(0,o,l,c)}),r}}function Z5(s,e,t){t.reduce((i,n)=>{const r=nu.Op.length(n);let o=n.attributes||{};if(n.insert!=null){if(typeof n.insert=="string"){const a=n.insert;s.insertAt(i,a);const[l]=s.descendant(Jo,i),c=Zc(l);o=nu.AttributeMap.diff(c,o)||{}}else if(typeof n.insert=="object"){const a=Object.keys(n.insert)[0];if(a==null)return i;if(s.insertAt(i,a,n.insert[a]),s.scroll.query(a,Lt.INLINE)!=null){const[c]=s.descendant(Jo,i),h=Zc(c);o=nu.AttributeMap.diff(h,o)||{}}}}return Object.keys(o).forEach(a=>{s.formatAt(i,r,a,o[a])}),i+r},e)}const VF={scope:Lt.BLOCK,whitelist:["right","center","justify"]},pIe=new Wd("align","align",VF),pJ=new mh("align","ql-align",VF),_J=new Lp("align","text-align",VF);class bJ extends Lp{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(n=>`00${parseInt(n,10).toString(16)}`.slice(-2)).join("")}`):t}}const _Ie=new mh("color","ql-color",{scope:Lt.INLINE}),HF=new bJ("color","color",{scope:Lt.INLINE}),bIe=new mh("background","ql-bg",{scope:Lt.INLINE}),WF=new bJ("background","background-color",{scope:Lt.INLINE});class Z0 extends Y0{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(i=>i.length()<=1?"":i.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${t4(this.code(e,t))}
</pre>`}}class Ba extends bo{static TAB="  ";static register(){Be.register(Z0)}}class zF extends Ia{}zF.blotName="code";zF.tagName="CODE";Ba.blotName="code-block";Ba.className="ql-code-block";Ba.tagName="DIV";Z0.blotName="code-block-container";Z0.className="ql-code-block-container";Z0.tagName="DIV";Z0.allowedChildren=[Ba];Ba.allowedChildren=[dh,ph,Zu];Ba.requiredContainer=Z0;const UF={scope:Lt.BLOCK,whitelist:["rtl"]},vJ=new Wd("direction","dir",UF),wJ=new mh("direction","ql-direction",UF),CJ=new Lp("direction","direction",UF),yJ={scope:Lt.INLINE,whitelist:["serif","monospace"]},SJ=new mh("font","ql-font",yJ);class vIe extends Lp{value(e){return super.value(e).replace(/["']/g,"")}}const LJ=new vIe("font","font-family",yJ),xJ=new mh("size","ql-size",{scope:Lt.INLINE,whitelist:["small","large","huge"]}),kJ=new Lp("size","font-size",{scope:Lt.INLINE,whitelist:["10px","18px","32px"]}),wIe=Ng("quill:keyboard"),CIe=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class i4 extends Gd{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(i=>!!t[i]!==e[i]&&t[i]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(i=>{this.options.bindings[i]&&this.addBinding(this.options.bindings[i])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=SIe(e);if(n==null){wIe.warn("Attempted to add invalid keyboard binding",n);return}typeof t=="function"&&(t={handler:t}),typeof i=="function"&&(i={handler:i}),(Array.isArray(n.key)?n.key:[n.key]).forEach(o=>{const a={...n,key:o,...t,...i};this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const n=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(E=>i4.match(e,E));if(n.length===0)return;const r=Be.find(e.target,!0);if(r&&r.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[a,l]=this.quill.getLine(o.index),[c,h]=this.quill.getLeaf(o.index),[d,g]=o.length===0?[c,h]:this.quill.getLeaf(o.index+o.length),_=c instanceof KI?c.value().slice(0,h):"",b=d instanceof KI?d.value().slice(g):"",C={collapsed:o.length===0,empty:o.length===0&&a.length()<=1,format:this.quill.getFormat(o),line:a,offset:l,prefix:_,suffix:b,event:e};n.some(E=>{if(E.collapsed!=null&&E.collapsed!==C.collapsed||E.empty!=null&&E.empty!==C.empty||E.offset!=null&&E.offset!==C.offset)return!1;if(Array.isArray(E.format)){if(E.format.every(x=>C.format[x]==null))return!1}else if(typeof E.format=="object"&&!Object.keys(E.format).every(x=>E.format[x]===!0?C.format[x]!=null:E.format[x]===!1?C.format[x]==null:OF(E.format[x],C.format[x])))return!1;return E.prefix!=null&&!E.prefix.test(C.prefix)||E.suffix!=null&&!E.suffix.test(C.suffix)?!1:E.handler.call(this,o,C,E)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let n={};const[r]=this.quill.getLine(e.index);let o=new bt().retain(e.index-i).delete(i);if(t.offset===0){const[a]=this.quill.getLine(e.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){const c=r.formats(),h=this.quill.getFormat(e.index-1,1);if(n=nu.AttributeMap.diff(c,h)||{},Object.keys(n).length>0){const d=new bt().retain(e.index+r.length()-2).retain(1,n);o=o.compose(d)}}}this.quill.updateContents(o,Be.sources.USER),this.quill.focus()}handleDelete(e,t){const i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-i)return;let n={};const[r]=this.quill.getLine(e.index);let o=new bt().retain(e.index).delete(i);if(t.offset>=r.length()-1){const[a]=this.quill.getLine(e.index+1);if(a){const l=r.formats(),c=this.quill.getFormat(e.index,1);n=nu.AttributeMap.diff(l,c)||{},Object.keys(n).length>0&&(o=o.retain(a.length()-1).retain(1,n))}}this.quill.updateContents(o,Be.sources.USER),this.quill.focus()}handleDeleteRange(e){qF({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const i=Object.keys(t.format).reduce((r,o)=>(this.quill.scroll.query(o,Lt.BLOCK)&&!Array.isArray(t.format[o])&&(r[o]=t.format[o]),r),{}),n=new bt().retain(e.index).delete(e.length).insert(`
`,i);this.quill.updateContents(n,Be.sources.USER),this.quill.setSelection(e.index+1,Be.sources.SILENT),this.quill.focus()}}const yIe={bindings:{bold:X5("bold"),italic:X5("italic"),underline:X5("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(s,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",Be.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(s,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",Be.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(s,e){e.format.indent!=null?this.quill.format("indent","-1",Be.sources.USER):e.format.list!=null&&this.quill.format("list",!1,Be.sources.USER)}},"indent code-block":rj(!0),"outdent code-block":rj(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(s){this.quill.deleteText(s.index-1,1,Be.sources.USER)}},tab:{key:"Tab",handler(s,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new bt().retain(s.index).delete(s.length).insert("	");return this.quill.updateContents(t,Be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index+1,Be.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Be.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(s,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(s.index,s.length,t,Be.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(s){const[e,t]=this.quill.getLine(s.index),i={...e.formats(),list:"checked"},n=new bt().retain(s.index).insert(`
`,i).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(n,Be.sources.USER),this.quill.setSelection(s.index+1,Be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(s,e){const[t,i]=this.quill.getLine(s.index),n=new bt().retain(s.index).insert(`
`,e.format).retain(t.length()-i-1).retain(1,{header:null});this.quill.updateContents(n,Be.sources.USER),this.quill.setSelection(s.index+1,Be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(s){const e=this.quill.getModule("table");if(e){const[t,i,n,r]=e.getTable(s),o=LIe(t,i,n,r);if(o==null)return;let a=t.offset();if(o<0){const l=new bt().retain(a).insert(`
`);this.quill.updateContents(l,Be.sources.USER),this.quill.setSelection(s.index+1,s.length,Be.sources.SILENT)}else if(o>0){a+=t.length();const l=new bt().retain(a).insert(`
`);this.quill.updateContents(l,Be.sources.USER),this.quill.setSelection(a,Be.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(s,e){const{event:t,line:i}=e,n=i.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(n-1,Be.sources.USER):this.quill.setSelection(n+i.length(),Be.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(s,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[i,n]=this.quill.getLine(s.index);if(n>t)return!0;let r;switch(e.prefix.trim()){case"[]":case"[ ]":r="unchecked";break;case"[x]":r="checked";break;case"-":case"*":r="bullet";break;default:r="ordered"}this.quill.insertText(s.index," ",Be.sources.USER),this.quill.history.cutoff();const o=new bt().retain(s.index-n).delete(t+1).retain(i.length()-2-n).retain(1,{list:r});return this.quill.updateContents(o,Be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index-t,Be.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(s){const[e,t]=this.quill.getLine(s.index);let i=2,n=e;for(;n!=null&&n.length()<=1&&n.formats()["code-block"];)if(n=n.prev,i-=1,i<=0){const r=new bt().retain(s.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(r,Be.sources.USER),this.quill.setSelection(s.index-1,Be.sources.SILENT),!1}return!0}},"embed left":pD("ArrowLeft",!1),"embed left shift":pD("ArrowLeft",!0),"embed right":pD("ArrowRight",!1),"embed right shift":pD("ArrowRight",!0),"table down":oj(!1),"table up":oj(!0)}};i4.DEFAULTS=yIe;function rj(s){return{key:"Tab",shiftKey:!s,format:{"code-block":!0},handler(e,t){let{event:i}=t;const n=this.quill.scroll.query("code-block"),{TAB:r}=n;if(e.length===0&&!i.shiftKey){this.quill.insertText(e.index,r,Be.sources.USER),this.quill.setSelection(e.index+r.length,Be.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:a,length:l}=e;o.forEach((c,h)=>{s?(c.insertAt(0,r),h===0?a+=r.length:l+=r.length):c.domNode.textContent.startsWith(r)&&(c.deleteAt(0,r.length),h===0?a-=r.length:l-=r.length)}),this.quill.update(Be.sources.USER),this.quill.setSelection(a,l,Be.sources.SILENT)}}}function pD(s,e){return{key:s,shiftKey:e,altKey:null,[s==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(i){let{index:n}=i;s==="ArrowRight"&&(n+=i.length+1);const[r]=this.quill.getLeaf(n);return r instanceof xc?(s==="ArrowLeft"?e?this.quill.setSelection(i.index-1,i.length+1,Be.sources.USER):this.quill.setSelection(i.index-1,Be.sources.USER):e?this.quill.setSelection(i.index,i.length+1,Be.sources.USER):this.quill.setSelection(i.index+i.length+1,Be.sources.USER),!1):!0}}}function X5(s){return{key:s[0],shortKey:!0,handler(e,t){this.quill.format(s,!t.format[s],Be.sources.USER)}}}function oj(s){return{key:s?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const i=s?"prev":"next",n=t.line,r=n.parent[i];if(r!=null){if(r.statics.blotName==="table-row"){let o=r.children.head,a=n;for(;a.prev!=null;)a=a.prev,o=o.next;const l=o.offset(this.quill.scroll)+Math.min(t.offset,o.length()-1);this.quill.setSelection(l,0,Be.sources.USER)}}else{const o=n.table()[i];o!=null&&(s?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,Be.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,Be.sources.USER))}return!1}}}function SIe(s){if(typeof s=="string"||typeof s=="number")s={key:s};else if(typeof s=="object")s=jw(s);else return null;return s.shortKey&&(s[CIe]=s.shortKey,delete s.shortKey),s}function qF(s){let{quill:e,range:t}=s;const i=e.getLines(t);let n={};if(i.length>1){const r=i[0].formats(),o=i[i.length-1].formats();n=nu.AttributeMap.diff(o,r)||{}}e.deleteText(t,Be.sources.USER),Object.keys(n).length>0&&e.formatLine(t.index,1,n,Be.sources.USER),e.setSelection(t.index,Be.sources.SILENT)}function LIe(s,e,t,i){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?i===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const xIe=/font-weight:\s*normal/,kIe=["P","OL","UL"],aj=s=>s&&kIe.includes(s.tagName),EIe=s=>{Array.from(s.querySelectorAll("br")).filter(e=>aj(e.previousElementSibling)&&aj(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},TIe=s=>{Array.from(s.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(xIe)).forEach(e=>{const t=s.createDocumentFragment();t.append(...e.childNodes),e.parentNode?.replaceChild(t,e)})};function DIe(s){s.querySelector('[id^="docs-internal-guid-"]')&&(TIe(s),EIe(s))}const NIe=/\bmso-list:[^;]*ignore/i,IIe=/\bmso-list:[^;]*\bl(\d+)/i,AIe=/\bmso-list:[^;]*\blevel(\d+)/i,RIe=(s,e)=>{const t=s.getAttribute("style"),i=t?.match(IIe);if(!i)return null;const n=Number(i[1]),r=t?.match(AIe),o=r?Number(r[1]):1,a=new RegExp(`@list l${n}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(a),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:n,indent:o,type:c,element:s}},MIe=s=>{const e=Array.from(s.querySelectorAll("[style*=mso-list]")),t=[],i=[];e.forEach(o=>{(o.getAttribute("style")||"").match(NIe)?t.push(o):i.push(o)}),t.forEach(o=>o.parentNode?.removeChild(o));const n=s.documentElement.innerHTML,r=i.map(o=>RIe(o,n)).filter(o=>o);for(;r.length;){const o=[];let a=r.shift();for(;a;)o.push(a),a=r.length&&r[0]?.element===a.element.nextElementSibling&&r[0].id===a.id?r.shift():null;const l=document.createElement("ul");o.forEach(d=>{const g=document.createElement("li");g.setAttribute("data-list",d.type),d.indent>1&&g.setAttribute("class",`ql-indent-${d.indent-1}`),g.innerHTML=d.element.innerHTML,l.appendChild(g)});const c=o[0]?.element,{parentNode:h}=c??{};c&&h?.replaceChild(l,c),o.slice(1).forEach(d=>{let{element:g}=d;h?.removeChild(g)})}};function OIe(s){s.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&MIe(s)}const PIe=[OIe,DIe],BIe=s=>{s.documentElement&&PIe.forEach(e=>{e(s)})},FIe=Ng("quill:clipboard"),VIe=[[Node.TEXT_NODE,QIe],[Node.TEXT_NODE,cj],["br",$Ie],[Node.ELEMENT_NODE,cj],[Node.ELEMENT_NODE,qIe],[Node.ELEMENT_NODE,UIe],[Node.ELEMENT_NODE,ZIe],["li",KIe],["ol, ul",YIe],["pre",jIe],["tr",XIe],["b",Q5("bold")],["i",Q5("italic")],["strike",Q5("strike")],["style",GIe]],HIe=[pIe,vJ].reduce((s,e)=>(s[e.keyName]=e,s),{}),lj=[_J,WF,HF,CJ,LJ,kJ].reduce((s,e)=>(s[e.keyName]=e,s),{});class WIe extends Gd{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",i=>this.onCaptureCopy(i,!1)),this.quill.root.addEventListener("cut",i=>this.onCaptureCopy(i,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],VIe.concat(this.options.matchers??[]).forEach(i=>{let[n,r]=i;this.addMatcher(n,r)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:i}=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n[Ba.blotName])return new bt().insert(i||"",{[Ba.blotName]:n[Ba.blotName]});if(!t)return new bt().insert(i||"",n);const r=this.convertHTML(t);return ek(r,`
`)&&(r.ops[r.ops.length-1].attributes==null||n.table)?r.compose(new bt().retain(r.length()-1).delete(1)):r}normalizeHTML(e){BIe(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const i=t.body,n=new WeakMap,[r,o]=this.prepareMatching(i,n);return $F(this.quill.scroll,i,r,o,n)}dangerouslyPasteHTML(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Be.sources.API;if(typeof e=="string"){const n=this.convert({html:e,text:""});this.quill.setContents(n,t),this.quill.setSelection(0,Be.sources.SILENT)}else{const n=this.convert({html:t,text:""});this.quill.updateContents(new bt().retain(e).concat(n),i),this.quill.setSelection(e+n.length(),Be.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[i]=this.quill.selection.getRange();if(i==null)return;const{html:n,text:r}=this.onCopy(i,t);e.clipboardData?.setData("text/plain",r),e.clipboardData?.setData("text/html",n),t&&qF({range:i,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const i=e.clipboardData?.getData("text/html");let n=e.clipboardData?.getData("text/plain");if(!i&&!n){const o=e.clipboardData?.getData("text/uri-list");o&&(n=this.normalizeURIList(o))}const r=Array.from(e.clipboardData?.files||[]);if(!i&&r.length>0){this.quill.uploader.upload(t,r);return}if(i&&r.length>0){const o=new DOMParser().parseFromString(i,"text/html");if(o.body.childElementCount===1&&o.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(t,r);return}}this.onPaste(t,{html:i,text:n})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:i,html:n}=t;const r=this.quill.getFormat(e.index),o=this.convert({text:i,html:n},r);FIe.log("onPaste",o,{text:i,html:n});const a=new bt().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(a,Be.sources.USER),this.quill.setSelection(a.length()-e.length,Be.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const i=[],n=[];return this.matchers.forEach(r=>{const[o,a]=r;switch(o){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:i.push(a);break;default:Array.from(e.querySelectorAll(o)).forEach(l=>{t.has(l)?t.get(l)?.push(a):t.set(l,[a])});break}}),[i,n]}}function X0(s,e,t,i){return i.query(e)?s.reduce((n,r)=>{if(!r.insert)return n;if(r.attributes&&r.attributes[e])return n.push(r);const o=t?{[e]:t}:{};return n.insert(r.insert,{...o,...r.attributes})},new bt):s}function ek(s,e){let t="";for(let i=s.ops.length-1;i>=0&&t.length<e.length;--i){const n=s.ops[i];if(typeof n.insert!="string")break;t=n.insert+t}return t.slice(-1*e.length)===e}function Gm(s,e){if(!(s instanceof Element))return!1;const t=e.query(s);return t&&t.prototype instanceof xc?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(s.tagName.toLowerCase())}function zIe(s,e){return s.previousElementSibling&&s.nextElementSibling&&!Gm(s.previousElementSibling,e)&&!Gm(s.nextElementSibling,e)}const _D=new WeakMap;function EJ(s){return s==null?!1:(_D.has(s)||(s.tagName==="PRE"?_D.set(s,!0):_D.set(s,EJ(s.parentNode))),_D.get(s))}function $F(s,e,t,i,n){return e.nodeType===e.TEXT_NODE?i.reduce((r,o)=>o(e,r,s),new bt):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((r,o)=>{let a=$F(s,o,t,i,n);return o.nodeType===e.ELEMENT_NODE&&(a=t.reduce((l,c)=>c(o,l,s),a),a=(n.get(o)||[]).reduce((l,c)=>c(o,l,s),a)),r.concat(a)},new bt):new bt}function Q5(s){return(e,t,i)=>X0(t,s,!0,i)}function UIe(s,e,t){const i=Wd.keys(s),n=mh.keys(s),r=Lp.keys(s),o={};return i.concat(n).concat(r).forEach(a=>{let l=t.query(a,Lt.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(s),o[l.attrName])||(l=HIe[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(s)||void 0),l=lj[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=lj[a],o[l.attrName]=l.value(s)||void 0))}),Object.entries(o).reduce((a,l)=>{let[c,h]=l;return X0(a,c,h,t)},e)}function qIe(s,e,t){const i=t.query(s);if(i==null)return e;if(i.prototype instanceof xc){const n={},r=i.value(s);if(r!=null)return n[i.blotName]=r,new bt().insert(n,i.formats(s,t))}else if(i.prototype instanceof m2&&!ek(e,`
`)&&e.insert(`
`),"blotName"in i&&"formats"in i&&typeof i.formats=="function")return X0(e,i.blotName,i.formats(s,t),t);return e}function $Ie(s,e){return ek(e,`
`)||e.insert(`
`),e}function jIe(s,e,t){const i=t.query("code-block"),n=i&&"formats"in i&&typeof i.formats=="function"?i.formats(s,t):!0;return X0(e,"code-block",n,t)}function GIe(){return new bt}function KIe(s,e,t){const i=t.query(s);if(i==null||i.blotName!=="list"||!ek(e,`
`))return e;let n=-1,r=s.parentNode;for(;r!=null;)["OL","UL"].includes(r.tagName)&&(n+=1),r=r.parentNode;return n<=0?e:e.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,{indent:n,...a.attributes||{}}):o,new bt)}function YIe(s,e,t){const i=s;let n=i.tagName==="OL"?"ordered":"bullet";const r=i.getAttribute("data-checked");return r&&(n=r==="true"?"checked":"unchecked"),X0(e,"list",n,t)}function cj(s,e,t){if(!ek(e,`
`)){if(Gm(s,t)&&(s.childNodes.length>0||s instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&s.nextSibling){let i=s.nextSibling;for(;i!=null;){if(Gm(i,t))return e.insert(`
`);const n=t.query(i);if(n&&n.prototype instanceof Jc)return e.insert(`
`);i=i.firstChild}}}return e}function ZIe(s,e,t){const i={},n=s.style||{};return n.fontStyle==="italic"&&(i.italic=!0),n.textDecoration==="underline"&&(i.underline=!0),n.textDecoration==="line-through"&&(i.strike=!0),(n.fontWeight?.startsWith("bold")||parseInt(n.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce((r,o)=>{let[a,l]=o;return X0(r,a,l,t)},e),parseFloat(n.textIndent||0)>0?new bt().insert("	").concat(e):e}function XIe(s,e,t){const i=s.parentElement?.tagName==="TABLE"?s.parentElement:s.parentElement?.parentElement;if(i!=null){const r=Array.from(i.querySelectorAll("tr")).indexOf(s)+1;return X0(e,"table",r,t)}return e}function QIe(s,e,t){let i=s.data;if(s.parentElement?.tagName==="O:P")return e.insert(i.trim());if(!EJ(s)){if(i.trim().length===0&&i.includes(`
`)&&!zIe(s,t))return e;i=i.replace(/[^\S\u00a0]/g," "),i=i.replace(/ {2,}/g," "),(s.previousSibling==null&&s.parentElement!=null&&Gm(s.parentElement,t)||s.previousSibling instanceof Element&&Gm(s.previousSibling,t))&&(i=i.replace(/^ /,"")),(s.nextSibling==null&&s.parentElement!=null&&Gm(s.parentElement,t)||s.nextSibling instanceof Element&&Gm(s.nextSibling,t))&&(i=i.replace(/ $/,"")),i=i.replaceAll(" "," ")}return e.insert(i)}class JIe extends Gd{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(Be.events.EDITOR_CHANGE,(i,n,r,o)=>{i===Be.events.SELECTION_CHANGE?n&&o!==Be.sources.SILENT&&(this.currentRange=n):i===Be.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===Be.sources.USER?this.record(n,r):this.transform(n)),this.currentRange=O6(this.currentRange,n))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;const i=this.stack[e].pop();if(!i)return;const n=this.quill.getContents(),r=i.delta.invert(n);this.stack[t].push({delta:r,range:O6(i.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,Be.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let i=e.invert(t),n=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(i=i.compose(o.delta),n=o.range)}else this.lastRecorded=r;i.length()!==0&&(this.stack.undo.push({delta:i,range:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){uj(this.stack.undo,e),uj(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,Be.sources.USER);else{const t=tAe(this.quill.scroll,e.delta);this.quill.setSelection(t,Be.sources.USER)}}}function uj(s,e){let t=e;for(let i=s.length-1;i>=0;i-=1){const n=s[i];s[i]={delta:t.transform(n.delta,!0),range:n.range&&O6(n.range,t)},t=n.delta.transform(t),s[i].delta.length()===0&&s.splice(i,1)}}function eAe(s,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(i=>s.query(i,Lt.BLOCK)!=null):!1}function tAe(s,e){const t=e.reduce((n,r)=>n+(r.delete||0),0);let i=e.length()-t;return eAe(s,e)&&(i-=1),i}function O6(s,e){if(!s)return s;const t=e.transformPosition(s.index),i=e.transformPosition(s.index+s.length);return{index:t,length:i-t}}class TJ extends Gd{constructor(e,t){super(e,t),e.root.addEventListener("drop",i=>{i.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(i.clientX,i.clientY);n=document.createRange(),n.setStart(o.offsetNode,o.offset),n.setEnd(o.offsetNode,o.offset)}const r=n&&e.selection.normalizeNative(n);if(r){const o=e.selection.normalizedToRange(r);i.dataTransfer?.files&&this.upload(o,i.dataTransfer.files)}})}upload(e,t){const i=[];Array.from(t).forEach(n=>{n&&this.options.mimetypes?.includes(n.type)&&i.push(n)}),i.length>0&&this.options.handler.call(this,e,i)}}TJ.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(s,e){if(!this.quill.scroll.query("image"))return;const t=e.map(i=>new Promise(n=>{const r=new FileReader;r.onload=()=>{n(r.result)},r.readAsDataURL(i)}));Promise.all(t).then(i=>{const n=i.reduce((r,o)=>r.insert({image:o}),new bt().retain(s.index).delete(s.length));this.quill.updateContents(n,wt.sources.USER),this.quill.setSelection(s.index+i.length,wt.sources.SILENT)})}};const iAe=["insertText","insertReplacementText"];class nAe extends Gd{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",i=>{this.handleBeforeInput(i)}),/Android/i.test(navigator.userAgent)||e.on(Be.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){qF({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const i=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new bt().retain(e.index).insert(t,i),Be.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,Be.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!iAe.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const i=sAe(e);if(i==null)return;const n=this.quill.selection.normalizeNative(t),r=n?this.quill.selection.normalizedToRange(n):null;r&&this.replaceText(r,i)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function sAe(s){return typeof s.data=="string"?s.data:s.dataTransfer?.types.includes("text/plain")?s.dataTransfer.getData("text/plain"):null}const rAe=/Mac/i.test(navigator.platform),oAe=100,aAe=s=>!!(s.key==="ArrowLeft"||s.key==="ArrowRight"||s.key==="ArrowUp"||s.key==="ArrowDown"||s.key==="Home"||rAe&&s.key==="a"&&s.ctrlKey===!0);class lAe extends Gd{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,t){let{line:i,event:n}=t;if(!(i instanceof sh)||!i.uiNode)return!0;const r=getComputedStyle(i.domNode).direction==="rtl";return r&&n.key!=="ArrowRight"||!r&&n.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(n.shiftKey?1:0),Be.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&aAe(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+oAe,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;const i=this.quill.scroll.find(t.startContainer);if(!(i instanceof sh)||!i.uiNode)return;const n=document.createRange();n.setStartAfter(i.uiNode),n.setEndAfter(i.uiNode),e.removeAllRanges(),e.addRange(n)}}Be.register({"blots/block":bo,"blots/block/embed":Jc,"blots/break":ph,"blots/container":Y0,"blots/cursor":Zu,"blots/embed":FF,"blots/inline":Ia,"blots/scroll":mIe,"blots/text":dh,"modules/clipboard":WIe,"modules/history":JIe,"modules/keyboard":i4,"modules/uploader":TJ,"modules/input":nAe,"modules/uiNode":lAe});class cAe extends mh{add(e,t){let i=0;if(t==="+1"||t==="-1"){const n=this.value(e)||0;i=t==="+1"?n+1:n-1}else typeof t=="number"&&(i=t);return i===0?(this.remove(e),!0):super.add(e,i.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const uAe=new cAe("indent","ql-indent",{scope:Lt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class hAe extends bo{static blotName="blockquote";static tagName="blockquote"}class dAe extends bo{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class tk extends Y0{}tk.blotName="list-container";tk.tagName="OL";class ik extends bo{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){Be.register(tk)}constructor(e,t){super(e,t);const i=t.ownerDocument.createElement("span"),n=r=>{if(!e.isEnabled())return;const o=this.statics.formats(t,e);o==="checked"?(this.format("list","unchecked"),r.preventDefault()):o==="unchecked"&&(this.format("list","checked"),r.preventDefault())};i.addEventListener("mousedown",n),i.addEventListener("touchstart",n),this.attachUI(i)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}ik.blotName="list";ik.tagName="LI";tk.allowedChildren=[ik];ik.requiredContainer=tk;class jF extends Ia{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class fAe extends jF{static blotName="italic";static tagName=["EM","I"]}class YI extends Ia{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return DJ(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}function DJ(s,e){const t=document.createElement("a");t.href=s;const i=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(i)>-1}class gAe extends Ia{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class mAe extends jF{static blotName="strike";static tagName=["S","STRIKE"]}class pAe extends Ia{static blotName="underline";static tagName="U"}class _Ae extends FF{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const hj=["alt","height","width"];class bAe extends xc{static blotName="image";static tagName="IMG";static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return hj.reduce((t,i)=>(e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return DJ(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){hj.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}}const dj=["height","width"];class vAe extends Jc{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return dj.reduce((t,i)=>(e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t),{})}static sanitize(e){return YI.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){dj.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const iL=new mh("code-token","hljs",{scope:Lt.INLINE});class Cg extends Ia{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(Ba.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,i){super(e,t,i),iL.add(this.domNode,i)}format(e,t){e!==Cg.blotName?super.format(e,t):t?iL.add(this.domNode,t):(iL.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),iL.value(this.domNode)||this.unwrap()}}Cg.blotName="code-token";Cg.className="ql-token";class Xc extends Ba{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),Cg.blotName,!1),super.replaceWith(e,t)}}class qL extends Z0{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===Xc.blotName&&(this.forceNext=!0,this.children.forEach(i=>{i.format(e,t)}))}formatAt(e,t,i,n){i===Xc.blotName&&(this.forceNext=!0),super.formatAt(e,t,i,n)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const n=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,r=Xc.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){const o=this.children.reduce((l,c)=>l.concat(gJ(c,!1)),new bt),a=e(n,r);o.diff(a).reduce((l,c)=>{let{retain:h,attributes:d}=c;return h?(d&&Object.keys(d).forEach(g=>{[Xc.blotName,Cg.blotName].includes(g)&&this.formatAt(l,h,g,d[g])}),l+h):l},0)}this.cachedText=n,this.forceNext=!1}}html(e,t){const[i]=this.children.find(e);return`<pre data-language="${i?Xc.formats(i.domNode):"plain"}">
${t4(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=Xc.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}qL.allowedChildren=[Xc];Xc.requiredContainer=qL;Xc.allowedChildren=[Cg,Zu,dh,ph];const wAe=(s,e,t)=>{if(typeof s.versionString=="string"){const i=s.versionString.split(".")[0];if(parseInt(i,10)>=11)return s.highlight(t,{language:e}).value}return s.highlight(e,t).value};class NJ extends Gd{static register(){Be.register(Cg,!0),Be.register(Xc,!0),Be.register(qL,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((i,n)=>{let{key:r}=n;return i[r]=!0,i},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Be.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof qL))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(i=>{let{key:n,label:r}=i;const o=t.ownerDocument.createElement("option");o.textContent=r,o.setAttribute("value",n),t.appendChild(o)}),t.addEventListener("change",()=>{e.format(Xc.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=Xc.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(Be.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Be.sources.USER);const i=this.quill.getSelection();(e==null?this.quill.scroll.descendants(qL):[e]).forEach(r=>{r.highlight(this.highlightBlot,t)}),this.quill.update(Be.sources.SILENT),i!=null&&this.quill.setSelection(i,Be.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return t4(e).split(`
`).reduce((n,r,o)=>(o!==0&&n.insert(`
`,{[Ba.blotName]:t}),n.insert(r)),new bt);const i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(Ba.className),i.innerHTML=wAe(this.options.hljs,t,e),$F(this.quill.scroll,i,[(n,r)=>{const o=iL.value(n);return o?r.compose(new bt().retain(r.length(),{[Cg.blotName]:o})):r}],[(n,r)=>n.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[Ba.blotName]:t}),o.insert(a)),r)],new WeakMap)}}NJ.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Ju extends bo{static blotName="table";static tagName="TD";static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",GF()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===Ju.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class T0 extends Y0{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),i=this.next.children.head.formats(),n=this.next.children.tail.formats();return e.table===t.table&&e.table===i.table&&e.table===n.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const i=t.formats(),n=t.next.formats();if(i.table!==n.table){const r=this.splitAfter(t);r&&r.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class tp extends Y0{static blotName="table-body";static tagName="TBODY"}class ZI extends Y0{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(T0),t=e.reduce((i,n)=>Math.max(n.children.length,i),0);e.forEach(i=>{new Array(t-i.children.length).fill(0).forEach(()=>{let n;i.children.head!=null&&(n=Ju.formats(i.children.head.domNode));const r=this.scroll.create(Ju.blotName,n);i.appendChild(r),r.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(tp);t==null||t.children.head==null||t.children.forEach(i=>{const n=i.children.at(e);n?.remove()})}insertColumn(e){const[t]=this.descendant(tp);t==null||t.children.head==null||t.children.forEach(i=>{const n=i.children.at(e),r=Ju.formats(i.children.head.domNode),o=this.scroll.create(Ju.blotName,r);i.insertBefore(o,n)})}insertRow(e){const[t]=this.descendant(tp);if(t==null||t.children.head==null)return;const i=GF(),n=this.scroll.create(T0.blotName);t.children.head.children.forEach(()=>{const o=this.scroll.create(Ju.blotName,i);n.appendChild(o)});const r=t.children.at(e);t.insertBefore(n,r)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}ZI.allowedChildren=[tp];tp.requiredContainer=ZI;tp.allowedChildren=[T0];T0.requiredContainer=tp;T0.allowedChildren=[Ju];Ju.requiredContainer=T0;function GF(){return`row-${Math.random().toString(36).slice(2,6)}`}class CAe extends Gd{static register(){Be.register(Ju),Be.register(T0),Be.register(tp),Be.register(ZI)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(ZI).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(Be.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(Be.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(Be.sources.USER),this.quill.setSelection(t,Be.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,i]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==Ju.blotName)return[null,null,null,-1];const n=t.parent;return[n.parent.parent,n,t,i]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[i,n,r]=this.getTable(t);if(r==null)return;const o=r.cellOffset();i.insertColumn(o+e),this.quill.update(Be.sources.USER);let a=n.rowOffset();e===0&&(a+=1),this.quill.setSelection(t.index+a,t.length,Be.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[i,n,r]=this.getTable(t);if(r==null)return;const o=n.rowOffset();i.insertRow(o+e),this.quill.update(Be.sources.USER),e>0?this.quill.setSelection(t,Be.sources.SILENT):this.quill.setSelection(t.index+n.children.length,t.length,Be.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const i=this.quill.getSelection();if(i==null)return;const n=new Array(e).fill(0).reduce(r=>{const o=new Array(t).fill(`
`).join("");return r.insert(o,{table:GF()})},new bt().retain(i.index));this.quill.updateContents(n,Be.sources.USER),this.quill.setSelection(i.index,Be.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Be.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(Be.events.TEXT_CHANGE,(i,n,r)=>{r===Be.sources.USER&&this.balanceTables()}),!0):!1)})}}const fj=Ng("quill:toolbar");class KF extends Gd{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),yAe(i,this.options.container),e.container?.parentNode?.insertBefore(i,e.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){fj.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{const n=this.options.handlers?.[i];n&&this.addHandler(i,n)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(Be.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(n=>n.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){fj.warn("ignoring attaching to nonexistent format",t,e);return}const i=e.tagName==="SELECT"?"change":"click";e.addEventListener(i,n=>{let r;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const a=e.options[e.selectedIndex];a.hasAttribute("selected")?r=!1:r=a.value||!1}else e.classList.contains("ql-active")?r=!1:r=e.value||!e.hasAttribute("value"),n.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,r);else if(this.quill.scroll.query(t).prototype instanceof xc){if(r=prompt(`Enter ${t}`),!r)return;this.quill.updateContents(new bt().retain(o.index).delete(o.length).insert({[t]:r}),Be.sources.USER)}else this.quill.format(t,r,Be.sources.USER);this.update(o)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(i=>{const[n,r]=i;if(r.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(t[n]==null)o=r.querySelector("option[selected]");else if(!Array.isArray(t[n])){let a=t[n];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=r.querySelector(`option[value="${a}"]`)}o==null?(r.value="",r.selectedIndex=-1):o.selected=!0}else if(e==null)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const o=t[n],a=o===r.getAttribute("value")||o!=null&&o.toString()===r.getAttribute("value")||o==null&&!r.getAttribute("value");r.classList.toggle("ql-active",a),r.setAttribute("aria-pressed",a.toString())}else{const o=t[n]!=null;r.classList.toggle("ql-active",o),r.setAttribute("aria-pressed",o.toString())}})}}KF.DEFAULTS={};function gj(s,e,t){const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${e}`),i.setAttribute("aria-pressed","false"),t!=null?(i.value=t,i.setAttribute("aria-label",`${e}: ${t}`)):i.setAttribute("aria-label",e),s.appendChild(i)}function yAe(s,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const i=document.createElement("span");i.classList.add("ql-formats"),t.forEach(n=>{if(typeof n=="string")gj(i,n);else{const r=Object.keys(n)[0],o=n[r];Array.isArray(o)?SAe(i,r,o):gj(i,r,o)}}),s.appendChild(i)})}function SAe(s,e,t){const i=document.createElement("select");i.classList.add(`ql-${e}`),t.forEach(n=>{const r=document.createElement("option");n!==!1?r.setAttribute("value",String(n)):r.setAttribute("selected","selected"),i.appendChild(r)}),s.appendChild(i)}KF.DEFAULTS={container:null,handlers:{clean(){const s=this.quill.getSelection();if(s!=null)if(s.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Lt.INLINE)!=null&&this.quill.format(t,!1,Be.sources.USER)})}else this.quill.removeFormat(s.index,s.length,Be.sources.USER)},direction(s){const{align:e}=this.quill.getFormat();s==="rtl"&&e==null?this.quill.format("align","right",Be.sources.USER):!s&&e==="right"&&this.quill.format("align",!1,Be.sources.USER),this.quill.format("direction",s,Be.sources.USER)},indent(s){const e=this.quill.getSelection(),t=this.quill.getFormat(e),i=parseInt(t.indent||0,10);if(s==="+1"||s==="-1"){let n=s==="+1"?1:-1;t.direction==="rtl"&&(n*=-1),this.quill.format("indent",i+n,Be.sources.USER)}},link(s){s===!0&&(s=prompt("Enter link URL:")),this.quill.format("link",s,Be.sources.USER)},list(s){const e=this.quill.getSelection(),t=this.quill.getFormat(e);s==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,Be.sources.USER):this.quill.format("list","unchecked",Be.sources.USER):this.quill.format("list",s,Be.sources.USER)}}};const LAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',xAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',kAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',EAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',TAe='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',DAe='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',NAe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',IAe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',mj='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',AAe='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',RAe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',MAe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',OAe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',PAe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',BAe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',FAe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',VAe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',HAe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',WAe='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',zAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',UAe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',qAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',$Ae='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',jAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',GAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',KAe='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',YAe='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',ZAe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',XAe='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',QAe='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',JAe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',eRe='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',tRe='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',_2={align:{"":LAe,center:xAe,right:kAe,justify:EAe},background:TAe,blockquote:DAe,bold:NAe,clean:IAe,code:mj,"code-block":mj,color:AAe,direction:{"":RAe,rtl:MAe},formula:OAe,header:{1:PAe,2:BAe,3:FAe,4:VAe,5:HAe,6:WAe},italic:zAe,image:UAe,indent:{"+1":qAe,"-1":$Ae},link:jAe,list:{bullet:GAe,check:KAe,ordered:YAe},script:{sub:ZAe,super:XAe},strike:QAe,table:JAe,underline:eRe,video:tRe},iRe='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let pj=0;function _j(s,e){s.setAttribute(e,`${s.getAttribute(e)!=="true"}`)}class n4{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),_j(this.label,"aria-expanded"),_j(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const i=e.getAttribute("value");return i&&t.setAttribute("data-value",i),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.selectItem(t,!0),n.preventDefault();break;case"Escape":this.escape(),n.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=iRe,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${pj}`,pj+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const i=this.buildItem(t);e.appendChild(i),t.selected===!0&&this.selectItem(i)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.container.querySelector(".ql-selected");e!==i&&(i?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const i=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(i)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class IJ extends n4{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(i=>{i.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const i=this.label.querySelector(".ql-color-label"),n=e&&e.getAttribute("data-value")||"";i&&(i.tagName==="line"?i.style.stroke=n:i.style.fill=n)}}class AJ extends n4{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(i=>{i.innerHTML=t[i.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const i=e||this.defaultItem;if(i!=null){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}}const nRe=s=>{const{overflowY:e}=getComputedStyle(s,null);return e!=="visible"&&e!=="clip"};class RJ{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,nRe(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,i=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");const n=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let o=0;if(r.right>n.right&&(o=n.right-r.right,this.root.style.left=`${t+o}px`),r.left<n.left&&(o=n.left-r.left,this.root.style.left=`${t+o}px`),r.bottom>n.bottom){const a=r.bottom-r.top,l=e.bottom-e.top+a;this.root.style.top=`${i-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const sRe=[!1,"center","right","justify"],rRe=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],oRe=[!1,"serif","monospace"],aRe=["1","2","3",!1],lRe=["small",!1,"large","huge"];class nk extends PC{constructor(e,t){super(e,t);const i=n=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",i);return}this.tooltip!=null&&!this.tooltip.root.contains(n.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(r=>{r.container.contains(n.target)||r.close()})};e.emitter.listenDOM("click",document.body,i)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(i=>{(i.getAttribute("class")||"").split(/\s+/).forEach(r=>{if(r.startsWith("ql-")&&(r=r.slice(3),t[r]!=null))if(r==="direction")i.innerHTML=t[r][""]+t[r].rtl;else if(typeof t[r]=="string")i.innerHTML=t[r];else{const o=i.value||"";o!=null&&t[r][o]&&(i.innerHTML=t[r][o])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(n=>{if(n.classList.contains("ql-align")&&(n.querySelector("option")==null&&HS(n,sRe),typeof t.align=="object"))return new AJ(n,t.align);if(n.classList.contains("ql-background")||n.classList.contains("ql-color")){const r=n.classList.contains("ql-background")?"background":"color";return n.querySelector("option")==null&&HS(n,rRe,r==="background"?"#ffffff":"#000000"),new IJ(n,t[r])}return n.querySelector("option")==null&&(n.classList.contains("ql-font")?HS(n,oRe):n.classList.contains("ql-header")?HS(n,aRe):n.classList.contains("ql-size")&&HS(n,lRe)),new n4(n)});const i=()=>{this.pickers.forEach(n=>{n.update()})};this.quill.on(wt.events.EDITOR_CHANGE,i)}}nk.DEFAULTS=ep({},PC.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let s=this.container.querySelector("input.ql-image[type=file]");s==null&&(s=document.createElement("input"),s.setAttribute("type","file"),s.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),s.classList.add("ql-image"),s.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,s.files),s.value=""}),this.container.appendChild(s)),s.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class MJ extends RJ{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const i=this.quill.getBounds(this.quill.selection.savedRange);i!=null&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,wt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,wt.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=cRe(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const i=t.index+t.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),e,wt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(i+1," ",wt.sources.USER),this.quill.setSelection(i+2,wt.sources.USER)}break}}this.textbox.value="",this.hide()}}function cRe(s){let e=s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=s.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:s}function HS(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(i=>{const n=document.createElement("option");i===t?n.setAttribute("selected","selected"):n.setAttribute("value",String(i)),s.appendChild(n)})}const uRe=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class hRe extends MJ{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,t){super(e,t),this.quill.on(wt.events.EDITOR_CHANGE,(i,n,r,o)=>{if(i===wt.events.SELECTION_CHANGE)if(n!=null&&n.length>0&&o===wt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(n.index,n.length);if(a.length===1){const l=this.quill.getBounds(n);l!=null&&this.position(l)}else{const l=a[a.length-1],c=this.quill.getIndex(l),h=Math.min(l.length()-1,n.index+n.length-c),d=this.quill.getBounds(new E0(c,h));d!=null&&this.position(d)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(wt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",t!==0&&(i.style.marginLeft=`${-1*t-i.offsetWidth/2}px`),t}}class OJ extends nk{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=uRe),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new hRe(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),_2),this.buildPickers(e.container.querySelectorAll("select"),_2))}}OJ.DEFAULTS=ep({},nk.DEFAULTS,{modules:{toolbar:{handlers:{link(s){s?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Be.sources.USER)}}}}});const dRe=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class fRe extends MJ{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,wt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(wt.events.SELECTION_CHANGE,(e,t,i)=>{if(e!=null){if(e.length===0&&i===wt.sources.USER){const[n,r]=this.quill.scroll.descendant(YI,e.index);if(n!=null){this.linkRange=new E0(e.index-r,n.length());const o=YI.formats(n.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const a=this.quill.getBounds(this.linkRange);a!=null&&this.position(a);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class PJ extends nk{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=dRe),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),_2),this.buildPickers(e.container.querySelectorAll("select"),_2),this.tooltip=new fRe(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,i)=>{e.handlers.link.call(e,!i.format.link)}))}}PJ.DEFAULTS=ep({},nk.DEFAULTS,{modules:{toolbar:{handlers:{link(s){if(s){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:i}=this.quill.theme;i.edit("link",t)}else this.quill.format("link",!1,Be.sources.USER)}}}}});Be.register({"attributors/attribute/direction":vJ,"attributors/class/align":pJ,"attributors/class/background":bIe,"attributors/class/color":_Ie,"attributors/class/direction":wJ,"attributors/class/font":SJ,"attributors/class/size":xJ,"attributors/style/align":_J,"attributors/style/background":WF,"attributors/style/color":HF,"attributors/style/direction":CJ,"attributors/style/font":LJ,"attributors/style/size":kJ},!0);Be.register({"formats/align":pJ,"formats/direction":wJ,"formats/indent":uAe,"formats/background":WF,"formats/color":HF,"formats/font":SJ,"formats/size":xJ,"formats/blockquote":hAe,"formats/code-block":Ba,"formats/header":dAe,"formats/list":ik,"formats/bold":jF,"formats/code":zF,"formats/italic":fAe,"formats/link":YI,"formats/script":gAe,"formats/strike":mAe,"formats/underline":pAe,"formats/formula":_Ae,"formats/image":bAe,"formats/video":vAe,"modules/syntax":NJ,"modules/table":CAe,"modules/toolbar":KF,"themes/bubble":OJ,"themes/snow":PJ,"ui/icons":_2,"ui/picker":n4,"ui/icon-picker":AJ,"ui/color-picker":IJ,"ui/tooltip":RJ},!0);const gRe="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-0.24%20-0.24%2024.48%2024.48'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%20id='Communication%20/%20Chat_Conversation_Circle'%3e%3cpath%20id='Vector'%20d='M9.33814%2015.9905C12.4946%2015.8151%2015%2013.2003%2015%2010C15%206.68629%2012.3137%204%209%204C5.68629%204%203%206.68629%203%2010C3%2011.1807%203.34094%2012.2817%203.92989%2013.21L3.50586%2014.482L3.50518%2014.4839C3.34278%2014.9711%203.26154%2015.2149%203.31938%2015.3771C3.36979%2015.5184%203.48169%2015.6299%203.62305%2015.6803C3.78472%2015.7379%204.02675%2015.6573%204.51069%2015.4959L4.51758%2015.4939L5.79004%2015.0698C6.7183%2015.6588%207.81935%2015.9998%209.00006%2015.9998C9.11352%2015.9998%209.22624%2015.9967%209.33814%2015.9905ZM9.33814%2015.9905C9.33822%2015.9907%209.33806%2015.9902%209.33814%2015.9905ZM9.33814%2015.9905C10.1591%2018.3259%2012.3841%2020.0002%2015.0001%2020.0002C16.1808%2020.0002%2017.2817%2019.6588%2018.2099%2019.0698L19.482%2019.4939L19.4845%2019.4944C19.9717%2019.6567%2020.2158%2019.7381%2020.378%2019.6803C20.5194%2019.6299%2020.6299%2019.5184%2020.6803%2019.3771C20.7382%2019.2146%2020.6572%2018.9706%2020.4943%2018.4821L20.0703%2017.21L20.2123%2016.9746C20.7138%2016.0979%2020.9995%2015.0823%2020.9995%2014C20.9995%2010.6863%2018.3137%208%2015%208L14.7754%208.00414L14.6621%208.00967'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",mRe="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%20-0.5%2025%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%20stroke-width='0.00025'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M19.1168%2012.1484C19.474%2012.3581%2019.9336%2012.2384%2020.1432%2011.8811C20.3528%2011.5238%2020.2331%2011.0643%2019.8758%2010.8547L19.1168%2012.1484ZM6.94331%204.13656L6.55624%204.77902L6.56378%204.78344L6.94331%204.13656ZM5.92408%204.1598L5.50816%203.5357L5.50816%203.5357L5.92408%204.1598ZM5.51031%205.09156L4.76841%205.20151C4.77575%205.25101%204.78802%205.29965%204.80505%205.34671L5.51031%205.09156ZM7.12405%2011.7567C7.26496%2012.1462%207.69495%2012.3477%208.08446%2012.2068C8.47397%2012.0659%208.67549%2011.6359%208.53458%2011.2464L7.12405%2011.7567ZM19.8758%2012.1484C20.2331%2011.9388%2020.3528%2011.4793%2020.1432%2011.122C19.9336%2010.7648%2019.474%2010.6451%2019.1168%2010.8547L19.8758%2012.1484ZM6.94331%2018.8666L6.56375%2018.2196L6.55627%2018.2241L6.94331%2018.8666ZM5.92408%2018.8433L5.50815%2019.4674H5.50815L5.92408%2018.8433ZM5.51031%2017.9116L4.80505%2017.6564C4.78802%2017.7035%204.77575%2017.7521%204.76841%2017.8016L5.51031%2017.9116ZM8.53458%2011.7567C8.67549%2011.3672%208.47397%2010.9372%208.08446%2010.7963C7.69495%2010.6554%207.26496%2010.8569%207.12405%2011.2464L8.53458%2011.7567ZM19.4963%2012.2516C19.9105%2012.2516%2020.2463%2011.9158%2020.2463%2011.5016C20.2463%2011.0873%2019.9105%2010.7516%2019.4963%2010.7516V12.2516ZM7.82931%2010.7516C7.4151%2010.7516%207.07931%2011.0873%207.07931%2011.5016C7.07931%2011.9158%207.4151%2012.2516%207.82931%2012.2516V10.7516ZM19.8758%2010.8547L7.32284%203.48968L6.56378%204.78344L19.1168%2012.1484L19.8758%2010.8547ZM7.33035%203.49414C6.76609%203.15419%206.05633%203.17038%205.50816%203.5357L6.34%204.78391C6.40506%204.74055%206.4893%204.73863%206.55627%204.77898L7.33035%203.49414ZM5.50816%203.5357C4.95998%203.90102%204.67184%204.54987%204.76841%205.20151L6.25221%204.98161C6.24075%204.90427%206.27494%204.82727%206.34%204.78391L5.50816%203.5357ZM4.80505%205.34671L7.12405%2011.7567L8.53458%2011.2464L6.21558%204.83641L4.80505%205.34671ZM19.1168%2010.8547L6.56378%2018.2197L7.32284%2019.5134L19.8758%2012.1484L19.1168%2010.8547ZM6.55627%2018.2241C6.4893%2018.2645%206.40506%2018.2626%206.34%2018.2192L5.50815%2019.4674C6.05633%2019.8327%206.76609%2019.8489%207.33035%2019.509L6.55627%2018.2241ZM6.34%2018.2192C6.27494%2018.1759%206.24075%2018.0988%206.25221%2018.0215L4.76841%2017.8016C4.67184%2018.4532%204.95998%2019.1021%205.50815%2019.4674L6.34%2018.2192ZM6.21558%2018.1667L8.53458%2011.7567L7.12405%2011.2464L4.80505%2017.6564L6.21558%2018.1667ZM19.4963%2010.7516H7.82931V12.2516H19.4963V10.7516Z'%20fill='%23ffffff'/%3e%3c/g%3e%3c/svg%3e";function pRe({chatVisible:s,toggle:e}){const{socketRef:t,currentDocIdRef:i,chatInputValue:n,setChatInputValue:r,chatMessages:o}=du(),a=c=>{r(c.target.value)},l=c=>{c.preventDefault();const h=t.current,d=i.current,g=t.current.id;h&&d&&g?(h.emit("chat-message-backend",{id:d,msg:`${g}: ${n}`}),r("")):console.log("Error, could not send message")};return Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("button",{className:"chat-button",onClick:e,children:Ee.jsx("img",{className:"chat-svg",src:gRe,alt:"chatSvg",style:{width:20,height:20}})}),Ee.jsx("div",{className:`chat-container ${s?"visible":""}`,children:Ee.jsxs("div",{className:"chat-inner-container",children:[Ee.jsx("h3",{className:"chat-header",children:"Chat"}),Ee.jsx("div",{className:"chat-messages",children:o.map((c,h)=>Ee.jsx("div",{children:c},h))}),Ee.jsxs("form",{className:"chat-form",onSubmit:l,children:[Ee.jsx("input",{type:"text",value:n,onChange:a,placeholder:"Type your message...",className:"chat-input"}),Ee.jsx("button",{type:"submit",className:"chat-input-button",children:Ee.jsx("img",{className:"send-svg",src:mRe,alt:"sendSvg",style:{width:20,height:20}})})]})]})})]})}const BJ="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='-3.12%20-3.12%2030.24%2030.24'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M8%209.00006H6.2C5.0799%209.00006%204.51984%209.00006%204.09202%209.21805C3.71569%209.40979%203.40973%209.71575%203.21799%2010.0921C3%2010.5199%203%2011.08%203%2012.2001V17.8001C3%2018.9202%203%2019.4802%203.21799%2019.908C3.40973%2020.2844%203.71569%2020.5903%204.09202%2020.7821C4.51984%2021.0001%205.07989%2021.0001%206.2%2021.0001H17.787C18.9071%2021.0001%2019.4671%2021.0001%2019.895%2020.7821C20.2713%2020.5903%2020.5772%2020.2844%2020.769%2019.908C20.987%2019.4802%2020.987%2018.9202%2020.987%2017.8001V12.0001M6%2015.0001H6.01M10%2015H10.01M11.5189%2012.8946L12.8337%2012.6347C13.5432%2012.4945%2013.8979%2012.4244%2014.2287%2012.2953C14.5223%2012.1807%2014.8013%2012.0318%2015.06%2011.8516C15.3514%2011.6487%2015.607%2011.393%2016.1184%2010.8816L21.2668%205.73321C21.9541%205.04596%2021.9541%203.9317%2021.2668%203.24444C20.5796%202.55719%2019.4653%202.55719%2018.7781%203.24445L13.5416%208.48088C13.0625%208.96004%2012.8229%209.19963%2012.6294%209.47121C12.4576%209.71232%2012.3131%209.97174%2012.1986%2010.2447C12.0696%2010.5522%2011.9921%2010.8821%2011.837%2011.5417L11.5189%2012.8946Z'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e";function _Re({commentsVisible:s,toggle:e,comments:t,highlightComment:i,editComment:n,deleteComment:r}){const[o,a]=Ye.useState(null),[l,c]=Ye.useState(""),h=(g,_)=>{a(g),c(_)},d=()=>{o&&l.trim()&&n(o,l.trim()),a(null),c("")};return Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("button",{className:"comments-button",onClick:e,children:Ee.jsx("img",{src:BJ,alt:"Comments",style:{width:20,height:20}})}),Ee.jsxs("div",{className:`comments-container ${s?"visible":""}`,children:[Ee.jsx("h3",{className:"comments-header",children:"Comments"}),Ee.jsx("div",{className:"comments-inner-container",children:Object.keys(t).length===0?Ee.jsx("p",{children:"No comments yet"}):Object.entries(t).map(([g,_])=>Ee.jsxs("div",{className:"single-comment-container",onClick:()=>i?.(g),children:[o===g?Ee.jsx("input",{type:"text",className:"comment-edit-input",value:l,autoFocus:!0,onChange:b=>c(b.target.value),onBlur:d,onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),d())}}):Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("span",{className:"single-comment-container-comment",children:_.text}),Ee.jsx("button",{className:"single-comment-delete",onClick:b=>{b.stopPropagation(),r?.(g)},children:"☒"}),Ee.jsx("button",{className:"comment-edit-input-button",onClick:b=>{b.stopPropagation(),h(g,_.text)},children:"✎"})]}),_.content&&Ee.jsxs("div",{className:"single-comment-container-text",children:['Relating to: "',_.content.length>30?_.content.slice(0,27)+"…":_.content,'"']})]},g))})]})]})}function bRe(){const{content:s,socketContentChange:e,localTitle:t,setLocalTitle:i,socketTitleChange:n,socketRef:r,chatDisplayed:o,setChatDisplayed:a,commentsDisplayed:l,setCommentsDisplayed:c,currentDocIdRef:h,chatMessages:d,setChatMessages:g}=du(),_=Ye.useRef(null),b=Ye.useRef(null),[C,S]=Ye.useState(null),[E,x]=Ye.useState({}),T=r.current,N=Be.import("blots/inline");class A extends N{static blotName="comment";static tagName="span";static className="comment-quill";static create(B){const F=super.create();return F.setAttribute("comment-id",B.id),F.setAttribute("data-comment",B.commentData),F}static formats(B){return{id:B.getAttribute("comment-id"),commentData:B.getAttribute("data-comment")}}format(B,F){B==="comment"&&F?(this.domNode.setAttribute("comment-id",F.id),this.domNode.setAttribute("data-comment",F.commentData)):super.format(B,F)}static value(B){const F=B.getAttribute("comment-id"),W=B.getAttribute("data-comment");return F?{id:F,commentData:W}:null}}Be.register(A);const P=Y=>{if(!Y||!Y.ops)return{};const B={};return Y.ops.forEach(F=>{if(F.attributes?.comment){const{id:W,commentData:ee}=F.attributes.comment;W&&ee!=null&&(B[W]={id:W,text:ee,content:typeof F.insert=="string"?F.insert:""})}}),B};Ye.useEffect(()=>{const Y=document.createElement("div");_.current&&(_.current.innerHTML="",_.current.appendChild(Y));const B=[[{font:[]}],[{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["blockquote","code-block"],["link","image","video"],["clean"]],F=new Be(Y,{theme:"snow",modules:{toolbar:B}});return b.current=F,s?.ops&&s.ops.length>0?(F.setContents(s),x(P(s))):(F.setContents({ops:[]}),x({})),F.on("selection-change",(W,ee,X)=>{if(!W||W.length===0||X!=="user"){S(null);return}const $=F.getBounds(W),te=_.current.querySelector(".ql-editor"),ce=te.getBoundingClientRect(),j=_.current.querySelector(".ql-toolbar")?.getBoundingClientRect().height||0;S({range:W,text:F.getText(W.index,W.length),position:{top:$.top+ce.top+window.scrollY+te.scrollTop-j,left:$.left+ce.left+window.scrollX,height:$.height}})}),F.on("text-change",(W,ee,X)=>{if(X!=="user")return;e(W);const $=F.getContents();x(P($))}),T.on("remote-delta-content-change",({delta:W,author:ee})=>{if(!F||ee===T.id)return;const X=new bt(W);F.updateContents(X,"api");const $=P(F.getContents());x($)}),T.on("document-title-updated",({id:W,title:ee})=>{W===h.current&&i(ee)}),T.on("chat-message-frontend",({id:W,msg:ee})=>{W===h.current&&g(X=>{const $=[...X,ee];return g($),$})}),T.on("document-initial-join",({id:W,content:ee,title:X})=>{W===h.current&&(ee?.ops&&ee.ops.length>0&&(F.setContents(ee),x(P(ee))),i(X||""))}),T.on("error",W=>{console.error("Socket error:",W)}),c(!0),()=>{F.off("selection-change"),F.off("text-change"),T.off("remote-delta-content-change"),T.off("document-title-updated"),T.off("chat-message-frontend"),T.off("document-initial-join"),T.off("error"),g([]),h.current&&T.emit("leave-document-room",h.current)}},[]),Ye.useEffect(()=>{if(l&&b.current){const Y=b.current.getContents(),B=P(Y);x(F=>JSON.stringify(F)!==JSON.stringify(B)?B:F)}},[l]);const O=Y=>{const B=b.current,F=B.getSelection();if(!F||F.length===0)return;const W=B.getText(F.index,F.length);if(!W.trim())return;const ee=Date.now().toString(),X=new bt().retain(F.index).delete(F.length).insert(W,{comment:{id:ee,commentData:Y}});B.updateContents(X,"user");const $=B.getContents();x(P($)),e(X),S(null)},V=(Y,B)=>{if(!B.trim())return;const F=b.current,W=F.root.querySelector(`span.comment-quill[comment-id="${Y}"]`);if(!W)return;const ee=Be.find(W),X=F.getIndex(ee),$=ee.domNode.innerText,te=new bt().retain(X).delete($.length).insert($,{comment:{id:Y,commentData:B}});F.updateContents(te,"user"),e(te);const ce=P(F.getContents());x(ce)},U=Y=>{const B=b.current,F=B.root.querySelector(`span.comment-quill[comment-id="${Y}"]`);if(!F)return;const W=Be.find(F);if(!W)return;const ee=B.getIndex(W),X=W.domNode.innerText,$=new bt().retain(ee).delete(X.length).insert(X);B.updateContents($,"user"),e($);const te=P(B.getContents());x(te)};return Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("input",{className:"document-title-input",type:"text",value:t||"",onChange:Y=>{i(Y.target.value),n(Y.target.value)},placeholder:"Enter a document title..."}),Ee.jsx("div",{className:"quill-editor-container",ref:_}),C&&C.text.trim()&&Ee.jsx("div",{style:{position:"absolute",top:Math.max(0,C.position.top-2),left:C.position.left,zIndex:1e3},children:Ee.jsx("button",{className:"add-comment-button",onClick:()=>{const Y=prompt("Enter your comment:");Y?.trim()&&O(Y.trim())},children:Ee.jsx("img",{className:"add-svg",src:BJ,alt:"addSvg",style:{width:29,height:29}})})}),Ee.jsx(pRe,{chatVisible:o,toggle:()=>a(Y=>!Y),messages:d}),Ee.jsx(_Re,{commentsVisible:l,toggle:()=>c(Y=>!Y),comments:E,highlightComment:Y=>{const B=b.current,F=B.root.querySelector(`span.comment-quill[comment-id="${Y}"]`);if(F){const W=Be.find(F),ee=B.getIndex(W);B.setSelection(ee,F.innerText.length,"user")}},editComment:V,deleteComment:U})]})}function bj(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,i=Array(e);t<e;t++)i[t]=s[t];return i}function vRe(s){if(Array.isArray(s))return s}function wRe(s,e,t){return(e=ERe(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function CRe(s,e){var t=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(t!=null){var i,n,r,o,a=[],l=!0,c=!1;try{if(r=(t=t.call(s)).next,e!==0)for(;!(l=(i=r.call(t)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(h){c=!0,n=h}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw n}}return a}}function yRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vj(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function wj(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vj(Object(t),!0).forEach(function(i){wRe(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):vj(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function SRe(s,e){if(s==null)return{};var t,i,n=LRe(s,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);for(i=0;i<r.length;i++)t=r[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(s,t)&&(n[t]=s[t])}return n}function LRe(s,e){if(s==null)return{};var t={};for(var i in s)if({}.hasOwnProperty.call(s,i)){if(e.indexOf(i)!==-1)continue;t[i]=s[i]}return t}function xRe(s,e){return vRe(s)||CRe(s,e)||TRe(s,e)||yRe()}function kRe(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var i=t.call(s,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function ERe(s){var e=kRe(s,"string");return typeof e=="symbol"?e:e+""}function TRe(s,e){if(s){if(typeof s=="string")return bj(s,e);var t={}.toString.call(s).slice(8,-1);return t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set"?Array.from(s):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?bj(s,e):void 0}}function DRe(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function Cj(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),t.push.apply(t,i)}return t}function yj(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Cj(Object(t),!0).forEach(function(i){DRe(s,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Cj(Object(t)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(t,i))})}return s}function NRe(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return function(i){return e.reduceRight(function(n,r){return r(n)},i)}}function nL(s){return function e(){for(var t=this,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return n.length>=s.length?s.apply(this,n):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(t,[].concat(n,a))}}}function XI(s){return{}.toString.call(s).includes("Object")}function IRe(s){return!Object.keys(s).length}function b2(s){return typeof s=="function"}function ARe(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function RRe(s,e){return XI(e)||ip("changeType"),Object.keys(e).some(function(t){return!ARe(s,t)})&&ip("changeField"),e}function MRe(s){b2(s)||ip("selectorType")}function ORe(s){b2(s)||XI(s)||ip("handlerType"),XI(s)&&Object.values(s).some(function(e){return!b2(e)})&&ip("handlersType")}function PRe(s){s||ip("initialIsRequired"),XI(s)||ip("initialType"),IRe(s)&&ip("initialContent")}function BRe(s,e){throw new Error(s[e]||s.default)}var FRe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ip=nL(BRe)(FRe),bD={changes:RRe,selector:MRe,handler:ORe,initial:PRe};function VRe(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bD.initial(s),bD.handler(e);var t={current:s},i=nL(zRe)(t,e),n=nL(WRe)(t),r=nL(bD.changes)(s),o=nL(HRe)(t);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return bD.selector(c),c(t.current)}function l(c){NRe(i,n,r,o)(c)}return[a,l]}function HRe(s,e){return b2(e)?e(s.current):e}function WRe(s,e){return s.current=yj(yj({},s.current),e),e}function zRe(s,e,t){return b2(e)?e(s.current):Object.keys(t).forEach(function(i){var n;return(n=e[i])===null||n===void 0?void 0:n.call(e,s.current[i])}),t}var URe={create:VRe},qRe={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}};function $Re(s){return function e(){for(var t=this,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return n.length>=s.length?s.apply(this,n):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(t,[].concat(n,a))}}}function jRe(s){return{}.toString.call(s).includes("Object")}function GRe(s){return s||Sj("configIsRequired"),jRe(s)||Sj("configType"),s.urls?(KRe(),{paths:{vs:s.urls.monacoBase}}):s}function KRe(){console.warn(FJ.deprecation)}function YRe(s,e){throw new Error(s[e]||s.default)}var FJ={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Sj=$Re(YRe)(FJ),ZRe={config:GRe},XRe=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduceRight(function(r,o){return o(r)},n)}};function VJ(s,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&s[t]&&Object.assign(e[t],VJ(s[t],e[t]))}),wj(wj({},s),e)}var QRe={type:"cancelation",msg:"operation is manually canceled"};function J5(s){var e=!1,t=new Promise(function(i,n){s.then(function(r){return e?n(QRe):i(r)}),s.catch(n)});return t.cancel=function(){return e=!0},t}var JRe=["monaco"],e4e=URe.create({config:qRe,isInitialized:!1,resolve:null,reject:null,monaco:null}),HJ=xRe(e4e,2),sk=HJ[0],s4=HJ[1];function t4e(s){var e=ZRe.config(s),t=e.monaco,i=SRe(e,JRe);s4(function(n){return{config:VJ(n.config,i),monaco:t}})}function i4e(){var s=sk(function(e){var t=e.monaco,i=e.isInitialized,n=e.resolve;return{monaco:t,isInitialized:i,resolve:n}});if(!s.isInitialized){if(s4({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),J5(eO);if(window.monaco&&window.monaco.editor)return WJ(window.monaco),s.resolve(window.monaco),J5(eO);XRe(n4e,r4e)(o4e)}return J5(eO)}function n4e(s){return document.body.appendChild(s)}function s4e(s){var e=document.createElement("script");return s&&(e.src=s),e}function r4e(s){var e=sk(function(i){var n=i.config,r=i.reject;return{config:n,reject:r}}),t=s4e("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return s()},t.onerror=e.reject,t}function o4e(){var s=sk(function(t){var i=t.config,n=t.resolve,r=t.reject;return{config:i,resolve:n,reject:r}}),e=window.require;e.config(s.config),e(["vs/editor/editor.main"],function(t){var i=t.m;WJ(i),s.resolve(i)},function(t){s.reject(t)})}function WJ(s){sk().monaco||s4({monaco:s})}function a4e(){return sk(function(s){var e=s.monaco;return e})}var eO=new Promise(function(s,e){return s4({resolve:s,reject:e})}),zJ={config:t4e,init:i4e,__getMonacoInstance:a4e},l4e={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},tO=l4e,c4e={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},u4e=c4e;function h4e({children:s}){return Cw.createElement("div",{style:u4e.container},s)}var d4e=h4e,f4e=d4e;function g4e({width:s,height:e,isEditorReady:t,loading:i,_ref:n,className:r,wrapperProps:o}){return Cw.createElement("section",{style:{...tO.wrapper,width:s,height:e},...o},!t&&Cw.createElement(f4e,null,i),Cw.createElement("div",{ref:n,style:{...tO.fullWidth,...!t&&tO.hide},className:r}))}var m4e=g4e,UJ=Ye.memo(m4e);function p4e(s){Ye.useEffect(s,[])}var qJ=p4e;function _4e(s,e,t=!0){let i=Ye.useRef(!0);Ye.useEffect(i.current||!t?()=>{i.current=!1}:s,e)}var uc=_4e;function $L(){}function ow(s,e,t,i){return b4e(s,i)||v4e(s,e,t,i)}function b4e(s,e){return s.editor.getModel($J(s,e))}function v4e(s,e,t,i){return s.editor.createModel(e,t,i?$J(s,i):void 0)}function $J(s,e){return s.Uri.parse(e)}function w4e({original:s,modified:e,language:t,originalLanguage:i,modifiedLanguage:n,originalModelPath:r,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:c="light",loading:h="Loading...",options:d={},height:g="100%",width:_="100%",className:b,wrapperProps:C={},beforeMount:S=$L,onMount:E=$L}){let[x,T]=Ye.useState(!1),[N,A]=Ye.useState(!0),P=Ye.useRef(null),O=Ye.useRef(null),V=Ye.useRef(null),U=Ye.useRef(E),Y=Ye.useRef(S),B=Ye.useRef(!1);qJ(()=>{let X=zJ.init();return X.then($=>(O.current=$)&&A(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>P.current?ee():X.cancel()}),uc(()=>{if(P.current&&O.current){let X=P.current.getOriginalEditor(),$=ow(O.current,s||"",i||t||"text",r||"");$!==X.getModel()&&X.setModel($)}},[r],x),uc(()=>{if(P.current&&O.current){let X=P.current.getModifiedEditor(),$=ow(O.current,e||"",n||t||"text",o||"");$!==X.getModel()&&X.setModel($)}},[o],x),uc(()=>{let X=P.current.getModifiedEditor();X.getOption(O.current.editor.EditorOption.readOnly)?X.setValue(e||""):e!==X.getValue()&&(X.executeEdits("",[{range:X.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),X.pushUndoStop())},[e],x),uc(()=>{P.current?.getModel()?.original.setValue(s||"")},[s],x),uc(()=>{let{original:X,modified:$}=P.current.getModel();O.current.editor.setModelLanguage(X,i||t||"text"),O.current.editor.setModelLanguage($,n||t||"text")},[t,i,n],x),uc(()=>{O.current?.editor.setTheme(c)},[c],x),uc(()=>{P.current?.updateOptions(d)},[d],x);let F=Ye.useCallback(()=>{if(!O.current)return;Y.current(O.current);let X=ow(O.current,s||"",i||t||"text",r||""),$=ow(O.current,e||"",n||t||"text",o||"");P.current?.setModel({original:X,modified:$})},[t,e,n,s,i,r,o]),W=Ye.useCallback(()=>{!B.current&&V.current&&(P.current=O.current.editor.createDiffEditor(V.current,{automaticLayout:!0,...d}),F(),O.current?.editor.setTheme(c),T(!0),B.current=!0)},[d,c,F]);Ye.useEffect(()=>{x&&U.current(P.current,O.current)},[x]),Ye.useEffect(()=>{!N&&!x&&W()},[N,x,W]);function ee(){let X=P.current?.getModel();a||X?.original?.dispose(),l||X?.modified?.dispose(),P.current?.dispose()}return Cw.createElement(UJ,{width:_,height:g,isEditorReady:x,loading:h,_ref:V,className:b,wrapperProps:C})}var C4e=w4e;Ye.memo(C4e);function y4e(s){let e=Ye.useRef();return Ye.useEffect(()=>{e.current=s},[s]),e.current}var S4e=y4e,vD=new Map;function L4e({defaultValue:s,defaultLanguage:e,defaultPath:t,value:i,language:n,path:r,theme:o="light",line:a,loading:l="Loading...",options:c={},overrideServices:h={},saveViewState:d=!0,keepCurrentModel:g=!1,width:_="100%",height:b="100%",className:C,wrapperProps:S={},beforeMount:E=$L,onMount:x=$L,onChange:T,onValidate:N=$L}){let[A,P]=Ye.useState(!1),[O,V]=Ye.useState(!0),U=Ye.useRef(null),Y=Ye.useRef(null),B=Ye.useRef(null),F=Ye.useRef(x),W=Ye.useRef(E),ee=Ye.useRef(),X=Ye.useRef(i),$=S4e(r),te=Ye.useRef(!1),ce=Ye.useRef(!1);qJ(()=>{let ae=zJ.init();return ae.then(Te=>(U.current=Te)&&V(!1)).catch(Te=>Te?.type!=="cancelation"&&console.error("Monaco initialization: error:",Te)),()=>Y.current?j():ae.cancel()}),uc(()=>{let ae=ow(U.current,s||i||"",e||n||"",r||t||"");ae!==Y.current?.getModel()&&(d&&vD.set($,Y.current?.saveViewState()),Y.current?.setModel(ae),d&&Y.current?.restoreViewState(vD.get(r)))},[r],A),uc(()=>{Y.current?.updateOptions(c)},[c],A),uc(()=>{!Y.current||i===void 0||(Y.current.getOption(U.current.editor.EditorOption.readOnly)?Y.current.setValue(i):i!==Y.current.getValue()&&(ce.current=!0,Y.current.executeEdits("",[{range:Y.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),Y.current.pushUndoStop(),ce.current=!1))},[i],A),uc(()=>{let ae=Y.current?.getModel();ae&&n&&U.current?.editor.setModelLanguage(ae,n)},[n],A),uc(()=>{a!==void 0&&Y.current?.revealLine(a)},[a],A),uc(()=>{U.current?.editor.setTheme(o)},[o],A);let he=Ye.useCallback(()=>{if(!(!B.current||!U.current)&&!te.current){W.current(U.current);let ae=r||t,Te=ow(U.current,i||s||"",e||n||"",ae||"");Y.current=U.current?.editor.create(B.current,{model:Te,automaticLayout:!0,...c},h),d&&Y.current.restoreViewState(vD.get(ae)),U.current.editor.setTheme(o),a!==void 0&&Y.current.revealLine(a),P(!0),te.current=!0}},[s,e,t,i,n,r,c,h,d,o,a]);Ye.useEffect(()=>{A&&F.current(Y.current,U.current)},[A]),Ye.useEffect(()=>{!O&&!A&&he()},[O,A,he]),X.current=i,Ye.useEffect(()=>{A&&T&&(ee.current?.dispose(),ee.current=Y.current?.onDidChangeModelContent(ae=>{ce.current||T(Y.current.getValue(),ae)}))},[A,T]),Ye.useEffect(()=>{if(A){let ae=U.current.editor.onDidChangeMarkers(Te=>{let Le=Y.current.getModel()?.uri;if(Le&&Te.find(Oe=>Oe.path===Le.path)){let Oe=U.current.editor.getModelMarkers({resource:Le});N?.(Oe)}});return()=>{ae?.dispose()}}return()=>{}},[A,N]);function j(){ee.current?.dispose(),g?d&&vD.set(r,Y.current.saveViewState()):Y.current.getModel()?.dispose(),Y.current.dispose()}return Cw.createElement(UJ,{width:_,height:b,isEditorReady:A,loading:l,_ref:B,className:C,wrapperProps:S})}var x4e=L4e,k4e=Ye.memo(x4e),E4e=k4e;function T4e({output:s}){const e=!!s;return Ee.jsxs("div",{className:`code-output-container ${e?"active":""}`,children:[Ee.jsx("h2",{className:"code-output-header",children:"API Code Output (JS)"}),Ee.jsx("div",{className:"code-output-inner-container",children:e&&Ee.jsx("p",{children:String(s)})})]})}function D4e(){const s=Ye.useRef(null),{codeContent:e,setCodeContent:t,codeTitle:i,setCodeTitle:n,currentCodeDocId:r,codeOutput:o,setCodeOutput:a,isRemoteChange:l,runCodeApi:c}=TF(),{socketRef:h}=du(),d=h.current,g=C=>{s.current=C;const S=e.code===null||e.code===""?"// Welcome! This code document is empty. Enjoy the coding!":e.code;C.setValue(S),C.updateOptions({fontFamily:"Menlo"})},_=C=>{l.current||!r||d.emit("update-code-content",{id:r,code:C||""})},b=C=>{const S=C.target.value;n(S),r&&d.emit("update-code-title",{id:r,title:S})};return Ye.useEffect(()=>{if(!(!d||!r))return d.on("code-content-updated",({id:C,code:S})=>{C!==r||typeof S!="string"||(l.current=!0,s.current?.setValue(S),l.current=!1,t({code:S}))}),d.on("code-title-updated",({id:C,title:S})=>{C!==r||typeof S!="string"||n(S)}),d.on("code-error",({error:C})=>{console.error("Socket error:",C)}),()=>{d.off("code-content-updated"),d.off("code-title-updated"),d.off("code-error"),r&&d.emit("leave-document-room",r.current)}},[d,r]),Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("input",{className:"code-title-input",type:"text",value:i||"",onChange:b,placeholder:"Enter code title"}),Ee.jsxs("div",{className:"code-editor-container",children:[Ee.jsx(E4e,{height:"400px",defaultLanguage:"javascript",onMount:g,onChange:_}),Ee.jsx("button",{className:"code-button",onClick:()=>c(s),children:"➤ Run Code"})]}),Ee.jsx(T4e,{output:o})]})}function N4e(){const{mode:s,setMode:e,switchToViewMode:t,createDocument:i,createCodeModule:n}=du(),{switchToViewModeCode:r}=TF();return Ee.jsx(Ee.Fragment,{children:Ee.jsxs("div",{className:"main-content",children:[Ee.jsxs("div",{className:"top-button-container",children:[s==="view"&&Ee.jsxs(Ee.Fragment,{children:[Ee.jsx("button",{onClick:i,className:"top-button back-button",type:"button",children:"Create New Document"}),Ee.jsx("button",{onClick:n,className:"top-button back-button code-button",type:"button",children:"Create New Code Module"})]}),(s==="signup"||s==="reset-password")&&Ee.jsx("button",{onClick:()=>e("login"),className:"top-button back-button",type:"button",children:"← Back"}),(s==="update"||s==="profile")&&Ee.jsx("button",{onClick:t,className:"top-button back-button",type:"button",children:"← Back"}),s==="code-edit"&&Ee.jsx("button",{onClick:r,className:"top-button back-button code-button",type:"button",children:"← Back"}),Ee.jsx("br",{})]}),s==="login"&&Ee.jsx(ake,{}),s==="signup"&&Ee.jsx(lke,{}),s==="reset-password"&&Ee.jsx(cke,{}),s==="profile"&&Ee.jsx(uke,{}),s==="view"&&Ee.jsx(hke,{}),s==="update"&&Ee.jsx(Ee.Fragment,{children:Ee.jsx(bRe,{},"document-quill-editor-form")}),s==="code-edit"&&Ee.jsx(Ee.Fragment,{children:Ee.jsx(D4e,{},"document-code-editor")})]})})}function I4e(){return Ee.jsx(Ee.Fragment,{children:Ee.jsx("main",{children:Ee.jsx(N4e,{})})})}function A4e(){return Ee.jsx(nke,{children:Ee.jsxs(oke,{children:[Ee.jsx(rke,{}),Ee.jsx(I4e,{})]})})}Lee.createRoot(document.getElementById("root")).render(Ee.jsx(A4e,{}))});export default R4e();
